"use strict";var YJe=Object.create;var S_=Object.defineProperty;var Kge=Object.getOwnPropertyDescriptor;var KJe=Object.getOwnPropertyNames;var JJe=Object.getPrototypeOf,XJe=Object.prototype.hasOwnProperty;var zge=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t),Yge=t=>{throw TypeError(t)};var s=(t,e)=>S_(t,"name",{value:e,configurable:!0});var ZJe=(t,e)=>()=>(t&&(e=t(t=0)),e);var H=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),d1=(t,e)=>{for(var n in e)S_(t,n,{get:e[n],enumerable:!0})},Jge=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of KJe(e))!XJe.call(t,i)&&i!==n&&S_(t,i,{get:()=>e[i],enumerable:!(r=Kge(e,i))||r.enumerable});return t};var je=(t,e,n)=>(n=t!=null?YJe(JJe(t)):{},Jge(e||!t||!t.__esModule?S_(n,"default",{value:t,enumerable:!0}):n,t)),eXe=t=>Jge(S_({},"__esModule",{value:!0}),t),Cu=(t,e,n,r)=>{for(var i=r>1?void 0:r?Kge(e,n):e,o=t.length-1,a;o>=0;o--)(a=t[o])&&(i=(r?a(e,n,i):a(i))||i);return r&&i&&S_(e,n,i),i},Bs=(t,e)=>(n,r)=>e(n,r,t);var WJ=(t,e,n)=>{if(e!=null){typeof e!="object"&&typeof e!="function"&&Yge("Object expected");var r,i;n&&(r=e[zge("asyncDispose")]),r===void 0&&(r=e[zge("dispose")],n&&(i=r)),typeof r!="function"&&Yge("Object not disposable"),i&&(r=function(){try{i.call(this)}catch(o){return Promise.reject(o)}}),t.push([n,r,e])}else n&&t.push([n]);return e},HJ=(t,e,n)=>{var r=typeof SuppressedError=="function"?SuppressedError:function(a,l,c,u){return u=Error(c),u.name="SuppressedError",u.error=a,u.suppressed=l,u},i=a=>e=n?new r(a,e,"An error was suppressed during disposal"):(n=!0,a),o=a=>{for(;a=t.pop();)try{var l=a[1]&&a[1].call(a[2]);if(a[0])return Promise.resolve(l).then(o,c=>(i(c),o()))}catch(c){i(c)}if(n)throw e};return o()};var importMetaUrlShim,f=ZJe(()=>{"use strict";importMetaUrlShim=typeof document>"u"?require("node:url").pathToFileURL(__filename).href:importMetaUrlShim});var Zge=H(GJ=>{f();var Xge="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");GJ.encode=function(t){if(0<=t&&t<Xge.length)return Xge[t];throw new TypeError("Must be between 0 and 63: "+t)};GJ.decode=function(t){var e=65,n=90,r=97,i=122,o=48,a=57,l=43,c=47,u=26,d=52;return e<=t&&t<=n?t-e:r<=t&&t<=i?t-r+u:o<=t&&t<=a?t-o+d:t==l?62:t==c?63:-1}});var $J=H(VJ=>{f();var eAe=Zge(),jJ=5,tAe=1<<jJ,nAe=tAe-1,rAe=tAe;function tXe(t){return t<0?(-t<<1)+1:(t<<1)+0}s(tXe,"toVLQSigned");function nXe(t){var e=(t&1)===1,n=t>>1;return e?-n:n}s(nXe,"fromVLQSigned");VJ.encode=s(function(e){var n="",r,i=tXe(e);do r=i&nAe,i>>>=jJ,i>0&&(r|=rAe),n+=eAe.encode(r);while(i>0);return n},"base64VLQ_encode");VJ.decode=s(function(e,n,r){var i=e.length,o=0,a=0,l,c;do{if(n>=i)throw new Error("Expected more digits in base 64 VLQ value.");if(c=eAe.decode(e.charCodeAt(n++)),c===-1)throw new Error("Invalid base64 digit: "+e.charAt(n-1));l=!!(c&rAe),c&=nAe,o=o+(c<<a),a+=jJ}while(l);r.value=nXe(o),r.rest=n},"base64VLQ_decode")});var B_=H(Lc=>{f();function rXe(t,e,n){if(e in t)return t[e];if(arguments.length===3)return n;throw new Error('"'+e+'" is a required argument.')}s(rXe,"getArg");Lc.getArg=rXe;var iAe=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,iXe=/^data:.+\,.+$/;function pB(t){var e=t.match(iAe);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}s(pB,"urlParse");Lc.urlParse=pB;function R_(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}s(R_,"urlGenerate");Lc.urlGenerate=R_;function zJ(t){var e=t,n=pB(t);if(n){if(!n.path)return t;e=n.path}for(var r=Lc.isAbsolute(e),i=e.split(/\/+/),o,a=0,l=i.length-1;l>=0;l--)o=i[l],o==="."?i.splice(l,1):o===".."?a++:a>0&&(o===""?(i.splice(l+1,a),a=0):(i.splice(l,2),a--));return e=i.join("/"),e===""&&(e=r?"/":"."),n?(n.path=e,R_(n)):e}s(zJ,"normalize");Lc.normalize=zJ;function oAe(t,e){t===""&&(t="."),e===""&&(e=".");var n=pB(e),r=pB(t);if(r&&(t=r.path||"/"),n&&!n.scheme)return r&&(n.scheme=r.scheme),R_(n);if(n||e.match(iXe))return e;if(r&&!r.host&&!r.path)return r.host=e,R_(r);var i=e.charAt(0)==="/"?e:zJ(t.replace(/\/+$/,"")+"/"+e);return r?(r.path=i,R_(r)):i}s(oAe,"join");Lc.join=oAe;Lc.isAbsolute=function(t){return t.charAt(0)==="/"||iAe.test(t)};function oXe(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var n=0;e.indexOf(t+"/")!==0;){var r=t.lastIndexOf("/");if(r<0||(t=t.slice(0,r),t.match(/^([^\/]+:\/)?\/*$/)))return e;++n}return Array(n+1).join("../")+e.substr(t.length+1)}s(oXe,"relative");Lc.relative=oXe;var sAe=function(){var t=Object.create(null);return!("__proto__"in t)}();function aAe(t){return t}s(aAe,"identity");function sXe(t){return lAe(t)?"$"+t:t}s(sXe,"toSetString");Lc.toSetString=sAe?aAe:sXe;function aXe(t){return lAe(t)?t.slice(1):t}s(aXe,"fromSetString");Lc.fromSetString=sAe?aAe:aXe;function lAe(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var n=e-10;n>=0;n--)if(t.charCodeAt(n)!==36)return!1;return!0}s(lAe,"isProtoString");function lXe(t,e,n){var r=k_(t.source,e.source);return r!==0||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0||n)||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=t.generatedLine-e.generatedLine,r!==0)?r:k_(t.name,e.name)}s(lXe,"compareByOriginalPositions");Lc.compareByOriginalPositions=lXe;function cXe(t,e,n){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0||n)||(r=k_(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:k_(t.name,e.name)}s(cXe,"compareByGeneratedPositionsDeflated");Lc.compareByGeneratedPositionsDeflated=cXe;function k_(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}s(k_,"strcmp");function uXe(t,e){var n=t.generatedLine-e.generatedLine;return n!==0||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=k_(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:k_(t.name,e.name)}s(uXe,"compareByGeneratedPositionsInflated");Lc.compareByGeneratedPositionsInflated=uXe;function dXe(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}s(dXe,"parseSourceMapInput");Lc.parseSourceMapInput=dXe;function fXe(t,e,n){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),n){var r=pB(n);if(!r)throw new Error("sourceMapURL could not be parsed");if(r.path){var i=r.path.lastIndexOf("/");i>=0&&(r.path=r.path.substring(0,i+1))}e=oAe(R_(r),e)}return zJ(e)}s(fXe,"computeSourceURL");Lc.computeSourceURL=fXe});var JJ=H(cAe=>{f();var YJ=B_(),KJ=Object.prototype.hasOwnProperty,JE=typeof Map<"u";function f1(){this._array=[],this._set=JE?new Map:Object.create(null)}s(f1,"ArraySet");f1.fromArray=s(function(e,n){for(var r=new f1,i=0,o=e.length;i<o;i++)r.add(e[i],n);return r},"ArraySet_fromArray");f1.prototype.size=s(function(){return JE?this._set.size:Object.getOwnPropertyNames(this._set).length},"ArraySet_size");f1.prototype.add=s(function(e,n){var r=JE?e:YJ.toSetString(e),i=JE?this.has(e):KJ.call(this._set,r),o=this._array.length;(!i||n)&&this._array.push(e),i||(JE?this._set.set(e,o):this._set[r]=o)},"ArraySet_add");f1.prototype.has=s(function(e){if(JE)return this._set.has(e);var n=YJ.toSetString(e);return KJ.call(this._set,n)},"ArraySet_has");f1.prototype.indexOf=s(function(e){if(JE){var n=this._set.get(e);if(n>=0)return n}else{var r=YJ.toSetString(e);if(KJ.call(this._set,r))return this._set[r]}throw new Error('"'+e+'" is not in the set.')},"ArraySet_indexOf");f1.prototype.at=s(function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)},"ArraySet_at");f1.prototype.toArray=s(function(){return this._array.slice()},"ArraySet_toArray");cAe.ArraySet=f1});var fAe=H(dAe=>{f();var uAe=B_();function pXe(t,e){var n=t.generatedLine,r=e.generatedLine,i=t.generatedColumn,o=e.generatedColumn;return r>n||r==n&&o>=i||uAe.compareByGeneratedPositionsInflated(t,e)<=0}s(pXe,"generatedPositionAfter");function F7(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}s(F7,"MappingList");F7.prototype.unsortedForEach=s(function(e,n){this._array.forEach(e,n)},"MappingList_forEach");F7.prototype.add=s(function(e){pXe(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))},"MappingList_add");F7.prototype.toArray=s(function(){return this._sorted||(this._array.sort(uAe.compareByGeneratedPositionsInflated),this._sorted=!0),this._array},"MappingList_toArray");dAe.MappingList=F7});var XJ=H(pAe=>{f();var mB=$J(),Wa=B_(),M7=JJ().ArraySet,mXe=fAe().MappingList;function gf(t){t||(t={}),this._file=Wa.getArg(t,"file",null),this._sourceRoot=Wa.getArg(t,"sourceRoot",null),this._skipValidation=Wa.getArg(t,"skipValidation",!1),this._sources=new M7,this._names=new M7,this._mappings=new mXe,this._sourcesContents=null}s(gf,"SourceMapGenerator");gf.prototype._version=3;gf.fromSourceMap=s(function(e){var n=e.sourceRoot,r=new gf({file:e.file,sourceRoot:n});return e.eachMapping(function(i){var o={generated:{line:i.generatedLine,column:i.generatedColumn}};i.source!=null&&(o.source=i.source,n!=null&&(o.source=Wa.relative(n,o.source)),o.original={line:i.originalLine,column:i.originalColumn},i.name!=null&&(o.name=i.name)),r.addMapping(o)}),e.sources.forEach(function(i){var o=i;n!==null&&(o=Wa.relative(n,i)),r._sources.has(o)||r._sources.add(o);var a=e.sourceContentFor(i);a!=null&&r.setSourceContent(i,a)}),r},"SourceMapGenerator_fromSourceMap");gf.prototype.addMapping=s(function(e){var n=Wa.getArg(e,"generated"),r=Wa.getArg(e,"original",null),i=Wa.getArg(e,"source",null),o=Wa.getArg(e,"name",null);this._skipValidation||this._validateMapping(n,r,i,o),i!=null&&(i=String(i),this._sources.has(i)||this._sources.add(i)),o!=null&&(o=String(o),this._names.has(o)||this._names.add(o)),this._mappings.add({generatedLine:n.line,generatedColumn:n.column,originalLine:r!=null&&r.line,originalColumn:r!=null&&r.column,source:i,name:o})},"SourceMapGenerator_addMapping");gf.prototype.setSourceContent=s(function(e,n){var r=e;this._sourceRoot!=null&&(r=Wa.relative(this._sourceRoot,r)),n!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[Wa.toSetString(r)]=n):this._sourcesContents&&(delete this._sourcesContents[Wa.toSetString(r)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))},"SourceMapGenerator_setSourceContent");gf.prototype.applySourceMap=s(function(e,n,r){var i=n;if(n==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);i=e.file}var o=this._sourceRoot;o!=null&&(i=Wa.relative(o,i));var a=new M7,l=new M7;this._mappings.unsortedForEach(function(c){if(c.source===i&&c.originalLine!=null){var u=e.originalPositionFor({line:c.originalLine,column:c.originalColumn});u.source!=null&&(c.source=u.source,r!=null&&(c.source=Wa.join(r,c.source)),o!=null&&(c.source=Wa.relative(o,c.source)),c.originalLine=u.line,c.originalColumn=u.column,u.name!=null&&(c.name=u.name))}var d=c.source;d!=null&&!a.has(d)&&a.add(d);var p=c.name;p!=null&&!l.has(p)&&l.add(p)},this),this._sources=a,this._names=l,e.sources.forEach(function(c){var u=e.sourceContentFor(c);u!=null&&(r!=null&&(c=Wa.join(r,c)),o!=null&&(c=Wa.relative(o,c)),this.setSourceContent(c,u))},this)},"SourceMapGenerator_applySourceMap");gf.prototype._validateMapping=s(function(e,n,r,i){if(n&&typeof n.line!="number"&&typeof n.column!="number")throw new Error("original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.");if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!n&&!r&&!i)){if(e&&"line"in e&&"column"in e&&n&&"line"in n&&"column"in n&&e.line>0&&e.column>=0&&n.line>0&&n.column>=0&&r)return;throw new Error("Invalid mapping: "+JSON.stringify({generated:e,source:r,original:n,name:i}))}},"SourceMapGenerator_validateMapping");gf.prototype._serializeMappings=s(function(){for(var e=0,n=1,r=0,i=0,o=0,a=0,l="",c,u,d,p,m=this._mappings.toArray(),h=0,g=m.length;h<g;h++){if(u=m[h],c="",u.generatedLine!==n)for(e=0;u.generatedLine!==n;)c+=";",n++;else if(h>0){if(!Wa.compareByGeneratedPositionsInflated(u,m[h-1]))continue;c+=","}c+=mB.encode(u.generatedColumn-e),e=u.generatedColumn,u.source!=null&&(p=this._sources.indexOf(u.source),c+=mB.encode(p-a),a=p,c+=mB.encode(u.originalLine-1-i),i=u.originalLine-1,c+=mB.encode(u.originalColumn-r),r=u.originalColumn,u.name!=null&&(d=this._names.indexOf(u.name),c+=mB.encode(d-o),o=d)),l+=c}return l},"SourceMapGenerator_serializeMappings");gf.prototype._generateSourcesContent=s(function(e,n){return e.map(function(r){if(!this._sourcesContents)return null;n!=null&&(r=Wa.relative(n,r));var i=Wa.toSetString(r);return Object.prototype.hasOwnProperty.call(this._sourcesContents,i)?this._sourcesContents[i]:null},this)},"SourceMapGenerator_generateSourcesContent");gf.prototype.toJSON=s(function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e},"SourceMapGenerator_toJSON");gf.prototype.toString=s(function(){return JSON.stringify(this.toJSON())},"SourceMapGenerator_toString");pAe.SourceMapGenerator=gf});var mAe=H(XE=>{f();XE.GREATEST_LOWER_BOUND=1;XE.LEAST_UPPER_BOUND=2;function ZJ(t,e,n,r,i,o){var a=Math.floor((e-t)/2)+t,l=i(n,r[a],!0);return l===0?a:l>0?e-a>1?ZJ(a,e,n,r,i,o):o==XE.LEAST_UPPER_BOUND?e<r.length?e:-1:a:a-t>1?ZJ(t,a,n,r,i,o):o==XE.LEAST_UPPER_BOUND?a:t<0?-1:t}s(ZJ,"recursiveSearch");XE.search=s(function(e,n,r,i){if(n.length===0)return-1;var o=ZJ(-1,n.length,e,n,r,i||XE.GREATEST_LOWER_BOUND);if(o<0)return-1;for(;o-1>=0&&r(n[o],n[o-1],!0)===0;)--o;return o},"search")});var gAe=H(hAe=>{f();function eX(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}s(eX,"swap");function hXe(t,e){return Math.round(t+Math.random()*(e-t))}s(hXe,"randomIntInRange");function tX(t,e,n,r){if(n<r){var i=hXe(n,r),o=n-1;eX(t,i,r);for(var a=t[r],l=n;l<r;l++)e(t[l],a)<=0&&(o+=1,eX(t,o,l));eX(t,o+1,l);var c=o+1;tX(t,e,n,c-1),tX(t,e,c+1,r)}}s(tX,"doQuickSort");hAe.quickSort=function(t,e){tX(t,e,0,t.length-1)}});var yAe=H(Q7=>{f();var _n=B_(),nX=mAe(),P_=JJ().ArraySet,gXe=$J(),hB=gAe().quickSort;function as(t,e){var n=t;return typeof t=="string"&&(n=_n.parseSourceMapInput(t)),n.sections!=null?new em(n,e):new oc(n,e)}s(as,"SourceMapConsumer");as.fromSourceMap=function(t,e){return oc.fromSourceMap(t,e)};as.prototype._version=3;as.prototype.__generatedMappings=null;Object.defineProperty(as.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:s(function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings},"get")});as.prototype.__originalMappings=null;Object.defineProperty(as.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:s(function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings},"get")});as.prototype._charIsMappingSeparator=s(function(e,n){var r=e.charAt(n);return r===";"||r===","},"SourceMapConsumer_charIsMappingSeparator");as.prototype._parseMappings=s(function(e,n){throw new Error("Subclasses must implement _parseMappings")},"SourceMapConsumer_parseMappings");as.GENERATED_ORDER=1;as.ORIGINAL_ORDER=2;as.GREATEST_LOWER_BOUND=1;as.LEAST_UPPER_BOUND=2;as.prototype.eachMapping=s(function(e,n,r){var i=n||null,o=r||as.GENERATED_ORDER,a;switch(o){case as.GENERATED_ORDER:a=this._generatedMappings;break;case as.ORIGINAL_ORDER:a=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}var l=this.sourceRoot;a.map(function(c){var u=c.source===null?null:this._sources.at(c.source);return u=_n.computeSourceURL(l,u,this._sourceMapURL),{source:u,generatedLine:c.generatedLine,generatedColumn:c.generatedColumn,originalLine:c.originalLine,originalColumn:c.originalColumn,name:c.name===null?null:this._names.at(c.name)}},this).forEach(e,i)},"SourceMapConsumer_eachMapping");as.prototype.allGeneratedPositionsFor=s(function(e){var n=_n.getArg(e,"line"),r={source:_n.getArg(e,"source"),originalLine:n,originalColumn:_n.getArg(e,"column",0)};if(r.source=this._findSourceIndex(r.source),r.source<0)return[];var i=[],o=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",_n.compareByOriginalPositions,nX.LEAST_UPPER_BOUND);if(o>=0){var a=this._originalMappings[o];if(e.column===void 0)for(var l=a.originalLine;a&&a.originalLine===l;)i.push({line:_n.getArg(a,"generatedLine",null),column:_n.getArg(a,"generatedColumn",null),lastColumn:_n.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++o];else for(var c=a.originalColumn;a&&a.originalLine===n&&a.originalColumn==c;)i.push({line:_n.getArg(a,"generatedLine",null),column:_n.getArg(a,"generatedColumn",null),lastColumn:_n.getArg(a,"lastGeneratedColumn",null)}),a=this._originalMappings[++o]}return i},"SourceMapConsumer_allGeneratedPositionsFor");Q7.SourceMapConsumer=as;function oc(t,e){var n=t;typeof t=="string"&&(n=_n.parseSourceMapInput(t));var r=_n.getArg(n,"version"),i=_n.getArg(n,"sources"),o=_n.getArg(n,"names",[]),a=_n.getArg(n,"sourceRoot",null),l=_n.getArg(n,"sourcesContent",null),c=_n.getArg(n,"mappings"),u=_n.getArg(n,"file",null);if(r!=this._version)throw new Error("Unsupported version: "+r);a&&(a=_n.normalize(a)),i=i.map(String).map(_n.normalize).map(function(d){return a&&_n.isAbsolute(a)&&_n.isAbsolute(d)?_n.relative(a,d):d}),this._names=P_.fromArray(o.map(String),!0),this._sources=P_.fromArray(i,!0),this._absoluteSources=this._sources.toArray().map(function(d){return _n.computeSourceURL(a,d,e)}),this.sourceRoot=a,this.sourcesContent=l,this._mappings=c,this._sourceMapURL=e,this.file=u}s(oc,"BasicSourceMapConsumer");oc.prototype=Object.create(as.prototype);oc.prototype.consumer=as;oc.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=_n.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var n;for(n=0;n<this._absoluteSources.length;++n)if(this._absoluteSources[n]==t)return n;return-1};oc.fromSourceMap=s(function(e,n){var r=Object.create(oc.prototype),i=r._names=P_.fromArray(e._names.toArray(),!0),o=r._sources=P_.fromArray(e._sources.toArray(),!0);r.sourceRoot=e._sourceRoot,r.sourcesContent=e._generateSourcesContent(r._sources.toArray(),r.sourceRoot),r.file=e._file,r._sourceMapURL=n,r._absoluteSources=r._sources.toArray().map(function(h){return _n.computeSourceURL(r.sourceRoot,h,n)});for(var a=e._mappings.toArray().slice(),l=r.__generatedMappings=[],c=r.__originalMappings=[],u=0,d=a.length;u<d;u++){var p=a[u],m=new AAe;m.generatedLine=p.generatedLine,m.generatedColumn=p.generatedColumn,p.source&&(m.source=o.indexOf(p.source),m.originalLine=p.originalLine,m.originalColumn=p.originalColumn,p.name&&(m.name=i.indexOf(p.name)),c.push(m)),l.push(m)}return hB(r.__originalMappings,_n.compareByOriginalPositions),r},"SourceMapConsumer_fromSourceMap");oc.prototype._version=3;Object.defineProperty(oc.prototype,"sources",{get:s(function(){return this._absoluteSources.slice()},"get")});function AAe(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}s(AAe,"Mapping");oc.prototype._parseMappings=s(function(e,n){for(var r=1,i=0,o=0,a=0,l=0,c=0,u=e.length,d=0,p={},m={},h=[],g=[],y,v,b,E,_;d<u;)if(e.charAt(d)===";")r++,d++,i=0;else if(e.charAt(d)===",")d++;else{for(y=new AAe,y.generatedLine=r,E=d;E<u&&!this._charIsMappingSeparator(e,E);E++);if(v=e.slice(d,E),b=p[v],b)d+=v.length;else{for(b=[];d<E;)gXe.decode(e,d,m),_=m.value,d=m.rest,b.push(_);if(b.length===2)throw new Error("Found a source, but no line and column");if(b.length===3)throw new Error("Found a source and line, but no column");p[v]=b}y.generatedColumn=i+b[0],i=y.generatedColumn,b.length>1&&(y.source=l+b[1],l+=b[1],y.originalLine=o+b[2],o=y.originalLine,y.originalLine+=1,y.originalColumn=a+b[3],a=y.originalColumn,b.length>4&&(y.name=c+b[4],c+=b[4])),g.push(y),typeof y.originalLine=="number"&&h.push(y)}hB(g,_n.compareByGeneratedPositionsDeflated),this.__generatedMappings=g,hB(h,_n.compareByOriginalPositions),this.__originalMappings=h},"SourceMapConsumer_parseMappings");oc.prototype._findMapping=s(function(e,n,r,i,o,a){if(e[r]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[r]);if(e[i]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[i]);return nX.search(e,n,o,a)},"SourceMapConsumer_findMapping");oc.prototype.computeColumnSpans=s(function(){for(var e=0;e<this._generatedMappings.length;++e){var n=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var r=this._generatedMappings[e+1];if(n.generatedLine===r.generatedLine){n.lastGeneratedColumn=r.generatedColumn-1;continue}}n.lastGeneratedColumn=1/0}},"SourceMapConsumer_computeColumnSpans");oc.prototype.originalPositionFor=s(function(e){var n={generatedLine:_n.getArg(e,"line"),generatedColumn:_n.getArg(e,"column")},r=this._findMapping(n,this._generatedMappings,"generatedLine","generatedColumn",_n.compareByGeneratedPositionsDeflated,_n.getArg(e,"bias",as.GREATEST_LOWER_BOUND));if(r>=0){var i=this._generatedMappings[r];if(i.generatedLine===n.generatedLine){var o=_n.getArg(i,"source",null);o!==null&&(o=this._sources.at(o),o=_n.computeSourceURL(this.sourceRoot,o,this._sourceMapURL));var a=_n.getArg(i,"name",null);return a!==null&&(a=this._names.at(a)),{source:o,line:_n.getArg(i,"originalLine",null),column:_n.getArg(i,"originalColumn",null),name:a}}}return{source:null,line:null,column:null,name:null}},"SourceMapConsumer_originalPositionFor");oc.prototype.hasContentsOfAllSources=s(function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1},"BasicSourceMapConsumer_hasContentsOfAllSources");oc.prototype.sourceContentFor=s(function(e,n){if(!this.sourcesContent)return null;var r=this._findSourceIndex(e);if(r>=0)return this.sourcesContent[r];var i=e;this.sourceRoot!=null&&(i=_n.relative(this.sourceRoot,i));var o;if(this.sourceRoot!=null&&(o=_n.urlParse(this.sourceRoot))){var a=i.replace(/^file:\/\//,"");if(o.scheme=="file"&&this._sources.has(a))return this.sourcesContent[this._sources.indexOf(a)];if((!o.path||o.path=="/")&&this._sources.has("/"+i))return this.sourcesContent[this._sources.indexOf("/"+i)]}if(n)return null;throw new Error('"'+i+'" is not in the SourceMap.')},"SourceMapConsumer_sourceContentFor");oc.prototype.generatedPositionFor=s(function(e){var n=_n.getArg(e,"source");if(n=this._findSourceIndex(n),n<0)return{line:null,column:null,lastColumn:null};var r={source:n,originalLine:_n.getArg(e,"line"),originalColumn:_n.getArg(e,"column")},i=this._findMapping(r,this._originalMappings,"originalLine","originalColumn",_n.compareByOriginalPositions,_n.getArg(e,"bias",as.GREATEST_LOWER_BOUND));if(i>=0){var o=this._originalMappings[i];if(o.source===r.source)return{line:_n.getArg(o,"generatedLine",null),column:_n.getArg(o,"generatedColumn",null),lastColumn:_n.getArg(o,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}},"SourceMapConsumer_generatedPositionFor");Q7.BasicSourceMapConsumer=oc;function em(t,e){var n=t;typeof t=="string"&&(n=_n.parseSourceMapInput(t));var r=_n.getArg(n,"version"),i=_n.getArg(n,"sections");if(r!=this._version)throw new Error("Unsupported version: "+r);this._sources=new P_,this._names=new P_;var o={line:-1,column:0};this._sections=i.map(function(a){if(a.url)throw new Error("Support for url field in sections not implemented.");var l=_n.getArg(a,"offset"),c=_n.getArg(l,"line"),u=_n.getArg(l,"column");if(c<o.line||c===o.line&&u<o.column)throw new Error("Section offsets must be ordered and non-overlapping.");return o=l,{generatedOffset:{generatedLine:c+1,generatedColumn:u+1},consumer:new as(_n.getArg(a,"map"),e)}})}s(em,"IndexedSourceMapConsumer");em.prototype=Object.create(as.prototype);em.prototype.constructor=as;em.prototype._version=3;Object.defineProperty(em.prototype,"sources",{get:s(function(){for(var t=[],e=0;e<this._sections.length;e++)for(var n=0;n<this._sections[e].consumer.sources.length;n++)t.push(this._sections[e].consumer.sources[n]);return t},"get")});em.prototype.originalPositionFor=s(function(e){var n={generatedLine:_n.getArg(e,"line"),generatedColumn:_n.getArg(e,"column")},r=nX.search(n,this._sections,function(o,a){var l=o.generatedLine-a.generatedOffset.generatedLine;return l||o.generatedColumn-a.generatedOffset.generatedColumn}),i=this._sections[r];return i?i.consumer.originalPositionFor({line:n.generatedLine-(i.generatedOffset.generatedLine-1),column:n.generatedColumn-(i.generatedOffset.generatedLine===n.generatedLine?i.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}},"IndexedSourceMapConsumer_originalPositionFor");em.prototype.hasContentsOfAllSources=s(function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})},"IndexedSourceMapConsumer_hasContentsOfAllSources");em.prototype.sourceContentFor=s(function(e,n){for(var r=0;r<this._sections.length;r++){var i=this._sections[r],o=i.consumer.sourceContentFor(e,!0);if(o)return o}if(n)return null;throw new Error('"'+e+'" is not in the SourceMap.')},"IndexedSourceMapConsumer_sourceContentFor");em.prototype.generatedPositionFor=s(function(e){for(var n=0;n<this._sections.length;n++){var r=this._sections[n];if(r.consumer._findSourceIndex(_n.getArg(e,"source"))!==-1){var i=r.consumer.generatedPositionFor(e);if(i){var o={line:i.line+(r.generatedOffset.generatedLine-1),column:i.column+(r.generatedOffset.generatedLine===i.line?r.generatedOffset.generatedColumn-1:0)};return o}}}return{line:null,column:null}},"IndexedSourceMapConsumer_generatedPositionFor");em.prototype._parseMappings=s(function(e,n){this.__generatedMappings=[],this.__originalMappings=[];for(var r=0;r<this._sections.length;r++)for(var i=this._sections[r],o=i.consumer._generatedMappings,a=0;a<o.length;a++){var l=o[a],c=i.consumer._sources.at(l.source);c=_n.computeSourceURL(i.consumer.sourceRoot,c,this._sourceMapURL),this._sources.add(c),c=this._sources.indexOf(c);var u=null;l.name&&(u=i.consumer._names.at(l.name),this._names.add(u),u=this._names.indexOf(u));var d={source:c,generatedLine:l.generatedLine+(i.generatedOffset.generatedLine-1),generatedColumn:l.generatedColumn+(i.generatedOffset.generatedLine===l.generatedLine?i.generatedOffset.generatedColumn-1:0),originalLine:l.originalLine,originalColumn:l.originalColumn,name:u};this.__generatedMappings.push(d),typeof d.originalLine=="number"&&this.__originalMappings.push(d)}hB(this.__generatedMappings,_n.compareByGeneratedPositionsDeflated),hB(this.__originalMappings,_n.compareByOriginalPositions)},"IndexedSourceMapConsumer_parseMappings");Q7.IndexedSourceMapConsumer=em});var xAe=H(CAe=>{f();var AXe=XJ().SourceMapGenerator,O7=B_(),yXe=/(\r?\n)/,CXe=10,D_="$$$isSourceNode$$$";function t0(t,e,n,r,i){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=n??null,this.name=i??null,this[D_]=!0,r!=null&&this.add(r)}s(t0,"SourceNode");t0.fromStringWithSourceMap=s(function(e,n,r){var i=new t0,o=e.split(yXe),a=0,l=s(function(){var m=g(),h=g()||"";return m+h;function g(){return a<o.length?o[a++]:void 0}},"shiftNextLine"),c=1,u=0,d=null;return n.eachMapping(function(m){if(d!==null)if(c<m.generatedLine)p(d,l()),c++,u=0;else{var h=o[a]||"",g=h.substr(0,m.generatedColumn-u);o[a]=h.substr(m.generatedColumn-u),u=m.generatedColumn,p(d,g),d=m;return}for(;c<m.generatedLine;)i.add(l()),c++;if(u<m.generatedColumn){var h=o[a]||"";i.add(h.substr(0,m.generatedColumn)),o[a]=h.substr(m.generatedColumn),u=m.generatedColumn}d=m},this),a<o.length&&(d&&p(d,l()),i.add(o.splice(a).join(""))),n.sources.forEach(function(m){var h=n.sourceContentFor(m);h!=null&&(r!=null&&(m=O7.join(r,m)),i.setSourceContent(m,h))}),i;function p(m,h){if(m===null||m.source===void 0)i.add(h);else{var g=r?O7.join(r,m.source):m.source;i.add(new t0(m.originalLine,m.originalColumn,g,h,m.name))}}s(p,"addMappingWithCode")},"SourceNode_fromStringWithSourceMap");t0.prototype.add=s(function(e){if(Array.isArray(e))e.forEach(function(n){this.add(n)},this);else if(e[D_]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_add");t0.prototype.prepend=s(function(e){if(Array.isArray(e))for(var n=e.length-1;n>=0;n--)this.prepend(e[n]);else if(e[D_]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this},"SourceNode_prepend");t0.prototype.walk=s(function(e){for(var n,r=0,i=this.children.length;r<i;r++)n=this.children[r],n[D_]?n.walk(e):n!==""&&e(n,{source:this.source,line:this.line,column:this.column,name:this.name})},"SourceNode_walk");t0.prototype.join=s(function(e){var n,r,i=this.children.length;if(i>0){for(n=[],r=0;r<i-1;r++)n.push(this.children[r]),n.push(e);n.push(this.children[r]),this.children=n}return this},"SourceNode_join");t0.prototype.replaceRight=s(function(e,n){var r=this.children[this.children.length-1];return r[D_]?r.replaceRight(e,n):typeof r=="string"?this.children[this.children.length-1]=r.replace(e,n):this.children.push("".replace(e,n)),this},"SourceNode_replaceRight");t0.prototype.setSourceContent=s(function(e,n){this.sourceContents[O7.toSetString(e)]=n},"SourceNode_setSourceContent");t0.prototype.walkSourceContents=s(function(e){for(var n=0,r=this.children.length;n<r;n++)this.children[n][D_]&&this.children[n].walkSourceContents(e);for(var i=Object.keys(this.sourceContents),n=0,r=i.length;n<r;n++)e(O7.fromSetString(i[n]),this.sourceContents[i[n]])},"SourceNode_walkSourceContents");t0.prototype.toString=s(function(){var e="";return this.walk(function(n){e+=n}),e},"SourceNode_toString");t0.prototype.toStringWithSourceMap=s(function(e){var n={code:"",line:1,column:0},r=new AXe(e),i=!1,o=null,a=null,l=null,c=null;return this.walk(function(u,d){n.code+=u,d.source!==null&&d.line!==null&&d.column!==null?((o!==d.source||a!==d.line||l!==d.column||c!==d.name)&&r.addMapping({source:d.source,original:{line:d.line,column:d.column},generated:{line:n.line,column:n.column},name:d.name}),o=d.source,a=d.line,l=d.column,c=d.name,i=!0):i&&(r.addMapping({generated:{line:n.line,column:n.column}}),o=null,i=!1);for(var p=0,m=u.length;p<m;p++)u.charCodeAt(p)===CXe?(n.line++,n.column=0,p+1===m?(o=null,i=!1):i&&r.addMapping({source:d.source,original:{line:d.line,column:d.column},generated:{line:n.line,column:n.column},name:d.name})):n.column++}),this.walkSourceContents(function(u,d){r.setSourceContent(u,d)}),{code:n.code,map:r}},"SourceNode_toStringWithSourceMap");CAe.SourceNode=t0});var vAe=H(U7=>{f();U7.SourceMapGenerator=XJ().SourceMapGenerator;U7.SourceMapConsumer=yAe().SourceMapConsumer;U7.SourceNode=xAe().SourceNode});var EAe=H((d$t,bAe)=>{f();var xXe=Object.prototype.toString,rX=typeof Buffer<"u"&&typeof Buffer.alloc=="function"&&typeof Buffer.allocUnsafe=="function"&&typeof Buffer.from=="function";function vXe(t){return xXe.call(t).slice(8,-1)==="ArrayBuffer"}s(vXe,"isArrayBuffer");function bXe(t,e,n){e>>>=0;var r=t.byteLength-e;if(r<0)throw new RangeError("'offset' is out of bounds");if(n===void 0)n=r;else if(n>>>=0,n>r)throw new RangeError("'length' is out of bounds");return rX?Buffer.from(t.slice(e,e+n)):new Buffer(new Uint8Array(t.slice(e,e+n)))}s(bXe,"fromArrayBuffer");function EXe(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!Buffer.isEncoding(e))throw new TypeError('"encoding" must be a valid string encoding');return rX?Buffer.from(t,e):new Buffer(t,e)}s(EXe,"fromString");function IXe(t,e,n){if(typeof t=="number")throw new TypeError('"value" argument must not be a number');return vXe(t)?bXe(t,e,n):typeof t=="string"?EXe(t,e):rX?Buffer.from(t):new Buffer(t)}s(IXe,"bufferFrom");bAe.exports=IXe});var BAe=H((eI,aX)=>{f();var TXe=vAe().SourceMapConsumer,iX=require("path"),ng;try{ng=require("fs"),(!ng.existsSync||!ng.readFileSync)&&(ng=null)}catch{}var wXe=EAe();function IAe(t,e){return t.require(e)}s(IAe,"dynamicRequire");var TAe=!1,wAe=!1,oX=!1,gB="auto",ZE={},AB={},_Xe=/^data:application\/json[^,]+base64,/,gx=[],Ax=[];function lX(){return gB==="browser"?!0:gB==="node"?!1:typeof window<"u"&&typeof XMLHttpRequest=="function"&&!(window.require&&window.module&&window.process&&window.process.type==="renderer")}s(lX,"isInBrowser");function SXe(){return typeof process=="object"&&process!==null&&typeof process.on=="function"}s(SXe,"hasGlobalProcessEventEmitter");function RXe(){return typeof process=="object"&&process!==null?process.version:""}s(RXe,"globalProcessVersion");function kXe(){if(typeof process=="object"&&process!==null)return process.stderr}s(kXe,"globalProcessStderr");function BXe(t){if(typeof process=="object"&&process!==null&&typeof process.exit=="function")return process.exit(t)}s(BXe,"globalProcessExit");function q7(t){return function(e){for(var n=0;n<t.length;n++){var r=t[n](e);if(r)return r}return null}}s(q7,"handlerExec");var cX=q7(gx);gx.push(function(t){if(t=t.trim(),/^file:/.test(t)&&(t=t.replace(/file:\/\/\/(\w:)?/,function(r,i){return i?"":"/"})),t in ZE)return ZE[t];var e="";try{if(ng)ng.existsSync(t)&&(e=ng.readFileSync(t,"utf8"));else{var n=new XMLHttpRequest;n.open("GET",t,!1),n.send(null),n.readyState===4&&n.status===200&&(e=n.responseText)}}catch{}return ZE[t]=e});function sX(t,e){if(!t)return e;var n=iX.dirname(t),r=/^\w+:\/\/[^\/]*/.exec(n),i=r?r[0]:"",o=n.slice(i.length);return i&&/^\/\w\:/.test(o)?(i+="/",i+iX.resolve(n.slice(i.length),e).replace(/\\/g,"/")):i+iX.resolve(n.slice(i.length),e)}s(sX,"supportRelativeURL");function PXe(t){var e;if(lX())try{var n=new XMLHttpRequest;n.open("GET",t,!1),n.send(null),e=n.readyState===4?n.responseText:null;var r=n.getResponseHeader("SourceMap")||n.getResponseHeader("X-SourceMap");if(r)return r}catch{}e=cX(t);for(var i=/(?:\/\/[@#][\s]*sourceMappingURL=([^\s'"]+)[\s]*$)|(?:\/\*[@#][\s]*sourceMappingURL=([^\s*'"]+)[\s]*(?:\*\/)[\s]*$)/mg,o,a;a=i.exec(e);)o=a;return o?o[1]:null}s(PXe,"retrieveSourceMapURL");var uX=q7(Ax);Ax.push(function(t){var e=PXe(t);if(!e)return null;var n;if(_Xe.test(e)){var r=e.slice(e.indexOf(",")+1);n=wXe(r,"base64").toString(),e=t}else e=sX(t,e),n=cX(e);return n?{url:e,map:n}:null});function dX(t){var e=AB[t.source];if(!e){var n=uX(t.source);n?(e=AB[t.source]={url:n.url,map:new TXe(n.map)},e.map.sourcesContent&&e.map.sources.forEach(function(i,o){var a=e.map.sourcesContent[o];if(a){var l=sX(e.url,i);ZE[l]=a}})):e=AB[t.source]={url:null,map:null}}if(e&&e.map&&typeof e.map.originalPositionFor=="function"){var r=e.map.originalPositionFor(t);if(r.source!==null)return r.source=sX(e.url,r.source),r}return t}s(dX,"mapSourcePosition");function SAe(t){var e=/^eval at ([^(]+) \((.+):(\d+):(\d+)\)$/.exec(t);if(e){var n=dX({source:e[2],line:+e[3],column:e[4]-1});return"eval at "+e[1]+" ("+n.source+":"+n.line+":"+(n.column+1)+")"}return e=/^eval at ([^(]+) \((.+)\)$/.exec(t),e?"eval at "+e[1]+" ("+SAe(e[2])+")":t}s(SAe,"mapEvalOrigin");function DXe(){var t,e="";if(this.isNative())e="native";else{t=this.getScriptNameOrSourceURL(),!t&&this.isEval()&&(e=this.getEvalOrigin(),e+=", "),t?e+=t:e+="<anonymous>";var n=this.getLineNumber();if(n!=null){e+=":"+n;var r=this.getColumnNumber();r&&(e+=":"+r)}}var i="",o=this.getFunctionName(),a=!0,l=this.isConstructor(),c=!(this.isToplevel()||l);if(c){var u=this.getTypeName();u==="[object Object]"&&(u="null");var d=this.getMethodName();o?(u&&o.indexOf(u)!=0&&(i+=u+"."),i+=o,d&&o.indexOf("."+d)!=o.length-d.length-1&&(i+=" [as "+d+"]")):i+=u+"."+(d||"<anonymous>")}else l?i+="new "+(o||"<anonymous>"):o?i+=o:(i+=e,a=!1);return a&&(i+=" ("+e+")"),i}s(DXe,"CallSiteToString");function _Ae(t){var e={};return Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(function(n){e[n]=/^(?:is|get)/.test(n)?function(){return t[n].call(t)}:t[n]}),e.toString=DXe,e}s(_Ae,"cloneCallSite");function RAe(t,e){if(e===void 0&&(e={nextPosition:null,curPosition:null}),t.isNative())return e.curPosition=null,t;var n=t.getFileName()||t.getScriptNameOrSourceURL();if(n){var r=t.getLineNumber(),i=t.getColumnNumber()-1,o=/^v(10\.1[6-9]|10\.[2-9][0-9]|10\.[0-9]{3,}|1[2-9]\d*|[2-9]\d|\d{3,}|11\.11)/,a=o.test(RXe())?0:62;r===1&&i>a&&!lX()&&!t.isEval()&&(i-=a);var l=dX({source:n,line:r,column:i});e.curPosition=l,t=_Ae(t);var c=t.getFunctionName;return t.getFunctionName=function(){return e.nextPosition==null?c():e.nextPosition.name||c()},t.getFileName=function(){return l.source},t.getLineNumber=function(){return l.line},t.getColumnNumber=function(){return l.column+1},t.getScriptNameOrSourceURL=function(){return l.source},t}var u=t.isEval()&&t.getEvalOrigin();return u&&(u=SAe(u),t=_Ae(t),t.getEvalOrigin=function(){return u}),t}s(RAe,"wrapCallSite");function NXe(t,e){oX&&(ZE={},AB={});for(var n=t.name||"Error",r=t.message||"",i=n+": "+r,o={nextPosition:null,curPosition:null},a=[],l=e.length-1;l>=0;l--)a.push(`
    at `+RAe(e[l],o)),o.nextPosition=o.curPosition;return o.curPosition=o.nextPosition=null,i+a.reverse().join("")}s(NXe,"prepareStackTrace");function kAe(t){var e=/\n    at [^(]+ \((.*):(\d+):(\d+)\)/.exec(t.stack);if(e){var n=e[1],r=+e[2],i=+e[3],o=ZE[n];if(!o&&ng&&ng.existsSync(n))try{o=ng.readFileSync(n,"utf8")}catch{o=""}if(o){var a=o.split(/(?:\r\n|\r|\n)/)[r-1];if(a)return n+":"+r+`
`+a+`
`+new Array(i).join(" ")+"^"}}return null}s(kAe,"getErrorSource");function LXe(t){var e=kAe(t),n=kXe();n&&n._handle&&n._handle.setBlocking&&n._handle.setBlocking(!0),e&&(console.error(),console.error(e)),console.error(t.stack),BXe(1)}s(LXe,"printErrorAndExit");function FXe(){var t=process.emit;process.emit=function(e){if(e==="uncaughtException"){var n=arguments[1]&&arguments[1].stack,r=this.listeners(e).length>0;if(n&&!r)return LXe(arguments[1])}return t.apply(this,arguments)}}s(FXe,"shimEmitUncaughtException");var MXe=gx.slice(0),QXe=Ax.slice(0);eI.wrapCallSite=RAe;eI.getErrorSource=kAe;eI.mapSourcePosition=dX;eI.retrieveSourceMap=uX;eI.install=function(t){if(t=t||{},t.environment&&(gB=t.environment,["node","browser","auto"].indexOf(gB)===-1))throw new Error("environment "+gB+" was unknown. Available options are {auto, browser, node}");if(t.retrieveFile&&(t.overrideRetrieveFile&&(gx.length=0),gx.unshift(t.retrieveFile)),t.retrieveSourceMap&&(t.overrideRetrieveSourceMap&&(Ax.length=0),Ax.unshift(t.retrieveSourceMap)),t.hookRequire&&!lX()){var e=IAe(aX,"module"),n=e.prototype._compile;n.__sourceMapSupport||(e.prototype._compile=function(o,a){return ZE[a]=o,AB[a]=void 0,n.call(this,o,a)},e.prototype._compile.__sourceMapSupport=!0)}if(oX||(oX="emptyCacheBetweenOperations"in t?t.emptyCacheBetweenOperations:!1),TAe||(TAe=!0,Error.prepareStackTrace=NXe),!wAe){var r="handleUncaughtExceptions"in t?t.handleUncaughtExceptions:!0;try{var i=IAe(aX,"worker_threads");i.isMainThread===!1&&(r=!1)}catch{}r&&SXe()&&(wAe=!0,FXe())}};eI.resetRetrieveHandlers=function(){gx.length=0,Ax.length=0,gx=MXe.slice(0),Ax=QXe.slice(0),uX=q7(Ax),cX=q7(gx)}});var Di=H((H7,NAe)=>{f();(function(t,e){typeof H7=="object"?NAe.exports=H7=e():typeof define=="function"&&define.amd?define([],e):t.CryptoJS=e()})(H7,function(){var t=t||function(e,n){var r;if(typeof window<"u"&&window.crypto&&(r=window.crypto),typeof self<"u"&&self.crypto&&(r=self.crypto),typeof globalThis<"u"&&globalThis.crypto&&(r=globalThis.crypto),!r&&typeof window<"u"&&window.msCrypto&&(r=window.msCrypto),!r&&typeof global<"u"&&global.crypto&&(r=global.crypto),!r&&typeof require=="function")try{r=require("crypto")}catch{}var i=s(function(){if(r){if(typeof r.getRandomValues=="function")try{return r.getRandomValues(new Uint32Array(1))[0]}catch{}if(typeof r.randomBytes=="function")try{return r.randomBytes(4).readInt32LE()}catch{}}throw new Error("Native crypto module could not be used to get secure random number.")},"cryptoSecureRandomInt"),o=Object.create||function(){function b(){}return s(b,"F"),function(E){var _;return b.prototype=E,_=new b,b.prototype=null,_}}(),a={},l=a.lib={},c=l.Base=function(){return{extend:s(function(b){var E=o(this);return b&&E.mixIn(b),(!E.hasOwnProperty("init")||this.init===E.init)&&(E.init=function(){E.$super.init.apply(this,arguments)}),E.init.prototype=E,E.$super=this,E},"extend"),create:s(function(){var b=this.extend();return b.init.apply(b,arguments),b},"create"),init:s(function(){},"init"),mixIn:s(function(b){for(var E in b)b.hasOwnProperty(E)&&(this[E]=b[E]);b.hasOwnProperty("toString")&&(this.toString=b.toString)},"mixIn"),clone:s(function(){return this.init.prototype.extend(this)},"clone")}}(),u=l.WordArray=c.extend({init:s(function(b,E){b=this.words=b||[],E!=n?this.sigBytes=E:this.sigBytes=b.length*4},"init"),toString:s(function(b){return(b||p).stringify(this)},"toString"),concat:s(function(b){var E=this.words,_=b.words,k=this.sigBytes,P=b.sigBytes;if(this.clamp(),k%4)for(var N=0;N<P;N++){var U=_[N>>>2]>>>24-N%4*8&255;E[k+N>>>2]|=U<<24-(k+N)%4*8}else for(var ne=0;ne<P;ne+=4)E[k+ne>>>2]=_[ne>>>2];return this.sigBytes+=P,this},"concat"),clamp:s(function(){var b=this.words,E=this.sigBytes;b[E>>>2]&=4294967295<<32-E%4*8,b.length=e.ceil(E/4)},"clamp"),clone:s(function(){var b=c.clone.call(this);return b.words=this.words.slice(0),b},"clone"),random:s(function(b){for(var E=[],_=0;_<b;_+=4)E.push(i());return new u.init(E,b)},"random")}),d=a.enc={},p=d.Hex={stringify:s(function(b){for(var E=b.words,_=b.sigBytes,k=[],P=0;P<_;P++){var N=E[P>>>2]>>>24-P%4*8&255;k.push((N>>>4).toString(16)),k.push((N&15).toString(16))}return k.join("")},"stringify"),parse:s(function(b){for(var E=b.length,_=[],k=0;k<E;k+=2)_[k>>>3]|=parseInt(b.substr(k,2),16)<<24-k%8*4;return new u.init(_,E/2)},"parse")},m=d.Latin1={stringify:s(function(b){for(var E=b.words,_=b.sigBytes,k=[],P=0;P<_;P++){var N=E[P>>>2]>>>24-P%4*8&255;k.push(String.fromCharCode(N))}return k.join("")},"stringify"),parse:s(function(b){for(var E=b.length,_=[],k=0;k<E;k++)_[k>>>2]|=(b.charCodeAt(k)&255)<<24-k%4*8;return new u.init(_,E)},"parse")},h=d.Utf8={stringify:s(function(b){try{return decodeURIComponent(escape(m.stringify(b)))}catch{throw new Error("Malformed UTF-8 data")}},"stringify"),parse:s(function(b){return m.parse(unescape(encodeURIComponent(b)))},"parse")},g=l.BufferedBlockAlgorithm=c.extend({reset:s(function(){this._data=new u.init,this._nDataBytes=0},"reset"),_append:s(function(b){typeof b=="string"&&(b=h.parse(b)),this._data.concat(b),this._nDataBytes+=b.sigBytes},"_append"),_process:s(function(b){var E,_=this._data,k=_.words,P=_.sigBytes,N=this.blockSize,U=N*4,ne=P/U;b?ne=e.ceil(ne):ne=e.max((ne|0)-this._minBufferSize,0);var he=ne*N,ae=e.min(he*4,P);if(he){for(var G=0;G<he;G+=N)this._doProcessBlock(k,G);E=k.splice(0,he),_.sigBytes-=ae}return new u.init(E,ae)},"_process"),clone:s(function(){var b=c.clone.call(this);return b._data=this._data.clone(),b},"clone"),_minBufferSize:0}),y=l.Hasher=g.extend({cfg:c.extend(),init:s(function(b){this.cfg=this.cfg.extend(b),this.reset()},"init"),reset:s(function(){g.reset.call(this),this._doReset()},"reset"),update:s(function(b){return this._append(b),this._process(),this},"update"),finalize:s(function(b){b&&this._append(b);var E=this._doFinalize();return E},"finalize"),blockSize:512/32,_createHelper:s(function(b){return function(E,_){return new b.init(_).finalize(E)}},"_createHelper"),_createHmacHelper:s(function(b){return function(E,_){return new v.HMAC.init(b,_).finalize(E)}},"_createHmacHelper")}),v=a.algo={};return a}(Math);return t})});var bB=H((G7,LAe)=>{f();(function(t,e){typeof G7=="object"?LAe.exports=G7=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(G7,function(t){return function(e){var n=t,r=n.lib,i=r.Base,o=r.WordArray,a=n.x64={},l=a.Word=i.extend({init:s(function(u,d){this.high=u,this.low=d},"init")}),c=a.WordArray=i.extend({init:s(function(u,d){u=this.words=u||[],d!=e?this.sigBytes=d:this.sigBytes=u.length*8},"init"),toX32:s(function(){for(var u=this.words,d=u.length,p=[],m=0;m<d;m++){var h=u[m];p.push(h.high),p.push(h.low)}return o.create(p,this.sigBytes)},"toX32"),clone:s(function(){for(var u=i.clone.call(this),d=u.words=this.words.slice(0),p=d.length,m=0;m<p;m++)d[m]=d[m].clone();return u},"clone")})}(),t})});var MAe=H((j7,FAe)=>{f();(function(t,e){typeof j7=="object"?FAe.exports=j7=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(j7,function(t){return function(){if(typeof ArrayBuffer=="function"){var e=t,n=e.lib,r=n.WordArray,i=r.init,o=r.init=function(a){if(a instanceof ArrayBuffer&&(a=new Uint8Array(a)),(a instanceof Int8Array||typeof Uint8ClampedArray<"u"&&a instanceof Uint8ClampedArray||a instanceof Int16Array||a instanceof Uint16Array||a instanceof Int32Array||a instanceof Uint32Array||a instanceof Float32Array||a instanceof Float64Array)&&(a=new Uint8Array(a.buffer,a.byteOffset,a.byteLength)),a instanceof Uint8Array){for(var l=a.byteLength,c=[],u=0;u<l;u++)c[u>>>2]|=a[u]<<24-u%4*8;i.call(this,c,l)}else i.apply(this,arguments)};o.prototype=r}}(),t.lib.WordArray})});var OAe=H((V7,QAe)=>{f();(function(t,e){typeof V7=="object"?QAe.exports=V7=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(V7,function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=e.enc,o=i.Utf16=i.Utf16BE={stringify:s(function(l){for(var c=l.words,u=l.sigBytes,d=[],p=0;p<u;p+=2){var m=c[p>>>2]>>>16-p%4*8&65535;d.push(String.fromCharCode(m))}return d.join("")},"stringify"),parse:s(function(l){for(var c=l.length,u=[],d=0;d<c;d++)u[d>>>1]|=l.charCodeAt(d)<<16-d%2*16;return r.create(u,c*2)},"parse")};i.Utf16LE={stringify:s(function(l){for(var c=l.words,u=l.sigBytes,d=[],p=0;p<u;p+=2){var m=a(c[p>>>2]>>>16-p%4*8&65535);d.push(String.fromCharCode(m))}return d.join("")},"stringify"),parse:s(function(l){for(var c=l.length,u=[],d=0;d<c;d++)u[d>>>1]|=a(l.charCodeAt(d)<<16-d%2*16);return r.create(u,c*2)},"parse")};function a(l){return l<<8&4278255360|l>>>8&16711935}s(a,"swapEndian")}(),t.enc.Utf16})});var Cx=H(($7,UAe)=>{f();(function(t,e){typeof $7=="object"?UAe.exports=$7=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})($7,function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=e.enc,o=i.Base64={stringify:s(function(l){var c=l.words,u=l.sigBytes,d=this._map;l.clamp();for(var p=[],m=0;m<u;m+=3)for(var h=c[m>>>2]>>>24-m%4*8&255,g=c[m+1>>>2]>>>24-(m+1)%4*8&255,y=c[m+2>>>2]>>>24-(m+2)%4*8&255,v=h<<16|g<<8|y,b=0;b<4&&m+b*.75<u;b++)p.push(d.charAt(v>>>6*(3-b)&63));var E=d.charAt(64);if(E)for(;p.length%4;)p.push(E);return p.join("")},"stringify"),parse:s(function(l){var c=l.length,u=this._map,d=this._reverseMap;if(!d){d=this._reverseMap=[];for(var p=0;p<u.length;p++)d[u.charCodeAt(p)]=p}var m=u.charAt(64);if(m){var h=l.indexOf(m);h!==-1&&(c=h)}return a(l,c,d)},"parse"),_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function a(l,c,u){for(var d=[],p=0,m=0;m<c;m++)if(m%4){var h=u[l.charCodeAt(m-1)]<<m%4*2,g=u[l.charCodeAt(m)]>>>6-m%4*2,y=h|g;d[p>>>2]|=y<<24-p%4*8,p++}return r.create(d,p)}s(a,"parseLoop")}(),t.enc.Base64})});var WAe=H((z7,qAe)=>{f();(function(t,e){typeof z7=="object"?qAe.exports=z7=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(z7,function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=e.enc,o=i.Base64url={stringify:s(function(l,c){c===void 0&&(c=!0);var u=l.words,d=l.sigBytes,p=c?this._safe_map:this._map;l.clamp();for(var m=[],h=0;h<d;h+=3)for(var g=u[h>>>2]>>>24-h%4*8&255,y=u[h+1>>>2]>>>24-(h+1)%4*8&255,v=u[h+2>>>2]>>>24-(h+2)%4*8&255,b=g<<16|y<<8|v,E=0;E<4&&h+E*.75<d;E++)m.push(p.charAt(b>>>6*(3-E)&63));var _=p.charAt(64);if(_)for(;m.length%4;)m.push(_);return m.join("")},"stringify"),parse:s(function(l,c){c===void 0&&(c=!0);var u=l.length,d=c?this._safe_map:this._map,p=this._reverseMap;if(!p){p=this._reverseMap=[];for(var m=0;m<d.length;m++)p[d.charCodeAt(m)]=m}var h=d.charAt(64);if(h){var g=l.indexOf(h);g!==-1&&(u=g)}return a(l,u,p)},"parse"),_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_safe_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"};function a(l,c,u){for(var d=[],p=0,m=0;m<c;m++)if(m%4){var h=u[l.charCodeAt(m-1)]<<m%4*2,g=u[l.charCodeAt(m)]>>>6-m%4*2,y=h|g;d[p>>>2]|=y<<24-p%4*8,p++}return r.create(d,p)}s(a,"parseLoop")}(),t.enc.Base64url})});var xx=H((Y7,HAe)=>{f();(function(t,e){typeof Y7=="object"?HAe.exports=Y7=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(Y7,function(t){return function(e){var n=t,r=n.lib,i=r.WordArray,o=r.Hasher,a=n.algo,l=[];(function(){for(var h=0;h<64;h++)l[h]=e.abs(e.sin(h+1))*4294967296|0})();var c=a.MD5=o.extend({_doReset:s(function(){this._hash=new i.init([1732584193,4023233417,2562383102,271733878])},"_doReset"),_doProcessBlock:s(function(h,g){for(var y=0;y<16;y++){var v=g+y,b=h[v];h[v]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360}var E=this._hash.words,_=h[g+0],k=h[g+1],P=h[g+2],N=h[g+3],U=h[g+4],ne=h[g+5],he=h[g+6],ae=h[g+7],G=h[g+8],W=h[g+9],ue=h[g+10],ie=h[g+11],V=h[g+12],O=h[g+13],Y=h[g+14],te=h[g+15],pe=E[0],ee=E[1],ce=E[2],me=E[3];pe=u(pe,ee,ce,me,_,7,l[0]),me=u(me,pe,ee,ce,k,12,l[1]),ce=u(ce,me,pe,ee,P,17,l[2]),ee=u(ee,ce,me,pe,N,22,l[3]),pe=u(pe,ee,ce,me,U,7,l[4]),me=u(me,pe,ee,ce,ne,12,l[5]),ce=u(ce,me,pe,ee,he,17,l[6]),ee=u(ee,ce,me,pe,ae,22,l[7]),pe=u(pe,ee,ce,me,G,7,l[8]),me=u(me,pe,ee,ce,W,12,l[9]),ce=u(ce,me,pe,ee,ue,17,l[10]),ee=u(ee,ce,me,pe,ie,22,l[11]),pe=u(pe,ee,ce,me,V,7,l[12]),me=u(me,pe,ee,ce,O,12,l[13]),ce=u(ce,me,pe,ee,Y,17,l[14]),ee=u(ee,ce,me,pe,te,22,l[15]),pe=d(pe,ee,ce,me,k,5,l[16]),me=d(me,pe,ee,ce,he,9,l[17]),ce=d(ce,me,pe,ee,ie,14,l[18]),ee=d(ee,ce,me,pe,_,20,l[19]),pe=d(pe,ee,ce,me,ne,5,l[20]),me=d(me,pe,ee,ce,ue,9,l[21]),ce=d(ce,me,pe,ee,te,14,l[22]),ee=d(ee,ce,me,pe,U,20,l[23]),pe=d(pe,ee,ce,me,W,5,l[24]),me=d(me,pe,ee,ce,Y,9,l[25]),ce=d(ce,me,pe,ee,N,14,l[26]),ee=d(ee,ce,me,pe,G,20,l[27]),pe=d(pe,ee,ce,me,O,5,l[28]),me=d(me,pe,ee,ce,P,9,l[29]),ce=d(ce,me,pe,ee,ae,14,l[30]),ee=d(ee,ce,me,pe,V,20,l[31]),pe=p(pe,ee,ce,me,ne,4,l[32]),me=p(me,pe,ee,ce,G,11,l[33]),ce=p(ce,me,pe,ee,ie,16,l[34]),ee=p(ee,ce,me,pe,Y,23,l[35]),pe=p(pe,ee,ce,me,k,4,l[36]),me=p(me,pe,ee,ce,U,11,l[37]),ce=p(ce,me,pe,ee,ae,16,l[38]),ee=p(ee,ce,me,pe,ue,23,l[39]),pe=p(pe,ee,ce,me,O,4,l[40]),me=p(me,pe,ee,ce,_,11,l[41]),ce=p(ce,me,pe,ee,N,16,l[42]),ee=p(ee,ce,me,pe,he,23,l[43]),pe=p(pe,ee,ce,me,W,4,l[44]),me=p(me,pe,ee,ce,V,11,l[45]),ce=p(ce,me,pe,ee,te,16,l[46]),ee=p(ee,ce,me,pe,P,23,l[47]),pe=m(pe,ee,ce,me,_,6,l[48]),me=m(me,pe,ee,ce,ae,10,l[49]),ce=m(ce,me,pe,ee,Y,15,l[50]),ee=m(ee,ce,me,pe,ne,21,l[51]),pe=m(pe,ee,ce,me,V,6,l[52]),me=m(me,pe,ee,ce,N,10,l[53]),ce=m(ce,me,pe,ee,ue,15,l[54]),ee=m(ee,ce,me,pe,k,21,l[55]),pe=m(pe,ee,ce,me,G,6,l[56]),me=m(me,pe,ee,ce,te,10,l[57]),ce=m(ce,me,pe,ee,he,15,l[58]),ee=m(ee,ce,me,pe,O,21,l[59]),pe=m(pe,ee,ce,me,U,6,l[60]),me=m(me,pe,ee,ce,ie,10,l[61]),ce=m(ce,me,pe,ee,P,15,l[62]),ee=m(ee,ce,me,pe,W,21,l[63]),E[0]=E[0]+pe|0,E[1]=E[1]+ee|0,E[2]=E[2]+ce|0,E[3]=E[3]+me|0},"_doProcessBlock"),_doFinalize:s(function(){var h=this._data,g=h.words,y=this._nDataBytes*8,v=h.sigBytes*8;g[v>>>5]|=128<<24-v%32;var b=e.floor(y/4294967296),E=y;g[(v+64>>>9<<4)+15]=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,g[(v+64>>>9<<4)+14]=(E<<8|E>>>24)&16711935|(E<<24|E>>>8)&4278255360,h.sigBytes=(g.length+1)*4,this._process();for(var _=this._hash,k=_.words,P=0;P<4;P++){var N=k[P];k[P]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360}return _},"_doFinalize"),clone:s(function(){var h=o.clone.call(this);return h._hash=this._hash.clone(),h},"clone")});function u(h,g,y,v,b,E,_){var k=h+(g&y|~g&v)+b+_;return(k<<E|k>>>32-E)+g}s(u,"FF");function d(h,g,y,v,b,E,_){var k=h+(g&v|y&~v)+b+_;return(k<<E|k>>>32-E)+g}s(d,"GG");function p(h,g,y,v,b,E,_){var k=h+(g^y^v)+b+_;return(k<<E|k>>>32-E)+g}s(p,"HH");function m(h,g,y,v,b,E,_){var k=h+(y^(g|~v))+b+_;return(k<<E|k>>>32-E)+g}s(m,"II"),n.MD5=o._createHelper(c),n.HmacMD5=o._createHmacHelper(c)}(Math),t.MD5})});var fX=H((K7,GAe)=>{f();(function(t,e){typeof K7=="object"?GAe.exports=K7=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(K7,function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=n.Hasher,o=e.algo,a=[],l=o.SHA1=i.extend({_doReset:s(function(){this._hash=new r.init([1732584193,4023233417,2562383102,271733878,3285377520])},"_doReset"),_doProcessBlock:s(function(c,u){for(var d=this._hash.words,p=d[0],m=d[1],h=d[2],g=d[3],y=d[4],v=0;v<80;v++){if(v<16)a[v]=c[u+v]|0;else{var b=a[v-3]^a[v-8]^a[v-14]^a[v-16];a[v]=b<<1|b>>>31}var E=(p<<5|p>>>27)+y+a[v];v<20?E+=(m&h|~m&g)+1518500249:v<40?E+=(m^h^g)+1859775393:v<60?E+=(m&h|m&g|h&g)-1894007588:E+=(m^h^g)-899497514,y=g,g=h,h=m<<30|m>>>2,m=p,p=E}d[0]=d[0]+p|0,d[1]=d[1]+m|0,d[2]=d[2]+h|0,d[3]=d[3]+g|0,d[4]=d[4]+y|0},"_doProcessBlock"),_doFinalize:s(function(){var c=this._data,u=c.words,d=this._nDataBytes*8,p=c.sigBytes*8;return u[p>>>5]|=128<<24-p%32,u[(p+64>>>9<<4)+14]=Math.floor(d/4294967296),u[(p+64>>>9<<4)+15]=d,c.sigBytes=u.length*4,this._process(),this._hash},"_doFinalize"),clone:s(function(){var c=i.clone.call(this);return c._hash=this._hash.clone(),c},"clone")});e.SHA1=i._createHelper(l),e.HmacSHA1=i._createHmacHelper(l)}(),t.SHA1})});var X7=H((J7,jAe)=>{f();(function(t,e){typeof J7=="object"?jAe.exports=J7=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(J7,function(t){return function(e){var n=t,r=n.lib,i=r.WordArray,o=r.Hasher,a=n.algo,l=[],c=[];(function(){function p(y){for(var v=e.sqrt(y),b=2;b<=v;b++)if(!(y%b))return!1;return!0}s(p,"isPrime");function m(y){return(y-(y|0))*4294967296|0}s(m,"getFractionalBits");for(var h=2,g=0;g<64;)p(h)&&(g<8&&(l[g]=m(e.pow(h,1/2))),c[g]=m(e.pow(h,1/3)),g++),h++})();var u=[],d=a.SHA256=o.extend({_doReset:s(function(){this._hash=new i.init(l.slice(0))},"_doReset"),_doProcessBlock:s(function(p,m){for(var h=this._hash.words,g=h[0],y=h[1],v=h[2],b=h[3],E=h[4],_=h[5],k=h[6],P=h[7],N=0;N<64;N++){if(N<16)u[N]=p[m+N]|0;else{var U=u[N-15],ne=(U<<25|U>>>7)^(U<<14|U>>>18)^U>>>3,he=u[N-2],ae=(he<<15|he>>>17)^(he<<13|he>>>19)^he>>>10;u[N]=ne+u[N-7]+ae+u[N-16]}var G=E&_^~E&k,W=g&y^g&v^y&v,ue=(g<<30|g>>>2)^(g<<19|g>>>13)^(g<<10|g>>>22),ie=(E<<26|E>>>6)^(E<<21|E>>>11)^(E<<7|E>>>25),V=P+ie+G+c[N]+u[N],O=ue+W;P=k,k=_,_=E,E=b+V|0,b=v,v=y,y=g,g=V+O|0}h[0]=h[0]+g|0,h[1]=h[1]+y|0,h[2]=h[2]+v|0,h[3]=h[3]+b|0,h[4]=h[4]+E|0,h[5]=h[5]+_|0,h[6]=h[6]+k|0,h[7]=h[7]+P|0},"_doProcessBlock"),_doFinalize:s(function(){var p=this._data,m=p.words,h=this._nDataBytes*8,g=p.sigBytes*8;return m[g>>>5]|=128<<24-g%32,m[(g+64>>>9<<4)+14]=e.floor(h/4294967296),m[(g+64>>>9<<4)+15]=h,p.sigBytes=m.length*4,this._process(),this._hash},"_doFinalize"),clone:s(function(){var p=o.clone.call(this);return p._hash=this._hash.clone(),p},"clone")});n.SHA256=o._createHelper(d),n.HmacSHA256=o._createHmacHelper(d)}(Math),t.SHA256})});var $Ae=H((Z7,VAe)=>{f();(function(t,e,n){typeof Z7=="object"?VAe.exports=Z7=e(Di(),X7()):typeof define=="function"&&define.amd?define(["./core","./sha256"],e):e(t.CryptoJS)})(Z7,function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=e.algo,o=i.SHA256,a=i.SHA224=o.extend({_doReset:s(function(){this._hash=new r.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},"_doReset"),_doFinalize:s(function(){var l=o._doFinalize.call(this);return l.sigBytes-=4,l},"_doFinalize")});e.SHA224=o._createHelper(a),e.HmacSHA224=o._createHmacHelper(a)}(),t.SHA224})});var pX=H((eL,zAe)=>{f();(function(t,e,n){typeof eL=="object"?zAe.exports=eL=e(Di(),bB()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(eL,function(t){return function(){var e=t,n=e.lib,r=n.Hasher,i=e.x64,o=i.Word,a=i.WordArray,l=e.algo;function c(){return o.create.apply(o,arguments)}s(c,"X64Word_create");var u=[c(1116352408,3609767458),c(1899447441,602891725),c(3049323471,3964484399),c(3921009573,2173295548),c(961987163,4081628472),c(1508970993,3053834265),c(2453635748,2937671579),c(2870763221,3664609560),c(3624381080,2734883394),c(310598401,1164996542),c(607225278,1323610764),c(1426881987,3590304994),c(1925078388,4068182383),c(2162078206,991336113),c(2614888103,633803317),c(3248222580,3479774868),c(3835390401,2666613458),c(4022224774,944711139),c(264347078,2341262773),c(604807628,2007800933),c(770255983,1495990901),c(1249150122,1856431235),c(1555081692,3175218132),c(1996064986,2198950837),c(2554220882,3999719339),c(2821834349,766784016),c(2952996808,2566594879),c(3210313671,3203337956),c(3336571891,1034457026),c(3584528711,2466948901),c(113926993,3758326383),c(338241895,168717936),c(666307205,1188179964),c(773529912,1546045734),c(1294757372,1522805485),c(1396182291,2643833823),c(1695183700,2343527390),c(1986661051,1014477480),c(2177026350,1206759142),c(2456956037,344077627),c(2730485921,1290863460),c(2820302411,3158454273),c(3259730800,3505952657),c(3345764771,106217008),c(3516065817,3606008344),c(3600352804,1432725776),c(4094571909,1467031594),c(275423344,851169720),c(430227734,3100823752),c(506948616,1363258195),c(659060556,3750685593),c(883997877,3785050280),c(958139571,3318307427),c(1322822218,3812723403),c(1537002063,2003034995),c(1747873779,3602036899),c(1955562222,1575990012),c(2024104815,1125592928),c(2227730452,2716904306),c(2361852424,442776044),c(2428436474,593698344),c(2756734187,3733110249),c(3204031479,2999351573),c(3329325298,3815920427),c(3391569614,3928383900),c(3515267271,566280711),c(3940187606,3454069534),c(4118630271,4000239992),c(116418474,1914138554),c(174292421,2731055270),c(289380356,3203993006),c(460393269,320620315),c(685471733,587496836),c(852142971,1086792851),c(1017036298,365543100),c(1126000580,2618297676),c(1288033470,3409855158),c(1501505948,4234509866),c(1607167915,987167468),c(1816402316,1246189591)],d=[];(function(){for(var m=0;m<80;m++)d[m]=c()})();var p=l.SHA512=r.extend({_doReset:s(function(){this._hash=new a.init([new o.init(1779033703,4089235720),new o.init(3144134277,2227873595),new o.init(1013904242,4271175723),new o.init(2773480762,1595750129),new o.init(1359893119,2917565137),new o.init(2600822924,725511199),new o.init(528734635,4215389547),new o.init(1541459225,327033209)])},"_doReset"),_doProcessBlock:s(function(m,h){for(var g=this._hash.words,y=g[0],v=g[1],b=g[2],E=g[3],_=g[4],k=g[5],P=g[6],N=g[7],U=y.high,ne=y.low,he=v.high,ae=v.low,G=b.high,W=b.low,ue=E.high,ie=E.low,V=_.high,O=_.low,Y=k.high,te=k.low,pe=P.high,ee=P.low,ce=N.high,me=N.low,Ne=U,Se=ne,Je=he,Me=ae,ft=G,It=W,yt=ue,vt=ie,le=V,Oe=O,ye=Y,tt=te,X=pe,re=ee,We=ce,De=me,be=0;be<80;be++){var ze,it,ht=d[be];if(be<16)it=ht.high=m[h+be*2]|0,ze=ht.low=m[h+be*2+1]|0;else{var Ot=d[be-15],cn=Ot.high,Lt=Ot.low,Wn=(cn>>>1|Lt<<31)^(cn>>>8|Lt<<24)^cn>>>7,zn=(Lt>>>1|cn<<31)^(Lt>>>8|cn<<24)^(Lt>>>7|cn<<25),fr=d[be-2],Ae=fr.high,He=fr.low,ut=(Ae>>>19|He<<13)^(Ae<<3|He>>>29)^Ae>>>6,At=(He>>>19|Ae<<13)^(He<<3|Ae>>>29)^(He>>>6|Ae<<26),Xt=d[be-7],Ht=Xt.high,yn=Xt.low,vn=d[be-16],jt=vn.high,nn=vn.low;ze=zn+yn,it=Wn+Ht+(ze>>>0<zn>>>0?1:0),ze=ze+At,it=it+ut+(ze>>>0<At>>>0?1:0),ze=ze+nn,it=it+jt+(ze>>>0<nn>>>0?1:0),ht.high=it,ht.low=ze}var Jt=le&ye^~le&X,Tn=Oe&tt^~Oe&re,Fn=Ne&Je^Ne&ft^Je&ft,Yn=Se&Me^Se&It^Me&It,Ur=(Ne>>>28|Se<<4)^(Ne<<30|Se>>>2)^(Ne<<25|Se>>>7),Yr=(Se>>>28|Ne<<4)^(Se<<30|Ne>>>2)^(Se<<25|Ne>>>7),Fr=(le>>>14|Oe<<18)^(le>>>18|Oe<<14)^(le<<23|Oe>>>9),jr=(Oe>>>14|le<<18)^(Oe>>>18|le<<14)^(Oe<<23|le>>>9),tr=u[be],Vr=tr.high,_e=tr.low,q=De+jr,ge=We+Fr+(q>>>0<De>>>0?1:0),q=q+Tn,ge=ge+Jt+(q>>>0<Tn>>>0?1:0),q=q+_e,ge=ge+Vr+(q>>>0<_e>>>0?1:0),q=q+ze,ge=ge+it+(q>>>0<ze>>>0?1:0),ve=Yr+Yn,Z=Ur+Fn+(ve>>>0<Yr>>>0?1:0);We=X,De=re,X=ye,re=tt,ye=le,tt=Oe,Oe=vt+q|0,le=yt+ge+(Oe>>>0<vt>>>0?1:0)|0,yt=ft,vt=It,ft=Je,It=Me,Je=Ne,Me=Se,Se=q+ve|0,Ne=ge+Z+(Se>>>0<q>>>0?1:0)|0}ne=y.low=ne+Se,y.high=U+Ne+(ne>>>0<Se>>>0?1:0),ae=v.low=ae+Me,v.high=he+Je+(ae>>>0<Me>>>0?1:0),W=b.low=W+It,b.high=G+ft+(W>>>0<It>>>0?1:0),ie=E.low=ie+vt,E.high=ue+yt+(ie>>>0<vt>>>0?1:0),O=_.low=O+Oe,_.high=V+le+(O>>>0<Oe>>>0?1:0),te=k.low=te+tt,k.high=Y+ye+(te>>>0<tt>>>0?1:0),ee=P.low=ee+re,P.high=pe+X+(ee>>>0<re>>>0?1:0),me=N.low=me+De,N.high=ce+We+(me>>>0<De>>>0?1:0)},"_doProcessBlock"),_doFinalize:s(function(){var m=this._data,h=m.words,g=this._nDataBytes*8,y=m.sigBytes*8;h[y>>>5]|=128<<24-y%32,h[(y+128>>>10<<5)+30]=Math.floor(g/4294967296),h[(y+128>>>10<<5)+31]=g,m.sigBytes=h.length*4,this._process();var v=this._hash.toX32();return v},"_doFinalize"),clone:s(function(){var m=r.clone.call(this);return m._hash=this._hash.clone(),m},"clone"),blockSize:1024/32});e.SHA512=r._createHelper(p),e.HmacSHA512=r._createHmacHelper(p)}(),t.SHA512})});var KAe=H((tL,YAe)=>{f();(function(t,e,n){typeof tL=="object"?YAe.exports=tL=e(Di(),bB(),pX()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./sha512"],e):e(t.CryptoJS)})(tL,function(t){return function(){var e=t,n=e.x64,r=n.Word,i=n.WordArray,o=e.algo,a=o.SHA512,l=o.SHA384=a.extend({_doReset:s(function(){this._hash=new i.init([new r.init(3418070365,3238371032),new r.init(1654270250,914150663),new r.init(2438529370,812702999),new r.init(355462360,4144912697),new r.init(1731405415,4290775857),new r.init(2394180231,1750603025),new r.init(3675008525,1694076839),new r.init(1203062813,3204075428)])},"_doReset"),_doFinalize:s(function(){var c=a._doFinalize.call(this);return c.sigBytes-=16,c},"_doFinalize")});e.SHA384=a._createHelper(l),e.HmacSHA384=a._createHmacHelper(l)}(),t.SHA384})});var XAe=H((nL,JAe)=>{f();(function(t,e,n){typeof nL=="object"?JAe.exports=nL=e(Di(),bB()):typeof define=="function"&&define.amd?define(["./core","./x64-core"],e):e(t.CryptoJS)})(nL,function(t){return function(e){var n=t,r=n.lib,i=r.WordArray,o=r.Hasher,a=n.x64,l=a.Word,c=n.algo,u=[],d=[],p=[];(function(){for(var g=1,y=0,v=0;v<24;v++){u[g+5*y]=(v+1)*(v+2)/2%64;var b=y%5,E=(2*g+3*y)%5;g=b,y=E}for(var g=0;g<5;g++)for(var y=0;y<5;y++)d[g+5*y]=y+(2*g+3*y)%5*5;for(var _=1,k=0;k<24;k++){for(var P=0,N=0,U=0;U<7;U++){if(_&1){var ne=(1<<U)-1;ne<32?N^=1<<ne:P^=1<<ne-32}_&128?_=_<<1^113:_<<=1}p[k]=l.create(P,N)}})();var m=[];(function(){for(var g=0;g<25;g++)m[g]=l.create()})();var h=c.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:s(function(){for(var g=this._state=[],y=0;y<25;y++)g[y]=new l.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},"_doReset"),_doProcessBlock:s(function(g,y){for(var v=this._state,b=this.blockSize/2,E=0;E<b;E++){var _=g[y+2*E],k=g[y+2*E+1];_=(_<<8|_>>>24)&16711935|(_<<24|_>>>8)&4278255360,k=(k<<8|k>>>24)&16711935|(k<<24|k>>>8)&4278255360;var P=v[E];P.high^=k,P.low^=_}for(var N=0;N<24;N++){for(var U=0;U<5;U++){for(var ne=0,he=0,ae=0;ae<5;ae++){var P=v[U+5*ae];ne^=P.high,he^=P.low}var G=m[U];G.high=ne,G.low=he}for(var U=0;U<5;U++)for(var W=m[(U+4)%5],ue=m[(U+1)%5],ie=ue.high,V=ue.low,ne=W.high^(ie<<1|V>>>31),he=W.low^(V<<1|ie>>>31),ae=0;ae<5;ae++){var P=v[U+5*ae];P.high^=ne,P.low^=he}for(var O=1;O<25;O++){var ne,he,P=v[O],Y=P.high,te=P.low,pe=u[O];pe<32?(ne=Y<<pe|te>>>32-pe,he=te<<pe|Y>>>32-pe):(ne=te<<pe-32|Y>>>64-pe,he=Y<<pe-32|te>>>64-pe);var ee=m[d[O]];ee.high=ne,ee.low=he}var ce=m[0],me=v[0];ce.high=me.high,ce.low=me.low;for(var U=0;U<5;U++)for(var ae=0;ae<5;ae++){var O=U+5*ae,P=v[O],Ne=m[O],Se=m[(U+1)%5+5*ae],Je=m[(U+2)%5+5*ae];P.high=Ne.high^~Se.high&Je.high,P.low=Ne.low^~Se.low&Je.low}var P=v[0],Me=p[N];P.high^=Me.high,P.low^=Me.low}},"_doProcessBlock"),_doFinalize:s(function(){var g=this._data,y=g.words,v=this._nDataBytes*8,b=g.sigBytes*8,E=this.blockSize*32;y[b>>>5]|=1<<24-b%32,y[(e.ceil((b+1)/E)*E>>>5)-1]|=128,g.sigBytes=y.length*4,this._process();for(var _=this._state,k=this.cfg.outputLength/8,P=k/8,N=[],U=0;U<P;U++){var ne=_[U],he=ne.high,ae=ne.low;he=(he<<8|he>>>24)&16711935|(he<<24|he>>>8)&4278255360,ae=(ae<<8|ae>>>24)&16711935|(ae<<24|ae>>>8)&4278255360,N.push(ae),N.push(he)}return new i.init(N,k)},"_doFinalize"),clone:s(function(){for(var g=o.clone.call(this),y=g._state=this._state.slice(0),v=0;v<25;v++)y[v]=y[v].clone();return g},"clone")});n.SHA3=o._createHelper(h),n.HmacSHA3=o._createHmacHelper(h)}(Math),t.SHA3})});var e1e=H((rL,ZAe)=>{f();(function(t,e){typeof rL=="object"?ZAe.exports=rL=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(rL,function(t){return function(e){var n=t,r=n.lib,i=r.WordArray,o=r.Hasher,a=n.algo,l=i.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),c=i.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),u=i.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),d=i.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),p=i.create([0,1518500249,1859775393,2400959708,2840853838]),m=i.create([1352829926,1548603684,1836072691,2053994217,0]),h=a.RIPEMD160=o.extend({_doReset:s(function(){this._hash=i.create([1732584193,4023233417,2562383102,271733878,3285377520])},"_doReset"),_doProcessBlock:s(function(k,P){for(var N=0;N<16;N++){var U=P+N,ne=k[U];k[U]=(ne<<8|ne>>>24)&16711935|(ne<<24|ne>>>8)&4278255360}var he=this._hash.words,ae=p.words,G=m.words,W=l.words,ue=c.words,ie=u.words,V=d.words,O,Y,te,pe,ee,ce,me,Ne,Se,Je;ce=O=he[0],me=Y=he[1],Ne=te=he[2],Se=pe=he[3],Je=ee=he[4];for(var Me,N=0;N<80;N+=1)Me=O+k[P+W[N]]|0,N<16?Me+=g(Y,te,pe)+ae[0]:N<32?Me+=y(Y,te,pe)+ae[1]:N<48?Me+=v(Y,te,pe)+ae[2]:N<64?Me+=b(Y,te,pe)+ae[3]:Me+=E(Y,te,pe)+ae[4],Me=Me|0,Me=_(Me,ie[N]),Me=Me+ee|0,O=ee,ee=pe,pe=_(te,10),te=Y,Y=Me,Me=ce+k[P+ue[N]]|0,N<16?Me+=E(me,Ne,Se)+G[0]:N<32?Me+=b(me,Ne,Se)+G[1]:N<48?Me+=v(me,Ne,Se)+G[2]:N<64?Me+=y(me,Ne,Se)+G[3]:Me+=g(me,Ne,Se)+G[4],Me=Me|0,Me=_(Me,V[N]),Me=Me+Je|0,ce=Je,Je=Se,Se=_(Ne,10),Ne=me,me=Me;Me=he[1]+te+Se|0,he[1]=he[2]+pe+Je|0,he[2]=he[3]+ee+ce|0,he[3]=he[4]+O+me|0,he[4]=he[0]+Y+Ne|0,he[0]=Me},"_doProcessBlock"),_doFinalize:s(function(){var k=this._data,P=k.words,N=this._nDataBytes*8,U=k.sigBytes*8;P[U>>>5]|=128<<24-U%32,P[(U+64>>>9<<4)+14]=(N<<8|N>>>24)&16711935|(N<<24|N>>>8)&4278255360,k.sigBytes=(P.length+1)*4,this._process();for(var ne=this._hash,he=ne.words,ae=0;ae<5;ae++){var G=he[ae];he[ae]=(G<<8|G>>>24)&16711935|(G<<24|G>>>8)&4278255360}return ne},"_doFinalize"),clone:s(function(){var k=o.clone.call(this);return k._hash=this._hash.clone(),k},"clone")});function g(k,P,N){return k^P^N}s(g,"f1");function y(k,P,N){return k&P|~k&N}s(y,"f2");function v(k,P,N){return(k|~P)^N}s(v,"f3");function b(k,P,N){return k&N|P&~N}s(b,"f4");function E(k,P,N){return k^(P|~N)}s(E,"f5");function _(k,P){return k<<P|k>>>32-P}s(_,"rotl"),n.RIPEMD160=o._createHelper(h),n.HmacRIPEMD160=o._createHmacHelper(h)}(Math),t.RIPEMD160})});var oL=H((iL,t1e)=>{f();(function(t,e){typeof iL=="object"?t1e.exports=iL=e(Di()):typeof define=="function"&&define.amd?define(["./core"],e):e(t.CryptoJS)})(iL,function(t){(function(){var e=t,n=e.lib,r=n.Base,i=e.enc,o=i.Utf8,a=e.algo,l=a.HMAC=r.extend({init:s(function(c,u){c=this._hasher=new c.init,typeof u=="string"&&(u=o.parse(u));var d=c.blockSize,p=d*4;u.sigBytes>p&&(u=c.finalize(u)),u.clamp();for(var m=this._oKey=u.clone(),h=this._iKey=u.clone(),g=m.words,y=h.words,v=0;v<d;v++)g[v]^=1549556828,y[v]^=909522486;m.sigBytes=h.sigBytes=p,this.reset()},"init"),reset:s(function(){var c=this._hasher;c.reset(),c.update(this._iKey)},"reset"),update:s(function(c){return this._hasher.update(c),this},"update"),finalize:s(function(c){var u=this._hasher,d=u.finalize(c);u.reset();var p=u.finalize(this._oKey.clone().concat(d));return p},"finalize")})})()})});var r1e=H((sL,n1e)=>{f();(function(t,e,n){typeof sL=="object"?n1e.exports=sL=e(Di(),X7(),oL()):typeof define=="function"&&define.amd?define(["./core","./sha256","./hmac"],e):e(t.CryptoJS)})(sL,function(t){return function(){var e=t,n=e.lib,r=n.Base,i=n.WordArray,o=e.algo,a=o.SHA256,l=o.HMAC,c=o.PBKDF2=r.extend({cfg:r.extend({keySize:128/32,hasher:a,iterations:25e4}),init:s(function(u){this.cfg=this.cfg.extend(u)},"init"),compute:s(function(u,d){for(var p=this.cfg,m=l.create(p.hasher,u),h=i.create(),g=i.create([1]),y=h.words,v=g.words,b=p.keySize,E=p.iterations;y.length<b;){var _=m.update(d).finalize(g);m.reset();for(var k=_.words,P=k.length,N=_,U=1;U<E;U++){N=m.finalize(N),m.reset();for(var ne=N.words,he=0;he<P;he++)k[he]^=ne[he]}h.concat(_),v[0]++}return h.sigBytes=b*4,h},"compute")});e.PBKDF2=function(u,d,p){return c.create(p).compute(u,d)}}(),t.PBKDF2})});var p1=H((aL,i1e)=>{f();(function(t,e,n){typeof aL=="object"?i1e.exports=aL=e(Di(),fX(),oL()):typeof define=="function"&&define.amd?define(["./core","./sha1","./hmac"],e):e(t.CryptoJS)})(aL,function(t){return function(){var e=t,n=e.lib,r=n.Base,i=n.WordArray,o=e.algo,a=o.MD5,l=o.EvpKDF=r.extend({cfg:r.extend({keySize:128/32,hasher:a,iterations:1}),init:s(function(c){this.cfg=this.cfg.extend(c)},"init"),compute:s(function(c,u){for(var d,p=this.cfg,m=p.hasher.create(),h=i.create(),g=h.words,y=p.keySize,v=p.iterations;g.length<y;){d&&m.update(d),d=m.update(c).finalize(u),m.reset();for(var b=1;b<v;b++)d=m.finalize(d),m.reset();h.concat(d)}return h.sigBytes=y*4,h},"compute")});e.EvpKDF=function(c,u,d){return l.create(d).compute(c,u)}}(),t.EvpKDF})});var dl=H((lL,o1e)=>{f();(function(t,e,n){typeof lL=="object"?o1e.exports=lL=e(Di(),p1()):typeof define=="function"&&define.amd?define(["./core","./evpkdf"],e):e(t.CryptoJS)})(lL,function(t){t.lib.Cipher||function(e){var n=t,r=n.lib,i=r.Base,o=r.WordArray,a=r.BufferedBlockAlgorithm,l=n.enc,c=l.Utf8,u=l.Base64,d=n.algo,p=d.EvpKDF,m=r.Cipher=a.extend({cfg:i.extend(),createEncryptor:s(function(G,W){return this.create(this._ENC_XFORM_MODE,G,W)},"createEncryptor"),createDecryptor:s(function(G,W){return this.create(this._DEC_XFORM_MODE,G,W)},"createDecryptor"),init:s(function(G,W,ue){this.cfg=this.cfg.extend(ue),this._xformMode=G,this._key=W,this.reset()},"init"),reset:s(function(){a.reset.call(this),this._doReset()},"reset"),process:s(function(G){return this._append(G),this._process()},"process"),finalize:s(function(G){G&&this._append(G);var W=this._doFinalize();return W},"finalize"),keySize:128/32,ivSize:128/32,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function G(W){return typeof W=="string"?ae:U}return s(G,"selectCipherStrategy"),function(W){return{encrypt:s(function(ue,ie,V){return G(ie).encrypt(W,ue,ie,V)},"encrypt"),decrypt:s(function(ue,ie,V){return G(ie).decrypt(W,ue,ie,V)},"decrypt")}}}()}),h=r.StreamCipher=m.extend({_doFinalize:s(function(){var G=this._process(!0);return G},"_doFinalize"),blockSize:1}),g=n.mode={},y=r.BlockCipherMode=i.extend({createEncryptor:s(function(G,W){return this.Encryptor.create(G,W)},"createEncryptor"),createDecryptor:s(function(G,W){return this.Decryptor.create(G,W)},"createDecryptor"),init:s(function(G,W){this._cipher=G,this._iv=W},"init")}),v=g.CBC=function(){var G=y.extend();G.Encryptor=G.extend({processBlock:s(function(ue,ie){var V=this._cipher,O=V.blockSize;W.call(this,ue,ie,O),V.encryptBlock(ue,ie),this._prevBlock=ue.slice(ie,ie+O)},"processBlock")}),G.Decryptor=G.extend({processBlock:s(function(ue,ie){var V=this._cipher,O=V.blockSize,Y=ue.slice(ie,ie+O);V.decryptBlock(ue,ie),W.call(this,ue,ie,O),this._prevBlock=Y},"processBlock")});function W(ue,ie,V){var O,Y=this._iv;Y?(O=Y,this._iv=e):O=this._prevBlock;for(var te=0;te<V;te++)ue[ie+te]^=O[te]}return s(W,"xorBlock"),G}(),b=n.pad={},E=b.Pkcs7={pad:s(function(G,W){for(var ue=W*4,ie=ue-G.sigBytes%ue,V=ie<<24|ie<<16|ie<<8|ie,O=[],Y=0;Y<ie;Y+=4)O.push(V);var te=o.create(O,ie);G.concat(te)},"pad"),unpad:s(function(G){var W=G.words[G.sigBytes-1>>>2]&255;G.sigBytes-=W},"unpad")},_=r.BlockCipher=m.extend({cfg:m.cfg.extend({mode:v,padding:E}),reset:s(function(){var G;m.reset.call(this);var W=this.cfg,ue=W.iv,ie=W.mode;this._xformMode==this._ENC_XFORM_MODE?G=ie.createEncryptor:(G=ie.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==G?this._mode.init(this,ue&&ue.words):(this._mode=G.call(ie,this,ue&&ue.words),this._mode.__creator=G)},"reset"),_doProcessBlock:s(function(G,W){this._mode.processBlock(G,W)},"_doProcessBlock"),_doFinalize:s(function(){var G,W=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(W.pad(this._data,this.blockSize),G=this._process(!0)):(G=this._process(!0),W.unpad(G)),G},"_doFinalize"),blockSize:128/32}),k=r.CipherParams=i.extend({init:s(function(G){this.mixIn(G)},"init"),toString:s(function(G){return(G||this.formatter).stringify(this)},"toString")}),P=n.format={},N=P.OpenSSL={stringify:s(function(G){var W,ue=G.ciphertext,ie=G.salt;return ie?W=o.create([1398893684,1701076831]).concat(ie).concat(ue):W=ue,W.toString(u)},"stringify"),parse:s(function(G){var W,ue=u.parse(G),ie=ue.words;return ie[0]==1398893684&&ie[1]==1701076831&&(W=o.create(ie.slice(2,4)),ie.splice(0,4),ue.sigBytes-=16),k.create({ciphertext:ue,salt:W})},"parse")},U=r.SerializableCipher=i.extend({cfg:i.extend({format:N}),encrypt:s(function(G,W,ue,ie){ie=this.cfg.extend(ie);var V=G.createEncryptor(ue,ie),O=V.finalize(W),Y=V.cfg;return k.create({ciphertext:O,key:ue,iv:Y.iv,algorithm:G,mode:Y.mode,padding:Y.padding,blockSize:G.blockSize,formatter:ie.format})},"encrypt"),decrypt:s(function(G,W,ue,ie){ie=this.cfg.extend(ie),W=this._parse(W,ie.format);var V=G.createDecryptor(ue,ie).finalize(W.ciphertext);return V},"decrypt"),_parse:s(function(G,W){return typeof G=="string"?W.parse(G,this):G},"_parse")}),ne=n.kdf={},he=ne.OpenSSL={execute:s(function(G,W,ue,ie,V){if(ie||(ie=o.random(64/8)),V)var O=p.create({keySize:W+ue,hasher:V}).compute(G,ie);else var O=p.create({keySize:W+ue}).compute(G,ie);var Y=o.create(O.words.slice(W),ue*4);return O.sigBytes=W*4,k.create({key:O,iv:Y,salt:ie})},"execute")},ae=r.PasswordBasedCipher=U.extend({cfg:U.cfg.extend({kdf:he}),encrypt:s(function(G,W,ue,ie){ie=this.cfg.extend(ie);var V=ie.kdf.execute(ue,G.keySize,G.ivSize,ie.salt,ie.hasher);ie.iv=V.iv;var O=U.encrypt.call(this,G,W,V.key,ie);return O.mixIn(V),O},"encrypt"),decrypt:s(function(G,W,ue,ie){ie=this.cfg.extend(ie),W=this._parse(W,ie.format);var V=ie.kdf.execute(ue,G.keySize,G.ivSize,W.salt,ie.hasher);ie.iv=V.iv;var O=U.decrypt.call(this,G,W,V.key,ie);return O},"decrypt")})}()})});var a1e=H((cL,s1e)=>{f();(function(t,e,n){typeof cL=="object"?s1e.exports=cL=e(Di(),dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(cL,function(t){return t.mode.CFB=function(){var e=t.lib.BlockCipherMode.extend();e.Encryptor=e.extend({processBlock:s(function(r,i){var o=this._cipher,a=o.blockSize;n.call(this,r,i,a,o),this._prevBlock=r.slice(i,i+a)},"processBlock")}),e.Decryptor=e.extend({processBlock:s(function(r,i){var o=this._cipher,a=o.blockSize,l=r.slice(i,i+a);n.call(this,r,i,a,o),this._prevBlock=l},"processBlock")});function n(r,i,o,a){var l,c=this._iv;c?(l=c.slice(0),this._iv=void 0):l=this._prevBlock,a.encryptBlock(l,0);for(var u=0;u<o;u++)r[i+u]^=l[u]}return s(n,"generateKeystreamAndEncrypt"),e}(),t.mode.CFB})});var c1e=H((uL,l1e)=>{f();(function(t,e,n){typeof uL=="object"?l1e.exports=uL=e(Di(),dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(uL,function(t){return t.mode.CTR=function(){var e=t.lib.BlockCipherMode.extend(),n=e.Encryptor=e.extend({processBlock:s(function(r,i){var o=this._cipher,a=o.blockSize,l=this._iv,c=this._counter;l&&(c=this._counter=l.slice(0),this._iv=void 0);var u=c.slice(0);o.encryptBlock(u,0),c[a-1]=c[a-1]+1|0;for(var d=0;d<a;d++)r[i+d]^=u[d]},"processBlock")});return e.Decryptor=n,e}(),t.mode.CTR})});var d1e=H((dL,u1e)=>{f();(function(t,e,n){typeof dL=="object"?u1e.exports=dL=e(Di(),dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(dL,function(t){return t.mode.CTRGladman=function(){var e=t.lib.BlockCipherMode.extend();function n(o){if((o>>24&255)===255){var a=o>>16&255,l=o>>8&255,c=o&255;a===255?(a=0,l===255?(l=0,c===255?c=0:++c):++l):++a,o=0,o+=a<<16,o+=l<<8,o+=c}else o+=1<<24;return o}s(n,"incWord");function r(o){return(o[0]=n(o[0]))===0&&(o[1]=n(o[1])),o}s(r,"incCounter");var i=e.Encryptor=e.extend({processBlock:s(function(o,a){var l=this._cipher,c=l.blockSize,u=this._iv,d=this._counter;u&&(d=this._counter=u.slice(0),this._iv=void 0),r(d);var p=d.slice(0);l.encryptBlock(p,0);for(var m=0;m<c;m++)o[a+m]^=p[m]},"processBlock")});return e.Decryptor=i,e}(),t.mode.CTRGladman})});var p1e=H((fL,f1e)=>{f();(function(t,e,n){typeof fL=="object"?f1e.exports=fL=e(Di(),dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(fL,function(t){return t.mode.OFB=function(){var e=t.lib.BlockCipherMode.extend(),n=e.Encryptor=e.extend({processBlock:s(function(r,i){var o=this._cipher,a=o.blockSize,l=this._iv,c=this._keystream;l&&(c=this._keystream=l.slice(0),this._iv=void 0),o.encryptBlock(c,0);for(var u=0;u<a;u++)r[i+u]^=c[u]},"processBlock")});return e.Decryptor=n,e}(),t.mode.OFB})});var h1e=H((pL,m1e)=>{f();(function(t,e,n){typeof pL=="object"?m1e.exports=pL=e(Di(),dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(pL,function(t){return t.mode.ECB=function(){var e=t.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:s(function(n,r){this._cipher.encryptBlock(n,r)},"processBlock")}),e.Decryptor=e.extend({processBlock:s(function(n,r){this._cipher.decryptBlock(n,r)},"processBlock")}),e}(),t.mode.ECB})});var A1e=H((mL,g1e)=>{f();(function(t,e,n){typeof mL=="object"?g1e.exports=mL=e(Di(),dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(mL,function(t){return t.pad.AnsiX923={pad:s(function(e,n){var r=e.sigBytes,i=n*4,o=i-r%i,a=r+o-1;e.clamp(),e.words[a>>>2]|=o<<24-a%4*8,e.sigBytes+=o},"pad"),unpad:s(function(e){var n=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=n},"unpad")},t.pad.Ansix923})});var C1e=H((hL,y1e)=>{f();(function(t,e,n){typeof hL=="object"?y1e.exports=hL=e(Di(),dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(hL,function(t){return t.pad.Iso10126={pad:s(function(e,n){var r=n*4,i=r-e.sigBytes%r;e.concat(t.lib.WordArray.random(i-1)).concat(t.lib.WordArray.create([i<<24],1))},"pad"),unpad:s(function(e){var n=e.words[e.sigBytes-1>>>2]&255;e.sigBytes-=n},"unpad")},t.pad.Iso10126})});var v1e=H((gL,x1e)=>{f();(function(t,e,n){typeof gL=="object"?x1e.exports=gL=e(Di(),dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(gL,function(t){return t.pad.Iso97971={pad:s(function(e,n){e.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(e,n)},"pad"),unpad:s(function(e){t.pad.ZeroPadding.unpad(e),e.sigBytes--},"unpad")},t.pad.Iso97971})});var E1e=H((AL,b1e)=>{f();(function(t,e,n){typeof AL=="object"?b1e.exports=AL=e(Di(),dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(AL,function(t){return t.pad.ZeroPadding={pad:s(function(e,n){var r=n*4;e.clamp(),e.sigBytes+=r-(e.sigBytes%r||r)},"pad"),unpad:s(function(e){for(var n=e.words,r=e.sigBytes-1,r=e.sigBytes-1;r>=0;r--)if(n[r>>>2]>>>24-r%4*8&255){e.sigBytes=r+1;break}},"unpad")},t.pad.ZeroPadding})});var T1e=H((yL,I1e)=>{f();(function(t,e,n){typeof yL=="object"?I1e.exports=yL=e(Di(),dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(yL,function(t){return t.pad.NoPadding={pad:s(function(){},"pad"),unpad:s(function(){},"unpad")},t.pad.NoPadding})});var _1e=H((CL,w1e)=>{f();(function(t,e,n){typeof CL=="object"?w1e.exports=CL=e(Di(),dl()):typeof define=="function"&&define.amd?define(["./core","./cipher-core"],e):e(t.CryptoJS)})(CL,function(t){return function(e){var n=t,r=n.lib,i=r.CipherParams,o=n.enc,a=o.Hex,l=n.format,c=l.Hex={stringify:s(function(u){return u.ciphertext.toString(a)},"stringify"),parse:s(function(u){var d=a.parse(u);return i.create({ciphertext:d})},"parse")}}(),t.format.Hex})});var R1e=H((xL,S1e)=>{f();(function(t,e,n){typeof xL=="object"?S1e.exports=xL=e(Di(),Cx(),xx(),p1(),dl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(xL,function(t){return function(){var e=t,n=e.lib,r=n.BlockCipher,i=e.algo,o=[],a=[],l=[],c=[],u=[],d=[],p=[],m=[],h=[],g=[];(function(){for(var b=[],E=0;E<256;E++)E<128?b[E]=E<<1:b[E]=E<<1^283;for(var _=0,k=0,E=0;E<256;E++){var P=k^k<<1^k<<2^k<<3^k<<4;P=P>>>8^P&255^99,o[_]=P,a[P]=_;var N=b[_],U=b[N],ne=b[U],he=b[P]*257^P*16843008;l[_]=he<<24|he>>>8,c[_]=he<<16|he>>>16,u[_]=he<<8|he>>>24,d[_]=he;var he=ne*16843009^U*65537^N*257^_*16843008;p[P]=he<<24|he>>>8,m[P]=he<<16|he>>>16,h[P]=he<<8|he>>>24,g[P]=he,_?(_=N^b[b[b[ne^N]]],k^=b[b[k]]):_=k=1}})();var y=[0,1,2,4,8,16,32,64,128,27,54],v=i.AES=r.extend({_doReset:s(function(){var b;if(!(this._nRounds&&this._keyPriorReset===this._key)){for(var E=this._keyPriorReset=this._key,_=E.words,k=E.sigBytes/4,P=this._nRounds=k+6,N=(P+1)*4,U=this._keySchedule=[],ne=0;ne<N;ne++)ne<k?U[ne]=_[ne]:(b=U[ne-1],ne%k?k>6&&ne%k==4&&(b=o[b>>>24]<<24|o[b>>>16&255]<<16|o[b>>>8&255]<<8|o[b&255]):(b=b<<8|b>>>24,b=o[b>>>24]<<24|o[b>>>16&255]<<16|o[b>>>8&255]<<8|o[b&255],b^=y[ne/k|0]<<24),U[ne]=U[ne-k]^b);for(var he=this._invKeySchedule=[],ae=0;ae<N;ae++){var ne=N-ae;if(ae%4)var b=U[ne];else var b=U[ne-4];ae<4||ne<=4?he[ae]=b:he[ae]=p[o[b>>>24]]^m[o[b>>>16&255]]^h[o[b>>>8&255]]^g[o[b&255]]}}},"_doReset"),encryptBlock:s(function(b,E){this._doCryptBlock(b,E,this._keySchedule,l,c,u,d,o)},"encryptBlock"),decryptBlock:s(function(b,E){var _=b[E+1];b[E+1]=b[E+3],b[E+3]=_,this._doCryptBlock(b,E,this._invKeySchedule,p,m,h,g,a);var _=b[E+1];b[E+1]=b[E+3],b[E+3]=_},"decryptBlock"),_doCryptBlock:s(function(b,E,_,k,P,N,U,ne){for(var he=this._nRounds,ae=b[E]^_[0],G=b[E+1]^_[1],W=b[E+2]^_[2],ue=b[E+3]^_[3],ie=4,V=1;V<he;V++){var O=k[ae>>>24]^P[G>>>16&255]^N[W>>>8&255]^U[ue&255]^_[ie++],Y=k[G>>>24]^P[W>>>16&255]^N[ue>>>8&255]^U[ae&255]^_[ie++],te=k[W>>>24]^P[ue>>>16&255]^N[ae>>>8&255]^U[G&255]^_[ie++],pe=k[ue>>>24]^P[ae>>>16&255]^N[G>>>8&255]^U[W&255]^_[ie++];ae=O,G=Y,W=te,ue=pe}var O=(ne[ae>>>24]<<24|ne[G>>>16&255]<<16|ne[W>>>8&255]<<8|ne[ue&255])^_[ie++],Y=(ne[G>>>24]<<24|ne[W>>>16&255]<<16|ne[ue>>>8&255]<<8|ne[ae&255])^_[ie++],te=(ne[W>>>24]<<24|ne[ue>>>16&255]<<16|ne[ae>>>8&255]<<8|ne[G&255])^_[ie++],pe=(ne[ue>>>24]<<24|ne[ae>>>16&255]<<16|ne[G>>>8&255]<<8|ne[W&255])^_[ie++];b[E]=O,b[E+1]=Y,b[E+2]=te,b[E+3]=pe},"_doCryptBlock"),keySize:256/32});e.AES=r._createHelper(v)}(),t.AES})});var B1e=H((vL,k1e)=>{f();(function(t,e,n){typeof vL=="object"?k1e.exports=vL=e(Di(),Cx(),xx(),p1(),dl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(vL,function(t){return function(){var e=t,n=e.lib,r=n.WordArray,i=n.BlockCipher,o=e.algo,a=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],l=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],c=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],u=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],d=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=o.DES=i.extend({_doReset:s(function(){for(var y=this._key,v=y.words,b=[],E=0;E<56;E++){var _=a[E]-1;b[E]=v[_>>>5]>>>31-_%32&1}for(var k=this._subKeys=[],P=0;P<16;P++){for(var N=k[P]=[],U=c[P],E=0;E<24;E++)N[E/6|0]|=b[(l[E]-1+U)%28]<<31-E%6,N[4+(E/6|0)]|=b[28+(l[E+24]-1+U)%28]<<31-E%6;N[0]=N[0]<<1|N[0]>>>31;for(var E=1;E<7;E++)N[E]=N[E]>>>(E-1)*4+3;N[7]=N[7]<<5|N[7]>>>27}for(var ne=this._invSubKeys=[],E=0;E<16;E++)ne[E]=k[15-E]},"_doReset"),encryptBlock:s(function(y,v){this._doCryptBlock(y,v,this._subKeys)},"encryptBlock"),decryptBlock:s(function(y,v){this._doCryptBlock(y,v,this._invSubKeys)},"decryptBlock"),_doCryptBlock:s(function(y,v,b){this._lBlock=y[v],this._rBlock=y[v+1],m.call(this,4,252645135),m.call(this,16,65535),h.call(this,2,858993459),h.call(this,8,16711935),m.call(this,1,1431655765);for(var E=0;E<16;E++){for(var _=b[E],k=this._lBlock,P=this._rBlock,N=0,U=0;U<8;U++)N|=u[U][((P^_[U])&d[U])>>>0];this._lBlock=P,this._rBlock=k^N}var ne=this._lBlock;this._lBlock=this._rBlock,this._rBlock=ne,m.call(this,1,1431655765),h.call(this,8,16711935),h.call(this,2,858993459),m.call(this,16,65535),m.call(this,4,252645135),y[v]=this._lBlock,y[v+1]=this._rBlock},"_doCryptBlock"),keySize:64/32,ivSize:64/32,blockSize:64/32});function m(y,v){var b=(this._lBlock>>>y^this._rBlock)&v;this._rBlock^=b,this._lBlock^=b<<y}s(m,"exchangeLR");function h(y,v){var b=(this._rBlock>>>y^this._lBlock)&v;this._lBlock^=b,this._rBlock^=b<<y}s(h,"exchangeRL"),e.DES=i._createHelper(p);var g=o.TripleDES=i.extend({_doReset:s(function(){var y=this._key,v=y.words;if(v.length!==2&&v.length!==4&&v.length<6)throw new Error("Invalid key length - 3DES requires the key length to be 64, 128, 192 or >192.");var b=v.slice(0,2),E=v.length<4?v.slice(0,2):v.slice(2,4),_=v.length<6?v.slice(0,2):v.slice(4,6);this._des1=p.createEncryptor(r.create(b)),this._des2=p.createEncryptor(r.create(E)),this._des3=p.createEncryptor(r.create(_))},"_doReset"),encryptBlock:s(function(y,v){this._des1.encryptBlock(y,v),this._des2.decryptBlock(y,v),this._des3.encryptBlock(y,v)},"encryptBlock"),decryptBlock:s(function(y,v){this._des3.decryptBlock(y,v),this._des2.encryptBlock(y,v),this._des1.decryptBlock(y,v)},"decryptBlock"),keySize:192/32,ivSize:64/32,blockSize:64/32});e.TripleDES=i._createHelper(g)}(),t.TripleDES})});var D1e=H((bL,P1e)=>{f();(function(t,e,n){typeof bL=="object"?P1e.exports=bL=e(Di(),Cx(),xx(),p1(),dl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(bL,function(t){return function(){var e=t,n=e.lib,r=n.StreamCipher,i=e.algo,o=i.RC4=r.extend({_doReset:s(function(){for(var c=this._key,u=c.words,d=c.sigBytes,p=this._S=[],m=0;m<256;m++)p[m]=m;for(var m=0,h=0;m<256;m++){var g=m%d,y=u[g>>>2]>>>24-g%4*8&255;h=(h+p[m]+y)%256;var v=p[m];p[m]=p[h],p[h]=v}this._i=this._j=0},"_doReset"),_doProcessBlock:s(function(c,u){c[u]^=a.call(this)},"_doProcessBlock"),keySize:256/32,ivSize:0});function a(){for(var c=this._S,u=this._i,d=this._j,p=0,m=0;m<4;m++){u=(u+1)%256,d=(d+c[u])%256;var h=c[u];c[u]=c[d],c[d]=h,p|=c[(c[u]+c[d])%256]<<24-m*8}return this._i=u,this._j=d,p}s(a,"generateKeystreamWord"),e.RC4=r._createHelper(o);var l=i.RC4Drop=o.extend({cfg:o.cfg.extend({drop:192}),_doReset:s(function(){o._doReset.call(this);for(var c=this.cfg.drop;c>0;c--)a.call(this)},"_doReset")});e.RC4Drop=r._createHelper(l)}(),t.RC4})});var L1e=H((EL,N1e)=>{f();(function(t,e,n){typeof EL=="object"?N1e.exports=EL=e(Di(),Cx(),xx(),p1(),dl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(EL,function(t){return function(){var e=t,n=e.lib,r=n.StreamCipher,i=e.algo,o=[],a=[],l=[],c=i.Rabbit=r.extend({_doReset:s(function(){for(var d=this._key.words,p=this.cfg.iv,m=0;m<4;m++)d[m]=(d[m]<<8|d[m]>>>24)&16711935|(d[m]<<24|d[m]>>>8)&4278255360;var h=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],g=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var m=0;m<4;m++)u.call(this);for(var m=0;m<8;m++)g[m]^=h[m+4&7];if(p){var y=p.words,v=y[0],b=y[1],E=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,_=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,k=E>>>16|_&4294901760,P=_<<16|E&65535;g[0]^=E,g[1]^=k,g[2]^=_,g[3]^=P,g[4]^=E,g[5]^=k,g[6]^=_,g[7]^=P;for(var m=0;m<4;m++)u.call(this)}},"_doReset"),_doProcessBlock:s(function(d,p){var m=this._X;u.call(this),o[0]=m[0]^m[5]>>>16^m[3]<<16,o[1]=m[2]^m[7]>>>16^m[5]<<16,o[2]=m[4]^m[1]>>>16^m[7]<<16,o[3]=m[6]^m[3]>>>16^m[1]<<16;for(var h=0;h<4;h++)o[h]=(o[h]<<8|o[h]>>>24)&16711935|(o[h]<<24|o[h]>>>8)&4278255360,d[p+h]^=o[h]},"_doProcessBlock"),blockSize:128/32,ivSize:64/32});function u(){for(var d=this._X,p=this._C,m=0;m<8;m++)a[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<a[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<a[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<a[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<a[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<a[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<a[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<a[6]>>>0?1:0)|0,this._b=p[7]>>>0<a[7]>>>0?1:0;for(var m=0;m<8;m++){var h=d[m]+p[m],g=h&65535,y=h>>>16,v=((g*g>>>17)+g*y>>>15)+y*y,b=((h&4294901760)*h|0)+((h&65535)*h|0);l[m]=v^b}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}s(u,"nextState"),e.Rabbit=r._createHelper(c)}(),t.Rabbit})});var M1e=H((IL,F1e)=>{f();(function(t,e,n){typeof IL=="object"?F1e.exports=IL=e(Di(),Cx(),xx(),p1(),dl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(IL,function(t){return function(){var e=t,n=e.lib,r=n.StreamCipher,i=e.algo,o=[],a=[],l=[],c=i.RabbitLegacy=r.extend({_doReset:s(function(){var d=this._key.words,p=this.cfg.iv,m=this._X=[d[0],d[3]<<16|d[2]>>>16,d[1],d[0]<<16|d[3]>>>16,d[2],d[1]<<16|d[0]>>>16,d[3],d[2]<<16|d[1]>>>16],h=this._C=[d[2]<<16|d[2]>>>16,d[0]&4294901760|d[1]&65535,d[3]<<16|d[3]>>>16,d[1]&4294901760|d[2]&65535,d[0]<<16|d[0]>>>16,d[2]&4294901760|d[3]&65535,d[1]<<16|d[1]>>>16,d[3]&4294901760|d[0]&65535];this._b=0;for(var g=0;g<4;g++)u.call(this);for(var g=0;g<8;g++)h[g]^=m[g+4&7];if(p){var y=p.words,v=y[0],b=y[1],E=(v<<8|v>>>24)&16711935|(v<<24|v>>>8)&4278255360,_=(b<<8|b>>>24)&16711935|(b<<24|b>>>8)&4278255360,k=E>>>16|_&4294901760,P=_<<16|E&65535;h[0]^=E,h[1]^=k,h[2]^=_,h[3]^=P,h[4]^=E,h[5]^=k,h[6]^=_,h[7]^=P;for(var g=0;g<4;g++)u.call(this)}},"_doReset"),_doProcessBlock:s(function(d,p){var m=this._X;u.call(this),o[0]=m[0]^m[5]>>>16^m[3]<<16,o[1]=m[2]^m[7]>>>16^m[5]<<16,o[2]=m[4]^m[1]>>>16^m[7]<<16,o[3]=m[6]^m[3]>>>16^m[1]<<16;for(var h=0;h<4;h++)o[h]=(o[h]<<8|o[h]>>>24)&16711935|(o[h]<<24|o[h]>>>8)&4278255360,d[p+h]^=o[h]},"_doProcessBlock"),blockSize:128/32,ivSize:64/32});function u(){for(var d=this._X,p=this._C,m=0;m<8;m++)a[m]=p[m];p[0]=p[0]+1295307597+this._b|0,p[1]=p[1]+3545052371+(p[0]>>>0<a[0]>>>0?1:0)|0,p[2]=p[2]+886263092+(p[1]>>>0<a[1]>>>0?1:0)|0,p[3]=p[3]+1295307597+(p[2]>>>0<a[2]>>>0?1:0)|0,p[4]=p[4]+3545052371+(p[3]>>>0<a[3]>>>0?1:0)|0,p[5]=p[5]+886263092+(p[4]>>>0<a[4]>>>0?1:0)|0,p[6]=p[6]+1295307597+(p[5]>>>0<a[5]>>>0?1:0)|0,p[7]=p[7]+3545052371+(p[6]>>>0<a[6]>>>0?1:0)|0,this._b=p[7]>>>0<a[7]>>>0?1:0;for(var m=0;m<8;m++){var h=d[m]+p[m],g=h&65535,y=h>>>16,v=((g*g>>>17)+g*y>>>15)+y*y,b=((h&4294901760)*h|0)+((h&65535)*h|0);l[m]=v^b}d[0]=l[0]+(l[7]<<16|l[7]>>>16)+(l[6]<<16|l[6]>>>16)|0,d[1]=l[1]+(l[0]<<8|l[0]>>>24)+l[7]|0,d[2]=l[2]+(l[1]<<16|l[1]>>>16)+(l[0]<<16|l[0]>>>16)|0,d[3]=l[3]+(l[2]<<8|l[2]>>>24)+l[1]|0,d[4]=l[4]+(l[3]<<16|l[3]>>>16)+(l[2]<<16|l[2]>>>16)|0,d[5]=l[5]+(l[4]<<8|l[4]>>>24)+l[3]|0,d[6]=l[6]+(l[5]<<16|l[5]>>>16)+(l[4]<<16|l[4]>>>16)|0,d[7]=l[7]+(l[6]<<8|l[6]>>>24)+l[5]|0}s(u,"nextState"),e.RabbitLegacy=r._createHelper(c)}(),t.RabbitLegacy})});var O1e=H((TL,Q1e)=>{f();(function(t,e,n){typeof TL=="object"?Q1e.exports=TL=e(Di(),Cx(),xx(),p1(),dl()):typeof define=="function"&&define.amd?define(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],e):e(t.CryptoJS)})(TL,function(t){return function(){var e=t,n=e.lib,r=n.BlockCipher,i=e.algo;let o=16,a=[608135816,2242054355,320440878,57701188,2752067618,698298832,137296536,3964562569,1160258022,953160567,3193202383,887688300,3232508343,3380367581,1065670069,3041331479,2450970073,2306472731],l=[[3509652390,2564797868,805139163,3491422135,3101798381,1780907670,3128725573,4046225305,614570311,3012652279,134345442,2240740374,1667834072,1901547113,2757295779,4103290238,227898511,1921955416,1904987480,2182433518,2069144605,3260701109,2620446009,720527379,3318853667,677414384,3393288472,3101374703,2390351024,1614419982,1822297739,2954791486,3608508353,3174124327,2024746970,1432378464,3864339955,2857741204,1464375394,1676153920,1439316330,715854006,3033291828,289532110,2706671279,2087905683,3018724369,1668267050,732546397,1947742710,3462151702,2609353502,2950085171,1814351708,2050118529,680887927,999245976,1800124847,3300911131,1713906067,1641548236,4213287313,1216130144,1575780402,4018429277,3917837745,3693486850,3949271944,596196993,3549867205,258830323,2213823033,772490370,2760122372,1774776394,2652871518,566650946,4142492826,1728879713,2882767088,1783734482,3629395816,2517608232,2874225571,1861159788,326777828,3124490320,2130389656,2716951837,967770486,1724537150,2185432712,2364442137,1164943284,2105845187,998989502,3765401048,2244026483,1075463327,1455516326,1322494562,910128902,469688178,1117454909,936433444,3490320968,3675253459,1240580251,122909385,2157517691,634681816,4142456567,3825094682,3061402683,2540495037,79693498,3249098678,1084186820,1583128258,426386531,1761308591,1047286709,322548459,995290223,1845252383,2603652396,3431023940,2942221577,3202600964,3727903485,1712269319,422464435,3234572375,1170764815,3523960633,3117677531,1434042557,442511882,3600875718,1076654713,1738483198,4213154764,2393238008,3677496056,1014306527,4251020053,793779912,2902807211,842905082,4246964064,1395751752,1040244610,2656851899,3396308128,445077038,3742853595,3577915638,679411651,2892444358,2354009459,1767581616,3150600392,3791627101,3102740896,284835224,4246832056,1258075500,768725851,2589189241,3069724005,3532540348,1274779536,3789419226,2764799539,1660621633,3471099624,4011903706,913787905,3497959166,737222580,2514213453,2928710040,3937242737,1804850592,3499020752,2949064160,2386320175,2390070455,2415321851,4061277028,2290661394,2416832540,1336762016,1754252060,3520065937,3014181293,791618072,3188594551,3933548030,2332172193,3852520463,3043980520,413987798,3465142937,3030929376,4245938359,2093235073,3534596313,375366246,2157278981,2479649556,555357303,3870105701,2008414854,3344188149,4221384143,3956125452,2067696032,3594591187,2921233993,2428461,544322398,577241275,1471733935,610547355,4027169054,1432588573,1507829418,2025931657,3646575487,545086370,48609733,2200306550,1653985193,298326376,1316178497,3007786442,2064951626,458293330,2589141269,3591329599,3164325604,727753846,2179363840,146436021,1461446943,4069977195,705550613,3059967265,3887724982,4281599278,3313849956,1404054877,2845806497,146425753,1854211946],[1266315497,3048417604,3681880366,3289982499,290971e4,1235738493,2632868024,2414719590,3970600049,1771706367,1449415276,3266420449,422970021,1963543593,2690192192,3826793022,1062508698,1531092325,1804592342,2583117782,2714934279,4024971509,1294809318,4028980673,1289560198,2221992742,1669523910,35572830,157838143,1052438473,1016535060,1802137761,1753167236,1386275462,3080475397,2857371447,1040679964,2145300060,2390574316,1461121720,2956646967,4031777805,4028374788,33600511,2920084762,1018524850,629373528,3691585981,3515945977,2091462646,2486323059,586499841,988145025,935516892,3367335476,2599673255,2839830854,265290510,3972581182,2759138881,3795373465,1005194799,847297441,406762289,1314163512,1332590856,1866599683,4127851711,750260880,613907577,1450815602,3165620655,3734664991,3650291728,3012275730,3704569646,1427272223,778793252,1343938022,2676280711,2052605720,1946737175,3164576444,3914038668,3967478842,3682934266,1661551462,3294938066,4011595847,840292616,3712170807,616741398,312560963,711312465,1351876610,322626781,1910503582,271666773,2175563734,1594956187,70604529,3617834859,1007753275,1495573769,4069517037,2549218298,2663038764,504708206,2263041392,3941167025,2249088522,1514023603,1998579484,1312622330,694541497,2582060303,2151582166,1382467621,776784248,2618340202,3323268794,2497899128,2784771155,503983604,4076293799,907881277,423175695,432175456,1378068232,4145222326,3954048622,3938656102,3820766613,2793130115,2977904593,26017576,3274890735,3194772133,1700274565,1756076034,4006520079,3677328699,720338349,1533947780,354530856,688349552,3973924725,1637815568,332179504,3949051286,53804574,2852348879,3044236432,1282449977,3583942155,3416972820,4006381244,1617046695,2628476075,3002303598,1686838959,431878346,2686675385,1700445008,1080580658,1009431731,832498133,3223435511,2605976345,2271191193,2516031870,1648197032,4164389018,2548247927,300782431,375919233,238389289,3353747414,2531188641,2019080857,1475708069,455242339,2609103871,448939670,3451063019,1395535956,2413381860,1841049896,1491858159,885456874,4264095073,4001119347,1565136089,3898914787,1108368660,540939232,1173283510,2745871338,3681308437,4207628240,3343053890,4016749493,1699691293,1103962373,3625875870,2256883143,3830138730,1031889488,3479347698,1535977030,4236805024,3251091107,2132092099,1774941330,1199868427,1452454533,157007616,2904115357,342012276,595725824,1480756522,206960106,497939518,591360097,863170706,2375253569,3596610801,1814182875,2094937945,3421402208,1082520231,3463918190,2785509508,435703966,3908032597,1641649973,2842273706,3305899714,1510255612,2148256476,2655287854,3276092548,4258621189,236887753,3681803219,274041037,1734335097,3815195456,3317970021,1899903192,1026095262,4050517792,356393447,2410691914,3873677099,3682840055],[3913112168,2491498743,4132185628,2489919796,1091903735,1979897079,3170134830,3567386728,3557303409,857797738,1136121015,1342202287,507115054,2535736646,337727348,3213592640,1301675037,2528481711,1895095763,1721773893,3216771564,62756741,2142006736,835421444,2531993523,1442658625,3659876326,2882144922,676362277,1392781812,170690266,3921047035,1759253602,3611846912,1745797284,664899054,1329594018,3901205900,3045908486,2062866102,2865634940,3543621612,3464012697,1080764994,553557557,3656615353,3996768171,991055499,499776247,1265440854,648242737,3940784050,980351604,3713745714,1749149687,3396870395,4211799374,3640570775,1161844396,3125318951,1431517754,545492359,4268468663,3499529547,1437099964,2702547544,3433638243,2581715763,2787789398,1060185593,1593081372,2418618748,4260947970,69676912,2159744348,86519011,2512459080,3838209314,1220612927,3339683548,133810670,1090789135,1078426020,1569222167,845107691,3583754449,4072456591,1091646820,628848692,1613405280,3757631651,526609435,236106946,48312990,2942717905,3402727701,1797494240,859738849,992217954,4005476642,2243076622,3870952857,3732016268,765654824,3490871365,2511836413,1685915746,3888969200,1414112111,2273134842,3281911079,4080962846,172450625,2569994100,980381355,4109958455,2819808352,2716589560,2568741196,3681446669,3329971472,1835478071,660984891,3704678404,4045999559,3422617507,3040415634,1762651403,1719377915,3470491036,2693910283,3642056355,3138596744,1364962596,2073328063,1983633131,926494387,3423689081,2150032023,4096667949,1749200295,3328846651,309677260,2016342300,1779581495,3079819751,111262694,1274766160,443224088,298511866,1025883608,3806446537,1145181785,168956806,3641502830,3584813610,1689216846,3666258015,3200248200,1692713982,2646376535,4042768518,1618508792,1610833997,3523052358,4130873264,2001055236,3610705100,2202168115,4028541809,2961195399,1006657119,2006996926,3186142756,1430667929,3210227297,1314452623,4074634658,4101304120,2273951170,1399257539,3367210612,3027628629,1190975929,2062231137,2333990788,2221543033,2438960610,1181637006,548689776,2362791313,3372408396,3104550113,3145860560,296247880,1970579870,3078560182,3769228297,1714227617,3291629107,3898220290,166772364,1251581989,493813264,448347421,195405023,2709975567,677966185,3703036547,1463355134,2715995803,1338867538,1343315457,2802222074,2684532164,233230375,2599980071,2000651841,3277868038,1638401717,4028070440,3237316320,6314154,819756386,300326615,590932579,1405279636,3267499572,3150704214,2428286686,3959192993,3461946742,1862657033,1266418056,963775037,2089974820,2263052895,1917689273,448879540,3550394620,3981727096,150775221,3627908307,1303187396,508620638,2975983352,2726630617,1817252668,1876281319,1457606340,908771278,3720792119,3617206836,2455994898,1729034894,1080033504],[976866871,3556439503,2881648439,1522871579,1555064734,1336096578,3548522304,2579274686,3574697629,3205460757,3593280638,3338716283,3079412587,564236357,2993598910,1781952180,1464380207,3163844217,3332601554,1699332808,1393555694,1183702653,3581086237,1288719814,691649499,2847557200,2895455976,3193889540,2717570544,1781354906,1676643554,2592534050,3230253752,1126444790,2770207658,2633158820,2210423226,2615765581,2414155088,3127139286,673620729,2805611233,1269405062,4015350505,3341807571,4149409754,1057255273,2012875353,2162469141,2276492801,2601117357,993977747,3918593370,2654263191,753973209,36408145,2530585658,25011837,3520020182,2088578344,530523599,2918365339,1524020338,1518925132,3760827505,3759777254,1202760957,3985898139,3906192525,674977740,4174734889,2031300136,2019492241,3983892565,4153806404,3822280332,352677332,2297720250,60907813,90501309,3286998549,1016092578,2535922412,2839152426,457141659,509813237,4120667899,652014361,1966332200,2975202805,55981186,2327461051,676427537,3255491064,2882294119,3433927263,1307055953,942726286,933058658,2468411793,3933900994,4215176142,1361170020,2001714738,2830558078,3274259782,1222529897,1679025792,2729314320,3714953764,1770335741,151462246,3013232138,1682292957,1483529935,471910574,1539241949,458788160,3436315007,1807016891,3718408830,978976581,1043663428,3165965781,1927990952,4200891579,2372276910,3208408903,3533431907,1412390302,2931980059,4132332400,1947078029,3881505623,4168226417,2941484381,1077988104,1320477388,886195818,18198404,3786409e3,2509781533,112762804,3463356488,1866414978,891333506,18488651,661792760,1628790961,3885187036,3141171499,876946877,2693282273,1372485963,791857591,2686433993,3759982718,3167212022,3472953795,2716379847,445679433,3561995674,3504004811,3574258232,54117162,3331405415,2381918588,3769707343,4154350007,1140177722,4074052095,668550556,3214352940,367459370,261225585,2610173221,4209349473,3468074219,3265815641,314222801,3066103646,3808782860,282218597,3406013506,3773591054,379116347,1285071038,846784868,2669647154,3771962079,3550491691,2305946142,453669953,1268987020,3317592352,3279303384,3744833421,2610507566,3859509063,266596637,3847019092,517658769,3462560207,3443424879,370717030,4247526661,2224018117,4143653529,4112773975,2788324899,2477274417,1456262402,2901442914,1517677493,1846949527,2295493580,3734397586,2176403920,1280348187,1908823572,3871786941,846861322,1172426758,3287448474,3383383037,1655181056,3139813346,901632758,1897031941,2986607138,3066810236,3447102507,1393639104,373351379,950779232,625454576,3124240540,4148612726,2007998917,544563296,2244738638,2330496472,2058025392,1291430526,424198748,50039436,29584100,3605783033,2429876329,2791104160,1057563949,3255363231,3075367218,3463963227,1469046755,985887462]];var c={pbox:[],sbox:[]};function u(g,y){let v=y>>24&255,b=y>>16&255,E=y>>8&255,_=y&255,k=g.sbox[0][v]+g.sbox[1][b];return k=k^g.sbox[2][E],k=k+g.sbox[3][_],k}s(u,"F");function d(g,y,v){let b=y,E=v,_;for(let k=0;k<o;++k)b=b^g.pbox[k],E=u(g,b)^E,_=b,b=E,E=_;return _=b,b=E,E=_,E=E^g.pbox[o],b=b^g.pbox[o+1],{left:b,right:E}}s(d,"BlowFish_Encrypt");function p(g,y,v){let b=y,E=v,_;for(let k=o+1;k>1;--k)b=b^g.pbox[k],E=u(g,b)^E,_=b,b=E,E=_;return _=b,b=E,E=_,E=E^g.pbox[1],b=b^g.pbox[0],{left:b,right:E}}s(p,"BlowFish_Decrypt");function m(g,y,v){for(let P=0;P<4;P++){g.sbox[P]=[];for(let N=0;N<256;N++)g.sbox[P][N]=l[P][N]}let b=0;for(let P=0;P<o+2;P++)g.pbox[P]=a[P]^y[b],b++,b>=v&&(b=0);let E=0,_=0,k=0;for(let P=0;P<o+2;P+=2)k=d(g,E,_),E=k.left,_=k.right,g.pbox[P]=E,g.pbox[P+1]=_;for(let P=0;P<4;P++)for(let N=0;N<256;N+=2)k=d(g,E,_),E=k.left,_=k.right,g.sbox[P][N]=E,g.sbox[P][N+1]=_;return!0}s(m,"BlowFishInit");var h=i.Blowfish=r.extend({_doReset:s(function(){if(this._keyPriorReset!==this._key){var g=this._keyPriorReset=this._key,y=g.words,v=g.sigBytes/4;m(c,y,v)}},"_doReset"),encryptBlock:s(function(g,y){var v=d(c,g[y],g[y+1]);g[y]=v.left,g[y+1]=v.right},"encryptBlock"),decryptBlock:s(function(g,y){var v=p(c,g[y],g[y+1]);g[y]=v.left,g[y+1]=v.right},"decryptBlock"),blockSize:64/32,keySize:128/32,ivSize:64/32});e.Blowfish=r._createHelper(h)}(),t.Blowfish})});var vx=H((wL,U1e)=>{f();(function(t,e,n){typeof wL=="object"?U1e.exports=wL=e(Di(),bB(),MAe(),OAe(),Cx(),WAe(),xx(),fX(),X7(),$Ae(),pX(),KAe(),XAe(),e1e(),oL(),r1e(),p1(),dl(),a1e(),c1e(),d1e(),p1e(),h1e(),A1e(),C1e(),v1e(),E1e(),T1e(),_1e(),R1e(),B1e(),D1e(),L1e(),M1e(),O1e()):typeof define=="function"&&define.amd?define(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./enc-base64url","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy","./blowfish"],e):t.CryptoJS=e(t.CryptoJS)})(wL,function(t){return t})});var cS=H(Wc=>{"use strict";f();Object.defineProperty(Wc,"__esModule",{value:!0});Wc.stringArray=Wc.array=Wc.func=Wc.error=Wc.number=Wc.string=Wc.boolean=void 0;function tst(t){return t===!0||t===!1}s(tst,"boolean");Wc.boolean=tst;function xxe(t){return typeof t=="string"||t instanceof String}s(xxe,"string");Wc.string=xxe;function nst(t){return typeof t=="number"||t instanceof Number}s(nst,"number");Wc.number=nst;function rst(t){return t instanceof Error}s(rst,"error");Wc.error=rst;function ist(t){return typeof t=="function"}s(ist,"func");Wc.func=ist;function vxe(t){return Array.isArray(t)}s(vxe,"array");Wc.array=vxe;function ost(t){return vxe(t)&&t.every(e=>xxe(e))}s(ost,"stringArray");Wc.stringArray=ost});var OZ=H(Hn=>{"use strict";f();Object.defineProperty(Hn,"__esModule",{value:!0});Hn.Message=Hn.NotificationType9=Hn.NotificationType8=Hn.NotificationType7=Hn.NotificationType6=Hn.NotificationType5=Hn.NotificationType4=Hn.NotificationType3=Hn.NotificationType2=Hn.NotificationType1=Hn.NotificationType0=Hn.NotificationType=Hn.RequestType9=Hn.RequestType8=Hn.RequestType7=Hn.RequestType6=Hn.RequestType5=Hn.RequestType4=Hn.RequestType3=Hn.RequestType2=Hn.RequestType1=Hn.RequestType=Hn.RequestType0=Hn.AbstractMessageSignature=Hn.ParameterStructures=Hn.ResponseError=Hn.ErrorCodes=void 0;var pI=cS(),hZ;(function(t){t.ParseError=-32700,t.InvalidRequest=-32600,t.MethodNotFound=-32601,t.InvalidParams=-32602,t.InternalError=-32603,t.jsonrpcReservedErrorRangeStart=-32099,t.serverErrorStart=-32099,t.MessageWriteError=-32099,t.MessageReadError=-32098,t.PendingResponseRejected=-32097,t.ConnectionInactive=-32096,t.ServerNotInitialized=-32002,t.UnknownErrorCode=-32001,t.jsonrpcReservedErrorRangeEnd=-32e3,t.serverErrorEnd=-32e3})(hZ||(Hn.ErrorCodes=hZ={}));var gZ=class t extends Error{static{s(this,"ResponseError")}constructor(e,n,r){super(n),this.code=pI.number(e)?e:hZ.UnknownErrorCode,this.data=r,Object.setPrototypeOf(this,t.prototype)}toJson(){let e={code:this.code,message:this.message};return this.data!==void 0&&(e.data=this.data),e}};Hn.ResponseError=gZ;var cd=class t{static{s(this,"ParameterStructures")}constructor(e){this.kind=e}static is(e){return e===t.auto||e===t.byName||e===t.byPosition}toString(){return this.kind}};Hn.ParameterStructures=cd;cd.auto=new cd("auto");cd.byPosition=new cd("byPosition");cd.byName=new cd("byName");var hs=class{static{s(this,"AbstractMessageSignature")}constructor(e,n){this.method=e,this.numberOfParams=n}get parameterStructures(){return cd.auto}};Hn.AbstractMessageSignature=hs;var AZ=class extends hs{static{s(this,"RequestType0")}constructor(e){super(e,0)}};Hn.RequestType0=AZ;var yZ=class extends hs{static{s(this,"RequestType")}constructor(e,n=cd.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};Hn.RequestType=yZ;var CZ=class extends hs{static{s(this,"RequestType1")}constructor(e,n=cd.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};Hn.RequestType1=CZ;var xZ=class extends hs{static{s(this,"RequestType2")}constructor(e){super(e,2)}};Hn.RequestType2=xZ;var vZ=class extends hs{static{s(this,"RequestType3")}constructor(e){super(e,3)}};Hn.RequestType3=vZ;var bZ=class extends hs{static{s(this,"RequestType4")}constructor(e){super(e,4)}};Hn.RequestType4=bZ;var EZ=class extends hs{static{s(this,"RequestType5")}constructor(e){super(e,5)}};Hn.RequestType5=EZ;var IZ=class extends hs{static{s(this,"RequestType6")}constructor(e){super(e,6)}};Hn.RequestType6=IZ;var TZ=class extends hs{static{s(this,"RequestType7")}constructor(e){super(e,7)}};Hn.RequestType7=TZ;var wZ=class extends hs{static{s(this,"RequestType8")}constructor(e){super(e,8)}};Hn.RequestType8=wZ;var _Z=class extends hs{static{s(this,"RequestType9")}constructor(e){super(e,9)}};Hn.RequestType9=_Z;var SZ=class extends hs{static{s(this,"NotificationType")}constructor(e,n=cd.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};Hn.NotificationType=SZ;var RZ=class extends hs{static{s(this,"NotificationType0")}constructor(e){super(e,0)}};Hn.NotificationType0=RZ;var kZ=class extends hs{static{s(this,"NotificationType1")}constructor(e,n=cd.auto){super(e,1),this._parameterStructures=n}get parameterStructures(){return this._parameterStructures}};Hn.NotificationType1=kZ;var BZ=class extends hs{static{s(this,"NotificationType2")}constructor(e){super(e,2)}};Hn.NotificationType2=BZ;var PZ=class extends hs{static{s(this,"NotificationType3")}constructor(e){super(e,3)}};Hn.NotificationType3=PZ;var DZ=class extends hs{static{s(this,"NotificationType4")}constructor(e){super(e,4)}};Hn.NotificationType4=DZ;var NZ=class extends hs{static{s(this,"NotificationType5")}constructor(e){super(e,5)}};Hn.NotificationType5=NZ;var LZ=class extends hs{static{s(this,"NotificationType6")}constructor(e){super(e,6)}};Hn.NotificationType6=LZ;var FZ=class extends hs{static{s(this,"NotificationType7")}constructor(e){super(e,7)}};Hn.NotificationType7=FZ;var MZ=class extends hs{static{s(this,"NotificationType8")}constructor(e){super(e,8)}};Hn.NotificationType8=MZ;var QZ=class extends hs{static{s(this,"NotificationType9")}constructor(e){super(e,9)}};Hn.NotificationType9=QZ;var bxe;(function(t){function e(i){let o=i;return o&&pI.string(o.method)&&(pI.string(o.id)||pI.number(o.id))}s(e,"isRequest"),t.isRequest=e;function n(i){let o=i;return o&&pI.string(o.method)&&i.id===void 0}s(n,"isNotification"),t.isNotification=n;function r(i){let o=i;return o&&(o.result!==void 0||!!o.error)&&(pI.string(o.id)||pI.number(o.id)||o.id===null)}s(r,"isResponse"),t.isResponse=r})(bxe||(Hn.Message=bxe={}))});var qZ=H(Px=>{"use strict";f();var Exe;Object.defineProperty(Px,"__esModule",{value:!0});Px.LRUCache=Px.LinkedMap=Px.Touch=void 0;var Hc;(function(t){t.None=0,t.First=1,t.AsOld=t.First,t.Last=2,t.AsNew=t.Last})(Hc||(Px.Touch=Hc={}));var cF=class{static{s(this,"LinkedMap")}constructor(){this[Exe]="LinkedMap",this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,n=Hc.None){let r=this._map.get(e);if(r)return n!==Hc.None&&this.touch(r,n),r.value}set(e,n,r=Hc.None){let i=this._map.get(e);if(i)i.value=n,r!==Hc.None&&this.touch(i,r);else{switch(i={key:e,value:n,next:void 0,previous:void 0},r){case Hc.None:this.addItemLast(i);break;case Hc.First:this.addItemFirst(i);break;case Hc.Last:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let n=this._map.get(e);if(n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){let r=this._state,i=this._head;for(;i;){if(n?e.bind(n)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.key,done:!1};return n=n.next,i}else return{value:void 0,done:!0}},"next")};return r}values(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:n.value,done:!1};return n=n.next,i}else return{value:void 0,done:!0}},"next")};return r}entries(){let e=this._state,n=this._head,r={[Symbol.iterator]:()=>r,next:s(()=>{if(this._state!==e)throw new Error("LinkedMap got modified during iteration.");if(n){let i={value:[n.key,n.value],done:!1};return n=n.next,i}else return{value:void 0,done:!0}},"next")};return r}[(Exe=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==Hc.First&&n!==Hc.Last)){if(n===Hc.First){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===Hc.Last){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(let[n,r]of e)this.set(n,r)}};Px.LinkedMap=cF;var UZ=class extends cF{static{s(this,"LRUCache")}constructor(e,n=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=Hc.AsNew){return super.get(e,n)}peek(e){return super.get(e,Hc.None)}set(e,n){return super.set(e,n,Hc.Last),this.checkTrim(),this}checkTrim(){this.size>this._limit&&this.trimOld(Math.round(this._limit*this._ratio))}};Px.LRUCache=UZ});var Txe=H(uF=>{"use strict";f();Object.defineProperty(uF,"__esModule",{value:!0});uF.Disposable=void 0;var Ixe;(function(t){function e(n){return{dispose:n}}s(e,"create"),t.create=e})(Ixe||(uF.Disposable=Ixe={}))});var Dx=H(GZ=>{"use strict";f();Object.defineProperty(GZ,"__esModule",{value:!0});var WZ;function HZ(){if(WZ===void 0)throw new Error("No runtime abstraction layer installed");return WZ}s(HZ,"RAL");(function(t){function e(n){if(n===void 0)throw new Error("No runtime abstraction layer provided");WZ=n}s(e,"install"),t.install=e})(HZ||(HZ={}));GZ.default=HZ});var dS=H(uS=>{"use strict";f();Object.defineProperty(uS,"__esModule",{value:!0});uS.Emitter=uS.Event=void 0;var sst=Dx(),wxe;(function(t){let e={dispose(){}};t.None=function(){return e}})(wxe||(uS.Event=wxe={}));var jZ=class{static{s(this,"CallbackList")}add(e,n=null,r){this._callbacks||(this._callbacks=[],this._contexts=[]),this._callbacks.push(e),this._contexts.push(n),Array.isArray(r)&&r.push({dispose:s(()=>this.remove(e,n),"dispose")})}remove(e,n=null){if(!this._callbacks)return;let r=!1;for(let i=0,o=this._callbacks.length;i<o;i++)if(this._callbacks[i]===e)if(this._contexts[i]===n){this._callbacks.splice(i,1),this._contexts.splice(i,1);return}else r=!0;if(r)throw new Error("When adding a listener with a context, you should remove it with the same context")}invoke(...e){if(!this._callbacks)return[];let n=[],r=this._callbacks.slice(0),i=this._contexts.slice(0);for(let o=0,a=r.length;o<a;o++)try{n.push(r[o].apply(i[o],e))}catch(l){(0,sst.default)().console.error(l)}return n}isEmpty(){return!this._callbacks||this._callbacks.length===0}dispose(){this._callbacks=void 0,this._contexts=void 0}},dF=class t{static{s(this,"Emitter")}constructor(e){this._options=e}get event(){return this._event||(this._event=(e,n,r)=>{this._callbacks||(this._callbacks=new jZ),this._options&&this._options.onFirstListenerAdd&&this._callbacks.isEmpty()&&this._options.onFirstListenerAdd(this),this._callbacks.add(e,n);let i={dispose:s(()=>{this._callbacks&&(this._callbacks.remove(e,n),i.dispose=t._noop,this._options&&this._options.onLastListenerRemove&&this._callbacks.isEmpty()&&this._options.onLastListenerRemove(this))},"dispose")};return Array.isArray(r)&&r.push(i),i}),this._event}fire(e){this._callbacks&&this._callbacks.invoke.call(this._callbacks,e)}dispose(){this._callbacks&&(this._callbacks.dispose(),this._callbacks=void 0)}};uS.Emitter=dF;dF._noop=function(){}});var mF=H(fS=>{"use strict";f();Object.defineProperty(fS,"__esModule",{value:!0});fS.CancellationTokenSource=fS.CancellationToken=void 0;var ast=Dx(),lst=cS(),VZ=dS(),fF;(function(t){t.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:VZ.Event.None}),t.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:VZ.Event.None});function e(n){let r=n;return r&&(r===t.None||r===t.Cancelled||lst.boolean(r.isCancellationRequested)&&!!r.onCancellationRequested)}s(e,"is"),t.is=e})(fF||(fS.CancellationToken=fF={}));var cst=Object.freeze(function(t,e){let n=(0,ast.default)().timer.setTimeout(t.bind(e),0);return{dispose(){n.dispose()}}}),pF=class{static{s(this,"MutableToken")}constructor(){this._isCancelled=!1}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?cst:(this._emitter||(this._emitter=new VZ.Emitter),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=void 0)}},$Z=class{static{s(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new pF),this._token}cancel(){this._token?this._token.cancel():this._token=fF.Cancelled}dispose(){this._token?this._token instanceof pF&&this._token.dispose():this._token=fF.None}};fS.CancellationTokenSource=$Z});var _xe=H(pS=>{"use strict";f();Object.defineProperty(pS,"__esModule",{value:!0});pS.SharedArrayReceiverStrategy=pS.SharedArraySenderStrategy=void 0;var ust=mF(),HB;(function(t){t.Continue=0,t.Cancelled=1})(HB||(HB={}));var zZ=class{static{s(this,"SharedArraySenderStrategy")}constructor(){this.buffers=new Map}enableCancellation(e){if(e.id===null)return;let n=new SharedArrayBuffer(4),r=new Int32Array(n,0,1);r[0]=HB.Continue,this.buffers.set(e.id,n),e.$cancellationData=n}async sendCancellation(e,n){let r=this.buffers.get(n);if(r===void 0)return;let i=new Int32Array(r,0,1);Atomics.store(i,0,HB.Cancelled)}cleanup(e){this.buffers.delete(e)}dispose(){this.buffers.clear()}};pS.SharedArraySenderStrategy=zZ;var YZ=class{static{s(this,"SharedArrayBufferCancellationToken")}constructor(e){this.data=new Int32Array(e,0,1)}get isCancellationRequested(){return Atomics.load(this.data,0)===HB.Cancelled}get onCancellationRequested(){throw new Error("Cancellation over SharedArrayBuffer doesn't support cancellation events")}},KZ=class{static{s(this,"SharedArrayBufferCancellationTokenSource")}constructor(e){this.token=new YZ(e)}cancel(){}dispose(){}},JZ=class{static{s(this,"SharedArrayReceiverStrategy")}constructor(){this.kind="request"}createCancellationTokenSource(e){let n=e.$cancellationData;return n===void 0?new ust.CancellationTokenSource:new KZ(n)}};pS.SharedArrayReceiverStrategy=JZ});var ZZ=H(hF=>{"use strict";f();Object.defineProperty(hF,"__esModule",{value:!0});hF.Semaphore=void 0;var dst=Dx(),XZ=class{static{s(this,"Semaphore")}constructor(e=1){if(e<=0)throw new Error("Capacity must be greater than 0");this._capacity=e,this._active=0,this._waiting=[]}lock(e){return new Promise((n,r)=>{this._waiting.push({thunk:e,resolve:n,reject:r}),this.runNext()})}get active(){return this._active}runNext(){this._waiting.length===0||this._active===this._capacity||(0,dst.default)().timer.setImmediate(()=>this.doRunNext())}doRunNext(){if(this._waiting.length===0||this._active===this._capacity)return;let e=this._waiting.shift();if(this._active++,this._active>this._capacity)throw new Error("To many thunks active");try{let n=e.thunk();n instanceof Promise?n.then(r=>{this._active--,e.resolve(r),this.runNext()},r=>{this._active--,e.reject(r),this.runNext()}):(this._active--,e.resolve(n),this.runNext())}catch(n){this._active--,e.reject(n),this.runNext()}}};hF.Semaphore=XZ});var Rxe=H(Nx=>{"use strict";f();Object.defineProperty(Nx,"__esModule",{value:!0});Nx.ReadableStreamMessageReader=Nx.AbstractMessageReader=Nx.MessageReader=void 0;var tee=Dx(),mS=cS(),eee=dS(),fst=ZZ(),Sxe;(function(t){function e(n){let r=n;return r&&mS.func(r.listen)&&mS.func(r.dispose)&&mS.func(r.onError)&&mS.func(r.onClose)&&mS.func(r.onPartialMessage)}s(e,"is"),t.is=e})(Sxe||(Nx.MessageReader=Sxe={}));var gF=class{static{s(this,"AbstractMessageReader")}constructor(){this.errorEmitter=new eee.Emitter,this.closeEmitter=new eee.Emitter,this.partialMessageEmitter=new eee.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e){this.errorEmitter.fire(this.asError(e))}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}get onPartialMessage(){return this.partialMessageEmitter.event}firePartialMessage(e){this.partialMessageEmitter.fire(e)}asError(e){return e instanceof Error?e:new Error(`Reader received error. Reason: ${mS.string(e.message)?e.message:"unknown"}`)}};Nx.AbstractMessageReader=gF;var nee;(function(t){function e(n){let r,i,o,a=new Map,l,c=new Map;if(n===void 0||typeof n=="string")r=n??"utf-8";else{if(r=n.charset??"utf-8",n.contentDecoder!==void 0&&(o=n.contentDecoder,a.set(o.name,o)),n.contentDecoders!==void 0)for(let u of n.contentDecoders)a.set(u.name,u);if(n.contentTypeDecoder!==void 0&&(l=n.contentTypeDecoder,c.set(l.name,l)),n.contentTypeDecoders!==void 0)for(let u of n.contentTypeDecoders)c.set(u.name,u)}return l===void 0&&(l=(0,tee.default)().applicationJson.decoder,c.set(l.name,l)),{charset:r,contentDecoder:o,contentDecoders:a,contentTypeDecoder:l,contentTypeDecoders:c}}s(e,"fromOptions"),t.fromOptions=e})(nee||(nee={}));var ree=class extends gF{static{s(this,"ReadableStreamMessageReader")}constructor(e,n){super(),this.readable=e,this.options=nee.fromOptions(n),this.buffer=(0,tee.default)().messageBuffer.create(this.options.charset),this._partialMessageTimeout=1e4,this.nextMessageLength=-1,this.messageToken=0,this.readSemaphore=new fst.Semaphore(1)}set partialMessageTimeout(e){this._partialMessageTimeout=e}get partialMessageTimeout(){return this._partialMessageTimeout}listen(e){this.nextMessageLength=-1,this.messageToken=0,this.partialMessageTimer=void 0,this.callback=e;let n=this.readable.onData(r=>{this.onData(r)});return this.readable.onError(r=>this.fireError(r)),this.readable.onClose(()=>this.fireClose()),n}onData(e){try{for(this.buffer.append(e);;){if(this.nextMessageLength===-1){let r=this.buffer.tryReadHeaders(!0);if(!r)return;let i=r.get("content-length");if(!i){this.fireError(new Error(`Header must provide a Content-Length property.
${JSON.stringify(Object.fromEntries(r))}`));return}let o=parseInt(i);if(isNaN(o)){this.fireError(new Error(`Content-Length value must be a number. Got ${i}`));return}this.nextMessageLength=o}let n=this.buffer.tryReadBody(this.nextMessageLength);if(n===void 0){this.setPartialMessageTimer();return}this.clearPartialMessageTimer(),this.nextMessageLength=-1,this.readSemaphore.lock(async()=>{let r=this.options.contentDecoder!==void 0?await this.options.contentDecoder.decode(n):n,i=await this.options.contentTypeDecoder.decode(r,this.options);this.callback(i)}).catch(r=>{this.fireError(r)})}}catch(n){this.fireError(n)}}clearPartialMessageTimer(){this.partialMessageTimer&&(this.partialMessageTimer.dispose(),this.partialMessageTimer=void 0)}setPartialMessageTimer(){this.clearPartialMessageTimer(),!(this._partialMessageTimeout<=0)&&(this.partialMessageTimer=(0,tee.default)().timer.setTimeout((e,n)=>{this.partialMessageTimer=void 0,e===this.messageToken&&(this.firePartialMessage({messageToken:e,waitingTime:n}),this.setPartialMessageTimer())},this._partialMessageTimeout,this.messageToken,this._partialMessageTimeout))}};Nx.ReadableStreamMessageReader=ree});var Nxe=H(Lx=>{"use strict";f();Object.defineProperty(Lx,"__esModule",{value:!0});Lx.WriteableStreamMessageWriter=Lx.AbstractMessageWriter=Lx.MessageWriter=void 0;var kxe=Dx(),GB=cS(),pst=ZZ(),Bxe=dS(),mst="Content-Length: ",Pxe=`\r
`,Dxe;(function(t){function e(n){let r=n;return r&&GB.func(r.dispose)&&GB.func(r.onClose)&&GB.func(r.onError)&&GB.func(r.write)}s(e,"is"),t.is=e})(Dxe||(Lx.MessageWriter=Dxe={}));var AF=class{static{s(this,"AbstractMessageWriter")}constructor(){this.errorEmitter=new Bxe.Emitter,this.closeEmitter=new Bxe.Emitter}dispose(){this.errorEmitter.dispose(),this.closeEmitter.dispose()}get onError(){return this.errorEmitter.event}fireError(e,n,r){this.errorEmitter.fire([this.asError(e),n,r])}get onClose(){return this.closeEmitter.event}fireClose(){this.closeEmitter.fire(void 0)}asError(e){return e instanceof Error?e:new Error(`Writer received error. Reason: ${GB.string(e.message)?e.message:"unknown"}`)}};Lx.AbstractMessageWriter=AF;var iee;(function(t){function e(n){return n===void 0||typeof n=="string"?{charset:n??"utf-8",contentTypeEncoder:(0,kxe.default)().applicationJson.encoder}:{charset:n.charset??"utf-8",contentEncoder:n.contentEncoder,contentTypeEncoder:n.contentTypeEncoder??(0,kxe.default)().applicationJson.encoder}}s(e,"fromOptions"),t.fromOptions=e})(iee||(iee={}));var oee=class extends AF{static{s(this,"WriteableStreamMessageWriter")}constructor(e,n){super(),this.writable=e,this.options=iee.fromOptions(n),this.errorCount=0,this.writeSemaphore=new pst.Semaphore(1),this.writable.onError(r=>this.fireError(r)),this.writable.onClose(()=>this.fireClose())}async write(e){return this.writeSemaphore.lock(async()=>this.options.contentTypeEncoder.encode(e,this.options).then(r=>this.options.contentEncoder!==void 0?this.options.contentEncoder.encode(r):r).then(r=>{let i=[];return i.push(mst,r.byteLength.toString(),Pxe),i.push(Pxe),this.doWrite(e,i,r)},r=>{throw this.fireError(r),r}))}async doWrite(e,n,r){try{return await this.writable.write(n.join(""),"ascii"),this.writable.write(r)}catch(i){return this.handleError(i,e),Promise.reject(i)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){this.writable.end()}};Lx.WriteableStreamMessageWriter=oee});var Lxe=H(yF=>{"use strict";f();Object.defineProperty(yF,"__esModule",{value:!0});yF.AbstractMessageBuffer=void 0;var hst=13,gst=10,Ast=`\r
`,see=class{static{s(this,"AbstractMessageBuffer")}constructor(e="utf-8"){this._encoding=e,this._chunks=[],this._totalLength=0}get encoding(){return this._encoding}append(e){let n=typeof e=="string"?this.fromString(e,this._encoding):e;this._chunks.push(n),this._totalLength+=n.byteLength}tryReadHeaders(e=!1){if(this._chunks.length===0)return;let n=0,r=0,i=0,o=0;e:for(;r<this._chunks.length;){let u=this._chunks[r];for(i=0;i<u.length;){switch(u[i]){case hst:switch(n){case 0:n=1;break;case 2:n=3;break;default:n=0}break;case gst:switch(n){case 1:n=2;break;case 3:n=4,i++;break e;default:n=0}break;default:n=0}i++}o+=u.byteLength,r++}if(n!==4)return;let a=this._read(o+i),l=new Map,c=this.toString(a,"ascii").split(Ast);if(c.length<2)return l;for(let u=0;u<c.length-2;u++){let d=c[u],p=d.indexOf(":");if(p===-1)throw new Error(`Message header must separate key and value using ':'
${d}`);let m=d.substr(0,p),h=d.substr(p+1).trim();l.set(e?m.toLowerCase():m,h)}return l}tryReadBody(e){if(!(this._totalLength<e))return this._read(e)}get numberOfBytes(){return this._totalLength}_read(e){if(e===0)return this.emptyBuffer();if(e>this._totalLength)throw new Error("Cannot read so many bytes!");if(this._chunks[0].byteLength===e){let o=this._chunks[0];return this._chunks.shift(),this._totalLength-=e,this.asNative(o)}if(this._chunks[0].byteLength>e){let o=this._chunks[0],a=this.asNative(o,e);return this._chunks[0]=o.slice(e),this._totalLength-=e,a}let n=this.allocNative(e),r=0,i=0;for(;e>0;){let o=this._chunks[i];if(o.byteLength>e){let a=o.slice(0,e);n.set(a,r),r+=e,this._chunks[i]=o.slice(e),this._totalLength-=e,e-=e}else n.set(o,r),r+=o.byteLength,this._chunks.shift(),this._totalLength-=o.byteLength,e-=o.byteLength}return n}};yF.AbstractMessageBuffer=see});var Uxe=H(Jr=>{"use strict";f();Object.defineProperty(Jr,"__esModule",{value:!0});Jr.createMessageConnection=Jr.ConnectionOptions=Jr.MessageStrategy=Jr.CancellationStrategy=Jr.CancellationSenderStrategy=Jr.CancellationReceiverStrategy=Jr.RequestCancellationReceiverStrategy=Jr.IdCancellationReceiverStrategy=Jr.ConnectionStrategy=Jr.ConnectionError=Jr.ConnectionErrors=Jr.LogTraceNotification=Jr.SetTraceNotification=Jr.TraceFormat=Jr.TraceValues=Jr.Trace=Jr.NullLogger=Jr.ProgressType=Jr.ProgressToken=void 0;var Fxe=Dx(),Ys=cS(),Tr=OZ(),Mxe=qZ(),jB=dS(),aee=mF(),zB;(function(t){t.type=new Tr.NotificationType("$/cancelRequest")})(zB||(zB={}));var lee;(function(t){function e(n){return typeof n=="string"||typeof n=="number"}s(e,"is"),t.is=e})(lee||(Jr.ProgressToken=lee={}));var VB;(function(t){t.type=new Tr.NotificationType("$/progress")})(VB||(VB={}));var cee=class{static{s(this,"ProgressType")}constructor(){}};Jr.ProgressType=cee;var uee;(function(t){function e(n){return Ys.func(n)}s(e,"is"),t.is=e})(uee||(uee={}));Jr.NullLogger=Object.freeze({error:s(()=>{},"error"),warn:s(()=>{},"warn"),info:s(()=>{},"info"),log:s(()=>{},"log")});var Ao;(function(t){t[t.Off=0]="Off",t[t.Messages=1]="Messages",t[t.Compact=2]="Compact",t[t.Verbose=3]="Verbose"})(Ao||(Jr.Trace=Ao={}));var Qxe;(function(t){t.Off="off",t.Messages="messages",t.Compact="compact",t.Verbose="verbose"})(Qxe||(Jr.TraceValues=Qxe={}));(function(t){function e(r){if(!Ys.string(r))return t.Off;switch(r=r.toLowerCase(),r){case"off":return t.Off;case"messages":return t.Messages;case"compact":return t.Compact;case"verbose":return t.Verbose;default:return t.Off}}s(e,"fromString"),t.fromString=e;function n(r){switch(r){case t.Off:return"off";case t.Messages:return"messages";case t.Compact:return"compact";case t.Verbose:return"verbose";default:return"off"}}s(n,"toString"),t.toString=n})(Ao||(Jr.Trace=Ao={}));var d0;(function(t){t.Text="text",t.JSON="json"})(d0||(Jr.TraceFormat=d0={}));(function(t){function e(n){return Ys.string(n)?(n=n.toLowerCase(),n==="json"?t.JSON:t.Text):t.Text}s(e,"fromString"),t.fromString=e})(d0||(Jr.TraceFormat=d0={}));var dee;(function(t){t.type=new Tr.NotificationType("$/setTrace")})(dee||(Jr.SetTraceNotification=dee={}));var CF;(function(t){t.type=new Tr.NotificationType("$/logTrace")})(CF||(Jr.LogTraceNotification=CF={}));var $B;(function(t){t[t.Closed=1]="Closed",t[t.Disposed=2]="Disposed",t[t.AlreadyListening=3]="AlreadyListening"})($B||(Jr.ConnectionErrors=$B={}));var hS=class t extends Error{static{s(this,"ConnectionError")}constructor(e,n){super(n),this.code=e,Object.setPrototypeOf(this,t.prototype)}};Jr.ConnectionError=hS;var fee;(function(t){function e(n){let r=n;return r&&Ys.func(r.cancelUndispatched)}s(e,"is"),t.is=e})(fee||(Jr.ConnectionStrategy=fee={}));var xF;(function(t){function e(n){let r=n;return r&&(r.kind===void 0||r.kind==="id")&&Ys.func(r.createCancellationTokenSource)&&(r.dispose===void 0||Ys.func(r.dispose))}s(e,"is"),t.is=e})(xF||(Jr.IdCancellationReceiverStrategy=xF={}));var pee;(function(t){function e(n){let r=n;return r&&r.kind==="request"&&Ys.func(r.createCancellationTokenSource)&&(r.dispose===void 0||Ys.func(r.dispose))}s(e,"is"),t.is=e})(pee||(Jr.RequestCancellationReceiverStrategy=pee={}));var vF;(function(t){t.Message=Object.freeze({createCancellationTokenSource(n){return new aee.CancellationTokenSource}});function e(n){return xF.is(n)||pee.is(n)}s(e,"is"),t.is=e})(vF||(Jr.CancellationReceiverStrategy=vF={}));var bF;(function(t){t.Message=Object.freeze({sendCancellation(n,r){return n.sendNotification(zB.type,{id:r})},cleanup(n){}});function e(n){let r=n;return r&&Ys.func(r.sendCancellation)&&Ys.func(r.cleanup)}s(e,"is"),t.is=e})(bF||(Jr.CancellationSenderStrategy=bF={}));var EF;(function(t){t.Message=Object.freeze({receiver:vF.Message,sender:bF.Message});function e(n){let r=n;return r&&vF.is(r.receiver)&&bF.is(r.sender)}s(e,"is"),t.is=e})(EF||(Jr.CancellationStrategy=EF={}));var IF;(function(t){function e(n){let r=n;return r&&Ys.func(r.handleMessage)}s(e,"is"),t.is=e})(IF||(Jr.MessageStrategy=IF={}));var Oxe;(function(t){function e(n){let r=n;return r&&(EF.is(r.cancellationStrategy)||fee.is(r.connectionStrategy)||IF.is(r.messageStrategy))}s(e,"is"),t.is=e})(Oxe||(Jr.ConnectionOptions=Oxe={}));var hm;(function(t){t[t.New=1]="New",t[t.Listening=2]="Listening",t[t.Closed=3]="Closed",t[t.Disposed=4]="Disposed"})(hm||(hm={}));function yst(t,e,n,r){let i=n!==void 0?n:Jr.NullLogger,o=0,a=0,l=0,c="2.0",u,d=new Map,p,m=new Map,h=new Map,g,y=new Mxe.LinkedMap,v=new Map,b=new Set,E=new Map,_=Ao.Off,k=d0.Text,P,N=hm.New,U=new jB.Emitter,ne=new jB.Emitter,he=new jB.Emitter,ae=new jB.Emitter,G=new jB.Emitter,W=r&&r.cancellationStrategy?r.cancellationStrategy:EF.Message;function ue(Ae){if(Ae===null)throw new Error("Can't send requests with id null since the response can't be correlated.");return"req-"+Ae.toString()}s(ue,"createRequestQueueKey");function ie(Ae){return Ae===null?"res-unknown-"+(++l).toString():"res-"+Ae.toString()}s(ie,"createResponseQueueKey");function V(){return"not-"+(++a).toString()}s(V,"createNotificationQueueKey");function O(Ae,He){Tr.Message.isRequest(He)?Ae.set(ue(He.id),He):Tr.Message.isResponse(He)?Ae.set(ie(He.id),He):Ae.set(V(),He)}s(O,"addMessageToQueue");function Y(Ae){}s(Y,"cancelUndispatched");function te(){return N===hm.Listening}s(te,"isListening");function pe(){return N===hm.Closed}s(pe,"isClosed");function ee(){return N===hm.Disposed}s(ee,"isDisposed");function ce(){(N===hm.New||N===hm.Listening)&&(N=hm.Closed,ne.fire(void 0))}s(ce,"closeHandler");function me(Ae){U.fire([Ae,void 0,void 0])}s(me,"readErrorHandler");function Ne(Ae){U.fire(Ae)}s(Ne,"writeErrorHandler"),t.onClose(ce),t.onError(me),e.onClose(ce),e.onError(Ne);function Se(){g||y.size===0||(g=(0,Fxe.default)().timer.setImmediate(()=>{g=void 0,Me()}))}s(Se,"triggerMessageQueue");function Je(Ae){Tr.Message.isRequest(Ae)?It(Ae):Tr.Message.isNotification(Ae)?vt(Ae):Tr.Message.isResponse(Ae)?yt(Ae):le(Ae)}s(Je,"handleMessage");function Me(){if(y.size===0)return;let Ae=y.shift();try{let He=r?.messageStrategy;IF.is(He)?He.handleMessage(Ae,Je):Je(Ae)}finally{Se()}}s(Me,"processMessageQueue");let ft=s(Ae=>{try{if(Tr.Message.isNotification(Ae)&&Ae.method===zB.type.method){let He=Ae.params.id,ut=ue(He),At=y.get(ut);if(Tr.Message.isRequest(At)){let Ht=r?.connectionStrategy,yn=Ht&&Ht.cancelUndispatched?Ht.cancelUndispatched(At,Y):void 0;if(yn&&(yn.error!==void 0||yn.result!==void 0)){y.delete(ut),E.delete(He),yn.id=At.id,X(yn,Ae.method,Date.now()),e.write(yn).catch(()=>i.error("Sending response for canceled message failed."));return}}let Xt=E.get(He);if(Xt!==void 0){Xt.cancel(),We(Ae);return}else b.add(He)}O(y,Ae)}finally{Se()}},"callback");function It(Ae){if(ee())return;function He(jt,nn,Jt){let Tn={jsonrpc:c,id:Ae.id};jt instanceof Tr.ResponseError?Tn.error=jt.toJson():Tn.result=jt===void 0?null:jt,X(Tn,nn,Jt),e.write(Tn).catch(()=>i.error("Sending response failed."))}s(He,"reply");function ut(jt,nn,Jt){let Tn={jsonrpc:c,id:Ae.id,error:jt.toJson()};X(Tn,nn,Jt),e.write(Tn).catch(()=>i.error("Sending response failed."))}s(ut,"replyError");function At(jt,nn,Jt){jt===void 0&&(jt=null);let Tn={jsonrpc:c,id:Ae.id,result:jt};X(Tn,nn,Jt),e.write(Tn).catch(()=>i.error("Sending response failed."))}s(At,"replySuccess"),re(Ae);let Xt=d.get(Ae.method),Ht,yn;Xt&&(Ht=Xt.type,yn=Xt.handler);let vn=Date.now();if(yn||u){let jt=Ae.id??String(Date.now()),nn=xF.is(W.receiver)?W.receiver.createCancellationTokenSource(jt):W.receiver.createCancellationTokenSource(Ae);Ae.id!==null&&b.has(Ae.id)&&nn.cancel(),Ae.id!==null&&E.set(jt,nn);try{let Jt;if(yn)if(Ae.params===void 0){if(Ht!==void 0&&Ht.numberOfParams!==0){ut(new Tr.ResponseError(Tr.ErrorCodes.InvalidParams,`Request ${Ae.method} defines ${Ht.numberOfParams} params but received none.`),Ae.method,vn);return}Jt=yn(nn.token)}else if(Array.isArray(Ae.params)){if(Ht!==void 0&&Ht.parameterStructures===Tr.ParameterStructures.byName){ut(new Tr.ResponseError(Tr.ErrorCodes.InvalidParams,`Request ${Ae.method} defines parameters by name but received parameters by position`),Ae.method,vn);return}Jt=yn(...Ae.params,nn.token)}else{if(Ht!==void 0&&Ht.parameterStructures===Tr.ParameterStructures.byPosition){ut(new Tr.ResponseError(Tr.ErrorCodes.InvalidParams,`Request ${Ae.method} defines parameters by position but received parameters by name`),Ae.method,vn);return}Jt=yn(Ae.params,nn.token)}else u&&(Jt=u(Ae.method,Ae.params,nn.token));let Tn=Jt;Jt?Tn.then?Tn.then(Fn=>{E.delete(jt),He(Fn,Ae.method,vn)},Fn=>{E.delete(jt),Fn instanceof Tr.ResponseError?ut(Fn,Ae.method,vn):Fn&&Ys.string(Fn.message)?ut(new Tr.ResponseError(Tr.ErrorCodes.InternalError,`Request ${Ae.method} failed with message: ${Fn.message}`),Ae.method,vn):ut(new Tr.ResponseError(Tr.ErrorCodes.InternalError,`Request ${Ae.method} failed unexpectedly without providing any details.`),Ae.method,vn)}):(E.delete(jt),He(Jt,Ae.method,vn)):(E.delete(jt),At(Jt,Ae.method,vn))}catch(Jt){E.delete(jt),Jt instanceof Tr.ResponseError?He(Jt,Ae.method,vn):Jt&&Ys.string(Jt.message)?ut(new Tr.ResponseError(Tr.ErrorCodes.InternalError,`Request ${Ae.method} failed with message: ${Jt.message}`),Ae.method,vn):ut(new Tr.ResponseError(Tr.ErrorCodes.InternalError,`Request ${Ae.method} failed unexpectedly without providing any details.`),Ae.method,vn)}}else ut(new Tr.ResponseError(Tr.ErrorCodes.MethodNotFound,`Unhandled method ${Ae.method}`),Ae.method,vn)}s(It,"handleRequest");function yt(Ae){if(!ee())if(Ae.id===null)Ae.error?i.error(`Received response message without id: Error is: 
${JSON.stringify(Ae.error,void 0,4)}`):i.error("Received response message without id. No further error information provided.");else{let He=Ae.id,ut=v.get(He);if(De(Ae,ut),ut!==void 0){v.delete(He);try{if(Ae.error){let At=Ae.error;ut.reject(new Tr.ResponseError(At.code,At.message,At.data))}else if(Ae.result!==void 0)ut.resolve(Ae.result);else throw new Error("Should never happen.")}catch(At){At.message?i.error(`Response handler '${ut.method}' failed with message: ${At.message}`):i.error(`Response handler '${ut.method}' failed unexpectedly.`)}}}}s(yt,"handleResponse");function vt(Ae){if(ee())return;let He,ut;if(Ae.method===zB.type.method){let At=Ae.params.id;b.delete(At),We(Ae);return}else{let At=m.get(Ae.method);At&&(ut=At.handler,He=At.type)}if(ut||p)try{if(We(Ae),ut)if(Ae.params===void 0)He!==void 0&&He.numberOfParams!==0&&He.parameterStructures!==Tr.ParameterStructures.byName&&i.error(`Notification ${Ae.method} defines ${He.numberOfParams} params but received none.`),ut();else if(Array.isArray(Ae.params)){let At=Ae.params;Ae.method===VB.type.method&&At.length===2&&lee.is(At[0])?ut({token:At[0],value:At[1]}):(He!==void 0&&(He.parameterStructures===Tr.ParameterStructures.byName&&i.error(`Notification ${Ae.method} defines parameters by name but received parameters by position`),He.numberOfParams!==Ae.params.length&&i.error(`Notification ${Ae.method} defines ${He.numberOfParams} params but received ${At.length} arguments`)),ut(...At))}else He!==void 0&&He.parameterStructures===Tr.ParameterStructures.byPosition&&i.error(`Notification ${Ae.method} defines parameters by position but received parameters by name`),ut(Ae.params);else p&&p(Ae.method,Ae.params)}catch(At){At.message?i.error(`Notification handler '${Ae.method}' failed with message: ${At.message}`):i.error(`Notification handler '${Ae.method}' failed unexpectedly.`)}else he.fire(Ae)}s(vt,"handleNotification");function le(Ae){if(!Ae){i.error("Received empty message.");return}i.error(`Received message which is neither a response nor a notification message:
${JSON.stringify(Ae,null,4)}`);let He=Ae;if(Ys.string(He.id)||Ys.number(He.id)){let ut=He.id,At=v.get(ut);At&&At.reject(new Error("The received response has neither a result nor an error property."))}}s(le,"handleInvalidMessage");function Oe(Ae){if(Ae!=null)switch(_){case Ao.Verbose:return JSON.stringify(Ae,null,4);case Ao.Compact:return JSON.stringify(Ae);default:return}}s(Oe,"stringifyTrace");function ye(Ae){if(!(_===Ao.Off||!P))if(k===d0.Text){let He;(_===Ao.Verbose||_===Ao.Compact)&&Ae.params&&(He=`Params: ${Oe(Ae.params)}

`),P.log(`Sending request '${Ae.method} - (${Ae.id})'.`,He)}else be("send-request",Ae)}s(ye,"traceSendingRequest");function tt(Ae){if(!(_===Ao.Off||!P))if(k===d0.Text){let He;(_===Ao.Verbose||_===Ao.Compact)&&(Ae.params?He=`Params: ${Oe(Ae.params)}

`:He=`No parameters provided.

`),P.log(`Sending notification '${Ae.method}'.`,He)}else be("send-notification",Ae)}s(tt,"traceSendingNotification");function X(Ae,He,ut){if(!(_===Ao.Off||!P))if(k===d0.Text){let At;(_===Ao.Verbose||_===Ao.Compact)&&(Ae.error&&Ae.error.data?At=`Error data: ${Oe(Ae.error.data)}

`:Ae.result?At=`Result: ${Oe(Ae.result)}

`:Ae.error===void 0&&(At=`No result returned.

`)),P.log(`Sending response '${He} - (${Ae.id})'. Processing request took ${Date.now()-ut}ms`,At)}else be("send-response",Ae)}s(X,"traceSendingResponse");function re(Ae){if(!(_===Ao.Off||!P))if(k===d0.Text){let He;(_===Ao.Verbose||_===Ao.Compact)&&Ae.params&&(He=`Params: ${Oe(Ae.params)}

`),P.log(`Received request '${Ae.method} - (${Ae.id})'.`,He)}else be("receive-request",Ae)}s(re,"traceReceivedRequest");function We(Ae){if(!(_===Ao.Off||!P||Ae.method===CF.type.method))if(k===d0.Text){let He;(_===Ao.Verbose||_===Ao.Compact)&&(Ae.params?He=`Params: ${Oe(Ae.params)}

`:He=`No parameters provided.

`),P.log(`Received notification '${Ae.method}'.`,He)}else be("receive-notification",Ae)}s(We,"traceReceivedNotification");function De(Ae,He){if(!(_===Ao.Off||!P))if(k===d0.Text){let ut;if((_===Ao.Verbose||_===Ao.Compact)&&(Ae.error&&Ae.error.data?ut=`Error data: ${Oe(Ae.error.data)}

`:Ae.result?ut=`Result: ${Oe(Ae.result)}

`:Ae.error===void 0&&(ut=`No result returned.

`)),He){let At=Ae.error?` Request failed: ${Ae.error.message} (${Ae.error.code}).`:"";P.log(`Received response '${He.method} - (${Ae.id})' in ${Date.now()-He.timerStart}ms.${At}`,ut)}else P.log(`Received response ${Ae.id} without active response promise.`,ut)}else be("receive-response",Ae)}s(De,"traceReceivedResponse");function be(Ae,He){if(!P||_===Ao.Off)return;let ut={isLSPMessage:!0,type:Ae,message:He,timestamp:Date.now()};P.log(ut)}s(be,"logLSPMessage");function ze(){if(pe())throw new hS($B.Closed,"Connection is closed.");if(ee())throw new hS($B.Disposed,"Connection is disposed.")}s(ze,"throwIfClosedOrDisposed");function it(){if(te())throw new hS($B.AlreadyListening,"Connection is already listening")}s(it,"throwIfListening");function ht(){if(!te())throw new Error("Call listen() first.")}s(ht,"throwIfNotListening");function Ot(Ae){return Ae===void 0?null:Ae}s(Ot,"undefinedToNull");function cn(Ae){if(Ae!==null)return Ae}s(cn,"nullToUndefined");function Lt(Ae){return Ae!=null&&!Array.isArray(Ae)&&typeof Ae=="object"}s(Lt,"isNamedParam");function Wn(Ae,He){switch(Ae){case Tr.ParameterStructures.auto:return Lt(He)?cn(He):[Ot(He)];case Tr.ParameterStructures.byName:if(!Lt(He))throw new Error("Received parameters by name but param is not an object literal.");return cn(He);case Tr.ParameterStructures.byPosition:return[Ot(He)];default:throw new Error(`Unknown parameter structure ${Ae.toString()}`)}}s(Wn,"computeSingleParam");function zn(Ae,He){let ut,At=Ae.numberOfParams;switch(At){case 0:ut=void 0;break;case 1:ut=Wn(Ae.parameterStructures,He[0]);break;default:ut=[];for(let Xt=0;Xt<He.length&&Xt<At;Xt++)ut.push(Ot(He[Xt]));if(He.length<At)for(let Xt=He.length;Xt<At;Xt++)ut.push(null);break}return ut}s(zn,"computeMessageParams");let fr={sendNotification:s((Ae,...He)=>{ze();let ut,At;if(Ys.string(Ae)){ut=Ae;let Ht=He[0],yn=0,vn=Tr.ParameterStructures.auto;Tr.ParameterStructures.is(Ht)&&(yn=1,vn=Ht);let jt=He.length,nn=jt-yn;switch(nn){case 0:At=void 0;break;case 1:At=Wn(vn,He[yn]);break;default:if(vn===Tr.ParameterStructures.byName)throw new Error(`Received ${nn} parameters for 'by Name' notification parameter structure.`);At=He.slice(yn,jt).map(Jt=>Ot(Jt));break}}else{let Ht=He;ut=Ae.method,At=zn(Ae,Ht)}let Xt={jsonrpc:c,method:ut,params:At};return tt(Xt),e.write(Xt).catch(Ht=>{throw i.error("Sending notification failed."),Ht})},"sendNotification"),onNotification:s((Ae,He)=>{ze();let ut;return Ys.func(Ae)?p=Ae:He&&(Ys.string(Ae)?(ut=Ae,m.set(Ae,{type:void 0,handler:He})):(ut=Ae.method,m.set(Ae.method,{type:Ae,handler:He}))),{dispose:s(()=>{ut!==void 0?m.delete(ut):p=void 0},"dispose")}},"onNotification"),onProgress:s((Ae,He,ut)=>{if(h.has(He))throw new Error(`Progress handler for token ${He} already registered`);return h.set(He,ut),{dispose:s(()=>{h.delete(He)},"dispose")}},"onProgress"),sendProgress:s((Ae,He,ut)=>fr.sendNotification(VB.type,{token:He,value:ut}),"sendProgress"),onUnhandledProgress:ae.event,sendRequest:s((Ae,...He)=>{ze(),ht();let ut,At,Xt;if(Ys.string(Ae)){ut=Ae;let jt=He[0],nn=He[He.length-1],Jt=0,Tn=Tr.ParameterStructures.auto;Tr.ParameterStructures.is(jt)&&(Jt=1,Tn=jt);let Fn=He.length;aee.CancellationToken.is(nn)&&(Fn=Fn-1,Xt=nn);let Yn=Fn-Jt;switch(Yn){case 0:At=void 0;break;case 1:At=Wn(Tn,He[Jt]);break;default:if(Tn===Tr.ParameterStructures.byName)throw new Error(`Received ${Yn} parameters for 'by Name' request parameter structure.`);At=He.slice(Jt,Fn).map(Ur=>Ot(Ur));break}}else{let jt=He;ut=Ae.method,At=zn(Ae,jt);let nn=Ae.numberOfParams;Xt=aee.CancellationToken.is(jt[nn])?jt[nn]:void 0}let Ht=o++,yn;Xt&&(yn=Xt.onCancellationRequested(()=>{let jt=W.sender.sendCancellation(fr,Ht);return jt===void 0?(i.log(`Received no promise from cancellation strategy when cancelling id ${Ht}`),Promise.resolve()):jt.catch(()=>{i.log(`Sending cancellation messages for id ${Ht} failed`)})}));let vn={jsonrpc:c,id:Ht,method:ut,params:At};return ye(vn),typeof W.sender.enableCancellation=="function"&&W.sender.enableCancellation(vn),new Promise(async(jt,nn)=>{let Jt=s(Yn=>{jt(Yn),W.sender.cleanup(Ht),yn?.dispose()},"resolveWithCleanup"),Tn=s(Yn=>{nn(Yn),W.sender.cleanup(Ht),yn?.dispose()},"rejectWithCleanup"),Fn={method:ut,timerStart:Date.now(),resolve:Jt,reject:Tn};try{await e.write(vn),v.set(Ht,Fn)}catch(Yn){throw i.error("Sending request failed."),Fn.reject(new Tr.ResponseError(Tr.ErrorCodes.MessageWriteError,Yn.message?Yn.message:"Unknown reason")),Yn}})},"sendRequest"),onRequest:s((Ae,He)=>{ze();let ut=null;return uee.is(Ae)?(ut=void 0,u=Ae):Ys.string(Ae)?(ut=null,He!==void 0&&(ut=Ae,d.set(Ae,{handler:He,type:void 0}))):He!==void 0&&(ut=Ae.method,d.set(Ae.method,{type:Ae,handler:He})),{dispose:s(()=>{ut!==null&&(ut!==void 0?d.delete(ut):u=void 0)},"dispose")}},"onRequest"),hasPendingResponse:s(()=>v.size>0,"hasPendingResponse"),trace:s(async(Ae,He,ut)=>{let At=!1,Xt=d0.Text;ut!==void 0&&(Ys.boolean(ut)?At=ut:(At=ut.sendNotification||!1,Xt=ut.traceFormat||d0.Text)),_=Ae,k=Xt,_===Ao.Off?P=void 0:P=He,At&&!pe()&&!ee()&&await fr.sendNotification(dee.type,{value:Ao.toString(Ae)})},"trace"),onError:U.event,onClose:ne.event,onUnhandledNotification:he.event,onDispose:G.event,end:s(()=>{e.end()},"end"),dispose:s(()=>{if(ee())return;N=hm.Disposed,G.fire(void 0);let Ae=new Tr.ResponseError(Tr.ErrorCodes.PendingResponseRejected,"Pending response rejected since connection got disposed");for(let He of v.values())He.reject(Ae);v=new Map,E=new Map,b=new Set,y=new Mxe.LinkedMap,Ys.func(e.dispose)&&e.dispose(),Ys.func(t.dispose)&&t.dispose()},"dispose"),listen:s(()=>{ze(),it(),N=hm.Listening,t.listen(ft)},"listen"),inspect:s(()=>{(0,Fxe.default)().console.log("inspect")},"inspect")};return fr.onNotification(CF.type,Ae=>{if(_===Ao.Off||!P)return;let He=_===Ao.Verbose||_===Ao.Compact;P.log(Ae.message,He?Ae.verbose:void 0)}),fr.onNotification(VB.type,Ae=>{let He=h.get(Ae.token);He?He(Ae.value):ae.fire(Ae)}),fr}s(yst,"createMessageConnection");Jr.createMessageConnection=yst});var TF=H(ct=>{"use strict";f();Object.defineProperty(ct,"__esModule",{value:!0});ct.ProgressType=ct.ProgressToken=ct.createMessageConnection=ct.NullLogger=ct.ConnectionOptions=ct.ConnectionStrategy=ct.AbstractMessageBuffer=ct.WriteableStreamMessageWriter=ct.AbstractMessageWriter=ct.MessageWriter=ct.ReadableStreamMessageReader=ct.AbstractMessageReader=ct.MessageReader=ct.SharedArrayReceiverStrategy=ct.SharedArraySenderStrategy=ct.CancellationToken=ct.CancellationTokenSource=ct.Emitter=ct.Event=ct.Disposable=ct.LRUCache=ct.Touch=ct.LinkedMap=ct.ParameterStructures=ct.NotificationType9=ct.NotificationType8=ct.NotificationType7=ct.NotificationType6=ct.NotificationType5=ct.NotificationType4=ct.NotificationType3=ct.NotificationType2=ct.NotificationType1=ct.NotificationType0=ct.NotificationType=ct.ErrorCodes=ct.ResponseError=ct.RequestType9=ct.RequestType8=ct.RequestType7=ct.RequestType6=ct.RequestType5=ct.RequestType4=ct.RequestType3=ct.RequestType2=ct.RequestType1=ct.RequestType0=ct.RequestType=ct.Message=ct.RAL=void 0;ct.MessageStrategy=ct.CancellationStrategy=ct.CancellationSenderStrategy=ct.CancellationReceiverStrategy=ct.ConnectionError=ct.ConnectionErrors=ct.LogTraceNotification=ct.SetTraceNotification=ct.TraceFormat=ct.TraceValues=ct.Trace=void 0;var Xo=OZ();Object.defineProperty(ct,"Message",{enumerable:!0,get:s(function(){return Xo.Message},"get")});Object.defineProperty(ct,"RequestType",{enumerable:!0,get:s(function(){return Xo.RequestType},"get")});Object.defineProperty(ct,"RequestType0",{enumerable:!0,get:s(function(){return Xo.RequestType0},"get")});Object.defineProperty(ct,"RequestType1",{enumerable:!0,get:s(function(){return Xo.RequestType1},"get")});Object.defineProperty(ct,"RequestType2",{enumerable:!0,get:s(function(){return Xo.RequestType2},"get")});Object.defineProperty(ct,"RequestType3",{enumerable:!0,get:s(function(){return Xo.RequestType3},"get")});Object.defineProperty(ct,"RequestType4",{enumerable:!0,get:s(function(){return Xo.RequestType4},"get")});Object.defineProperty(ct,"RequestType5",{enumerable:!0,get:s(function(){return Xo.RequestType5},"get")});Object.defineProperty(ct,"RequestType6",{enumerable:!0,get:s(function(){return Xo.RequestType6},"get")});Object.defineProperty(ct,"RequestType7",{enumerable:!0,get:s(function(){return Xo.RequestType7},"get")});Object.defineProperty(ct,"RequestType8",{enumerable:!0,get:s(function(){return Xo.RequestType8},"get")});Object.defineProperty(ct,"RequestType9",{enumerable:!0,get:s(function(){return Xo.RequestType9},"get")});Object.defineProperty(ct,"ResponseError",{enumerable:!0,get:s(function(){return Xo.ResponseError},"get")});Object.defineProperty(ct,"ErrorCodes",{enumerable:!0,get:s(function(){return Xo.ErrorCodes},"get")});Object.defineProperty(ct,"NotificationType",{enumerable:!0,get:s(function(){return Xo.NotificationType},"get")});Object.defineProperty(ct,"NotificationType0",{enumerable:!0,get:s(function(){return Xo.NotificationType0},"get")});Object.defineProperty(ct,"NotificationType1",{enumerable:!0,get:s(function(){return Xo.NotificationType1},"get")});Object.defineProperty(ct,"NotificationType2",{enumerable:!0,get:s(function(){return Xo.NotificationType2},"get")});Object.defineProperty(ct,"NotificationType3",{enumerable:!0,get:s(function(){return Xo.NotificationType3},"get")});Object.defineProperty(ct,"NotificationType4",{enumerable:!0,get:s(function(){return Xo.NotificationType4},"get")});Object.defineProperty(ct,"NotificationType5",{enumerable:!0,get:s(function(){return Xo.NotificationType5},"get")});Object.defineProperty(ct,"NotificationType6",{enumerable:!0,get:s(function(){return Xo.NotificationType6},"get")});Object.defineProperty(ct,"NotificationType7",{enumerable:!0,get:s(function(){return Xo.NotificationType7},"get")});Object.defineProperty(ct,"NotificationType8",{enumerable:!0,get:s(function(){return Xo.NotificationType8},"get")});Object.defineProperty(ct,"NotificationType9",{enumerable:!0,get:s(function(){return Xo.NotificationType9},"get")});Object.defineProperty(ct,"ParameterStructures",{enumerable:!0,get:s(function(){return Xo.ParameterStructures},"get")});var mee=qZ();Object.defineProperty(ct,"LinkedMap",{enumerable:!0,get:s(function(){return mee.LinkedMap},"get")});Object.defineProperty(ct,"LRUCache",{enumerable:!0,get:s(function(){return mee.LRUCache},"get")});Object.defineProperty(ct,"Touch",{enumerable:!0,get:s(function(){return mee.Touch},"get")});var Cst=Txe();Object.defineProperty(ct,"Disposable",{enumerable:!0,get:s(function(){return Cst.Disposable},"get")});var qxe=dS();Object.defineProperty(ct,"Event",{enumerable:!0,get:s(function(){return qxe.Event},"get")});Object.defineProperty(ct,"Emitter",{enumerable:!0,get:s(function(){return qxe.Emitter},"get")});var Wxe=mF();Object.defineProperty(ct,"CancellationTokenSource",{enumerable:!0,get:s(function(){return Wxe.CancellationTokenSource},"get")});Object.defineProperty(ct,"CancellationToken",{enumerable:!0,get:s(function(){return Wxe.CancellationToken},"get")});var Hxe=_xe();Object.defineProperty(ct,"SharedArraySenderStrategy",{enumerable:!0,get:s(function(){return Hxe.SharedArraySenderStrategy},"get")});Object.defineProperty(ct,"SharedArrayReceiverStrategy",{enumerable:!0,get:s(function(){return Hxe.SharedArrayReceiverStrategy},"get")});var hee=Rxe();Object.defineProperty(ct,"MessageReader",{enumerable:!0,get:s(function(){return hee.MessageReader},"get")});Object.defineProperty(ct,"AbstractMessageReader",{enumerable:!0,get:s(function(){return hee.AbstractMessageReader},"get")});Object.defineProperty(ct,"ReadableStreamMessageReader",{enumerable:!0,get:s(function(){return hee.ReadableStreamMessageReader},"get")});var gee=Nxe();Object.defineProperty(ct,"MessageWriter",{enumerable:!0,get:s(function(){return gee.MessageWriter},"get")});Object.defineProperty(ct,"AbstractMessageWriter",{enumerable:!0,get:s(function(){return gee.AbstractMessageWriter},"get")});Object.defineProperty(ct,"WriteableStreamMessageWriter",{enumerable:!0,get:s(function(){return gee.WriteableStreamMessageWriter},"get")});var xst=Lxe();Object.defineProperty(ct,"AbstractMessageBuffer",{enumerable:!0,get:s(function(){return xst.AbstractMessageBuffer},"get")});var dc=Uxe();Object.defineProperty(ct,"ConnectionStrategy",{enumerable:!0,get:s(function(){return dc.ConnectionStrategy},"get")});Object.defineProperty(ct,"ConnectionOptions",{enumerable:!0,get:s(function(){return dc.ConnectionOptions},"get")});Object.defineProperty(ct,"NullLogger",{enumerable:!0,get:s(function(){return dc.NullLogger},"get")});Object.defineProperty(ct,"createMessageConnection",{enumerable:!0,get:s(function(){return dc.createMessageConnection},"get")});Object.defineProperty(ct,"ProgressToken",{enumerable:!0,get:s(function(){return dc.ProgressToken},"get")});Object.defineProperty(ct,"ProgressType",{enumerable:!0,get:s(function(){return dc.ProgressType},"get")});Object.defineProperty(ct,"Trace",{enumerable:!0,get:s(function(){return dc.Trace},"get")});Object.defineProperty(ct,"TraceValues",{enumerable:!0,get:s(function(){return dc.TraceValues},"get")});Object.defineProperty(ct,"TraceFormat",{enumerable:!0,get:s(function(){return dc.TraceFormat},"get")});Object.defineProperty(ct,"SetTraceNotification",{enumerable:!0,get:s(function(){return dc.SetTraceNotification},"get")});Object.defineProperty(ct,"LogTraceNotification",{enumerable:!0,get:s(function(){return dc.LogTraceNotification},"get")});Object.defineProperty(ct,"ConnectionErrors",{enumerable:!0,get:s(function(){return dc.ConnectionErrors},"get")});Object.defineProperty(ct,"ConnectionError",{enumerable:!0,get:s(function(){return dc.ConnectionError},"get")});Object.defineProperty(ct,"CancellationReceiverStrategy",{enumerable:!0,get:s(function(){return dc.CancellationReceiverStrategy},"get")});Object.defineProperty(ct,"CancellationSenderStrategy",{enumerable:!0,get:s(function(){return dc.CancellationSenderStrategy},"get")});Object.defineProperty(ct,"CancellationStrategy",{enumerable:!0,get:s(function(){return dc.CancellationStrategy},"get")});Object.defineProperty(ct,"MessageStrategy",{enumerable:!0,get:s(function(){return dc.MessageStrategy},"get")});var vst=Dx();ct.RAL=vst.default});var Vxe=H(xee=>{"use strict";f();Object.defineProperty(xee,"__esModule",{value:!0});var Gxe=require("util"),S1=TF(),wF=class t extends S1.AbstractMessageBuffer{static{s(this,"MessageBuffer")}constructor(e="utf-8"){super(e)}emptyBuffer(){return t.emptyBuffer}fromString(e,n){return Buffer.from(e,n)}toString(e,n){return e instanceof Buffer?e.toString(n):new Gxe.TextDecoder(n).decode(e)}asNative(e,n){return n===void 0?e instanceof Buffer?e:Buffer.from(e):e instanceof Buffer?e.slice(0,n):Buffer.from(e,0,n)}allocNative(e){return Buffer.allocUnsafe(e)}};wF.emptyBuffer=Buffer.allocUnsafe(0);var Aee=class{static{s(this,"ReadableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),S1.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),S1.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),S1.Disposable.create(()=>this.stream.off("end",e))}onData(e){return this.stream.on("data",e),S1.Disposable.create(()=>this.stream.off("data",e))}},yee=class{static{s(this,"WritableStreamWrapper")}constructor(e){this.stream=e}onClose(e){return this.stream.on("close",e),S1.Disposable.create(()=>this.stream.off("close",e))}onError(e){return this.stream.on("error",e),S1.Disposable.create(()=>this.stream.off("error",e))}onEnd(e){return this.stream.on("end",e),S1.Disposable.create(()=>this.stream.off("end",e))}write(e,n){return new Promise((r,i)=>{let o=s(a=>{a==null?r():i(a)},"callback");typeof e=="string"?this.stream.write(e,n,o):this.stream.write(e,o)})}end(){this.stream.end()}},jxe=Object.freeze({messageBuffer:Object.freeze({create:s(t=>new wF(t),"create")}),applicationJson:Object.freeze({encoder:Object.freeze({name:"application/json",encode:s((t,e)=>{try{return Promise.resolve(Buffer.from(JSON.stringify(t,void 0,0),e.charset))}catch(n){return Promise.reject(n)}},"encode")}),decoder:Object.freeze({name:"application/json",decode:s((t,e)=>{try{return t instanceof Buffer?Promise.resolve(JSON.parse(t.toString(e.charset))):Promise.resolve(JSON.parse(new Gxe.TextDecoder(e.charset).decode(t)))}catch(n){return Promise.reject(n)}},"decode")})}),stream:Object.freeze({asReadableStream:s(t=>new Aee(t),"asReadableStream"),asWritableStream:s(t=>new yee(t),"asWritableStream")}),console,timer:Object.freeze({setTimeout(t,e,...n){let r=setTimeout(t,e,...n);return{dispose:s(()=>clearTimeout(r),"dispose")}},setImmediate(t,...e){let n=setImmediate(t,...e);return{dispose:s(()=>clearImmediate(n),"dispose")}},setInterval(t,e,...n){let r=setInterval(t,e,...n);return{dispose:s(()=>clearInterval(r),"dispose")}}})});function Cee(){return jxe}s(Cee,"RIL");(function(t){function e(){S1.RAL.install(jxe)}s(e,"install"),t.install=e})(Cee||(Cee={}));xee.default=Cee});var gI=H(Hi=>{"use strict";f();var bst=Hi&&Hi.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[n]},"get")}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Est=Hi&&Hi.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&bst(e,t,n)};Object.defineProperty(Hi,"__esModule",{value:!0});Hi.createMessageConnection=Hi.createServerSocketTransport=Hi.createClientSocketTransport=Hi.createServerPipeTransport=Hi.createClientPipeTransport=Hi.generateRandomPipeName=Hi.StreamMessageWriter=Hi.StreamMessageReader=Hi.SocketMessageWriter=Hi.SocketMessageReader=Hi.PortMessageWriter=Hi.PortMessageReader=Hi.IPCMessageWriter=Hi.IPCMessageReader=void 0;var gS=Vxe();gS.default.install();var $xe=require("path"),Ist=require("os"),Tst=require("crypto"),RF=require("net"),f0=TF();Est(TF(),Hi);var vee=class extends f0.AbstractMessageReader{static{s(this,"IPCMessageReader")}constructor(e){super(),this.process=e;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose())}listen(e){return this.process.on("message",e),f0.Disposable.create(()=>this.process.off("message",e))}};Hi.IPCMessageReader=vee;var bee=class extends f0.AbstractMessageWriter{static{s(this,"IPCMessageWriter")}constructor(e){super(),this.process=e,this.errorCount=0;let n=this.process;n.on("error",r=>this.fireError(r)),n.on("close",()=>this.fireClose)}write(e){try{return typeof this.process.send=="function"&&this.process.send(e,void 0,void 0,n=>{n?(this.errorCount++,this.handleError(n,e)):this.errorCount=0}),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};Hi.IPCMessageWriter=bee;var Eee=class extends f0.AbstractMessageReader{static{s(this,"PortMessageReader")}constructor(e){super(),this.onData=new f0.Emitter,e.on("close",()=>this.fireClose),e.on("error",n=>this.fireError(n)),e.on("message",n=>{this.onData.fire(n)})}listen(e){return this.onData.event(e)}};Hi.PortMessageReader=Eee;var Iee=class extends f0.AbstractMessageWriter{static{s(this,"PortMessageWriter")}constructor(e){super(),this.port=e,this.errorCount=0,e.on("close",()=>this.fireClose()),e.on("error",n=>this.fireError(n))}write(e){try{return this.port.postMessage(e),Promise.resolve()}catch(n){return this.handleError(n,e),Promise.reject(n)}}handleError(e,n){this.errorCount++,this.fireError(e,n,this.errorCount)}end(){}};Hi.PortMessageWriter=Iee;var mI=class extends f0.ReadableStreamMessageReader{static{s(this,"SocketMessageReader")}constructor(e,n="utf-8"){super((0,gS.default)().stream.asReadableStream(e),n)}};Hi.SocketMessageReader=mI;var hI=class extends f0.WriteableStreamMessageWriter{static{s(this,"SocketMessageWriter")}constructor(e,n){super((0,gS.default)().stream.asWritableStream(e),n),this.socket=e}dispose(){super.dispose(),this.socket.destroy()}};Hi.SocketMessageWriter=hI;var _F=class extends f0.ReadableStreamMessageReader{static{s(this,"StreamMessageReader")}constructor(e,n){super((0,gS.default)().stream.asReadableStream(e),n)}};Hi.StreamMessageReader=_F;var SF=class extends f0.WriteableStreamMessageWriter{static{s(this,"StreamMessageWriter")}constructor(e,n){super((0,gS.default)().stream.asWritableStream(e),n)}};Hi.StreamMessageWriter=SF;var zxe=process.env.XDG_RUNTIME_DIR,wst=new Map([["linux",107],["darwin",103]]);function _st(){let t=(0,Tst.randomBytes)(21).toString("hex");if(process.platform==="win32")return`\\\\.\\pipe\\vscode-jsonrpc-${t}-sock`;let e;zxe?e=$xe.join(zxe,`vscode-ipc-${t}.sock`):e=$xe.join(Ist.tmpdir(),`vscode-${t}.sock`);let n=wst.get(process.platform);return n!==void 0&&e.length>n&&(0,gS.default)().console.warn(`WARNING: IPC handle "${e}" is longer than ${n} characters.`),e}s(_st,"generateRandomPipeName");Hi.generateRandomPipeName=_st;function Sst(t,e="utf-8"){let n,r=new Promise((i,o)=>{n=i});return new Promise((i,o)=>{let a=(0,RF.createServer)(l=>{a.close(),n([new mI(l,e),new hI(l,e)])});a.on("error",o),a.listen(t,()=>{a.removeListener("error",o),i({onConnected:s(()=>r,"onConnected")})})})}s(Sst,"createClientPipeTransport");Hi.createClientPipeTransport=Sst;function Rst(t,e="utf-8"){let n=(0,RF.createConnection)(t);return[new mI(n,e),new hI(n,e)]}s(Rst,"createServerPipeTransport");Hi.createServerPipeTransport=Rst;function kst(t,e="utf-8"){let n,r=new Promise((i,o)=>{n=i});return new Promise((i,o)=>{let a=(0,RF.createServer)(l=>{a.close(),n([new mI(l,e),new hI(l,e)])});a.on("error",o),a.listen(t,"127.0.0.1",()=>{a.removeListener("error",o),i({onConnected:s(()=>r,"onConnected")})})})}s(kst,"createClientSocketTransport");Hi.createClientSocketTransport=kst;function Bst(t,e="utf-8"){let n=(0,RF.createConnection)(t,"127.0.0.1");return[new mI(n,e),new hI(n,e)]}s(Bst,"createServerSocketTransport");Hi.createServerSocketTransport=Bst;function Pst(t){let e=t;return e.read!==void 0&&e.addListener!==void 0}s(Pst,"isReadableStream");function Dst(t){let e=t;return e.write!==void 0&&e.addListener!==void 0}s(Dst,"isWritableStream");function Nst(t,e,n,r){n||(n=f0.NullLogger);let i=Pst(t)?new _F(t):t,o=Dst(e)?new SF(e):e;return f0.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,f0.createMessageConnection)(i,o,n,r)}s(Nst,"createMessageConnection");Hi.createMessageConnection=Nst});var Tee=H((xfn,Yxe)=>{"use strict";f();Yxe.exports=gI()});var BF=H((Kxe,kF)=>{f();(function(t){if(typeof kF=="object"&&typeof kF.exports=="object"){var e=t(require,Kxe);e!==void 0&&(kF.exports=e)}else typeof define=="function"&&define.amd&&define(["require","exports"],t)})(function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TextDocument=e.EOL=e.WorkspaceFolder=e.InlineCompletionContext=e.SelectedCompletionInfo=e.InlineCompletionTriggerKind=e.InlineCompletionList=e.InlineCompletionItem=e.StringValue=e.InlayHint=e.InlayHintLabelPart=e.InlayHintKind=e.InlineValueContext=e.InlineValueEvaluatableExpression=e.InlineValueVariableLookup=e.InlineValueText=e.SemanticTokens=e.SemanticTokenModifiers=e.SemanticTokenTypes=e.SelectionRange=e.DocumentLink=e.FormattingOptions=e.CodeLens=e.CodeAction=e.CodeActionContext=e.CodeActionTriggerKind=e.CodeActionKind=e.DocumentSymbol=e.WorkspaceSymbol=e.SymbolInformation=e.SymbolTag=e.SymbolKind=e.DocumentHighlight=e.DocumentHighlightKind=e.SignatureInformation=e.ParameterInformation=e.Hover=e.MarkedString=e.CompletionList=e.CompletionItem=e.CompletionItemLabelDetails=e.InsertTextMode=e.InsertReplaceEdit=e.CompletionItemTag=e.InsertTextFormat=e.CompletionItemKind=e.MarkupContent=e.MarkupKind=e.TextDocumentItem=e.OptionalVersionedTextDocumentIdentifier=e.VersionedTextDocumentIdentifier=e.TextDocumentIdentifier=e.WorkspaceChange=e.WorkspaceEdit=e.DeleteFile=e.RenameFile=e.CreateFile=e.TextDocumentEdit=e.AnnotatedTextEdit=e.ChangeAnnotationIdentifier=e.ChangeAnnotation=e.TextEdit=e.Command=e.Diagnostic=e.CodeDescription=e.DiagnosticTag=e.DiagnosticSeverity=e.DiagnosticRelatedInformation=e.FoldingRange=e.FoldingRangeKind=e.ColorPresentation=e.ColorInformation=e.Color=e.LocationLink=e.Location=e.Range=e.Position=e.uinteger=e.integer=e.URI=e.DocumentUri=void 0;var n;(function(q){function ge(ve){return typeof ve=="string"}s(ge,"is"),q.is=ge})(n||(e.DocumentUri=n={}));var r;(function(q){function ge(ve){return typeof ve=="string"}s(ge,"is"),q.is=ge})(r||(e.URI=r={}));var i;(function(q){q.MIN_VALUE=-2147483648,q.MAX_VALUE=2147483647;function ge(ve){return typeof ve=="number"&&q.MIN_VALUE<=ve&&ve<=q.MAX_VALUE}s(ge,"is"),q.is=ge})(i||(e.integer=i={}));var o;(function(q){q.MIN_VALUE=0,q.MAX_VALUE=2147483647;function ge(ve){return typeof ve=="number"&&q.MIN_VALUE<=ve&&ve<=q.MAX_VALUE}s(ge,"is"),q.is=ge})(o||(e.uinteger=o={}));var a;(function(q){function ge(Z,M){return Z===Number.MAX_VALUE&&(Z=o.MAX_VALUE),M===Number.MAX_VALUE&&(M=o.MAX_VALUE),{line:Z,character:M}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&_e.uinteger(M.line)&&_e.uinteger(M.character)}s(ve,"is"),q.is=ve})(a||(e.Position=a={}));var l;(function(q){function ge(Z,M,ke,$e){if(_e.uinteger(Z)&&_e.uinteger(M)&&_e.uinteger(ke)&&_e.uinteger($e))return{start:a.create(Z,M),end:a.create(ke,$e)};if(a.is(Z)&&a.is(M))return{start:Z,end:M};throw new Error("Range#create called with invalid arguments[".concat(Z,", ").concat(M,", ").concat(ke,", ").concat($e,"]"))}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&a.is(M.start)&&a.is(M.end)}s(ve,"is"),q.is=ve})(l||(e.Range=l={}));var c;(function(q){function ge(Z,M){return{uri:Z,range:M}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&l.is(M.range)&&(_e.string(M.uri)||_e.undefined(M.uri))}s(ve,"is"),q.is=ve})(c||(e.Location=c={}));var u;(function(q){function ge(Z,M,ke,$e){return{targetUri:Z,targetRange:M,targetSelectionRange:ke,originSelectionRange:$e}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&l.is(M.targetRange)&&_e.string(M.targetUri)&&l.is(M.targetSelectionRange)&&(l.is(M.originSelectionRange)||_e.undefined(M.originSelectionRange))}s(ve,"is"),q.is=ve})(u||(e.LocationLink=u={}));var d;(function(q){function ge(Z,M,ke,$e){return{red:Z,green:M,blue:ke,alpha:$e}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&_e.numberRange(M.red,0,1)&&_e.numberRange(M.green,0,1)&&_e.numberRange(M.blue,0,1)&&_e.numberRange(M.alpha,0,1)}s(ve,"is"),q.is=ve})(d||(e.Color=d={}));var p;(function(q){function ge(Z,M){return{range:Z,color:M}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&l.is(M.range)&&d.is(M.color)}s(ve,"is"),q.is=ve})(p||(e.ColorInformation=p={}));var m;(function(q){function ge(Z,M,ke){return{label:Z,textEdit:M,additionalTextEdits:ke}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&_e.string(M.label)&&(_e.undefined(M.textEdit)||P.is(M))&&(_e.undefined(M.additionalTextEdits)||_e.typedArray(M.additionalTextEdits,P.is))}s(ve,"is"),q.is=ve})(m||(e.ColorPresentation=m={}));var h;(function(q){q.Comment="comment",q.Imports="imports",q.Region="region"})(h||(e.FoldingRangeKind=h={}));var g;(function(q){function ge(Z,M,ke,$e,qt,Sn){var mn={startLine:Z,endLine:M};return _e.defined(ke)&&(mn.startCharacter=ke),_e.defined($e)&&(mn.endCharacter=$e),_e.defined(qt)&&(mn.kind=qt),_e.defined(Sn)&&(mn.collapsedText=Sn),mn}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&_e.uinteger(M.startLine)&&_e.uinteger(M.startLine)&&(_e.undefined(M.startCharacter)||_e.uinteger(M.startCharacter))&&(_e.undefined(M.endCharacter)||_e.uinteger(M.endCharacter))&&(_e.undefined(M.kind)||_e.string(M.kind))}s(ve,"is"),q.is=ve})(g||(e.FoldingRange=g={}));var y;(function(q){function ge(Z,M){return{location:Z,message:M}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&c.is(M.location)&&_e.string(M.message)}s(ve,"is"),q.is=ve})(y||(e.DiagnosticRelatedInformation=y={}));var v;(function(q){q.Error=1,q.Warning=2,q.Information=3,q.Hint=4})(v||(e.DiagnosticSeverity=v={}));var b;(function(q){q.Unnecessary=1,q.Deprecated=2})(b||(e.DiagnosticTag=b={}));var E;(function(q){function ge(ve){var Z=ve;return _e.objectLiteral(Z)&&_e.string(Z.href)}s(ge,"is"),q.is=ge})(E||(e.CodeDescription=E={}));var _;(function(q){function ge(Z,M,ke,$e,qt,Sn){var mn={range:Z,message:M};return _e.defined(ke)&&(mn.severity=ke),_e.defined($e)&&(mn.code=$e),_e.defined(qt)&&(mn.source=qt),_e.defined(Sn)&&(mn.relatedInformation=Sn),mn}s(ge,"create"),q.create=ge;function ve(Z){var M,ke=Z;return _e.defined(ke)&&l.is(ke.range)&&_e.string(ke.message)&&(_e.number(ke.severity)||_e.undefined(ke.severity))&&(_e.integer(ke.code)||_e.string(ke.code)||_e.undefined(ke.code))&&(_e.undefined(ke.codeDescription)||_e.string((M=ke.codeDescription)===null||M===void 0?void 0:M.href))&&(_e.string(ke.source)||_e.undefined(ke.source))&&(_e.undefined(ke.relatedInformation)||_e.typedArray(ke.relatedInformation,y.is))}s(ve,"is"),q.is=ve})(_||(e.Diagnostic=_={}));var k;(function(q){function ge(Z,M){for(var ke=[],$e=2;$e<arguments.length;$e++)ke[$e-2]=arguments[$e];var qt={title:Z,command:M};return _e.defined(ke)&&ke.length>0&&(qt.arguments=ke),qt}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&_e.string(M.title)&&_e.string(M.command)}s(ve,"is"),q.is=ve})(k||(e.Command=k={}));var P;(function(q){function ge(ke,$e){return{range:ke,newText:$e}}s(ge,"replace"),q.replace=ge;function ve(ke,$e){return{range:{start:ke,end:ke},newText:$e}}s(ve,"insert"),q.insert=ve;function Z(ke){return{range:ke,newText:""}}s(Z,"del"),q.del=Z;function M(ke){var $e=ke;return _e.objectLiteral($e)&&_e.string($e.newText)&&l.is($e.range)}s(M,"is"),q.is=M})(P||(e.TextEdit=P={}));var N;(function(q){function ge(Z,M,ke){var $e={label:Z};return M!==void 0&&($e.needsConfirmation=M),ke!==void 0&&($e.description=ke),$e}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&_e.string(M.label)&&(_e.boolean(M.needsConfirmation)||M.needsConfirmation===void 0)&&(_e.string(M.description)||M.description===void 0)}s(ve,"is"),q.is=ve})(N||(e.ChangeAnnotation=N={}));var U;(function(q){function ge(ve){var Z=ve;return _e.string(Z)}s(ge,"is"),q.is=ge})(U||(e.ChangeAnnotationIdentifier=U={}));var ne;(function(q){function ge(ke,$e,qt){return{range:ke,newText:$e,annotationId:qt}}s(ge,"replace"),q.replace=ge;function ve(ke,$e,qt){return{range:{start:ke,end:ke},newText:$e,annotationId:qt}}s(ve,"insert"),q.insert=ve;function Z(ke,$e){return{range:ke,newText:"",annotationId:$e}}s(Z,"del"),q.del=Z;function M(ke){var $e=ke;return P.is($e)&&(N.is($e.annotationId)||U.is($e.annotationId))}s(M,"is"),q.is=M})(ne||(e.AnnotatedTextEdit=ne={}));var he;(function(q){function ge(Z,M){return{textDocument:Z,edits:M}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&pe.is(M.textDocument)&&Array.isArray(M.edits)}s(ve,"is"),q.is=ve})(he||(e.TextDocumentEdit=he={}));var ae;(function(q){function ge(Z,M,ke){var $e={kind:"create",uri:Z};return M!==void 0&&(M.overwrite!==void 0||M.ignoreIfExists!==void 0)&&($e.options=M),ke!==void 0&&($e.annotationId=ke),$e}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return M&&M.kind==="create"&&_e.string(M.uri)&&(M.options===void 0||(M.options.overwrite===void 0||_e.boolean(M.options.overwrite))&&(M.options.ignoreIfExists===void 0||_e.boolean(M.options.ignoreIfExists)))&&(M.annotationId===void 0||U.is(M.annotationId))}s(ve,"is"),q.is=ve})(ae||(e.CreateFile=ae={}));var G;(function(q){function ge(Z,M,ke,$e){var qt={kind:"rename",oldUri:Z,newUri:M};return ke!==void 0&&(ke.overwrite!==void 0||ke.ignoreIfExists!==void 0)&&(qt.options=ke),$e!==void 0&&(qt.annotationId=$e),qt}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return M&&M.kind==="rename"&&_e.string(M.oldUri)&&_e.string(M.newUri)&&(M.options===void 0||(M.options.overwrite===void 0||_e.boolean(M.options.overwrite))&&(M.options.ignoreIfExists===void 0||_e.boolean(M.options.ignoreIfExists)))&&(M.annotationId===void 0||U.is(M.annotationId))}s(ve,"is"),q.is=ve})(G||(e.RenameFile=G={}));var W;(function(q){function ge(Z,M,ke){var $e={kind:"delete",uri:Z};return M!==void 0&&(M.recursive!==void 0||M.ignoreIfNotExists!==void 0)&&($e.options=M),ke!==void 0&&($e.annotationId=ke),$e}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return M&&M.kind==="delete"&&_e.string(M.uri)&&(M.options===void 0||(M.options.recursive===void 0||_e.boolean(M.options.recursive))&&(M.options.ignoreIfNotExists===void 0||_e.boolean(M.options.ignoreIfNotExists)))&&(M.annotationId===void 0||U.is(M.annotationId))}s(ve,"is"),q.is=ve})(W||(e.DeleteFile=W={}));var ue;(function(q){function ge(ve){var Z=ve;return Z&&(Z.changes!==void 0||Z.documentChanges!==void 0)&&(Z.documentChanges===void 0||Z.documentChanges.every(function(M){return _e.string(M.kind)?ae.is(M)||G.is(M)||W.is(M):he.is(M)}))}s(ge,"is"),q.is=ge})(ue||(e.WorkspaceEdit=ue={}));var ie=function(){function q(ge,ve){this.edits=ge,this.changeAnnotations=ve}return s(q,"TextEditChangeImpl"),q.prototype.insert=function(ge,ve,Z){var M,ke;if(Z===void 0?M=P.insert(ge,ve):U.is(Z)?(ke=Z,M=ne.insert(ge,ve,Z)):(this.assertChangeAnnotations(this.changeAnnotations),ke=this.changeAnnotations.manage(Z),M=ne.insert(ge,ve,ke)),this.edits.push(M),ke!==void 0)return ke},q.prototype.replace=function(ge,ve,Z){var M,ke;if(Z===void 0?M=P.replace(ge,ve):U.is(Z)?(ke=Z,M=ne.replace(ge,ve,Z)):(this.assertChangeAnnotations(this.changeAnnotations),ke=this.changeAnnotations.manage(Z),M=ne.replace(ge,ve,ke)),this.edits.push(M),ke!==void 0)return ke},q.prototype.delete=function(ge,ve){var Z,M;if(ve===void 0?Z=P.del(ge):U.is(ve)?(M=ve,Z=ne.del(ge,ve)):(this.assertChangeAnnotations(this.changeAnnotations),M=this.changeAnnotations.manage(ve),Z=ne.del(ge,M)),this.edits.push(Z),M!==void 0)return M},q.prototype.add=function(ge){this.edits.push(ge)},q.prototype.all=function(){return this.edits},q.prototype.clear=function(){this.edits.splice(0,this.edits.length)},q.prototype.assertChangeAnnotations=function(ge){if(ge===void 0)throw new Error("Text edit change is not configured to manage change annotations.")},q}(),V=function(){function q(ge){this._annotations=ge===void 0?Object.create(null):ge,this._counter=0,this._size=0}return s(q,"ChangeAnnotations"),q.prototype.all=function(){return this._annotations},Object.defineProperty(q.prototype,"size",{get:s(function(){return this._size},"get"),enumerable:!1,configurable:!0}),q.prototype.manage=function(ge,ve){var Z;if(U.is(ge)?Z=ge:(Z=this.nextId(),ve=ge),this._annotations[Z]!==void 0)throw new Error("Id ".concat(Z," is already in use."));if(ve===void 0)throw new Error("No annotation provided for id ".concat(Z));return this._annotations[Z]=ve,this._size++,Z},q.prototype.nextId=function(){return this._counter++,this._counter.toString()},q}(),O=function(){function q(ge){var ve=this;this._textEditChanges=Object.create(null),ge!==void 0?(this._workspaceEdit=ge,ge.documentChanges?(this._changeAnnotations=new V(ge.changeAnnotations),ge.changeAnnotations=this._changeAnnotations.all(),ge.documentChanges.forEach(function(Z){if(he.is(Z)){var M=new ie(Z.edits,ve._changeAnnotations);ve._textEditChanges[Z.textDocument.uri]=M}})):ge.changes&&Object.keys(ge.changes).forEach(function(Z){var M=new ie(ge.changes[Z]);ve._textEditChanges[Z]=M})):this._workspaceEdit={}}return s(q,"WorkspaceChange"),Object.defineProperty(q.prototype,"edit",{get:s(function(){return this.initDocumentChanges(),this._changeAnnotations!==void 0&&(this._changeAnnotations.size===0?this._workspaceEdit.changeAnnotations=void 0:this._workspaceEdit.changeAnnotations=this._changeAnnotations.all()),this._workspaceEdit},"get"),enumerable:!1,configurable:!0}),q.prototype.getTextEditChange=function(ge){if(pe.is(ge)){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var ve={uri:ge.uri,version:ge.version},Z=this._textEditChanges[ve.uri];if(!Z){var M=[],ke={textDocument:ve,edits:M};this._workspaceEdit.documentChanges.push(ke),Z=new ie(M,this._changeAnnotations),this._textEditChanges[ve.uri]=Z}return Z}else{if(this.initChanges(),this._workspaceEdit.changes===void 0)throw new Error("Workspace edit is not configured for normal text edit changes.");var Z=this._textEditChanges[ge];if(!Z){var M=[];this._workspaceEdit.changes[ge]=M,Z=new ie(M),this._textEditChanges[ge]=Z}return Z}},q.prototype.initDocumentChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._changeAnnotations=new V,this._workspaceEdit.documentChanges=[],this._workspaceEdit.changeAnnotations=this._changeAnnotations.all())},q.prototype.initChanges=function(){this._workspaceEdit.documentChanges===void 0&&this._workspaceEdit.changes===void 0&&(this._workspaceEdit.changes=Object.create(null))},q.prototype.createFile=function(ge,ve,Z){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var M;N.is(ve)||U.is(ve)?M=ve:Z=ve;var ke,$e;if(M===void 0?ke=ae.create(ge,Z):($e=U.is(M)?M:this._changeAnnotations.manage(M),ke=ae.create(ge,Z,$e)),this._workspaceEdit.documentChanges.push(ke),$e!==void 0)return $e},q.prototype.renameFile=function(ge,ve,Z,M){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var ke;N.is(Z)||U.is(Z)?ke=Z:M=Z;var $e,qt;if(ke===void 0?$e=G.create(ge,ve,M):(qt=U.is(ke)?ke:this._changeAnnotations.manage(ke),$e=G.create(ge,ve,M,qt)),this._workspaceEdit.documentChanges.push($e),qt!==void 0)return qt},q.prototype.deleteFile=function(ge,ve,Z){if(this.initDocumentChanges(),this._workspaceEdit.documentChanges===void 0)throw new Error("Workspace edit is not configured for document changes.");var M;N.is(ve)||U.is(ve)?M=ve:Z=ve;var ke,$e;if(M===void 0?ke=W.create(ge,Z):($e=U.is(M)?M:this._changeAnnotations.manage(M),ke=W.create(ge,Z,$e)),this._workspaceEdit.documentChanges.push(ke),$e!==void 0)return $e},q}();e.WorkspaceChange=O;var Y;(function(q){function ge(Z){return{uri:Z}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&_e.string(M.uri)}s(ve,"is"),q.is=ve})(Y||(e.TextDocumentIdentifier=Y={}));var te;(function(q){function ge(Z,M){return{uri:Z,version:M}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&_e.string(M.uri)&&_e.integer(M.version)}s(ve,"is"),q.is=ve})(te||(e.VersionedTextDocumentIdentifier=te={}));var pe;(function(q){function ge(Z,M){return{uri:Z,version:M}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&_e.string(M.uri)&&(M.version===null||_e.integer(M.version))}s(ve,"is"),q.is=ve})(pe||(e.OptionalVersionedTextDocumentIdentifier=pe={}));var ee;(function(q){function ge(Z,M,ke,$e){return{uri:Z,languageId:M,version:ke,text:$e}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&_e.string(M.uri)&&_e.string(M.languageId)&&_e.integer(M.version)&&_e.string(M.text)}s(ve,"is"),q.is=ve})(ee||(e.TextDocumentItem=ee={}));var ce;(function(q){q.PlainText="plaintext",q.Markdown="markdown";function ge(ve){var Z=ve;return Z===q.PlainText||Z===q.Markdown}s(ge,"is"),q.is=ge})(ce||(e.MarkupKind=ce={}));var me;(function(q){function ge(ve){var Z=ve;return _e.objectLiteral(ve)&&ce.is(Z.kind)&&_e.string(Z.value)}s(ge,"is"),q.is=ge})(me||(e.MarkupContent=me={}));var Ne;(function(q){q.Text=1,q.Method=2,q.Function=3,q.Constructor=4,q.Field=5,q.Variable=6,q.Class=7,q.Interface=8,q.Module=9,q.Property=10,q.Unit=11,q.Value=12,q.Enum=13,q.Keyword=14,q.Snippet=15,q.Color=16,q.File=17,q.Reference=18,q.Folder=19,q.EnumMember=20,q.Constant=21,q.Struct=22,q.Event=23,q.Operator=24,q.TypeParameter=25})(Ne||(e.CompletionItemKind=Ne={}));var Se;(function(q){q.PlainText=1,q.Snippet=2})(Se||(e.InsertTextFormat=Se={}));var Je;(function(q){q.Deprecated=1})(Je||(e.CompletionItemTag=Je={}));var Me;(function(q){function ge(Z,M,ke){return{newText:Z,insert:M,replace:ke}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return M&&_e.string(M.newText)&&l.is(M.insert)&&l.is(M.replace)}s(ve,"is"),q.is=ve})(Me||(e.InsertReplaceEdit=Me={}));var ft;(function(q){q.asIs=1,q.adjustIndentation=2})(ft||(e.InsertTextMode=ft={}));var It;(function(q){function ge(ve){var Z=ve;return Z&&(_e.string(Z.detail)||Z.detail===void 0)&&(_e.string(Z.description)||Z.description===void 0)}s(ge,"is"),q.is=ge})(It||(e.CompletionItemLabelDetails=It={}));var yt;(function(q){function ge(ve){return{label:ve}}s(ge,"create"),q.create=ge})(yt||(e.CompletionItem=yt={}));var vt;(function(q){function ge(ve,Z){return{items:ve||[],isIncomplete:!!Z}}s(ge,"create"),q.create=ge})(vt||(e.CompletionList=vt={}));var le;(function(q){function ge(Z){return Z.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s(ge,"fromPlainText"),q.fromPlainText=ge;function ve(Z){var M=Z;return _e.string(M)||_e.objectLiteral(M)&&_e.string(M.language)&&_e.string(M.value)}s(ve,"is"),q.is=ve})(le||(e.MarkedString=le={}));var Oe;(function(q){function ge(ve){var Z=ve;return!!Z&&_e.objectLiteral(Z)&&(me.is(Z.contents)||le.is(Z.contents)||_e.typedArray(Z.contents,le.is))&&(ve.range===void 0||l.is(ve.range))}s(ge,"is"),q.is=ge})(Oe||(e.Hover=Oe={}));var ye;(function(q){function ge(ve,Z){return Z?{label:ve,documentation:Z}:{label:ve}}s(ge,"create"),q.create=ge})(ye||(e.ParameterInformation=ye={}));var tt;(function(q){function ge(ve,Z){for(var M=[],ke=2;ke<arguments.length;ke++)M[ke-2]=arguments[ke];var $e={label:ve};return _e.defined(Z)&&($e.documentation=Z),_e.defined(M)?$e.parameters=M:$e.parameters=[],$e}s(ge,"create"),q.create=ge})(tt||(e.SignatureInformation=tt={}));var X;(function(q){q.Text=1,q.Read=2,q.Write=3})(X||(e.DocumentHighlightKind=X={}));var re;(function(q){function ge(ve,Z){var M={range:ve};return _e.number(Z)&&(M.kind=Z),M}s(ge,"create"),q.create=ge})(re||(e.DocumentHighlight=re={}));var We;(function(q){q.File=1,q.Module=2,q.Namespace=3,q.Package=4,q.Class=5,q.Method=6,q.Property=7,q.Field=8,q.Constructor=9,q.Enum=10,q.Interface=11,q.Function=12,q.Variable=13,q.Constant=14,q.String=15,q.Number=16,q.Boolean=17,q.Array=18,q.Object=19,q.Key=20,q.Null=21,q.EnumMember=22,q.Struct=23,q.Event=24,q.Operator=25,q.TypeParameter=26})(We||(e.SymbolKind=We={}));var De;(function(q){q.Deprecated=1})(De||(e.SymbolTag=De={}));var be;(function(q){function ge(ve,Z,M,ke,$e){var qt={name:ve,kind:Z,location:{uri:ke,range:M}};return $e&&(qt.containerName=$e),qt}s(ge,"create"),q.create=ge})(be||(e.SymbolInformation=be={}));var ze;(function(q){function ge(ve,Z,M,ke){return ke!==void 0?{name:ve,kind:Z,location:{uri:M,range:ke}}:{name:ve,kind:Z,location:{uri:M}}}s(ge,"create"),q.create=ge})(ze||(e.WorkspaceSymbol=ze={}));var it;(function(q){function ge(Z,M,ke,$e,qt,Sn){var mn={name:Z,detail:M,kind:ke,range:$e,selectionRange:qt};return Sn!==void 0&&(mn.children=Sn),mn}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return M&&_e.string(M.name)&&_e.number(M.kind)&&l.is(M.range)&&l.is(M.selectionRange)&&(M.detail===void 0||_e.string(M.detail))&&(M.deprecated===void 0||_e.boolean(M.deprecated))&&(M.children===void 0||Array.isArray(M.children))&&(M.tags===void 0||Array.isArray(M.tags))}s(ve,"is"),q.is=ve})(it||(e.DocumentSymbol=it={}));var ht;(function(q){q.Empty="",q.QuickFix="quickfix",q.Refactor="refactor",q.RefactorExtract="refactor.extract",q.RefactorInline="refactor.inline",q.RefactorRewrite="refactor.rewrite",q.Source="source",q.SourceOrganizeImports="source.organizeImports",q.SourceFixAll="source.fixAll"})(ht||(e.CodeActionKind=ht={}));var Ot;(function(q){q.Invoked=1,q.Automatic=2})(Ot||(e.CodeActionTriggerKind=Ot={}));var cn;(function(q){function ge(Z,M,ke){var $e={diagnostics:Z};return M!=null&&($e.only=M),ke!=null&&($e.triggerKind=ke),$e}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&_e.typedArray(M.diagnostics,_.is)&&(M.only===void 0||_e.typedArray(M.only,_e.string))&&(M.triggerKind===void 0||M.triggerKind===Ot.Invoked||M.triggerKind===Ot.Automatic)}s(ve,"is"),q.is=ve})(cn||(e.CodeActionContext=cn={}));var Lt;(function(q){function ge(Z,M,ke){var $e={title:Z},qt=!0;return typeof M=="string"?(qt=!1,$e.kind=M):k.is(M)?$e.command=M:$e.edit=M,qt&&ke!==void 0&&($e.kind=ke),$e}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return M&&_e.string(M.title)&&(M.diagnostics===void 0||_e.typedArray(M.diagnostics,_.is))&&(M.kind===void 0||_e.string(M.kind))&&(M.edit!==void 0||M.command!==void 0)&&(M.command===void 0||k.is(M.command))&&(M.isPreferred===void 0||_e.boolean(M.isPreferred))&&(M.edit===void 0||ue.is(M.edit))}s(ve,"is"),q.is=ve})(Lt||(e.CodeAction=Lt={}));var Wn;(function(q){function ge(Z,M){var ke={range:Z};return _e.defined(M)&&(ke.data=M),ke}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&l.is(M.range)&&(_e.undefined(M.command)||k.is(M.command))}s(ve,"is"),q.is=ve})(Wn||(e.CodeLens=Wn={}));var zn;(function(q){function ge(Z,M){return{tabSize:Z,insertSpaces:M}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&_e.uinteger(M.tabSize)&&_e.boolean(M.insertSpaces)}s(ve,"is"),q.is=ve})(zn||(e.FormattingOptions=zn={}));var fr;(function(q){function ge(Z,M,ke){return{range:Z,target:M,data:ke}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&l.is(M.range)&&(_e.undefined(M.target)||_e.string(M.target))}s(ve,"is"),q.is=ve})(fr||(e.DocumentLink=fr={}));var Ae;(function(q){function ge(Z,M){return{range:Z,parent:M}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&l.is(M.range)&&(M.parent===void 0||q.is(M.parent))}s(ve,"is"),q.is=ve})(Ae||(e.SelectionRange=Ae={}));var He;(function(q){q.namespace="namespace",q.type="type",q.class="class",q.enum="enum",q.interface="interface",q.struct="struct",q.typeParameter="typeParameter",q.parameter="parameter",q.variable="variable",q.property="property",q.enumMember="enumMember",q.event="event",q.function="function",q.method="method",q.macro="macro",q.keyword="keyword",q.modifier="modifier",q.comment="comment",q.string="string",q.number="number",q.regexp="regexp",q.operator="operator",q.decorator="decorator"})(He||(e.SemanticTokenTypes=He={}));var ut;(function(q){q.declaration="declaration",q.definition="definition",q.readonly="readonly",q.static="static",q.deprecated="deprecated",q.abstract="abstract",q.async="async",q.modification="modification",q.documentation="documentation",q.defaultLibrary="defaultLibrary"})(ut||(e.SemanticTokenModifiers=ut={}));var At;(function(q){function ge(ve){var Z=ve;return _e.objectLiteral(Z)&&(Z.resultId===void 0||typeof Z.resultId=="string")&&Array.isArray(Z.data)&&(Z.data.length===0||typeof Z.data[0]=="number")}s(ge,"is"),q.is=ge})(At||(e.SemanticTokens=At={}));var Xt;(function(q){function ge(Z,M){return{range:Z,text:M}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return M!=null&&l.is(M.range)&&_e.string(M.text)}s(ve,"is"),q.is=ve})(Xt||(e.InlineValueText=Xt={}));var Ht;(function(q){function ge(Z,M,ke){return{range:Z,variableName:M,caseSensitiveLookup:ke}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return M!=null&&l.is(M.range)&&_e.boolean(M.caseSensitiveLookup)&&(_e.string(M.variableName)||M.variableName===void 0)}s(ve,"is"),q.is=ve})(Ht||(e.InlineValueVariableLookup=Ht={}));var yn;(function(q){function ge(Z,M){return{range:Z,expression:M}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return M!=null&&l.is(M.range)&&(_e.string(M.expression)||M.expression===void 0)}s(ve,"is"),q.is=ve})(yn||(e.InlineValueEvaluatableExpression=yn={}));var vn;(function(q){function ge(Z,M){return{frameId:Z,stoppedLocation:M}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.defined(M)&&l.is(Z.stoppedLocation)}s(ve,"is"),q.is=ve})(vn||(e.InlineValueContext=vn={}));var jt;(function(q){q.Type=1,q.Parameter=2;function ge(ve){return ve===1||ve===2}s(ge,"is"),q.is=ge})(jt||(e.InlayHintKind=jt={}));var nn;(function(q){function ge(Z){return{value:Z}}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&(M.tooltip===void 0||_e.string(M.tooltip)||me.is(M.tooltip))&&(M.location===void 0||c.is(M.location))&&(M.command===void 0||k.is(M.command))}s(ve,"is"),q.is=ve})(nn||(e.InlayHintLabelPart=nn={}));var Jt;(function(q){function ge(Z,M,ke){var $e={position:Z,label:M};return ke!==void 0&&($e.kind=ke),$e}s(ge,"create"),q.create=ge;function ve(Z){var M=Z;return _e.objectLiteral(M)&&a.is(M.position)&&(_e.string(M.label)||_e.typedArray(M.label,nn.is))&&(M.kind===void 0||jt.is(M.kind))&&M.textEdits===void 0||_e.typedArray(M.textEdits,P.is)&&(M.tooltip===void 0||_e.string(M.tooltip)||me.is(M.tooltip))&&(M.paddingLeft===void 0||_e.boolean(M.paddingLeft))&&(M.paddingRight===void 0||_e.boolean(M.paddingRight))}s(ve,"is"),q.is=ve})(Jt||(e.InlayHint=Jt={}));var Tn;(function(q){function ge(ve){return{kind:"snippet",value:ve}}s(ge,"createSnippet"),q.createSnippet=ge})(Tn||(e.StringValue=Tn={}));var Fn;(function(q){function ge(ve,Z,M,ke){return{insertText:ve,filterText:Z,range:M,command:ke}}s(ge,"create"),q.create=ge})(Fn||(e.InlineCompletionItem=Fn={}));var Yn;(function(q){function ge(ve){return{items:ve}}s(ge,"create"),q.create=ge})(Yn||(e.InlineCompletionList=Yn={}));var Ur;(function(q){q.Invoked=0,q.Automatic=1})(Ur||(e.InlineCompletionTriggerKind=Ur={}));var Yr;(function(q){function ge(ve,Z){return{range:ve,text:Z}}s(ge,"create"),q.create=ge})(Yr||(e.SelectedCompletionInfo=Yr={}));var Fr;(function(q){function ge(ve,Z){return{triggerKind:ve,selectedCompletionInfo:Z}}s(ge,"create"),q.create=ge})(Fr||(e.InlineCompletionContext=Fr={}));var jr;(function(q){function ge(ve){var Z=ve;return _e.objectLiteral(Z)&&r.is(Z.uri)&&_e.string(Z.name)}s(ge,"is"),q.is=ge})(jr||(e.WorkspaceFolder=jr={})),e.EOL=[`
`,`\r
`,"\r"];var tr;(function(q){function ge(ke,$e,qt,Sn){return new Vr(ke,$e,qt,Sn)}s(ge,"create"),q.create=ge;function ve(ke){var $e=ke;return!!(_e.defined($e)&&_e.string($e.uri)&&(_e.undefined($e.languageId)||_e.string($e.languageId))&&_e.uinteger($e.lineCount)&&_e.func($e.getText)&&_e.func($e.positionAt)&&_e.func($e.offsetAt))}s(ve,"is"),q.is=ve;function Z(ke,$e){for(var qt=ke.getText(),Sn=M($e,function(Mr,Ws){var Lp=Mr.range.start.line-Ws.range.start.line;return Lp===0?Mr.range.start.character-Ws.range.start.character:Lp}),mn=qt.length,lr=Sn.length-1;lr>=0;lr--){var pr=Sn[lr],bn=ke.offsetAt(pr.range.start),Gt=ke.offsetAt(pr.range.end);if(Gt<=mn)qt=qt.substring(0,bn)+pr.newText+qt.substring(Gt,qt.length);else throw new Error("Overlapping edit");mn=bn}return qt}s(Z,"applyEdits"),q.applyEdits=Z;function M(ke,$e){if(ke.length<=1)return ke;var qt=ke.length/2|0,Sn=ke.slice(0,qt),mn=ke.slice(qt);M(Sn,$e),M(mn,$e);for(var lr=0,pr=0,bn=0;lr<Sn.length&&pr<mn.length;){var Gt=$e(Sn[lr],mn[pr]);Gt<=0?ke[bn++]=Sn[lr++]:ke[bn++]=mn[pr++]}for(;lr<Sn.length;)ke[bn++]=Sn[lr++];for(;pr<mn.length;)ke[bn++]=mn[pr++];return ke}s(M,"mergeSort")})(tr||(e.TextDocument=tr={}));var Vr=function(){function q(ge,ve,Z,M){this._uri=ge,this._languageId=ve,this._version=Z,this._content=M,this._lineOffsets=void 0}return s(q,"FullTextDocument"),Object.defineProperty(q.prototype,"uri",{get:s(function(){return this._uri},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"languageId",{get:s(function(){return this._languageId},"get"),enumerable:!1,configurable:!0}),Object.defineProperty(q.prototype,"version",{get:s(function(){return this._version},"get"),enumerable:!1,configurable:!0}),q.prototype.getText=function(ge){if(ge){var ve=this.offsetAt(ge.start),Z=this.offsetAt(ge.end);return this._content.substring(ve,Z)}return this._content},q.prototype.update=function(ge,ve){this._content=ge.text,this._version=ve,this._lineOffsets=void 0},q.prototype.getLineOffsets=function(){if(this._lineOffsets===void 0){for(var ge=[],ve=this._content,Z=!0,M=0;M<ve.length;M++){Z&&(ge.push(M),Z=!1);var ke=ve.charAt(M);Z=ke==="\r"||ke===`
`,ke==="\r"&&M+1<ve.length&&ve.charAt(M+1)===`
`&&M++}Z&&ve.length>0&&ge.push(ve.length),this._lineOffsets=ge}return this._lineOffsets},q.prototype.positionAt=function(ge){ge=Math.max(Math.min(ge,this._content.length),0);var ve=this.getLineOffsets(),Z=0,M=ve.length;if(M===0)return a.create(0,ge);for(;Z<M;){var ke=Math.floor((Z+M)/2);ve[ke]>ge?M=ke:Z=ke+1}var $e=Z-1;return a.create($e,ge-ve[$e])},q.prototype.offsetAt=function(ge){var ve=this.getLineOffsets();if(ge.line>=ve.length)return this._content.length;if(ge.line<0)return 0;var Z=ve[ge.line],M=ge.line+1<ve.length?ve[ge.line+1]:this._content.length;return Math.max(Math.min(Z+ge.character,M),Z)},Object.defineProperty(q.prototype,"lineCount",{get:s(function(){return this.getLineOffsets().length},"get"),enumerable:!1,configurable:!0}),q}(),_e;(function(q){var ge=Object.prototype.toString;function ve(Gt){return typeof Gt<"u"}s(ve,"defined"),q.defined=ve;function Z(Gt){return typeof Gt>"u"}s(Z,"undefined"),q.undefined=Z;function M(Gt){return Gt===!0||Gt===!1}s(M,"boolean"),q.boolean=M;function ke(Gt){return ge.call(Gt)==="[object String]"}s(ke,"string"),q.string=ke;function $e(Gt){return ge.call(Gt)==="[object Number]"}s($e,"number"),q.number=$e;function qt(Gt,Mr,Ws){return ge.call(Gt)==="[object Number]"&&Mr<=Gt&&Gt<=Ws}s(qt,"numberRange"),q.numberRange=qt;function Sn(Gt){return ge.call(Gt)==="[object Number]"&&-2147483648<=Gt&&Gt<=2147483647}s(Sn,"integer"),q.integer=Sn;function mn(Gt){return ge.call(Gt)==="[object Number]"&&0<=Gt&&Gt<=2147483647}s(mn,"uinteger"),q.uinteger=mn;function lr(Gt){return ge.call(Gt)==="[object Function]"}s(lr,"func"),q.func=lr;function pr(Gt){return Gt!==null&&typeof Gt=="object"}s(pr,"objectLiteral"),q.objectLiteral=pr;function bn(Gt,Mr){return Array.isArray(Gt)&&Gt.every(Mr)}s(bn,"typedArray"),q.typedArray=bn})(_e||(_e={}))})});var Fs=H(ud=>{"use strict";f();Object.defineProperty(ud,"__esModule",{value:!0});ud.ProtocolNotificationType=ud.ProtocolNotificationType0=ud.ProtocolRequestType=ud.ProtocolRequestType0=ud.RegistrationType=ud.MessageDirection=void 0;var AS=gI(),Jxe;(function(t){t.clientToServer="clientToServer",t.serverToClient="serverToClient",t.both="both"})(Jxe||(ud.MessageDirection=Jxe={}));var wee=class{static{s(this,"RegistrationType")}constructor(e){this.method=e}};ud.RegistrationType=wee;var _ee=class extends AS.RequestType0{static{s(this,"ProtocolRequestType0")}constructor(e){super(e)}};ud.ProtocolRequestType0=_ee;var See=class extends AS.RequestType{static{s(this,"ProtocolRequestType")}constructor(e){super(e,AS.ParameterStructures.byName)}};ud.ProtocolRequestType=See;var Ree=class extends AS.NotificationType0{static{s(this,"ProtocolNotificationType0")}constructor(e){super(e)}};ud.ProtocolNotificationType0=Ree;var kee=class extends AS.NotificationType{static{s(this,"ProtocolNotificationType")}constructor(e){super(e,AS.ParameterStructures.byName)}};ud.ProtocolNotificationType=kee});var PF=H(ja=>{"use strict";f();Object.defineProperty(ja,"__esModule",{value:!0});ja.objectLiteral=ja.typedArray=ja.stringArray=ja.array=ja.func=ja.error=ja.number=ja.string=ja.boolean=void 0;function Lst(t){return t===!0||t===!1}s(Lst,"boolean");ja.boolean=Lst;function Xxe(t){return typeof t=="string"||t instanceof String}s(Xxe,"string");ja.string=Xxe;function Fst(t){return typeof t=="number"||t instanceof Number}s(Fst,"number");ja.number=Fst;function Mst(t){return t instanceof Error}s(Mst,"error");ja.error=Mst;function Qst(t){return typeof t=="function"}s(Qst,"func");ja.func=Qst;function Zxe(t){return Array.isArray(t)}s(Zxe,"array");ja.array=Zxe;function Ost(t){return Zxe(t)&&t.every(e=>Xxe(e))}s(Ost,"stringArray");ja.stringArray=Ost;function Ust(t,e){return Array.isArray(t)&&t.every(e)}s(Ust,"typedArray");ja.typedArray=Ust;function qst(t){return t!==null&&typeof t=="object"}s(qst,"objectLiteral");ja.objectLiteral=qst});var nve=H(DF=>{"use strict";f();Object.defineProperty(DF,"__esModule",{value:!0});DF.ImplementationRequest=void 0;var eve=Fs(),tve;(function(t){t.method="textDocument/implementation",t.messageDirection=eve.MessageDirection.clientToServer,t.type=new eve.ProtocolRequestType(t.method)})(tve||(DF.ImplementationRequest=tve={}))});var ove=H(NF=>{"use strict";f();Object.defineProperty(NF,"__esModule",{value:!0});NF.TypeDefinitionRequest=void 0;var rve=Fs(),ive;(function(t){t.method="textDocument/typeDefinition",t.messageDirection=rve.MessageDirection.clientToServer,t.type=new rve.ProtocolRequestType(t.method)})(ive||(NF.TypeDefinitionRequest=ive={}))});var lve=H(yS=>{"use strict";f();Object.defineProperty(yS,"__esModule",{value:!0});yS.DidChangeWorkspaceFoldersNotification=yS.WorkspaceFoldersRequest=void 0;var LF=Fs(),sve;(function(t){t.method="workspace/workspaceFolders",t.messageDirection=LF.MessageDirection.serverToClient,t.type=new LF.ProtocolRequestType0(t.method)})(sve||(yS.WorkspaceFoldersRequest=sve={}));var ave;(function(t){t.method="workspace/didChangeWorkspaceFolders",t.messageDirection=LF.MessageDirection.clientToServer,t.type=new LF.ProtocolNotificationType(t.method)})(ave||(yS.DidChangeWorkspaceFoldersNotification=ave={}))});var dve=H(FF=>{"use strict";f();Object.defineProperty(FF,"__esModule",{value:!0});FF.ConfigurationRequest=void 0;var cve=Fs(),uve;(function(t){t.method="workspace/configuration",t.messageDirection=cve.MessageDirection.serverToClient,t.type=new cve.ProtocolRequestType(t.method)})(uve||(FF.ConfigurationRequest=uve={}))});var mve=H(CS=>{"use strict";f();Object.defineProperty(CS,"__esModule",{value:!0});CS.ColorPresentationRequest=CS.DocumentColorRequest=void 0;var MF=Fs(),fve;(function(t){t.method="textDocument/documentColor",t.messageDirection=MF.MessageDirection.clientToServer,t.type=new MF.ProtocolRequestType(t.method)})(fve||(CS.DocumentColorRequest=fve={}));var pve;(function(t){t.method="textDocument/colorPresentation",t.messageDirection=MF.MessageDirection.clientToServer,t.type=new MF.ProtocolRequestType(t.method)})(pve||(CS.ColorPresentationRequest=pve={}))});var Ave=H(xS=>{"use strict";f();Object.defineProperty(xS,"__esModule",{value:!0});xS.FoldingRangeRefreshRequest=xS.FoldingRangeRequest=void 0;var QF=Fs(),hve;(function(t){t.method="textDocument/foldingRange",t.messageDirection=QF.MessageDirection.clientToServer,t.type=new QF.ProtocolRequestType(t.method)})(hve||(xS.FoldingRangeRequest=hve={}));var gve;(function(t){t.method="workspace/foldingRange/refresh",t.messageDirection=QF.MessageDirection.serverToClient,t.type=new QF.ProtocolRequestType0(t.method)})(gve||(xS.FoldingRangeRefreshRequest=gve={}))});var xve=H(OF=>{"use strict";f();Object.defineProperty(OF,"__esModule",{value:!0});OF.DeclarationRequest=void 0;var yve=Fs(),Cve;(function(t){t.method="textDocument/declaration",t.messageDirection=yve.MessageDirection.clientToServer,t.type=new yve.ProtocolRequestType(t.method)})(Cve||(OF.DeclarationRequest=Cve={}))});var Eve=H(UF=>{"use strict";f();Object.defineProperty(UF,"__esModule",{value:!0});UF.SelectionRangeRequest=void 0;var vve=Fs(),bve;(function(t){t.method="textDocument/selectionRange",t.messageDirection=vve.MessageDirection.clientToServer,t.type=new vve.ProtocolRequestType(t.method)})(bve||(UF.SelectionRangeRequest=bve={}))});var _ve=H(Fx=>{"use strict";f();Object.defineProperty(Fx,"__esModule",{value:!0});Fx.WorkDoneProgressCancelNotification=Fx.WorkDoneProgressCreateRequest=Fx.WorkDoneProgress=void 0;var Wst=gI(),qF=Fs(),Ive;(function(t){t.type=new Wst.ProgressType;function e(n){return n===t.type}s(e,"is"),t.is=e})(Ive||(Fx.WorkDoneProgress=Ive={}));var Tve;(function(t){t.method="window/workDoneProgress/create",t.messageDirection=qF.MessageDirection.serverToClient,t.type=new qF.ProtocolRequestType(t.method)})(Tve||(Fx.WorkDoneProgressCreateRequest=Tve={}));var wve;(function(t){t.method="window/workDoneProgress/cancel",t.messageDirection=qF.MessageDirection.clientToServer,t.type=new qF.ProtocolNotificationType(t.method)})(wve||(Fx.WorkDoneProgressCancelNotification=wve={}))});var Bve=H(Mx=>{"use strict";f();Object.defineProperty(Mx,"__esModule",{value:!0});Mx.CallHierarchyOutgoingCallsRequest=Mx.CallHierarchyIncomingCallsRequest=Mx.CallHierarchyPrepareRequest=void 0;var vS=Fs(),Sve;(function(t){t.method="textDocument/prepareCallHierarchy",t.messageDirection=vS.MessageDirection.clientToServer,t.type=new vS.ProtocolRequestType(t.method)})(Sve||(Mx.CallHierarchyPrepareRequest=Sve={}));var Rve;(function(t){t.method="callHierarchy/incomingCalls",t.messageDirection=vS.MessageDirection.clientToServer,t.type=new vS.ProtocolRequestType(t.method)})(Rve||(Mx.CallHierarchyIncomingCallsRequest=Rve={}));var kve;(function(t){t.method="callHierarchy/outgoingCalls",t.messageDirection=vS.MessageDirection.clientToServer,t.type=new vS.ProtocolRequestType(t.method)})(kve||(Mx.CallHierarchyOutgoingCallsRequest=kve={}))});var Mve=H(dd=>{"use strict";f();Object.defineProperty(dd,"__esModule",{value:!0});dd.SemanticTokensRefreshRequest=dd.SemanticTokensRangeRequest=dd.SemanticTokensDeltaRequest=dd.SemanticTokensRequest=dd.SemanticTokensRegistrationType=dd.TokenFormat=void 0;var R1=Fs(),Pve;(function(t){t.Relative="relative"})(Pve||(dd.TokenFormat=Pve={}));var YB;(function(t){t.method="textDocument/semanticTokens",t.type=new R1.RegistrationType(t.method)})(YB||(dd.SemanticTokensRegistrationType=YB={}));var Dve;(function(t){t.method="textDocument/semanticTokens/full",t.messageDirection=R1.MessageDirection.clientToServer,t.type=new R1.ProtocolRequestType(t.method),t.registrationMethod=YB.method})(Dve||(dd.SemanticTokensRequest=Dve={}));var Nve;(function(t){t.method="textDocument/semanticTokens/full/delta",t.messageDirection=R1.MessageDirection.clientToServer,t.type=new R1.ProtocolRequestType(t.method),t.registrationMethod=YB.method})(Nve||(dd.SemanticTokensDeltaRequest=Nve={}));var Lve;(function(t){t.method="textDocument/semanticTokens/range",t.messageDirection=R1.MessageDirection.clientToServer,t.type=new R1.ProtocolRequestType(t.method),t.registrationMethod=YB.method})(Lve||(dd.SemanticTokensRangeRequest=Lve={}));var Fve;(function(t){t.method="workspace/semanticTokens/refresh",t.messageDirection=R1.MessageDirection.serverToClient,t.type=new R1.ProtocolRequestType0(t.method)})(Fve||(dd.SemanticTokensRefreshRequest=Fve={}))});var Uve=H(WF=>{"use strict";f();Object.defineProperty(WF,"__esModule",{value:!0});WF.ShowDocumentRequest=void 0;var Qve=Fs(),Ove;(function(t){t.method="window/showDocument",t.messageDirection=Qve.MessageDirection.serverToClient,t.type=new Qve.ProtocolRequestType(t.method)})(Ove||(WF.ShowDocumentRequest=Ove={}))});var Hve=H(HF=>{"use strict";f();Object.defineProperty(HF,"__esModule",{value:!0});HF.LinkedEditingRangeRequest=void 0;var qve=Fs(),Wve;(function(t){t.method="textDocument/linkedEditingRange",t.messageDirection=qve.MessageDirection.clientToServer,t.type=new qve.ProtocolRequestType(t.method)})(Wve||(HF.LinkedEditingRangeRequest=Wve={}))});var Jve=H(Gc=>{"use strict";f();Object.defineProperty(Gc,"__esModule",{value:!0});Gc.WillDeleteFilesRequest=Gc.DidDeleteFilesNotification=Gc.DidRenameFilesNotification=Gc.WillRenameFilesRequest=Gc.DidCreateFilesNotification=Gc.WillCreateFilesRequest=Gc.FileOperationPatternKind=void 0;var Sf=Fs(),Gve;(function(t){t.file="file",t.folder="folder"})(Gve||(Gc.FileOperationPatternKind=Gve={}));var jve;(function(t){t.method="workspace/willCreateFiles",t.messageDirection=Sf.MessageDirection.clientToServer,t.type=new Sf.ProtocolRequestType(t.method)})(jve||(Gc.WillCreateFilesRequest=jve={}));var Vve;(function(t){t.method="workspace/didCreateFiles",t.messageDirection=Sf.MessageDirection.clientToServer,t.type=new Sf.ProtocolNotificationType(t.method)})(Vve||(Gc.DidCreateFilesNotification=Vve={}));var $ve;(function(t){t.method="workspace/willRenameFiles",t.messageDirection=Sf.MessageDirection.clientToServer,t.type=new Sf.ProtocolRequestType(t.method)})($ve||(Gc.WillRenameFilesRequest=$ve={}));var zve;(function(t){t.method="workspace/didRenameFiles",t.messageDirection=Sf.MessageDirection.clientToServer,t.type=new Sf.ProtocolNotificationType(t.method)})(zve||(Gc.DidRenameFilesNotification=zve={}));var Yve;(function(t){t.method="workspace/didDeleteFiles",t.messageDirection=Sf.MessageDirection.clientToServer,t.type=new Sf.ProtocolNotificationType(t.method)})(Yve||(Gc.DidDeleteFilesNotification=Yve={}));var Kve;(function(t){t.method="workspace/willDeleteFiles",t.messageDirection=Sf.MessageDirection.clientToServer,t.type=new Sf.ProtocolRequestType(t.method)})(Kve||(Gc.WillDeleteFilesRequest=Kve={}))});var nbe=H(Qx=>{"use strict";f();Object.defineProperty(Qx,"__esModule",{value:!0});Qx.MonikerRequest=Qx.MonikerKind=Qx.UniquenessLevel=void 0;var Xve=Fs(),Zve;(function(t){t.document="document",t.project="project",t.group="group",t.scheme="scheme",t.global="global"})(Zve||(Qx.UniquenessLevel=Zve={}));var ebe;(function(t){t.$import="import",t.$export="export",t.local="local"})(ebe||(Qx.MonikerKind=ebe={}));var tbe;(function(t){t.method="textDocument/moniker",t.messageDirection=Xve.MessageDirection.clientToServer,t.type=new Xve.ProtocolRequestType(t.method)})(tbe||(Qx.MonikerRequest=tbe={}))});var sbe=H(Ox=>{"use strict";f();Object.defineProperty(Ox,"__esModule",{value:!0});Ox.TypeHierarchySubtypesRequest=Ox.TypeHierarchySupertypesRequest=Ox.TypeHierarchyPrepareRequest=void 0;var bS=Fs(),rbe;(function(t){t.method="textDocument/prepareTypeHierarchy",t.messageDirection=bS.MessageDirection.clientToServer,t.type=new bS.ProtocolRequestType(t.method)})(rbe||(Ox.TypeHierarchyPrepareRequest=rbe={}));var ibe;(function(t){t.method="typeHierarchy/supertypes",t.messageDirection=bS.MessageDirection.clientToServer,t.type=new bS.ProtocolRequestType(t.method)})(ibe||(Ox.TypeHierarchySupertypesRequest=ibe={}));var obe;(function(t){t.method="typeHierarchy/subtypes",t.messageDirection=bS.MessageDirection.clientToServer,t.type=new bS.ProtocolRequestType(t.method)})(obe||(Ox.TypeHierarchySubtypesRequest=obe={}))});var cbe=H(ES=>{"use strict";f();Object.defineProperty(ES,"__esModule",{value:!0});ES.InlineValueRefreshRequest=ES.InlineValueRequest=void 0;var GF=Fs(),abe;(function(t){t.method="textDocument/inlineValue",t.messageDirection=GF.MessageDirection.clientToServer,t.type=new GF.ProtocolRequestType(t.method)})(abe||(ES.InlineValueRequest=abe={}));var lbe;(function(t){t.method="workspace/inlineValue/refresh",t.messageDirection=GF.MessageDirection.serverToClient,t.type=new GF.ProtocolRequestType0(t.method)})(lbe||(ES.InlineValueRefreshRequest=lbe={}))});var pbe=H(Ux=>{"use strict";f();Object.defineProperty(Ux,"__esModule",{value:!0});Ux.InlayHintRefreshRequest=Ux.InlayHintResolveRequest=Ux.InlayHintRequest=void 0;var IS=Fs(),ube;(function(t){t.method="textDocument/inlayHint",t.messageDirection=IS.MessageDirection.clientToServer,t.type=new IS.ProtocolRequestType(t.method)})(ube||(Ux.InlayHintRequest=ube={}));var dbe;(function(t){t.method="inlayHint/resolve",t.messageDirection=IS.MessageDirection.clientToServer,t.type=new IS.ProtocolRequestType(t.method)})(dbe||(Ux.InlayHintResolveRequest=dbe={}));var fbe;(function(t){t.method="workspace/inlayHint/refresh",t.messageDirection=IS.MessageDirection.serverToClient,t.type=new IS.ProtocolRequestType0(t.method)})(fbe||(Ux.InlayHintRefreshRequest=fbe={}))});var xbe=H(Rf=>{"use strict";f();Object.defineProperty(Rf,"__esModule",{value:!0});Rf.DiagnosticRefreshRequest=Rf.WorkspaceDiagnosticRequest=Rf.DocumentDiagnosticRequest=Rf.DocumentDiagnosticReportKind=Rf.DiagnosticServerCancellationData=void 0;var Cbe=gI(),Hst=PF(),TS=Fs(),mbe;(function(t){function e(n){let r=n;return r&&Hst.boolean(r.retriggerRequest)}s(e,"is"),t.is=e})(mbe||(Rf.DiagnosticServerCancellationData=mbe={}));var hbe;(function(t){t.Full="full",t.Unchanged="unchanged"})(hbe||(Rf.DocumentDiagnosticReportKind=hbe={}));var gbe;(function(t){t.method="textDocument/diagnostic",t.messageDirection=TS.MessageDirection.clientToServer,t.type=new TS.ProtocolRequestType(t.method),t.partialResult=new Cbe.ProgressType})(gbe||(Rf.DocumentDiagnosticRequest=gbe={}));var Abe;(function(t){t.method="workspace/diagnostic",t.messageDirection=TS.MessageDirection.clientToServer,t.type=new TS.ProtocolRequestType(t.method),t.partialResult=new Cbe.ProgressType})(Abe||(Rf.WorkspaceDiagnosticRequest=Abe={}));var ybe;(function(t){t.method="workspace/diagnostic/refresh",t.messageDirection=TS.MessageDirection.serverToClient,t.type=new TS.ProtocolRequestType0(t.method)})(ybe||(Rf.DiagnosticRefreshRequest=ybe={}))});var _be=H(sa=>{"use strict";f();Object.defineProperty(sa,"__esModule",{value:!0});sa.DidCloseNotebookDocumentNotification=sa.DidSaveNotebookDocumentNotification=sa.DidChangeNotebookDocumentNotification=sa.NotebookCellArrayChange=sa.DidOpenNotebookDocumentNotification=sa.NotebookDocumentSyncRegistrationType=sa.NotebookDocument=sa.NotebookCell=sa.ExecutionSummary=sa.NotebookCellKind=void 0;var KB=BF(),gm=PF(),pg=Fs(),Bee;(function(t){t.Markup=1,t.Code=2;function e(n){return n===1||n===2}s(e,"is"),t.is=e})(Bee||(sa.NotebookCellKind=Bee={}));var Pee;(function(t){function e(i,o){let a={executionOrder:i};return(o===!0||o===!1)&&(a.success=o),a}s(e,"create"),t.create=e;function n(i){let o=i;return gm.objectLiteral(o)&&KB.uinteger.is(o.executionOrder)&&(o.success===void 0||gm.boolean(o.success))}s(n,"is"),t.is=n;function r(i,o){return i===o?!0:i==null||o===null||o===void 0?!1:i.executionOrder===o.executionOrder&&i.success===o.success}s(r,"equals"),t.equals=r})(Pee||(sa.ExecutionSummary=Pee={}));var jF;(function(t){function e(o,a){return{kind:o,document:a}}s(e,"create"),t.create=e;function n(o){let a=o;return gm.objectLiteral(a)&&Bee.is(a.kind)&&KB.DocumentUri.is(a.document)&&(a.metadata===void 0||gm.objectLiteral(a.metadata))}s(n,"is"),t.is=n;function r(o,a){let l=new Set;return o.document!==a.document&&l.add("document"),o.kind!==a.kind&&l.add("kind"),o.executionSummary!==a.executionSummary&&l.add("executionSummary"),(o.metadata!==void 0||a.metadata!==void 0)&&!i(o.metadata,a.metadata)&&l.add("metadata"),(o.executionSummary!==void 0||a.executionSummary!==void 0)&&!Pee.equals(o.executionSummary,a.executionSummary)&&l.add("executionSummary"),l}s(r,"diff"),t.diff=r;function i(o,a){if(o===a)return!0;if(o==null||a===null||a===void 0||typeof o!=typeof a||typeof o!="object")return!1;let l=Array.isArray(o),c=Array.isArray(a);if(l!==c)return!1;if(l&&c){if(o.length!==a.length)return!1;for(let u=0;u<o.length;u++)if(!i(o[u],a[u]))return!1}if(gm.objectLiteral(o)&&gm.objectLiteral(a)){let u=Object.keys(o),d=Object.keys(a);if(u.length!==d.length||(u.sort(),d.sort(),!i(u,d)))return!1;for(let p=0;p<u.length;p++){let m=u[p];if(!i(o[m],a[m]))return!1}}return!0}s(i,"equalsMetadata")})(jF||(sa.NotebookCell=jF={}));var vbe;(function(t){function e(r,i,o,a){return{uri:r,notebookType:i,version:o,cells:a}}s(e,"create"),t.create=e;function n(r){let i=r;return gm.objectLiteral(i)&&gm.string(i.uri)&&KB.integer.is(i.version)&&gm.typedArray(i.cells,jF.is)}s(n,"is"),t.is=n})(vbe||(sa.NotebookDocument=vbe={}));var wS;(function(t){t.method="notebookDocument/sync",t.messageDirection=pg.MessageDirection.clientToServer,t.type=new pg.RegistrationType(t.method)})(wS||(sa.NotebookDocumentSyncRegistrationType=wS={}));var bbe;(function(t){t.method="notebookDocument/didOpen",t.messageDirection=pg.MessageDirection.clientToServer,t.type=new pg.ProtocolNotificationType(t.method),t.registrationMethod=wS.method})(bbe||(sa.DidOpenNotebookDocumentNotification=bbe={}));var Ebe;(function(t){function e(r){let i=r;return gm.objectLiteral(i)&&KB.uinteger.is(i.start)&&KB.uinteger.is(i.deleteCount)&&(i.cells===void 0||gm.typedArray(i.cells,jF.is))}s(e,"is"),t.is=e;function n(r,i,o){let a={start:r,deleteCount:i};return o!==void 0&&(a.cells=o),a}s(n,"create"),t.create=n})(Ebe||(sa.NotebookCellArrayChange=Ebe={}));var Ibe;(function(t){t.method="notebookDocument/didChange",t.messageDirection=pg.MessageDirection.clientToServer,t.type=new pg.ProtocolNotificationType(t.method),t.registrationMethod=wS.method})(Ibe||(sa.DidChangeNotebookDocumentNotification=Ibe={}));var Tbe;(function(t){t.method="notebookDocument/didSave",t.messageDirection=pg.MessageDirection.clientToServer,t.type=new pg.ProtocolNotificationType(t.method),t.registrationMethod=wS.method})(Tbe||(sa.DidSaveNotebookDocumentNotification=Tbe={}));var wbe;(function(t){t.method="notebookDocument/didClose",t.messageDirection=pg.MessageDirection.clientToServer,t.type=new pg.ProtocolNotificationType(t.method),t.registrationMethod=wS.method})(wbe||(sa.DidCloseNotebookDocumentNotification=wbe={}))});var kbe=H(VF=>{"use strict";f();Object.defineProperty(VF,"__esModule",{value:!0});VF.InlineCompletionRequest=void 0;var Sbe=Fs(),Rbe;(function(t){t.method="textDocument/inlineCompletion",t.messageDirection=Sbe.MessageDirection.clientToServer,t.type=new Sbe.ProtocolRequestType(t.method)})(Rbe||(VF.InlineCompletionRequest=Rbe={}))});var HEe=H(xe=>{"use strict";f();Object.defineProperty(xe,"__esModule",{value:!0});xe.WorkspaceSymbolRequest=xe.CodeActionResolveRequest=xe.CodeActionRequest=xe.DocumentSymbolRequest=xe.DocumentHighlightRequest=xe.ReferencesRequest=xe.DefinitionRequest=xe.SignatureHelpRequest=xe.SignatureHelpTriggerKind=xe.HoverRequest=xe.CompletionResolveRequest=xe.CompletionRequest=xe.CompletionTriggerKind=xe.PublishDiagnosticsNotification=xe.WatchKind=xe.RelativePattern=xe.FileChangeType=xe.DidChangeWatchedFilesNotification=xe.WillSaveTextDocumentWaitUntilRequest=xe.WillSaveTextDocumentNotification=xe.TextDocumentSaveReason=xe.DidSaveTextDocumentNotification=xe.DidCloseTextDocumentNotification=xe.DidChangeTextDocumentNotification=xe.TextDocumentContentChangeEvent=xe.DidOpenTextDocumentNotification=xe.TextDocumentSyncKind=xe.TelemetryEventNotification=xe.LogMessageNotification=xe.ShowMessageRequest=xe.ShowMessageNotification=xe.MessageType=xe.DidChangeConfigurationNotification=xe.ExitNotification=xe.ShutdownRequest=xe.InitializedNotification=xe.InitializeErrorCodes=xe.InitializeRequest=xe.WorkDoneProgressOptions=xe.TextDocumentRegistrationOptions=xe.StaticRegistrationOptions=xe.PositionEncodingKind=xe.FailureHandlingKind=xe.ResourceOperationKind=xe.UnregistrationRequest=xe.RegistrationRequest=xe.DocumentSelector=xe.NotebookCellTextDocumentFilter=xe.NotebookDocumentFilter=xe.TextDocumentFilter=void 0;xe.MonikerRequest=xe.MonikerKind=xe.UniquenessLevel=xe.WillDeleteFilesRequest=xe.DidDeleteFilesNotification=xe.WillRenameFilesRequest=xe.DidRenameFilesNotification=xe.WillCreateFilesRequest=xe.DidCreateFilesNotification=xe.FileOperationPatternKind=xe.LinkedEditingRangeRequest=xe.ShowDocumentRequest=xe.SemanticTokensRegistrationType=xe.SemanticTokensRefreshRequest=xe.SemanticTokensRangeRequest=xe.SemanticTokensDeltaRequest=xe.SemanticTokensRequest=xe.TokenFormat=xe.CallHierarchyPrepareRequest=xe.CallHierarchyOutgoingCallsRequest=xe.CallHierarchyIncomingCallsRequest=xe.WorkDoneProgressCancelNotification=xe.WorkDoneProgressCreateRequest=xe.WorkDoneProgress=xe.SelectionRangeRequest=xe.DeclarationRequest=xe.FoldingRangeRefreshRequest=xe.FoldingRangeRequest=xe.ColorPresentationRequest=xe.DocumentColorRequest=xe.ConfigurationRequest=xe.DidChangeWorkspaceFoldersNotification=xe.WorkspaceFoldersRequest=xe.TypeDefinitionRequest=xe.ImplementationRequest=xe.ApplyWorkspaceEditRequest=xe.ExecuteCommandRequest=xe.PrepareRenameRequest=xe.RenameRequest=xe.PrepareSupportDefaultBehavior=xe.DocumentOnTypeFormattingRequest=xe.DocumentRangesFormattingRequest=xe.DocumentRangeFormattingRequest=xe.DocumentFormattingRequest=xe.DocumentLinkResolveRequest=xe.DocumentLinkRequest=xe.CodeLensRefreshRequest=xe.CodeLensResolveRequest=xe.CodeLensRequest=xe.WorkspaceSymbolResolveRequest=void 0;xe.InlineCompletionRequest=xe.DidCloseNotebookDocumentNotification=xe.DidSaveNotebookDocumentNotification=xe.DidChangeNotebookDocumentNotification=xe.NotebookCellArrayChange=xe.DidOpenNotebookDocumentNotification=xe.NotebookDocumentSyncRegistrationType=xe.NotebookDocument=xe.NotebookCell=xe.ExecutionSummary=xe.NotebookCellKind=xe.DiagnosticRefreshRequest=xe.WorkspaceDiagnosticRequest=xe.DocumentDiagnosticRequest=xe.DocumentDiagnosticReportKind=xe.DiagnosticServerCancellationData=xe.InlayHintRefreshRequest=xe.InlayHintResolveRequest=xe.InlayHintRequest=xe.InlineValueRefreshRequest=xe.InlineValueRequest=xe.TypeHierarchySupertypesRequest=xe.TypeHierarchySubtypesRequest=xe.TypeHierarchyPrepareRequest=void 0;var Mt=Fs(),Bbe=BF(),Dl=PF(),Gst=nve();Object.defineProperty(xe,"ImplementationRequest",{enumerable:!0,get:s(function(){return Gst.ImplementationRequest},"get")});var jst=ove();Object.defineProperty(xe,"TypeDefinitionRequest",{enumerable:!0,get:s(function(){return jst.TypeDefinitionRequest},"get")});var OEe=lve();Object.defineProperty(xe,"WorkspaceFoldersRequest",{enumerable:!0,get:s(function(){return OEe.WorkspaceFoldersRequest},"get")});Object.defineProperty(xe,"DidChangeWorkspaceFoldersNotification",{enumerable:!0,get:s(function(){return OEe.DidChangeWorkspaceFoldersNotification},"get")});var Vst=dve();Object.defineProperty(xe,"ConfigurationRequest",{enumerable:!0,get:s(function(){return Vst.ConfigurationRequest},"get")});var UEe=mve();Object.defineProperty(xe,"DocumentColorRequest",{enumerable:!0,get:s(function(){return UEe.DocumentColorRequest},"get")});Object.defineProperty(xe,"ColorPresentationRequest",{enumerable:!0,get:s(function(){return UEe.ColorPresentationRequest},"get")});var qEe=Ave();Object.defineProperty(xe,"FoldingRangeRequest",{enumerable:!0,get:s(function(){return qEe.FoldingRangeRequest},"get")});Object.defineProperty(xe,"FoldingRangeRefreshRequest",{enumerable:!0,get:s(function(){return qEe.FoldingRangeRefreshRequest},"get")});var $st=xve();Object.defineProperty(xe,"DeclarationRequest",{enumerable:!0,get:s(function(){return $st.DeclarationRequest},"get")});var zst=Eve();Object.defineProperty(xe,"SelectionRangeRequest",{enumerable:!0,get:s(function(){return zst.SelectionRangeRequest},"get")});var Mee=_ve();Object.defineProperty(xe,"WorkDoneProgress",{enumerable:!0,get:s(function(){return Mee.WorkDoneProgress},"get")});Object.defineProperty(xe,"WorkDoneProgressCreateRequest",{enumerable:!0,get:s(function(){return Mee.WorkDoneProgressCreateRequest},"get")});Object.defineProperty(xe,"WorkDoneProgressCancelNotification",{enumerable:!0,get:s(function(){return Mee.WorkDoneProgressCancelNotification},"get")});var Qee=Bve();Object.defineProperty(xe,"CallHierarchyIncomingCallsRequest",{enumerable:!0,get:s(function(){return Qee.CallHierarchyIncomingCallsRequest},"get")});Object.defineProperty(xe,"CallHierarchyOutgoingCallsRequest",{enumerable:!0,get:s(function(){return Qee.CallHierarchyOutgoingCallsRequest},"get")});Object.defineProperty(xe,"CallHierarchyPrepareRequest",{enumerable:!0,get:s(function(){return Qee.CallHierarchyPrepareRequest},"get")});var _S=Mve();Object.defineProperty(xe,"TokenFormat",{enumerable:!0,get:s(function(){return _S.TokenFormat},"get")});Object.defineProperty(xe,"SemanticTokensRequest",{enumerable:!0,get:s(function(){return _S.SemanticTokensRequest},"get")});Object.defineProperty(xe,"SemanticTokensDeltaRequest",{enumerable:!0,get:s(function(){return _S.SemanticTokensDeltaRequest},"get")});Object.defineProperty(xe,"SemanticTokensRangeRequest",{enumerable:!0,get:s(function(){return _S.SemanticTokensRangeRequest},"get")});Object.defineProperty(xe,"SemanticTokensRefreshRequest",{enumerable:!0,get:s(function(){return _S.SemanticTokensRefreshRequest},"get")});Object.defineProperty(xe,"SemanticTokensRegistrationType",{enumerable:!0,get:s(function(){return _S.SemanticTokensRegistrationType},"get")});var Yst=Uve();Object.defineProperty(xe,"ShowDocumentRequest",{enumerable:!0,get:s(function(){return Yst.ShowDocumentRequest},"get")});var Kst=Hve();Object.defineProperty(xe,"LinkedEditingRangeRequest",{enumerable:!0,get:s(function(){return Kst.LinkedEditingRangeRequest},"get")});var AI=Jve();Object.defineProperty(xe,"FileOperationPatternKind",{enumerable:!0,get:s(function(){return AI.FileOperationPatternKind},"get")});Object.defineProperty(xe,"DidCreateFilesNotification",{enumerable:!0,get:s(function(){return AI.DidCreateFilesNotification},"get")});Object.defineProperty(xe,"WillCreateFilesRequest",{enumerable:!0,get:s(function(){return AI.WillCreateFilesRequest},"get")});Object.defineProperty(xe,"DidRenameFilesNotification",{enumerable:!0,get:s(function(){return AI.DidRenameFilesNotification},"get")});Object.defineProperty(xe,"WillRenameFilesRequest",{enumerable:!0,get:s(function(){return AI.WillRenameFilesRequest},"get")});Object.defineProperty(xe,"DidDeleteFilesNotification",{enumerable:!0,get:s(function(){return AI.DidDeleteFilesNotification},"get")});Object.defineProperty(xe,"WillDeleteFilesRequest",{enumerable:!0,get:s(function(){return AI.WillDeleteFilesRequest},"get")});var Oee=nbe();Object.defineProperty(xe,"UniquenessLevel",{enumerable:!0,get:s(function(){return Oee.UniquenessLevel},"get")});Object.defineProperty(xe,"MonikerKind",{enumerable:!0,get:s(function(){return Oee.MonikerKind},"get")});Object.defineProperty(xe,"MonikerRequest",{enumerable:!0,get:s(function(){return Oee.MonikerRequest},"get")});var Uee=sbe();Object.defineProperty(xe,"TypeHierarchyPrepareRequest",{enumerable:!0,get:s(function(){return Uee.TypeHierarchyPrepareRequest},"get")});Object.defineProperty(xe,"TypeHierarchySubtypesRequest",{enumerable:!0,get:s(function(){return Uee.TypeHierarchySubtypesRequest},"get")});Object.defineProperty(xe,"TypeHierarchySupertypesRequest",{enumerable:!0,get:s(function(){return Uee.TypeHierarchySupertypesRequest},"get")});var WEe=cbe();Object.defineProperty(xe,"InlineValueRequest",{enumerable:!0,get:s(function(){return WEe.InlineValueRequest},"get")});Object.defineProperty(xe,"InlineValueRefreshRequest",{enumerable:!0,get:s(function(){return WEe.InlineValueRefreshRequest},"get")});var qee=pbe();Object.defineProperty(xe,"InlayHintRequest",{enumerable:!0,get:s(function(){return qee.InlayHintRequest},"get")});Object.defineProperty(xe,"InlayHintResolveRequest",{enumerable:!0,get:s(function(){return qee.InlayHintResolveRequest},"get")});Object.defineProperty(xe,"InlayHintRefreshRequest",{enumerable:!0,get:s(function(){return qee.InlayHintRefreshRequest},"get")});var JB=xbe();Object.defineProperty(xe,"DiagnosticServerCancellationData",{enumerable:!0,get:s(function(){return JB.DiagnosticServerCancellationData},"get")});Object.defineProperty(xe,"DocumentDiagnosticReportKind",{enumerable:!0,get:s(function(){return JB.DocumentDiagnosticReportKind},"get")});Object.defineProperty(xe,"DocumentDiagnosticRequest",{enumerable:!0,get:s(function(){return JB.DocumentDiagnosticRequest},"get")});Object.defineProperty(xe,"WorkspaceDiagnosticRequest",{enumerable:!0,get:s(function(){return JB.WorkspaceDiagnosticRequest},"get")});Object.defineProperty(xe,"DiagnosticRefreshRequest",{enumerable:!0,get:s(function(){return JB.DiagnosticRefreshRequest},"get")});var mg=_be();Object.defineProperty(xe,"NotebookCellKind",{enumerable:!0,get:s(function(){return mg.NotebookCellKind},"get")});Object.defineProperty(xe,"ExecutionSummary",{enumerable:!0,get:s(function(){return mg.ExecutionSummary},"get")});Object.defineProperty(xe,"NotebookCell",{enumerable:!0,get:s(function(){return mg.NotebookCell},"get")});Object.defineProperty(xe,"NotebookDocument",{enumerable:!0,get:s(function(){return mg.NotebookDocument},"get")});Object.defineProperty(xe,"NotebookDocumentSyncRegistrationType",{enumerable:!0,get:s(function(){return mg.NotebookDocumentSyncRegistrationType},"get")});Object.defineProperty(xe,"DidOpenNotebookDocumentNotification",{enumerable:!0,get:s(function(){return mg.DidOpenNotebookDocumentNotification},"get")});Object.defineProperty(xe,"NotebookCellArrayChange",{enumerable:!0,get:s(function(){return mg.NotebookCellArrayChange},"get")});Object.defineProperty(xe,"DidChangeNotebookDocumentNotification",{enumerable:!0,get:s(function(){return mg.DidChangeNotebookDocumentNotification},"get")});Object.defineProperty(xe,"DidSaveNotebookDocumentNotification",{enumerable:!0,get:s(function(){return mg.DidSaveNotebookDocumentNotification},"get")});Object.defineProperty(xe,"DidCloseNotebookDocumentNotification",{enumerable:!0,get:s(function(){return mg.DidCloseNotebookDocumentNotification},"get")});var Jst=kbe();Object.defineProperty(xe,"InlineCompletionRequest",{enumerable:!0,get:s(function(){return Jst.InlineCompletionRequest},"get")});var Dee;(function(t){function e(n){let r=n;return Dl.string(r)||Dl.string(r.language)||Dl.string(r.scheme)||Dl.string(r.pattern)}s(e,"is"),t.is=e})(Dee||(xe.TextDocumentFilter=Dee={}));var Nee;(function(t){function e(n){let r=n;return Dl.objectLiteral(r)&&(Dl.string(r.notebookType)||Dl.string(r.scheme)||Dl.string(r.pattern))}s(e,"is"),t.is=e})(Nee||(xe.NotebookDocumentFilter=Nee={}));var Lee;(function(t){function e(n){let r=n;return Dl.objectLiteral(r)&&(Dl.string(r.notebook)||Nee.is(r.notebook))&&(r.language===void 0||Dl.string(r.language))}s(e,"is"),t.is=e})(Lee||(xe.NotebookCellTextDocumentFilter=Lee={}));var Fee;(function(t){function e(n){if(!Array.isArray(n))return!1;for(let r of n)if(!Dl.string(r)&&!Dee.is(r)&&!Lee.is(r))return!1;return!0}s(e,"is"),t.is=e})(Fee||(xe.DocumentSelector=Fee={}));var Pbe;(function(t){t.method="client/registerCapability",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolRequestType(t.method)})(Pbe||(xe.RegistrationRequest=Pbe={}));var Dbe;(function(t){t.method="client/unregisterCapability",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolRequestType(t.method)})(Dbe||(xe.UnregistrationRequest=Dbe={}));var Nbe;(function(t){t.Create="create",t.Rename="rename",t.Delete="delete"})(Nbe||(xe.ResourceOperationKind=Nbe={}));var Lbe;(function(t){t.Abort="abort",t.Transactional="transactional",t.TextOnlyTransactional="textOnlyTransactional",t.Undo="undo"})(Lbe||(xe.FailureHandlingKind=Lbe={}));var Fbe;(function(t){t.UTF8="utf-8",t.UTF16="utf-16",t.UTF32="utf-32"})(Fbe||(xe.PositionEncodingKind=Fbe={}));var Mbe;(function(t){function e(n){let r=n;return r&&Dl.string(r.id)&&r.id.length>0}s(e,"hasId"),t.hasId=e})(Mbe||(xe.StaticRegistrationOptions=Mbe={}));var Qbe;(function(t){function e(n){let r=n;return r&&(r.documentSelector===null||Fee.is(r.documentSelector))}s(e,"is"),t.is=e})(Qbe||(xe.TextDocumentRegistrationOptions=Qbe={}));var Obe;(function(t){function e(r){let i=r;return Dl.objectLiteral(i)&&(i.workDoneProgress===void 0||Dl.boolean(i.workDoneProgress))}s(e,"is"),t.is=e;function n(r){let i=r;return i&&Dl.boolean(i.workDoneProgress)}s(n,"hasWorkDoneProgress"),t.hasWorkDoneProgress=n})(Obe||(xe.WorkDoneProgressOptions=Obe={}));var Ube;(function(t){t.method="initialize",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(Ube||(xe.InitializeRequest=Ube={}));var qbe;(function(t){t.unknownProtocolVersion=1})(qbe||(xe.InitializeErrorCodes=qbe={}));var Wbe;(function(t){t.method="initialized",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(Wbe||(xe.InitializedNotification=Wbe={}));var Hbe;(function(t){t.method="shutdown",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType0(t.method)})(Hbe||(xe.ShutdownRequest=Hbe={}));var Gbe;(function(t){t.method="exit",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType0(t.method)})(Gbe||(xe.ExitNotification=Gbe={}));var jbe;(function(t){t.method="workspace/didChangeConfiguration",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(jbe||(xe.DidChangeConfigurationNotification=jbe={}));var Vbe;(function(t){t.Error=1,t.Warning=2,t.Info=3,t.Log=4,t.Debug=5})(Vbe||(xe.MessageType=Vbe={}));var $be;(function(t){t.method="window/showMessage",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolNotificationType(t.method)})($be||(xe.ShowMessageNotification=$be={}));var zbe;(function(t){t.method="window/showMessageRequest",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolRequestType(t.method)})(zbe||(xe.ShowMessageRequest=zbe={}));var Ybe;(function(t){t.method="window/logMessage",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolNotificationType(t.method)})(Ybe||(xe.LogMessageNotification=Ybe={}));var Kbe;(function(t){t.method="telemetry/event",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolNotificationType(t.method)})(Kbe||(xe.TelemetryEventNotification=Kbe={}));var Jbe;(function(t){t.None=0,t.Full=1,t.Incremental=2})(Jbe||(xe.TextDocumentSyncKind=Jbe={}));var Xbe;(function(t){t.method="textDocument/didOpen",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(Xbe||(xe.DidOpenTextDocumentNotification=Xbe={}));var Zbe;(function(t){function e(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range!==void 0&&(i.rangeLength===void 0||typeof i.rangeLength=="number")}s(e,"isIncremental"),t.isIncremental=e;function n(r){let i=r;return i!=null&&typeof i.text=="string"&&i.range===void 0&&i.rangeLength===void 0}s(n,"isFull"),t.isFull=n})(Zbe||(xe.TextDocumentContentChangeEvent=Zbe={}));var eEe;(function(t){t.method="textDocument/didChange",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(eEe||(xe.DidChangeTextDocumentNotification=eEe={}));var tEe;(function(t){t.method="textDocument/didClose",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(tEe||(xe.DidCloseTextDocumentNotification=tEe={}));var nEe;(function(t){t.method="textDocument/didSave",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(nEe||(xe.DidSaveTextDocumentNotification=nEe={}));var rEe;(function(t){t.Manual=1,t.AfterDelay=2,t.FocusOut=3})(rEe||(xe.TextDocumentSaveReason=rEe={}));var iEe;(function(t){t.method="textDocument/willSave",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(iEe||(xe.WillSaveTextDocumentNotification=iEe={}));var oEe;(function(t){t.method="textDocument/willSaveWaitUntil",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(oEe||(xe.WillSaveTextDocumentWaitUntilRequest=oEe={}));var sEe;(function(t){t.method="workspace/didChangeWatchedFiles",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolNotificationType(t.method)})(sEe||(xe.DidChangeWatchedFilesNotification=sEe={}));var aEe;(function(t){t.Created=1,t.Changed=2,t.Deleted=3})(aEe||(xe.FileChangeType=aEe={}));var lEe;(function(t){function e(n){let r=n;return Dl.objectLiteral(r)&&(Bbe.URI.is(r.baseUri)||Bbe.WorkspaceFolder.is(r.baseUri))&&Dl.string(r.pattern)}s(e,"is"),t.is=e})(lEe||(xe.RelativePattern=lEe={}));var cEe;(function(t){t.Create=1,t.Change=2,t.Delete=4})(cEe||(xe.WatchKind=cEe={}));var uEe;(function(t){t.method="textDocument/publishDiagnostics",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolNotificationType(t.method)})(uEe||(xe.PublishDiagnosticsNotification=uEe={}));var dEe;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.TriggerForIncompleteCompletions=3})(dEe||(xe.CompletionTriggerKind=dEe={}));var fEe;(function(t){t.method="textDocument/completion",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(fEe||(xe.CompletionRequest=fEe={}));var pEe;(function(t){t.method="completionItem/resolve",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(pEe||(xe.CompletionResolveRequest=pEe={}));var mEe;(function(t){t.method="textDocument/hover",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(mEe||(xe.HoverRequest=mEe={}));var hEe;(function(t){t.Invoked=1,t.TriggerCharacter=2,t.ContentChange=3})(hEe||(xe.SignatureHelpTriggerKind=hEe={}));var gEe;(function(t){t.method="textDocument/signatureHelp",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(gEe||(xe.SignatureHelpRequest=gEe={}));var AEe;(function(t){t.method="textDocument/definition",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(AEe||(xe.DefinitionRequest=AEe={}));var yEe;(function(t){t.method="textDocument/references",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(yEe||(xe.ReferencesRequest=yEe={}));var CEe;(function(t){t.method="textDocument/documentHighlight",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(CEe||(xe.DocumentHighlightRequest=CEe={}));var xEe;(function(t){t.method="textDocument/documentSymbol",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(xEe||(xe.DocumentSymbolRequest=xEe={}));var vEe;(function(t){t.method="textDocument/codeAction",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(vEe||(xe.CodeActionRequest=vEe={}));var bEe;(function(t){t.method="codeAction/resolve",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(bEe||(xe.CodeActionResolveRequest=bEe={}));var EEe;(function(t){t.method="workspace/symbol",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(EEe||(xe.WorkspaceSymbolRequest=EEe={}));var IEe;(function(t){t.method="workspaceSymbol/resolve",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(IEe||(xe.WorkspaceSymbolResolveRequest=IEe={}));var TEe;(function(t){t.method="textDocument/codeLens",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(TEe||(xe.CodeLensRequest=TEe={}));var wEe;(function(t){t.method="codeLens/resolve",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(wEe||(xe.CodeLensResolveRequest=wEe={}));var _Ee;(function(t){t.method="workspace/codeLens/refresh",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolRequestType0(t.method)})(_Ee||(xe.CodeLensRefreshRequest=_Ee={}));var SEe;(function(t){t.method="textDocument/documentLink",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(SEe||(xe.DocumentLinkRequest=SEe={}));var REe;(function(t){t.method="documentLink/resolve",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(REe||(xe.DocumentLinkResolveRequest=REe={}));var kEe;(function(t){t.method="textDocument/formatting",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(kEe||(xe.DocumentFormattingRequest=kEe={}));var BEe;(function(t){t.method="textDocument/rangeFormatting",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(BEe||(xe.DocumentRangeFormattingRequest=BEe={}));var PEe;(function(t){t.method="textDocument/rangesFormatting",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(PEe||(xe.DocumentRangesFormattingRequest=PEe={}));var DEe;(function(t){t.method="textDocument/onTypeFormatting",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(DEe||(xe.DocumentOnTypeFormattingRequest=DEe={}));var NEe;(function(t){t.Identifier=1})(NEe||(xe.PrepareSupportDefaultBehavior=NEe={}));var LEe;(function(t){t.method="textDocument/rename",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(LEe||(xe.RenameRequest=LEe={}));var FEe;(function(t){t.method="textDocument/prepareRename",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(FEe||(xe.PrepareRenameRequest=FEe={}));var MEe;(function(t){t.method="workspace/executeCommand",t.messageDirection=Mt.MessageDirection.clientToServer,t.type=new Mt.ProtocolRequestType(t.method)})(MEe||(xe.ExecuteCommandRequest=MEe={}));var QEe;(function(t){t.method="workspace/applyEdit",t.messageDirection=Mt.MessageDirection.serverToClient,t.type=new Mt.ProtocolRequestType("workspace/applyEdit")})(QEe||(xe.ApplyWorkspaceEditRequest=QEe={}))});var jEe=H($F=>{"use strict";f();Object.defineProperty($F,"__esModule",{value:!0});$F.createProtocolConnection=void 0;var GEe=gI();function Xst(t,e,n,r){return GEe.ConnectionStrategy.is(r)&&(r={connectionStrategy:r}),(0,GEe.createMessageConnection)(t,e,n,r)}s(Xst,"createProtocolConnection");$F.createProtocolConnection=Xst});var $Ee=H(fd=>{"use strict";f();var Zst=fd&&fd.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[n]},"get")}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),zF=fd&&fd.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Zst(e,t,n)};Object.defineProperty(fd,"__esModule",{value:!0});fd.LSPErrorCodes=fd.createProtocolConnection=void 0;zF(gI(),fd);zF(BF(),fd);zF(Fs(),fd);zF(HEe(),fd);var eat=jEe();Object.defineProperty(fd,"createProtocolConnection",{enumerable:!0,get:s(function(){return eat.createProtocolConnection},"get")});var VEe;(function(t){t.lspReservedErrorRangeStart=-32899,t.RequestFailed=-32803,t.ServerCancelled=-32802,t.ContentModified=-32801,t.RequestCancelled=-32800,t.lspReservedErrorRangeEnd=-32800})(VEe||(fd.LSPErrorCodes=VEe={}))});var ri=H(hg=>{"use strict";f();var tat=hg&&hg.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[n]},"get")}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),zEe=hg&&hg.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&tat(e,t,n)};Object.defineProperty(hg,"__esModule",{value:!0});hg.createProtocolConnection=void 0;var nat=Tee();zEe(Tee(),hg);zEe($Ee(),hg);function rat(t,e,n,r){return(0,nat.createMessageConnection)(t,e,n,r)}s(rat,"createProtocolConnection");hg.createProtocolConnection=rat});var QIe=H((cM,MIe)=>{f();(function(t,e){typeof cM=="object"&&typeof MIe<"u"?e(cM):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(cM,function(t){"use strict";function e(w,R){return w||R}s(e,"_pureAssign");function n(w,R){return w[R]}s(n,"_pureRef");var r=void 0,i=null,o="",a="function",l="object",c="prototype",u="__proto__",d="undefined",p="constructor",m="Symbol",h="_polyfill",g="length",y="name",v="call",b="toString",E=e(Object),_=n(E,c),k=e(String),P=n(k,c),N=e(Math),U=e(Array),ne=n(U,c),he=n(ne,"slice");function ae(w,R){try{return{v:w.apply(this,R)}}catch(B){return{e:B}}}s(ae,"safe");function G(w){return function(R){return typeof R===w}}s(G,"_createIs");function W(w){var R="[object "+w+"]";return function(B){return!!(B&&ue(B)===R)}}s(W,"_createObjIs");function ue(w){return _[b].call(w)}s(ue,"objToString");function ie(w){return typeof w===d||w===d}s(ie,"isUndefined");function V(w){return!Y(w)}s(V,"isStrictUndefined");function O(w){return w===i||ie(w)}s(O,"isNullOrUndefined");function Y(w){return!!w||w!==r}s(Y,"isDefined");var te=G("string"),pe=G(a);function ee(w){return!w&&O(w)?!1:!!w&&typeof w===l}s(ee,"isObject");var ce=n(U,"isArray"),me=W("Error"),Ne=n(E,"getOwnPropertyDescriptor");function Se(w,R){return!!w&&_.hasOwnProperty[v](w,R)}s(Se,"objHasOwnProperty");var Je=e(n(E,"hasOwn"),Me);function Me(w,R){return Se(w,R)||!!Ne(w,R)}s(Me,"polyObjHasOwn");function ft(w,R,B){if(w&&ee(w)){for(var F in w)if(Je(w,F)&&R[v](B||w,F,w[F])===-1)break}}s(ft,"objForEachKey");var It={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function yt(w){var R={};if(R[It.c]=!0,R[It.e]=!0,w.l){R.get=function(){return w.l.v};var B=Ne(w.l,"v");B&&B.set&&(R.set=function(F){w.l.v=F})}return ft(w,function(F,oe){R[It[F]]=V(oe)?R[It[F]]:oe}),R}s(yt,"_createProp");var vt=n(E,"defineProperty");function le(w,R,B){return vt(w,R,yt(B))}s(le,"objDefine");function Oe(w,R,B,F,oe){var Ee={};return ft(w,function(we,Qe){ye(Ee,we,R?Qe:we),ye(Ee,Qe,B?Qe:we)}),F?F(Ee):Ee}s(Oe,"_createKeyValueMap");function ye(w,R,B,F){vt(w,R,{value:B,enumerable:!0,writable:!1})}s(ye,"_assignMapValue");var tt=e(k),X="[object Error]";function re(w,R){var B=o,F=_[b][v](w);F===X&&(w={stack:tt(w.stack),message:tt(w.message),name:tt(w.name)});try{B=JSON.stringify(w,i,R?typeof R=="number"?R:4:r),B=(B?B.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||tt(w)}catch(oe){B=" - "+re(oe,R)}return F+": "+B}s(re,"dumpObj");function We(w){throw new Error(w)}s(We,"throwError");function De(w){throw new TypeError(w)}s(De,"throwTypeError");var be=n(E,"freeze");function ze(w){return w}s(ze,"_doNothing");function it(w){return w[u]||i}s(it,"_getProto");var ht=n(E,"assign"),Ot=n(E,"keys"),cn=e(be,ze),Lt=e(n(E,"getPrototypeOf"),it);function Wn(w){return Oe(w,1,0,cn)}s(Wn,"createEnum");function zn(w){var R={};return ft(w,function(B,F){ye(R,B,F[1]),ye(R,F[0],F[1])}),cn(R)}s(zn,"createSimpleMap");function fr(w){return zn(w)}s(fr,"createTypeMap");var Ae="__tsUtils$gblCfg",He;function ut(){var w;return typeof globalThis!==d&&(w=globalThis),!w&&typeof self!==d&&(w=self),!w&&typeof window!==d&&(w=window),!w&&typeof global!==d&&(w=global),w}s(ut,"_getGlobalValue");function At(){if(!He){var w=ae(ut).v||{};He=w[Ae]=w[Ae]||{}}return He}s(At,"_getGlobalConfig");var Xt=Ht;function Ht(w,R,B){var F=R?R[w]:i;return function(oe){var Ee=(oe?oe[w]:i)||F;if(Ee||B){var we=arguments;return(Ee||B).apply(oe,Ee?he[v](we,1):we)}De('"'+tt(w)+'" not defined for '+re(oe))}}s(Ht,"_unwrapFunctionWithPoly");var yn=n(N,"min"),vn=n(N,"max"),jt=Xt("slice",P),nn=Xt("substring",P),Jt=Ht("substr",P,Tn);function Tn(w,R,B){return O(w)&&De("Invalid "+re(w)),B<0?o:(R=R||0,R<0&&(R=vn(R+w[g],0)),ie(B)?jt(w,R):jt(w,R,R+B))}s(Tn,"polyStrSubstr");function Fn(w,R){return nn(w,0,R)}s(Fn,"strLeft");var Yn="_urid",Ur;function Yr(){if(!Ur){var w=At();Ur=w.gblSym=w.gblSym||{k:{},s:{}}}return Ur}s(Yr,"_globalSymbolRegistry");function Fr(w){var R={description:tt(w),toString:s(function(){return m+"("+w+")"},"toString")};return R[h]=!0,R}s(Fr,"polyNewSymbol");function jr(w){var R=Yr();if(!Je(R.k,w)){var B=Fr(w),F=Ot(R.s).length;B[Yn]=function(){return F+"_"+B[b]()},R.k[w]=B,R.s[B[Yn]()]=tt(w)}return R.k[w]}s(jr,"polySymbolFor");var tr;function Vr(){tr=At()}s(Vr,"_initTestHooks");function _e(w){return vt({toJSON:s(function(){return w},"toJSON")},"v",{value:w})}s(_e,"createCachedValue");var q="window",ge;function ve(w,R){var B;return function(){return!tr&&Vr(),(!B||tr.lzy)&&(B=_e(ae(w,R).v)),B.v}}s(ve,"_getGlobalInstFn");function Z(w){return!tr&&Vr(),(!ge||w===!1||tr.lzy)&&(ge=_e(ae(ut).v||i)),ge.v}s(Z,"getGlobal");function M(w,R){var B;if(!ge||R===!1?B=Z(R):B=ge.v,B&&B[w])return B[w];if(w===q)try{return window}catch{}return i}s(M,"getInst");var ke=ve(M,["document"]);function $e(){return!!qt()}s($e,"hasWindow");var qt=ve(M,[q]);function Sn(){return!!mn()}s(Sn,"hasNavigator");var mn=ve(M,["navigator"]),lr,pr;function bn(){return lr=_e(ae(M,[m]).v),lr}s(bn,"_initSymbol");function Gt(w){var R=(tr.lzy?0:lr)||bn();return R.v?R.v[w]:r}s(Gt,"_getSymbolKey");function Mr(w,R){!tr&&Vr();var B=(tr.lzy?0:lr)||bn();return B.v?B.v(w):R?i:Fr(w)}s(Mr,"newSymbol");function Ws(w){return!tr&&Vr(),pr=(tr.lzy?0:pr)||_e(ae(Gt,["for"]).v),(pr.v||jr)(w)}s(Ws,"symbolFor");function Lp(w,R,B){return w.apply(R,B)}s(Lp,"fnApply");function El(w,R,B){if(w)for(var F=w[g]>>>0,oe=0;oe<F&&!(oe in w&&R[v](B||w,w[oe],oe,w)===-1);oe++);}s(El,"arrForEach");var Fp=Xt("indexOf",ne),ef=Xt("map",ne),ra=Xt("reduce",ne),Ih=e(n(E,"create"),eC);function eC(w){if(!w)return{};var R=typeof w;R!==l&&R!==a&&De("Prototype must be an Object or function: "+re(w));function B(){}return s(B,"tempFunc"),B[c]=w,new B}s(eC,"polyObjCreate");var G3;function Mp(w,R){var B=E.setPrototypeOf||function(F,oe){var Ee;!G3&&(G3=_e((Ee={},Ee[u]=[],Ee instanceof Array))),G3.v?F[u]=oe:ft(oe,function(we,Qe){return F[we]=Qe})};return B(w,R)}s(Mp,"objSetPrototypeOf");function aK(w,R,B){ae(le,[R,y,{v:w,c:!0,e:!1}]),R=Mp(R,B);function F(){this[p]=R,ae(le,[this,y,{v:w,c:!0,e:!1}])}return s(F,"__"),R[c]=B===i?Ih(B):(F[c]=B[c],new F),R}s(aK,"_createCustomError");function Th(w,R){R&&(w[y]=R)}s(Th,"_setName");function lK(w,R,B){var F=B||Error,oe=F[c][y],Ee=Error.captureStackTrace;return aK(w,function(){var we=this,Qe=arguments;try{ae(Th,[F,w]);var Xe=Lp(F,we,he[v](Qe))||we;if(Xe!==we){var pt=Lt(we);pt!==Lt(Xe)&&Mp(Xe,pt)}return Ee&&Ee(Xe,we[p]),R&&R(Xe,Qe),Xe}finally{ae(Th,[F,oe])}},F)}s(lK,"createCustomError");function QA(){return(Date.now||j3)()}s(QA,"utcNow");function j3(){return new Date().getTime()}s(j3,"polyUtcNow");function fw(w){return s(function(B){return O(B)&&De("strTrim called ["+re(B)+"]"),B&&B.replace&&(B=B.replace(w,o)),B},"_doTrim")}s(fw,"_createTrimFn");var cK=fw(/^\s+|(?=\s)\s+$/g),kc=Ht("trim",P,cK),wh=n(N,"floor"),Zb,OA,eE;function _h(w){if(!w||typeof w!==l)return!1;eE||(eE=$e()?qt():!0);var R=!1;if(w!==eE){OA||(Zb=Function[c][b],OA=Zb[v](E));try{var B=Lt(w);R=!B,R||(Se(B,p)&&(B=B[p]),R=!!(B&&typeof B===a&&Zb[v](B)===OA))}catch{}}return R}s(_h,"isPlainObject");var pw;function tE(){return!tr&&Vr(),(!pw||tr.lzy)&&(pw=_e(ae(M,["performance"]).v)),pw.v}s(tE,"getPerformance");var V3=n(N,"round"),tC=Ht("endsWith",P,nC);function nC(w,R,B){te(w)||De("'"+re(w)+"' is not a string");var F=te(R)?R:tt(R),oe=!ie(B)&&B<w[g]?B:w[g];return nn(w,oe-F[g],oe)===F}s(nC,"polyStrEndsWith");var Un=Xt("indexOf",P),pu="ref",UA="unref",rC="hasRef",uK="enabled";function Sh(w,R,B){var F=!0,oe=w?R(i):i,Ee;function we(){return F=!1,oe&&oe[UA]&&oe[UA](),Ee}s(we,"_unref");function Qe(){oe&&B(oe),oe=i}s(Qe,"_cancel");function Xe(){return oe=R(oe),F||we(),Ee}s(Xe,"_refresh");function pt(on){!on&&oe&&Qe(),on&&!oe&&Xe()}return s(pt,"_setEnabled"),Ee={cancel:Qe,refresh:Xe},Ee[rC]=function(){return oe&&oe[rC]?oe[rC]():F},Ee[pu]=function(){return F=!0,oe&&oe[pu]&&oe[pu](),Ee},Ee[UA]=we,Ee=vt(Ee,uK,{get:s(function(){return!!oe},"get"),set:pt}),{h:Ee,dn:s(function(){oe=i},"dn")}}s(Sh,"_createTimerHandler");function dK(w,R,B){var F=ce(R),oe=F?R.length:0,Ee=(oe>0?R[0]:F?r:R)||setTimeout,we=(oe>1?R[1]:r)||clearTimeout,Qe=B[0];B[0]=function(){Xe.dn(),Lp(Qe,r,he[v](arguments))};var Xe=Sh(w,function(pt){if(pt){if(pt.refresh)return pt.refresh(),pt;Lp(we,r,[pt])}return Lp(Ee,r,B)},function(pt){Lp(we,r,[pt])});return Xe.h}s(dK,"_createTimeoutWith");function $3(w,R){return dK(!0,r,he[v](arguments))}s($3,"scheduleTimeout");var nE=Wn,fK=fr,rE="toLowerCase",Ma="length",Rh="warnToConsole",iE="throwInternal",nN="watch",pK="apply",ji="push",qA="splice",kh="logger",z3="cancel",oE="name",mu="unload",rN="version",iN="loggingLevelConsole",Y3="messageId",WA="message",K3="diagLog",oN="userAgent",J3="split",iC="replace",Bh="type",sN="evtName",mw="traceFlags",X3="getAttribute",hw;function mK(w,R){hw||(hw=lK("AggregationError",function(F,oe){oe[Ma]>1&&(F.errors=oe[1])}));var B=w||"One or more errors occurred.";throw El(R,function(F,oe){B+=`
`.concat(oe," > ").concat(re(F))}),new hw(B,R||[])}s(mK,"throwAggregationError");var hK="function",aN="object",gK="undefined",Qp="prototype",gw=Object,Z3=gw[Qp];(Z()||{}).Symbol,(Z()||{}).Reflect;var Aw="hasOwnProperty",AK=s(function(w){for(var R,B=1,F=arguments.length;B<F;B++){R=arguments[B];for(var oe in R)Z3[Aw].call(R,oe)&&(w[oe]=R[oe])}return w},"__objAssignFnImpl"),yw=ht||AK,Cw=s(function(w,R){return Cw=gw.setPrototypeOf||{__proto__:[]}instanceof Array&&function(B,F){B.__proto__=F}||function(B,F){for(var oe in F)F[Aw](oe)&&(B[oe]=F[oe])},Cw(w,R)},"extendStaticsFn");function Ph(w,R){typeof R!==hK&&R!==null&&De("Class extends value "+String(R)+" is not a constructor or null"),Cw(w,R);function B(){this.constructor=w}s(B,"__"),w[Qp]=R===null?Ih(R):(B[Qp]=R[Qp],new B)}s(Ph,"__extendsFn");var xw,HA="constructor",Yu="prototype",Ku="function",GA="_dynInstFuncs",oC="_isDynProxy",Dh="_dynClass",sC="_dynCls$",ek="_dynInstChk",jA=ek,aC="_dfOpts",tk="_unknown_",vw="__proto__",lC="_dyn"+vw,sE="__dynProto$Gbl",bw="_dynInstProto",cC="useBaseInst",uC="setInstFuncs",aE=Object,VA=aE.getPrototypeOf,dC=aE.getOwnPropertyNames,nk=Z(),Ew=nk[sE]||(nk[sE]={o:(xw={},xw[uC]=!0,xw[cC]=!0,xw),n:1e3});function fC(w){return w&&(w===aE[Yu]||w===Array[Yu])}s(fC,"_isObjectOrArrayPrototype");function pC(w){return fC(w)||w===Function[Yu]}s(pC,"_isObjectArrayOrFunctionPrototype");function Op(w){var R;if(w){if(VA)return VA(w);var B=w[vw]||w[Yu]||(w[HA]?w[HA][Yu]:null);R=w[lC]||B,Se(w,lC)||(delete w[bw],R=w[lC]=w[bw]||w[lC],w[bw]=B)}return R}s(Op,"_getObjProto");function tf(w,R){var B=[];if(dC)B=dC(w);else for(var F in w)typeof F=="string"&&Se(w,F)&&B.push(F);if(B&&B.length>0)for(var oe=0;oe<B.length;oe++)R(B[oe])}s(tf,"_forEachProp");function mC(w,R,B){return R!==HA&&typeof w[R]===Ku&&(B||Se(w,R))&&R!==vw&&R!==Yu}s(mC,"_isDynamicCandidate");function hC(w){De("DynamicProto: "+w)}s(hC,"_throwTypeError");function Iw(w){var R=Ih(null);return tf(w,function(B){!R[B]&&mC(w,B,!1)&&(R[B]=w[B])}),R}s(Iw,"_getInstanceFuncs");function rk(w,R){for(var B=w.length-1;B>=0;B--)if(w[B]===R)return!0;return!1}s(rk,"_hasVisited");function ik(w,R,B,F){function oe(Xe,pt,on){var br=pt[on];if(br[oC]&&F){var qr=Xe[GA]||{};qr[jA]!==!1&&(br=(qr[pt[Dh]]||{})[on]||br)}return function(){return br.apply(Xe,arguments)}}s(oe,"_instFuncProxy");var Ee=Ih(null);tf(B,function(Xe){Ee[Xe]=oe(R,B,Xe)});for(var we=Op(w),Qe=[];we&&!pC(we)&&!rk(Qe,we);)tf(we,function(Xe){!Ee[Xe]&&mC(we,Xe,!VA)&&(Ee[Xe]=oe(R,we,Xe))}),Qe.push(we),we=Op(we);return Ee}s(ik,"_getBaseFuncs");function yK(w,R,B,F){var oe=null;if(w&&Se(B,Dh)){var Ee=w[GA]||Ih(null);if(oe=(Ee[B[Dh]]||Ih(null))[R],oe||hC("Missing ["+R+"] "+Ku),!oe[ek]&&Ee[jA]!==!1){for(var we=!Se(w,R),Qe=Op(w),Xe=[];we&&Qe&&!pC(Qe)&&!rk(Xe,Qe);){var pt=Qe[R];if(pt){we=pt===F;break}Xe.push(Qe),Qe=Op(Qe)}try{we&&(w[R]=oe),oe[ek]=1}catch{Ee[jA]=!1}}}return oe}s(yK,"_getInstFunc");function CK(w,R,B){var F=R[w];return F===B&&(F=Op(R)[w]),typeof F!==Ku&&hC("["+w+"] is not a "+Ku),F}s(CK,"_getProtoFunc");function xK(w,R,B,F,oe){function Ee(Xe,pt){var on=s(function(){var br=yK(this,pt,Xe,on)||CK(pt,Xe,on);return br.apply(this,arguments)},"dynProtoProxy");return on[oC]=1,on}if(s(Ee,"_createDynamicPrototype"),!fC(w)){var we=B[GA]=B[GA]||Ih(null);if(!fC(we)){var Qe=we[R]=we[R]||Ih(null);we[jA]!==!1&&(we[jA]=!!oe),fC(Qe)||tf(B,function(Xe){mC(B,Xe,!1)&&B[Xe]!==F[Xe]&&(Qe[Xe]=B[Xe],delete B[Xe],(!Se(w,Xe)||w[Xe]&&!w[Xe][oC])&&(w[Xe]=Ee(w,Xe)))})}}}s(xK,"_populatePrototype");function vK(w,R){if(VA){for(var B=[],F=Op(R);F&&!pC(F)&&!rk(B,F);){if(F===w)return!0;B.push(F),F=Op(F)}return!1}return!0}s(vK,"_checkPrototype");function ok(w,R){return Se(w,Yu)?w.name||R||tk:((w||{})[HA]||{}).name||R||tk}s(ok,"_getObjName");function lE(w,R,B,F){Se(w,Yu)||hC("theClass is an invalid class definition.");var oe=w[Yu];vK(oe,R)||hC("["+ok(w)+"] not in hierarchy of ["+ok(R)+"]");var Ee=null;Se(oe,Dh)?Ee=oe[Dh]:(Ee=sC+ok(w,"_")+"$"+Ew.n,Ew.n++,oe[Dh]=Ee);var we=lE[aC],Qe=!!we[cC];Qe&&F&&F[cC]!==void 0&&(Qe=!!F[cC]);var Xe=Iw(R),pt=ik(oe,R,Xe,Qe);B(R,pt);var on=!!VA&&!!we[uC];on&&F&&(on=!!F[uC]),xK(oe,Ee,R,Xe,on!==!1)}s(lE,"dynamicProto"),lE[aC]=Ew.o;var ec=void 0,Hs="",lN="Not dynamic - ",cN=/-([a-z])/g,cE=/([^\w\d_$])/g,sk=/^(\d+[\w\d_$])/;function ak(w){return!O(w)}s(ak,"isNotNullOrUndefined");function Tw(w){var R=w;return R&&te(R)&&(R=R[iC](cN,function(B,F){return F.toUpperCase()}),R=R[iC](cE,"_"),R=R[iC](sk,function(B,F){return"_"+F})),R}s(Tw,"normalizeJsName");function uN(w,R){return w&&R?Un(w,R)!==-1:!1}s(uN,"strContains");function Up(w){return w&&w.toISOString()||""}s(Up,"toISOString");function Nh(w){return me(w)?w[oE]:Hs}s(Nh,"getExceptionName");function uE(w){return function(){function R(){var B=this;w&&ft(w,function(F,oe){B[F]=oe})}return s(R,"class_1"),R}()}s(uE,"createClassFromInterface");var dN="console",ww="JSON",bK="crypto",Lh="msCrypto",gC="msie",$r="trident/",AC=null,$A=null,qp=null;function _w(){return typeof console!==gK?console:M(dN)}s(_w,"getConsole");function Vi(){return!!(typeof JSON===aN&&JSON||M(ww)!==null)}s(Vi,"hasJSON");function yC(){return Vi()?JSON||M(ww):null}s(yC,"getJSON");function Aa(){return M(bK)}s(Aa,"getCrypto");function CC(){return M(Lh)}s(CC,"getMsCrypto");function dE(){var w=mn();if(w&&(w[oN]!==$A||AC===null)){$A=w[oN];var R=($A||Hs)[rE]();AC=uN(R,gC)||uN(R,$r)}return AC}s(dE,"isIE");function Fh(w){return(qp===null||w===!1)&&(qp=Sn()&&!!mn().sendBeacon),qp}s(Fh,"isBeaconsSupported");function fE(w,R){if(w)for(var B=0;B<w[Ma];B++){var F=w[B];if(F[oE]&&F[oE]===R)return F}return{}}s(fE,"_getNamedValue");function Sw(w){var R=ke();return R&&w?fE(R.querySelectorAll("meta"),w).content:null}s(Sw,"findMetaTag");function nf(w){var R,B=tE();if(B){var F=B.getEntriesByType("navigation")||[];R=fE((F[Ma]>0?F[0]:{}).serverTiming,w).description}return R}s(nf,"findNamedServerTiming");var xC=4294967296,zd=4294967295,vC=123456789,Mh=987654321,Il=!1,bC=vC,rf=Mh;function fN(w){w<0&&(w>>>=0),bC=vC+w&zd,rf=Mh-w&zd,Il=!0}s(fN,"_mwcSeed");function zA(){try{var w=QA()&2147483647;fN((Math.random()*xC^w)+w)}catch{}}s(zA,"_autoSeedMwc");function Rw(w){return w>0?wh(EC()/zd*(w+1))>>>0:0}s(Rw,"randomValue");function EC(w){var R=0,B=Aa()||CC();return B&&B.getRandomValues&&(R=B.getRandomValues(new Uint32Array(1))[0]&zd),R===0&&dE()&&(Il||zA(),R=pN()&zd),R===0&&(R=wh(xC*Math.random()|0)),w||(R>>>=0),R}s(EC,"random32");function pN(w){rf=36969*(rf&65535)+(rf>>16)&zd,bC=18e3*(bC&65535)+(bC>>16)&zd;var R=(rf<<16)+(bC&65535)>>>0&zd|0;return w||(R>>>=0),R}s(pN,"mwcRandom32");function YA(w){w===void 0&&(w=22);for(var R="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",B=EC()>>>0,F=0,oe=Hs;oe[Ma]<w;)F++,oe+=R.charAt(B&63),B>>>=6,F===5&&(B=(EC()<<2&4294967295|B&3)>>>0,F=0);return oe}s(YA,"newId");var of="3.3.6",kw="."+YA(6),KA=0;function sf(w){return w.nodeType===1||w.nodeType===9||!+w.nodeType}s(sf,"_canAcceptData");function Bw(w,R){var B=R[w.id];if(!B){B={};try{sf(R)&&le(R,w.id,{e:!1,v:B})}catch{}}return B}s(Bw,"_getCache");function Wp(w,R){return R===void 0&&(R=!1),Tw(w+KA+++(R?"."+of:Hs)+kw)}s(Wp,"createUniqueNamespace");function af(w){var R={id:Wp("_aiData-"+(w||Hs)+"."+of),accept:s(function(B){return sf(B)},"accept"),get:s(function(B,F,oe,Ee){var we=B[R.id];return we?we[Tw(F)]:(Ee&&(we=Bw(R,B),we[Tw(F)]=oe),oe)},"get"),kill:s(function(B,F){if(B&&B[F])try{delete B[F]}catch{}},"kill")};return R}s(af,"createElmNodeData");function Qh(w){return w&&ee(w)&&(w.isVal||w.fb||Je(w,"v")||Je(w,"mrg")||Je(w,"ref")||w.set)}s(Qh,"_isConfigDefaults");function Pw(w,R,B){var F,oe=B.dfVal||Y;if(R&&B.fb){var Ee=B.fb;ce(Ee)||(Ee=[Ee]);for(var we=0;we<Ee[Ma];we++){var Qe=Ee[we],Xe=R[Qe];if(oe(Xe)?F=Xe:w&&(Xe=w.cfg[Qe],oe(Xe)&&(F=Xe),w.set(w.cfg,tt(Qe),Xe)),oe(F))break}}return!oe(F)&&oe(B.v)&&(F=B.v),F}s(Pw,"_getDefault");function Oh(w,R,B){var F=B;if(B&&Qh(B)&&(F=Pw(w,R,B)),F){Qh(F)&&(F=Oh(w,R,F));var oe;ce(F)?(oe=[],oe[Ma]=F[Ma]):_h(F)&&(oe={}),oe&&(ft(F,function(Ee,we){we&&Qh(we)&&(we=Oh(w,R,we)),oe[Ee]=we}),F=oe)}return F}s(Oh,"_resolveDefaultValue");function Uh(w,R,B,F){var oe,Ee,we,Qe=F,Xe,pt,on,br;Qh(Qe)?(oe=Qe.isVal,Ee=Qe.set,on=Qe.rdOnly,br=Qe.blkVal,Xe=Qe.mrg,pt=Qe.ref,!pt&&ie(pt)&&(pt=!!Xe),we=Pw(w,R,Qe)):we=F,br&&w.blkVal(R,B);var qr,un=!0,En=R[B];(En||!O(En))&&(qr=En,un=!1,oe&&qr!==we&&!oe(qr)&&(qr=we,un=!0),Ee&&(qr=Ee(qr,we,R),un=qr===we)),un?we?qr=Oh(w,R,we):qr=we:(_h(qr)||ce(we))&&Xe&&we&&(_h(we)||ce(we))&&ft(we,function(Qr,Er){Uh(w,qr,Qr,Er)}),w.set(R,B,qr),pt&&w.ref(R,B),on&&w.rdOnly(R,B)}s(Uh,"_applyDefaultValue");var tc=Ws("[[ai_dynCfg_1]]"),lk=Ws("[[ai_blkDynCfg_1]]"),pE=Ws("[[ai_frcDynCfg_1]]");function ck(w){if(w){var R;if(ce(w)?(R=[],R[Ma]=w[Ma]):_h(w)&&(R={}),R)return ft(w,function(B,F){R[B]=ck(F)}),R}return w}s(ck,"_cfgDeepCopy");function uk(w){if(w){var R=w[tc]||w;if(R.cfg&&(R.cfg===w||R.cfg[tc]===R))return R}return null}s(uk,"getDynamicConfigHandler");function IC(w){if(w&&(_h(w)||ce(w)))try{w[lk]=!0}catch{}return w}s(IC,"blockDynamicConversion");function qh(w,R,B){var F=!1;return B&&!w[R.blkVal]&&(F=B[pE],!F&&!B[lk]&&(F=_h(B)||ce(B))),F}s(qh,"_canMakeDynamic");function Yd(w){De("InvalidAccess:"+w)}s(Yd,"throwInvalidAccess");var mN=["push","pop","shift","unshift","splice"],Hp=s(function(w,R,B,F){w&&w[iE](3,108,"".concat(B," [").concat(R,"] failed - ")+re(F))},"_throwDynamicError");function dk(w,R,B){ce(R)&&El(mN,function(F){var oe=R[F];R[F]=function(){for(var Ee=[],we=0;we<arguments.length;we++)Ee[we]=arguments[we];var Qe=oe[pK](this,Ee);return JA(w,R,B,"Patching"),Qe}})}s(dk,"_patchArray");function Gp(w,R){var B=Ne(w,R);return B&&B.get}s(Gp,"_getOwnPropGetter");function hN(w,R,B,F){var oe={n:B,h:[],trk:s(function(pt){pt&&pt.fn&&(Fp(oe.h,pt)===-1&&oe.h[ji](pt),w.trk(pt,oe))},"trk"),clr:s(function(pt){var on=Fp(oe.h,pt);on!==-1&&oe.h[qA](on,1)},"clr")},Ee=!0,we=!1;function Qe(){Ee&&(we=we||qh(Qe,w,F),F&&!F[tc]&&we&&(F=JA(w,F,B,"Converting")),Ee=!1);var pt=w.act;return pt&&oe.trk(pt),F}s(Qe,"_getProperty"),Qe[w.prop]={chng:s(function(){w.add(oe)},"chng")};function Xe(pt){if(F!==pt){Qe[w.ro]&&!w.upd&&Yd("["+B+"] is read-only:"+re(R)),Ee&&(we=we||qh(Qe,w,F),Ee=!1);var on=we&&Qe[w.rf];if(we)if(on){ft(F,function(qr){F[qr]=pt?pt[qr]:ec});try{ft(pt,function(qr,un){TC(w,F,qr,un)}),pt=F}catch(qr){Hp((w.hdlr||{})[kh],B,"Assigning",qr),we=!1}}else F&&F[tc]&&ft(F,function(qr){var un=Gp(F,qr);if(un){var En=un[w.prop];En&&En.chng()}});if(pt!==F){var br=pt&&qh(Qe,w,pt);!on&&br&&(pt=JA(w,pt,B,"Converting")),F=pt,we=br}w.add(oe)}}s(Xe,"_setProperty"),le(R,oe.n,{g:Qe,s:Xe})}s(hN,"_createDynamicProperty");function TC(w,R,B,F){if(R){var oe=Gp(R,B),Ee=oe&&!!oe[w.prop];Ee?R[B]=F:hN(w,R,B,F)}return R}s(TC,"_setDynamicProperty");function fk(w,R,B,F){if(R){var oe=Gp(R,B),Ee=oe&&!!oe[w.prop],we=F&&F[0],Qe=F&&F[1],Xe=F&&F[2];if(!Ee){if(Xe)try{IC(R)}catch(pt){Hp((w.hdlr||{})[kh],B,"Blocking",pt)}try{TC(w,R,B,R[B]),oe=Gp(R,B)}catch(pt){Hp((w.hdlr||{})[kh],B,"State",pt)}}we&&(oe[w.rf]=we),Qe&&(oe[w.ro]=Qe),Xe&&(oe[w.blkVal]=!0)}return R}s(fk,"_setDynamicPropertyState");function JA(w,R,B,F){try{ft(R,function(oe,Ee){TC(w,R,oe,Ee)}),R[tc]||(vt(R,tc,{get:s(function(){return w.hdlr},"get")}),dk(w,R,B))}catch(oe){Hp((w.hdlr||{})[kh],B,F,oe)}return R}s(JA,"_makeDynamicObject");var XA="[[ai_",Ju="]]";function gN(w){var R=Mr(XA+"get"+w.uid+Ju),B=Mr(XA+"ro"+w.uid+Ju),F=Mr(XA+"rf"+w.uid+Ju),oe=Mr(XA+"blkVal"+w.uid+Ju),Ee=Mr(XA+"dtl"+w.uid+Ju),we=null,Qe=null,Xe;function pt(un,En){var Qr=Xe.act;try{Xe.act=un,un&&un[Ee]&&(El(un[Ee],function(mi){mi.clr(un)}),un[Ee]=[]),En({cfg:w.cfg,set:w.set.bind(w),setDf:w.setDf.bind(w),ref:w.ref.bind(w),rdOnly:w.rdOnly.bind(w)})}catch(mi){var Er=w[kh];throw Er&&Er[iE](1,107,re(mi)),mi}finally{Xe.act=Qr||null}}s(pt,"_useHandler");function on(){if(we){var un=we;we=null,Qe&&Qe[z3](),Qe=null;var En=[];if(El(un,function(Qr){if(Qr&&(Qr[Ee]&&(El(Qr[Ee],function(Er){Er.clr(Qr)}),Qr[Ee]=null),Qr.fn))try{pt(Qr,Qr.fn)}catch(Er){En[ji](Er)}}),we)try{on()}catch(Qr){En[ji](Qr)}En[Ma]>0&&mK("Watcher error(s): ",En)}}s(on,"_notifyWatchers");function br(un){if(un&&un.h[Ma]>0){we||(we=[]),Qe||(Qe=$3(function(){Qe=null,on()},0));for(var En=0;En<un.h[Ma];En++){var Qr=un.h[En];Qr&&Fp(we,Qr)===-1&&we[ji](Qr)}}}s(br,"_addWatcher");function qr(un,En){if(un){var Qr=un[Ee]=un[Ee]||[];Fp(Qr,En)===-1&&Qr[ji](En)}}return s(qr,"_trackHandler"),Xe={prop:R,ro:B,rf:F,blkVal:oe,hdlr:w,add:br,notify:on,use:pt,trk:qr},Xe}s(gN,"_createState");function EK(w,R){var B={fn:R,rm:s(function(){B.fn=null,w=null,R=null},"rm")};return le(B,"toJSON",{v:s(function(){return"WatcherHandler"+(B.fn?"":"[X]")},"v")}),w.use(B,R),B}s(EK,"_createAndUseHandler");function AN(w,R,B){var F=uk(R);if(F)return F;var oe=Wp("dyncfg",!0),Ee=R&&B!==!1?R:ck(R),we;function Qe(){we.notify()}s(Qe,"_notifyWatchers");function Xe(Er,mi,io){try{Er=TC(we,Er,mi,io)}catch(Pi){Hp(w,mi,"Setting value",Pi)}return Er[mi]}s(Xe,"_setValue");function pt(Er){return EK(we,Er)}s(pt,"_watch");function on(Er,mi){we.use(null,function(io){var Pi=we.upd;try{ie(mi)||(we.upd=mi),Er(io)}finally{we.upd=Pi}})}s(on,"_block");function br(Er,mi){var io;return fk(we,Er,mi,(io={},io[0]=!0,io))[mi]}s(br,"_ref");function qr(Er,mi){var io;return fk(we,Er,mi,(io={},io[1]=!0,io))[mi]}s(qr,"_rdOnly");function un(Er,mi){var io;return fk(we,Er,mi,(io={},io[2]=!0,io))[mi]}s(un,"_blkPropValue");function En(Er,mi){return mi&&ft(mi,function(io,Pi){Uh(Qr,Er,io,Pi)}),Er}s(En,"_applyDefaults");var Qr={uid:null,cfg:Ee,logger:w,notify:Qe,set:Xe,setDf:En,watch:pt,ref:br,rdOnly:qr,blkVal:un,_block:on};return le(Qr,"uid",{c:!1,e:!1,w:!1,v:oe}),we=gN(Qr),JA(we,Ee,"config","Creating"),Qr}s(AN,"_createDynamicHandler");function yN(w,R){w?(w[Rh](R),w[iE](2,108,R)):Yd(R)}s(yN,"_logInvalidAccess");function mE(w,R,B,F){var oe=AN(B,w||{},F);return R&&oe.setDf(oe.cfg,R),oe}s(mE,"createDynamicConfig");function CN(w,R,B){var F=w[tc]||w;return F.cfg&&(F.cfg===w||F.cfg[tc]===F)?F[nN](R):(yN(B,lN+re(w)),mE(w,null,B)[nN](R))}s(CN,"onConfigChange");var Dw=null;function xN(){var w=M("Microsoft");return w&&(Dw=w.ApplicationInsights),Dw}s(xN,"_getExtensionNamespace");function IK(w){var R=Dw;return!R&&w.disableDbgExt!==!0&&(R=Dw||xN()),R?R.ChromeDbgExt:null}s(IK,"getDebugExt");var wC,Nw="warnToConsole",vN="AI (Internal): ",bN="AI: ",TK="AITR_",wK={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},EN=(wC={},wC[0]=null,wC[1]="errorToConsole",wC[2]=Nw,wC[3]="debugToConsole",wC);function IN(w){return w?'"'+w[iC](/\"/g,Hs)+'"':Hs}s(IN,"_sanitizeDiagnosticText");function Lw(w,R){var B=_w();if(B){var F="log";B[w]&&(F=w),pe(B[F])&&B[F](R)}}s(Lw,"_logToConsole");var Fw=function(){function w(R,B,F,oe){F===void 0&&(F=!1);var Ee=this;Ee[Y3]=R,Ee[WA]=(F?bN:vN)+R;var we=Hs;Vi()&&(we=yC().stringify(oe));var Qe=(B?" message:"+IN(B):Hs)+(oe?" props:"+IN(we):Hs);Ee[WA]+=Qe}return s(w,"_InternalLogMessage"),w.dataType="MessageData",w}();function _K(w,R){return(w||{})[kh]||new Mw(R)}s(_K,"safeGetLogger");var Mw=function(){function w(R){this.identifier="DiagnosticLogger",this.queue=[];var B=0,F={},oe,Ee,we,Qe,Xe;lE(w,this,function(pt){Xe=br(R||{}),pt.consoleLoggingLevel=function(){return oe},pt[iE]=function(En,Qr,Er,mi,io){io===void 0&&(io=!1);var Pi=new Fw(Qr,Er,io,mi);if(Qe)throw re(Pi);var Qa=EN[En]||Nw;if(ie(Pi[WA]))un("throw"+(En===1?"Critical":"Warning"),Pi);else{if(io){var rx=+Pi[Y3];!F[rx]&&oe>=En&&(pt[Qa](Pi[WA]),F[rx]=!0)}else oe>=En&&pt[Qa](Pi[WA]);on(En,Pi)}},pt.debugToConsole=function(En){Lw("debug",En),un("warning",En)},pt[Rh]=function(En){Lw("warn",En),un("warning",En)},pt.errorToConsole=function(En){Lw("error",En),un("error",En)},pt.resetInternalMessageCount=function(){B=0,F={}},pt.logInternalMessage=on,pt[mu]=function(En){Xe&&Xe.rm(),Xe=null};function on(En,Qr){if(!qr()){var Er=!0,mi=TK+Qr[Y3];if(F[mi]?Er=!1:F[mi]=!0,Er&&(En<=Ee&&(pt.queue[ji](Qr),B++,un(En===1?"error":"warn",Qr)),B===we)){var io="Internal events throttle limit per PageView reached for this app.",Pi=new Fw(23,io,!1);pt.queue[ji](Pi),En===1?pt.errorToConsole(io):pt[Rh](io)}}}s(on,"_logInternalMessage");function br(En){return CN(mE(En,wK,pt).cfg,function(Qr){var Er=Qr.cfg;oe=Er[iN],Ee=Er.loggingLevelTelemetry,we=Er.maxMessageLimit,Qe=Er.enableDebug})}s(br,"_setDefaultsFromConfig");function qr(){return B>=we}s(qr,"_areInternalMessagesThrottled");function un(En,Qr){var Er=IK(R||{});Er&&Er[K3]&&Er[K3](En,Qr)}s(un,"_debugExtMsg")})}return s(w,"DiagnosticLogger"),w.__ieDyn=1,w}();function Qw(w){return w||new Mw}s(Qw,"_getLogger");function hu(w,R,B,F,oe,Ee){Ee===void 0&&(Ee=!1),Qw(w)[iE](R,B,F,oe,Ee)}s(hu,"_throwInternal");function Ow(){for(var w=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],R=Hs,B,F=0;F<4;F++)B=EC(),R+=w[B&15]+w[B>>4&15]+w[B>>8&15]+w[B>>12&15]+w[B>>16&15]+w[B>>20&15]+w[B>>24&15]+w[B>>28&15];var oe=w[8+(EC()&3)|0];return Jt(R,0,8)+Jt(R,9,4)+"4"+Jt(R,13,3)+oe+Jt(R,16,3)+Jt(R,19,12)}s(Ow,"generateW3CId");var _C=/^([\da-f]{2})-([\da-f]{32})-([\da-f]{16})-([\da-f]{2})(-[^\s]{1,64})?$/i,pk="00",Xu="ff",pi="00000000000000000000000000000000",jp="0000000000000000",ya=1;function Kd(w,R,B){return w&&w[Ma]===R&&w!==B?!!w.match(/^[\da-f]*$/i):!1}s(Kd,"_isValid");function Uw(w,R,B){return Kd(w,R)?w:B}s(Uw,"_formatValue");function ZA(w){(isNaN(w)||w<0||w>255)&&(w=1);for(var R=w.toString(16);R[Ma]<2;)R="0"+R;return R}s(ZA,"_formatFlags");function SC(w,R,B,F){return{version:Kd(F,2,Xu)?F:pk,traceId:RC(w)?w:Ow(),spanId:kC(R)?R:Fn(Ow(),16),traceFlags:B>=0&&B<=255?B:1}}s(SC,"createTraceParent");function Zu(w,R){if(!w||(ce(w)&&(w=w[0]||""),!w||!te(w)||w[Ma]>8192))return null;if(w.indexOf(",")!==-1){var B=w[J3](",");w=B[R>0&&B[Ma]>R?R:0]}var F=_C.exec(kc(w));return!F||F[1]===Xu||F[2]===pi||F[3]===jp?null:{version:(F[1]||Hs)[rE](),traceId:(F[2]||Hs)[rE](),spanId:(F[3]||Hs)[rE](),traceFlags:parseInt(F[4],16)}}s(Zu,"parseTraceParent");function RC(w){return Kd(w,32,pi)}s(RC,"isValidTraceId");function kC(w){return Kd(w,16,jp)}s(kC,"isValidSpanId");function BC(w){return!(!w||!Kd(w[rN],2,Xu)||!Kd(w.traceId,32,pi)||!Kd(w.spanId,16,jp)||!Kd(ZA(w[mw]),2))}s(BC,"isValidTraceParent");function qw(w){return BC(w)?(w[mw]&ya)===ya:!1}s(qw,"isSampledFlag");function e1(w){if(w){var R=ZA(w[mw]);Kd(R,2)||(R="01");var B=w[rN]||pk;return B!=="00"&&B!=="ff"&&(B=pk),"".concat(B.toLowerCase(),"-").concat(Uw(w.traceId,32,pi).toLowerCase(),"-").concat(Uw(w.spanId,16,jp).toLowerCase(),"-").concat(R.toLowerCase())}return""}s(e1,"formatTraceParent");function mk(w){var R="traceparent",B=Zu(Sw(R),w);return B||(B=Zu(nf(R),w)),B}s(mk,"findW3cTraceParent");function hk(w){var R=w.getElementsByTagName("script"),B=[];return El(R,function(F){var oe=F[X3]("src");if(oe){var Ee=F[X3]("crossorigin"),we=F.hasAttribute("async")===!0,Qe=F.hasAttribute("defer")===!0,Xe=F[X3]("referrerpolicy"),pt={url:oe};Ee&&(pt.crossOrigin=Ee),we&&(pt.async=we),Qe&&(pt.defer=Qe),Xe&&(pt.referrerPolicy=Xe),B[ji](pt)}}),B}s(hk,"findAllScripts");var Ww="on",hE="attachEvent",Hw="addEventListener",Gw="detachEvent",TN="removeEventListener",gk="events";Wp("aiEvtPageHide"),Wp("aiEvtPageShow");var SK=/\.[\.]+/g,RK=/[\.]+$/,jw=1,PC=af("events"),Tl=/^([^.]*)(?:\.(.+)|)/;function gE(w){return w&&w[iC]?w[iC](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,Hs):w}s(gE,"_normalizeNamespace");function ll(w,R){if(R){var B=Hs;ce(R)?(B=Hs,El(R,function(oe){oe=gE(oe),oe&&(oe[0]!=="."&&(oe="."+oe),B+=oe)})):B=gE(R),B&&(B[0]!=="."&&(B="."+B),w=(w||Hs)+B)}var F=Tl.exec(w||Hs)||[];return{type:F[1],ns:(F[2]||Hs).replace(SK,".").replace(RK,Hs)[J3](".").sort().join(".")}}s(ll,"_getEvtNamespace");function Wh(w,R,B){B===void 0&&(B=!0);var F=PC.get(w,gk,{},B),oe=F[R];return oe||(oe=F[R]=[]),oe}s(Wh,"_getRegisteredEvents");function wN(w,R,B,F){w&&R&&R[Bh]&&(w[TN]?w[TN](R[Bh],B,F):w[Gw]&&w[Gw](Ww+R[Bh],B))}s(wN,"_doDetach");function kK(w,R,B,F){var oe=!1;return w&&R&&R[Bh]&&B&&(w[Hw]?(w[Hw](R[Bh],B,F),oe=!0):w[hE]&&(w[hE](Ww+R[Bh],B),oe=!0)),oe}s(kK,"_doAttach");function AE(w,R,B,F){for(var oe=R[Ma];oe--;){var Ee=R[oe];Ee&&(!B.ns||B.ns===Ee[sN].ns)&&(!F||F(Ee))&&(wN(w,Ee[sN],Ee.handler,Ee.capture),R[qA](oe,1))}}s(AE,"_doUnregister");function Ak(w,R,B){if(R[Bh])AE(w,Wh(w,R[Bh]),R,B);else{var F=PC.get(w,gk,{});ft(F,function(oe,Ee){AE(w,Ee,R,B)}),Ot(F)[Ma]===0&&PC.kill(w,gk)}}s(Ak,"_unregisterEvents");function BK(w,R){var B;return R?(ce(R)?B=[w].concat(R):B=[w,R],B=ll("xx",B).ns[J3](".")):B=w,B}s(BK,"mergeEvtNamespace");function yk(w,R,B,F,oe){oe===void 0&&(oe=!1);var Ee=!1;if(w)try{var we=ll(R,F);if(Ee=kK(w,we,B,oe),Ee&&PC.accept(w)){var Qe={guid:jw++,evtName:we,handler:B,capture:oe};Wh(w,we.type)[ji](Qe)}}catch{}return Ee}s(yk,"eventOn");function _N(w,R,B,F,oe){if(oe===void 0&&(oe=!1),w)try{var Ee=ll(R,F),we=!1;Ak(w,Ee,function(Qe){return Ee.ns&&!B||Qe.handler===B?(we=!0,!0):!1}),we||wN(w,Ee,B,oe)}catch{}}s(_N,"eventOff");var Vw="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",SN="sampleRate",$w="ProcessLegacy",RN="http.method",Ck="https://dc.services.visualstudio.com",yE="/v2/track",lf="not_specified",xk="iKey",kN=fK({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),Hh="split",vr="length",DC="toLowerCase",t1="ingestionendpoint",n1="toString",vk="removeItem",CE="message",NC="count",zw="preTriggerDate",bk="getUTCDate",Yw="stringify",LC="pathname",r1="match",Ek="correlationHeaderExcludePatterns",ed="name",FC="extensionConfig",cf="properties",Bc="measurements",MC="sizeInBytes",xE="typeName",QC="exceptions",vE="severityLevel",OC="problemGroup",gu="parsedStack",Kw="hasFullStack",Jw="assembly",Jd="fileName",UC="line",Gh="aiDataContract",bE="duration";function Ik(w,R,B){var F=R[vr],oe=Tk(w,R);if(oe[vr]!==F){for(var Ee=0,we=oe;B[we]!==void 0;)Ee++,we=nn(oe,0,147)+BN(Ee);oe=we}return oe}s(Ik,"dataSanitizeKeyAndAddUniqueness");function Tk(w,R){var B;return R&&(R=kc(tt(R)),R[vr]>150&&(B=nn(R,0,150),hu(w,2,57,"name is too long.  It has been truncated to 150 characters.",{name:R},!0))),B||R}s(Tk,"dataSanitizeKey");function cl(w,R,B){B===void 0&&(B=1024);var F;return R&&(B=B||1024,R=kc(tt(R)),R[vr]>B&&(F=nn(R,0,B),hu(w,2,61,"string value is too long. It has been truncated to "+B+" characters.",{value:R},!0))),F||R}s(cl,"dataSanitizeString");function uf(w,R){return _k(w,R,2048,66)}s(uf,"dataSanitizeUrl");function Xw(w,R){var B;return R&&R[vr]>32768&&(B=nn(R,0,32768),hu(w,2,56,"message is too long, it has been truncated to 32768 characters.",{message:R},!0)),B||R}s(Xw,"dataSanitizeMessage");function wk(w,R){var B;if(R){var F=""+R;F[vr]>32768&&(B=nn(F,0,32768),hu(w,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:R},!0))}return B||R}s(wk,"dataSanitizeException");function Vp(w,R){if(R){var B={};ft(R,function(F,oe){if(ee(oe)&&Vi())try{oe=yC()[Yw](oe)}catch(Ee){hu(w,2,49,"custom property is not valid",{exception:Ee},!0)}oe=cl(w,oe,8192),F=Ik(w,F,B),B[F]=oe}),R=B}return R}s(Vp,"dataSanitizeProperties");function td(w,R){if(R){var B={};ft(R,function(F,oe){F=Ik(w,F,B),B[F]=oe}),R=B}return R}s(td,"dataSanitizeMeasurements");function qC(w,R){return R&&_k(w,R,128,69)[n1]()}s(qC,"dataSanitizeId");function _k(w,R,B,F){var oe;return R&&(R=kc(tt(R)),R[vr]>B&&(oe=nn(R,0,B),hu(w,2,F,"input is too long, it has been truncated to "+B+" characters.",{data:R},!0))),oe||R}s(_k,"dataSanitizeInput");function BN(w){var R="00"+w;return Jt(R,R[vr]-3)}s(BN,"dsPadNumber");var Sk=ke()||{},PN=0,PK=[null,null,null,null,null];function WC(w){var R=PN,B=PK,F=B[R];return Sk.createElement?B[R]||(F=B[R]=Sk.createElement("a")):F={host:NN(w,!0)},F.href=w,R++,R>=B[vr]&&(R=0),PN=R,F}s(WC,"urlParseUrl");function DK(w){var R,B=WC(w);return B&&(R=B.href),R}s(DK,"urlGetAbsoluteUrl");function NK(w){var R,B=WC(w);return B&&(R=B[LC]),R}s(NK,"urlGetPathName");function DN(w,R){return w?w.toUpperCase()+" "+R:R}s(DN,"urlGetCompleteUrl");function NN(w,R){var B=$p(w,R)||"";if(B){var F=B[r1](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(F!=null&&F[vr]>3&&te(F[2])&&F[2][vr]>0)return F[2]+(F[3]||"")}return B}s(NN,"urlParseHost");function $p(w,R){var B=null;if(w){var F=w[r1](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(F!=null&&F[vr]>2&&te(F[2])&&F[2][vr]>0&&(B=F[2]||"",R&&F[vr]>2)){var oe=(F[1]||"")[DC](),Ee=F[3]||"";(oe==="http"&&Ee===":80"||oe==="https"&&Ee===":443")&&(Ee=""),B+=Ee}}return B}s($p,"urlParseFullHost");var LN=[Ck+yE,"https://breeze.aimon.applicationinsights.io"+yE,"https://dc-int.services.visualstudio.com"+yE],HC="cid-v1:";function FN(w){return Fp(LN,w[DC]())!==-1}s(FN,"isInternalApplicationInsightsEndpoint");function Rk(w){HC=w}s(Rk,"correlationIdSetPrefix");function kk(){return HC}s(kk,"correlationIdGetPrefix");function jh(w,R,B){if(!R||w&&w.disableCorrelationHeaders)return!1;if(w&&w[Ek]){for(var F=0;F<w.correlationHeaderExcludePatterns[vr];F++)if(w[Ek][F].test(R))return!1}var oe=WC(R).host[DC]();if(oe&&(Un(oe,":443")!==-1||Un(oe,":80")!==-1)&&(oe=($p(R,!0)||"")[DC]()),(!w||!w.enableCorsCorrelation)&&oe&&oe!==B)return!1;var Ee=w&&w.correlationHeaderDomains;if(Ee){var we;if(El(Ee,function(pt){var on=new RegExp(pt.toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));we=we||on.test(oe)}),!we)return!1}var Qe=w&&w.correlationHeaderExcludedDomains;if(!Qe||Qe[vr]===0)return!0;for(var F=0;F<Qe[vr];F++){var Xe=new RegExp(Qe[F].toLowerCase().replace(/\\/g,"\\\\").replace(/\./g,"\\.").replace(/\*/g,".*"));if(Xe.test(oe))return!1}return oe&&oe[vr]>0}s(jh,"correlationIdCanIncludeCorrelationHeader");function MN(w){if(w){var R=QN(w,kN[1]);if(R&&R!==HC)return R}}s(MN,"correlationIdGetCorrelationContext");function QN(w,R){if(w)for(var B=w[Hh](","),F=0;F<B[vr];++F){var oe=B[F][Hh]("=");if(oe[vr]===2&&oe[0]===R)return oe[1]}}s(QN,"correlationIdGetCorrelationContextValue");function ON(w,R,B,F){var oe,Ee=F,we=F;if(R&&R[vr]>0){var Qe=WC(R);if(oe=Qe.host,!Ee)if(Qe[LC]!=null){var Xe=Qe.pathname[vr]===0?"/":Qe[LC];Xe.charAt(0)!=="/"&&(Xe="/"+Xe),we=Qe[LC],Ee=cl(w,B?B+" "+Xe:Xe)}else Ee=cl(w,R)}else oe=F,Ee=F;return{target:oe,name:Ee,data:we}}s(ON,"AjaxHelperParseDependencyPath");function LK(){var w=tE();if(w&&w.now&&w.timing){var R=w.now()+w.timing.navigationStart;if(R>0)return R}return QA()}s(LK,"dateTimeUtilsNow");function FK(w,R){var B=null;return w!==0&&R!==0&&!O(w)&&!O(R)&&(B=R-w),B}s(FK,"dateTimeUtilsDuration");function Bk(w,R){var B=w||{};return{getName:s(function(){return B[ed]},"getName"),setName:s(function(F){R&&R.setName(F),B[ed]=F},"setName"),getTraceId:s(function(){return B.traceID},"getTraceId"),setTraceId:s(function(F){R&&R.setTraceId(F),RC(F)&&(B.traceID=F)},"setTraceId"),getSpanId:s(function(){return B.parentID},"getSpanId"),setSpanId:s(function(F){R&&R.setSpanId(F),kC(F)&&(B.parentID=F)},"setSpanId"),getTraceFlags:s(function(){return B.traceFlags},"getTraceFlags"),setTraceFlags:s(function(F){R&&R.setTraceFlags(F),B.traceFlags=F},"setTraceFlags")}}s(Bk,"createDistributedTraceContextFromTrace");var GC=nE({LocalStorage:0,SessionStorage:1}),MK=nE({AI:0,AI_AND_W3C:1,W3C:2}),EE=nE({Normal:1,Critical:2}),Vh=void 0,Xd=void 0,UN="";function jC(){return Zw()?VC(GC.LocalStorage):null}s(jC,"_getLocalStorageObject");function VC(w){try{if(O(Z()))return null;var R=new Date()[n1](),B=M(w===GC.LocalStorage?"localStorage":"sessionStorage"),F=UN+R;B.setItem(F,R);var oe=B.getItem(F)!==R;if(B[vk](F),!oe)return B}catch{}return null}s(VC,"_getVerifiedStorageObject");function $C(){return zp()?VC(GC.SessionStorage):null}s($C,"_getSessionStorageObject");function IE(){Vh=!1,Xd=!1}s(IE,"utlDisableStorage");function TE(w){UN=w||""}s(TE,"utlSetStoragePrefix");function QK(){Vh=Zw(!0),Xd=zp(!0)}s(QK,"utlEnableStorage");function Zw(w){return(w||Vh===void 0)&&(Vh=!!VC(GC.LocalStorage)),Vh}s(Zw,"utlCanUseLocalStorage");function qN(w,R){var B=jC();if(B!==null)try{return B.getItem(R)}catch(F){Vh=!1,hu(w,2,1,"Browser failed read of local storage. "+Nh(F),{exception:re(F)})}return null}s(qN,"utlGetLocalStorage");function WN(w,R,B){var F=jC();if(F!==null)try{return F.setItem(R,B),!0}catch(oe){Vh=!1,hu(w,2,3,"Browser failed write to local storage. "+Nh(oe),{exception:re(oe)})}return!1}s(WN,"utlSetLocalStorage");function nd(w,R){var B=jC();if(B!==null)try{return B[vk](R),!0}catch(F){Vh=!1,hu(w,2,5,"Browser failed removal of local storage item. "+Nh(F),{exception:re(F)})}return!1}s(nd,"utlRemoveStorage");function zp(w){return(w||Xd===void 0)&&(Xd=!!VC(GC.SessionStorage)),Xd}s(zp,"utlCanUseSessionStorage");function zC(){var w=[];return zp()&&ft(M("sessionStorage"),function(R){w.push(R)}),w}s(zC,"utlGetSessionStorageKeys");function HN(w,R){var B=$C();if(B!==null)try{return B.getItem(R)}catch(F){Xd=!1,hu(w,2,2,"Browser failed read of session storage. "+Nh(F),{exception:re(F)})}return null}s(HN,"utlGetSessionStorage");function OK(w,R,B){var F=$C();if(F!==null)try{return F.setItem(R,B),!0}catch(oe){Xd=!1,hu(w,2,4,"Browser failed write to session storage. "+Nh(oe),{exception:re(oe)})}return!1}s(OK,"utlSetSessionStorage");function GN(w,R){var B=$C();if(B!==null)try{return B[vk](R),!0}catch(F){Xd=!1,hu(w,2,6,"Browser failed removal of session storage item. "+Nh(F),{exception:re(F)})}return!1}s(GN,"utlRemoveSessionStorage");var UK="appInsightsThrottle",qK=function(){function w(R,B){var F=this,oe,Ee,we,Qe,Xe,pt,on,br=!1,qr=!1;En(),F._getDbgPlgTargets=function(){return[on]},F.getConfig=function(){return we},F.canThrottle=function(Et){var kn=jk(Et),nr=Qr(Et);return io(nr,oe,kn)},F.isTriggered=function(Et){return a7(Et)},F.isReady=function(){return br},F.flush=function(Et){try{var kn=l7(Et);if(kn&&kn[vr]>0){var nr=kn.slice(0);return on[Et]=[],El(nr,function(Fo){un(Fo.msgID,Fo[CE],Fo.severity,!1)}),!0}}catch{}return!1},F.flushAll=function(){try{if(on){var Et=!0;return ft(on,function(kn){var nr=F.flush(parseInt(kn));Et=Et&&nr}),Et}}catch{}return!1},F.onReadyState=function(Et,kn){return kn===void 0&&(kn=!0),br=O(Et)?!0:Et,br&&kn?F.flushAll():null},F.sendMessage=function(Et,kn,nr){return un(Et,kn,nr,!0)};function un(Et,kn,nr,Fo){if(br){var Oa=oJ(Et);if(!Oa)return;var Gs=Qr(Et),Ua=jk(Et),o1=io(Gs,oe,Ua),Jh=!1,ix=0,c7=a7(Et);try{o1&&!c7?(ix=yn(Gs.limit.maxSendNumber,Ua[NC]+1),Ua[NC]=0,Jh=!0,Xe[Et]=!0,Ua[zw]=new Date):(Xe[Et]=o1,Ua[NC]+=1);var u7=Pi(Et);Gk(Ee,u7,Ua);for(var p_=0;p_<ix;p_++)s7(Et,Ee,kn,nr)}catch{}return{isThrottled:Jh,throttleNum:ix}}else if(Fo){var sJ=l7(Et);sJ.push({msgID:Et,message:kn,severity:nr})}return null}s(un,"_flushMessage");function En(){Ee=_K(R),Xe={},Qe={},on={},we={},Er(109),pt=ak(B)?B:"",R.addUnloadHook(CN(R.config,function(Et){var kn=Et.cfg;oe=Zw();var nr=kn.throttleMgrCfg||{};ft(nr,function(Fo,Oa){Er(parseInt(Fo),Oa)})}))}s(En,"_initConfig");function Qr(Et){return we[Et]||we[109]}s(Qr,"_getCfgByKey");function Er(Et,kn){var nr,Fo;try{var Oa=kn||{},Gs={};Gs.disabled=!!Oa.disabled;var Ua=Oa.interval||{};qr=Ua?.daysOfMonth&&Ua?.daysOfMonth[vr]>0,Gs.interval=mi(Ua);var o1={samplingRate:((nr=Oa.limit)===null||nr===void 0?void 0:nr.samplingRate)||100,maxSendNumber:((Fo=Oa.limit)===null||Fo===void 0?void 0:Fo.maxSendNumber)||1};Gs.limit=o1,we[Et]=Gs}catch{}}s(Er,"_setCfgByKey");function mi(Et){Et=Et||{};var kn=Et?.monthInterval,nr=Et?.dayInterval;return O(kn)&&O(nr)&&(Et.monthInterval=3,qr||(Et.daysOfMonth=[28],qr=!0)),Et={monthInterval:Et?.monthInterval,dayInterval:Et?.dayInterval,daysOfMonth:Et?.daysOfMonth},Et}s(mi,"_getIntervalConfig");function io(Et,kn,nr){if(Et&&!Et.disabled&&kn&&ak(nr)){var Fo=DE(),Oa=nr.date,Gs=Et.interval,Ua=1;if(Gs?.monthInterval){var o1=(Fo.getUTCFullYear()-Oa.getUTCFullYear())*12+Fo.getUTCMonth()-Oa.getUTCMonth();Ua=f_(Gs.monthInterval,0,o1)}var Jh=1;if(qr)Jh=Fp(Gs.daysOfMonth,Fo[bk]());else if(Gs?.dayInterval){var ix=wh((Fo.getTime()-Oa.getTime())/864e5);Jh=f_(Gs.dayInterval,0,ix)}return Ua>=0&&Jh>=0}return!1}s(io,"_canThrottle");function Pi(Et,kn){var nr=ak(kn)?kn:"";return Et?UK+nr+"-"+Et:null}s(Pi,"_getLocalStorageName");function Qa(Et){try{if(Et){var kn=new Date;return Et.getUTCFullYear()===kn.getUTCFullYear()&&Et.getUTCMonth()===kn.getUTCMonth()&&Et[bk]()===kn[bk]()}}catch{}return!1}s(Qa,"_isTriggeredOnCurDate");function rx(Et,kn,nr){try{var Fo={date:DE(),count:0};if(Et){var Oa=JSON.parse(Et),Gs={date:DE(Oa.date)||Fo.date,count:Oa[NC]||Fo[NC],preTriggerDate:Oa.preTriggerDate?DE(Oa[zw]):void 0};return Gs}else return Gk(kn,nr,Fo),Fo}catch{}return null}s(rx,"_getLocalStorageObj");function DE(Et){try{if(Et){var kn=new Date(Et);if(!isNaN(kn.getDate()))return kn}else return new Date}catch{}return null}s(DE,"_getThrottleDate");function Gk(Et,kn,nr){try{return WN(Et,kn,kc(JSON[Yw](nr)))}catch{}return!1}s(Gk,"_resetLocalStorage");function f_(Et,kn,nr){return Et<=0?1:nr>=kn&&(nr-kn)%Et==0?wh((nr-kn)/Et)+1:-1}s(f_,"_checkInterval");function s7(Et,kn,nr,Fo){hu(kn,Fo||1,Et,nr)}s(s7,"_sendMessage");function oJ(Et){try{var kn=Qr(Et);return Rw(1e6)<=kn.limit.samplingRate}catch{}return!1}s(oJ,"_canSampledIn");function jk(Et){try{var kn=Qe[Et];if(!kn){var nr=Pi(Et,pt);kn=rx(qN(Ee,nr),Ee,nr),Qe[Et]=kn}return Qe[Et]}catch{}return null}s(jk,"_getLocalStorageObjByKey");function a7(Et){var kn=Xe[Et];if(O(kn)){kn=!1;var nr=jk(Et);nr&&(kn=Qa(nr[zw])),Xe[Et]=kn}return Xe[Et]}s(a7,"_isTrigger");function l7(Et){return on=on||{},O(on[Et])&&(on[Et]=[]),on[Et]}s(l7,"_getQueueByKey")}return s(w,"ThrottleMgr"),w}(),Pk=";",df="=";function e_(w){if(!w)return{};var R=w[Hh](Pk),B=ra(R,function(oe,Ee){var we=Ee[Hh](df);if(we[vr]===2){var Qe=we[0][DC](),Xe=we[1];oe[Qe]=Xe}return oe},{});if(Ot(B)[vr]>0){if(B.endpointsuffix){var F=B.location?B.location+".":"";B[t1]=B[t1]||"https://"+F+"dc."+B.endpointsuffix}B[t1]=B[t1]||Ck,tC(B[t1],"/")&&(B[t1]=B[t1].slice(0,-1))}return B}s(e_,"parseConnectionString");var t_={parse:e_},n_=function(){function w(R,B,F){var oe=this,Ee=this;Ee.ver=1,Ee.sampleRate=100,Ee.tags={},Ee[ed]=cl(R,F)||lf,Ee.data=B,Ee.time=Up(new Date),Ee[Gh]={time:1,iKey:1,name:1,sampleRate:s(function(){return oe.sampleRate===100?4:1},"sampleRate"),tags:1,data:1}}return s(w,"Envelope"),w}(),WK=function(){function w(R,B,F,oe){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var Ee=this;Ee.ver=2,Ee[ed]=cl(R,B)||lf,Ee[cf]=Vp(R,F),Ee[Bc]=td(R,oe)}return s(w,"Event"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Event",w.dataType="EventData",w}(),HK=58,jN=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,GK=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,YC=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,VN=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,jK=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,VK=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,$K=/([^\(\s\n]+):([0-9]+)$/,$N="<no_method>",KC="error",Au="stack",wE="stackDetails",r_="errorSrc",_E="message",SE="description",Dk=[{re:GK,len:5,m:1,fn:2,ln:3,col:4},{chk:i_,pre:wn,re:YC,len:4,m:1,fn:2,ln:3},{re:VN,len:3,m:1,fn:2,hdl:Lk},{re:jK,len:2,fn:1,hdl:Lk}];function wn(w){return w.replace(/(\(anonymous\))/,"<anonymous>")}s(wn,"_scrubAnonymous");function i_(w){return Un(w,"[native")<0}s(i_,"_ignoreNative");function RE(w,R){var B=w;return B&&!te(B)&&(JSON&&JSON[Yw]?(B=JSON[Yw](w),R&&(!B||B==="{}")&&(pe(w[n1])?B=w[n1]():B=""+w)):B=""+w+" - (Missing JSON.stringify)"),B||""}s(RE,"_stringify");function $h(w,R){var B=w;return w&&(B&&!te(B)&&(B=w[_E]||w[SE]||B),B&&!te(B)&&(B=RE(B,!0)),w.filename&&(B=B+" @"+(w.filename||"")+":"+(w.lineno||"?")+":"+(w.colno||"?"))),R&&R!=="String"&&R!=="Object"&&R!=="Error"&&Un(B||"",R)===-1&&(B=R+": "+B),B||""}s($h,"_formatMessage");function zN(w){try{if(ee(w))return"hasFullStack"in w&&"typeName"in w}catch{}return!1}s(zN,"_isExceptionDetailsInternal");function YN(w){try{if(ee(w))return"ver"in w&&"exceptions"in w&&"properties"in w}catch{}return!1}s(YN,"_isExceptionInternal");function o_(w){return w&&w.src&&te(w.src)&&w.obj&&ce(w.obj)}s(o_,"_isStackDetails");function Yp(w){var R=w||"";te(R)||(te(R[Au])?R=R[Au]:R=""+R);var B=R[Hh](`
`);return{src:R,obj:B}}s(Yp,"_convertStackObj");function KN(w){for(var R=[],B=w[Hh](`
`),F=0;F<B[vr];F++){var oe=B[F];B[F+1]&&(oe+="@"+B[F+1],F++),R.push(oe)}return{src:w,obj:R}}s(KN,"_getOperaStack");function s_(w){var R=null;if(w)try{if(w[Au])R=Yp(w[Au]);else if(w[KC]&&w[KC][Au])R=Yp(w[KC][Au]);else if(w.exception&&w.exception[Au])R=Yp(w.exception[Au]);else if(o_(w))R=w;else if(o_(w[wE]))R=w[wE];else if(qt()&&qt().opera&&w[_E])R=KN(w[CE]);else if(w.reason&&w.reason[Au])R=Yp(w.reason[Au]);else if(te(w))R=Yp(w);else{var B=w[_E]||w[SE]||"";te(w[r_])&&(B&&(B+=`
`),B+=" from "+w[r_]),B&&(R=Yp(B))}}catch(F){R=Yp(F)}return R||{src:"",obj:null}}s(s_,"_getStackFromErrorObj");function JN(w){var R="";return w&&(w.obj?R=w.obj.join(`
`):R=w.src||""),R}s(JN,"_formatStackTrace");function a_(w){var R,B=w.obj;if(B&&B[vr]>0){R=[];var F=0,oe=!1,Ee=0;El(B,function(Qr){if(oe||zK(Qr)){var Er=tt(Qr);oe=!0;var mi=YK(Er,F);mi&&(Ee+=mi[MC],R.push(mi),F++)}});var we=32*1024;if(Ee>we)for(var Qe=0,Xe=R[vr]-1,pt=0,on=Qe,br=Xe;Qe<Xe;){var qr=R[Qe][MC],un=R[Xe][MC];if(pt+=qr+un,pt>we){var En=br-on+1;R.splice(on,En);break}on=Qe,br=Xe,Qe++,Xe--}}return R}s(a_,"_parseStack");function JC(w){var R="";if(w&&(R=w.typeName||w[ed]||"",!R))try{var B=/function (.{1,200})\(/,F=B.exec(w.constructor[n1]());R=F&&F[vr]>1?F[1]:""}catch{}return R}s(JC,"_getErrorType");function l_(w){if(w)try{if(!te(w)){var R=JC(w),B=RE(w,!1);return(!B||B==="{}")&&(w[KC]&&(w=w[KC],R=JC(w)),B=RE(w,!0)),Un(B,R)!==0&&R!=="String"?R+":"+B:B}}catch{}return""+(w||"")}s(l_,"_formatErrorCode");var ff=function(){function w(R,B,F,oe,Ee,we){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var Qe=this;Qe.ver=2,YN(B)?(Qe[QC]=B[QC]||[],Qe[cf]=B[cf],Qe[Bc]=B[Bc],B[vE]&&(Qe[vE]=B[vE]),B.id&&(Qe.id=B.id,B[cf].id=B.id),B[OC]&&(Qe[OC]=B[OC]),O(B.isManual)||(Qe.isManual=B.isManual)):(F||(F={}),we&&(F.id=we),Qe[QC]=[e7(R,B,F)],Qe[cf]=Vp(R,F),Qe[Bc]=td(R,oe),Ee&&(Qe[vE]=Ee),we&&(Qe.id=we))}return s(w,"Exception"),w.CreateAutoException=function(R,B,F,oe,Ee,we,Qe,Xe){var pt=JC(Ee||we||R);return{message:$h(R,pt),url:B,lineNumber:F,columnNumber:oe,error:l_(Ee||we||R),evt:l_(we||R),typeName:pt,stackDetails:s_(Qe||Ee||we),errorSrc:Xe}},w.CreateFromInterface=function(R,B,F,oe){var Ee=B[QC]&&ef(B[QC],function(Qe){return Nk(R,Qe)}),we=new w(R,yw(yw({},B),{exceptions:Ee}),F,oe);return we},w.prototype.toInterface=function(){var R=this,B=R.exceptions,F=R.properties,oe=R.measurements,Ee=R.severityLevel,we=R.problemGroup,Qe=R.id,Xe=R.isManual,pt=B instanceof Array&&ef(B,function(on){return on.toInterface()})||void 0;return{ver:"4.0",exceptions:pt,severityLevel:Ee,properties:F,measurements:oe,problemGroup:we,id:Qe,isManual:Xe}},w.CreateSimpleException=function(R,B,F,oe,Ee,we){var Qe;return{exceptions:[(Qe={},Qe[Kw]=!0,Qe.message=R,Qe.stack=Ee,Qe.typeName=B,Qe)]}},w.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",w.dataType="ExceptionData",w.formatError=l_,w}(),XN=cn({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function ZN(){var w=this,R=ce(w[gu])&&ef(w[gu],function(F){return n7(F)}),B={id:w.id,outerId:w.outerId,typeName:w[xE],message:w[CE],hasFullStack:w[Kw],stack:w[Au],parsedStack:R||void 0};return B}s(ZN,"_toInterface");function e7(w,R,B){var F,oe,Ee,we,Qe,Xe,pt,on;if(zN(R))we=R[xE],Qe=R[CE],pt=R[Au],on=R[gu]||[],Xe=R[Kw];else{var br=R,qr=br&&br.evt;me(br)||(br=br[KC]||qr||br),we=cl(w,JC(br))||lf,Qe=Xw(w,$h(R||br,we))||lf;var un=R[wE]||s_(R);on=a_(un),ce(on)&&ef(on,function(En){En[Jw]=cl(w,En[Jw]),En[Jd]=cl(w,En[Jd])}),pt=wk(w,JN(un)),Xe=ce(on)&&on[vr]>0,B&&(B[xE]=B[xE]||we)}return F={},F[Gh]=XN,F.id=oe,F.outerId=Ee,F.typeName=we,F.message=Qe,F[Kw]=Xe,F.stack=pt,F.parsedStack=on,F.toInterface=ZN,F}s(e7,"_createExceptionDetails");function Nk(w,R){var B=ce(R[gu])&&ef(R[gu],function(oe){return t7(oe)})||R[gu],F=e7(w,yw(yw({},R),{parsedStack:B}));return F}s(Nk,"_createExDetailsFromInterface");function kE(w,R){var B=R[r1](VK);if(B&&B[vr]>=4)w[Jd]=B[1],w[UC]=parseInt(B[2]);else{var F=R[r1]($K);F&&F[vr]>=3?(w[Jd]=F[1],w[UC]=parseInt(F[2])):w[Jd]=R}}s(kE,"_parseFilename");function Lk(w,R,B){var F=w[Jd];R.fn&&B&&B[vr]>R.fn&&(R.ln&&B[vr]>R.ln?(F=kc(B[R.fn]||""),w[UC]=parseInt(kc(B[R.ln]||""))||0):F=kc(B[R.fn]||"")),F&&kE(w,F)}s(Lk,"_handleFilename");function zK(w){var R=!1;if(w&&te(w)){var B=kc(w);B&&(R=jN.test(B))}return R}s(zK,"_isStackFrame");var Fk=cn({level:1,method:1,assembly:0,fileName:0,line:0});function YK(w,R){var B,F;if(w&&te(w)&&kc(w)){F=(B={},B[Gh]=Fk,B.level=R,B.assembly=kc(w),B.method=$N,B.fileName="",B.line=0,B.sizeInBytes=0,B);for(var oe=0;oe<Dk[vr];){var Ee=Dk[oe];if(Ee.chk&&!Ee.chk(w))break;Ee.pre&&(w=Ee.pre(w));var we=w[r1](Ee.re);if(we&&we[vr]>=Ee.len){Ee.m&&(F.method=kc(we[Ee.m]||$N)),Ee.hdl?Ee.hdl(F,Ee,we):Ee.fn&&(Ee.ln?(F[Jd]=kc(we[Ee.fn]||""),F[UC]=parseInt(kc(we[Ee.ln]||""))||0):kE(F,we[Ee.fn]||""));break}oe++}}return Mk(F)}s(YK,"_extractStackFrame");function t7(w){var R,B=(R={},R[Gh]=Fk,R.level=w.level,R.method=w.method,R.assembly=w[Jw],R.fileName=w[Jd],R.line=w[UC],R.sizeInBytes=0,R);return Mk(B)}s(t7,"_stackFrameFromInterface");function Mk(w){var R=HK;return w&&(R+=w.method[vr],R+=w.assembly[vr],R+=w.fileName[vr],R+=w.level.toString()[vr],R+=w.line.toString()[vr],w[MC]=R),w}s(Mk,"_populateFrameSizeInBytes");function n7(w){return{level:w.level,method:w.method,assembly:w[Jw],fileName:w[Jd],line:w[UC]}}s(n7,"_parsedFrameToInterface");var r7=function(){function w(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return s(w,"DataPoint"),w}(),KK=function(){function w(R,B,F,oe,Ee,we,Qe,Xe,pt){this.aiDataContract={ver:1,metrics:1,properties:0};var on=this;on.ver=2;var br=new r7;br[NC]=oe>0?oe:void 0,br.max=isNaN(we)||we===null?void 0:we,br.min=isNaN(Ee)||Ee===null?void 0:Ee,br[ed]=cl(R,B)||lf,br.value=F,br.stdDev=isNaN(Qe)||Qe===null?void 0:Qe,on.metrics=[br],on[cf]=Vp(R,Xe),on[Bc]=td(R,pt)}return s(w,"Metric"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",w.dataType="MetricData",w}(),XC="";function JK(w,R){return R===void 0&&(R=!1),w==null?R:w.toString()[DC]()==="true"}s(JK,"stringToBoolOrDefault");function Qk(w){(isNaN(w)||w<0)&&(w=0),w=V3(w);var R=XC+w%1e3,B=XC+wh(w/1e3)%60,F=XC+wh(w/(1e3*60))%60,oe=XC+wh(w/(1e3*60*60))%24,Ee=wh(w/(1e3*60*60*24));return R=R[vr]===1?"00"+R:R[vr]===2?"0"+R:R,B=B[vr]<2?"0"+B:B,F=F[vr]<2?"0"+F:F,oe=oe[vr]<2?"0"+oe:oe,(Ee>0?Ee+".":XC)+oe+":"+F+":"+B+"."+R}s(Qk,"msToTimeSpan");function XK(w,R){var B=null;return El(w,function(F){if(F.identifier===R)return B=F,-1}),B}s(XK,"getExtensionByName");function zh(w,R,B,F,oe){return!oe&&te(w)&&(w==="Script error."||w==="Script error")}s(zh,"isCrossOriginError");var ZK=function(){function w(R,B,F,oe,Ee,we,Qe){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var Xe=this;Xe.ver=2,Xe.id=qC(R,Qe),Xe.url=uf(R,F),Xe[ed]=cl(R,B)||lf,isNaN(oe)||(Xe[bE]=Qk(oe)),Xe[cf]=Vp(R,Ee),Xe[Bc]=td(R,we)}return s(w,"PageView"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",w.dataType="PageviewData",w}(),ZC=function(){function w(R,B,F,oe,Ee,we,Qe,Xe,pt,on,br,qr){pt===void 0&&(pt="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var un=this;un.ver=2,un.id=B,un[bE]=Qk(Ee),un.success=we,un.resultCode=Qe+"",un.type=cl(R,pt);var En=ON(R,F,Xe,oe);un.data=uf(R,oe)||En.data,un.target=cl(R,En.target),on&&(un.target="".concat(un.target," | ").concat(on)),un[ed]=cl(R,En[ed]),un[cf]=Vp(R,br),un[Bc]=td(R,qr)}return s(w,"RemoteDependencyData"),w.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",w.dataType="RemoteDependencyData",w}(),Ok=function(){function w(R,B,F,oe,Ee){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var we=this;we.ver=2,B=B||lf,we[CE]=Xw(R,B),we[cf]=Vp(R,oe),we[Bc]=td(R,Ee),F&&(we[vE]=F)}return s(w,"Trace"),w.envelopeType="Microsoft.ApplicationInsights.{0}.Message",w.dataType="MessageData",w}(),BE=function(){function w(R,B,F,oe,Ee,we,Qe){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var Xe=this;Xe.ver=2,Xe.url=uf(R,F),Xe[ed]=cl(R,B)||lf,Xe[cf]=Vp(R,Ee),Xe[Bc]=td(R,we),Qe&&(Xe.domProcessing=Qe.domProcessing,Xe[bE]=Qe[bE],Xe.networkConnect=Qe.networkConnect,Xe.perfTotal=Qe.perfTotal,Xe.receivedResponse=Qe.receivedResponse,Xe.sentRequest=Qe.sentRequest)}return s(w,"PageViewPerformance"),w.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",w.dataType="PageviewPerformanceData",w}(),eJ=function(){function w(R,B){this.aiDataContract={baseType:1,baseData:1},this.baseType=R,this.baseData=B}return s(w,"Data"),w}(),c_=nE({Verbose:0,Information:1,Warning:2,Error:3,Critical:4}),tJ=function(){function w(){}return s(w,"ConfigurationManager"),w.getConfig=function(R,B,F,oe){oe===void 0&&(oe=!1);var Ee;return F&&R[FC]&&R[FC][F]&&!O(R[FC][F][B])?Ee=R[FC][F][B]:Ee=R[B],O(Ee)?oe:Ee},w}();function pf(w){var R="ai."+w+".";return function(B){return R+B}}s(pf,"_aiNameFunc");var ex=pf("application"),Ca=pf("device"),u_=pf("location"),tx=pf("operation"),d_=pf("session"),Yh=pf("user"),i1=pf("cloud"),PE=pf("internal"),Kh=function(w){Ph(R,w);function R(){return w.call(this)||this}return s(R,"ContextTagKeys"),R}(uE({applicationVersion:ex("ver"),applicationBuild:ex("build"),applicationTypeId:ex("typeId"),applicationId:ex("applicationId"),applicationLayer:ex("layer"),deviceId:Ca("id"),deviceIp:Ca("ip"),deviceLanguage:Ca("language"),deviceLocale:Ca("locale"),deviceModel:Ca("model"),deviceFriendlyName:Ca("friendlyName"),deviceNetwork:Ca("network"),deviceNetworkName:Ca("networkName"),deviceOEMName:Ca("oemName"),deviceOS:Ca("os"),deviceOSVersion:Ca("osVersion"),deviceRoleInstance:Ca("roleInstance"),deviceRoleName:Ca("roleName"),deviceScreenResolution:Ca("screenResolution"),deviceType:Ca("type"),deviceMachineName:Ca("machineName"),deviceVMName:Ca("vmName"),deviceBrowser:Ca("browser"),deviceBrowserVersion:Ca("browserVersion"),locationIp:u_("ip"),locationCountry:u_("country"),locationProvince:u_("province"),locationCity:u_("city"),operationId:tx("id"),operationName:tx("name"),operationParentId:tx("parentId"),operationRootId:tx("rootId"),operationSyntheticSource:tx("syntheticSource"),operationCorrelationVector:tx("correlationVector"),sessionId:d_("id"),sessionIsFirst:d_("isFirst"),sessionIsNew:d_("isNew"),userAccountAcquisitionDate:Yh("accountAcquisitionDate"),userAccountId:Yh("accountId"),userAgent:Yh("userAgent"),userId:Yh("id"),userStoreRegion:Yh("storeRegion"),userAuthUserId:Yh("authUserId"),userAnonymousUserAcquisitionDate:Yh("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:Yh("authUserAcquisitionDate"),cloudName:i1("name"),cloudRole:i1("role"),cloudRoleVer:i1("roleVer"),cloudRoleInstance:i1("roleInstance"),cloudEnvironment:i1("environment"),cloudLocation:i1("location"),cloudDeploymentUnit:i1("deploymentUnit"),internalNodeName:PE("nodeName"),internalSdkVersion:PE("sdkVersion"),internalAgentVersion:PE("agentVersion"),internalSnippet:PE("snippet"),internalSdkSrc:PE("sdkSrc")}));function Uk(w,R,B,F,oe,Ee){B=cl(F,B)||lf,(O(w)||O(R)||O(B))&&We("Input doesn't contain all required fields");var we="";w[xk]&&(we=w[xk],delete w[xk]);var Qe={name:B,time:Up(new Date),iKey:we,ext:Ee||{},tags:[],data:{},baseType:R,baseData:w};return O(oe)||ft(oe,function(Xe,pt){Qe.data[Xe]=pt}),Qe}s(Uk,"createTelemetryItem");var qk=function(){function w(){}return s(w,"TelemetryItemCreator"),w.create=Uk,w}(),nJ={UserExt:"user",DeviceExt:"device",TraceExt:"trace",WebExt:"web",AppExt:"app",OSExt:"os",SessionExt:"ses",SDKExt:"sdk"},rJ=new Kh;function i7(w){var R=null;if(pe(Event))R=new Event(w);else{var B=ke();B&&B.createEvent&&(R=B.createEvent("Event"),R.initEvent(w,!0,!0))}return R}s(i7,"createDomEvent");function Wk(w,R){_N(w,null,null,R)}s(Wk,"_disableEvents");function o7(w){var R=ke(),B=mn(),F=!1,oe=[],Ee=1;B&&!O(B.onLine)&&!B.onLine&&(Ee=2);var we=0,Qe=qr(),Xe=BK(Wp("OfflineListener"),w);try{if(on(qt())&&(F=!0),R){var pt=R.body||R;pt.ononline&&on(pt)&&(F=!0)}}catch{F=!1}function on(Pi){var Qa=!1;return Pi&&(Qa=yk(Pi,"online",Qr,Xe),Qa&&yk(Pi,"offline",Er,Xe)),Qa}s(on,"_enableEvents");function br(){return Qe}s(br,"_isOnline");function qr(){return!(we===2||Ee===2)}s(qr,"calCurrentState");function un(){var Pi=qr();Qe!==Pi&&(Qe=Pi,El(oe,function(Qa){var rx={isOnline:Qe,rState:Ee,uState:we};try{Qa(rx)}catch{}}))}s(un,"listnerNoticeCheck");function En(Pi){we=Pi,un()}s(En,"setOnlineState");function Qr(){Ee=1,un()}s(Qr,"_setOnline");function Er(){Ee=2,un()}s(Er,"_setOffline");function mi(){var Pi=qt();if(Pi&&F){if(Wk(Pi,Xe),R){var Qa=R.body||R;ie(Qa.ononline)||Wk(Qa,Xe)}F=!1}}s(mi,"_unload");function io(Pi){return oe.push(Pi),{rm:s(function(){var Qa=oe.indexOf(Pi);if(Qa>-1)return oe.splice(Qa,1)},"rm")}}return s(io,"addListener"),{isOnline:br,isListening:s(function(){return F},"isListening"),unload:mi,addListener:io,setOnlineState:En}}s(o7,"createOfflineListener");var iJ="AppInsightsPropertiesPlugin",Hk="AppInsightsChannelPlugin",nx="ApplicationInsightsAnalytics";t.AnalyticsPluginIdentifier=nx,t.BreezeChannelIdentifier=Hk,t.ConfigurationManager=tJ,t.ConnectionStringParser=t_,t.ContextTagKeys=Kh,t.CtxTagKeys=rJ,t.DEFAULT_BREEZE_ENDPOINT=Ck,t.DEFAULT_BREEZE_PATH=yE,t.Data=eJ,t.DisabledPropertyName=Vw,t.DistributedTracingModes=MK,t.Envelope=n_,t.Event=WK,t.EventPersistence=EE,t.Exception=ff,t.Extensions=nJ,t.HttpMethod=RN,t.Metric=KK,t.PageView=ZK,t.PageViewPerformance=BE,t.ProcessLegacy=$w,t.PropertiesPluginIdentifier=iJ,t.RemoteDependencyData=ZC,t.RequestHeaders=kN,t.SampleRate=SN,t.SeverityLevel=c_,t.TelemetryItemCreator=qk,t.ThrottleMgr=qK,t.Trace=Ok,t.correlationIdCanIncludeCorrelationHeader=jh,t.correlationIdGetCorrelationContext=MN,t.correlationIdGetCorrelationContextValue=QN,t.correlationIdGetPrefix=kk,t.correlationIdSetPrefix=Rk,t.createDistributedTraceContextFromTrace=Bk,t.createDomEvent=i7,t.createOfflineListener=o7,t.createTelemetryItem=Uk,t.createTraceParent=SC,t.dataSanitizeException=wk,t.dataSanitizeId=qC,t.dataSanitizeInput=_k,t.dataSanitizeKey=Tk,t.dataSanitizeKeyAndAddUniqueness=Ik,t.dataSanitizeMeasurements=td,t.dataSanitizeMessage=Xw,t.dataSanitizeProperties=Vp,t.dataSanitizeString=cl,t.dataSanitizeUrl=uf,t.dateTimeUtilsDuration=FK,t.dateTimeUtilsNow=LK,t.dsPadNumber=BN,t.findAllScripts=hk,t.findW3cTraceParent=mk,t.formatTraceParent=e1,t.getExtensionByName=XK,t.isBeaconApiSupported=Fh,t.isCrossOriginError=zh,t.isInternalApplicationInsightsEndpoint=FN,t.isSampledFlag=qw,t.isValidSpanId=kC,t.isValidTraceId=RC,t.isValidTraceParent=BC,t.msToTimeSpan=Qk,t.parseConnectionString=e_,t.parseTraceParent=Zu,t.strNotSpecified=lf,t.stringToBoolOrDefault=JK,t.urlGetAbsoluteUrl=DK,t.urlGetCompleteUrl=DN,t.urlGetPathName=NK,t.urlParseFullHost=$p,t.urlParseHost=NN,t.urlParseUrl=WC,t.utlCanUseLocalStorage=Zw,t.utlCanUseSessionStorage=zp,t.utlDisableStorage=IE,t.utlEnableStorage=QK,t.utlGetLocalStorage=qN,t.utlGetSessionStorage=HN,t.utlGetSessionStorageKeys=zC,t.utlRemoveSessionStorage=GN,t.utlRemoveStorage=nd,t.utlSetLocalStorage=WN,t.utlSetSessionStorage=OK,t.utlSetStoragePrefix=TE})});var UIe=H((uM,OIe)=>{f();(function(t,e){typeof uM=="object"&&typeof OIe<"u"?e(uM):typeof define=="function"&&define.amd?define(["exports"],e):(t=typeof globalThis<"u"?globalThis:t||self,e((t.Microsoft=t.Microsoft||{},t.Microsoft.ApplicationInsights=t.Microsoft.ApplicationInsights||{})))})(uM,function(t){"use strict";function e(A,x){return A||x}s(e,"_pureAssign");function n(A,x){return A[x]}s(n,"_pureRef");var r=void 0,i=null,o="",a="function",l="object",c="prototype",u="__proto__",d="undefined",p="constructor",m="Symbol",h="_polyfill",g="length",y="name",v="call",b="toString",E=e(Object),_=n(E,c),k=e(String),P=n(k,c),N=e(Math),U=e(Array),ne=n(U,c),he=n(ne,"slice");function ae(A,x){try{return{v:A.apply(this,x)}}catch(T){return{e:T}}}s(ae,"safe");function G(A,x){var T=ae(A);return T.e?x:T.v}s(G,"safeGet");var W;function ue(A){return function(x){return typeof x===A}}s(ue,"_createIs");function ie(A){var x="[object "+A+"]";return function(T){return!!(T&&V(T)===x)}}s(ie,"_createObjIs");function V(A){return _[b].call(A)}s(V,"objToString");function O(A){return typeof A===d||A===d}s(O,"isUndefined");function Y(A){return!ee(A)}s(Y,"isStrictUndefined");function te(A){return A===i||O(A)}s(te,"isNullOrUndefined");function pe(A){return A===i||!ee(A)}s(pe,"isStrictNullOrUndefined");function ee(A){return!!A||A!==r}s(ee,"isDefined");function ce(A){return!W&&(W=["string","number","boolean",d,"symbol","bigint"]),A!==l&&W.indexOf(A)!==-1}s(ce,"isPrimitiveType");var me=ue("string"),Ne=ue(a);function Se(A){return!A&&te(A)?!1:!!A&&typeof A===l}s(Se,"isObject");var Je=n(U,"isArray"),Me=ie("Date"),ft=ue("number"),It=ue("boolean"),yt=ie("Error");function vt(A){return!!(A&&A.then&&Ne(A.then))}s(vt,"isPromiseLike");function le(A){return!(!A||G(function(){return!(A&&0+A)},!A))}s(le,"isTruthy");var Oe=n(E,"getOwnPropertyDescriptor");function ye(A,x){return!!A&&_.hasOwnProperty[v](A,x)}s(ye,"objHasOwnProperty");var tt=e(n(E,"hasOwn"),X);function X(A,x){return ye(A,x)||!!Oe(A,x)}s(X,"polyObjHasOwn");function re(A,x,T){if(A&&Se(A)){for(var S in A)if(tt(A,S)&&x[v](T||A,S,A[S])===-1)break}}s(re,"objForEachKey");var We={e:"enumerable",c:"configurable",v:"value",w:"writable",g:"get",s:"set"};function De(A){var x={};if(x[We.c]=!0,x[We.e]=!0,A.l){x.get=function(){return A.l.v};var T=Oe(A.l,"v");T&&T.set&&(x.set=function(S){A.l.v=S})}return re(A,function(S,D){x[We[S]]=Y(D)?x[We[S]]:D}),x}s(De,"_createProp");var be=n(E,"defineProperty");function ze(A,x,T){return be(A,x,De(T))}s(ze,"objDefine");function it(A,x,T,S,D){var L={};return re(A,function(Q,J){ht(L,Q,x?J:Q),ht(L,J,T?J:Q)}),S?S(L):L}s(it,"_createKeyValueMap");function ht(A,x,T,S){be(A,x,{value:T,enumerable:!0,writable:!1})}s(ht,"_assignMapValue");var Ot=e(k),cn="[object Error]";function Lt(A,x){var T=o,S=_[b][v](A);S===cn&&(A={stack:Ot(A.stack),message:Ot(A.message),name:Ot(A.name)});try{T=JSON.stringify(A,i,x?typeof x=="number"?x:4:r),T=(T?T.replace(/"(\w+)"\s*:\s{0,1}/g,"$1: "):i)||Ot(A)}catch(D){T=" - "+Lt(D,x)}return S+": "+T}s(Lt,"dumpObj");function Wn(A){throw new Error(A)}s(Wn,"throwError");function zn(A){throw new TypeError(A)}s(zn,"throwTypeError");var fr=n(E,"freeze");function Ae(A){return A}s(Ae,"_doNothing");function He(A){return A[u]||i}s(He,"_getProto");var ut=n(E,"assign"),At=n(E,"keys");function Xt(A){return fr&&re(A,function(x,T){(Je(T)||Se(T))&&Xt(T)}),Ht(A)}s(Xt,"objDeepFreeze");var Ht=e(fr,Ae),yn=e(n(E,"getPrototypeOf"),He);function vn(A){return it(A,1,0,Ht)}s(vn,"createEnum");function jt(A){return it(A,0,0,Ht)}s(jt,"createEnumKeyMap");function nn(A){var x={};return re(A,function(T,S){ht(x,T,S[1]),ht(x,S[0],S[1])}),Ht(x)}s(nn,"createSimpleMap");function Jt(A){return nn(A)}s(Jt,"createTypeMap");var Tn=jt({asyncIterator:0,hasInstance:1,isConcatSpreadable:2,iterator:3,match:4,matchAll:5,replace:6,search:7,species:8,split:9,toPrimitive:10,toStringTag:11,unscopables:12}),Fn="__tsUtils$gblCfg",Yn;function Ur(){var A;return typeof globalThis!==d&&(A=globalThis),!A&&typeof self!==d&&(A=self),!A&&typeof window!==d&&(A=window),!A&&typeof global!==d&&(A=global),A}s(Ur,"_getGlobalValue");function Yr(){if(!Yn){var A=ae(Ur).v||{};Yn=A[Fn]=A[Fn]||{}}return Yn}s(Yr,"_getGlobalConfig");var Fr=jr;function jr(A,x,T){var S=x?x[A]:i;return function(D){var L=(D?D[A]:i)||S;if(L||T){var Q=arguments;return(L||T).apply(D,L?he[v](Q,1):Q)}zn('"'+Ot(A)+'" not defined for '+Lt(D))}}s(jr,"_unwrapFunctionWithPoly");function tr(A){return function(x){return x[A]}}s(tr,"_unwrapProp");var Vr=n(N,"min"),_e=n(N,"max"),q=Fr("slice",P),ge=Fr("substring",P),ve=jr("substr",P,Z);function Z(A,x,T){return te(A)&&zn("Invalid "+Lt(A)),T<0?o:(x=x||0,x<0&&(x=_e(x+A[g],0)),O(T)?q(A,x):q(A,x,x+T))}s(Z,"polyStrSubstr");function M(A,x){return ge(A,0,x)}s(M,"strLeft");var ke="_urid",$e;function qt(){if(!$e){var A=Yr();$e=A.gblSym=A.gblSym||{k:{},s:{}}}return $e}s(qt,"_globalSymbolRegistry");var Sn;function mn(A){var x={description:Ot(A),toString:s(function(){return m+"("+A+")"},"toString")};return x[h]=!0,x}s(mn,"polyNewSymbol");function lr(A){var x=qt();if(!tt(x.k,A)){var T=mn(A),S=At(x.s).length;T[ke]=function(){return S+"_"+T[b]()},x.k[A]=T,x.s[T[ke]()]=Ot(A)}return x.k[A]}s(lr,"polySymbolFor");function pr(A){!Sn&&(Sn={});var x,T=Tn[A];return T&&(x=Sn[T]=Sn[T]||mn(m+"."+T)),x}s(pr,"polyGetKnownSymbol");var bn;function Gt(){bn=Yr()}s(Gt,"_initTestHooks");function Mr(A){var x={};return!bn&&Gt(),x.b=bn.lzy,be(x,"v",{configurable:!0,get:s(function(){var T=A();return bn.lzy||be(x,"v",{value:T}),x.b=bn.lzy,T},"get")}),x}s(Mr,"getLazy");function Ws(A){return be({toJSON:s(function(){return A},"toJSON")},"v",{value:A})}s(Ws,"createCachedValue");var Lp="window",El;function Fp(A,x){var T;return function(){return!bn&&Gt(),(!T||bn.lzy)&&(T=Ws(ae(A,x).v)),T.v}}s(Fp,"_getGlobalInstFn");function ef(A){return!bn&&Gt(),(!El||A===!1||bn.lzy)&&(El=Ws(ae(Ur).v||i)),El.v}s(ef,"getGlobal");function ra(A,x){var T;if(!El||x===!1?T=ef(x):T=El.v,T&&T[A])return T[A];if(A===Lp)try{return window}catch{}return i}s(ra,"getInst");function Ih(){return!!eC()}s(Ih,"hasDocument");var eC=Fp(ra,["document"]);function G3(){return!!Mp()}s(G3,"hasWindow");var Mp=Fp(ra,[Lp]);function aK(){return!!Th()}s(aK,"hasNavigator");var Th=Fp(ra,["navigator"]),lK=Fp(function(){return!!ae(function(){return process&&(process.versions||{}).node}).v}),QA,j3;function fw(){return QA=Ws(ae(ra,[m]).v),QA}s(fw,"_initSymbol");function cK(A){var x=(bn.lzy?0:QA)||fw();return x.v?x.v[A]:r}s(cK,"_getSymbolKey");function kc(){return!!wh()}s(kc,"hasSymbol");function wh(){return!bn&&Gt(),((bn.lzy?0:QA)||fw()).v}s(wh,"getSymbol");function Zb(A,x){var T=Tn[A];!bn&&Gt();var S=(bn.lzy?0:QA)||fw();return S.v?S.v[T||A]:x?r:pr(A)}s(Zb,"getKnownSymbol");function OA(A,x){!bn&&Gt();var T=(bn.lzy?0:QA)||fw();return T.v?T.v(A):x?i:mn(A)}s(OA,"newSymbol");function eE(A){return!bn&&Gt(),j3=(bn.lzy?0:j3)||Ws(ae(cK,["for"]).v),(j3.v||lr)(A)}s(eE,"symbolFor");function _h(A){return!!A&&Ne(A.next)}s(_h,"isIterator");function pw(A){return!pe(A)&&Ne(A[Zb(3)])}s(pw,"isIterable");var tE;function V3(A,x,T){if(A&&(_h(A)||(!tE&&(tE=Ws(Zb(3))),A=A[tE.v]?A[tE.v]():i),_h(A))){var S=r,D=r;try{for(var L=0;!(D=A.next()).done&&x[v](T||A,D.value,L,A)!==-1;)L++}catch(Q){S={e:Q},A.throw&&(D=i,A.throw(S))}finally{try{D&&!D.done&&A.return&&A.return(D)}finally{if(S)throw S.e}}}}s(V3,"iterForOf");function tC(A,x,T){return A.apply(x,T)}s(tC,"fnApply");function nC(A,x){return!O(x)&&A&&(Je(x)?tC(A.push,A,x):_h(x)||pw(x)?V3(x,function(T){A.push(T)}):A.push(x)),A}s(nC,"arrAppend");function Un(A,x,T){if(A)for(var S=A[g]>>>0,D=0;D<S&&!(D in A&&x[v](T||A,A[D],D,A)===-1);D++);}s(Un,"arrForEach");var pu=Fr("indexOf",ne),UA=Fr("map",ne);function rC(A,x,T){return((A?A.slice:i)||he).apply(A,he[v](arguments,1))}s(rC,"arrSlice");var uK=Fr("reduce",ne),Sh=e(n(E,"create"),dK);function dK(A){if(!A)return{};var x=typeof A;x!==l&&x!==a&&zn("Prototype must be an Object or function: "+Lt(A));function T(){}return s(T,"tempFunc"),T[c]=A,new T}s(dK,"polyObjCreate");var $3;function nE(A,x){var T=E.setPrototypeOf||function(S,D){var L;!$3&&($3=Ws((L={},L[u]=[],L instanceof Array))),$3.v?S[u]=D:re(D,function(Q,J){return S[Q]=J})};return T(A,x)}s(nE,"objSetPrototypeOf");function fK(A,x,T){ae(ze,[x,y,{v:A,c:!0,e:!1}]),x=nE(x,T);function S(){this[p]=x,ae(ze,[this,y,{v:A,c:!0,e:!1}])}return s(S,"__"),x[c]=T===i?Sh(T):(S[c]=T[c],new S),x}s(fK,"_createCustomError");function rE(A,x){x&&(A[y]=x)}s(rE,"_setName");function Ma(A,x,T){var S=T||Error,D=S[c][y],L=Error.captureStackTrace;return fK(A,function(){var Q=this,J=arguments;try{ae(rE,[S,A]);var se=tC(S,Q,he[v](J))||Q;if(se!==Q){var Ce=yn(Q);Ce!==yn(se)&&nE(se,Ce)}return L&&L(se,Q[p]),x&&x(se,J),se}finally{ae(rE,[S,D])}},S)}s(Ma,"createCustomError");function Rh(){return(Date.now||iE)()}s(Rh,"utcNow");function iE(){return new Date().getTime()}s(iE,"polyUtcNow");function nN(A){return s(function(T){return te(T)&&zn("strTrim called ["+Lt(T)+"]"),T&&T.replace&&(T=T.replace(A,o)),T},"_doTrim")}s(nN,"_createTrimFn");var pK=nN(/^\s+|(?=\s)\s+$/g),ji=jr("trim",P,pK),qA=n(N,"floor"),kh,z3,oE;function mu(A){if(!A||typeof A!==l)return!1;oE||(oE=G3()?Mp():!0);var x=!1;if(A!==oE){z3||(kh=Function[c][b],z3=kh[v](E));try{var T=yn(A);x=!T,x||(ye(T,p)&&(T=T[p]),x=!!(T&&typeof T===a&&kh[v](T)===z3))}catch{}}return x}s(mu,"isPlainObject");function rN(A){return A.value&&mw(A),!0}s(rN,"_defaultDeepCopyHandler");var iN=[iC,mw,sN,Bh];function Y3(A,x,T,S){var D;return Un(A,function(L){if(L.k===x)return D=L,-1}),D||(D={k:x,v:x},A.push(D),S(D)),D.v}s(Y3,"_getSetVisited");function WA(A,x,T,S){var D=T.handler,L=T.path?S?T.path.concat(S):T.path:[],Q={handler:T.handler,src:T.src,path:L},J=typeof x,se=!1,Ce=x===i;Ce||(x&&J===l?se=mu(x):Ce=ce(J));var Te={type:J,isPrim:Ce,isPlain:se,value:x,result:x,path:L,origin:T.src,copy:s(function(Le,Ye){return WA(A,Le,Ye?Q:T,Ye)},"copy"),copyTo:s(function(Le,Ye){return K3(A,Le,Ye,Q)},"copyTo")};return Te.isPrim?D&&D[v](T,Te)?Te.result:x:Y3(A,x,L,function(Le){ze(Te,"result",{g:s(function(){return Le.v},"g"),s:s(function(Ge){Le.v=Ge},"s")});for(var Ye=0,Fe=D;!(Fe||(Ye<iN.length?iN[Ye++]:rN))[v](T,Te);)Fe=i})}s(WA,"_deepCopy");function K3(A,x,T,S){if(!te(T))for(var D in T)x[D]=WA(A,T[D],S,D);return x}s(K3,"_copyProps");function oN(A,x,T){var S={handler:T,src:x,path:[]};return K3([],A,x,S)}s(oN,"objCopyProps");function J3(A,x){var T={handler:x,src:A};return WA([],A,T)}s(J3,"objDeepCopy");function iC(A){var x=A.value;if(Je(x)){var T=A.result=[];return T.length=x.length,A.copyTo(T,x),!0}return!1}s(iC,"arrayDeepCopyHandler");function Bh(A){var x=A.value;return Me(x)?(A.result=new Date(x.getTime()),!0):!1}s(Bh,"dateDeepCopyHandler");function sN(A){return A.type===a}s(sN,"functionDeepCopyHandler");function mw(A){var x=A.value;if(x&&A.isPlain){var T=A.result={};return A.copyTo(T,x),!0}return!1}s(mw,"plainObjDeepCopyHandler");function X3(A,x){return Un(x,function(T){oN(A,T)}),A}s(X3,"_doExtend");function hw(A,x,T,S,D,L,Q){return X3(J3(A)||{},he[v](arguments))}s(hw,"deepExtend");var mK=tr(g),hK=n(N,"round"),aN=jr("endsWith",P,gK);function gK(A,x,T){me(A)||zn("'"+Lt(A)+"' is not a string");var S=me(x)?x:Ot(x),D=!O(T)&&T<A[g]?T:A[g];return ge(A,D-S[g],D)===S}s(gK,"polyStrEndsWith");var Qp=Fr("indexOf",P),gw="ref",Z3="unref",Aw="hasRef",AK="enabled";function yw(A,x,T){var S=!0,D=A?x(i):i,L;function Q(){return S=!1,D&&D[Z3]&&D[Z3](),L}s(Q,"_unref");function J(){D&&T(D),D=i}s(J,"_cancel");function se(){return D=x(D),S||Q(),L}s(se,"_refresh");function Ce(Te){!Te&&D&&J(),Te&&!D&&se()}return s(Ce,"_setEnabled"),L={cancel:J,refresh:se},L[Aw]=function(){return D&&D[Aw]?D[Aw]():S},L[gw]=function(){return S=!0,D&&D[gw]&&D[gw](),L},L[Z3]=Q,L=be(L,AK,{get:s(function(){return!!D},"get"),set:Ce}),{h:L,dn:s(function(){D=i},"dn")}}s(yw,"_createTimerHandler");function Cw(A,x,T){var S=Je(x),D=S?x.length:0,L=(D>0?x[0]:S?r:x)||setTimeout,Q=(D>1?x[1]:r)||clearTimeout,J=T[0];T[0]=function(){se.dn(),tC(J,r,he[v](arguments))};var se=yw(A,function(Ce){if(Ce){if(Ce.refresh)return Ce.refresh(),Ce;tC(Q,r,[Ce])}return tC(L,r,T)},function(Ce){tC(Q,r,[Ce])});return se.h}s(Cw,"_createTimeoutWith");function Ph(A,x){return Cw(!0,r,he[v](arguments))}s(Ph,"scheduleTimeout");function xw(A,x){return Cw(!1,r,he[v](arguments))}s(xw,"createTimeout");var HA,Yu="constructor",Ku="prototype",GA="function",oC="_dynInstFuncs",Dh="_isDynProxy",sC="_dynClass",ek="_dynCls$",jA="_dynInstChk",aC=jA,tk="_dfOpts",vw="_unknown_",lC="__proto__",sE="_dyn"+lC,bw="__dynProto$Gbl",cC="_dynInstProto",uC="useBaseInst",aE="setInstFuncs",VA=Object,dC=VA.getPrototypeOf,nk=VA.getOwnPropertyNames,Ew=ef(),fC=Ew[bw]||(Ew[bw]={o:(HA={},HA[aE]=!0,HA[uC]=!0,HA),n:1e3});function pC(A){return A&&(A===VA[Ku]||A===Array[Ku])}s(pC,"_isObjectOrArrayPrototype");function Op(A){return pC(A)||A===Function[Ku]}s(Op,"_isObjectArrayOrFunctionPrototype");function tf(A){var x;if(A){if(dC)return dC(A);var T=A[lC]||A[Ku]||(A[Yu]?A[Yu][Ku]:null);x=A[sE]||T,ye(A,sE)||(delete A[cC],x=A[sE]=A[cC]||A[sE],A[cC]=T)}return x}s(tf,"_getObjProto");function mC(A,x){var T=[];if(nk)T=nk(A);else for(var S in A)typeof S=="string"&&ye(A,S)&&T.push(S);if(T&&T.length>0)for(var D=0;D<T.length;D++)x(T[D])}s(mC,"_forEachProp");function hC(A,x,T){return x!==Yu&&typeof A[x]===GA&&(T||ye(A,x))&&x!==lC&&x!==Ku}s(hC,"_isDynamicCandidate");function Iw(A){zn("DynamicProto: "+A)}s(Iw,"_throwTypeError");function rk(A){var x=Sh(null);return mC(A,function(T){!x[T]&&hC(A,T,!1)&&(x[T]=A[T])}),x}s(rk,"_getInstanceFuncs");function ik(A,x){for(var T=A.length-1;T>=0;T--)if(A[T]===x)return!0;return!1}s(ik,"_hasVisited");function yK(A,x,T,S){function D(se,Ce,Te){var Le=Ce[Te];if(Le[Dh]&&S){var Ye=se[oC]||{};Ye[aC]!==!1&&(Le=(Ye[Ce[sC]]||{})[Te]||Le)}return function(){return Le.apply(se,arguments)}}s(D,"_instFuncProxy");var L=Sh(null);mC(T,function(se){L[se]=D(x,T,se)});for(var Q=tf(A),J=[];Q&&!Op(Q)&&!ik(J,Q);)mC(Q,function(se){!L[se]&&hC(Q,se,!dC)&&(L[se]=D(x,Q,se))}),J.push(Q),Q=tf(Q);return L}s(yK,"_getBaseFuncs");function CK(A,x,T,S){var D=null;if(A&&ye(T,sC)){var L=A[oC]||Sh(null);if(D=(L[T[sC]]||Sh(null))[x],D||Iw("Missing ["+x+"] "+GA),!D[jA]&&L[aC]!==!1){for(var Q=!ye(A,x),J=tf(A),se=[];Q&&J&&!Op(J)&&!ik(se,J);){var Ce=J[x];if(Ce){Q=Ce===S;break}se.push(J),J=tf(J)}try{Q&&(A[x]=D),D[jA]=1}catch{L[aC]=!1}}}return D}s(CK,"_getInstFunc");function xK(A,x,T){var S=x[A];return S===T&&(S=tf(x)[A]),typeof S!==GA&&Iw("["+A+"] is not a "+GA),S}s(xK,"_getProtoFunc");function vK(A,x,T,S,D){function L(se,Ce){var Te=s(function(){var Le=CK(this,Ce,se,Te)||xK(Ce,se,Te);return Le.apply(this,arguments)},"dynProtoProxy");return Te[Dh]=1,Te}if(s(L,"_createDynamicPrototype"),!pC(A)){var Q=T[oC]=T[oC]||Sh(null);if(!pC(Q)){var J=Q[x]=Q[x]||Sh(null);Q[aC]!==!1&&(Q[aC]=!!D),pC(J)||mC(T,function(se){hC(T,se,!1)&&T[se]!==S[se]&&(J[se]=T[se],delete T[se],(!ye(A,se)||A[se]&&!A[se][Dh])&&(A[se]=L(A,se)))})}}}s(vK,"_populatePrototype");function ok(A,x){if(dC){for(var T=[],S=tf(x);S&&!Op(S)&&!ik(T,S);){if(S===A)return!0;T.push(S),S=tf(S)}return!1}return!0}s(ok,"_checkPrototype");function lE(A,x){return ye(A,Ku)?A.name||x||vw:((A||{})[Yu]||{}).name||x||vw}s(lE,"_getObjName");function ec(A,x,T,S){ye(A,Ku)||Iw("theClass is an invalid class definition.");var D=A[Ku];ok(D,x)||Iw("["+lE(A)+"] not in hierarchy of ["+lE(x)+"]");var L=null;ye(D,sC)?L=D[sC]:(L=ek+lE(A,"_")+"$"+fC.n,fC.n++,D[sC]=L);var Q=ec[tk],J=!!Q[uC];J&&S&&S[uC]!==void 0&&(J=!!S[uC]);var se=rk(x),Ce=yK(D,x,se,J);T(x,Ce);var Te=!!dC&&!!Q[aE];Te&&S&&(Te=!!S[aE]),vK(D,L,x,se,Te!==!1)}s(ec,"dynamicProto"),ec[tk]=fC.o;var Hs="function",lN="object",cN="undefined",cE="prototype",sk=Object,ak=sk[cE];(ef()||{}).Symbol,(ef()||{}).Reflect;var Tw="hasOwnProperty",uN=s(function(A){for(var x,T=1,S=arguments.length;T<S;T++){x=arguments[T];for(var D in x)ak[Tw].call(x,D)&&(A[D]=x[D])}return A},"__objAssignFnImpl"),Up=ut||uN,Nh=s(function(A,x){return Nh=sk.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,S){T.__proto__=S}||function(T,S){for(var D in S)S[Tw](D)&&(T[D]=S[D])},Nh(A,x)},"extendStaticsFn");function uE(A,x){typeof x!==Hs&&x!==null&&zn("Class extends value "+String(x)+" is not a constructor or null"),Nh(A,x);function T(){this.constructor=A}s(T,"__"),A[cE]=x===null?Sh(x):(T[cE]=x[cE],new T)}s(uE,"__extendsFn");function dN(A,x){for(var T=0,S=x.length,D=A.length;T<S;T++,D++)A[D]=x[T];return A}s(dN,"__spreadArrayFn");var ww=vn,bK=Jt,Lh=ww({NONE:0,PENDING:3,INACTIVE:1,ACTIVE:2}),gC="toLowerCase",$r="length",AC="warnToConsole",$A="throwInternal",qp="watch",_w="apply",Vi="push",yC="splice",Aa="logger",CC="cancel",dE="initialize",Fh="identifier",fE="removeNotificationListener",Sw="addNotificationListener",nf="isInitialized",xC="value",zd="getNotifyMgr",vC="getPlugin",Mh="name",Il="processNext",bC="getProcessTelContext",rf="enabled",fN="stopPollingInternalLogs",zA="unload",Rw="onComplete",EC="version",pN="loggingLevelConsole",YA="createNew",of="teardown",kw="messageId",KA="message",sf="diagLog",Bw="_doTeardown",Wp="update",af="getNext",Qh="setNextPlugin",Pw="userAgent",Oh="split",Uh="replace",tc="type",lk="evtName",pE="status",ck="getAllResponseHeaders",uk="isChildEvt",IC="data",qh="getCtx",Yd="setCtx",mN="itemsReceived",Hp="urlString",dk="headers",Gp="timeout",hN="traceFlags",TC;function fk(A,x){TC||(TC=Ma("AggregationError",function(S,D){D[$r]>1&&(S.errors=D[1])}));var T=A||"One or more errors occurred.";throw Un(x,function(S,D){T+=`
`.concat(D," > ").concat(Lt(S))}),new TC(T,x||[])}s(fk,"throwAggregationError");var JA="Promise",XA="rejected";function Ju(A,x){return gN(A,function(T){return x?x({status:"fulfilled",rejected:!1,value:T}):T},function(T){return x?x({status:XA,rejected:!0,reason:T}):T})}s(Ju,"doAwaitResponse");function gN(A,x,T,S){var D=A;try{if(vt(A))(x||T)&&(D=A.then(x,T));else try{x&&(D=x(A))}catch(L){if(T)D=T(L);else throw L}}finally{S&&EK(D,S)}return D}s(gN,"doAwait");function EK(A,x){var T=A;return x&&(vt(A)?A.finally?T=A.finally(x):T=A.then(function(S){return x(),S},function(S){throw x(),S}):x()),T}s(EK,"doFinally");var AN=["pending","resolving","resolved",XA],yN="dispatchEvent",mE;function CN(A){var x;return A&&A.createEvent&&(x=A.createEvent("Event")),!!x&&x.initEvent}s(CN,"_hasInitEventFn");function Dw(A,x,T,S){var D=eC();!mE&&(mE=Ws(!!ae(CN,[D]).v));var L=mE.v?D.createEvent("Event"):S?new Event(x):{};if(T&&T(L),mE.v&&L.initEvent(x,!1,!0),L&&A[yN])A[yN](L);else{var Q=A["on"+x];if(Q)Q(L);else{var J=ra("console");J&&(J.error||J.log)(x,Lt(L))}}}s(Dw,"emitEvent");var xN="unhandledRejection",IK=xN.toLowerCase(),wC=10,Nw;function vN(A){return Ne(A)?A.toString():Lt(A)}s(vN,"dumpFnObj");function bN(A,x,T){var S=rC(arguments,3),D=0,L=!1,Q,J=[],se=!1,Ce=null,Te;function Le(Vt,hn){try{se=!0,Ce&&Ce.cancel(),Ce=null;var Wr=A(function(xi,vi){J.push(function(){try{var ho=D===2?Vt:hn,cr=O(ho)?Q:Ne(ho)?ho(Q):ho;vt(cr)?cr.then(xi,vi):ho?xi(cr):D===3?vi(cr):xi(cr)}catch(Mn){vi(Mn)}}),L&&lt()},S);return Wr}finally{}}s(Le,"_then");function Ye(Vt){return Le(void 0,Vt)}s(Ye,"_catch");function Fe(Vt){var hn=Vt,Wr=Vt;return Ne(Vt)&&(hn=s(function(xi){return Vt&&Vt(),xi},"thenFinally"),Wr=s(function(xi){throw Vt&&Vt(),xi},"catchFinally")),Le(hn,Wr)}s(Fe,"_finally");function Ge(){return AN[D]}s(Ge,"_strState");function lt(){if(J.length>0){var Vt=J.slice();J=[],se=!0,Ce&&Ce.cancel(),Ce=null,x(Vt)}}s(lt,"_processQueue");function et(Vt,hn){return function(Wr){if(D===hn){if(Vt===2&&vt(Wr)){D=1,Wr.then(et(2,1),et(3,1));return}D=Vt,L=!0,Q=Wr,lt(),!se&&Vt===3&&!Ce&&(Ce=Ph(gt,wC))}}}s(et,"_createSettleIfFn");function gt(){if(!se)if(se=!0,lK())process.emit(xN,Q,Te);else{var Vt=Mp()||ef();!Nw&&(Nw=Ws(ae(ra,[JA+"RejectionEvent"]).v)),Dw(Vt,IK,function(hn){return ze(hn,"promise",{g:s(function(){return Te},"g")}),hn.reason=Q,hn},!!Nw.v)}}s(gt,"_notifyUnhandledRejection"),Te={then:Le,catch:Ye,finally:Fe},be(Te,"state",{get:Ge}),kc()&&(Te[Zb(11)]="IPromise");function Nt(){return"IPromise "+Ge()+(L?" - "+vN(Q):"")}return s(Nt,"_toString"),Te.toString=Nt,s(function(){Ne(T)||zn(JA+": executor is not a function - "+vN(T));var hn=et(3,0);try{T.call(Te,et(2,0),hn)}catch(Wr){hn(Wr)}},"_initialize")(),Te}s(bN,"_createPromise");function TK(A){return function(x){var T=rC(arguments,1);return A(function(S,D){try{var L=[],Q=1;V3(x,function(J,se){J&&(Q++,gN(J,function(Ce){L[se]=Ce,--Q===0&&S(L)},D))}),Q--,Q===0&&S(L)}catch(J){D(J)}},T)}}s(TK,"_createAllPromise");function wK(A){return Ws(function(x){var T=rC(arguments,1);return A(function(S,D){var L=[],Q=1;function J(se,Ce){Q++,Ju(se,function(Te){Te.rejected?L[Ce]={status:XA,reason:Te.reason}:L[Ce]={status:"fulfilled",value:Te.value},--Q===0&&S(L)})}s(J,"processItem");try{Je(x)?Un(x,J):pw(x)?V3(x,J):zn("Input is not an iterable"),Q--,Q===0&&S(L)}catch(se){D(se)}},T)})}s(wK,"_createAllSettledPromise");function EN(A){Un(A,function(x){try{x()}catch{}})}s(EN,"syncItemProcessor");function IN(A){var x=ft(A)?A:0;return function(T){Ph(function(){EN(T)},x)}}s(IN,"timeoutItemProcessor");function Lw(A,x){return bN(Lw,IN(x),A,x)}s(Lw,"createAsyncPromise");var Fw;function _K(A,x){!Fw&&(Fw=Ws(ae(ra,[JA]).v||null));var T=Fw.v;if(!T)return Lw(A);Ne(A)||zn(JA+": executor is not a function - "+Lt(A));var S=0;function D(){return AN[S]}s(D,"_strState");var L=new T(function(Q,J){function se(Te){S=2,Q(Te)}s(se,"_resolve");function Ce(Te){S=3,J(Te)}s(Ce,"_reject"),A(se,Ce)});return be(L,"state",{get:D}),L}s(_K,"createNativePromise");var Mw;function Qw(A){return bN(Qw,EN,A)}s(Qw,"createSyncPromise");function hu(A,x){return!Mw&&(Mw=wK(Qw)),Mw.v(A,x)}s(hu,"createSyncAllSettledPromise");var Ow;function _C(A,x){return!Ow&&(Ow=Ws(_K)),Ow.v.call(this,A,x)}s(_C,"createPromise");var pk=TK(_C),Xu=void 0,pi="",jp="channels",ya="core",Kd="createPerfMgr",Uw="disabled",ZA="extensionConfig",SC="extensions",Zu="processTelemetry",RC="priority",kC="eventsSent",BC="eventsDiscarded",qw="eventsSendRequest",e1="perfEvent",mk="offlineEventsStored",hk="offlineBatchSent",Ww="offlineBatchDrop",hE="getPerfMgr",Hw="domain",Gw="path",TN="Not dynamic - ",gk=/-([a-z])/g,SK=/([^\w\d_$])/g,RK=/^(\d+[\w\d_$])/;function jw(A){return!te(A)}s(jw,"isNotNullOrUndefined");function PC(A){var x=A;return x&&me(x)&&(x=x[Uh](gk,function(T,S){return S.toUpperCase()}),x=x[Uh](SK,"_"),x=x[Uh](RK,function(T,S){return"_"+S})),x}s(PC,"normalizeJsName");function Tl(A,x){return A&&x?Qp(A,x)!==-1:!1}s(Tl,"strContains");function gE(A){return A&&A.toISOString()||""}s(gE,"toISOString");function ll(A){return yt(A)?A[Mh]:pi}s(ll,"getExceptionName");function Wh(A,x,T,S,D){var L=T;return A&&(L=A[x],L!==T&&(!D||D(L))&&(!S||S(T))&&(L=T,A[x]=L)),L}s(Wh,"setValue");function wN(A,x,T){var S;return A?(S=A[x],!S&&te(S)&&(S=O(T)?{}:T,A[x]=S)):S=O(T)?{}:T,S}s(wN,"getSetValue");function kK(A,x){var T=null,S=null;return Ne(A)?T=A:S=A,function(){var D=arguments;if(T&&(S=T()),S)return S[x][_w](S,D)}}s(kK,"_createProxyFunction");function AE(A,x,T,S,D){A&&x&&T&&(D!==!1||O(A[x]))&&(A[x]=kK(T,S))}s(AE,"proxyFunctionAs");function Ak(A,x,T,S){return A&&x&&Se(A)&&Je(T)&&Un(T,function(D){me(D)&&AE(A,D,x,D,S)}),A}s(Ak,"proxyFunctions");function BK(A){return function(){function x(){var T=this;A&&re(A,function(S,D){T[S]=D})}return s(x,"class_1"),x}()}s(BK,"createClassFromInterface");function yk(A){return A&&ut&&(A=sk(ut({},A))),A}s(yk,"optimizeObject");function _N(A,x,T,S,D,L){var Q=arguments,J=Q[0]||{},se=Q[$r],Ce=!1,Te=1;for(se>0&&It(J)&&(Ce=J,J=Q[Te]||{},Te++),Se(J)||(J={});Te<se;Te++){var Le=Q[Te],Ye=Je(Le),Fe=Se(Le);for(var Ge in Le){var lt=Ye&&Ge in Le||Fe&&tt(Le,Ge);if(lt){var et=Le[Ge],gt=void 0;if(Ce&&et&&((gt=Je(et))||mu(et))){var Nt=J[Ge];gt?Je(Nt)||(Nt=[]):mu(Nt)||(Nt={}),et=_N(Ce,Nt,et)}et!==void 0&&(J[Ge]=et)}}}return J}s(_N,"objExtend");function Vw(A){try{return A.responseText}catch{}return null}s(Vw,"getResponseText");function SN(A,x){return A?"XDomainRequest,Response:"+Vw(A)||"":x}s(SN,"formatErrorMessageXdr");function $w(A,x){return A?"XMLHttpRequest,Status:"+A[pE]+",Response:"+Vw(A)||A.response||"":x}s($w,"formatErrorMessageXhr");function RN(A,x){return x&&(ft(x)?A=[x].concat(A):Je(x)&&(A=x.concat(A))),A}s(RN,"prependTransports");var Ck="Microsoft_ApplicationInsights_BypassAjaxInstrumentation",yE="withCredentials",lf="timeout";function xk(A,x,T,S,D,L){S===void 0&&(S=!1),D===void 0&&(D=!1);function Q(se,Ce,Te){try{se[Ce]=Te}catch{}}s(Q,"_wrapSetXhrProp");var J=new XMLHttpRequest;return S&&Q(J,Ck,S),T&&Q(J,yE,T),J.open(A,x,!D),T&&Q(J,yE,T),!D&&L&&Q(J,lf,L),J}s(xk,"openXhr");function kN(A){var x={};if(me(A)){var T=ji(A)[Oh](/[\r\n]+/);Un(T,function(S){if(S){var D=S.indexOf(": ");if(D!==-1){var L=ji(S.substring(0,D))[gC](),Q=ji(S.substring(D+1));x[L]=Q}else x[ji(S)]=1}})}return x}s(kN,"convertAllHeadersToMap");function Hh(A,x,T){if(!A[T]&&x&&x.getResponseHeader){var S=x.getResponseHeader(T);S&&(A[T]=ji(S))}return A}s(Hh,"_appendHeader");var vr="kill-duration",DC="kill-duration-seconds",t1="time-delta-millis";function n1(A,x){var T={};return A[ck]?T=kN(A[ck]()):x&&(T=Hh(T,A,t1),T=Hh(T,A,vr),T=Hh(T,A,DC)),T}s(n1,"_getAllResponseHeaders");var vk="documentMode",CE="location",NC="console",zw="JSON",bk="crypto",Yw="msCrypto",LC="msie",r1="trident/",Ek="XMLHttpRequest",ed=null,FC=null,cf=!1,Bc=null,MC=null;function xE(A,x){var T=!1;if(A){try{if(T=x in A,!T){var S=A[cE];S&&(T=x in S)}}catch{}if(!T)try{var D=new A;T=!O(D[x])}catch{}}return T}s(xE,"_hasProperty");function QC(A){if(A&&cf){var x=ra("__mockLocation");if(x)return x}return typeof location===lN&&location?location:ra(CE)}s(QC,"getLocation");function vE(){return typeof console!==cN?console:ra(NC)}s(vE,"getConsole");function OC(){return!!(typeof JSON===lN&&JSON||ra(zw)!==null)}s(OC,"hasJSON");function gu(){return OC()?JSON||ra(zw):null}s(gu,"getJSON");function Kw(){return ra(bk)}s(Kw,"getCrypto");function Jw(){return ra(Yw)}s(Jw,"getMsCrypto");function Jd(){var A=Th();if(A&&(A[Pw]!==FC||ed===null)){FC=A[Pw];var x=(FC||pi)[gC]();ed=Tl(x,LC)||Tl(x,r1)}return ed}s(Jd,"isIE");function UC(A){if(A===void 0&&(A=null),!A){var x=Th()||{};A=x?(x.userAgent||pi)[gC]():pi}var T=(A||pi)[gC]();if(Tl(T,LC)){var S=eC()||{};return _e(parseInt(T[Oh](LC)[1]),S[vk]||0)}else if(Tl(T,r1)){var D=parseInt(T[Oh](r1)[1]);if(D)return D+4}return null}s(UC,"getIEVersion");function Gh(A){return(MC===null||A===!1)&&(MC=aK()&&!!Th().sendBeacon),MC}s(Gh,"isBeaconsSupported");function bE(A){var x=!1;try{x=!!ra("fetch");var T=ra("Request");x&&A&&T&&(x=xE(T,"keepalive"))}catch{}return x}s(bE,"isFetchSupported");function Ik(){return Bc===null&&(Bc=typeof XDomainRequest!==cN,Bc&&Tk()&&(Bc=Bc&&!xE(ra(Ek),"withCredentials"))),Bc}s(Ik,"useXDomainRequest");function Tk(){var A=!1;try{var x=ra(Ek);A=!!x}catch{}return A}s(Tk,"isXhrSupported");var cl=4294967296,uf=4294967295,Xw=123456789,wk=987654321,Vp=!1,td=Xw,qC=wk;function _k(A){A<0&&(A>>>=0),td=Xw+A&uf,qC=wk-A&uf,Vp=!0}s(_k,"_mwcSeed");function BN(){try{var A=Rh()&2147483647;_k((Math.random()*cl^A)+A)}catch{}}s(BN,"_autoSeedMwc");function Sk(A){var x=0,T=Kw()||Jw();return T&&T.getRandomValues&&(x=T.getRandomValues(new Uint32Array(1))[0]&uf),x===0&&Jd()&&(Vp||BN(),x=PN()&uf),x===0&&(x=qA(cl*Math.random()|0)),A||(x>>>=0),x}s(Sk,"random32");function PN(A){qC=36969*(qC&65535)+(qC>>16)&uf,td=18e3*(td&65535)+(td>>16)&uf;var x=(qC<<16)+(td&65535)>>>0&uf|0;return A||(x>>>=0),x}s(PN,"mwcRandom32");function PK(A){A===void 0&&(A=22);for(var x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",T=Sk()>>>0,S=0,D=pi;D[$r]<A;)S++,D+=x.charAt(T&63),T>>>=6,S===5&&(T=(Sk()<<2&4294967295|T&3)>>>0,S=0);return D}s(PK,"newId");var WC="3.3.6",DK="."+PK(6),NK=0;function DN(A){return A.nodeType===1||A.nodeType===9||!+A.nodeType}s(DN,"_canAcceptData");function NN(A,x){var T=x[A.id];if(!T){T={};try{DN(x)&&ze(x,A.id,{e:!1,v:T})}catch{}}return T}s(NN,"_getCache");function $p(A,x){return x===void 0&&(x=!1),PC(A+NK+++(x?"."+WC:pi)+DK)}s($p,"createUniqueNamespace");function LN(A){var x={id:$p("_aiData-"+(A||pi)+"."+WC),accept:s(function(T){return DN(T)},"accept"),get:s(function(T,S,D,L){var Q=T[x.id];return Q?Q[PC(S)]:(L&&(Q=NN(x,T),Q[PC(S)]=D),D)},"get"),kill:s(function(T,S){if(T&&T[S])try{delete T[S]}catch{}},"kill")};return x}s(LN,"createElmNodeData");function HC(A){return A&&Se(A)&&(A.isVal||A.fb||tt(A,"v")||tt(A,"mrg")||tt(A,"ref")||A.set)}s(HC,"_isConfigDefaults");function FN(A,x,T){var S,D=T.dfVal||ee;if(x&&T.fb){var L=T.fb;Je(L)||(L=[L]);for(var Q=0;Q<L[$r];Q++){var J=L[Q],se=x[J];if(D(se)?S=se:A&&(se=A.cfg[J],D(se)&&(S=se),A.set(A.cfg,Ot(J),se)),D(S))break}}return!D(S)&&D(T.v)&&(S=T.v),S}s(FN,"_getDefault");function Rk(A,x,T){var S=T;if(T&&HC(T)&&(S=FN(A,x,T)),S){HC(S)&&(S=Rk(A,x,S));var D;Je(S)?(D=[],D[$r]=S[$r]):mu(S)&&(D={}),D&&(re(S,function(L,Q){Q&&HC(Q)&&(Q=Rk(A,x,Q)),D[L]=Q}),S=D)}return S}s(Rk,"_resolveDefaultValue");function kk(A,x,T,S){var D,L,Q,J=S,se,Ce,Te,Le;HC(J)?(D=J.isVal,L=J.set,Te=J.rdOnly,Le=J.blkVal,se=J.mrg,Ce=J.ref,!Ce&&O(Ce)&&(Ce=!!se),Q=FN(A,x,J)):Q=S,Le&&A.blkVal(x,T);var Ye,Fe=!0,Ge=x[T];(Ge||!te(Ge))&&(Ye=Ge,Fe=!1,D&&Ye!==Q&&!D(Ye)&&(Ye=Q,Fe=!0),L&&(Ye=L(Ye,Q,x),Fe=Ye===Q)),Fe?Q?Ye=Rk(A,x,Q):Ye=Q:(mu(Ye)||Je(Q))&&se&&Q&&(mu(Q)||Je(Q))&&re(Q,function(lt,et){kk(A,Ye,lt,et)}),A.set(x,T,Ye),Ce&&A.ref(x,T),Te&&A.rdOnly(x,T)}s(kk,"_applyDefaultValue");var jh=eE("[[ai_dynCfg_1]]"),MN=eE("[[ai_blkDynCfg_1]]"),QN=eE("[[ai_frcDynCfg_1]]");function ON(A){if(A){var x;if(Je(A)?(x=[],x[$r]=A[$r]):mu(A)&&(x={}),x)return re(A,function(T,S){x[T]=ON(S)}),x}return A}s(ON,"_cfgDeepCopy");function LK(A){if(A){var x=A[jh]||A;if(x.cfg&&(x.cfg===A||x.cfg[jh]===x))return x}return null}s(LK,"getDynamicConfigHandler");function FK(A){if(A&&(mu(A)||Je(A)))try{A[MN]=!0}catch{}return A}s(FK,"blockDynamicConversion");function Bk(A,x,T){var S=!1;return T&&!A[x.blkVal]&&(S=T[QN],!S&&!T[MN]&&(S=mu(T)||Je(T))),S}s(Bk,"_canMakeDynamic");function GC(A){zn("InvalidAccess:"+A)}s(GC,"throwInvalidAccess");var MK=["push","pop","shift","unshift","splice"],EE=s(function(A,x,T,S){A&&A[$A](3,108,"".concat(T," [").concat(x,"] failed - ")+Lt(S))},"_throwDynamicError");function Vh(A,x,T){Je(x)&&Un(MK,function(S){var D=x[S];x[S]=function(){for(var L=[],Q=0;Q<arguments.length;Q++)L[Q]=arguments[Q];var J=D[_w](this,L);return $C(A,x,T,"Patching"),J}})}s(Vh,"_patchArray");function Xd(A,x){var T=Oe(A,x);return T&&T.get}s(Xd,"_getOwnPropGetter");function UN(A,x,T,S){var D={n:T,h:[],trk:s(function(Ce){Ce&&Ce.fn&&(pu(D.h,Ce)===-1&&D.h[Vi](Ce),A.trk(Ce,D))},"trk"),clr:s(function(Ce){var Te=pu(D.h,Ce);Te!==-1&&D.h[yC](Te,1)},"clr")},L=!0,Q=!1;function J(){L&&(Q=Q||Bk(J,A,S),S&&!S[jh]&&Q&&(S=$C(A,S,T,"Converting")),L=!1);var Ce=A.act;return Ce&&D.trk(Ce),S}s(J,"_getProperty"),J[A.prop]={chng:s(function(){A.add(D)},"chng")};function se(Ce){if(S!==Ce){J[A.ro]&&!A.upd&&GC("["+T+"] is read-only:"+Lt(x)),L&&(Q=Q||Bk(J,A,S),L=!1);var Te=Q&&J[A.rf];if(Q)if(Te){re(S,function(Ye){S[Ye]=Ce?Ce[Ye]:Xu});try{re(Ce,function(Ye,Fe){jC(A,S,Ye,Fe)}),Ce=S}catch(Ye){EE((A.hdlr||{})[Aa],T,"Assigning",Ye),Q=!1}}else S&&S[jh]&&re(S,function(Ye){var Fe=Xd(S,Ye);if(Fe){var Ge=Fe[A.prop];Ge&&Ge.chng()}});if(Ce!==S){var Le=Ce&&Bk(J,A,Ce);!Te&&Le&&(Ce=$C(A,Ce,T,"Converting")),S=Ce,Q=Le}A.add(D)}}s(se,"_setProperty"),ze(x,D.n,{g:J,s:se})}s(UN,"_createDynamicProperty");function jC(A,x,T,S){if(x){var D=Xd(x,T),L=D&&!!D[A.prop];L?x[T]=S:UN(A,x,T,S)}return x}s(jC,"_setDynamicProperty");function VC(A,x,T,S){if(x){var D=Xd(x,T),L=D&&!!D[A.prop],Q=S&&S[0],J=S&&S[1],se=S&&S[2];if(!L){if(se)try{FK(x)}catch(Ce){EE((A.hdlr||{})[Aa],T,"Blocking",Ce)}try{jC(A,x,T,x[T]),D=Xd(x,T)}catch(Ce){EE((A.hdlr||{})[Aa],T,"State",Ce)}}Q&&(D[A.rf]=Q),J&&(D[A.ro]=J),se&&(D[A.blkVal]=!0)}return x}s(VC,"_setDynamicPropertyState");function $C(A,x,T,S){try{re(x,function(D,L){jC(A,x,D,L)}),x[jh]||(be(x,jh,{get:s(function(){return A.hdlr},"get")}),Vh(A,x,T))}catch(D){EE((A.hdlr||{})[Aa],T,S,D)}return x}s($C,"_makeDynamicObject");var IE="[[ai_",TE="]]";function QK(A){var x=OA(IE+"get"+A.uid+TE),T=OA(IE+"ro"+A.uid+TE),S=OA(IE+"rf"+A.uid+TE),D=OA(IE+"blkVal"+A.uid+TE),L=OA(IE+"dtl"+A.uid+TE),Q=null,J=null,se;function Ce(Fe,Ge){var lt=se.act;try{se.act=Fe,Fe&&Fe[L]&&(Un(Fe[L],function(gt){gt.clr(Fe)}),Fe[L]=[]),Ge({cfg:A.cfg,set:A.set.bind(A),setDf:A.setDf.bind(A),ref:A.ref.bind(A),rdOnly:A.rdOnly.bind(A)})}catch(gt){var et=A[Aa];throw et&&et[$A](1,107,Lt(gt)),gt}finally{se.act=lt||null}}s(Ce,"_useHandler");function Te(){if(Q){var Fe=Q;Q=null,J&&J[CC](),J=null;var Ge=[];if(Un(Fe,function(lt){if(lt&&(lt[L]&&(Un(lt[L],function(et){et.clr(lt)}),lt[L]=null),lt.fn))try{Ce(lt,lt.fn)}catch(et){Ge[Vi](et)}}),Q)try{Te()}catch(lt){Ge[Vi](lt)}Ge[$r]>0&&fk("Watcher error(s): ",Ge)}}s(Te,"_notifyWatchers");function Le(Fe){if(Fe&&Fe.h[$r]>0){Q||(Q=[]),J||(J=Ph(function(){J=null,Te()},0));for(var Ge=0;Ge<Fe.h[$r];Ge++){var lt=Fe.h[Ge];lt&&pu(Q,lt)===-1&&Q[Vi](lt)}}}s(Le,"_addWatcher");function Ye(Fe,Ge){if(Fe){var lt=Fe[L]=Fe[L]||[];pu(lt,Ge)===-1&&lt[Vi](Ge)}}return s(Ye,"_trackHandler"),se={prop:x,ro:T,rf:S,blkVal:D,hdlr:A,add:Le,notify:Te,use:Ce,trk:Ye},se}s(QK,"_createState");function Zw(A,x){var T={fn:x,rm:s(function(){T.fn=null,A=null,x=null},"rm")};return ze(T,"toJSON",{v:s(function(){return"WatcherHandler"+(T.fn?"":"[X]")},"v")}),A.use(T,x),T}s(Zw,"_createAndUseHandler");function qN(A,x,T){var S=LK(x);if(S)return S;var D=$p("dyncfg",!0),L=x&&T!==!1?x:ON(x),Q;function J(){Q.notify()}s(J,"_notifyWatchers");function se(et,gt,Nt){try{et=jC(Q,et,gt,Nt)}catch(Vt){EE(A,gt,"Setting value",Vt)}return et[gt]}s(se,"_setValue");function Ce(et){return Zw(Q,et)}s(Ce,"_watch");function Te(et,gt){Q.use(null,function(Nt){var Vt=Q.upd;try{O(gt)||(Q.upd=gt),et(Nt)}finally{Q.upd=Vt}})}s(Te,"_block");function Le(et,gt){var Nt;return VC(Q,et,gt,(Nt={},Nt[0]=!0,Nt))[gt]}s(Le,"_ref");function Ye(et,gt){var Nt;return VC(Q,et,gt,(Nt={},Nt[1]=!0,Nt))[gt]}s(Ye,"_rdOnly");function Fe(et,gt){var Nt;return VC(Q,et,gt,(Nt={},Nt[2]=!0,Nt))[gt]}s(Fe,"_blkPropValue");function Ge(et,gt){return gt&&re(gt,function(Nt,Vt){kk(lt,et,Nt,Vt)}),et}s(Ge,"_applyDefaults");var lt={uid:null,cfg:L,logger:A,notify:J,set:se,setDf:Ge,watch:Ce,ref:Le,rdOnly:Ye,blkVal:Fe,_block:Te};return ze(lt,"uid",{c:!1,e:!1,w:!1,v:D}),Q=QK(lt),$C(Q,L,"config","Creating"),lt}s(qN,"_createDynamicHandler");function WN(A,x){A?(A[AC](x),A[$A](2,108,x)):GC(x)}s(WN,"_logInvalidAccess");function nd(A,x,T,S){var D=qN(T,A||{},S);return x&&D.setDf(D.cfg,x),D}s(nd,"createDynamicConfig");function zp(A,x,T){var S=A[jh]||A;return S.cfg&&(S.cfg===A||S.cfg[jh]===S)?S[qp](x):(WN(T,TN+Lt(A)),nd(A,null,T)[qp](x))}s(zp,"onConfigChange");function zC(A,x){if(A&&A[zA])return A[zA](x)}s(zC,"runTargetUnload");function HN(A,x,T){var S;return T||(S=_C(function(D){T=D})),A&&mK(A)>0?Ju(zC(A[0],x),function(){HN(rC(A,1),x,T)}):T(),S}s(HN,"doUnloadAll");var OK=500,GN="Microsoft_ApplicationInsights_BypassAjaxInstrumentation";function UK(A,x,T){return!A&&te(A)?x:It(A)?A:Ot(A)[gC]()==="true"}s(UK,"_stringToBoolOrDefault");function qK(A){return{mrg:!0,v:A}}s(qK,"cfgDfMerge");function Pk(A,x,T){return{fb:T,isVal:A,v:x}}s(Pk,"cfgDfValidate");function df(A,x){return{fb:x,set:UK,v:!!A}}s(df,"cfgDfBoolean");var e_=[kC,BC,qw,e1],t_=null,n_;function WK(A,x){return function(){var T=arguments,S=jN(x);if(S){var D=S.listener;D&&D[A]&&D[A][_w](D,T)}}}s(WK,"_listenerProxyFunc");function HK(){var A=ra("Microsoft");return A&&(t_=A.ApplicationInsights),t_}s(HK,"_getExtensionNamespace");function jN(A){var x=t_;return!x&&A.disableDbgExt!==!0&&(x=t_||HK()),x?x.ChromeDbgExt:null}s(jN,"getDebugExt");function GK(A){if(!n_){n_={};for(var x=0;x<e_[$r];x++)n_[e_[x]]=WK(e_[x],A)}return n_}s(GK,"getDebugListener");var YC,VN="warnToConsole",jK="AI (Internal): ",VK="AI: ",$K="AITR_",$N={loggingLevelConsole:0,loggingLevelTelemetry:1,maxMessageLimit:25,enableDebug:!1},KC=(YC={},YC[0]=null,YC[1]="errorToConsole",YC[2]=VN,YC[3]="debugToConsole",YC);function Au(A){return A?'"'+A[Uh](/\"/g,pi)+'"':pi}s(Au,"_sanitizeDiagnosticText");function wE(A,x){var T=vE();if(T){var S="log";T[A]&&(S=A),Ne(T[S])&&T[S](x)}}s(wE,"_logToConsole");var r_=function(){function A(x,T,S,D){S===void 0&&(S=!1);var L=this;L[kw]=x,L[KA]=(S?VK:jK)+x;var Q=pi;OC()&&(Q=gu().stringify(D));var J=(T?" message:"+Au(T):pi)+(D?" props:"+Au(Q):pi);L[KA]+=J}return s(A,"_InternalLogMessage"),A.dataType="MessageData",A}();function _E(A,x){return(A||{})[Aa]||new SE(x)}s(_E,"safeGetLogger");var SE=function(){function A(x){this.identifier="DiagnosticLogger",this.queue=[];var T=0,S={},D,L,Q,J,se;ec(A,this,function(Ce){se=Le(x||{}),Ce.consoleLoggingLevel=function(){return D},Ce[$A]=function(Ge,lt,et,gt,Nt){Nt===void 0&&(Nt=!1);var Vt=new r_(lt,et,Nt,gt);if(J)throw Lt(Vt);var hn=KC[Ge]||VN;if(O(Vt[KA]))Fe("throw"+(Ge===1?"Critical":"Warning"),Vt);else{if(Nt){var Wr=+Vt[kw];!S[Wr]&&D>=Ge&&(Ce[hn](Vt[KA]),S[Wr]=!0)}else D>=Ge&&Ce[hn](Vt[KA]);Te(Ge,Vt)}},Ce.debugToConsole=function(Ge){wE("debug",Ge),Fe("warning",Ge)},Ce[AC]=function(Ge){wE("warn",Ge),Fe("warning",Ge)},Ce.errorToConsole=function(Ge){wE("error",Ge),Fe("error",Ge)},Ce.resetInternalMessageCount=function(){T=0,S={}},Ce.logInternalMessage=Te,Ce[zA]=function(Ge){se&&se.rm(),se=null};function Te(Ge,lt){if(!Ye()){var et=!0,gt=$K+lt[kw];if(S[gt]?et=!1:S[gt]=!0,et&&(Ge<=L&&(Ce.queue[Vi](lt),T++,Fe(Ge===1?"error":"warn",lt)),T===Q)){var Nt="Internal events throttle limit per PageView reached for this app.",Vt=new r_(23,Nt,!1);Ce.queue[Vi](Vt),Ge===1?Ce.errorToConsole(Nt):Ce[AC](Nt)}}}s(Te,"_logInternalMessage");function Le(Ge){return zp(nd(Ge,$N,Ce).cfg,function(lt){var et=lt.cfg;D=et[pN],L=et.loggingLevelTelemetry,Q=et.maxMessageLimit,J=et.enableDebug})}s(Le,"_setDefaultsFromConfig");function Ye(){return T>=Q}s(Ye,"_areInternalMessagesThrottled");function Fe(Ge,lt){var et=jN(x||{});et&&et[sf]&&et[sf](Ge,lt)}s(Fe,"_debugExtMsg")})}return s(A,"DiagnosticLogger"),A.__ieDyn=1,A}();function Dk(A){return A||new SE}s(Dk,"_getLogger");function wn(A,x,T,S,D,L){L===void 0&&(L=!1),Dk(A)[$A](x,T,S,D,L)}s(wn,"_throwInternal");function i_(A,x){Dk(A)[AC](x)}s(i_,"_warnToConsole");var RE,$h,zN="toGMTString",YN="toUTCString",o_="cookie",Yp="expires",KN="isCookieUseDisabled",s_="disableCookiesUsage",JN="_ckMgr",a_=null,JC=null,l_=null,ff,XN={},ZN={},e7=(RE={cookieCfg:qK(($h={},$h[Hw]={fb:"cookieDomain",dfVal:jw},$h.path={fb:"cookiePath",dfVal:jw},$h.enabled=Xu,$h.ignoreCookies=Xu,$h.blockedCookies=Xu,$h)),cookieDomain:Xu,cookiePath:Xu},RE[s_]=Xu,RE);function Nk(){!ff&&(ff=Mr(function(){return eC()}))}s(Nk,"_getDoc");function kE(A){return A?A.isEnabled():!0}s(kE,"_isMgrEnabled");function Lk(A,x){return x&&A&&Je(A.ignoreCookies)?pu(A.ignoreCookies,x)!==-1:!1}s(Lk,"_isIgnoredCookie");function zK(A,x){return x&&A&&Je(A.blockedCookies)&&pu(A.blockedCookies,x)!==-1?!0:Lk(A,x)}s(zK,"_isBlockedCookie");function Fk(A,x){var T=x[rf];if(te(T)){var S=void 0;O(A[KN])||(S=!A[KN]),O(A[s_])||(S=!A[s_]),T=S}return T}s(Fk,"_isCfgEnabled");function YK(A,x){var T,S,D,L,Q,J,se,Ce;A=nd(A||ZN,null,x).cfg,L=zp(A,function(Le){Le.setDf(Le.cfg,e7),T=Le.ref(Le.cfg,"cookieCfg"),S=T[Gw]||"/",D=T[Hw],Q=Fk(A,T)!==!1,J=T.getCookie||KK,se=T.setCookie||XC,Ce=T.delCookie||XC},x);var Te={isEnabled:s(function(){var Le=Fk(A,T)!==!1&&Q&&t7(x),Ye=ZN[JN];return Le&&Ye&&Te!==Ye&&(Le=kE(Ye)),Le},"isEnabled"),setEnabled:s(function(Le){Q=Le!==!1,T[rf]=Le},"setEnabled"),set:s(function(Le,Ye,Fe,Ge,lt){var et=!1;if(kE(Te)&&!zK(T,Le)){var gt={},Nt=ji(Ye||pi),Vt=Qp(Nt,";");if(Vt!==-1&&(Nt=ji(M(Ye,Vt)),gt=Mk(ge(Ye,Vt+1))),Wh(gt,Hw,Ge||D,le,O),!te(Fe)){var hn=Jd();if(O(gt[Yp])){var Wr=Rh(),xi=Wr+Fe*1e3;if(xi>0){var vi=new Date;vi.setTime(xi),Wh(gt,Yp,n7(vi,hn?zN:YN)||n7(vi,hn?zN:YN)||pi,le)}}hn||Wh(gt,"max-age",pi+Fe,null,O)}var ho=QC();ho&&ho.protocol==="https:"&&(Wh(gt,"secure",null,null,O),JC===null&&(JC=!JK((Th()||{})[Pw])),JC&&Wh(gt,"SameSite","None",null,O)),Wh(gt,Gw,lt||S,null,O),se(Le,r7(Nt,gt)),et=!0}return et},"set"),get:s(function(Le){var Ye=pi;return kE(Te)&&!Lk(T,Le)&&(Ye=J(Le)),Ye},"get"),del:s(function(Le,Ye){var Fe=!1;return kE(Te)&&(Fe=Te.purge(Le,Ye)),Fe},"del"),purge:s(function(Le,Ye){var Fe,Ge=!1;if(t7(x)){var lt=(Fe={},Fe[Gw]=Ye||"/",Fe[Yp]="Thu, 01 Jan 1970 00:00:01 GMT",Fe);Jd()||(lt["max-age"]="0"),Ce(Le,r7(pi,lt)),Ge=!0}return Ge},"purge"),unload:s(function(Le){L&&L.rm(),L=null},"unload")};return Te[JN]=Te,Te}s(YK,"createCookieMgr");function t7(A){if(a_===null){a_=!1,!ff&&Nk();try{var x=ff.v||{};a_=x[o_]!==void 0}catch(T){wn(A,2,68,"Cannot access document.cookie - "+ll(T),{exception:Lt(T)})}}return a_}s(t7,"areCookiesSupported");function Mk(A){var x={};if(A&&A[$r]){var T=ji(A)[Oh](";");Un(T,function(S){if(S=ji(S||pi),S){var D=Qp(S,"=");D===-1?x[S]=null:x[ji(M(S,D))]=ji(ge(S,D+1))}})}return x}s(Mk,"_extractParts");function n7(A,x){return Ne(A[x])?A[x]():null}s(n7,"_formatDate");function r7(A,x){var T=A||pi;return re(x,function(S,D){T+="; "+S+(te(D)?pi:"="+D)}),T}s(r7,"_formatCookieValue");function KK(A){var x=pi;if(!ff&&Nk(),ff.v){var T=ff.v[o_]||pi;l_!==T&&(XN=Mk(T),l_=T),x=ji(XN[A]||pi)}return x}s(KK,"_getCookieValue");function XC(A,x){!ff&&Nk(),ff.v&&(ff.v[o_]=A+"="+x)}s(XC,"_setCookieValue");function JK(A){return me(A)?!!(Tl(A,"CPU iPhone OS 12")||Tl(A,"iPad; CPU OS 12")||Tl(A,"Macintosh; Intel Mac OS X 10_14")&&Tl(A,"Version/")&&Tl(A,"Safari")||Tl(A,"Macintosh; Intel Mac OS X 10_14")&&aN(A,"AppleWebKit/605.1.15 (KHTML, like Gecko)")||Tl(A,"Chrome/5")||Tl(A,"Chrome/6")||Tl(A,"UnrealEngine")&&!Tl(A,"Chrome")||Tl(A,"UCBrowser/12")||Tl(A,"UCBrowser/11")):!1}s(JK,"uaDisallowsSameSiteNone");var Qk={perfEvtsSendAll:!1};function XK(A){A.h=null;var x=A.cb;A.cb=[],Un(x,function(T){ae(T.fn,[T.arg])})}s(XK,"_runScheduledListeners");function zh(A,x,T,S){Un(A,function(D){D&&D[x]&&(T?(T.cb[Vi]({fn:S,arg:D}),T.h=T.h||Ph(XK,0,T)):ae(S,[D]))})}s(zh,"_runListeners");var ZK=function(){function A(x){this.listeners=[];var T,S,D=[],L={h:null,cb:[]},Q=nd(x,Qk);S=Q[qp](function(J){T=!!J.cfg.perfEvtsSendAll}),ec(A,this,function(J){ze(J,"listeners",{g:s(function(){return D},"g")}),J[Sw]=function(se){D[Vi](se)},J[fE]=function(se){for(var Ce=pu(D,se);Ce>-1;)D[yC](Ce,1),Ce=pu(D,se)},J[kC]=function(se){zh(D,kC,L,function(Ce){Ce[kC](se)})},J[BC]=function(se,Ce){zh(D,BC,L,function(Te){Te[BC](se,Ce)})},J[qw]=function(se,Ce){zh(D,qw,Ce?L:null,function(Te){Te[qw](se,Ce)})},J[e1]=function(se){se&&(T||!se[uk]())&&zh(D,e1,null,function(Ce){se.isAsync?Ph(function(){return Ce[e1](se)},0):Ce[e1](se)})},J[mk]=function(se){se&&se[$r]&&zh(D,mk,L,function(Ce){Ce[mk](se)})},J[hk]=function(se){se&&se[IC]&&zh(D,hk,L,function(Ce){Ce[hk](se)})},J[Ww]=function(se,Ce){if(se>0){var Te=Ce||0;zh(D,Ww,L,function(Le){Le[Ww](se,Te)})}},J[zA]=function(se){var Ce=s(function(){S&&S.rm(),S=null,D=[],L.h&&L.h[CC](),L.h=null,L.cb=[]},"_finishUnload"),Te;if(zh(D,"unload",null,function(Le){var Ye=Le[zA](se);Ye&&(Te||(Te=[]),Te[Vi](Ye))}),Te)return _C(function(Le){return Ju(pk(Te),function(){Ce(),Le()})});Ce()}})}return s(A,"NotificationManager"),A.__ieDyn=1,A}(),ZC="ctx",Ok="ParentContextKey",BE="ChildrenContextKey",eJ=null,c_=function(){function A(x,T,S){var D=this;if(D.start=Rh(),D[Mh]=x,D.isAsync=S,D[uk]=function(){return!1},Ne(T)){var L;ze(D,"payload",{g:s(function(){return!L&&Ne(T)&&(L=T(),T=null),L},"g")})}D[qh]=function(Q){return Q?Q===A[Ok]||Q===A[BE]?D[Q]:(D[ZC]||{})[Q]:null},D[Yd]=function(Q,J){if(Q)if(Q===A[Ok])D[Q]||(D[uk]=function(){return!0}),D[Q]=J;else if(Q===A[BE])D[Q]=J;else{var se=D[ZC]=D[ZC]||{};se[Q]=J}},D.complete=function(){var Q=0,J=D[qh](A[BE]);if(Je(J))for(var se=0;se<J[$r];se++){var Ce=J[se];Ce&&(Q+=Ce.time)}D.time=Rh()-D.start,D.exTime=D.time-Q,D.complete=function(){}}}return s(A,"PerfEvent"),A.ParentContextKey="parent",A.ChildrenContextKey="childEvts",A}(),tJ=function(){function A(x){this.ctx={},ec(A,this,function(T){T.create=function(S,D,L){return new c_(S,D,L)},T.fire=function(S){S&&(S.complete(),x&&Ne(x[e1])&&x[e1](S))},T[Yd]=function(S,D){if(S){var L=T[ZC]=T[ZC]||{};L[S]=D}},T[qh]=function(S){return(T[ZC]||{})[S]}})}return s(A,"PerfManager"),A.__ieDyn=1,A}(),pf="CoreUtils.doPerf";function ex(A,x,T,S,D){if(A){var L=A;if(L[hE]&&(L=L[hE]()),L){var Q=void 0,J=L[qh](pf);try{if(Q=L.create(x(),S,D),Q){if(J&&Q[Yd]&&(Q[Yd](c_[Ok],J),J[qh]&&J[Yd])){var se=J[qh](c_[BE]);se||(se=[],J[Yd](c_[BE],se)),se[Vi](Q)}return L[Yd](pf,Q),T(Q)}}catch(Ce){Q&&Q[Yd]&&Q[Yd]("exception",Ce)}finally{Q&&L.fire(Q),L[Yd](pf,J)}}}return T()}s(ex,"doPerf");function Ca(){return eJ}s(Ca,"getGblPerfMgr");var u_="00000000000000000000000000000000",tx="0000000000000000";function d_(A,x,T){return A&&A[$r]===x&&A!==T?!!A.match(/^[\da-f]*$/i):!1}s(d_,"_isValid");function Yh(A){return d_(A,32,u_)}s(Yh,"isValidTraceId");function i1(A){return d_(A,16,tx)}s(i1,"isValidSpanId");var PE=LN("plugin");function Kh(A){return PE.get(A,"state",{},!0)}s(Kh,"_getPluginState");function Uk(A,x){for(var T=[],S=null,D=A[af](),L;D;){var Q=D[vC]();if(Q){S&&S[Qh]&&Q[Zu]&&S[Qh](Q),L=Kh(Q);var J=!!L[nf];Q[nf]&&(J=Q[nf]()),J||T[Vi](Q),S=Q,D=D[af]()}}Un(T,function(se){var Ce=A[ya]();se[dE](A.getCfg(),Ce,x,A[af]()),L=Kh(se),!se[ya]&&!L[ya]&&(L[ya]=Ce),L[nf]=!0,delete L[of]})}s(Uk,"initializePlugins");function qk(A){return A.sort(function(x,T){var S=0;if(T){var D=T[Zu];x[Zu]?S=D?x[RC]-T[RC]:1:D&&(S=-1)}else S=x?1:-1;return S})}s(qk,"sortPlugins");function nJ(A){var x={};return{getName:s(function(){return x[Mh]},"getName"),setName:s(function(T){A&&A.setName(T),x[Mh]=T},"setName"),getTraceId:s(function(){return x.traceId},"getTraceId"),setTraceId:s(function(T){A&&A.setTraceId(T),Yh(T)&&(x.traceId=T)},"setTraceId"),getSpanId:s(function(){return x.spanId},"getSpanId"),setSpanId:s(function(T){A&&A.setSpanId(T),i1(T)&&(x.spanId=T)},"setSpanId"),getTraceFlags:s(function(){return x[hN]},"getTraceFlags"),setTraceFlags:s(function(T){A&&A.setTraceFlags(T),x[hN]=T},"setTraceFlags")}}s(nJ,"createDistributedTraceContext");var rJ="TelemetryPluginChain",i7="_hasRun",Wk="_getTelCtx",o7=0;function iJ(A,x,T){for(;A;){if(A[vC]()===T)return A;A=A[af]()}return B([T],x.config||{},x)}s(iJ,"_getNextProxyStart");function Hk(A,x,T,S){var D=null,L=[];x||(x=nd({},null,T[Aa])),S!==null&&(D=S?iJ(A,T,S):A);var Q={_next:se,ctx:{core:s(function(){return T},"core"),diagLog:s(function(){return _E(T,x.cfg)},"diagLog"),getCfg:s(function(){return x.cfg},"getCfg"),getExtCfg:Te,getConfig:Le,hasNext:s(function(){return!!D},"hasNext"),getNext:s(function(){return D},"getNext"),setNext:s(function(Fe){D=Fe},"setNext"),iterate:Ye,onComplete:J}};function J(Fe,Ge){for(var lt=[],et=2;et<arguments.length;et++)lt[et-2]=arguments[et];Fe&&L[Vi]({func:Fe,self:O(Ge)?Q.ctx:Ge,args:lt})}s(J,"_addOnComplete");function se(){var Fe=D;if(D=Fe?Fe[af]():null,!Fe){var Ge=L;Ge&&Ge[$r]>0&&(Un(Ge,function(lt){try{lt.func.call(lt.self,lt.args)}catch(et){wn(T[Aa],2,73,"Unexpected Exception during onComplete - "+Lt(et))}}),L=[])}return Fe}s(se,"_moveNext");function Ce(Fe,Ge){var lt=null,et=x.cfg;if(et&&Fe){var gt=et[ZA];!gt&&Ge&&(gt={}),et[ZA]=gt,gt=x.ref(et,ZA),gt&&(lt=gt[Fe],!lt&&Ge&&(lt={}),gt[Fe]=lt,lt=x.ref(gt,Fe))}return lt}s(Ce,"_getExtCfg");function Te(Fe,Ge){var lt=Ce(Fe,!0);return Ge&&re(Ge,function(et,gt){if(te(lt[et])){var Nt=x.cfg[et];(Nt||!te(Nt))&&(lt[et]=Nt)}kk(x,lt,et,gt)}),x.setDf(lt,Ge)}s(Te,"_resolveExtCfg");function Le(Fe,Ge,lt){lt===void 0&&(lt=!1);var et,gt=Ce(Fe,!1),Nt=x.cfg;return gt&&(gt[Ge]||!te(gt[Ge]))?et=gt[Ge]:(Nt[Ge]||!te(Nt[Ge]))&&(et=Nt[Ge]),et||!te(et)?et:lt}s(Le,"_getConfig");function Ye(Fe){for(var Ge;Ge=Q._next();){var lt=Ge[vC]();lt&&Fe(lt)}}return s(Ye,"_iterateChain"),Q}s(Hk,"_createInternalContext");function nx(A,x,T,S){var D=nd(x),L=Hk(A,D,T,S),Q=L.ctx;function J(Ce){var Te=L._next();return Te&&Te[Zu](Ce,Q),!Te}s(J,"_processNext");function se(Ce,Te){return Ce===void 0&&(Ce=null),Je(Ce)&&(Ce=B(Ce,D.cfg,T,Te)),nx(Ce||Q[af](),D.cfg,T,Te)}return s(se,"_createNew"),Q[Il]=J,Q[YA]=se,Q}s(nx,"createProcessTelemetryContext");function w(A,x,T){var S=nd(x.config),D=Hk(A,S,x,T),L=D.ctx;function Q(se){var Ce=D._next();return Ce&&Ce[zA](L,se),!Ce}s(Q,"_processNext");function J(se,Ce){return se===void 0&&(se=null),Je(se)&&(se=B(se,S.cfg,x,Ce)),w(se||L[af](),x,Ce)}return s(J,"_createNew"),L[Il]=Q,L[YA]=J,L}s(w,"createProcessTelemetryUnloadContext");function R(A,x,T){var S=nd(x.config),D=Hk(A,S,x,T),L=D.ctx;function Q(se){return L.iterate(function(Ce){Ne(Ce[Wp])&&Ce[Wp](L,se)})}s(Q,"_processNext");function J(se,Ce){return se===void 0&&(se=null),Je(se)&&(se=B(se,S.cfg,x,Ce)),R(se||L[af](),x,Ce)}return s(J,"_createNew"),L[Il]=Q,L[YA]=J,L}s(R,"createProcessTelemetryUpdateContext");function B(A,x,T,S){var D=null,L=!S;if(Je(A)&&A[$r]>0){var Q=null;Un(A,function(J){if(!L&&S===J&&(L=!0),L&&J&&Ne(J[Zu])){var se=F(J,x,T);D||(D=se),Q&&Q._setNext(se),Q=se}})}return S&&!D?B([S],x,T):D}s(B,"createTelemetryProxyChain");function F(A,x,T){var S=null,D=Ne(A[Zu]),L=Ne(A[Qh]),Q;A?Q=A[Fh]+"-"+A[RC]+"-"+o7++:Q="Unknown-0-"+o7++;var J={getPlugin:s(function(){return A},"getPlugin"),getNext:s(function(){return S},"getNext"),processTelemetry:Te,unload:Le,update:Ye,_id:Q,_setNext:s(function(Fe){S=Fe},"_setNext")};function se(){var Fe;return A&&Ne(A[Wk])&&(Fe=A[Wk]()),Fe||(Fe=nx(J,x,T)),Fe}s(se,"_getTelCtx");function Ce(Fe,Ge,lt,et,gt){var Nt=!1,Vt=A?A[Fh]:rJ,hn=Fe[i7];return hn||(hn=Fe[i7]={}),Fe.setNext(S),A&&ex(Fe[ya](),function(){return Vt+":"+lt},function(){hn[Q]=!0;try{var Wr=S?S._id:pi;Wr&&(hn[Wr]=!1),Nt=Ge(Fe)}catch(vi){var xi=S?hn[S._id]:!0;xi&&(Nt=!0),(!S||!xi)&&wn(Fe[sf](),1,73,"Plugin ["+Vt+"] failed during "+lt+" - "+Lt(vi)+", run flags: "+Lt(hn))}},et,gt),Nt}s(Ce,"_processChain");function Te(Fe,Ge){Ge=Ge||se();function lt(et){if(!A||!D)return!1;var gt=Kh(A);return gt[of]||gt[Uw]?!1:(L&&A[Qh](S),A[Zu](Fe,et),!0)}s(lt,"_callProcessTelemetry"),Ce(Ge,lt,"processTelemetry",function(){return{item:Fe}},!Fe.sync)||Ge[Il](Fe)}s(Te,"_processTelemetry");function Le(Fe,Ge){function lt(){var et=!1;if(A){var gt=Kh(A),Nt=A[ya]||gt[ya];A&&(!Nt||Nt===Fe.core())&&!gt[of]&&(gt[ya]=null,gt[of]=!0,gt[nf]=!1,A[of]&&A[of](Fe,Ge)===!0&&(et=!0))}return et}s(lt,"_callTeardown"),Ce(Fe,lt,"unload",function(){},Ge.isAsync)||Fe[Il](Ge)}s(Le,"_unloadPlugin");function Ye(Fe,Ge){function lt(){var et=!1;if(A){var gt=Kh(A),Nt=A[ya]||gt[ya];A&&(!Nt||Nt===Fe.core())&&!gt[of]&&A[Wp]&&A[Wp](Fe,Ge)===!0&&(et=!0)}return et}s(lt,"_callUpdate"),Ce(Fe,lt,"update",function(){},!1)||Fe[Il](Ge)}return s(Ye,"_updatePlugin"),Ht(J)}s(F,"createTelemetryPluginProxy");function oe(){var A=[];function x(S){S&&A[Vi](S)}s(x,"_addHandler");function T(S,D){Un(A,function(L){try{L(S,D)}catch(Q){wn(S[sf](),2,73,"Unexpected error calling unload handler - "+Lt(Q))}}),A=[]}return s(T,"_runHandlers"),{add:x,run:T}}s(oe,"createUnloadHandlerContainer");function Ee(){var A=[];function x(S){var D=A;A=[],Un(D,function(L){try{(L.rm||L.remove).call(L)}catch(Q){wn(S,2,73,"Unloading:"+Lt(Q))}})}s(x,"_doUnload");function T(S){S&&nC(A,S)}return s(T,"_addHook"),{run:x,add:T}}s(Ee,"createUnloadHookContainer");var we,Qe="getPlugin",Xe=(we={},we[ZA]={isVal:jw,v:{}},we),pt=function(){function A(){var x=this,T,S,D,L,Q;Ce(),ec(A,x,function(Te){Te[dE]=function(Le,Ye,Fe,Ge){se(Le,Ye,Ge),T=!0},Te[of]=function(Le,Ye){var Fe=Te[ya];if(!Fe||Le&&Fe!==Le[ya]())return;var Ge,lt=!1,et=Le||w(null,Fe,D&&D[Qe]?D[Qe]():D),gt=Ye||{reason:0,isAsync:!1};function Nt(){lt||(lt=!0,L.run(et,Ye),Q.run(et[sf]()),Ge===!0&&et[Il](gt),Ce())}return s(Nt,"_unloadCallback"),!Te[Bw]||Te[Bw](et,gt,Nt)!==!0?Nt():Ge=!0,Ge},Te[Wp]=function(Le,Ye){var Fe=Te[ya];if(!Fe||Le&&Fe!==Le[ya]())return;var Ge,lt=!1,et=Le||R(null,Fe,D&&D[Qe]?D[Qe]():D),gt=Ye||{reason:0};function Nt(){lt||(lt=!0,se(et.getCfg(),et.core(),et[af]()))}return s(Nt,"_updateCallback"),!Te._doUpdate||Te._doUpdate(et,gt,Nt)!==!0?Nt():Ge=!0,Ge},AE(Te,"_addUnloadCb",function(){return L},"add"),AE(Te,"_addHook",function(){return Q},"add"),ze(Te,"_unloadHooks",{g:s(function(){return Q},"g")})}),x[sf]=function(Te){return J(Te)[sf]()},x[nf]=function(){return T},x.setInitialized=function(Te){T=Te},x[Qh]=function(Te){D=Te},x[Il]=function(Te,Le){Le?Le[Il](Te):D&&Ne(D[Zu])&&D[Zu](Te,null)},x._getTelCtx=J;function J(Te){Te===void 0&&(Te=null);var Le=Te;if(!Le){var Ye=S||nx(null,{},x[ya]);D&&D[Qe]?Le=Ye[YA](null,D[Qe]):Le=Ye[YA](null,D)}return Le}s(J,"_getTelCtx");function se(Te,Le,Ye){nd(Te,Xe,_E(Le)),!Ye&&Le&&(Ye=Le[bC]()[af]());var Fe=D;D&&D[Qe]&&(Fe=D[Qe]()),x[ya]=Le,S=nx(Ye,Te,Le,Fe)}s(se,"_setDefaults");function Ce(){T=!1,x[ya]=null,S=null,D=null,Q=Ee(),L=oe()}s(Ce,"_initDefaults")}return s(A,"BaseTelemetryPlugin"),A.__ieDyn=1,A}();function on(A,x,T){var S={id:x,fn:T};nC(A,S);var D={remove:s(function(){Un(A,function(L,Q){if(L.id===S.id)return A[yC](Q,1),-1})},"remove")};return D}s(on,"_addInitializer");function br(A,x,T){for(var S=!1,D=A[$r],L=0;L<D;++L){var Q=A[L];if(Q)try{if(Q.fn[_w](null,[x])===!1){S=!0;break}}catch(J){wn(T,2,64,"Telemetry initializer failed: "+ll(J),{exception:Lt(J)},!0)}}return!S}s(br,"_runInitializers");var qr=function(A){uE(x,A);function x(){var T=A.call(this)||this;T.identifier="TelemetryInitializerPlugin",T.priority=199;var S,D;L(),ec(x,T,function(Q,J){Q.addTelemetryInitializer=function(se){return on(D,S++,se)},Q[Zu]=function(se,Ce){br(D,se,Ce?Ce[sf]():Q[sf]())&&Q[Il](se,Ce)},Q[Bw]=function(){L()}});function L(){S=0,D=[]}return s(L,"_initDefaults"),T}return s(x,"TelemetryInitializerPlugin"),x.__ieDyn=1,x}(pt),un,En="Plugins must provide initialize method",Qr="_notificationManager",Er="SDK is still unloading...",mi="SDK is not initialized",io=100,Pi=5e4,Qa=Xt((un={cookieCfg:{}},un[SC]={rdOnly:!0,ref:!0,v:[]},un[jp]={rdOnly:!0,ref:!0,v:[]},un[ZA]={ref:!0,v:{}},un[Kd]=Xu,un.loggingLevelConsole=0,un.diagnosticLogInterval=Xu,un));function rx(A,x){return new tJ(x)}s(rx,"_createPerfManager");function DE(A,x,T){var S=[],D=[],L={};return Un(T,function(Q){(te(Q)||te(Q[dE]))&&Wn(En);var J=Q[RC],se=Q[Fh];Q&&J&&(te(L[J])?L[J]=se:i_(A,"Two extensions have same priority #"+J+" - "+L[J]+", "+se)),!J||J<x?S[Vi](Q):D[Vi](Q)}),{core:S,channels:D}}s(DE,"_validateExtensions");function Gk(A,x){var T=!1;return Un(x,function(S){if(S===A)return T=!0,-1}),T}s(Gk,"_isPluginPresent");function f_(A,x,T,S){T&&re(T,function(D,L){S&&mu(L)&&mu(x[D])&&f_(A,x[D],L,S),S&&mu(L)&&mu(x[D])?f_(A,x[D],L,S):A.set(x,D,L)})}s(f_,"_deepMergeConfig");function s7(A,x){var T=null,S=-1;return Un(A,function(D,L){if(D.w===x)return T=D,S=L,-1}),{i:S,l:T}}s(s7,"_findWatcher");function oJ(A,x){var T=s7(A,x).l;return T||(T={w:x,rm:s(function(){var S=s7(A,x);S.i!==-1&&A[yC](S.i,1)},"rm")},A[Vi](T)),T}s(oJ,"_addDelayedCfgListener");function jk(A,x,T){Un(x,function(S){var D=zp(A,S.w,T);delete S.w,S.rm=function(){D.rm()}})}s(jk,"_registerDelayedCfgListener");function a7(A,x,T,S){return x.add(A[qp](function(D){var L=D.cfg.disableDbgExt;L===!0&&S&&(T[fE](S),S=null),T&&!S&&L!==!0&&(S=GK(D.cfg),T[Sw](S))})),S}s(a7,"_initDebugListener");function l7(A){return ze({rm:s(function(){A.rm()},"rm")},"toJSON",{v:s(function(){return"aicore::onCfgChange<"+JSON.stringify(A)+">"},"v")})}s(l7,"_createUnloadHook");var Et=function(){function A(){var x,T,S,D,L,Q,J,se,Ce,Te,Le,Ye,Fe,Ge,lt,et,gt,Nt,Vt,hn,Wr,xi,vi,ho,cr,Mn,bi,Rs,Uo,Ft,Qn,oo;ec(A,this,function(bt){st(),bt._getDbgPlgTargets=function(){return[vi,D]},bt[nf]=function(){return T},bt.activeStatus=function(){return Mn},bt._setPendingStatus=function(){Mn=3},bt[dE]=function(dt,fn,kr,Bn){Fe&&Wn(Er),bt[nf]()&&Wn("Core cannot be initialized more than once"),x=nd(dt,Qa,kr||bt[Aa],!1),dt=x.cfg,rc(x[qp](function(To){var ss=To.cfg,Nc=Mn===3;if(!Nc){Rs=ss.initInMemoMaxSize||io;var rd=ss.instrumentationKey,Xp=ss.endpointUrl;if(te(rd)){Wr=null,Mn=Lh.INACTIVE;var Zp="Please provide instrumentation key";T?(wn(S,1,100,Zp),js()):Wn(Zp);return}var T_=[];if(vt(rd)?(T_[Vi](rd),Wr=null):Wr=rd,vt(Xp)?(T_[Vi](Xp),bi=null):bi=Xp,T_[$r]){Uo=!1,Mn=3;var dB=jw(ss.initTimeOut)?ss.initTimeOut:Pi,MJ=hu(T_);Ph(function(){Uo||Ir()},dB),Ju(MJ,function(mx){try{if(Uo)return;if(!mx.rejected){var hx=mx[xC];if(hx&&hx[$r]){var P7=hx[0];if(Wr=P7&&P7[xC],hx[$r]>1){var D7=hx[1];bi=D7&&D7[xC]}}Wr&&(dt.instrumentationKey=Wr,dt.endpointUrl=bi)}Ir()}catch{Uo||Ir()}})}else Ir();var w_=To.ref(To.cfg,ZA);re(w_,function(mx){To.ref(w_,mx)})}})),L=Bn,Vt=a7(x,Nt,L&&bt[zd](),Vt),fx(),bt[Aa]=kr;var Br=dt[SC];if(Te=[],Te[Vi].apply(Te,dN(dN([],fn,!1),Br)),Le=dt[jp],Vs(null),(!Ye||Ye[$r]===0)&&Wn("No "+jp+" available"),Le&&Le[$r]>1){var vo=bt[vC]("TeeChannelController");(!vo||!vo.plugin)&&wn(S,1,28,"TeeChannel required")}jk(dt,xi,S),xi=null,T=!0,Mn===Lh.ACTIVE&&js()},bt.getChannels=function(){var dt=[];return Ye&&Un(Ye,function(fn){dt[Vi](fn)}),Ht(dt)},bt.track=function(dt){ex(bt[hE](),function(){return"AppInsightsCore:track"},function(){dt===null&&(ks(dt),Wn("Invalid telemetry item")),!dt[Mh]&&te(dt[Mh])&&(ks(dt),Wn("telemetry name required")),dt.iKey=dt.iKey||Wr,dt.time=dt.time||gE(new Date),dt.ver=dt.ver||"4.0",!Fe&&bt[nf]()&&Mn===Lh.ACTIVE?qa()[Il](dt):Mn!==Lh.INACTIVE&&D[$r]<=Rs&&D[Vi](dt)},function(){return{item:dt}},!dt.sync)},bt[bC]=qa,bt[zd]=function(){return L||(L=new ZK(x.cfg),bt[Qr]=L),L},bt[Sw]=function(dt){bt.getNotifyMgr()[Sw](dt)},bt[fE]=function(dt){L&&L[fE](dt)},bt.getCookieMgr=function(){return se||(se=YK(x.cfg,bt[Aa])),se},bt.setCookieMgr=function(dt){se!==dt&&(zC(se,!1),se=dt)},bt[hE]=function(){return Q||J||Ca()},bt.setPerfMgr=function(dt){Q=dt},bt.eventCnt=function(){return D[$r]},bt.releaseQueue=function(){if(T&&D[$r]>0){var dt=D;D=[],Mn===2?Un(dt,function(fn){fn.iKey=fn.iKey||Wr,qa()[Il](fn)}):wn(S,2,20,"core init status is not active")}},bt.pollInternalLogs=function(dt){return lt=dt||null,oo=!1,Ft&&Ft[CC](),go(!0)};function Ir(){Uo=!0,te(Wr)?(Mn=Lh.INACTIVE,wn(S,1,112,"ikey can't be resolved from promises")):Mn=Lh.ACTIVE,js()}s(Ir,"_setStatus");function js(){T&&(bt.releaseQueue(),bt.pollInternalLogs())}s(js,"_releaseQueues");function go(dt){if((!Ft||!Ft[rf])&&!oo){var fn=dt||S&&S.queue[$r]>0;fn&&(Qn||(Qn=!0,rc(x[qp](function(kr){var Bn=kr.cfg.diagnosticLogInterval;(!Bn||!(Bn>0))&&(Bn=1e4);var Br=!1;Ft&&(Br=Ft[rf],Ft[CC]()),Ft=xw(dx,Bn),Ft.unref(),Ft[rf]=Br}))),Ft[rf]=!0)}return Ft}s(go,"_startLogPoller"),bt[fN]=function(){oo=!0,Ft&&Ft[CC](),dx()},Ak(bt,function(){return Ge},["addTelemetryInitializer"]),bt[zA]=function(dt,fn,kr){dt===void 0&&(dt=!0),T||Wn(mi),Fe&&Wn(Er);var Bn={reason:50,isAsync:dt,flushComplete:!1},Br;dt&&!fn&&(Br=_C(function(ss){fn=ss}));var vo=w(hf(),bt);vo[Rw](function(){Nt.run(bt[Aa]),HN([se,L,S],dt,function(){st(),fn&&fn(Bn)})},bt);function To(ss){Bn.flushComplete=ss,Fe=!0,gt.run(vo,Bn),bt[fN](),vo[Il](Bn)}return s(To,"_doUnload"),dx(),Kp(dt,To,6,kr),Br},bt[vC]=Rl,bt.addPlugin=function(dt,fn,kr,Bn){if(!dt){Bn&&Bn(!1),px(En);return}var Br=Rl(dt[Fh]);if(Br&&!fn){Bn&&Bn(!1),px("Plugin ["+dt[Fh]+"] is already loaded!");return}var vo={reason:16};function To(rd){Te[Vi](dt),vo.added=[dt],Vs(vo),Bn&&Bn(!0)}if(s(To,"_addPlugin"),Br){var ss=[Br.plugin],Nc={reason:2,isAsync:!!kr};yu(ss,Nc,function(rd){rd?(vo.removed=ss,vo.reason|=32,To()):Bn&&Bn(!1)})}else To()},bt.updateCfg=function(dt,fn){fn===void 0&&(fn=!0);var kr;if(bt[nf]()){kr={reason:1,cfg:x.cfg,oldCfg:hw({},x.cfg),newConfig:hw({},dt),merge:fn},dt=kr.newConfig;var Bn=x.cfg;dt[SC]=Bn[SC],dt[jp]=Bn[jp]}x._block(function(Br){var vo=Br.cfg;f_(Br,vo,dt,fn),fn||re(vo,function(To){tt(dt,To)||Br.set(vo,To,Xu)}),Br.setDf(vo,Qa)},!0),x.notify(),kr&&Jp(kr)},bt.evtNamespace=function(){return et},bt.flush=Kp,bt.getTraceCtx=function(dt){return hn||(hn=nJ()),hn},bt.setTraceCtx=function(dt){hn=dt||null},bt.addUnloadHook=rc,AE(bt,"addUnloadCb",function(){return gt},"add"),bt.onCfgChange=function(dt){var fn;return T?fn=zp(x.cfg,dt,bt[Aa]):fn=oJ(xi,dt),l7(fn)},bt.getWParam=function(){return Ih()||x.cfg.enableWParam?0:-1};function Sl(){var dt={};ho=[];var fn=s(function(kr){kr&&Un(kr,function(Bn){if(Bn[Fh]&&Bn[EC]&&!dt[Bn.identifier]){var Br=Bn[Fh]+"="+Bn[EC];ho[Vi](Br),dt[Bn.identifier]=Bn}})},"_addPluginVersions");fn(Ye),Le&&Un(Le,function(kr){fn(kr)}),fn(Te)}s(Sl,"_setPluginVersions");function st(){T=!1,x=nd({},Qa,bt[Aa]),x.cfg[pN]=1,ze(bt,"config",{g:s(function(){return x.cfg},"g"),s:s(function(fn){bt.updateCfg(fn,!1)},"s")}),ze(bt,"pluginVersionStringArr",{g:s(function(){return ho||Sl(),ho},"g")}),ze(bt,"pluginVersionString",{g:s(function(){return cr||(ho||Sl(),cr=ho.join(";")),cr||pi},"g")}),ze(bt,"logger",{g:s(function(){return S||(S=new SE(x.cfg),x[Aa]=S),S},"g"),s:s(function(fn){x[Aa]=fn,S!==fn&&(zC(S,!1),S=fn)},"s")}),bt[Aa]=new SE(x.cfg),vi=[];var dt=bt.config[SC]||[];dt.splice(0,dt[$r]),nC(dt,vi),Ge=new qr,D=[],zC(L,!1),L=null,Q=null,J=null,zC(se,!1),se=null,Ce=null,Te=[],Le=null,Ye=null,Fe=!1,lt=null,et=$p("AIBaseCore",!0),gt=oe(),hn=null,Wr=null,Nt=Ee(),xi=[],cr=null,ho=null,oo=!1,Ft=null,Qn=!1,Mn=0,bi=null,Rs=null,Uo=!1}s(st,"_initDefaults");function qa(){var dt=nx(hf(),x.cfg,bt);return dt[Rw](go),dt}s(qa,"_createTelCtx");function Vs(dt){var fn=DE(bt[Aa],OK,Te);Ce=null,cr=null,ho=null,Ye=(Le||[])[0]||[],Ye=qk(nC(Ye,fn[jp]));var kr=nC(qk(fn[ya]),Ye);vi=Ht(kr);var Bn=bt.config[SC]||[];Bn.splice(0,Bn[$r]),nC(Bn,vi);var Br=qa();Ye&&Ye[$r]>0&&Uk(Br[YA](Ye),kr),Uk(Br,kr),dt&&Jp(dt)}s(Vs,"_initPluginChain");function Rl(dt){var fn=null,kr=null,Bn=[];return Un(vi,function(Br){if(Br[Fh]===dt&&Br!==Ge)return kr=Br,-1;Br.getChannel&&Bn[Vi](Br)}),!kr&&Bn[$r]>0&&Un(Bn,function(Br){if(kr=Br.getChannel(dt),!kr)return-1}),kr&&(fn={plugin:kr,setEnabled:s(function(Br){Kh(kr)[Uw]=!Br},"setEnabled"),isEnabled:s(function(){var Br=Kh(kr);return!Br[of]&&!Br[Uw]},"isEnabled"),remove:s(function(Br,vo){Br===void 0&&(Br=!0);var To=[kr],ss={reason:1,isAsync:Br};yu(To,ss,function(Nc){Nc&&Vs({reason:32,removed:To}),vo&&vo(Nc)})},"remove")}),fn}s(Rl,"_getPlugin");function hf(){if(!Ce){var dt=(vi||[]).slice();pu(dt,Ge)===-1&&dt[Vi](Ge),Ce=B(qk(dt),x.cfg,bt)}return Ce}s(hf,"_getPluginChain");function yu(dt,fn,kr){if(dt&&dt[$r]>0){var Bn=B(dt,x.cfg,bt),Br=w(Bn,bt);Br[Rw](function(){var vo=!1,To=[];Un(Te,function(Nc,rd){Gk(Nc,dt)?vo=!0:To[Vi](Nc)}),Te=To,cr=null,ho=null;var ss=[];Le&&(Un(Le,function(Nc,rd){var Xp=[];Un(Nc,function(Zp){Gk(Zp,dt)?vo=!0:Xp[Vi](Zp)}),ss[Vi](Xp)}),Le=ss),kr&&kr(vo),go()}),Br[Il](fn)}else kr(!1)}s(yu,"_removePlugins");function dx(){if(S&&S.queue){var dt=S.queue.slice(0);S.queue[$r]=0,Un(dt,function(fn){var kr={name:lt||"InternalMessageId: "+fn[kw],iKey:Wr,time:gE(new Date),baseType:r_.dataType,baseData:{message:fn[KA]}};bt.track(kr)})}}s(dx,"_flushInternalLogs");function Kp(dt,fn,kr,Bn){var Br=1,vo=!1,To=null;Bn=Bn||5e3;function ss(){Br--,vo&&Br===0&&(To&&To[CC](),To=null,fn&&fn(vo),fn=null)}if(s(ss,"doCallback"),Ye&&Ye[$r]>0){var Nc=qa()[YA](Ye);Nc.iterate(function(rd){if(rd.flush){Br++;var Xp=!1;rd.flush(dt,function(){Xp=!0,ss()},kr)||Xp||(dt&&To==null?To=Ph(function(){To=null,ss()},Bn):ss())}})}return vo=!0,ss(),!0}s(Kp,"_flushChannels");function fx(){var dt;rc(x[qp](function(fn){var kr=fn.cfg.enablePerfMgr;if(kr){var Bn=fn.cfg[Kd];(dt!==Bn||!dt)&&(Bn||(Bn=rx),wN(fn.cfg,Kd,Bn),dt=Bn,J=null),!Q&&!J&&Ne(Bn)&&(J=Bn(bt,bt[zd]()))}else J=null,dt=null}))}s(fx,"_initPerfManager");function Jp(dt){var fn=R(hf(),bt);fn[Rw](go),(!bt._updateHook||bt._updateHook(fn,dt)!==!0)&&fn[Il](dt)}s(Jp,"_doUpdate");function px(dt){var fn=bt[Aa];fn?(wn(fn,2,73,dt),go()):Wn(dt)}s(px,"_logOrThrowError");function ks(dt){var fn=bt[zd]();fn&&fn[BC]([dt],2)}s(ks,"_notifyInvalidEvent");function rc(dt){Nt.add(dt)}s(rc,"_addUnloadHook")})}return s(A,"AppInsightsCore"),A.__ieDyn=1,A}();function kn(A,x){try{if(A&&A!==""){var T=gu().parse(A);if(T&&T[mN]&&T[mN]>=T.itemsAccepted&&T.itemsReceived-T.itemsAccepted===T.errors[$r])return T}}catch(S){wn(x,1,43,"Cannot parse the response. "+(S[Mh]||Lt(S)),{response:A})}return null}s(kn,"parseResponse");var nr="",Fo="NoResponseBody",Oa="&"+Fo+"=true",Gs="POST",Ua=function(){function A(){var x=0,T,S,D,L,Q,J,se,Ce,Te,Le,Ye,Fe,Ge,lt;ec(A,this,function(et,gt){var Nt=!0;Uo(),et[dE]=function(Ft,Qn){D=Qn,S&&wn(D,1,28,"Sender is already initialized"),et.SetConfig(Ft),S=!0},et._getDbgPlgTargets=function(){return[S,L,J,T]},et.SetConfig=function(Ft){try{if(Q=Ft.senderOnCompleteCallBack||{},J=!!Ft.disableCredentials,se=Ft.fetchCredentials,L=!!Ft.isOneDs,T=!!Ft.enableSendPromise,Te=!!Ft.disableXhr,Le=!!Ft.disableBeacon,Ye=!!Ft.disableBeaconSync,lt=Ft.timeWrapper,Ge=!!Ft.addNoResponse,Fe=!!Ft.disableFetchKeepAlive,Ce={sendPOST:Mn},L||(Nt=!1),J){var Qn=QC();Qn&&Qn.protocol&&Qn.protocol[gC]()==="file:"&&(Nt=!1)}return!0}catch{}return!1},et.getSyncFetchPayload=function(){return x},et.getSenderInst=function(Ft,Qn){return Ft&&Ft[$r]?xi(Ft,Qn):null},et.getFallbackInst=function(){return Ce},et[Bw]=function(Ft,Qn){Uo()};function Vt(Ft,Qn){vi(Qn,200,{},Ft)}s(Vt,"_onSuccess");function hn(Ft,Qn){wn(D,2,26,"Failed to send telemetry.",{message:Ft}),vi(Qn,400,{})}s(hn,"_onError");function Wr(Ft){hn("No endpoint url is provided for the batch",Ft)}s(Wr,"_onNoPayloadUrl");function xi(Ft,Qn){for(var oo=0,bt=null,Ir=0;bt==null&&Ir<Ft[$r];)oo=Ft[Ir],!Te&&oo===1?Ik()?bt=Rs:Tk()&&(bt=Mn):oo===2&&bE(Qn)&&(!Qn||!Fe)?bt=bi:oo===3&&Gh()&&(Qn?!Ye:!Le)&&(bt=cr),Ir++;return bt?{_transport:oo,_isSync:Qn,sendPOST:bt}:null}s(xi,"_getSenderInterface");function vi(Ft,Qn,oo,bt){try{Ft&&Ft(Qn,oo,bt)}catch{}}s(vi,"_doOnComplete");function ho(Ft,Qn){var oo=Th(),bt=Ft[Hp];if(!bt)return Wr(Qn),!0;bt=Ft[Hp]+(Ge?Oa:nr);var Ir=Ft[IC],js=L?Ir:new Blob([Ir],{type:"text/plain;charset=UTF-8"}),go=oo.sendBeacon(bt,js);return go}s(ho,"_doBeaconSend");function cr(Ft,Qn,oo){var bt=Ft[IC];try{if(bt)if(ho(Ft,Qn))Vt(nr,Qn);else{var Ir=Q&&Q.beaconOnRetry;Ir&&Ne(Ir)?Ir(Ft,Qn,ho):(Ce&&Ce.sendPOST(Ft,Qn,!0),wn(D,2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}catch(js){L&&i_(D,"Failed to send telemetry using sendBeacon API. Ex:"+Lt(js)),vi(Qn,L?0:400,{},nr)}}s(cr,"_beaconSender");function Mn(Ft,Qn,oo){var bt,Ir,js,go=Ft[dk]||{};!oo&&T&&(bt=_C(function(Vs,Rl){Ir=Vs,js=Rl})),L&&oo&&Ft.disableXhrSync&&(oo=!1);var Sl=Ft[Hp];if(!Sl){Wr(Qn),Ir&&Ir(!1);return}var st=xk(Gs,Sl,Nt,!0,oo,Ft[Gp]);L||st.setRequestHeader("Content-type","application/json"),Un(At(go),function(Vs){st.setRequestHeader(Vs,go[Vs])}),st.onreadystatechange=function(){L||(qa(st),st.readyState===4&&Ir&&Ir(!0))},st.onload=function(){L&&qa(st)};function qa(Vs){var Rl=Q&&Q.xhrOnComplete,hf=Rl&&Ne(Rl);if(hf)Rl(Vs,Qn,Ft);else{var yu=Vw(Vs);vi(Qn,Vs[pE],n1(Vs,L),yu)}}return s(qa,"_doOnReadyFunc"),st.onerror=function(Vs){vi(Qn,L?st[pE]:400,n1(st,L),L?nr:$w(st)),js&&js(Vs)},st.ontimeout=function(){vi(Qn,L?st[pE]:500,n1(st,L),L?nr:$w(st)),Ir&&Ir(!1)},st.send(Ft[IC]),bt}s(Mn,"_xhrSender");function bi(Ft,Qn,oo){var bt,Ir=Ft[Hp],js=Ft[IC],go=L?js:new Blob([js],{type:"application/json"}),Sl,st,qa,Vs=new Headers,Rl=js[$r],hf=!1,yu=!1,dx=Ft[dk]||{},Kp=(bt={method:Gs,body:go},bt[GN]=!0,bt);Ft.headers&&At(Ft.headers)[$r]>0&&(Un(At(dx),function(ks){Vs.append(ks,dx[ks])}),Kp[dk]=Vs),se?Kp.credentials=se:Nt&&L&&(Kp.credentials="include"),oo&&(Kp.keepalive=!0,x+=Rl,L?Ft._sendReason===2&&(hf=!0,Ge&&(Ir+=Oa)):hf=!0);var fx=new Request(Ir,Kp);try{fx[GN]=!0}catch{}if(!oo&&T&&(Sl=_C(function(ks,rc){st=ks,qa=rc})),!Ir){Wr(Qn),st&&st(!1);return}function Jp(ks){vi(Qn,L?0:400,{},L?nr:ks)}s(Jp,"_handleError");function px(ks,rc,dt){var fn=ks[pE],kr=Q.fetchOnComplete;kr&&Ne(kr)?kr(ks,Qn,dt||nr,rc):vi(Qn,fn,{},dt||nr)}s(px,"_onFetchComplete");try{Ju(fetch(L?Ir:fx,L?Kp:null),function(ks){if(oo&&(x-=Rl,Rl=0),!yu)if(yu=!0,ks.rejected)Jp(ks.reason&&ks.reason[KA]),qa&&qa(ks.reason);else{var rc=ks[xC];try{!L&&!rc.ok?(Jp(rc.statusText),st&&st(!1)):L&&!rc.body?(px(rc,null,nr),st&&st(!0)):Ju(rc.text(),function(dt){px(rc,Ft,dt[xC]),st&&st(!0)})}catch(dt){Jp(Lt(dt)),qa&&qa(dt)}}})}catch(ks){yu||(Jp(Lt(ks)),qa&&qa(ks))}return hf&&!yu&&(yu=!0,vi(Qn,200,{}),st&&st(!0)),L&&!yu&&Ft[Gp]>0&&lt&&lt.set(function(){yu||(yu=!0,vi(Qn,500,{}),st&&st(!0))},Ft[Gp]),Sl}s(bi,"_doFetchSender");function Rs(Ft,Qn,oo){var bt=Mp(),Ir=new XDomainRequest,js=Ft[IC];Ir.onload=function(){var Vs=Vw(Ir),Rl=Q&&Q.xdrOnComplete;Rl&&Ne(Rl)?Rl(Ir,Qn,Ft):vi(Qn,200,{},Vs)},Ir.onerror=function(){vi(Qn,400,{},L?nr:SN(Ir))},Ir.ontimeout=function(){vi(Qn,500,{})},Ir.onprogress=function(){};var go=bt&&bt.location&&bt.location.protocol||"",Sl=Ft[Hp];if(!Sl){Wr(Qn);return}if(!L&&Sl.lastIndexOf(go,0)!==0){var st="Cannot send XDomain request. The endpoint URL protocol doesn't match the hosting page protocol.";wn(D,2,40,". "+st),hn(st,Qn);return}var qa=L?Sl:Sl[Uh](/^(https?:)/,"");Ir.open(Gs,qa),Ft[Gp]&&(Ir[Gp]=Ft[Gp]),Ir.send(js),L&&oo?lt&&lt.set(function(){Ir.send(js)},0):Ir.send(js)}s(Rs,"_xdrSender");function Uo(){x=0,S=!1,T=!1,D=null,L=null,Q=null,J=null,se=null,Ce=null,Te=!1,Le=!1,Ye=!1,Fe=!1,Ge=!1,lt=null}s(Uo,"_initDefaults")})}return s(A,"SenderPostManager"),A.__ieDyn=1,A}(),o1="on",Jh="attachEvent",ix="addEventListener",c7="detachEvent",u7="removeEventListener",p_="events";$p("aiEvtPageHide"),$p("aiEvtPageShow");var sJ=/\.[\.]+/g,Yhe=/[\.]+$/,kKe=1,d7=LN("events"),BKe=/^([^.]*)(?:\.(.+)|)/;function Khe(A){return A&&A[Uh]?A[Uh](/^[\s\.]+|(?=[\s\.])[\.\s]+$/g,pi):A}s(Khe,"_normalizeNamespace");function aJ(A,x){if(x){var T=pi;Je(x)?(T=pi,Un(x,function(D){D=Khe(D),D&&(D[0]!=="."&&(D="."+D),T+=D)})):T=Khe(x),T&&(T[0]!=="."&&(T="."+T),A=(A||pi)+T)}var S=BKe.exec(A||pi)||[];return{type:S[1],ns:(S[2]||pi).replace(sJ,".").replace(Yhe,pi)[Oh](".").sort().join(".")}}s(aJ,"_getEvtNamespace");function Jhe(A,x,T){T===void 0&&(T=!0);var S=d7.get(A,p_,{},T),D=S[x];return D||(D=S[x]=[]),D}s(Jhe,"_getRegisteredEvents");function Xhe(A,x,T,S){A&&x&&x[tc]&&(A[u7]?A[u7](x[tc],T,S):A[c7]&&A[c7](o1+x[tc],T))}s(Xhe,"_doDetach");function PKe(A,x,T,S){var D=!1;return A&&x&&x[tc]&&T&&(A[ix]?(A[ix](x[tc],T,S),D=!0):A[Jh]&&(A[Jh](o1+x[tc],T),D=!0)),D}s(PKe,"_doAttach");function Zhe(A,x,T,S){for(var D=x[$r];D--;){var L=x[D];L&&(!T.ns||T.ns===L[lk].ns)&&(!S||S(L))&&(Xhe(A,L[lk],L.handler,L.capture),x[yC](D,1))}}s(Zhe,"_doUnregister");function DKe(A,x,T){if(x[tc])Zhe(A,Jhe(A,x[tc]),x,T);else{var S=d7.get(A,p_,{});re(S,function(D,L){Zhe(A,L,x,T)}),At(S)[$r]===0&&d7.kill(A,p_)}}s(DKe,"_unregisterEvents");function ege(A,x){var T;return x?(Je(x)?T=[A].concat(x):T=[A,x],T=aJ("xx",T).ns[Oh](".")):T=A,T}s(ege,"mergeEvtNamespace");function tge(A,x,T,S,D){D===void 0&&(D=!1);var L=!1;if(A)try{var Q=aJ(x,S);if(L=PKe(A,Q,T,D),L&&d7.accept(A)){var J={guid:kKe++,evtName:Q,handler:T,capture:D};Jhe(A,Q.type)[Vi](J)}}catch{}return L}s(tge,"eventOn");function NKe(A,x,T,S,D){if(D===void 0&&(D=!1),A)try{var L=aJ(x,S),Q=!1;DKe(A,L,function(J){return L.ns&&!T||J.handler===T?(Q=!0,!0):!1}),Q||Xhe(A,L,T,D)}catch{}}s(NKe,"eventOff");var nge="sampleRate",lJ="ProcessLegacy",rge="http.method",cJ="https://dc.services.visualstudio.com",m_="/v2/track",ox="not_specified",ige=bK({requestContextHeader:[0,"Request-Context"],requestContextTargetKey:[1,"appId"],requestContextAppIdFormat:[2,"appId=cid-v1:"],requestIdHeader:[3,"Request-Id"],traceParentHeader:[4,"traceparent"],traceStateHeader:[5,"tracestate"],sdkContextHeader:[6,"Sdk-Context"],sdkContextHeaderAppIdRequest:[7,"appId"],requestContextHeaderLowerCase:[8,"request-context"]}),f7="split",di="length",uJ="toLowerCase",NE="ingestionendpoint",Vk="toString",oge="removeItem",p7="message",LKe="count",dJ="stringify",fJ="pathname",$k="match",sx="name",Xh="properties",s1="measurements",m7="sizeInBytes",h7="typeName",zk="exceptions",Yk="severityLevel",pJ="problemGroup",h_="parsedStack",g7="hasFullStack",A7="assembly",a1="fileName",g_="line",y7="aiDataContract",C7="duration";function sge(A,x,T){var S=x[di],D=FKe(A,x);if(D[di]!==S){for(var L=0,Q=D;T[Q]!==void 0;)L++,Q=ge(D,0,147)+OKe(L);D=Q}return D}s(sge,"dataSanitizeKeyAndAddUniqueness");function FKe(A,x){var T;return x&&(x=ji(Ot(x)),x[di]>150&&(T=ge(x,0,150),wn(A,2,57,"name is too long.  It has been truncated to 150 characters.",{name:x},!0))),T||x}s(FKe,"dataSanitizeKey");function Pc(A,x,T){T===void 0&&(T=1024);var S;return x&&(T=T||1024,x=ji(Ot(x)),x[di]>T&&(S=ge(x,0,T),wn(A,2,61,"string value is too long. It has been truncated to "+T+" characters.",{value:x},!0))),S||x}s(Pc,"dataSanitizeString");function mJ(A,x){return lge(A,x,2048,66)}s(mJ,"dataSanitizeUrl");function age(A,x){var T;return x&&x[di]>32768&&(T=ge(x,0,32768),wn(A,2,56,"message is too long, it has been truncated to 32768 characters.",{message:x},!0)),T||x}s(age,"dataSanitizeMessage");function MKe(A,x){var T;if(x){var S=""+x;S[di]>32768&&(T=ge(S,0,32768),wn(A,2,52,"exception is too long, it has been truncated to 32768 characters.",{exception:x},!0))}return T||x}s(MKe,"dataSanitizeException");function LE(A,x){if(x){var T={};re(x,function(S,D){if(Se(D)&&OC())try{D=gu()[dJ](D)}catch(L){wn(A,2,49,"custom property is not valid",{exception:L},!0)}D=Pc(A,D,8192),S=sge(A,S,T),T[S]=D}),x=T}return x}s(LE,"dataSanitizeProperties");function FE(A,x){if(x){var T={};re(x,function(S,D){S=sge(A,S,T),T[S]=D}),x=T}return x}s(FE,"dataSanitizeMeasurements");function QKe(A,x){return x&&lge(A,x,128,69)[Vk]()}s(QKe,"dataSanitizeId");function lge(A,x,T,S){var D;return x&&(x=ji(Ot(x)),x[di]>T&&(D=ge(x,0,T),wn(A,2,S,"input is too long, it has been truncated to "+T+" characters.",{data:x},!0))),D||x}s(lge,"dataSanitizeInput");function OKe(A){var x="00"+A;return ve(x,x[di]-3)}s(OKe,"dsPadNumber");var cge=eC()||{},uge=0,UKe=[null,null,null,null,null];function qKe(A){var x=uge,T=UKe,S=T[x];return cge.createElement?T[x]||(S=T[x]=cge.createElement("a")):S={host:WKe(A,!0)},S.href=A,x++,x>=T[di]&&(x=0),uge=x,S}s(qKe,"urlParseUrl");function WKe(A,x){var T=HKe(A,x)||"";if(T){var S=T[$k](/(www\d{0,5}\.)?([^\/:]{1,256})(:\d{1,20})?/i);if(S!=null&&S[di]>3&&me(S[2])&&S[2][di]>0)return S[2]+(S[3]||"")}return T}s(WKe,"urlParseHost");function HKe(A,x){var T=null;if(A){var S=A[$k](/(\w{1,150}):\/\/([^\/:]{1,256})(:\d{1,20})?/i);if(S!=null&&S[di]>2&&me(S[2])&&S[2][di]>0&&(T=S[2]||"",x&&S[di]>2)){var D=(S[1]||"")[uJ](),L=S[3]||"";(D==="http"&&L===":80"||D==="https"&&L===":443")&&(L=""),T+=L}}return T}s(HKe,"urlParseFullHost");var GKe=[cJ+m_,"https://breeze.aimon.applicationinsights.io"+m_,"https://dc-int.services.visualstudio.com"+m_];function dge(A){return pu(GKe,A[uJ]())!==-1}s(dge,"isInternalApplicationInsightsEndpoint");function jKe(A,x,T,S){var D,L=S,Q=S;if(x&&x[di]>0){var J=qKe(x);if(D=J.host,!L)if(J[fJ]!=null){var se=J.pathname[di]===0?"/":J[fJ];se.charAt(0)!=="/"&&(se="/"+se),Q=J[fJ],L=Pc(A,T?T+" "+se:se)}else L=Pc(A,x)}else D=S,L=S;return{target:D,name:L,data:Q}}s(jKe,"AjaxHelperParseDependencyPath");var hJ=ww({LocalStorage:0,SessionStorage:1}),A_=void 0,fge="";function pge(A){try{if(te(ef()))return null;var x=new Date()[Vk](),T=ra(A===hJ.LocalStorage?"localStorage":"sessionStorage"),S=fge+x;T.setItem(S,x);var D=T.getItem(S)!==x;if(T[oge](S),!D)return T}catch{}return null}s(pge,"_getVerifiedStorageObject");function gJ(){return mge()?pge(hJ.SessionStorage):null}s(gJ,"_getSessionStorageObject");function VKe(A){fge=A||""}s(VKe,"utlSetStoragePrefix");function mge(A){return(A||A_===void 0)&&(A_=!!pge(hJ.SessionStorage)),A_}s(mge,"utlCanUseSessionStorage");function $Ke(A,x){var T=gJ();if(T!==null)try{return T.getItem(x)}catch(S){A_=!1,wn(A,2,2,"Browser failed read of session storage. "+ll(S),{exception:Lt(S)})}return null}s($Ke,"utlGetSessionStorage");function zKe(A,x,T){var S=gJ();if(S!==null)try{return S.setItem(x,T),!0}catch(D){A_=!1,wn(A,2,4,"Browser failed write to session storage. "+ll(D),{exception:Lt(D)})}return!1}s(zKe,"utlSetSessionStorage");function YKe(A,x){var T=gJ();if(T!==null)try{return T[oge](x),!0}catch(S){A_=!1,wn(A,2,6,"Browser failed removal of session storage item. "+ll(S),{exception:Lt(S)})}return!1}s(YKe,"utlRemoveSessionStorage");var KKe=";",JKe="=";function AJ(A){if(!A)return{};var x=A[f7](KKe),T=uK(x,function(D,L){var Q=L[f7](JKe);if(Q[di]===2){var J=Q[0][uJ](),se=Q[1];D[J]=se}return D},{});if(At(T)[di]>0){if(T.endpointsuffix){var S=T.location?T.location+".":"";T[NE]=T[NE]||"https://"+S+"dc."+T.endpointsuffix}T[NE]=T[NE]||cJ,aN(T[NE],"/")&&(T[NE]=T[NE].slice(0,-1))}return T}s(AJ,"parseConnectionString");var XKe=function(){function A(x,T,S){var D=this,L=this;L.ver=1,L.sampleRate=100,L.tags={},L[sx]=Pc(x,S)||ox,L.data=T,L.time=gE(new Date),L[y7]={time:1,iKey:1,name:1,sampleRate:s(function(){return D.sampleRate===100?4:1},"sampleRate"),tags:1,data:1}}return s(A,"Envelope"),A}(),y_=function(){function A(x,T,S,D){this.aiDataContract={ver:1,name:1,properties:0,measurements:0};var L=this;L.ver=2,L[sx]=Pc(x,T)||ox,L[Xh]=LE(x,S),L[s1]=FE(x,D)}return s(A,"Event"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Event",A.dataType="EventData",A}(),ZKe=58,eJe=/^\s{0,50}(from\s|at\s|Line\s{1,5}\d{1,10}\s{1,5}of|\w{1,50}@\w{1,80}|[^\(\s\n]+:[0-9\?]+(?::[0-9\?]+)?)/,tJe=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+):([0-9\?]+)\)?$/,nJe=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\]]+):([0-9\?]+)\)?$/,rJe=/^(?:\s{0,50}at)?\s{0,50}([^\@\()\s]+)?\s{0,50}(?:\s|\@|\()\s{0,5}([^\(\s\n\)\]]+)\)?$/,iJe=/(?:^|\(|\s{0,10}[\w\)]+\@)?([^\(\n\s\]\)]+)(?:\:([0-9]+)(?:\:([0-9]+))?)?\)?(?:,|$)/,oJe=/([^\(\s\n]+):([0-9]+):([0-9]+)$/,sJe=/([^\(\s\n]+):([0-9]+)$/,hge="<no_method>",C_="error",mf="stack",yJ="stackDetails",gge="errorSrc",CJ="message",Age="description",yge=[{re:tJe,len:5,m:1,fn:2,ln:3,col:4},{chk:lJe,pre:aJe,re:nJe,len:4,m:1,fn:2,ln:3},{re:rJe,len:3,m:1,fn:2,hdl:Ige},{re:iJe,len:2,fn:1,hdl:Ige}];function aJe(A){return A.replace(/(\(anonymous\))/,"<anonymous>")}s(aJe,"_scrubAnonymous");function lJe(A){return Qp(A,"[native")<0}s(lJe,"_ignoreNative");function xJ(A,x){var T=A;return T&&!me(T)&&(JSON&&JSON[dJ]?(T=JSON[dJ](A),x&&(!T||T==="{}")&&(Ne(A[Vk])?T=A[Vk]():T=""+A)):T=""+A+" - (Missing JSON.stringify)"),T||""}s(xJ,"_stringify");function Cge(A,x){var T=A;return A&&(T&&!me(T)&&(T=A[CJ]||A[Age]||T),T&&!me(T)&&(T=xJ(T,!0)),A.filename&&(T=T+" @"+(A.filename||"")+":"+(A.lineno||"?")+":"+(A.colno||"?"))),x&&x!=="String"&&x!=="Object"&&x!=="Error"&&Qp(T||"",x)===-1&&(T=x+": "+T),T||""}s(Cge,"_formatMessage");function cJe(A){try{if(Se(A))return"hasFullStack"in A&&"typeName"in A}catch{}return!1}s(cJe,"_isExceptionDetailsInternal");function uJe(A){try{if(Se(A))return"ver"in A&&"exceptions"in A&&"properties"in A}catch{}return!1}s(uJe,"_isExceptionInternal");function xge(A){return A&&A.src&&me(A.src)&&A.obj&&Je(A.obj)}s(xge,"_isStackDetails");function ME(A){var x=A||"";me(x)||(me(x[mf])?x=x[mf]:x=""+x);var T=x[f7](`
`);return{src:x,obj:T}}s(ME,"_convertStackObj");function dJe(A){for(var x=[],T=A[f7](`
`),S=0;S<T[di];S++){var D=T[S];T[S+1]&&(D+="@"+T[S+1],S++),x.push(D)}return{src:A,obj:x}}s(dJe,"_getOperaStack");function vge(A){var x=null;if(A)try{if(A[mf])x=ME(A[mf]);else if(A[C_]&&A[C_][mf])x=ME(A[C_][mf]);else if(A.exception&&A.exception[mf])x=ME(A.exception[mf]);else if(xge(A))x=A;else if(xge(A[yJ]))x=A[yJ];else if(Mp()&&Mp().opera&&A[CJ])x=dJe(A[p7]);else if(A.reason&&A.reason[mf])x=ME(A.reason[mf]);else if(me(A))x=ME(A);else{var T=A[CJ]||A[Age]||"";me(A[gge])&&(T&&(T+=`
`),T+=" from "+A[gge]),T&&(x=ME(T))}}catch(S){x=ME(S)}return x||{src:"",obj:null}}s(vge,"_getStackFromErrorObj");function fJe(A){var x="";return A&&(A.obj?x=A.obj.join(`
`):x=A.src||""),x}s(fJe,"_formatStackTrace");function pJe(A){var x,T=A.obj;if(T&&T[di]>0){x=[];var S=0,D=!1,L=0;Un(T,function(lt){if(D||AJe(lt)){var et=Ot(lt);D=!0;var gt=yJe(et,S);gt&&(L+=gt[m7],x.push(gt),S++)}});var Q=32*1024;if(L>Q)for(var J=0,se=x[di]-1,Ce=0,Te=J,Le=se;J<se;){var Ye=x[J][m7],Fe=x[se][m7];if(Ce+=Ye+Fe,Ce>Q){var Ge=Le-Te+1;x.splice(Te,Ge);break}Te=J,Le=se,J++,se--}}return x}s(pJe,"_parseStack");function x7(A){var x="";if(A&&(x=A.typeName||A[sx]||"",!x))try{var T=/function (.{1,200})\(/,S=T.exec(A.constructor[Vk]());x=S&&S[di]>1?S[1]:""}catch{}return x}s(x7,"_getErrorType");function vJ(A){if(A)try{if(!me(A)){var x=x7(A),T=xJ(A,!1);return(!T||T==="{}")&&(A[C_]&&(A=A[C_],x=x7(A)),T=xJ(A,!0)),Qp(T,x)!==0&&x!=="String"?x+":"+T:T}}catch{}return""+(A||"")}s(vJ,"_formatErrorCode");var v7=function(){function A(x,T,S,D,L,Q){this.aiDataContract={ver:1,exceptions:1,severityLevel:0,properties:0,measurements:0};var J=this;J.ver=2,uJe(T)?(J[zk]=T[zk]||[],J[Xh]=T[Xh],J[s1]=T[s1],T[Yk]&&(J[Yk]=T[Yk]),T.id&&(J.id=T.id,T[Xh].id=T.id),T[pJ]&&(J[pJ]=T[pJ]),te(T.isManual)||(J.isManual=T.isManual)):(S||(S={}),Q&&(S.id=Q),J[zk]=[bge(x,T,S)],J[Xh]=LE(x,S),J[s1]=FE(x,D),L&&(J[Yk]=L),Q&&(J.id=Q))}return s(A,"Exception"),A.CreateAutoException=function(x,T,S,D,L,Q,J,se){var Ce=x7(L||Q||x);return{message:Cge(x,Ce),url:T,lineNumber:S,columnNumber:D,error:vJ(L||Q||x),evt:vJ(Q||x),typeName:Ce,stackDetails:vge(J||L||Q),errorSrc:se}},A.CreateFromInterface=function(x,T,S,D){var L=T[zk]&&UA(T[zk],function(J){return gJe(x,J)}),Q=new A(x,Up(Up({},T),{exceptions:L}),S,D);return Q},A.prototype.toInterface=function(){var x=this,T=x.exceptions,S=x.properties,D=x.measurements,L=x.severityLevel,Q=x.problemGroup,J=x.id,se=x.isManual,Ce=T instanceof Array&&UA(T,function(Te){return Te.toInterface()})||void 0;return{ver:"4.0",exceptions:Ce,severityLevel:L,properties:S,measurements:D,problemGroup:Q,id:J,isManual:se}},A.CreateSimpleException=function(x,T,S,D,L,Q){var J;return{exceptions:[(J={},J[g7]=!0,J.message=x,J.stack=L,J.typeName=T,J)]}},A.envelopeType="Microsoft.ApplicationInsights.{0}.Exception",A.dataType="ExceptionData",A.formatError=vJ,A}(),mJe=Ht({id:0,outerId:0,typeName:1,message:1,hasFullStack:0,stack:0,parsedStack:2});function hJe(){var A=this,x=Je(A[h_])&&UA(A[h_],function(S){return xJe(S)}),T={id:A.id,outerId:A.outerId,typeName:A[h7],message:A[p7],hasFullStack:A[g7],stack:A[mf],parsedStack:x||void 0};return T}s(hJe,"_toInterface");function bge(A,x,T){var S,D,L,Q,J,se,Ce,Te;if(cJe(x))Q=x[h7],J=x[p7],Ce=x[mf],Te=x[h_]||[],se=x[g7];else{var Le=x,Ye=Le&&Le.evt;yt(Le)||(Le=Le[C_]||Ye||Le),Q=Pc(A,x7(Le))||ox,J=age(A,Cge(x||Le,Q))||ox;var Fe=x[yJ]||vge(x);Te=pJe(Fe),Je(Te)&&UA(Te,function(Ge){Ge[A7]=Pc(A,Ge[A7]),Ge[a1]=Pc(A,Ge[a1])}),Ce=MKe(A,fJe(Fe)),se=Je(Te)&&Te[di]>0,T&&(T[h7]=T[h7]||Q)}return S={},S[y7]=mJe,S.id=D,S.outerId=L,S.typeName=Q,S.message=J,S[g7]=se,S.stack=Ce,S.parsedStack=Te,S.toInterface=hJe,S}s(bge,"_createExceptionDetails");function gJe(A,x){var T=Je(x[h_])&&UA(x[h_],function(D){return CJe(D)})||x[h_],S=bge(A,Up(Up({},x),{parsedStack:T}));return S}s(gJe,"_createExDetailsFromInterface");function Ege(A,x){var T=x[$k](oJe);if(T&&T[di]>=4)A[a1]=T[1],A[g_]=parseInt(T[2]);else{var S=x[$k](sJe);S&&S[di]>=3?(A[a1]=S[1],A[g_]=parseInt(S[2])):A[a1]=x}}s(Ege,"_parseFilename");function Ige(A,x,T){var S=A[a1];x.fn&&T&&T[di]>x.fn&&(x.ln&&T[di]>x.ln?(S=ji(T[x.fn]||""),A[g_]=parseInt(ji(T[x.ln]||""))||0):S=ji(T[x.fn]||"")),S&&Ege(A,S)}s(Ige,"_handleFilename");function AJe(A){var x=!1;if(A&&me(A)){var T=ji(A);T&&(x=eJe.test(T))}return x}s(AJe,"_isStackFrame");var Tge=Ht({level:1,method:1,assembly:0,fileName:0,line:0});function yJe(A,x){var T,S;if(A&&me(A)&&ji(A)){S=(T={},T[y7]=Tge,T.level=x,T.assembly=ji(A),T.method=hge,T.fileName="",T.line=0,T.sizeInBytes=0,T);for(var D=0;D<yge[di];){var L=yge[D];if(L.chk&&!L.chk(A))break;L.pre&&(A=L.pre(A));var Q=A[$k](L.re);if(Q&&Q[di]>=L.len){L.m&&(S.method=ji(Q[L.m]||hge)),L.hdl?L.hdl(S,L,Q):L.fn&&(L.ln?(S[a1]=ji(Q[L.fn]||""),S[g_]=parseInt(ji(Q[L.ln]||""))||0):Ege(S,Q[L.fn]||""));break}D++}}return wge(S)}s(yJe,"_extractStackFrame");function CJe(A){var x,T=(x={},x[y7]=Tge,x.level=A.level,x.method=A.method,x.assembly=A[A7],x.fileName=A[a1],x.line=A[g_],x.sizeInBytes=0,x);return wge(T)}s(CJe,"_stackFrameFromInterface");function wge(A){var x=ZKe;return A&&(x+=A.method[di],x+=A.assembly[di],x+=A.fileName[di],x+=A.level.toString()[di],x+=A.line.toString()[di],A[m7]=x),A}s(wge,"_populateFrameSizeInBytes");function xJe(A){return{level:A.level,method:A.method,assembly:A[A7],fileName:A[a1],line:A[g_]}}s(xJe,"_parsedFrameToInterface");var vJe=function(){function A(){this.aiDataContract={name:1,kind:0,value:1,count:0,min:0,max:0,stdDev:0},this.kind=0}return s(A,"DataPoint"),A}(),Kk=function(){function A(x,T,S,D,L,Q,J,se,Ce){this.aiDataContract={ver:1,metrics:1,properties:0};var Te=this;Te.ver=2;var Le=new vJe;Le[LKe]=D>0?D:void 0,Le.max=isNaN(Q)||Q===null?void 0:Q,Le.min=isNaN(L)||L===null?void 0:L,Le[sx]=Pc(x,T)||ox,Le.value=S,Le.stdDev=isNaN(J)||J===null?void 0:J,Te.metrics=[Le],Te[Xh]=LE(x,se),Te[s1]=FE(x,Ce)}return s(A,"Metric"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Metric",A.dataType="MetricData",A}(),Jk="";function _ge(A){(isNaN(A)||A<0)&&(A=0),A=hK(A);var x=Jk+A%1e3,T=Jk+qA(A/1e3)%60,S=Jk+qA(A/(1e3*60))%60,D=Jk+qA(A/(1e3*60*60))%24,L=qA(A/(1e3*60*60*24));return x=x[di]===1?"00"+x:x[di]===2?"0"+x:x,T=T[di]<2?"0"+T:T,S=S[di]<2?"0"+S:S,D=D[di]<2?"0"+D:D,(L>0?L+".":Jk)+D+":"+S+":"+T+"."+x}s(_ge,"msToTimeSpan");var b7=function(){function A(x,T,S,D,L,Q,J){this.aiDataContract={ver:1,name:0,url:0,duration:0,properties:0,measurements:0,id:0};var se=this;se.ver=2,se.id=QKe(x,J),se.url=mJ(x,S),se[sx]=Pc(x,T)||ox,isNaN(D)||(se[C7]=_ge(D)),se[Xh]=LE(x,L),se[s1]=FE(x,Q)}return s(A,"PageView"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Pageview",A.dataType="PageviewData",A}(),E7=function(){function A(x,T,S,D,L,Q,J,se,Ce,Te,Le,Ye){Ce===void 0&&(Ce="Ajax"),this.aiDataContract={id:1,ver:1,name:0,resultCode:0,duration:0,success:0,data:0,target:0,type:0,properties:0,measurements:0,kind:0,value:0,count:0,min:0,max:0,stdDev:0,dependencyKind:0,dependencySource:0,commandName:0,dependencyTypeName:0};var Fe=this;Fe.ver=2,Fe.id=T,Fe[C7]=_ge(L),Fe.success=Q,Fe.resultCode=J+"",Fe.type=Pc(x,Ce);var Ge=jKe(x,S,se,D);Fe.data=mJ(x,D)||Ge.data,Fe.target=Pc(x,Ge.target),Te&&(Fe.target="".concat(Fe.target," | ").concat(Te)),Fe[sx]=Pc(x,Ge[sx]),Fe[Xh]=LE(x,Le),Fe[s1]=FE(x,Ye)}return s(A,"RemoteDependencyData"),A.envelopeType="Microsoft.ApplicationInsights.{0}.RemoteDependency",A.dataType="RemoteDependencyData",A}(),I7=function(){function A(x,T,S,D,L){this.aiDataContract={ver:1,message:1,severityLevel:0,properties:0};var Q=this;Q.ver=2,T=T||ox,Q[p7]=age(x,T),Q[Xh]=LE(x,D),Q[s1]=FE(x,L),S&&(Q[Yk]=S)}return s(A,"Trace"),A.envelopeType="Microsoft.ApplicationInsights.{0}.Message",A.dataType="MessageData",A}(),T7=function(){function A(x,T,S,D,L,Q,J){this.aiDataContract={ver:1,name:0,url:0,duration:0,perfTotal:0,networkConnect:0,sentRequest:0,receivedResponse:0,domProcessing:0,properties:0,measurements:0};var se=this;se.ver=2,se.url=mJ(x,S),se[sx]=Pc(x,T)||ox,se[Xh]=LE(x,L),se[s1]=FE(x,Q),J&&(se.domProcessing=J.domProcessing,se[C7]=J[C7],se.networkConnect=J.networkConnect,se.perfTotal=J.perfTotal,se.receivedResponse=J.receivedResponse,se.sentRequest=J.sentRequest)}return s(A,"PageViewPerformance"),A.envelopeType="Microsoft.ApplicationInsights.{0}.PageviewPerformance",A.dataType="PageviewPerformanceData",A}(),QE=function(){function A(x,T){this.aiDataContract={baseType:1,baseData:1},this.baseType=x,this.baseData=T}return s(A,"Data"),A}(),bJe=ww({Verbose:0,Information:1,Warning:2,Error:3,Critical:4});function ax(A){var x="ai."+A+".";return function(T){return x+T}}s(ax,"_aiNameFunc");var Xk=ax("application"),ul=ax("device"),w7=ax("location"),x_=ax("operation"),bJ=ax("session"),lx=ax("user"),OE=ax("cloud"),Zk=ax("internal"),Sge=function(A){uE(x,A);function x(){return A.call(this)||this}return s(x,"ContextTagKeys"),x}(BK({applicationVersion:Xk("ver"),applicationBuild:Xk("build"),applicationTypeId:Xk("typeId"),applicationId:Xk("applicationId"),applicationLayer:Xk("layer"),deviceId:ul("id"),deviceIp:ul("ip"),deviceLanguage:ul("language"),deviceLocale:ul("locale"),deviceModel:ul("model"),deviceFriendlyName:ul("friendlyName"),deviceNetwork:ul("network"),deviceNetworkName:ul("networkName"),deviceOEMName:ul("oemName"),deviceOS:ul("os"),deviceOSVersion:ul("osVersion"),deviceRoleInstance:ul("roleInstance"),deviceRoleName:ul("roleName"),deviceScreenResolution:ul("screenResolution"),deviceType:ul("type"),deviceMachineName:ul("machineName"),deviceVMName:ul("vmName"),deviceBrowser:ul("browser"),deviceBrowserVersion:ul("browserVersion"),locationIp:w7("ip"),locationCountry:w7("country"),locationProvince:w7("province"),locationCity:w7("city"),operationId:x_("id"),operationName:x_("name"),operationParentId:x_("parentId"),operationRootId:x_("rootId"),operationSyntheticSource:x_("syntheticSource"),operationCorrelationVector:x_("correlationVector"),sessionId:bJ("id"),sessionIsFirst:bJ("isFirst"),sessionIsNew:bJ("isNew"),userAccountAcquisitionDate:lx("accountAcquisitionDate"),userAccountId:lx("accountId"),userAgent:lx("userAgent"),userId:lx("id"),userStoreRegion:lx("storeRegion"),userAuthUserId:lx("authUserId"),userAnonymousUserAcquisitionDate:lx("anonUserAcquisitionDate"),userAuthenticatedUserAcquisitionDate:lx("authUserAcquisitionDate"),cloudName:OE("name"),cloudRole:OE("role"),cloudRoleVer:OE("roleVer"),cloudRoleInstance:OE("roleInstance"),cloudEnvironment:OE("environment"),cloudLocation:OE("location"),cloudDeploymentUnit:OE("deploymentUnit"),internalNodeName:Zk("nodeName"),internalSdkVersion:Zk("sdkVersion"),internalAgentVersion:Zk("agentVersion"),internalSnippet:Zk("snippet"),internalSdkSrc:Zk("sdkSrc")})),wl=new Sge;function Rge(A,x){NKe(A,null,null,x)}s(Rge,"_disableEvents");function EJe(A){var x=eC(),T=Th(),S=!1,D=[],L=1;T&&!te(T.onLine)&&!T.onLine&&(L=2);var Q=0,J=Ye(),se=ege($p("OfflineListener"),A);try{if(Te(Mp())&&(S=!0),x){var Ce=x.body||x;Ce.ononline&&Te(Ce)&&(S=!0)}}catch{S=!1}function Te(Vt){var hn=!1;return Vt&&(hn=tge(Vt,"online",lt,se),hn&&tge(Vt,"offline",et,se)),hn}s(Te,"_enableEvents");function Le(){return J}s(Le,"_isOnline");function Ye(){return!(Q===2||L===2)}s(Ye,"calCurrentState");function Fe(){var Vt=Ye();J!==Vt&&(J=Vt,Un(D,function(hn){var Wr={isOnline:J,rState:L,uState:Q};try{hn(Wr)}catch{}}))}s(Fe,"listnerNoticeCheck");function Ge(Vt){Q=Vt,Fe()}s(Ge,"setOnlineState");function lt(){L=1,Fe()}s(lt,"_setOnline");function et(){L=2,Fe()}s(et,"_setOffline");function gt(){var Vt=Mp();if(Vt&&S){if(Rge(Vt,se),x){var hn=x.body||x;O(hn.ononline)||Rge(hn,se)}S=!1}}s(gt,"_unload");function Nt(Vt){return D.push(Vt),{rm:s(function(){var hn=D.indexOf(Vt);if(hn>-1)return D.splice(hn,1)},"rm")}}return s(Nt,"addListener"),{isOnline:Le,isListening:s(function(){return S},"isListening"),unload:gt,addListener:Nt,setOnlineState:Ge}}s(EJe,"createOfflineListener");var IJe="AppInsightsChannelPlugin",UE="duration",nc="tags",EJ="deviceType",Zd="data",l1="name",eB="traceID",hi="length",tB="stringify",qE="measurements",Zh="dataType",WE="envelopeType",HE="toString",GE="enqueue",jE="count",c1="push",IJ="emitLineDelimitedJson",v_="clear",_7="markAsSent",nB="clearSent",TJ="bufferOverride",rB="BUFFER_KEY",cx="SENT_BUFFER_KEY",b_="concat",iB="MAX_BUFFER_SIZE",oB="triggerSend",Dc="diagLog",wJ="initialize",sB="_sender",aB="endpointUrl",lB="instrumentationKey",_J="customHeaders",kge="maxBatchSizeInBytes",SJ="onunloadDisableBeacon",RJ="isBeaconApiDisabled",Bge="alwaysUseXhrOverride",Pge="enableSessionStorageBuffer",eg="_buffer",Dge="onunloadDisableFetch",Nge="disableSendBeaconSplit",S7="getSenderInst",VE="_onError",kJ="_onPartialSuccess",R7="_onSuccess",BJ="itemsReceived",PJ="itemsAccepted",DJ="baseType",k7="sampleRate",TJe="getHashCodeScore",NJ="baseType",Ss="baseData",_l="properties",Lge="true";function xa(A,x,T){return Wh(A,x,T,le)}s(xa,"_setValueIf");function wJe(A,x,T){var S=T[nc]=T[nc]||{},D=x.ext=x.ext||{},L=x[nc]=x[nc]||[],Q=D.user;Q&&(xa(S,wl.userAuthUserId,Q.authId),xa(S,wl.userId,Q.id||Q.localId));var J=D.app;J&&xa(S,wl.sessionId,J.sesId);var se=D.device;se&&(xa(S,wl.deviceId,se.id||se.localId),xa(S,wl[EJ],se.deviceClass),xa(S,wl.deviceIp,se.ip),xa(S,wl.deviceModel,se.model),xa(S,wl[EJ],se[EJ]));var Ce=x.ext.web;if(Ce){xa(S,wl.deviceLanguage,Ce.browserLang),xa(S,wl.deviceBrowserVersion,Ce.browserVer),xa(S,wl.deviceBrowser,Ce.browser);var Te=T[Zd]=T[Zd]||{},Le=Te[Ss]=Te[Ss]||{},Ye=Le[_l]=Le[_l]||{};xa(Ye,"domain",Ce.domain),xa(Ye,"isManual",Ce.isManual?Lge:null),xa(Ye,"screenRes",Ce.screenRes),xa(Ye,"userConsent",Ce.userConsent?Lge:null)}var Fe=D.os;Fe&&(xa(S,wl.deviceOS,Fe[l1]),xa(S,wl.deviceOSVersion,Fe.osVer));var Ge=D.trace;Ge&&(xa(S,wl.operationParentId,Ge.parentID),xa(S,wl.operationName,Pc(A,Ge[l1])),xa(S,wl.operationId,Ge[eB]));for(var lt={},et=L[hi]-1;et>=0;et--){var gt=L[et];re(gt,function(Vt,hn){lt[Vt]=hn}),L.splice(et,1)}re(L,function(Vt,hn){lt[Vt]=hn});var Nt=Up(Up({},S),lt);Nt[wl.internalSdkVersion]||(Nt[wl.internalSdkVersion]=Pc(A,"javascript:".concat(_Je.Version),64)),T[nc]=yk(Nt)}s(wJe,"_extractPartAExtensions");function ux(A,x,T){te(A)||re(A,function(S,D){ft(D)?T[S]=D:me(D)?x[S]=D:OC()&&(x[S]=gu()[tB](D))})}s(ux,"_extractPropsAndMeasurements");function $E(A,x){te(A)||re(A,function(T,S){A[T]=S||x})}s($E,"_convertPropsUndefinedToCustomDefinedValue");function zE(A,x,T,S){var D=new XKe(A,S,x);xa(D,"sampleRate",T[nge]),(T[Ss]||{}).startTime&&(D.time=gE(T[Ss].startTime)),D.iKey=T.iKey;var L=T.iKey.replace(/-/g,"");return D[l1]=D[l1].replace("{0}",L),wJe(A,T,D),T[nc]=T[nc]||[],yk(D)}s(zE,"_createEnvelope");function YE(A,x){te(x[Ss])&&wn(A,1,46,"telemetryItem.baseData cannot be null.")}s(YE,"EnvelopeCreatorInit");var _Je={Version:"3.3.6"};function SJe(A,x,T){YE(A,x);var S=x[Ss][qE]||{},D=x[Ss][_l]||{};ux(x[Zd],D,S),te(T)||$E(D,T);var L=x[Ss];if(te(L))return i_(A,"Invalid input for dependency data"),null;var Q=L[_l]&&L[_l][rge]?L[_l][rge]:"GET",J=new E7(A,L.id,L.target,L[l1],L[UE],L.success,L.responseCode,Q,L.type,L.correlationContext,D,S),se=new QE(E7[Zh],J);return zE(A,E7[WE],x,se)}s(SJe,"DependencyEnvelopeCreator");function Fge(A,x,T){YE(A,x);var S={},D={};x[NJ]!==y_[Zh]&&(S.baseTypeSource=x[NJ]),x[NJ]===y_[Zh]?(S=x[Ss][_l]||{},D=x[Ss][qE]||{}):x[Ss]&&ux(x[Ss],S,D),ux(x[Zd],S,D),te(T)||$E(S,T);var L=x[Ss][l1],Q=new y_(A,L,S,D),J=new QE(y_[Zh],Q);return zE(A,y_[WE],x,J)}s(Fge,"EventEnvelopeCreator");function RJe(A,x,T){YE(A,x);var S=x[Ss][qE]||{},D=x[Ss][_l]||{};ux(x[Zd],D,S),te(T)||$E(D,T);var L=x[Ss],Q=v7.CreateFromInterface(A,L,D,S),J=new QE(v7[Zh],Q);return zE(A,v7[WE],x,J)}s(RJe,"ExceptionEnvelopeCreator");function kJe(A,x,T){YE(A,x);var S=x[Ss],D=S[_l]||{},L=S[qE]||{};ux(x[Zd],D,L),te(T)||$E(D,T);var Q=new Kk(A,S[l1],S.average,S.sampleCount,S.min,S.max,S.stdDev,D,L),J=new QE(Kk[Zh],Q);return zE(A,Kk[WE],x,J)}s(kJe,"MetricEnvelopeCreator");function BJe(A,x,T){YE(A,x);var S,D=x[Ss];!te(D)&&!te(D[_l])&&!te(D[_l][UE])?(S=D[_l][UE],delete D[_l][UE]):!te(x[Zd])&&!te(x[Zd][UE])&&(S=x[Zd][UE],delete x[Zd][UE]);var L=x[Ss],Q;((x.ext||{}).trace||{})[eB]&&(Q=x.ext.trace[eB]);var J=L.id||Q,se=L[l1],Ce=L.uri,Te=L[_l]||{},Le=L[qE]||{};if(te(L.refUri)||(Te.refUri=L.refUri),te(L.pageType)||(Te.pageType=L.pageType),te(L.isLoggedIn)||(Te.isLoggedIn=L.isLoggedIn[HE]()),!te(L[_l])){var Ye=L[_l];re(Ye,function(lt,et){Te[lt]=et})}ux(x[Zd],Te,Le),te(T)||$E(Te,T);var Fe=new b7(A,se,Ce,S,Te,Le,J),Ge=new QE(b7[Zh],Fe);return zE(A,b7[WE],x,Ge)}s(BJe,"PageViewEnvelopeCreator");function PJe(A,x,T){YE(A,x);var S=x[Ss],D=S[l1],L=S.uri||S.url,Q=S[_l]||{},J=S[qE]||{};ux(x[Zd],Q,J),te(T)||$E(Q,T);var se=new T7(A,D,L,void 0,Q,J,S),Ce=new QE(T7[Zh],se);return zE(A,T7[WE],x,Ce)}s(PJe,"PageViewPerformanceEnvelopeCreator");function DJe(A,x,T){YE(A,x);var S=x[Ss].message,D=x[Ss].severityLevel,L=x[Ss][_l]||{},Q=x[Ss][qE]||{};ux(x[Zd],L,Q),te(T)||$E(L,T);var J=new I7(A,S,D,L,Q),se=new QE(I7[Zh],J);return zE(A,I7[WE],x,se)}s(DJe,"TraceEnvelopeCreator");var Mge=function(){function A(x,T){var S=[],D=!1,L=T.maxRetryCnt;this._get=function(){return S},this._set=function(Q){return S=Q,S},ec(A,this,function(Q){Q[GE]=function(J){if(Q[jE]()>=T.eventsLimitInMem){D||(wn(x,2,105,"Maximum in-memory buffer size reached: "+Q[jE](),!0),D=!0);return}J.cnt=J.cnt||0,!(!te(L)&&J.cnt>L)&&S[c1](J)},Q[jE]=function(){return S[hi]},Q.size=function(){for(var J=S[hi],se=0;se<S[hi];se++)J+=S[se].item[hi];return T[IJ]||(J+=2),J},Q[v_]=function(){S=[],D=!1},Q.getItems=function(){return S.slice(0)},Q.batchPayloads=function(J){if(J&&J[hi]>0){var se=[];Un(J,function(Te){se[c1](Te.item)});var Ce=T[IJ]?se.join(`
`):"["+se.join(",")+"]";return Ce}return null},Q.createNew=function(J,se,Ce){var Te=S.slice(0);J=J||x,se=se||{};var Le=Ce?new Qge(J,se):new LJ(J,se);return Un(Te,function(Ye){Le[GE](Ye)}),Le}})}return s(A,"BaseSendBuffer"),A.__ieDyn=1,A}(),LJ=function(A){uE(x,A);function x(T,S){var D=A.call(this,T,S)||this;return ec(x,D,function(L,Q){L[_7]=function(J){Q[v_]()},L[nB]=function(J){}}),D}return s(x,"ArraySendBuffer"),x.__ieDyn=1,x}(Mge),NJe=["AI_buffer","AI_sentBuffer"],Qge=function(A){uE(x,A);function x(S,D){var L=A.call(this,S,D)||this,Q=!1,J=D?.namePrefix,se=D[TJ]||{getItem:$Ke,setItem:zKe},Ce=se.getItem,Te=se.setItem,Le=D.maxRetryCnt;return ec(x,L,function(Ye,Fe){var Ge=hn(x[rB]),lt=hn(x[cx]),et=vi(),gt=lt[b_](et),Nt=Ye._set(Ge[b_](gt));Nt[hi]>x[iB]&&(Nt[hi]=x[iB]),xi(x[cx],[]),xi(x[rB],Nt),Ye[GE]=function(cr){if(Ye[jE]()>=x[iB]){Q||(wn(S,2,67,"Maximum buffer size reached: "+Ye[jE](),!0),Q=!0);return}cr.cnt=cr.cnt||0,!(!te(Le)&&cr.cnt>Le)&&(Fe[GE](cr),xi(x[rB],Ye._get()))},Ye[v_]=function(){Fe[v_](),xi(x[rB],Ye._get()),xi(x[cx],[]),Q=!1},Ye[_7]=function(cr){xi(x[rB],Ye._set(Vt(cr,Ye._get())));var Mn=hn(x[cx]);Mn instanceof Array&&cr instanceof Array&&(Mn=Mn[b_](cr),Mn[hi]>x[iB]&&(wn(S,1,67,"Sent buffer reached its maximum size: "+Mn[hi],!0),Mn[hi]=x[iB]),xi(x[cx],Mn))},Ye[nB]=function(cr){var Mn=hn(x[cx]);Mn=Vt(cr,Mn),xi(x[cx],Mn)},Ye.createNew=function(cr,Mn,bi){bi=!!bi;var Rs=Ye._get().slice(0),Uo=hn(x[cx]).slice(0);cr=cr||S,Mn=Mn||{},Ye[v_]();var Ft=bi?new x(cr,Mn):new LJ(cr,Mn);return Un(Rs,function(Qn){Ft[GE](Qn)}),bi&&Ft[_7](Uo),Ft};function Vt(cr,Mn){var bi=[],Rs=[];return Un(cr,function(Uo){Rs[c1](Uo.item)}),Un(Mn,function(Uo){!Ne(Uo)&&pu(Rs,Uo.item)===-1&&bi[c1](Uo)}),bi}s(Vt,"_removePayloadsFromBuffer");function hn(cr){var Mn=cr;return Mn=J?J+"_"+Mn:Mn,Wr(Mn)}s(hn,"_getBuffer");function Wr(cr){try{var Mn=Ce(S,cr);if(Mn){var bi=gu().parse(Mn);if(me(bi)&&(bi=gu().parse(bi)),bi&&Je(bi))return bi}}catch(Rs){wn(S,1,42," storage key: "+cr+", "+ll(Rs),{exception:Lt(Rs)})}return[]}s(Wr,"_getBufferBase");function xi(cr,Mn){var bi=cr;try{bi=J?J+"_"+bi:bi;var Rs=JSON[tB](Mn);Te(S,bi,Rs)}catch(Uo){Te(S,bi,JSON[tB]([])),wn(S,2,41," storage key: "+bi+", "+ll(Uo)+". Buffer cleared",{exception:Lt(Uo)})}}s(xi,"_setBuffer");function vi(){var cr=[];try{return Un(NJe,function(Mn){var bi=ho(Mn);if(cr=cr[b_](bi),J){var Rs=J+"_"+Mn,Uo=ho(Rs);cr=cr[b_](Uo)}}),cr}catch(Mn){wn(S,2,41,"Transfer events from previous buffers: "+ll(Mn)+". previous Buffer items can not be removed",{exception:Lt(Mn)})}return[]}s(vi,"_getPreviousEvents");function ho(cr){try{var Mn=Wr(cr),bi=[];return Un(Mn,function(Rs){var Uo={item:Rs,cnt:0};bi[c1](Uo)}),YKe(S,cr),bi}catch{}return[]}s(ho,"_getItemsFromPreviousKey")}),L}s(x,"SessionStorageSendBuffer");var T;return T=x,x.VERSION="_1",x.BUFFER_KEY="AI_buffer"+T.VERSION,x.SENT_BUFFER_KEY="AI_sentBuffer"+T.VERSION,x.MAX_BUFFER_SIZE=2e3,x}(Mge),LJe=function(){function A(x){ec(A,this,function(T){T.serialize=function(Q){var J=S(Q,"root");try{return gu()[tB](J)}catch(se){wn(x,1,48,se&&Ne(se[HE])?se[HE]():"Error serializing object",null,!0)}};function S(Q,J){var se="__aiCircularRefCheck",Ce={};if(!Q)return wn(x,1,48,"cannot serialize object because it is null or undefined",{name:J},!0),Ce;if(Q[se])return wn(x,2,50,"Circular reference detected while serializing object",{name:J},!0),Ce;if(!Q.aiDataContract){if(J==="measurements")Ce=L(Q,"number",J);else if(J==="properties")Ce=L(Q,"string",J);else if(J==="tags")Ce=L(Q,"string",J);else if(Je(Q))Ce=D(Q,J);else{wn(x,2,49,"Attempting to serialize an object which does not implement ISerializable",{name:J},!0);try{gu()[tB](Q),Ce=Q}catch(Te){wn(x,1,48,Te&&Ne(Te[HE])?Te[HE]():"Error serializing object",null,!0)}}return Ce}return Q[se]=!0,re(Q.aiDataContract,function(Te,Le){var Ye=Ne(Le)?Le()&1:Le&1,Fe=Ne(Le)?Le()&4:Le&4,Ge=Le&2,lt=Q[Te]!==void 0,et=Se(Q[Te])&&Q[Te]!==null;if(Ye&&!lt&&!Ge)wn(x,1,24,"Missing required field specification. The field is required but not present on source",{field:Te,name:J});else if(!Fe){var gt=void 0;et?Ge?gt=D(Q[Te],Te):gt=S(Q[Te],Te):gt=Q[Te],gt!==void 0&&(Ce[Te]=gt)}}),delete Q[se],Ce}s(S,"_serializeObject");function D(Q,J){var se;if(Q)if(!Je(Q))wn(x,1,54,`This field was specified as an array in the contract but the item is not an array.\r
`,{name:J},!0);else{se=[];for(var Ce=0;Ce<Q[hi];Ce++){var Te=Q[Ce],Le=S(Te,J+"["+Ce+"]");se[c1](Le)}}return se}s(D,"_serializeArray");function L(Q,J,se){var Ce;return Q&&(Ce={},re(Q,function(Te,Le){if(J==="string")Le===void 0?Ce[Te]="undefined":Le===null?Ce[Te]="null":Le[HE]?Ce[Te]=Le[HE]():Ce[Te]="invalid field: toString() is not defined.";else if(J==="number")if(Le===void 0)Ce[Te]="undefined";else if(Le===null)Ce[Te]="null";else{var Ye=parseFloat(Le);Ce[Te]=Ye}else Ce[Te]="invalid field: "+se+" is of unknown type.",wn(x,1,Ce[Te],null,!0)})),Ce}s(L,"_serializeStringMap")})}return s(A,"Serializer"),A.__ieDyn=1,A}(),FJe=8,MJe=function(){function A(){}return s(A,"HashCodeScoreGenerator"),A.prototype.getHashCodeScore=function(x){var T=this.getHashCode(x)/A.INT_MAX_VALUE;return T*100},A.prototype.getHashCode=function(x){if(x==="")return 0;for(;x[hi]<FJe;)x=x[b_](x);for(var T=5381,S=0;S<x[hi];++S)T=(T<<5)+T+x.charCodeAt(S),T=T&T;return Math.abs(T)},A.INT_MAX_VALUE=2147483647,A}(),QJe=function(){function A(){var x=this,T=new MJe,S=new Sge;x.getSamplingScore=function(D){var L=0;return D[nc]&&D[nc][S.userId]?L=T.getHashCodeScore(D[nc][S.userId]):D.ext&&D.ext.user&&D.ext.user.id?L=T[TJe](D.ext.user.id):D[nc]&&D[nc][S.operationId]?L=T.getHashCodeScore(D[nc][S.operationId]):D.ext&&D.ext.telemetryTrace&&D.ext.telemetryTrace[eB]?L=T.getHashCodeScore(D.ext.telemetryTrace[eB]):L=Math.random()*100,L}}return s(A,"SamplingScoreGenerator"),A}(),OJe=function(){function A(x,T){this.INT_MAX_VALUE=2147483647;var S=T||_E(null);(x>100||x<0)&&(S.throwInternal(2,58,"Sampling rate is out of range (0..100). Sampling will be disabled, you may be sending too much data which may affect your AI service level.",{samplingRate:x},!0),x=100),this[k7]=x,this.samplingScoreGenerator=new QJe}return s(A,"Sample"),A.prototype.isSampledIn=function(x){var T=this[k7],S=!1;return T==null||T>=100||x.baseType===Kk[Zh]?!0:(S=this.samplingScoreGenerator.getSamplingScore(x)<T,S)},A}(),os,u1,tg=void 0,Oge="",UJe=65e3;function Uge(A){try{return A.responseText}catch{}return null}s(Uge,"_getResponseText");function qJe(A){return A&&A.sendPOST}s(qJe,"isOverrideFn");var qge=Xt((os={endpointUrl:Pk(le,cJ+m_)},os[IJ]=df(),os.maxBatchInterval=15e3,os[kge]=102400,os.disableTelemetry=df(),os[Pge]=df(!0),os.isRetryDisabled=df(),os[RJ]=df(!0),os[Nge]=df(!0),os.disableXhr=df(),os[Dge]=df(),os[SJ]=df(),os[lB]=tg,os.namePrefix=tg,os.samplingPercentage=Pk(WJe,100),os[_J]=tg,os.convertUndefined=tg,os.eventsLimitInMem=1e4,os[TJ]=!1,os.httpXHROverride={isVal:qJe,v:tg},os[Bge]=df(),os.transports=tg,os.retryCodes=tg,os.maxRetryCnt={isVal:ft,v:10},os));function WJe(A){return!isNaN(A)&&A>0&&A<=100}s(WJe,"_chkSampling");var HJe=(u1={},u1[y_.dataType]=Fge,u1[I7.dataType]=DJe,u1[b7.dataType]=BJe,u1[T7.dataType]=PJe,u1[v7.dataType]=RJe,u1[Kk.dataType]=kJe,u1[E7.dataType]=SJe,u1),Wge=function(A){uE(x,A);function x(){var T=A.call(this)||this;T.priority=1001,T.identifier=IJe;var S,D,L,Q,J,se,Ce,Te=0,Le,Ye,Fe,Ge,lt,et,gt,Nt,Vt,hn,Wr,xi,vi,ho,cr,Mn,bi,Rs,Uo,Ft,Qn,oo,bt,Ir,js,go,Sl;return ec(x,T,function(st,qa){Gge(),st.pause=function(){mx(),L=!0},st.resume=function(){L&&(L=!1,D=null,To(),w_())},st.flush=function(Ue,mt,Zt){if(Ue===void 0&&(Ue=!0),!L){mx();try{return st[oB](Ue,null,Zt||1)}catch(Rn){wn(st[Dc](),1,22,"flush failed, telemetry will not be collected: "+ll(Rn),{exception:Lt(Rn)})}}},st.onunloadFlush=function(){if(!L)if(gt||Ft)try{return st[oB](!0,rd,2)}catch(Ue){wn(st[Dc](),1,20,"failed to flush with beacon sender on page unload, telemetry will not be collected: "+ll(Ue),{exception:Lt(Ue)})}else st.flush(!1)},st.addHeader=function(Ue,mt){Ce[Ue]=mt},st[wJ]=function(Ue,mt,Zt,Rn){st.isInitialized()&&wn(st[Dc](),1,28,"Sender is already initialized"),qa[wJ](Ue,mt,Zt,Rn);var Pr=st.identifier;J=new LJe(mt.logger),S=0,D=null,st[sB]=null,se=0;var mr=st[Dc]();Fe=ege($p("Sender"),mt.evtNamespace&&mt.evtNamespace()),Ye=EJe(Fe),st._addHook(zp(Ue,function($i){var va=$i.cfg;va.storagePrefix&&VKe(va.storagePrefix);var e0=nx(null,va,mt),li=e0.getExtCfg(Pr,qge),jge=li[aB];if(Ge&&jge===Ge){var QJ=va[aB];QJ&&QJ!==jge&&(li[aB]=QJ)}vt(li[lB])&&(li[lB]=va[lB]),ze(st,"_senderConfig",{g:s(function(){return li},"g")}),lt!==li[aB]&&(Ge=lt=li[aB]),mt.activeStatus()===Lh.PENDING?st.pause():mt.activeStatus()===Lh.ACTIVE&&st.resume(),hn&&hn!==li[_J]&&Un(hn,function(ic){delete Ce[ic.header]}),et=li[kge],gt=(li[SJ]===!1||li[RJ]===!1)&&Gh(),Nt=li[SJ]===!1&&Gh(),Vt=li[RJ]===!1&&Gh(),Ft=li[Bge],Qn=!!li.disableXhr,Sl=li.retryCodes;var OJ=li[TJ],__=!!li[Pge]&&(!!OJ||mge()),Vge=li.namePrefix,$Je=__!==Mn||__&&Rs!==Vge||__&&bi!==OJ;if(st[eg]){if($Je)try{st[eg]=st[eg].createNew(mr,li,__)}catch(ic){wn(st[Dc](),1,12,"failed to transfer telemetry to different buffer storage, telemetry will be lost: "+ll(ic),{exception:Lt(ic)})}To()}else st[eg]=__?new Qge(mr,li):new LJ(mr,li);Rs=Vge,Mn=__,bi=OJ,oo=!li[Dge]&&bE(!0),js=!!li[Nge],st._sample=new OJe(li.samplingPercentage,mr),xi=li[lB],!vt(xi)&&!Hge(xi,va)&&wn(mr,1,100,"Invalid Instrumentation key "+xi),hn=li[_J],me(Ge)&&!dge(Ge)&&hn&&hn[hi]>0?Un(hn,function(ic){T.addHeader(ic.header,ic.value)}):hn=null,Uo=li.enableSendPromise;var $ge=Rl();go?go.SetConfig($ge):(go=new Ua,go[wJ]($ge,mr));var N7=li.httpXHROverride,L7=null,fB=null,zJe=RN([3,1,2],li.transports);L7=go&&go[S7](zJe,!1);var UJ=go&&go.getFallbackInst();bt=s(function(ic,KE){return Bn(UJ,ic,KE)},"_xhrSend"),Ir=s(function(ic,KE){return Bn(UJ,ic,KE,!1)},"_fallbackSend"),L7=Ft?N7:L7||N7||UJ,st[sB]=function(ic,KE){return Bn(L7,ic,KE)},oo&&(Le=T_);var qJ=RN([3,1],li.unloadTransports);oo||(qJ=qJ.filter(function(ic){return ic!==2})),fB=go&&go[S7](qJ,!0),fB=Ft?N7:fB||N7,(Ft||li.unloadTransports||!Le)&&fB&&(Le=s(function(ic,KE){return Bn(fB,ic,KE)},"_syncUnloadSender")),Le||(Le=bt),Wr=li.disableTelemetry,vi=li.convertUndefined||tg,ho=li.isRetryDisabled,cr=li.maxBatchInterval}))},st.processTelemetry=function(Ue,mt){mt=st._getTelCtx(mt);var Zt=mt[Dc]();try{var Rn=Jp(Ue,Zt);if(!Rn)return;var Pr=px(Ue,Zt);if(!Pr)return;var mr=J.serialize(Pr),$i=st[eg];To(mr);var va={item:mr,cnt:0};$i[GE](va),w_()}catch(e0){wn(Zt,2,12,"Failed adding telemetry to the sender's buffer, some telemetry will be lost: "+ll(e0),{exception:Lt(e0)})}st.processNext(Ue,mt)},st.isCompletelyIdle=function(){return!L&&Te===0&&st._buffer[jE]()===0},st.getOfflineListener=function(){return Ye},st._xhrReadyStateChange=function(Ue,mt,Zt){if(!Zp(mt))return hf(Ue,mt,Zt)},st[oB]=function(Ue,mt,Zt){Ue===void 0&&(Ue=!0);var Rn;if(!L)try{var Pr=st[eg];if(Wr)Pr[v_]();else if(Pr[jE]()>0){var mr=Pr.getItems();D7(Zt||0,Ue),mt?Rn=mt.call(st,mr,Ue):Rn=st[sB](mr,Ue)}mx()}catch(va){var $i=UC();(!$i||$i>9)&&wn(st[Dc](),1,40,"Telemetry transmission failed, some telemetry will be lost: "+ll(va),{exception:Lt(va)})}return Rn},st.getOfflineSupport=function(){return{getUrl:s(function(){return Ge},"getUrl"),createPayload:dt,serialize:ks,batch:rc,shouldProcess:s(function(Ue){return!!Jp(Ue)},"shouldProcess")}},st._doTeardown=function(Ue,mt){st.onunloadFlush(),zC(Ye,!1),Gge()},st[VE]=function(Ue,mt,Zt){if(!Zp(Ue))return yu(Ue,mt)},st[kJ]=function(Ue,mt){if(!Zp(Ue))return dx(Ue,mt)},st[R7]=function(Ue,mt){if(!Zp(Ue))return Kp(Ue)},st._xdrOnLoad=function(Ue,mt){if(!Zp(mt))return Vs(Ue,mt)};function Vs(Ue,mt){var Zt=Uge(Ue);if(Ue&&(Zt+""=="200"||Zt===""))S=0,st[R7](mt,0);else{var Rn=kn(Zt);Rn&&Rn[BJ]&&Rn[BJ]>Rn[PJ]&&!ho?st[kJ](mt,Rn):st[VE](mt,SN(Ue))}}s(Vs,"_xdrOnLoad");function Rl(){try{var Ue={xdrOnComplete:s(function(Zt,Rn,Pr){var mr=fx(Pr);if(mr)return Vs(Zt,mr)},"xdrOnComplete"),fetchOnComplete:s(function(Zt,Rn,Pr,mr){var $i=fx(mr);if($i)return ss(Zt.status,$i,Zt.url,$i[hi],Zt.statusText,Pr||"")},"fetchOnComplete"),xhrOnComplete:s(function(Zt,Rn,Pr){var mr=fx(Pr);if(mr)return hf(Zt,mr,mr[hi])},"xhrOnComplete"),beaconOnRetry:s(function(Zt,Rn,Pr){return Xp(Zt,Rn,Pr)},"beaconOnRetry")},mt={enableSendPromise:Uo,isOneDs:!1,disableCredentials:!1,disableXhr:Qn,disableBeacon:!Vt,disableBeaconSync:!Nt,senderOnCompleteCallBack:Ue};return mt}catch{}return null}s(Rl,"_getSendPostMgrConfig");function hf(Ue,mt,Zt){Ue.readyState===4&&ss(Ue.status,mt,Ue.responseURL,Zt,$w(Ue),Uge(Ue)||Ue.response)}s(hf,"_xhrReadyStateChange");function yu(Ue,mt,Zt){wn(st[Dc](),2,26,"Failed to send telemetry.",{message:mt}),st._buffer&&st._buffer[nB](Ue)}s(yu,"_onError");function dx(Ue,mt){for(var Zt=[],Rn=[],Pr=mt.errors.reverse(),mr=0,$i=Pr;mr<$i.length;mr++){var va=$i[mr],e0=Ue.splice(va.index,1)[0];hx(va.statusCode)?Rn[c1](e0):Zt[c1](e0)}Ue[hi]>0&&st[R7](Ue,mt[PJ]),Zt[hi]>0&&st[VE](Zt,$w(null,["partial success",mt[PJ],"of",mt.itemsReceived].join(" "))),Rn[hi]>0&&(dB(Rn),wn(st[Dc](),2,40,"Partial success. Delivered: "+Ue[hi]+", Failed: "+Zt[hi]+". Will retry to send "+Rn[hi]+" our of "+mt[BJ]+" items"))}s(dx,"_onPartialSuccess");function Kp(Ue,mt){st._buffer&&st._buffer[nB](Ue)}s(Kp,"_onSuccess");function fx(Ue){try{if(Ue){var mt=Ue,Zt=mt.oriPayload;return Zt&&Zt[hi]?Zt:null}}catch{}return null}s(fx,"_getPayloadArr");function Jp(Ue,mt){if(Wr)return!1;if(!Ue)return mt&&wn(mt,1,7,"Cannot send empty telemetry"),!1;if(Ue.baseData&&!Ue[DJ])return mt&&wn(mt,1,70,"Cannot send telemetry without baseData and baseType"),!1;if(Ue[DJ]||(Ue[DJ]="EventData"),!st[sB])return mt&&wn(mt,1,28,"Sender was not initialized"),!1;if(fn(Ue))Ue[nge]=st._sample[k7];else return mt&&wn(mt,2,33,"Telemetry item was sampled out and not sent",{SampleRate:st._sample[k7]}),!1;return!0}s(Jp,"_validate");function px(Ue,mt){var Zt=Ue.iKey||xi,Rn=x.constructEnvelope(Ue,Zt,mt,vi);if(!Rn){wn(mt,1,47,"Unable to create an AppInsights envelope");return}var Pr=!1;if(Ue[nc]&&Ue[nc][lJ]&&(Un(Ue[nc][lJ],function(mr){try{mr&&mr(Rn)===!1&&(Pr=!0,i_(mt,"Telemetry processor check returns false"))}catch($i){wn(mt,1,64,"One of telemetry initializers failed, telemetry item will not be sent: "+ll($i),{exception:Lt($i)},!0)}}),delete Ue[nc][lJ]),!Pr)return Rn}s(px,"_getEnvelope");function ks(Ue){var mt=Oge,Zt=st[Dc]();try{var Rn=Jp(Ue,Zt),Pr=null;Rn&&(Pr=px(Ue,Zt)),Pr&&(mt=J.serialize(Pr))}catch{}return mt}s(ks,"_serialize");function rc(Ue){var mt=Oge;return Ue&&Ue[hi]&&(mt="["+Ue.join(",")+"]"),mt}s(rc,"_batch");function dt(Ue){var mt=vo();return{urlString:Ge,data:Ue,headers:mt}}s(dt,"_createPayload");function fn(Ue){return st._sample.isSampledIn(Ue)}s(fn,"_isSampledIn");function kr(Ue,mt,Zt,Rn){mt===200&&Ue?st._onSuccess(Ue,Ue[hi]):Rn&&st[VE](Ue,Rn)}s(kr,"_getOnComplete");function Bn(Ue,mt,Zt,Rn){Rn===void 0&&(Rn=!0);var Pr=s(function(va,e0,li){return kr(mt,va,e0,li)},"onComplete"),mr=Br(mt),$i=Ue&&Ue.sendPOST;return $i&&mr?(Rn&&st._buffer[_7](mt),$i(mr,Pr,!Zt)):null}s(Bn,"_doSend");function Br(Ue){if(Je(Ue)&&Ue[hi]>0){var mt=st[eg].batchPayloads(Ue),Zt=vo(),Rn={data:mt,urlString:Ge,headers:Zt,disableXhrSync:Qn,disableFetchKeepAlive:!oo,oriPayload:Ue};return Rn}return null}s(Br,"_getPayload");function vo(){try{var Ue=Ce||{};return dge(Ge)&&(Ue[ige[6]]=ige[7]),Ue}catch{}return null}s(vo,"_getHeaders");function To(Ue){var mt=Ue?Ue[hi]:0;return st[eg].size()+mt>et?((!Ye||Ye.isOnline())&&st[oB](!0,null,10),!0):!1}s(To,"_checkMaxSize");function ss(Ue,mt,Zt,Rn,Pr,mr){var $i=null;if(st._appId||($i=kn(mr),$i&&$i.appId&&(st._appId=$i.appId)),(Ue<200||Ue>=300)&&Ue!==0){if((Ue===301||Ue===307||Ue===308)&&!Nc(Zt)){st[VE](mt,Pr);return}if(Ye&&!Ye.isOnline()){if(!ho){var va=10;dB(mt,va),wn(st[Dc](),2,40,". Offline - Response Code: ".concat(Ue,". Offline status: ").concat(!Ye.isOnline(),". Will retry to send ").concat(mt.length," items."))}return}!ho&&hx(Ue)?(dB(mt),wn(st[Dc](),2,40,". Response code "+Ue+". Will retry to send "+mt[hi]+" items.")):st[VE](mt,Pr)}else Nc(Zt),Ue===206?($i||($i=kn(mr)),$i&&!ho?st[kJ](mt,$i):st[VE](mt,Pr)):(S=0,st[R7](mt,Rn))}s(ss,"_checkResponsStatus");function Nc(Ue){return se>=10?!1:!te(Ue)&&Ue!==""&&Ue!==Ge?(Ge=Ue,++se,!0):!1}s(Nc,"_checkAndUpdateEndPointUrl");function rd(Ue,mt){if(Le)Le(Ue,!1);else{var Zt=go&&go[S7]([3],!0);return Bn(Zt,Ue,mt)}}s(rd,"_doUnloadSend");function Xp(Ue,mt,Zt){var Rn=Ue,Pr=Rn&&Rn.oriPayload;if(js)Ir&&Ir(Pr,!0),wn(st[Dc](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender.");else{for(var mr=[],$i=0;$i<Pr[hi];$i++){var va=Pr[$i],e0=[va],li=Br(e0);Zt(li,mt)?st._onSuccess(e0,e0[hi]):mr[c1](va)}mr[hi]>0&&(Ir&&Ir(mr,!0),wn(st[Dc](),2,40,". Failed to send telemetry with Beacon API, retried with normal sender."))}}s(Xp,"_onBeaconRetry");function Zp(Ue){try{if(Ue&&Ue[hi])return me(Ue[0])}catch{}return null}s(Zp,"_isStringArr");function T_(Ue,mt){var Zt=null;if(Je(Ue)){for(var Rn=Ue[hi],Pr=0;Pr<Ue[hi];Pr++)Rn+=Ue[Pr].item[hi];var mr=go.getSyncFetchPayload();mr+Rn<=UJe?Zt=2:Gh()?Zt=3:(Zt=1,wn(st[Dc](),2,40,". Failed to send telemetry with Beacon API, retried with xhrSender."));var $i=go&&go[S7]([Zt],!0);return Bn($i,Ue,mt)}return null}s(T_,"_fetchKeepAliveSender");function dB(Ue,mt){if(mt===void 0&&(mt=1),!(!Ue||Ue[hi]===0)){var Zt=st[eg];Zt[nB](Ue),S++;for(var Rn=0,Pr=Ue;Rn<Pr.length;Rn++){var mr=Pr[Rn];mr.cnt=mr.cnt||0,mr.cnt++,Zt[GE](mr)}MJ(mt),w_()}}s(dB,"_resendPayload");function MJ(Ue){var mt=10,Zt;if(S<=1)Zt=mt;else{var Rn=(Math.pow(2,S)-1)/2,Pr=qA(Math.random()*Rn*mt)+1;Pr=Ue*Pr,Zt=_e(Vr(Pr,3600),mt)}var mr=Rh()+Zt*1e3;D=mr}s(MJ,"_setRetryTime");function w_(){if(!Q&&!L){var Ue=D?_e(0,D-Rh()):0,mt=_e(cr,Ue);Q=Ph(function(){Q=null,st[oB](!0,null,1)},mt)}}s(w_,"_setupTimer");function mx(){Q&&Q.cancel(),Q=null,D=null}s(mx,"_clearScheduledTimer");function hx(Ue){return te(Sl)?Ue===401||Ue===408||Ue===429||Ue===500||Ue===502||Ue===503||Ue===504:Sl[hi]&&Sl.indexOf(Ue)>-1}s(hx,"_isRetriable");function P7(){var Ue="getNotifyMgr";return st.core[Ue]?st.core[Ue]():st.core._notificationManager}s(P7,"_getNotifyMgr");function D7(Ue,mt){var Zt=P7();if(Zt&&Zt.eventsSendRequest)try{Zt.eventsSendRequest(Ue,mt)}catch(Rn){wn(st[Dc](),1,74,"send request notification failed: "+ll(Rn),{exception:Lt(Rn)})}}s(D7,"_notifySendRequest");function Hge(Ue,mt){var Zt=mt.disableInstrumentationKeyValidation,Rn=te(Zt)?!1:Zt;if(Rn)return!0;var Pr="^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$",mr=new RegExp(Pr);return mr.test(Ue)}s(Hge,"_validateInstrumentationKey");function Gge(){st[sB]=null,st[eg]=null,st._appId=null,st._sample=null,Ce={},Ye=null,S=0,D=null,L=!1,Q=null,J=null,se=0,Te=0,Le=null,Fe=null,Ge=null,lt=null,et=0,gt=!1,hn=null,Wr=!1,xi=null,vi=tg,ho=!1,Mn=null,Rs=tg,Qn=!1,oo=!1,js=!1,bt=null,Ir=null,go=null,ze(st,"_senderConfig",{g:s(function(){return _N({},qge)},"g")})}s(Gge,"_initDefaults")}),T}return s(x,"Sender"),x.constructEnvelope=function(T,S,D,L){var Q;S!==T.iKey&&!te(S)?Q=Up(Up({},T),{iKey:S}):Q=T;var J=HJe[Q.baseType]||Fge;return J(D,Q,L)},x}(pt),E_="instrumentationKey",B7="connectionString",cB="endpointUrl",uB="userOverrideEndpointUrl",I_,FJ=void 0,GJe=(I_={diagnosticLogInterval:Pk(jJe,1e4)},I_[B7]=FJ,I_.endpointUrl=FJ,I_[E_]=FJ,I_.extensionConfig={},I_);function jJe(A){return A&&A>0}s(jJe,"_chkDiagLevel");var VJe=function(){function A(x){var T=new Et,S;(te(x)||te(x[E_])&&te(x[B7]))&&Wn("Invalid input configuration"),ec(A,this,function(L){ze(L,"config",{g:s(function(){return S},"g")}),Q(),L.initialize=Q,L.track=D,Ak(L,T,["flush","pollInternalLogs","stopPollingInternalLogs","unload","getPlugin","addPlugin","evtNamespace","addUnloadCb","onCfgChange","getTraceCtx","updateCfg","addTelemetryInitializer"]);function Q(){var J=nd(x||{},GJe);S=J.cfg,T.addUnloadHook(zp(J,function(){var se=S[B7];if(vt(se)){var Ce=Qw(function(Fe,Ge){Ju(se,function(lt){var et=lt.value,gt=S[E_];if(!lt.rejected&&et){S[B7]=et;var Nt=AJ(et);gt=Nt.instrumentationkey||gt}Fe(gt)})}),Te=Qw(function(Fe,Ge){Ju(se,function(lt){var et=lt.value,gt=S[cB];if(!lt.rejected&&et){var Nt=AJ(et),Vt=Nt.ingestionendpoint;gt=Vt?Vt+m_:gt}Fe(gt)})});S[E_]=Ce,S[cB]=S[uB]||Te}if(me(se)){var Le=AJ(se),Ye=Le.ingestionendpoint;S[cB]=S[uB]?S[uB]:Ye+m_,S[E_]=Le.instrumentationkey||S[E_]}S[cB]=S[uB]?S[uB]:S[cB]})),T.initialize(S,[new Wge])}s(Q,"_initialize")});function D(L){L&&(L.baseData=L.baseData||{},L.baseType=L.baseType||"EventData"),T.track(L)}s(D,"_track")}return s(A,"ApplicationInsights"),A.__ieDyn=1,A}();t.AppInsightsCore=Et,t.ApplicationInsights=VJe,t.Sender=Wge,t.SeverityLevel=bJe,t.arrForEach=Un,t.isNullOrUndefined=te,t.proxyFunctions=Ak,t.throwError=Wn})});var ZIe=H(xg=>{"use strict";f();Object.defineProperty(xg,"__esModule",{value:!0});xg.bytePairEncode=xg.BinaryMap=xg.binaryMapKey=void 0;var Mat=s((t,e,n)=>{let r=n-e,i=16777215>>>Math.max(0,(3-r)*8),o=(t[e+0]|t[e+1]<<8|t[e+2]<<16)&i,a=16777215>>>Math.min(31,Math.max(0,(6-r)*8)),l=(t[e+3]|t[e+4]<<8|t[e+5]<<16)&a;return o+16777216*l},"binaryMapKey");xg.binaryMapKey=Mat;var ute=class t{static{s(this,"BinaryMap")}constructor(){this.nested=new Map,this.final=new Map}get(e,n=0,r=e.length){let i=r<6+n,o=(0,xg.binaryMapKey)(e,n,r);return i?this.final.get(o):this.nested.get(o)?.get(e,6+n,r)}set(e,n){let r=(0,xg.binaryMapKey)(e,0,e.length);if(e.length<6){this.final.set(r,n);return}let o=this.nested.get(r);if(o instanceof t)o.set(e.subarray(6),n);else{let a=new t;a.set(e.subarray(6),n),this.nested.set(r,a)}}};xg.BinaryMap=ute;var Cg=new Int32Array(128),_u=new Int32Array(128);function Qat(t,e,n){if(n===1)return[e.get(t)];let r=2147483647,i=-1;for(;Cg.length<n*2;)_u=new Int32Array(_u.length*2),Cg=new Int32Array(Cg.length*2);for(let c=0;c<n-1;c++){let u=e.get(t,c,c+2)??2147483647;u<r&&(r=u,i=c),_u[c]=c,Cg[c]=u}_u[n-1]=n-1,Cg[n-1]=2147483647,_u[n]=n,Cg[n]=2147483647;let o=n+1;function a(c,u=0){if(c+u+2<o){let d=e.get(t,_u[c],_u[c+u+2]);if(d!==void 0)return d}return 2147483647}for(s(a,"getRank");r!==2147483647;){Cg[_u[i]]=a(i,1),i>0&&(Cg[_u[i-1]]=a(i-1,1));for(let c=i+1;c<o-1;c++)_u[c]=_u[c+1];o--,i=-1,r=2147483647;for(let c=0;c<o-1;c++){let u=Cg[_u[c]];Cg[_u[c]]<r&&(r=u,i=c)}}let l=[];for(let c=0;c<o-1;c++)l.push(e.get(t,_u[c],_u[c+1]));return l}s(Qat,"bytePairEncode");xg.bytePairEncode=Qat});var e2e=H(EM=>{"use strict";f();Object.defineProperty(EM,"__esModule",{value:!0});EM.makeTextEncoder=void 0;var dte=class{static{s(this,"UniversalTextEncoder")}constructor(){this.length=0,this.encoder=new TextEncoder}encode(e){let n=this.encoder.encode(e);return this.length=n.length,n}},fte=class{static{s(this,"NodeTextEncoder")}constructor(){this.buffer=Buffer.alloc(256),this.length=0}encode(e){for(;;){if(this.length=this.buffer.write(e,"utf8"),this.length<this.buffer.length-4)return this.buffer;this.buffer=Buffer.alloc(this.length*2),this.length=this.buffer.write(e)}}},Oat=s(()=>typeof Buffer<"u"?new fte:new dte,"makeTextEncoder");EM.makeTextEncoder=Oat});var t2e=H(IM=>{"use strict";f();Object.defineProperty(IM,"__esModule",{value:!0});IM.LRUCache=void 0;var pte=class{static{s(this,"LRUCache")}constructor(e){this.size=e,this.nodes=new Map}get(e){let n=this.nodes.get(e);if(n)return this.moveToHead(n),n.value}set(e,n){let r=this.nodes.get(e);if(r)r.value=n,this.moveToHead(r);else{let i=new mte(e,n);this.nodes.set(e,i),this.addNode(i),this.nodes.size>this.size&&(this.nodes.delete(this.tail.key),this.removeNode(this.tail))}}moveToHead(e){this.removeNode(e),e.next=void 0,e.prev=void 0,this.addNode(e)}addNode(e){this.head&&(this.head.prev=e,e.next=this.head),this.tail||(this.tail=e),this.head=e}removeNode(e){e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev}};IM.LRUCache=pte;var mte=class{static{s(this,"Node")}constructor(e,n){this.key=e,this.value=n}}});var gte=H(wM=>{"use strict";f();Object.defineProperty(wM,"__esModule",{value:!0});wM.TikTokenizer=void 0;var TM=ZIe(),Uat=e2e(),qat=t2e();function Wat(t){let e=new Map;try{let i=require("fs").readFileSync(t,"utf-8");return n(i),e}catch(r){throw new Error(`Failed to load from BPE encoder file stream: ${r}`)}function n(r){for(let i of r.split(/[\r\n]+/)){if(i.trim()==="")continue;let o=i.split(" ");if(o.length!==2)throw new Error("Invalid format in the BPE encoder file stream");let a=new Uint8Array(Buffer.from(o[0],"base64")),l=parseInt(o[1]);if(!isNaN(l))e.set(a,l);else throw new Error(`Can't parse ${o[1]} to integer`)}}s(n,"processBpeRanks")}s(Wat,"loadTikTokenBpe");function Hat(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(Hat,"escapeRegExp");var hte=class{static{s(this,"TikTokenizer")}constructor(e,n,r,i=8192){this.textEncoder=(0,Uat.makeTextEncoder)(),this.textDecoder=new TextDecoder("utf-8"),this.cache=new qat.LRUCache(i);let o=typeof e=="string"?Wat(e):e;this.init(o,n,r)}init(e,n,r){this.encoder=new TM.BinaryMap;for(let[i,o]of e)this.encoder.set(i,o);this.regex=new RegExp(r,"gu"),this.specialTokensRegex=new RegExp(Array.from(n.keys()).map(i=>Hat(i)).join("|")),this.specialTokensEncoder=n,this.decoder=new Map;for(let[i,o]of e)this.decoder.set(o,i);if(e.size!==this.decoder.size)throw new Error("Encoder and decoder sizes do not match");this.specialTokensDecoder=new Map;for(let[i,o]of n)this.specialTokensDecoder.set(o,i)}findNextSpecialToken(e,n,r){let i=n,o=null;if(r&&this.specialTokensRegex)for(;o=e.slice(i).match(this.specialTokensRegex),!(!o||r&&r.includes(o[0]));)i+=o.index+1;let a=o?i+o.index:e.length;return[o,a]}encode(e,n){let r=[],i=0;for(;;){let o,a;if([o,a]=this.findNextSpecialToken(e,i,n),a>i&&this.encodeByIndex(e,r,i,a),o){if(i=i+this.encodeSpecialToken(r,o),i>=e.length)break}else break}return r}encodeSpecialToken(e,n){let r=this.specialTokensEncoder?.get(n[0]);return e.push(r),n.index+n[0].length}encodeByIndex(e,n,r,i){let o,a=e.substring(r,i);for(this.regex.lastIndex=0;o=this.regex.exec(a);){let l=this.cache.get(o[0]);if(l)for(let c of l)n.push(c);else{let c=this.textEncoder.encode(o[0]),u=this.encoder.get(c,0,this.textEncoder.length);if(u!==void 0)n.push(u),this.cache.set(o[0],[u]);else{let d=(0,TM.bytePairEncode)(c,this.encoder,this.textEncoder.length);for(let p of d)n.push(p);this.cache.set(o[0],d)}}}}encodeTrimSuffixByIndex(e,n,r,i,o,a,l){let c,u=e.substring(r,i);for(this.regex.lastIndex=0;c=this.regex.exec(u);){let d=c[0],p=this.cache.get(d);if(p)if(a+p.length<=o)a+=p.length,l+=d.length,n.push(...p);else{let m=o-a;a+=m,l+=d.length,n.push(...p.slice(0,m));break}else{let m=this.textEncoder.encode(d),h=this.encoder.get(m,0,m.length);if(h!==void 0)if(this.cache.set(d,[h]),a+1<=o)a++,l+=d.length,n.push(h);else break;else{let g=(0,TM.bytePairEncode)(m,this.encoder,this.textEncoder.length);if(this.cache.set(d,g),a+g.length<=o){a+=g.length,l+=d.length;for(let y of g)n.push(y)}else{let y=o-a;a+=y,l+=d.length;for(let v=0;v<y;v++)n.push(g[v]);break}}}if(a>=o)break}return{tokenCount:a,encodeLength:l}}encodeTrimSuffix(e,n,r){let i=[],o=0,a=0,l=0;for(;;){let u,d;if([u,d]=this.findNextSpecialToken(e,o,r),d>o){let{tokenCount:p,encodeLength:m}=this.encodeTrimSuffixByIndex(e,i,o,d,n,a,l);if(a=p,l=m,a>=n)break}if(u!==null){if(a++,a<=n&&(o=o+this.encodeSpecialToken(i,u),l+=u[0].length,o>=e.length)||a>=n)break}else break}let c=l===e.length?e:e.slice(0,l);return{tokenIds:i,text:c}}encodeTrimPrefix(e,n,r){let i=[],o=0,a=0,l=0,c=new Map;for(c.set(a,l);;){let m,h;if([m,h]=this.findNextSpecialToken(e,o,r),h>o){let g,y=e.substring(o,h);for(this.regex.lastIndex=0;g=this.regex.exec(y);){let v=g[0],b=this.cache.get(v);if(b)a+=b.length,l+=v.length,i.push(...b),c.set(a,l);else{let E=this.textEncoder.encode(v),_=this.encoder.get(E);if(_!==void 0)this.cache.set(v,[_]),a++,l+=v.length,i.push(_),c.set(a,l);else{let k=(0,TM.bytePairEncode)(E,this.encoder,this.textEncoder.length);this.cache.set(v,k),a+=k.length,l+=v.length;for(let P of k)i.push(P);c.set(a,l)}}}}if(m!==null){if(o=o+this.encodeSpecialToken(i,m),a++,l+=m[0].length,c.set(a,l),o>=e.length)break}else break}if(a<=n)return{tokenIds:i,text:e};let u=a-n,d=0,p=0;for(let[m,h]of c)if(m>=u){d=m,p=h;break}if(d>n){let m=this.encode(e,r),h=m.slice(m.length-n);return{tokenIds:h,text:this.decode(h)}}return{tokenIds:i.slice(d),text:e.slice(p)}}decode(e){let n=[];for(let r of e){let i=[],o=this.decoder?.get(r);if(o!==void 0)i=Array.from(o);else{let a=this.specialTokensDecoder?.get(r);if(a!==void 0){let l=this.textEncoder.encode(a);i=Array.from(l.subarray(0,this.textEncoder.length))}}n.push(...i)}return this.textDecoder.decode(new Uint8Array(n))}};wM.TikTokenizer=hte});var d2e=H(za=>{"use strict";f();Object.defineProperty(za,"__esModule",{value:!0});za.createTokenizer=za.createByEncoderName=za.createByModelName=za.getRegexByModel=za.getRegexByEncoder=za.getSpecialTokensByModel=za.getSpecialTokensByEncoder=za.MODEL_TO_ENCODING=void 0;var Gat=gte(),jat=new Map([["gpt-4o-","o200k_base"],["gpt-4-","cl100k_base"],["gpt-3.5-turbo-","cl100k_base"],["gpt-35-turbo-","cl100k_base"]]);za.MODEL_TO_ENCODING=new Map([["gpt-4o","o200k_base"],["gpt-4","cl100k_base"],["gpt-3.5-turbo","cl100k_base"],["text-davinci-003","p50k_base"],["text-davinci-002","p50k_base"],["text-davinci-001","r50k_base"],["text-curie-001","r50k_base"],["text-babbage-001","r50k_base"],["text-ada-001","r50k_base"],["davinci","r50k_base"],["curie","r50k_base"],["babbage","r50k_base"],["ada","r50k_base"],["code-davinci-002","p50k_base"],["code-davinci-001","p50k_base"],["code-cushman-002","p50k_base"],["code-cushman-001","p50k_base"],["davinci-codex","p50k_base"],["cushman-codex","p50k_base"],["text-davinci-edit-001","p50k_edit"],["code-davinci-edit-001","p50k_edit"],["text-embedding-ada-002","cl100k_base"],["text-similarity-davinci-001","r50k_base"],["text-similarity-curie-001","r50k_base"],["text-similarity-babbage-001","r50k_base"],["text-similarity-ada-001","r50k_base"],["text-search-davinci-doc-001","r50k_base"],["text-search-curie-doc-001","r50k_base"],["text-search-babbage-doc-001","r50k_base"],["text-search-ada-doc-001","r50k_base"],["code-search-babbage-code-001","r50k_base"],["code-search-ada-code-001","r50k_base"],["gpt2","gpt2"]]);var _M="<|endoftext|>",n2e="<|fim_prefix|>",r2e="<|fim_middle|>",i2e="<|fim_suffix|>",o2e="<|endofprompt|>",s8="'s|'t|'re|'ve|'m|'ll|'d| ?\\p{L}+| ?\\p{N}+| ?[^\\s\\p{L}\\p{N}]+|\\s+(?!\\S)|\\s+",s2e="(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)|[^\\r\\n\\p{L}\\p{N}]?\\p{L}+|\\p{N}{1,3}| ?[^\\s\\p{L}\\p{N}]+[\\r\\n]*|\\s*[\\r\\n]+|\\s+(?!\\S)|\\s+",Vat=[`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]*[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]+(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,`[^\r
\\p{L}\\p{N}]?[\\p{Lu}\\p{Lt}\\p{Lm}\\p{Lo}\\p{M}]+[\\p{Ll}\\p{Lm}\\p{Lo}\\p{M}]*(?:'s|'S|'t|'T|'re|'RE|'Re|'eR|'ve|'VE|'vE|'Ve|'m|'M|'ll|'lL|'Ll|'LL|'d|'D)?`,"\\p{N}{1,3}"," ?[^\\s\\p{L}\\p{N}]+[\\r\\n/]*","\\s*[\\r\\n]+","\\s+(?!\\S)","\\s+"],a2e=Vat.join("|");function Ate(t){let e="";if(za.MODEL_TO_ENCODING.has(t))e=za.MODEL_TO_ENCODING.get(t);else for(let[n,r]of jat)if(t.startsWith(n)){e=r;break}return e}s(Ate,"getEncoderFromModelName");async function $at(t,e){let n=require("fs"),r=await fetch(t);if(!r.ok)throw new Error(`Failed to fetch file from ${t}. Status code: ${r.status}`);let i=await r.text();n.writeFileSync(e,i)}s($at,"fetchAndSaveFile");function yte(t){let e=new Map([[_M,50256]]);switch(t){case"o200k_base":e=new Map([[_M,199999],[o2e,200018]]);break;case"cl100k_base":e=new Map([[_M,100257],[n2e,100258],[r2e,100259],[i2e,100260],[o2e,100276]]);break;case"p50k_edit":e=new Map([[_M,50256],[n2e,50281],[r2e,50282],[i2e,50283]]);break;default:break}return e}s(yte,"getSpecialTokensByEncoder");za.getSpecialTokensByEncoder=yte;function zat(t){let e=Ate(t);return yte(e)}s(zat,"getSpecialTokensByModel");za.getSpecialTokensByModel=zat;function l2e(t){switch(t){case"o200k_base":return a2e;case"cl100k_base":return s2e;default:break}return s8}s(l2e,"getRegexByEncoder");za.getRegexByEncoder=l2e;function Yat(t){let e=Ate(t);return l2e(e)}s(Yat,"getRegexByModel");za.getRegexByModel=Yat;async function Kat(t,e=null){return c2e(Ate(t),e)}s(Kat,"createByModelName");za.createByModelName=Kat;async function c2e(t,e=null){let n,r,i=yte(t);switch(t){case"o200k_base":n=a2e,r="https://openaipublic.blob.core.windows.net/encodings/o200k_base.tiktoken";break;case"cl100k_base":n=s2e,r="https://openaipublic.blob.core.windows.net/encodings/cl100k_base.tiktoken";break;case"p50k_base":n=s8,r="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"p50k_edit":n=s8,r="https://openaipublic.blob.core.windows.net/encodings/p50k_base.tiktoken";break;case"r50k_base":n=s8,r="https://openaipublic.blob.core.windows.net/encodings/r50k_base.tiktoken";break;case"gpt2":n=s8,r="https://raw.githubusercontent.com/microsoft/Tokenizer/main/model/gpt2.tiktoken";break;default:throw new Error(`Doesn't support this encoder [${t}]`)}e!==null&&(i=new Map([...i,...e]));let o=require("fs"),a=require("path"),l=a.basename(r),c=a.resolve(__dirname,"..","model");o.existsSync(c)||o.mkdirSync(c,{recursive:!0});let u=a.resolve(c,l);return o.existsSync(u)||(console.log(`Downloading file from ${r}`),await $at(r,u),console.log(`Saved file to ${u}`)),u2e(u,i,n)}s(c2e,"createByEncoderName");za.createByEncoderName=c2e;function u2e(t,e,n,r=8192){return new Gat.TikTokenizer(t,e,n,r)}s(u2e,"createTokenizer");za.createTokenizer=u2e});var f2e=H(Ya=>{"use strict";f();Object.defineProperty(Ya,"__esModule",{value:!0});Ya.createTokenizer=Ya.createByEncoderName=Ya.createByModelName=Ya.getSpecialTokensByModel=Ya.getSpecialTokensByEncoder=Ya.getRegexByModel=Ya.getRegexByEncoder=Ya.MODEL_TO_ENCODING=Ya.TikTokenizer=void 0;var Jat=gte();Object.defineProperty(Ya,"TikTokenizer",{enumerable:!0,get:s(function(){return Jat.TikTokenizer},"get")});var Vx=d2e();Object.defineProperty(Ya,"MODEL_TO_ENCODING",{enumerable:!0,get:s(function(){return Vx.MODEL_TO_ENCODING},"get")});Object.defineProperty(Ya,"getRegexByEncoder",{enumerable:!0,get:s(function(){return Vx.getRegexByEncoder},"get")});Object.defineProperty(Ya,"getRegexByModel",{enumerable:!0,get:s(function(){return Vx.getRegexByModel},"get")});Object.defineProperty(Ya,"getSpecialTokensByEncoder",{enumerable:!0,get:s(function(){return Vx.getSpecialTokensByEncoder},"get")});Object.defineProperty(Ya,"getSpecialTokensByModel",{enumerable:!0,get:s(function(){return Vx.getSpecialTokensByModel},"get")});Object.defineProperty(Ya,"createByModelName",{enumerable:!0,get:s(function(){return Vx.createByModelName},"get")});Object.defineProperty(Ya,"createByEncoderName",{enumerable:!0,get:s(function(){return Vx.createByEncoderName},"get")});Object.defineProperty(Ya,"createTokenizer",{enumerable:!0,get:s(function(){return Vx.createTokenizer},"get")})});var _te=H((ivn,L2e)=>{"use strict";f();L2e.exports=s(function(e,n){n===!0&&(n=0);var r="";if(typeof e=="string")try{r=new URL(e).protocol}catch{}else e&&e.constructor===URL&&(r=e.protocol);var i=r.split(/\:|\+/).filter(Boolean);return typeof n=="number"?i[n]:i},"protocols")});var M2e=H((avn,F2e)=>{"use strict";f();var kut=_te();function But(t){var e={protocols:[],protocol:null,port:null,resource:"",host:"",user:"",password:"",pathname:"",hash:"",search:"",href:t,query:{},parse_failed:!1};try{var n=new URL(t);e.protocols=kut(n),e.protocol=e.protocols[0],e.port=n.port,e.resource=n.hostname,e.host=n.host,e.user=n.username||"",e.password=n.password||"",e.pathname=n.pathname,e.hash=n.hash.slice(1),e.search=n.search.slice(1),e.href=n.href,e.query=Object.fromEntries(n.searchParams)}catch{e.protocols=["file"],e.protocol=e.protocols[0],e.port="",e.resource="",e.user="",e.pathname="",e.hash="",e.search="",e.href=t,e.query={},e.parse_failed=!0}return e}s(But,"parsePath");F2e.exports=But});var H2e=H((uvn,W2e)=>{"use strict";f();var Put=M2e();function Dut(t){return t&&typeof t=="object"&&"default"in t?t:{default:t}}s(Dut,"_interopDefaultLegacy");var Nut=Dut(Put);function Lut(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=s(function r(){if(this instanceof r){var i=[null];i.push.apply(i,arguments);var o=Function.bind.apply(e,i);return new o}return e.apply(this,arguments)},"a");n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:s(function(){return t[r]},"get")})}),n}s(Lut,"getAugmentedNamespace");var O2e={},Fut="text/plain",Mut="us-ascii",Q2e=s((t,e)=>e.some(n=>n instanceof RegExp?n.test(t):n===t),"testParameter"),Qut=s((t,{stripHash:e})=>{let n=/^data:(?<type>[^,]*?),(?<data>[^#]*?)(?:#(?<hash>.*))?$/.exec(t);if(!n)throw new Error(`Invalid URL: ${t}`);let{type:r,data:i,hash:o}=n.groups,a=r.split(";");o=e?"":o;let l=!1;a[a.length-1]==="base64"&&(a.pop(),l=!0);let c=(a.shift()||"").toLowerCase(),d=[...a.map(p=>{let[m,h=""]=p.split("=").map(g=>g.trim());return m==="charset"&&(h=h.toLowerCase(),h===Mut)?"":`${m}${h?`=${h}`:""}`}).filter(Boolean)];return l&&d.push("base64"),(d.length>0||c&&c!==Fut)&&d.unshift(c),`data:${d.join(";")},${l?i.trim():i}${o?`#${o}`:""}`},"normalizeDataURL");function Out(t,e){if(e={defaultProtocol:"http:",normalizeProtocol:!0,forceHttp:!1,forceHttps:!1,stripAuthentication:!0,stripHash:!1,stripTextFragment:!0,stripWWW:!0,removeQueryParameters:[/^utm_\w+/i],removeTrailingSlash:!0,removeSingleSlash:!0,removeDirectoryIndex:!1,sortQueryParameters:!0,...e},t=t.trim(),/^data:/i.test(t))return Qut(t,e);if(/^view-source:/i.test(t))throw new Error("`view-source:` is not supported as it is a non-standard protocol");let n=t.startsWith("//");!n&&/^\.*\//.test(t)||(t=t.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,e.defaultProtocol));let i=new URL(t);if(e.forceHttp&&e.forceHttps)throw new Error("The `forceHttp` and `forceHttps` options cannot be used together");if(e.forceHttp&&i.protocol==="https:"&&(i.protocol="http:"),e.forceHttps&&i.protocol==="http:"&&(i.protocol="https:"),e.stripAuthentication&&(i.username="",i.password=""),e.stripHash?i.hash="":e.stripTextFragment&&(i.hash=i.hash.replace(/#?:~:text.*?$/i,"")),i.pathname){let a=/\b[a-z][a-z\d+\-.]{1,50}:\/\//g,l=0,c="";for(;;){let d=a.exec(i.pathname);if(!d)break;let p=d[0],m=d.index,h=i.pathname.slice(l,m);c+=h.replace(/\/{2,}/g,"/"),c+=p,l=m+p.length}let u=i.pathname.slice(l,i.pathname.length);c+=u.replace(/\/{2,}/g,"/"),i.pathname=c}if(i.pathname)try{i.pathname=decodeURI(i.pathname)}catch{}if(e.removeDirectoryIndex===!0&&(e.removeDirectoryIndex=[/^index\.[a-z]+$/]),Array.isArray(e.removeDirectoryIndex)&&e.removeDirectoryIndex.length>0){let a=i.pathname.split("/"),l=a[a.length-1];Q2e(l,e.removeDirectoryIndex)&&(a=a.slice(0,-1),i.pathname=a.slice(1).join("/")+"/")}if(i.hostname&&(i.hostname=i.hostname.replace(/\.$/,""),e.stripWWW&&/^www\.(?!www\.)[a-z\-\d]{1,63}\.[a-z.\-\d]{2,63}$/.test(i.hostname)&&(i.hostname=i.hostname.replace(/^www\./,""))),Array.isArray(e.removeQueryParameters))for(let a of[...i.searchParams.keys()])Q2e(a,e.removeQueryParameters)&&i.searchParams.delete(a);if(e.removeQueryParameters===!0&&(i.search=""),e.sortQueryParameters){i.searchParams.sort();try{i.search=decodeURIComponent(i.search)}catch{}}e.removeTrailingSlash&&(i.pathname=i.pathname.replace(/\/$/,""));let o=t;return t=i.toString(),!e.removeSingleSlash&&i.pathname==="/"&&!o.endsWith("/")&&i.hash===""&&(t=t.replace(/\/$/,"")),(e.removeTrailingSlash||i.pathname==="/")&&i.hash===""&&e.removeSingleSlash&&(t=t.replace(/\/$/,"")),n&&!e.normalizeProtocol&&(t=t.replace(/^http:\/\//,"//")),e.stripProtocol&&(t=t.replace(/^(?:https?:)?\/\//,"")),t}s(Out,"normalizeUrl");var Uut=Object.freeze({__proto__:null,default:Out}),qut=Lut(Uut);Object.defineProperty(O2e,"__esModule",{value:!0});var Wut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hut=qut,Gut=U2e(Hut),jut=Nut.default,Vut=U2e(jut);function U2e(t){return t&&t.__esModule?t:{default:t}}s(U2e,"_interopRequireDefault");var q2e=s(function t(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=/^(?:([a-zA-Z_][a-zA-Z0-9_-]{0,31})@|https?:\/\/)([\w\.\-@]+)[\/:](([\~,\.\w,\-,\_,\/,\s]|%[0-9A-Fa-f]{2})+?(?:\.git|\/)?)$/,i=s(function(c){var u=new Error(c);throw u.subject_url=e,u},"throwErr");(typeof e!="string"||!e.trim())&&i("Invalid url."),e.length>t.MAX_INPUT_LENGTH&&i("Input exceeds maximum length. If needed, change the value of parseUrl.MAX_INPUT_LENGTH."),n&&((typeof n>"u"?"undefined":Wut(n))!=="object"&&(n={stripHash:!1}),e=(0,Gut.default)(e,n));var o=(0,Vut.default)(e);if(o.parse_failed){var a=o.href.match(r);a?(o.protocols=["ssh"],o.protocol="ssh",o.resource=a[2],o.host=a[2],o.user=a[1],o.pathname="/"+a[3],o.parse_failed=!1):i("URL parsing failed.")}return o},"parseUrl");q2e.MAX_INPUT_LENGTH=2048;var $ut=O2e.default=q2e;W2e.exports=$ut});var V2e=H((pvn,j2e)=>{"use strict";f();var zut=_te();function G2e(t){if(Array.isArray(t))return t.indexOf("ssh")!==-1||t.indexOf("rsync")!==-1;if(typeof t!="string")return!1;var e=zut(t);if(t=t.substring(t.indexOf("://")+3),G2e(e))return!0;var n=new RegExp(".([a-zA-Z\\d]+):(\\d+)/");return!t.match(n)&&t.indexOf("@")<t.indexOf(":")}s(G2e,"isSsh");j2e.exports=G2e});var Y2e=H((gvn,z2e)=>{"use strict";f();var Yut=H2e(),$2e=V2e();function Kut(t){let e=Yut(t);return e.token="",e.password==="x-oauth-basic"?e.token=e.user:e.user==="x-token-auth"&&(e.token=e.password),$2e(e.protocols)||e.protocols.length===0&&$2e(t)?e.protocol="ssh":e.protocols.length?e.protocol=e.protocols[0]:(e.protocol="file",e.protocols=["file"]),e.href=e.href.replace(/\/$/,""),e}s(Kut,"gitUp");z2e.exports=Kut});var J2e=H((Cvn,K2e)=>{"use strict";f();var Jut=Y2e();function Ste(t,e){if(e=e||[],typeof t!="string")throw new Error("The url must be a string.");if(!e.every(function(E){return typeof E=="string"}))throw new Error("The refs should contain only strings");var n=/^([a-z\d-]{1,39})\/([-\.\w]{1,100})$/i;n.test(t)&&(t="https://github.com/"+t);var r=Jut(t),i=r.resource.split("."),o=null;switch(r.toString=function(E){return Ste.stringify(this,E)},r.source=i.length>2?i.slice(1-i.length).join("."):r.source=r.resource,r.git_suffix=/\.git$/.test(r.pathname),r.name=decodeURIComponent((r.pathname||r.href).replace(/(^\/)|(\/$)/g,"").replace(/\.git$/,"")),r.owner=decodeURIComponent(r.user),r.source){case"git.cloudforge.com":r.owner=r.user,r.organization=i[0],r.source="cloudforge.com";break;case"visualstudio.com":if(r.resource==="vs-ssh.visualstudio.com"){o=r.name.split("/"),o.length===4&&(r.organization=o[1],r.owner=o[2],r.name=o[3],r.full_name=o[2]+"/"+o[3]);break}else{o=r.name.split("/"),o.length===2?(r.owner=o[1],r.name=o[1],r.full_name="_git/"+r.name):o.length===3?(r.name=o[2],o[0]==="DefaultCollection"?(r.owner=o[2],r.organization=o[0],r.full_name=r.organization+"/_git/"+r.name):(r.owner=o[0],r.full_name=r.owner+"/_git/"+r.name)):o.length===4&&(r.organization=o[0],r.owner=o[1],r.name=o[3],r.full_name=r.organization+"/"+r.owner+"/_git/"+r.name);break}case"dev.azure.com":case"azure.com":if(r.resource==="ssh.dev.azure.com"){o=r.name.split("/"),o.length===4&&(r.organization=o[1],r.owner=o[2],r.name=o[3]);break}else{o=r.name.split("/"),o.length===5?(r.organization=o[0],r.owner=o[1],r.name=o[4],r.full_name="_git/"+r.name):o.length===3?(r.name=o[2],o[0]==="DefaultCollection"?(r.owner=o[2],r.organization=o[0],r.full_name=r.organization+"/_git/"+r.name):(r.owner=o[0],r.full_name=r.owner+"/_git/"+r.name)):o.length===4&&(r.organization=o[0],r.owner=o[1],r.name=o[3],r.full_name=r.organization+"/"+r.owner+"/_git/"+r.name),r.query&&r.query.path&&(r.filepath=r.query.path.replace(/^\/+/g,"")),r.query&&r.query.version&&(r.ref=r.query.version.replace(/^GB/,""));break}default:o=r.name.split("/");var a=o.length-1;if(o.length>=2){var l=o.indexOf("-",2),c=o.indexOf("blob",2),u=o.indexOf("tree",2),d=o.indexOf("commit",2),p=o.indexOf("issues",2),m=o.indexOf("src",2),h=o.indexOf("raw",2),g=o.indexOf("edit",2);a=l>0?l-1:c>0&&u>0?Math.min(c-1,u-1):c>0?c-1:p>0?p-1:u>0?u-1:d>0?d-1:m>0?m-1:h>0?h-1:g>0?g-1:a,r.owner=o.slice(0,a).join("/"),r.name=o[a],d&&p<0&&(r.commit=o[a+2])}r.ref="",r.filepathtype="",r.filepath="";var y=o.length>a&&o[a+1]==="-"?a+1:a;o.length>y+2&&["raw","src","blob","tree","edit"].indexOf(o[y+1])>=0&&(r.filepathtype=o[y+1],r.ref=o[y+2],o.length>y+3&&(r.filepath=o.slice(y+3).join("/"))),r.organization=r.owner;break}r.full_name||(r.full_name=r.owner,r.name&&(r.full_name&&(r.full_name+="/"),r.full_name+=r.name)),r.owner.startsWith("scm/")&&(r.source="bitbucket-server",r.owner=r.owner.replace("scm/",""),r.organization=r.owner,r.full_name=r.owner+"/"+r.name);var v=/(projects|users)\/(.*?)\/repos\/(.*?)((\/.*$)|$)/,b=v.exec(r.pathname);return b!=null&&(r.source="bitbucket-server",b[1]==="users"?r.owner="~"+b[2]:r.owner=b[2],r.organization=r.owner,r.name=b[3],o=b[4].split("/"),o.length>1&&(["raw","browse"].indexOf(o[1])>=0?(r.filepathtype=o[1],o.length>2&&(r.filepath=o.slice(2).join("/"))):o[1]==="commits"&&o.length>2&&(r.commit=o[2])),r.full_name=r.owner+"/"+r.name,r.query.at?r.ref=r.query.at:r.ref=""),e.length!==0&&r.ref&&(r.ref=edt(r.href,e)||r.ref,r.filepath=r.href.split(r.ref+"/")[1]),r}s(Ste,"gitUrlParse");Ste.stringify=function(t,e){e=e||(t.protocols&&t.protocols.length?t.protocols.join("+"):t.protocol);var n=t.port?":"+t.port:"",r=t.user||"git",i=t.git_suffix?".git":"";switch(e){case"ssh":return n?"ssh://"+r+"@"+t.resource+n+"/"+t.full_name+i:r+"@"+t.resource+":"+t.full_name+i;case"git+ssh":case"ssh+git":case"ftp":case"ftps":return e+"://"+r+"@"+t.resource+n+"/"+t.full_name+i;case"http":case"https":var o=t.token?Xut(t):t.user&&(t.protocols.includes("http")||t.protocols.includes("https"))?t.user+"@":"";return e+"://"+o+t.resource+n+"/"+Zut(t)+i;default:return t.href}};function Xut(t){switch(t.source){case"bitbucket.org":return"x-token-auth:"+t.token+"@";default:return t.token+"@"}}s(Xut,"buildToken");function Zut(t){switch(t.source){case"bitbucket-server":return"scm/"+t.full_name;default:var e=t.full_name.split("/").map(function(n){return encodeURIComponent(n)}).join("/");return e}}s(Zut,"buildPath");function edt(t,e){var n="";return e.forEach(function(r){t.includes(r)&&r.length>n.length&&(n=r)}),n}s(edt,"findLongestMatchingSubstring");K2e.exports=Ste});var iTe=H((exports,module)=>{f();var Module=Module!==void 0?Module:{},TreeSitter=function(){var initPromise,document=typeof window=="object"?{currentScript:window.document.currentScript}:null;class Parser{static{s(this,"Parser")}constructor(){this.initialize()}initialize(){throw new Error("cannot construct a Parser before calling `init()`")}static init(moduleOptions){return initPromise||(Module=Object.assign({},Module,moduleOptions),initPromise=new Promise(resolveInitPromise=>{var moduleOverrides=Object.assign({},Module),arguments_=[],thisProgram="./this.program",quit_=s((t,e)=>{throw e},"quit_"),ENVIRONMENT_IS_WEB=typeof window=="object",ENVIRONMENT_IS_WORKER=typeof importScripts=="function",ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",scriptDirectory="",read_,readAsync,readBinary,setWindowTitle;function locateFile(t){return Module.locateFile?Module.locateFile(t,scriptDirectory):scriptDirectory+t}s(locateFile,"locateFile");function logExceptionOnExit(t){t instanceof ExitStatus||err("exiting due to exception: "+t)}if(s(logExceptionOnExit,"logExceptionOnExit"),ENVIRONMENT_IS_NODE){var fs=require("fs"),nodePath=require("path");scriptDirectory=ENVIRONMENT_IS_WORKER?nodePath.dirname(scriptDirectory)+"/":__dirname+"/",read_=s((t,e)=>(t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFileSync(t,e?void 0:"utf8")),"read_"),readBinary=s(t=>{var e=read_(t,!0);return e.buffer||(e=new Uint8Array(e)),e},"readBinary"),readAsync=s((t,e,n)=>{t=isFileURI(t)?new URL(t):nodePath.normalize(t),fs.readFile(t,function(r,i){r?n(r):e(i.buffer)})},"readAsync"),process.argv.length>1&&(thisProgram=process.argv[1].replace(/\\/g,"/")),arguments_=process.argv.slice(2),typeof module<"u"&&(module.exports=Module),quit_=s((t,e)=>{if(keepRuntimeAlive())throw process.exitCode=t,e;logExceptionOnExit(e),process.exit(t)},"quit_"),Module.inspect=function(){return"[Emscripten Module object]"}}else(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)&&(ENVIRONMENT_IS_WORKER?scriptDirectory=self.location.href:document!==void 0&&document.currentScript&&(scriptDirectory=document.currentScript.src),scriptDirectory=scriptDirectory.indexOf("blob:")!==0?scriptDirectory.substr(0,scriptDirectory.replace(/[?#].*/,"").lastIndexOf("/")+1):"",read_=s(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.send(null),e.responseText},"read_"),ENVIRONMENT_IS_WORKER&&(readBinary=s(t=>{var e=new XMLHttpRequest;return e.open("GET",t,!1),e.responseType="arraybuffer",e.send(null),new Uint8Array(e.response)},"readBinary")),readAsync=s((t,e,n)=>{var r=new XMLHttpRequest;r.open("GET",t,!0),r.responseType="arraybuffer",r.onload=()=>{r.status==200||r.status==0&&r.response?e(r.response):n()},r.onerror=n,r.send(null)},"readAsync"),setWindowTitle=s(t=>document.title=t,"setWindowTitle"));var out=Module.print||console.log.bind(console),err=Module.printErr||console.warn.bind(console);Object.assign(Module,moduleOverrides),moduleOverrides=null,Module.arguments&&(arguments_=Module.arguments),Module.thisProgram&&(thisProgram=Module.thisProgram),Module.quit&&(quit_=Module.quit);var STACK_ALIGN=16,dynamicLibraries=Module.dynamicLibraries||[],wasmBinary;Module.wasmBinary&&(wasmBinary=Module.wasmBinary);var noExitRuntime=Module.noExitRuntime||!0,wasmMemory;typeof WebAssembly!="object"&&abort("no native wasm support detected");var ABORT=!1,EXITSTATUS,UTF8Decoder=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,buffer,HEAP8,HEAPU8,HEAP16,HEAPU16,HEAP32,HEAPU32,HEAPF32,HEAPF64;function UTF8ArrayToString(t,e,n){for(var r=e+n,i=e;t[i]&&!(i>=r);)++i;if(i-e>16&&t.buffer&&UTF8Decoder)return UTF8Decoder.decode(t.subarray(e,i));for(var o="";e<i;){var a=t[e++];if(128&a){var l=63&t[e++];if((224&a)!=192){var c=63&t[e++];if((a=(240&a)==224?(15&a)<<12|l<<6|c:(7&a)<<18|l<<12|c<<6|63&t[e++])<65536)o+=String.fromCharCode(a);else{var u=a-65536;o+=String.fromCharCode(55296|u>>10,56320|1023&u)}}else o+=String.fromCharCode((31&a)<<6|l)}else o+=String.fromCharCode(a)}return o}s(UTF8ArrayToString,"UTF8ArrayToString");function UTF8ToString(t,e){return t?UTF8ArrayToString(HEAPU8,t,e):""}s(UTF8ToString,"UTF8ToString");function stringToUTF8Array(t,e,n,r){if(!(r>0))return 0;for(var i=n,o=n+r-1,a=0;a<t.length;++a){var l=t.charCodeAt(a);if(l>=55296&&l<=57343&&(l=65536+((1023&l)<<10)|1023&t.charCodeAt(++a)),l<=127){if(n>=o)break;e[n++]=l}else if(l<=2047){if(n+1>=o)break;e[n++]=192|l>>6,e[n++]=128|63&l}else if(l<=65535){if(n+2>=o)break;e[n++]=224|l>>12,e[n++]=128|l>>6&63,e[n++]=128|63&l}else{if(n+3>=o)break;e[n++]=240|l>>18,e[n++]=128|l>>12&63,e[n++]=128|l>>6&63,e[n++]=128|63&l}}return e[n]=0,n-i}s(stringToUTF8Array,"stringToUTF8Array");function stringToUTF8(t,e,n){return stringToUTF8Array(t,HEAPU8,e,n)}s(stringToUTF8,"stringToUTF8");function lengthBytesUTF8(t){for(var e=0,n=0;n<t.length;++n){var r=t.charCodeAt(n);r<=127?e++:r<=2047?e+=2:r>=55296&&r<=57343?(e+=4,++n):e+=3}return e}s(lengthBytesUTF8,"lengthBytesUTF8");function updateGlobalBufferAndViews(t){buffer=t,Module.HEAP8=HEAP8=new Int8Array(t),Module.HEAP16=HEAP16=new Int16Array(t),Module.HEAP32=HEAP32=new Int32Array(t),Module.HEAPU8=HEAPU8=new Uint8Array(t),Module.HEAPU16=HEAPU16=new Uint16Array(t),Module.HEAPU32=HEAPU32=new Uint32Array(t),Module.HEAPF32=HEAPF32=new Float32Array(t),Module.HEAPF64=HEAPF64=new Float64Array(t)}s(updateGlobalBufferAndViews,"updateGlobalBufferAndViews");var INITIAL_MEMORY=Module.INITIAL_MEMORY||33554432;wasmMemory=Module.wasmMemory?Module.wasmMemory:new WebAssembly.Memory({initial:INITIAL_MEMORY/65536,maximum:32768}),wasmMemory&&(buffer=wasmMemory.buffer),INITIAL_MEMORY=buffer.byteLength,updateGlobalBufferAndViews(buffer);var wasmTable=new WebAssembly.Table({initial:20,element:"anyfunc"}),__ATPRERUN__=[],__ATINIT__=[],__ATMAIN__=[],__ATPOSTRUN__=[],__RELOC_FUNCS__=[],runtimeInitialized=!1;function keepRuntimeAlive(){return noExitRuntime}s(keepRuntimeAlive,"keepRuntimeAlive");function preRun(){if(Module.preRun)for(typeof Module.preRun=="function"&&(Module.preRun=[Module.preRun]);Module.preRun.length;)addOnPreRun(Module.preRun.shift());callRuntimeCallbacks(__ATPRERUN__)}s(preRun,"preRun");function initRuntime(){runtimeInitialized=!0,callRuntimeCallbacks(__RELOC_FUNCS__),callRuntimeCallbacks(__ATINIT__)}s(initRuntime,"initRuntime");function preMain(){callRuntimeCallbacks(__ATMAIN__)}s(preMain,"preMain");function postRun(){if(Module.postRun)for(typeof Module.postRun=="function"&&(Module.postRun=[Module.postRun]);Module.postRun.length;)addOnPostRun(Module.postRun.shift());callRuntimeCallbacks(__ATPOSTRUN__)}s(postRun,"postRun");function addOnPreRun(t){__ATPRERUN__.unshift(t)}s(addOnPreRun,"addOnPreRun");function addOnInit(t){__ATINIT__.unshift(t)}s(addOnInit,"addOnInit");function addOnPostRun(t){__ATPOSTRUN__.unshift(t)}s(addOnPostRun,"addOnPostRun");var runDependencies=0,runDependencyWatcher=null,dependenciesFulfilled=null;function addRunDependency(t){runDependencies++,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies)}s(addRunDependency,"addRunDependency");function removeRunDependency(t){if(runDependencies--,Module.monitorRunDependencies&&Module.monitorRunDependencies(runDependencies),runDependencies==0&&(runDependencyWatcher!==null&&(clearInterval(runDependencyWatcher),runDependencyWatcher=null),dependenciesFulfilled)){var e=dependenciesFulfilled;dependenciesFulfilled=null,e()}}s(removeRunDependency,"removeRunDependency");function abort(t){throw Module.onAbort&&Module.onAbort(t),err(t="Aborted("+t+")"),ABORT=!0,EXITSTATUS=1,t+=". Build with -sASSERTIONS for more info.",new WebAssembly.RuntimeError(t)}s(abort,"abort");var dataURIPrefix="data:application/octet-stream;base64,",wasmBinaryFile,tempDouble,tempI64;function isDataURI(t){return t.startsWith(dataURIPrefix)}s(isDataURI,"isDataURI");function isFileURI(t){return t.startsWith("file://")}s(isFileURI,"isFileURI");function getBinary(t){try{if(t==wasmBinaryFile&&wasmBinary)return new Uint8Array(wasmBinary);if(readBinary)return readBinary(t);throw"both async and sync fetching of the wasm failed"}catch(e){abort(e)}}s(getBinary,"getBinary");function getBinaryPromise(){if(!wasmBinary&&(ENVIRONMENT_IS_WEB||ENVIRONMENT_IS_WORKER)){if(typeof fetch=="function"&&!isFileURI(wasmBinaryFile))return fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(t){if(!t.ok)throw"failed to load wasm binary file at '"+wasmBinaryFile+"'";return t.arrayBuffer()}).catch(function(){return getBinary(wasmBinaryFile)});if(readAsync)return new Promise(function(t,e){readAsync(wasmBinaryFile,function(n){t(new Uint8Array(n))},e)})}return Promise.resolve().then(function(){return getBinary(wasmBinaryFile)})}s(getBinaryPromise,"getBinaryPromise");function createWasm(){var t={env:asmLibraryArg,wasi_snapshot_preview1:asmLibraryArg,"GOT.mem":new Proxy(asmLibraryArg,GOTHandler),"GOT.func":new Proxy(asmLibraryArg,GOTHandler)};function e(i,o){var a=i.exports;a=relocateExports(a,1024);var l=getDylinkMetadata(o);l.neededDynlibs&&(dynamicLibraries=l.neededDynlibs.concat(dynamicLibraries)),mergeLibSymbols(a,"main"),Module.asm=a,addOnInit(Module.asm.__wasm_call_ctors),__RELOC_FUNCS__.push(Module.asm.__wasm_apply_data_relocs),removeRunDependency("wasm-instantiate")}s(e,"t");function n(i){e(i.instance,i.module)}s(n,"r");function r(i){return getBinaryPromise().then(function(o){return WebAssembly.instantiate(o,t)}).then(function(o){return o}).then(i,function(o){err("failed to asynchronously prepare wasm: "+o),abort(o)})}if(s(r,"_"),addRunDependency("wasm-instantiate"),Module.instantiateWasm)try{return Module.instantiateWasm(t,e)}catch(i){return err("Module.instantiateWasm callback failed with error: "+i),!1}return wasmBinary||typeof WebAssembly.instantiateStreaming!="function"||isDataURI(wasmBinaryFile)||isFileURI(wasmBinaryFile)||ENVIRONMENT_IS_NODE||typeof fetch!="function"?r(n):fetch(wasmBinaryFile,{credentials:"same-origin"}).then(function(i){return WebAssembly.instantiateStreaming(i,t).then(n,function(o){return err("wasm streaming compile failed: "+o),err("falling back to ArrayBuffer instantiation"),r(n)})}),{}}s(createWasm,"createWasm"),wasmBinaryFile="tree-sitter.wasm",isDataURI(wasmBinaryFile)||(wasmBinaryFile=locateFile(wasmBinaryFile));var ASM_CONSTS={};function ExitStatus(t){this.name="ExitStatus",this.message="Program terminated with exit("+t+")",this.status=t}s(ExitStatus,"ExitStatus");var GOT={},CurrentModuleWeakSymbols=new Set([]),GOTHandler={get:s(function(t,e){var n=GOT[e];return n||(n=GOT[e]=new WebAssembly.Global({value:"i32",mutable:!0})),CurrentModuleWeakSymbols.has(e)||(n.required=!0),n},"get")};function callRuntimeCallbacks(t){for(;t.length>0;)t.shift()(Module)}s(callRuntimeCallbacks,"callRuntimeCallbacks");function getDylinkMetadata(t){var e=0,n=0;function r(){for(var b=0,E=1;;){var _=t[e++];if(b+=(127&_)*E,E*=128,!(128&_))break}return b}s(r,"_");function i(){var b=r();return UTF8ArrayToString(t,(e+=b)-b,b)}s(i,"n");function o(b,E){if(b)throw new Error(E)}s(o,"s");var a="dylink.0";if(t instanceof WebAssembly.Module){var l=WebAssembly.Module.customSections(t,a);l.length===0&&(a="dylink",l=WebAssembly.Module.customSections(t,a)),o(l.length===0,"need dylink section"),n=(t=new Uint8Array(l[0])).length}else{o(new Uint32Array(new Uint8Array(t.subarray(0,24)).buffer)[0]!=1836278016,"need to see wasm magic number"),o(t[8]!==0,"need the dylink section to be first"),e=9;var c=r();n=e+c,a=i()}var u={neededDynlibs:[],tlsExports:new Set,weakImports:new Set};if(a=="dylink"){u.memorySize=r(),u.memoryAlign=r(),u.tableSize=r(),u.tableAlign=r();for(var d=r(),p=0;p<d;++p){var m=i();u.neededDynlibs.push(m)}}else for(o(a!=="dylink.0");e<n;){var h=t[e++],g=r();if(h===1)u.memorySize=r(),u.memoryAlign=r(),u.tableSize=r(),u.tableAlign=r();else if(h===2)for(d=r(),p=0;p<d;++p)m=i(),u.neededDynlibs.push(m);else if(h===3)for(var y=r();y--;){var v=i();256&r()&&u.tlsExports.add(v)}else if(h===4)for(y=r();y--;)i(),v=i(),(3&r())==1&&u.weakImports.add(v);else e+=g}return u}s(getDylinkMetadata,"getDylinkMetadata");function getValue(t,e="i8"){switch(e.endsWith("*")&&(e="*"),e){case"i1":case"i8":return HEAP8[t>>0];case"i16":return HEAP16[t>>1];case"i32":case"i64":return HEAP32[t>>2];case"float":return HEAPF32[t>>2];case"double":return HEAPF64[t>>3];case"*":return HEAPU32[t>>2];default:abort("invalid type for getValue: "+e)}return null}s(getValue,"getValue");function asmjsMangle(t){return t.indexOf("dynCall_")==0||["stackAlloc","stackSave","stackRestore","getTempRet0","setTempRet0"].includes(t)?t:"_"+t}s(asmjsMangle,"asmjsMangle");function mergeLibSymbols(t,e){for(var n in t)if(t.hasOwnProperty(n)){asmLibraryArg.hasOwnProperty(n)||(asmLibraryArg[n]=t[n]);var r=asmjsMangle(n);Module.hasOwnProperty(r)||(Module[r]=t[n]),n=="__main_argc_argv"&&(Module._main=t[n])}}s(mergeLibSymbols,"mergeLibSymbols");var LDSO={loadedLibsByName:{},loadedLibsByHandle:{}};function dynCallLegacy(t,e,n){var r=Module["dynCall_"+t];return n&&n.length?r.apply(null,[e].concat(n)):r.call(null,e)}s(dynCallLegacy,"dynCallLegacy");var wasmTableMirror=[];function getWasmTableEntry(t){var e=wasmTableMirror[t];return e||(t>=wasmTableMirror.length&&(wasmTableMirror.length=t+1),wasmTableMirror[t]=e=wasmTable.get(t)),e}s(getWasmTableEntry,"getWasmTableEntry");function dynCall(t,e,n){return t.includes("j")?dynCallLegacy(t,e,n):getWasmTableEntry(e).apply(null,n)}s(dynCall,"dynCall");function createInvokeFunction(t){return function(){var e=stackSave();try{return dynCall(t,arguments[0],Array.prototype.slice.call(arguments,1))}catch(n){if(stackRestore(e),n!==n+0)throw n;_setThrew(1,0)}}}s(createInvokeFunction,"createInvokeFunction");var ___heap_base=78144;function zeroMemory(t,e){return HEAPU8.fill(0,t,t+e),t}s(zeroMemory,"zeroMemory");function getMemory(t){if(runtimeInitialized)return zeroMemory(_malloc(t),t);var e=___heap_base,n=e+t+15&-16;return ___heap_base=n,GOT.__heap_base.value=n,e}s(getMemory,"getMemory");function isInternalSym(t){return["__cpp_exception","__c_longjmp","__wasm_apply_data_relocs","__dso_handle","__tls_size","__tls_align","__set_stack_limits","_emscripten_tls_init","__wasm_init_tls","__wasm_call_ctors","__start_em_asm","__stop_em_asm"].includes(t)}s(isInternalSym,"isInternalSym");function uleb128Encode(t,e){t<128?e.push(t):e.push(t%128|128,t>>7)}s(uleb128Encode,"uleb128Encode");function sigToWasmTypes(t){for(var e={i:"i32",j:"i32",f:"f32",d:"f64",p:"i32"},n={parameters:[],results:t[0]=="v"?[]:[e[t[0]]]},r=1;r<t.length;++r)n.parameters.push(e[t[r]]),t[r]==="j"&&n.parameters.push("i32");return n}s(sigToWasmTypes,"sigToWasmTypes");function generateFuncType(t,e){var n=t.slice(0,1),r=t.slice(1),i={i:127,p:127,j:126,f:125,d:124};e.push(96),uleb128Encode(r.length,e);for(var o=0;o<r.length;++o)e.push(i[r[o]]);n=="v"?e.push(0):e.push(1,i[n])}s(generateFuncType,"generateFuncType");function convertJsFunctionToWasm(t,e){if(typeof WebAssembly.Function=="function")return new WebAssembly.Function(sigToWasmTypes(e),t);var n=[1];generateFuncType(e,n);var r=[0,97,115,109,1,0,0,0,1];uleb128Encode(n.length,r),r.push.apply(r,n),r.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0);var i=new WebAssembly.Module(new Uint8Array(r));return new WebAssembly.Instance(i,{e:{f:t}}).exports.f}s(convertJsFunctionToWasm,"convertJsFunctionToWasm");function updateTableMap(t,e){if(functionsInTableMap)for(var n=t;n<t+e;n++){var r=getWasmTableEntry(n);r&&functionsInTableMap.set(r,n)}}s(updateTableMap,"updateTableMap");var functionsInTableMap=void 0,freeTableIndexes=[];function getEmptyTableSlot(){if(freeTableIndexes.length)return freeTableIndexes.pop();try{wasmTable.grow(1)}catch(t){throw t instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":t}return wasmTable.length-1}s(getEmptyTableSlot,"getEmptyTableSlot");function setWasmTableEntry(t,e){wasmTable.set(t,e),wasmTableMirror[t]=wasmTable.get(t)}s(setWasmTableEntry,"setWasmTableEntry");function addFunction(t,e){if(functionsInTableMap||(functionsInTableMap=new WeakMap,updateTableMap(0,wasmTable.length)),functionsInTableMap.has(t))return functionsInTableMap.get(t);var n=getEmptyTableSlot();try{setWasmTableEntry(n,t)}catch(r){if(!(r instanceof TypeError))throw r;setWasmTableEntry(n,convertJsFunctionToWasm(t,e))}return functionsInTableMap.set(t,n),n}s(addFunction,"addFunction");function updateGOT(t,e){for(var n in t)if(!isInternalSym(n)){var r=t[n];n.startsWith("orig$")&&(n=n.split("$")[1],e=!0),GOT[n]||(GOT[n]=new WebAssembly.Global({value:"i32",mutable:!0})),(e||GOT[n].value==0)&&(typeof r=="function"?GOT[n].value=addFunction(r):typeof r=="number"?GOT[n].value=r:err("unhandled export type for `"+n+"`: "+typeof r))}}s(updateGOT,"updateGOT");function relocateExports(t,e,n){var r={};for(var i in t){var o=t[i];typeof o=="object"&&(o=o.value),typeof o=="number"&&(o+=e),r[i]=o}return updateGOT(r,n),r}s(relocateExports,"relocateExports");function resolveGlobalSymbol(t,e){var n;return e&&(n=asmLibraryArg["orig$"+t]),n||(n=asmLibraryArg[t])&&n.stub&&(n=void 0),n||(n=Module[asmjsMangle(t)]),!n&&t.startsWith("invoke_")&&(n=createInvokeFunction(t.split("_")[1])),n}s(resolveGlobalSymbol,"resolveGlobalSymbol");function alignMemory(t,e){return Math.ceil(t/e)*e}s(alignMemory,"alignMemory");function loadWebAssemblyModule(binary,flags,handle){var metadata=getDylinkMetadata(binary);function loadModule(){var firstLoad=!handle||!HEAP8[handle+12>>0];if(firstLoad){var memAlign=Math.pow(2,metadata.memoryAlign);memAlign=Math.max(memAlign,STACK_ALIGN);var memoryBase=metadata.memorySize?alignMemory(getMemory(metadata.memorySize+memAlign),memAlign):0,tableBase=metadata.tableSize?wasmTable.length:0;handle&&(HEAP8[handle+12>>0]=1,HEAPU32[handle+16>>2]=memoryBase,HEAP32[handle+20>>2]=metadata.memorySize,HEAPU32[handle+24>>2]=tableBase,HEAP32[handle+28>>2]=metadata.tableSize)}else memoryBase=HEAPU32[handle+16>>2],tableBase=HEAPU32[handle+24>>2];var tableGrowthNeeded=tableBase+metadata.tableSize-wasmTable.length,moduleExports;function resolveSymbol(t){var e=resolveGlobalSymbol(t,!1);return e||(e=moduleExports[t]),e}s(resolveSymbol,"resolveSymbol"),tableGrowthNeeded>0&&wasmTable.grow(tableGrowthNeeded);var proxyHandler={get:s(function(t,e){switch(e){case"__memory_base":return memoryBase;case"__table_base":return tableBase}if(e in asmLibraryArg)return asmLibraryArg[e];var n;return e in t||(t[e]=function(){return n||(n=resolveSymbol(e)),n.apply(null,arguments)}),t[e]},"get")},proxy=new Proxy({},proxyHandler),info={"GOT.mem":new Proxy({},GOTHandler),"GOT.func":new Proxy({},GOTHandler),env:proxy,wasi_snapshot_preview1:proxy};function postInstantiation(instance){function addEmAsm(addr,body){for(var args=[],arity=0;arity<16&&body.indexOf("$"+arity)!=-1;arity++)args.push("$"+arity);args=args.join(",");var func="("+args+" ) => { "+body+"};";ASM_CONSTS[start]=eval(func)}if(s(addEmAsm,"addEmAsm"),updateTableMap(tableBase,metadata.tableSize),moduleExports=relocateExports(instance.exports,memoryBase),flags.allowUndefined||reportUndefinedSymbols(),"__start_em_asm"in moduleExports)for(var start=moduleExports.__start_em_asm,stop=moduleExports.__stop_em_asm;start<stop;){var jsString=UTF8ToString(start);addEmAsm(start,jsString),start=HEAPU8.indexOf(0,start)+1}var applyRelocs=moduleExports.__wasm_apply_data_relocs;applyRelocs&&(runtimeInitialized?applyRelocs():__RELOC_FUNCS__.push(applyRelocs));var init=moduleExports.__wasm_call_ctors;return init&&(runtimeInitialized?init():__ATINIT__.push(init)),moduleExports}if(s(postInstantiation,"postInstantiation"),flags.loadAsync){if(binary instanceof WebAssembly.Module){var instance=new WebAssembly.Instance(binary,info);return Promise.resolve(postInstantiation(instance))}return WebAssembly.instantiate(binary,info).then(function(t){return postInstantiation(t.instance)})}var module=binary instanceof WebAssembly.Module?binary:new WebAssembly.Module(binary),instance=new WebAssembly.Instance(module,info);return postInstantiation(instance)}return s(loadModule,"loadModule"),CurrentModuleWeakSymbols=metadata.weakImports,flags.loadAsync?metadata.neededDynlibs.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,flags)})},Promise.resolve()).then(function(){return loadModule()}):(metadata.neededDynlibs.forEach(function(t){loadDynamicLibrary(t,flags)}),loadModule())}s(loadWebAssemblyModule,"loadWebAssemblyModule");function loadDynamicLibrary(t,e,n){e=e||{global:!0,nodelete:!0};var r=LDSO.loadedLibsByName[t];if(r)return e.global&&!r.global&&(r.global=!0,r.module!=="loading"&&mergeLibSymbols(r.module,t)),e.nodelete&&r.refcount!==1/0&&(r.refcount=1/0),r.refcount++,n&&(LDSO.loadedLibsByHandle[n]=r),!e.loadAsync||Promise.resolve(!0);function i(l){if(e.fs&&e.fs.findObject(l)){var c=e.fs.readFile(l,{encoding:"binary"});return c instanceof Uint8Array||(c=new Uint8Array(c)),e.loadAsync?Promise.resolve(c):c}if(l=locateFile(l),e.loadAsync)return new Promise(function(u,d){readAsync(l,p=>u(new Uint8Array(p)),d)});if(!readBinary)throw new Error(l+": file not found, and synchronous loading of external files is not available");return readBinary(l)}s(i,"n");function o(){if(typeof preloadedWasm<"u"&&preloadedWasm[t]){var l=preloadedWasm[t];return e.loadAsync?Promise.resolve(l):l}return e.loadAsync?i(t).then(function(c){return loadWebAssemblyModule(c,e,n)}):loadWebAssemblyModule(i(t),e,n)}s(o,"s");function a(l){r.global&&mergeLibSymbols(l,t),r.module=l}return s(a,"a"),r={refcount:e.nodelete?1/0:1,name:t,module:"loading",global:e.global},LDSO.loadedLibsByName[t]=r,n&&(LDSO.loadedLibsByHandle[n]=r),e.loadAsync?o().then(function(l){return a(l),!0}):(a(o()),!0)}s(loadDynamicLibrary,"loadDynamicLibrary");function reportUndefinedSymbols(){for(var t in GOT)if(GOT[t].value==0){var e=resolveGlobalSymbol(t,!0);if(!e&&!GOT[t].required)continue;if(typeof e=="function")GOT[t].value=addFunction(e,e.sig);else{if(typeof e!="number")throw new Error("bad export type for `"+t+"`: "+typeof e);GOT[t].value=e}}}s(reportUndefinedSymbols,"reportUndefinedSymbols");function preloadDylibs(){dynamicLibraries.length?(addRunDependency("preloadDylibs"),dynamicLibraries.reduce(function(t,e){return t.then(function(){return loadDynamicLibrary(e,{loadAsync:!0,global:!0,nodelete:!0,allowUndefined:!0})})},Promise.resolve()).then(function(){reportUndefinedSymbols(),removeRunDependency("preloadDylibs")})):reportUndefinedSymbols()}s(preloadDylibs,"preloadDylibs");function setValue(t,e,n="i8"){switch(n.endsWith("*")&&(n="*"),n){case"i1":case"i8":HEAP8[t>>0]=e;break;case"i16":HEAP16[t>>1]=e;break;case"i32":HEAP32[t>>2]=e;break;case"i64":tempI64=[e>>>0,(tempDouble=e,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[t>>2]=tempI64[0],HEAP32[t+4>>2]=tempI64[1];break;case"float":HEAPF32[t>>2]=e;break;case"double":HEAPF64[t>>3]=e;break;case"*":HEAPU32[t>>2]=e;break;default:abort("invalid type for setValue: "+n)}}s(setValue,"setValue");var ___memory_base=new WebAssembly.Global({value:"i32",mutable:!1},1024),___stack_pointer=new WebAssembly.Global({value:"i32",mutable:!0},78144),___table_base=new WebAssembly.Global({value:"i32",mutable:!1},1),nowIsMonotonic=!0,_emscripten_get_now;function __emscripten_get_now_is_monotonic(){return nowIsMonotonic}s(__emscripten_get_now_is_monotonic,"__emscripten_get_now_is_monotonic");function _abort(){abort("")}s(_abort,"_abort");function _emscripten_date_now(){return Date.now()}s(_emscripten_date_now,"_emscripten_date_now");function _emscripten_memcpy_big(t,e,n){HEAPU8.copyWithin(t,e,e+n)}s(_emscripten_memcpy_big,"_emscripten_memcpy_big");function getHeapMax(){return 2147483648}s(getHeapMax,"getHeapMax");function emscripten_realloc_buffer(t){try{return wasmMemory.grow(t-buffer.byteLength+65535>>>16),updateGlobalBufferAndViews(wasmMemory.buffer),1}catch{}}s(emscripten_realloc_buffer,"emscripten_realloc_buffer");function _emscripten_resize_heap(t){var e=HEAPU8.length;t>>>=0;var n=getHeapMax();if(t>n)return!1;for(var r=1;r<=4;r*=2){var i=e*(1+.2/r);if(i=Math.min(i,t+100663296),emscripten_realloc_buffer(Math.min(n,(o=Math.max(t,i))+((a=65536)-o%a)%a)))return!0}var o,a;return!1}s(_emscripten_resize_heap,"_emscripten_resize_heap"),__emscripten_get_now_is_monotonic.sig="i",Module._abort=_abort,_abort.sig="v",_emscripten_date_now.sig="d",_emscripten_get_now=ENVIRONMENT_IS_NODE?()=>{var t=process.hrtime();return 1e3*t[0]+t[1]/1e6}:()=>performance.now(),_emscripten_get_now.sig="d",_emscripten_memcpy_big.sig="vppp",_emscripten_resize_heap.sig="ip";var SYSCALLS={DEFAULT_POLLMASK:5,calculateAt:s(function(t,e,n){if(PATH.isAbs(e))return e;var r;if(t===-100?r=FS.cwd():r=SYSCALLS.getStreamFromFD(t).path,e.length==0){if(!n)throw new FS.ErrnoError(44);return r}return PATH.join2(r,e)},"calculateAt"),doStat:s(function(t,e,n){try{var r=t(e)}catch(l){if(l&&l.node&&PATH.normalize(e)!==PATH.normalize(FS.getPath(l.node)))return-54;throw l}HEAP32[n>>2]=r.dev,HEAP32[n+8>>2]=r.ino,HEAP32[n+12>>2]=r.mode,HEAPU32[n+16>>2]=r.nlink,HEAP32[n+20>>2]=r.uid,HEAP32[n+24>>2]=r.gid,HEAP32[n+28>>2]=r.rdev,tempI64=[r.size>>>0,(tempDouble=r.size,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+40>>2]=tempI64[0],HEAP32[n+44>>2]=tempI64[1],HEAP32[n+48>>2]=4096,HEAP32[n+52>>2]=r.blocks;var i=r.atime.getTime(),o=r.mtime.getTime(),a=r.ctime.getTime();return tempI64=[Math.floor(i/1e3)>>>0,(tempDouble=Math.floor(i/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+56>>2]=tempI64[0],HEAP32[n+60>>2]=tempI64[1],HEAPU32[n+64>>2]=i%1e3*1e3,tempI64=[Math.floor(o/1e3)>>>0,(tempDouble=Math.floor(o/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+72>>2]=tempI64[0],HEAP32[n+76>>2]=tempI64[1],HEAPU32[n+80>>2]=o%1e3*1e3,tempI64=[Math.floor(a/1e3)>>>0,(tempDouble=Math.floor(a/1e3),+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+88>>2]=tempI64[0],HEAP32[n+92>>2]=tempI64[1],HEAPU32[n+96>>2]=a%1e3*1e3,tempI64=[r.ino>>>0,(tempDouble=r.ino,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[n+104>>2]=tempI64[0],HEAP32[n+108>>2]=tempI64[1],0},"doStat"),doMsync:s(function(t,e,n,r,i){if(!FS.isFile(e.node.mode))throw new FS.ErrnoError(43);if(2&r)return 0;var o=HEAPU8.slice(t,t+n);FS.msync(e,o,i,n,r)},"doMsync"),varargs:void 0,get:s(function(){return SYSCALLS.varargs+=4,HEAP32[SYSCALLS.varargs-4>>2]},"get"),getStr:s(function(t){return UTF8ToString(t)},"getStr"),getStreamFromFD:s(function(t){var e=FS.getStream(t);if(!e)throw new FS.ErrnoError(8);return e},"getStreamFromFD")};function _proc_exit(t){EXITSTATUS=t,keepRuntimeAlive()||(Module.onExit&&Module.onExit(t),ABORT=!0),quit_(t,new ExitStatus(t))}s(_proc_exit,"_proc_exit");function exitJS(t,e){EXITSTATUS=t,_proc_exit(t)}s(exitJS,"exitJS"),_proc_exit.sig="vi";var _exit=exitJS;function _fd_close(t){try{var e=SYSCALLS.getStreamFromFD(t);return FS.close(e),0}catch(n){if(typeof FS>"u"||!(n instanceof FS.ErrnoError))throw n;return n.errno}}s(_fd_close,"_fd_close");function convertI32PairToI53Checked(t,e){return e+2097152>>>0<4194305-!!t?(t>>>0)+4294967296*e:NaN}s(convertI32PairToI53Checked,"convertI32PairToI53Checked");function _fd_seek(t,e,n,r,i){try{var o=convertI32PairToI53Checked(e,n);if(isNaN(o))return 61;var a=SYSCALLS.getStreamFromFD(t);return FS.llseek(a,o,r),tempI64=[a.position>>>0,(tempDouble=a.position,+Math.abs(tempDouble)>=1?tempDouble>0?(0|Math.min(+Math.floor(tempDouble/4294967296),4294967295))>>>0:~~+Math.ceil((tempDouble-+(~~tempDouble>>>0))/4294967296)>>>0:0)],HEAP32[i>>2]=tempI64[0],HEAP32[i+4>>2]=tempI64[1],a.getdents&&o===0&&r===0&&(a.getdents=null),0}catch(l){if(typeof FS>"u"||!(l instanceof FS.ErrnoError))throw l;return l.errno}}s(_fd_seek,"_fd_seek");function doWritev(t,e,n,r){for(var i=0,o=0;o<n;o++){var a=HEAPU32[e>>2],l=HEAPU32[e+4>>2];e+=8;var c=FS.write(t,HEAP8,a,l,r);if(c<0)return-1;i+=c,r!==void 0&&(r+=c)}return i}s(doWritev,"doWritev");function _fd_write(t,e,n,r){try{var i=doWritev(SYSCALLS.getStreamFromFD(t),e,n);return HEAPU32[r>>2]=i,0}catch(o){if(typeof FS>"u"||!(o instanceof FS.ErrnoError))throw o;return o.errno}}s(_fd_write,"_fd_write");function _tree_sitter_log_callback(t,e){if(currentLogCallback){let n=UTF8ToString(e);currentLogCallback(n,t!==0)}}s(_tree_sitter_log_callback,"_tree_sitter_log_callback");function _tree_sitter_parse_callback(t,e,n,r,i){var o=currentParseCallback(e,{row:n,column:r});typeof o=="string"?(setValue(i,o.length,"i32"),stringToUTF16(o,t,10240)):setValue(i,0,"i32")}s(_tree_sitter_parse_callback,"_tree_sitter_parse_callback");function handleException(t){if(t instanceof ExitStatus||t=="unwind")return EXITSTATUS;quit_(1,t)}s(handleException,"handleException");function allocateUTF8OnStack(t){var e=lengthBytesUTF8(t)+1,n=stackAlloc(e);return stringToUTF8Array(t,HEAP8,n,e),n}s(allocateUTF8OnStack,"allocateUTF8OnStack");function stringToUTF16(t,e,n){if(n===void 0&&(n=2147483647),n<2)return 0;for(var r=e,i=(n-=2)<2*t.length?n/2:t.length,o=0;o<i;++o){var a=t.charCodeAt(o);HEAP16[e>>1]=a,e+=2}return HEAP16[e>>1]=0,e-r}s(stringToUTF16,"stringToUTF16");function AsciiToString(t){for(var e="";;){var n=HEAPU8[t++>>0];if(!n)return e;e+=String.fromCharCode(n)}}s(AsciiToString,"AsciiToString"),_exit.sig="vi",_fd_close.sig="ii",_fd_seek.sig="iijip",_fd_write.sig="iippp";var asmLibraryArg={__heap_base:___heap_base,__indirect_function_table:wasmTable,__memory_base:___memory_base,__stack_pointer:___stack_pointer,__table_base:___table_base,_emscripten_get_now_is_monotonic:__emscripten_get_now_is_monotonic,abort:_abort,emscripten_get_now:_emscripten_get_now,emscripten_memcpy_big:_emscripten_memcpy_big,emscripten_resize_heap:_emscripten_resize_heap,exit:_exit,fd_close:_fd_close,fd_seek:_fd_seek,fd_write:_fd_write,memory:wasmMemory,tree_sitter_log_callback:_tree_sitter_log_callback,tree_sitter_parse_callback:_tree_sitter_parse_callback},asm=createWasm(),___wasm_call_ctors=Module.___wasm_call_ctors=function(){return(___wasm_call_ctors=Module.___wasm_call_ctors=Module.asm.__wasm_call_ctors).apply(null,arguments)},___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=function(){return(___wasm_apply_data_relocs=Module.___wasm_apply_data_relocs=Module.asm.__wasm_apply_data_relocs).apply(null,arguments)},_malloc=Module._malloc=function(){return(_malloc=Module._malloc=Module.asm.malloc).apply(null,arguments)},_calloc=Module._calloc=function(){return(_calloc=Module._calloc=Module.asm.calloc).apply(null,arguments)},_realloc=Module._realloc=function(){return(_realloc=Module._realloc=Module.asm.realloc).apply(null,arguments)},_free=Module._free=function(){return(_free=Module._free=Module.asm.free).apply(null,arguments)},_ts_language_symbol_count=Module._ts_language_symbol_count=function(){return(_ts_language_symbol_count=Module._ts_language_symbol_count=Module.asm.ts_language_symbol_count).apply(null,arguments)},_ts_language_version=Module._ts_language_version=function(){return(_ts_language_version=Module._ts_language_version=Module.asm.ts_language_version).apply(null,arguments)},_ts_language_field_count=Module._ts_language_field_count=function(){return(_ts_language_field_count=Module._ts_language_field_count=Module.asm.ts_language_field_count).apply(null,arguments)},_ts_language_symbol_name=Module._ts_language_symbol_name=function(){return(_ts_language_symbol_name=Module._ts_language_symbol_name=Module.asm.ts_language_symbol_name).apply(null,arguments)},_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=function(){return(_ts_language_symbol_for_name=Module._ts_language_symbol_for_name=Module.asm.ts_language_symbol_for_name).apply(null,arguments)},_ts_language_symbol_type=Module._ts_language_symbol_type=function(){return(_ts_language_symbol_type=Module._ts_language_symbol_type=Module.asm.ts_language_symbol_type).apply(null,arguments)},_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=function(){return(_ts_language_field_name_for_id=Module._ts_language_field_name_for_id=Module.asm.ts_language_field_name_for_id).apply(null,arguments)},_memset=Module._memset=function(){return(_memset=Module._memset=Module.asm.memset).apply(null,arguments)},_memcpy=Module._memcpy=function(){return(_memcpy=Module._memcpy=Module.asm.memcpy).apply(null,arguments)},_ts_parser_delete=Module._ts_parser_delete=function(){return(_ts_parser_delete=Module._ts_parser_delete=Module.asm.ts_parser_delete).apply(null,arguments)},_ts_parser_reset=Module._ts_parser_reset=function(){return(_ts_parser_reset=Module._ts_parser_reset=Module.asm.ts_parser_reset).apply(null,arguments)},_ts_parser_set_language=Module._ts_parser_set_language=function(){return(_ts_parser_set_language=Module._ts_parser_set_language=Module.asm.ts_parser_set_language).apply(null,arguments)},_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=function(){return(_ts_parser_timeout_micros=Module._ts_parser_timeout_micros=Module.asm.ts_parser_timeout_micros).apply(null,arguments)},_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=function(){return(_ts_parser_set_timeout_micros=Module._ts_parser_set_timeout_micros=Module.asm.ts_parser_set_timeout_micros).apply(null,arguments)},_memmove=Module._memmove=function(){return(_memmove=Module._memmove=Module.asm.memmove).apply(null,arguments)},_memcmp=Module._memcmp=function(){return(_memcmp=Module._memcmp=Module.asm.memcmp).apply(null,arguments)},_ts_query_new=Module._ts_query_new=function(){return(_ts_query_new=Module._ts_query_new=Module.asm.ts_query_new).apply(null,arguments)},_ts_query_delete=Module._ts_query_delete=function(){return(_ts_query_delete=Module._ts_query_delete=Module.asm.ts_query_delete).apply(null,arguments)},_iswspace=Module._iswspace=function(){return(_iswspace=Module._iswspace=Module.asm.iswspace).apply(null,arguments)},_iswalnum=Module._iswalnum=function(){return(_iswalnum=Module._iswalnum=Module.asm.iswalnum).apply(null,arguments)},_ts_query_pattern_count=Module._ts_query_pattern_count=function(){return(_ts_query_pattern_count=Module._ts_query_pattern_count=Module.asm.ts_query_pattern_count).apply(null,arguments)},_ts_query_capture_count=Module._ts_query_capture_count=function(){return(_ts_query_capture_count=Module._ts_query_capture_count=Module.asm.ts_query_capture_count).apply(null,arguments)},_ts_query_string_count=Module._ts_query_string_count=function(){return(_ts_query_string_count=Module._ts_query_string_count=Module.asm.ts_query_string_count).apply(null,arguments)},_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=function(){return(_ts_query_capture_name_for_id=Module._ts_query_capture_name_for_id=Module.asm.ts_query_capture_name_for_id).apply(null,arguments)},_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=function(){return(_ts_query_string_value_for_id=Module._ts_query_string_value_for_id=Module.asm.ts_query_string_value_for_id).apply(null,arguments)},_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=function(){return(_ts_query_predicates_for_pattern=Module._ts_query_predicates_for_pattern=Module.asm.ts_query_predicates_for_pattern).apply(null,arguments)},_ts_tree_copy=Module._ts_tree_copy=function(){return(_ts_tree_copy=Module._ts_tree_copy=Module.asm.ts_tree_copy).apply(null,arguments)},_ts_tree_delete=Module._ts_tree_delete=function(){return(_ts_tree_delete=Module._ts_tree_delete=Module.asm.ts_tree_delete).apply(null,arguments)},_ts_init=Module._ts_init=function(){return(_ts_init=Module._ts_init=Module.asm.ts_init).apply(null,arguments)},_ts_parser_new_wasm=Module._ts_parser_new_wasm=function(){return(_ts_parser_new_wasm=Module._ts_parser_new_wasm=Module.asm.ts_parser_new_wasm).apply(null,arguments)},_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=function(){return(_ts_parser_enable_logger_wasm=Module._ts_parser_enable_logger_wasm=Module.asm.ts_parser_enable_logger_wasm).apply(null,arguments)},_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=function(){return(_ts_parser_parse_wasm=Module._ts_parser_parse_wasm=Module.asm.ts_parser_parse_wasm).apply(null,arguments)},_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=function(){return(_ts_language_type_is_named_wasm=Module._ts_language_type_is_named_wasm=Module.asm.ts_language_type_is_named_wasm).apply(null,arguments)},_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=function(){return(_ts_language_type_is_visible_wasm=Module._ts_language_type_is_visible_wasm=Module.asm.ts_language_type_is_visible_wasm).apply(null,arguments)},_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=function(){return(_ts_tree_root_node_wasm=Module._ts_tree_root_node_wasm=Module.asm.ts_tree_root_node_wasm).apply(null,arguments)},_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=function(){return(_ts_tree_edit_wasm=Module._ts_tree_edit_wasm=Module.asm.ts_tree_edit_wasm).apply(null,arguments)},_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=function(){return(_ts_tree_get_changed_ranges_wasm=Module._ts_tree_get_changed_ranges_wasm=Module.asm.ts_tree_get_changed_ranges_wasm).apply(null,arguments)},_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=function(){return(_ts_tree_cursor_new_wasm=Module._ts_tree_cursor_new_wasm=Module.asm.ts_tree_cursor_new_wasm).apply(null,arguments)},_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=function(){return(_ts_tree_cursor_delete_wasm=Module._ts_tree_cursor_delete_wasm=Module.asm.ts_tree_cursor_delete_wasm).apply(null,arguments)},_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=function(){return(_ts_tree_cursor_reset_wasm=Module._ts_tree_cursor_reset_wasm=Module.asm.ts_tree_cursor_reset_wasm).apply(null,arguments)},_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=function(){return(_ts_tree_cursor_goto_first_child_wasm=Module._ts_tree_cursor_goto_first_child_wasm=Module.asm.ts_tree_cursor_goto_first_child_wasm).apply(null,arguments)},_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=function(){return(_ts_tree_cursor_goto_next_sibling_wasm=Module._ts_tree_cursor_goto_next_sibling_wasm=Module.asm.ts_tree_cursor_goto_next_sibling_wasm).apply(null,arguments)},_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=function(){return(_ts_tree_cursor_goto_parent_wasm=Module._ts_tree_cursor_goto_parent_wasm=Module.asm.ts_tree_cursor_goto_parent_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=function(){return(_ts_tree_cursor_current_node_type_id_wasm=Module._ts_tree_cursor_current_node_type_id_wasm=Module.asm.ts_tree_cursor_current_node_type_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=function(){return(_ts_tree_cursor_current_node_is_named_wasm=Module._ts_tree_cursor_current_node_is_named_wasm=Module.asm.ts_tree_cursor_current_node_is_named_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=function(){return(_ts_tree_cursor_current_node_is_missing_wasm=Module._ts_tree_cursor_current_node_is_missing_wasm=Module.asm.ts_tree_cursor_current_node_is_missing_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=function(){return(_ts_tree_cursor_current_node_id_wasm=Module._ts_tree_cursor_current_node_id_wasm=Module.asm.ts_tree_cursor_current_node_id_wasm).apply(null,arguments)},_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=function(){return(_ts_tree_cursor_start_position_wasm=Module._ts_tree_cursor_start_position_wasm=Module.asm.ts_tree_cursor_start_position_wasm).apply(null,arguments)},_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=function(){return(_ts_tree_cursor_end_position_wasm=Module._ts_tree_cursor_end_position_wasm=Module.asm.ts_tree_cursor_end_position_wasm).apply(null,arguments)},_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=function(){return(_ts_tree_cursor_start_index_wasm=Module._ts_tree_cursor_start_index_wasm=Module.asm.ts_tree_cursor_start_index_wasm).apply(null,arguments)},_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=function(){return(_ts_tree_cursor_end_index_wasm=Module._ts_tree_cursor_end_index_wasm=Module.asm.ts_tree_cursor_end_index_wasm).apply(null,arguments)},_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=function(){return(_ts_tree_cursor_current_field_id_wasm=Module._ts_tree_cursor_current_field_id_wasm=Module.asm.ts_tree_cursor_current_field_id_wasm).apply(null,arguments)},_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=function(){return(_ts_tree_cursor_current_node_wasm=Module._ts_tree_cursor_current_node_wasm=Module.asm.ts_tree_cursor_current_node_wasm).apply(null,arguments)},_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=function(){return(_ts_node_symbol_wasm=Module._ts_node_symbol_wasm=Module.asm.ts_node_symbol_wasm).apply(null,arguments)},_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=function(){return(_ts_node_child_count_wasm=Module._ts_node_child_count_wasm=Module.asm.ts_node_child_count_wasm).apply(null,arguments)},_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=function(){return(_ts_node_named_child_count_wasm=Module._ts_node_named_child_count_wasm=Module.asm.ts_node_named_child_count_wasm).apply(null,arguments)},_ts_node_child_wasm=Module._ts_node_child_wasm=function(){return(_ts_node_child_wasm=Module._ts_node_child_wasm=Module.asm.ts_node_child_wasm).apply(null,arguments)},_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=function(){return(_ts_node_named_child_wasm=Module._ts_node_named_child_wasm=Module.asm.ts_node_named_child_wasm).apply(null,arguments)},_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=function(){return(_ts_node_child_by_field_id_wasm=Module._ts_node_child_by_field_id_wasm=Module.asm.ts_node_child_by_field_id_wasm).apply(null,arguments)},_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=function(){return(_ts_node_next_sibling_wasm=Module._ts_node_next_sibling_wasm=Module.asm.ts_node_next_sibling_wasm).apply(null,arguments)},_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=function(){return(_ts_node_prev_sibling_wasm=Module._ts_node_prev_sibling_wasm=Module.asm.ts_node_prev_sibling_wasm).apply(null,arguments)},_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=function(){return(_ts_node_next_named_sibling_wasm=Module._ts_node_next_named_sibling_wasm=Module.asm.ts_node_next_named_sibling_wasm).apply(null,arguments)},_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=function(){return(_ts_node_prev_named_sibling_wasm=Module._ts_node_prev_named_sibling_wasm=Module.asm.ts_node_prev_named_sibling_wasm).apply(null,arguments)},_ts_node_parent_wasm=Module._ts_node_parent_wasm=function(){return(_ts_node_parent_wasm=Module._ts_node_parent_wasm=Module.asm.ts_node_parent_wasm).apply(null,arguments)},_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=function(){return(_ts_node_descendant_for_index_wasm=Module._ts_node_descendant_for_index_wasm=Module.asm.ts_node_descendant_for_index_wasm).apply(null,arguments)},_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=function(){return(_ts_node_named_descendant_for_index_wasm=Module._ts_node_named_descendant_for_index_wasm=Module.asm.ts_node_named_descendant_for_index_wasm).apply(null,arguments)},_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=function(){return(_ts_node_descendant_for_position_wasm=Module._ts_node_descendant_for_position_wasm=Module.asm.ts_node_descendant_for_position_wasm).apply(null,arguments)},_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=function(){return(_ts_node_named_descendant_for_position_wasm=Module._ts_node_named_descendant_for_position_wasm=Module.asm.ts_node_named_descendant_for_position_wasm).apply(null,arguments)},_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=function(){return(_ts_node_start_point_wasm=Module._ts_node_start_point_wasm=Module.asm.ts_node_start_point_wasm).apply(null,arguments)},_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=function(){return(_ts_node_end_point_wasm=Module._ts_node_end_point_wasm=Module.asm.ts_node_end_point_wasm).apply(null,arguments)},_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=function(){return(_ts_node_start_index_wasm=Module._ts_node_start_index_wasm=Module.asm.ts_node_start_index_wasm).apply(null,arguments)},_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=function(){return(_ts_node_end_index_wasm=Module._ts_node_end_index_wasm=Module.asm.ts_node_end_index_wasm).apply(null,arguments)},_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=function(){return(_ts_node_to_string_wasm=Module._ts_node_to_string_wasm=Module.asm.ts_node_to_string_wasm).apply(null,arguments)},_ts_node_children_wasm=Module._ts_node_children_wasm=function(){return(_ts_node_children_wasm=Module._ts_node_children_wasm=Module.asm.ts_node_children_wasm).apply(null,arguments)},_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=function(){return(_ts_node_named_children_wasm=Module._ts_node_named_children_wasm=Module.asm.ts_node_named_children_wasm).apply(null,arguments)},_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=function(){return(_ts_node_descendants_of_type_wasm=Module._ts_node_descendants_of_type_wasm=Module.asm.ts_node_descendants_of_type_wasm).apply(null,arguments)},_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=function(){return(_ts_node_is_named_wasm=Module._ts_node_is_named_wasm=Module.asm.ts_node_is_named_wasm).apply(null,arguments)},_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=function(){return(_ts_node_has_changes_wasm=Module._ts_node_has_changes_wasm=Module.asm.ts_node_has_changes_wasm).apply(null,arguments)},_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=function(){return(_ts_node_has_error_wasm=Module._ts_node_has_error_wasm=Module.asm.ts_node_has_error_wasm).apply(null,arguments)},_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=function(){return(_ts_node_is_missing_wasm=Module._ts_node_is_missing_wasm=Module.asm.ts_node_is_missing_wasm).apply(null,arguments)},_ts_query_matches_wasm=Module._ts_query_matches_wasm=function(){return(_ts_query_matches_wasm=Module._ts_query_matches_wasm=Module.asm.ts_query_matches_wasm).apply(null,arguments)},_ts_query_captures_wasm=Module._ts_query_captures_wasm=function(){return(_ts_query_captures_wasm=Module._ts_query_captures_wasm=Module.asm.ts_query_captures_wasm).apply(null,arguments)},___cxa_atexit=Module.___cxa_atexit=function(){return(___cxa_atexit=Module.___cxa_atexit=Module.asm.__cxa_atexit).apply(null,arguments)},_iswdigit=Module._iswdigit=function(){return(_iswdigit=Module._iswdigit=Module.asm.iswdigit).apply(null,arguments)},_iswalpha=Module._iswalpha=function(){return(_iswalpha=Module._iswalpha=Module.asm.iswalpha).apply(null,arguments)},_iswlower=Module._iswlower=function(){return(_iswlower=Module._iswlower=Module.asm.iswlower).apply(null,arguments)},_memchr=Module._memchr=function(){return(_memchr=Module._memchr=Module.asm.memchr).apply(null,arguments)},_strlen=Module._strlen=function(){return(_strlen=Module._strlen=Module.asm.strlen).apply(null,arguments)},_towupper=Module._towupper=function(){return(_towupper=Module._towupper=Module.asm.towupper).apply(null,arguments)},_setThrew=Module._setThrew=function(){return(_setThrew=Module._setThrew=Module.asm.setThrew).apply(null,arguments)},stackSave=Module.stackSave=function(){return(stackSave=Module.stackSave=Module.asm.stackSave).apply(null,arguments)},stackRestore=Module.stackRestore=function(){return(stackRestore=Module.stackRestore=Module.asm.stackRestore).apply(null,arguments)},stackAlloc=Module.stackAlloc=function(){return(stackAlloc=Module.stackAlloc=Module.asm.stackAlloc).apply(null,arguments)},__Znwm=Module.__Znwm=function(){return(__Znwm=Module.__Znwm=Module.asm._Znwm).apply(null,arguments)},__ZdlPv=Module.__ZdlPv=function(){return(__ZdlPv=Module.__ZdlPv=Module.asm._ZdlPv).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9__grow_byEmmmmmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE6__initEPKcm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE7reserveEm).apply(null,arguments)},__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=function(){return(__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.__ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm=Module.asm._ZNKSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE4copyEPcmm).apply(null,arguments)},__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=function(){return(__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.__ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc=Module.asm._ZNSt3__212basic_stringIcNS_11char_traitsIcEENS_9allocatorIcEEE9push_backEc).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEED2Ev).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE9push_backEw).apply(null,arguments)},__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=function(){return(__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.__ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw=Module.asm._ZNSt3__212basic_stringIwNS_11char_traitsIwEENS_9allocatorIwEEE6resizeEmw).apply(null,arguments)},dynCall_jiji=Module.dynCall_jiji=function(){return(dynCall_jiji=Module.dynCall_jiji=Module.asm.dynCall_jiji).apply(null,arguments)},_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=function(){return(_orig$ts_parser_timeout_micros=Module._orig$ts_parser_timeout_micros=Module.asm.orig$ts_parser_timeout_micros).apply(null,arguments)},_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=function(){return(_orig$ts_parser_set_timeout_micros=Module._orig$ts_parser_set_timeout_micros=Module.asm.orig$ts_parser_set_timeout_micros).apply(null,arguments)},calledRun;function callMain(t){var e=Module._main;if(e){(t=t||[]).unshift(thisProgram);var n=t.length,r=stackAlloc(4*(n+1)),i=r>>2;t.forEach(a=>{HEAP32[i++]=allocateUTF8OnStack(a)}),HEAP32[i]=0;try{var o=e(n,r);return exitJS(o,!0),o}catch(a){return handleException(a)}}}s(callMain,"callMain"),Module.AsciiToString=AsciiToString,Module.stringToUTF16=stringToUTF16,dependenciesFulfilled=s(function t(){calledRun||run(),calledRun||(dependenciesFulfilled=t)},"e");var dylibsLoaded=!1;function run(t){function e(){calledRun||(calledRun=!0,Module.calledRun=!0,ABORT||(initRuntime(),preMain(),Module.onRuntimeInitialized&&Module.onRuntimeInitialized(),shouldRunNow&&callMain(t),postRun()))}s(e,"t"),t=t||arguments_,runDependencies>0||!dylibsLoaded&&(preloadDylibs(),dylibsLoaded=!0,runDependencies>0)||(preRun(),runDependencies>0||(Module.setStatus?(Module.setStatus("Running..."),setTimeout(function(){setTimeout(function(){Module.setStatus("")},1),e()},1)):e()))}if(s(run,"run"),Module.preInit)for(typeof Module.preInit=="function"&&(Module.preInit=[Module.preInit]);Module.preInit.length>0;)Module.preInit.pop()();var shouldRunNow=!0;Module.noInitialRun&&(shouldRunNow=!1),run();let C=Module,INTERNAL={},SIZE_OF_INT=4,SIZE_OF_NODE=5*SIZE_OF_INT,SIZE_OF_POINT=2*SIZE_OF_INT,SIZE_OF_RANGE=2*SIZE_OF_INT+2*SIZE_OF_POINT,ZERO_POINT={row:0,column:0},QUERY_WORD_REGEX=/[\w-.]*/g,PREDICATE_STEP_TYPE_CAPTURE=1,PREDICATE_STEP_TYPE_STRING=2,LANGUAGE_FUNCTION_REGEX=/^_?tree_sitter_\w+/;var VERSION,MIN_COMPATIBLE_VERSION,TRANSFER_BUFFER,currentParseCallback,currentLogCallback;class ParserImpl{static{s(this,"ParserImpl")}static init(){TRANSFER_BUFFER=C._ts_init(),VERSION=getValue(TRANSFER_BUFFER,"i32"),MIN_COMPATIBLE_VERSION=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}initialize(){C._ts_parser_new_wasm(),this[0]=getValue(TRANSFER_BUFFER,"i32"),this[1]=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32")}delete(){C._ts_parser_delete(this[0]),C._free(this[1]),this[0]=0,this[1]=0}setLanguage(e){let n;if(e){if(e.constructor!==Language)throw new Error("Argument must be a Language");{n=e[0];let r=C._ts_language_version(n);if(r<MIN_COMPATIBLE_VERSION||VERSION<r)throw new Error(`Incompatible language version ${r}. Compatibility range ${MIN_COMPATIBLE_VERSION} through ${VERSION}.`)}}else n=0,e=null;return this.language=e,C._ts_parser_set_language(this[0],n),this}getLanguage(){return this.language}parse(e,n,r){if(typeof e=="string")currentParseCallback=s((c,u,d)=>e.slice(c,d),"currentParseCallback");else{if(typeof e!="function")throw new Error("Argument must be a string or a function");currentParseCallback=e}this.logCallback?(currentLogCallback=this.logCallback,C._ts_parser_enable_logger_wasm(this[0],1)):(currentLogCallback=null,C._ts_parser_enable_logger_wasm(this[0],0));let i=0,o=0;if(r&&r.includedRanges){i=r.includedRanges.length,o=C._calloc(i,SIZE_OF_RANGE);let c=o;for(let u=0;u<i;u++)marshalRange(c,r.includedRanges[u]),c+=SIZE_OF_RANGE}let a=C._ts_parser_parse_wasm(this[0],this[1],n?n[0]:0,o,i);if(!a)throw currentParseCallback=null,currentLogCallback=null,new Error("Parsing failed");let l=new Tree(INTERNAL,a,this.language,currentParseCallback);return currentParseCallback=null,currentLogCallback=null,l}reset(){C._ts_parser_reset(this[0])}setTimeoutMicros(e){C._ts_parser_set_timeout_micros(this[0],e)}getTimeoutMicros(){return C._ts_parser_timeout_micros(this[0])}setLogger(e){if(e){if(typeof e!="function")throw new Error("Logger callback must be a function")}else e=null;return this.logCallback=e,this}getLogger(){return this.logCallback}}class Tree{static{s(this,"Tree")}constructor(e,n,r,i){assertInternal(e),this[0]=n,this.language=r,this.textCallback=i}copy(){let e=C._ts_tree_copy(this[0]);return new Tree(INTERNAL,e,this.language,this.textCallback)}delete(){C._ts_tree_delete(this[0]),this[0]=0}edit(e){marshalEdit(e),C._ts_tree_edit_wasm(this[0])}get rootNode(){return C._ts_tree_root_node_wasm(this[0]),unmarshalNode(this)}getLanguage(){return this.language}walk(){return this.rootNode.walk()}getChangedRanges(e){if(e.constructor!==Tree)throw new TypeError("Argument must be a Tree");C._ts_tree_get_changed_ranges_wasm(this[0],e[0]);let n=getValue(TRANSFER_BUFFER,"i32"),r=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),i=new Array(n);if(n>0){let o=r;for(let a=0;a<n;a++)i[a]=unmarshalRange(o),o+=SIZE_OF_RANGE;C._free(r)}return i}}class Node{static{s(this,"Node")}constructor(e,n){assertInternal(e),this.tree=n}get typeId(){return marshalNode(this),C._ts_node_symbol_wasm(this.tree[0])}get type(){return this.tree.language.types[this.typeId]||"ERROR"}get endPosition(){return marshalNode(this),C._ts_node_end_point_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endIndex(){return marshalNode(this),C._ts_node_end_index_wasm(this.tree[0])}get text(){return getText(this.tree,this.startIndex,this.endIndex)}isNamed(){return marshalNode(this),C._ts_node_is_named_wasm(this.tree[0])===1}hasError(){return marshalNode(this),C._ts_node_has_error_wasm(this.tree[0])===1}hasChanges(){return marshalNode(this),C._ts_node_has_changes_wasm(this.tree[0])===1}isMissing(){return marshalNode(this),C._ts_node_is_missing_wasm(this.tree[0])===1}equals(e){return this.id===e.id}child(e){return marshalNode(this),C._ts_node_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}namedChild(e){return marshalNode(this),C._ts_node_named_child_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldId(e){return marshalNode(this),C._ts_node_child_by_field_id_wasm(this.tree[0],e),unmarshalNode(this.tree)}childForFieldName(e){let n=this.tree.language.fields.indexOf(e);if(n!==-1)return this.childForFieldId(n)}get childCount(){return marshalNode(this),C._ts_node_child_count_wasm(this.tree[0])}get namedChildCount(){return marshalNode(this),C._ts_node_named_child_count_wasm(this.tree[0])}get firstChild(){return this.child(0)}get firstNamedChild(){return this.namedChild(0)}get lastChild(){return this.child(this.childCount-1)}get lastNamedChild(){return this.namedChild(this.namedChildCount-1)}get children(){if(!this._children){marshalNode(this),C._ts_node_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._children=new Array(e),e>0){let r=n;for(let i=0;i<e;i++)this._children[i]=unmarshalNode(this.tree,r),r+=SIZE_OF_NODE;C._free(n)}}return this._children}get namedChildren(){if(!this._namedChildren){marshalNode(this),C._ts_node_named_children_wasm(this.tree[0]);let e=getValue(TRANSFER_BUFFER,"i32"),n=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32");if(this._namedChildren=new Array(e),e>0){let r=n;for(let i=0;i<e;i++)this._namedChildren[i]=unmarshalNode(this.tree,r),r+=SIZE_OF_NODE;C._free(n)}}return this._namedChildren}descendantsOfType(e,n,r){Array.isArray(e)||(e=[e]),n||(n=ZERO_POINT),r||(r=ZERO_POINT);let i=[],o=this.tree.language.types;for(let d=0,p=o.length;d<p;d++)e.includes(o[d])&&i.push(d);let a=C._malloc(SIZE_OF_INT*i.length);for(let d=0,p=i.length;d<p;d++)setValue(a+d*SIZE_OF_INT,i[d],"i32");marshalNode(this),C._ts_node_descendants_of_type_wasm(this.tree[0],a,i.length,n.row,n.column,r.row,r.column);let l=getValue(TRANSFER_BUFFER,"i32"),c=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),u=new Array(l);if(l>0){let d=c;for(let p=0;p<l;p++)u[p]=unmarshalNode(this.tree,d),d+=SIZE_OF_NODE}return C._free(c),C._free(a),u}get nextSibling(){return marshalNode(this),C._ts_node_next_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousSibling(){return marshalNode(this),C._ts_node_prev_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get nextNamedSibling(){return marshalNode(this),C._ts_node_next_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get previousNamedSibling(){return marshalNode(this),C._ts_node_prev_named_sibling_wasm(this.tree[0]),unmarshalNode(this.tree)}get parent(){return marshalNode(this),C._ts_node_parent_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForIndex(e,n=e){if(typeof e!="number"||typeof n!="number")throw new Error("Arguments must be numbers");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(r,e,"i32"),setValue(r+SIZE_OF_INT,n,"i32"),C._ts_node_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForIndex(e,n=e){if(typeof e!="number"||typeof n!="number")throw new Error("Arguments must be numbers");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return setValue(r,e,"i32"),setValue(r+SIZE_OF_INT,n,"i32"),C._ts_node_named_descendant_for_index_wasm(this.tree[0]),unmarshalNode(this.tree)}descendantForPosition(e,n=e){if(!isPoint(e)||!isPoint(n))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(r,e),marshalPoint(r+SIZE_OF_POINT,n),C._ts_node_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}namedDescendantForPosition(e,n=e){if(!isPoint(e)||!isPoint(n))throw new Error("Arguments must be {row, column} objects");marshalNode(this);let r=TRANSFER_BUFFER+SIZE_OF_NODE;return marshalPoint(r,e),marshalPoint(r+SIZE_OF_POINT,n),C._ts_node_named_descendant_for_position_wasm(this.tree[0]),unmarshalNode(this.tree)}walk(){return marshalNode(this),C._ts_tree_cursor_new_wasm(this.tree[0]),new TreeCursor(INTERNAL,this.tree)}toString(){marshalNode(this);let e=C._ts_node_to_string_wasm(this.tree[0]),n=AsciiToString(e);return C._free(e),n}}class TreeCursor{static{s(this,"TreeCursor")}constructor(e,n){assertInternal(e),this.tree=n,unmarshalTreeCursor(this)}delete(){marshalTreeCursor(this),C._ts_tree_cursor_delete_wasm(this.tree[0]),this[0]=this[1]=this[2]=0}reset(e){marshalNode(e),marshalTreeCursor(this,TRANSFER_BUFFER+SIZE_OF_NODE),C._ts_tree_cursor_reset_wasm(this.tree[0]),unmarshalTreeCursor(this)}get nodeType(){return this.tree.language.types[this.nodeTypeId]||"ERROR"}get nodeTypeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_type_id_wasm(this.tree[0])}get nodeId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_id_wasm(this.tree[0])}get nodeIsNamed(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_named_wasm(this.tree[0])===1}get nodeIsMissing(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_is_missing_wasm(this.tree[0])===1}get nodeText(){marshalTreeCursor(this);let e=C._ts_tree_cursor_start_index_wasm(this.tree[0]),n=C._ts_tree_cursor_end_index_wasm(this.tree[0]);return getText(this.tree,e,n)}get startPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_start_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get endPosition(){return marshalTreeCursor(this),C._ts_tree_cursor_end_position_wasm(this.tree[0]),unmarshalPoint(TRANSFER_BUFFER)}get startIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_start_index_wasm(this.tree[0])}get endIndex(){return marshalTreeCursor(this),C._ts_tree_cursor_end_index_wasm(this.tree[0])}currentNode(){return marshalTreeCursor(this),C._ts_tree_cursor_current_node_wasm(this.tree[0]),unmarshalNode(this.tree)}currentFieldId(){return marshalTreeCursor(this),C._ts_tree_cursor_current_field_id_wasm(this.tree[0])}currentFieldName(){return this.tree.language.fields[this.currentFieldId()]}gotoFirstChild(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_first_child_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoNextSibling(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_next_sibling_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}gotoParent(){marshalTreeCursor(this);let e=C._ts_tree_cursor_goto_parent_wasm(this.tree[0]);return unmarshalTreeCursor(this),e===1}}class Language{static{s(this,"Language")}constructor(e,n){assertInternal(e),this[0]=n,this.types=new Array(C._ts_language_symbol_count(this[0]));for(let r=0,i=this.types.length;r<i;r++)C._ts_language_symbol_type(this[0],r)<2&&(this.types[r]=UTF8ToString(C._ts_language_symbol_name(this[0],r)));this.fields=new Array(C._ts_language_field_count(this[0])+1);for(let r=0,i=this.fields.length;r<i;r++){let o=C._ts_language_field_name_for_id(this[0],r);this.fields[r]=o!==0?UTF8ToString(o):null}}get version(){return C._ts_language_version(this[0])}get fieldCount(){return this.fields.length-1}fieldIdForName(e){let n=this.fields.indexOf(e);return n!==-1?n:null}fieldNameForId(e){return this.fields[e]||null}idForNodeType(e,n){let r=lengthBytesUTF8(e),i=C._malloc(r+1);stringToUTF8(e,i,r+1);let o=C._ts_language_symbol_for_name(this[0],i,r,n);return C._free(i),o||null}get nodeTypeCount(){return C._ts_language_symbol_count(this[0])}nodeTypeForId(e){let n=C._ts_language_symbol_name(this[0],e);return n?UTF8ToString(n):null}nodeTypeIsNamed(e){return!!C._ts_language_type_is_named_wasm(this[0],e)}nodeTypeIsVisible(e){return!!C._ts_language_type_is_visible_wasm(this[0],e)}query(e){let n=lengthBytesUTF8(e),r=C._malloc(n+1);stringToUTF8(e,r,n+1);let i=C._ts_query_new(this[0],r,n,TRANSFER_BUFFER,TRANSFER_BUFFER+SIZE_OF_INT);if(!i){let y=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),v=UTF8ToString(r,getValue(TRANSFER_BUFFER,"i32")).length,b=e.substr(v,100).split(`
`)[0],E,_=b.match(QUERY_WORD_REGEX)[0];switch(y){case 2:E=new RangeError(`Bad node name '${_}'`);break;case 3:E=new RangeError(`Bad field name '${_}'`);break;case 4:E=new RangeError(`Bad capture name @${_}`);break;case 5:E=new TypeError(`Bad pattern structure at offset ${v}: '${b}'...`),_="";break;default:E=new SyntaxError(`Bad syntax at offset ${v}: '${b}'...`),_=""}throw E.index=v,E.length=_.length,C._free(r),E}let o=C._ts_query_string_count(i),a=C._ts_query_capture_count(i),l=C._ts_query_pattern_count(i),c=new Array(a),u=new Array(o);for(let y=0;y<a;y++){let v=C._ts_query_capture_name_for_id(i,y,TRANSFER_BUFFER),b=getValue(TRANSFER_BUFFER,"i32");c[y]=UTF8ToString(v,b)}for(let y=0;y<o;y++){let v=C._ts_query_string_value_for_id(i,y,TRANSFER_BUFFER),b=getValue(TRANSFER_BUFFER,"i32");u[y]=UTF8ToString(v,b)}let d=new Array(l),p=new Array(l),m=new Array(l),h=new Array(l),g=new Array(l);for(let y=0;y<l;y++){let v=C._ts_query_predicates_for_pattern(i,y,TRANSFER_BUFFER),b=getValue(TRANSFER_BUFFER,"i32");h[y]=[],g[y]=[];let E=[],_=v;for(let k=0;k<b;k++){let P=getValue(_,"i32");_+=SIZE_OF_INT;let N=getValue(_,"i32");if(_+=SIZE_OF_INT,P===PREDICATE_STEP_TYPE_CAPTURE)E.push({type:"capture",name:c[N]});else if(P===PREDICATE_STEP_TYPE_STRING)E.push({type:"string",value:u[N]});else if(E.length>0){if(E[0].type!=="string")throw new Error("Predicates must begin with a literal value");let U=E[0].value,ne=!0;switch(U){case"not-eq?":ne=!1;case"eq?":if(E.length!==3)throw new Error("Wrong number of arguments to `#eq?` predicate. Expected 2, got "+(E.length-1));if(E[1].type!=="capture")throw new Error(`First argument of \`#eq?\` predicate must be a capture. Got "${E[1].value}"`);if(E[2].type==="capture"){let W=E[1].name,ue=E[2].name;g[y].push(function(ie){let V,O;for(let Y of ie)Y.name===W&&(V=Y.node),Y.name===ue&&(O=Y.node);return V===void 0||O===void 0||V.text===O.text===ne})}else{let W=E[1].name,ue=E[2].value;g[y].push(function(ie){for(let V of ie)if(V.name===W)return V.node.text===ue===ne;return!0})}break;case"not-match?":ne=!1;case"match?":if(E.length!==3)throw new Error(`Wrong number of arguments to \`#match?\` predicate. Expected 2, got ${E.length-1}.`);if(E[1].type!=="capture")throw new Error(`First argument of \`#match?\` predicate must be a capture. Got "${E[1].value}".`);if(E[2].type!=="string")throw new Error(`Second argument of \`#match?\` predicate must be a string. Got @${E[2].value}.`);let he=E[1].name,ae=new RegExp(E[2].value);g[y].push(function(W){for(let ue of W)if(ue.name===he)return ae.test(ue.node.text)===ne;return!0});break;case"set!":if(E.length<2||E.length>3)throw new Error(`Wrong number of arguments to \`#set!\` predicate. Expected 1 or 2. Got ${E.length-1}.`);if(E.some(W=>W.type!=="string"))throw new Error('Arguments to `#set!` predicate must be a strings.".');d[y]||(d[y]={}),d[y][E[1].value]=E[2]?E[2].value:null;break;case"is?":case"is-not?":if(E.length<2||E.length>3)throw new Error(`Wrong number of arguments to \`#${U}\` predicate. Expected 1 or 2. Got ${E.length-1}.`);if(E.some(W=>W.type!=="string"))throw new Error(`Arguments to \`#${U}\` predicate must be a strings.".`);let G=U==="is?"?p:m;G[y]||(G[y]={}),G[y][E[1].value]=E[2]?E[2].value:null;break;default:h[y].push({operator:U,operands:E.slice(1)})}E.length=0}}Object.freeze(d[y]),Object.freeze(p[y]),Object.freeze(m[y])}return C._free(r),new Query(INTERNAL,i,c,g,h,Object.freeze(d),Object.freeze(p),Object.freeze(m))}static load(e){let n;if(e instanceof Uint8Array)n=Promise.resolve(e);else{let i=e;if(typeof process<"u"&&process.versions&&process.versions.node){let o=require("fs");n=Promise.resolve(o.readFileSync(i))}else n=fetch(i).then(o=>o.arrayBuffer().then(a=>{if(o.ok)return new Uint8Array(a);{let l=new TextDecoder("utf-8").decode(a);throw new Error(`Language.load failed with status ${o.status}.

${l}`)}}))}let r=typeof loadSideModule=="function"?loadSideModule:loadWebAssemblyModule;return n.then(i=>r(i,{loadAsync:!0})).then(i=>{let o=Object.keys(i),a=o.find(c=>LANGUAGE_FUNCTION_REGEX.test(c)&&!c.includes("external_scanner_"));a||console.log(`Couldn't find language function in WASM file. Symbols:
${JSON.stringify(o,null,2)}`);let l=i[a]();return new Language(INTERNAL,l)})}}class Query{static{s(this,"Query")}constructor(e,n,r,i,o,a,l,c){assertInternal(e),this[0]=n,this.captureNames=r,this.textPredicates=i,this.predicates=o,this.setProperties=a,this.assertedProperties=l,this.refutedProperties=c,this.exceededMatchLimit=!1}delete(){C._ts_query_delete(this[0]),this[0]=0}matches(e,n,r,i){n||(n=ZERO_POINT),r||(r=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_matches_wasm(this[0],e.tree[0],n.row,n.column,r.row,r.column,o);let a=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),c=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),u=new Array(a);this.exceededMatchLimit=!!c;let d=0,p=l;for(let m=0;m<a;m++){let h=getValue(p,"i32");p+=SIZE_OF_INT;let g=getValue(p,"i32");p+=SIZE_OF_INT;let y=new Array(g);if(p=unmarshalCaptures(this,e.tree,p,y),this.textPredicates[h].every(v=>v(y))){u[d++]={pattern:h,captures:y};let v=this.setProperties[h];v&&(u[m].setProperties=v);let b=this.assertedProperties[h];b&&(u[m].assertedProperties=b);let E=this.refutedProperties[h];E&&(u[m].refutedProperties=E)}}return u.length=d,C._free(l),u}captures(e,n,r,i){n||(n=ZERO_POINT),r||(r=ZERO_POINT),i||(i={});let o=i.matchLimit;if(o===void 0)o=0;else if(typeof o!="number")throw new Error("Arguments must be numbers");marshalNode(e),C._ts_query_captures_wasm(this[0],e.tree[0],n.row,n.column,r.row,r.column,o);let a=getValue(TRANSFER_BUFFER,"i32"),l=getValue(TRANSFER_BUFFER+SIZE_OF_INT,"i32"),c=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32"),u=[];this.exceededMatchLimit=!!c;let d=[],p=l;for(let m=0;m<a;m++){let h=getValue(p,"i32");p+=SIZE_OF_INT;let g=getValue(p,"i32");p+=SIZE_OF_INT;let y=getValue(p,"i32");if(p+=SIZE_OF_INT,d.length=g,p=unmarshalCaptures(this,e.tree,p,d),this.textPredicates[h].every(v=>v(d))){let v=d[y],b=this.setProperties[h];b&&(v.setProperties=b);let E=this.assertedProperties[h];E&&(v.assertedProperties=E);let _=this.refutedProperties[h];_&&(v.refutedProperties=_),u.push(v)}}return C._free(l),u}predicatesForPattern(e){return this.predicates[e]}didExceedMatchLimit(){return this.exceededMatchLimit}}function getText(t,e,n){let r=n-e,i=t.textCallback(e,null,n);for(e+=i.length;e<n;){let o=t.textCallback(e,null,n);if(!(o&&o.length>0))break;e+=o.length,i+=o}return e>n&&(i=i.slice(0,r)),i}s(getText,"getText");function unmarshalCaptures(t,e,n,r){for(let i=0,o=r.length;i<o;i++){let a=getValue(n,"i32"),l=unmarshalNode(e,n+=SIZE_OF_INT);n+=SIZE_OF_NODE,r[i]={name:t.captureNames[a],node:l}}return n}s(unmarshalCaptures,"unmarshalCaptures");function assertInternal(t){if(t!==INTERNAL)throw new Error("Illegal constructor")}s(assertInternal,"assertInternal");function isPoint(t){return t&&typeof t.row=="number"&&typeof t.column=="number"}s(isPoint,"isPoint");function marshalNode(t){let e=TRANSFER_BUFFER;setValue(e,t.id,"i32"),e+=SIZE_OF_INT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.row,"i32"),e+=SIZE_OF_INT,setValue(e,t.startPosition.column,"i32"),e+=SIZE_OF_INT,setValue(e,t[0],"i32")}s(marshalNode,"marshalNode");function unmarshalNode(t,e=TRANSFER_BUFFER){let n=getValue(e,"i32");if(n===0)return null;let r=getValue(e+=SIZE_OF_INT,"i32"),i=getValue(e+=SIZE_OF_INT,"i32"),o=getValue(e+=SIZE_OF_INT,"i32"),a=getValue(e+=SIZE_OF_INT,"i32"),l=new Node(INTERNAL,t);return l.id=n,l.startIndex=r,l.startPosition={row:i,column:o},l[0]=a,l}s(unmarshalNode,"unmarshalNode");function marshalTreeCursor(t,e=TRANSFER_BUFFER){setValue(e+0*SIZE_OF_INT,t[0],"i32"),setValue(e+1*SIZE_OF_INT,t[1],"i32"),setValue(e+2*SIZE_OF_INT,t[2],"i32")}s(marshalTreeCursor,"marshalTreeCursor");function unmarshalTreeCursor(t){t[0]=getValue(TRANSFER_BUFFER+0*SIZE_OF_INT,"i32"),t[1]=getValue(TRANSFER_BUFFER+1*SIZE_OF_INT,"i32"),t[2]=getValue(TRANSFER_BUFFER+2*SIZE_OF_INT,"i32")}s(unmarshalTreeCursor,"unmarshalTreeCursor");function marshalPoint(t,e){setValue(t,e.row,"i32"),setValue(t+SIZE_OF_INT,e.column,"i32")}s(marshalPoint,"marshalPoint");function unmarshalPoint(t){return{row:getValue(t,"i32"),column:getValue(t+SIZE_OF_INT,"i32")}}s(unmarshalPoint,"unmarshalPoint");function marshalRange(t,e){marshalPoint(t,e.startPosition),marshalPoint(t+=SIZE_OF_POINT,e.endPosition),setValue(t+=SIZE_OF_POINT,e.startIndex,"i32"),setValue(t+=SIZE_OF_INT,e.endIndex,"i32"),t+=SIZE_OF_INT}s(marshalRange,"marshalRange");function unmarshalRange(t){let e={};return e.startPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.endPosition=unmarshalPoint(t),t+=SIZE_OF_POINT,e.startIndex=getValue(t,"i32"),t+=SIZE_OF_INT,e.endIndex=getValue(t,"i32"),e}s(unmarshalRange,"unmarshalRange");function marshalEdit(t){let e=TRANSFER_BUFFER;marshalPoint(e,t.startPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.oldEndPosition),e+=SIZE_OF_POINT,marshalPoint(e,t.newEndPosition),e+=SIZE_OF_POINT,setValue(e,t.startIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.oldEndIndex,"i32"),e+=SIZE_OF_INT,setValue(e,t.newEndIndex,"i32"),e+=SIZE_OF_INT}s(marshalEdit,"marshalEdit");for(let t of Object.getOwnPropertyNames(ParserImpl.prototype))Object.defineProperty(Parser.prototype,t,{value:ParserImpl.prototype[t],enumerable:!1,writable:!1});Parser.Language=Language,Module.onRuntimeInitialized=()=>{ParserImpl.init(),resolveInitPromise()}}))}}return Parser}();typeof exports=="object"&&(module.exports=TreeSitter)});var Cne=H((tTn,qTe)=>{f();var yne=require("fs"),bQ=require("path"),L8=bQ.join,O0t=bQ.dirname,OTe=yne.accessSync&&function(t){try{yne.accessSync(t)}catch{return!1}return!0}||yne.existsSync||bQ.existsSync,UTe={arrow:process.env.NODE_BINDINGS_ARROW||" \u2192 ",compiled:process.env.NODE_BINDINGS_COMPILED_DIR||"compiled",platform:process.platform,arch:process.arch,nodePreGyp:"node-v"+process.versions.modules+"-"+process.platform+"-"+process.arch,version:process.versions.node,bindings:"bindings.node",try:[["module_root","build","bindings"],["module_root","build","Debug","bindings"],["module_root","build","Release","bindings"],["module_root","out","Debug","bindings"],["module_root","Debug","bindings"],["module_root","out","Release","bindings"],["module_root","Release","bindings"],["module_root","build","default","bindings"],["module_root","compiled","version","platform","arch","bindings"],["module_root","compiled","platform","arch","bindings"]]};function U0t(t){typeof t=="string"?t={bindings:t}:t||(t={}),Object.keys(UTe).map(function(c){c in t||(t[c]=UTe[c])}),t.module_root||(t.module_root=q0t(__filename)),bQ.extname(t.bindings)!=".node"&&(t.bindings+=".node");for(var e=typeof __webpack_require__=="function"?__non_webpack_require__:require,n=[],r=0,i=t.try.length,o,a,l;r<i;r++){o=L8.apply(null,t.try[r].map(function(c){return t[c]||c})),n.push(o);try{return a=t.path?e.resolve(o):e(o),t.path||(a.path=o),a}catch(c){if(c.code!=="MODULE_NOT_FOUND"&&c.code!=="QUALIFIED_PATH_RESOLUTION_FAILED"&&!/not find/i.test(c.message))throw c}}throw l=new Error(`Could not locate the bindings file. Tried:
`+n.map(function(c){return t.arrow+c}).join(`
`)),l.tries=n,l}s(U0t,"bindings");qTe.exports=U0t;function q0t(t){for(var e=O0t(t),n;;){if(e==="."&&(e=process.cwd()),OTe(L8(e,"dist")))return L8(e,"dist");if(OTe(L8(e,"compiled")))return e;if(n===e)throw new Error('Could not find module root given file: "'+t+'". Do you have a `dist` or `compiled` directory? ');n=e,e=L8(e,"..")}}s(q0t,"getRoot")});var HTe=H((iTn,WTe)=>{f();WTe.exports=Cne()("node_sqlite3.node")});var VTe=H(jTe=>{f();var W0t=require("util");function H0t(t,e,n){let r=t[e];t[e]=function(){let i=new Error,o=t.constructor.name+"#"+e+"("+Array.prototype.slice.call(arguments).map(function(l){return W0t.inspect(l,!1,0)}).join(", ")+")";typeof n>"u"&&(n=-1),n<0&&(n+=arguments.length);let a=arguments[n];return typeof arguments[n]=="function"&&(arguments[n]=s(function(){let c=arguments[0];return c&&c.stack&&!c.__augmented&&(c.stack=GTe(c).join(`
`),c.stack+=`
--> in `+o,c.stack+=`
`+GTe(i).slice(1).join(`
`),c.__augmented=!0),a.apply(this,arguments)},"replacement")),r.apply(this,arguments)}}s(H0t,"extendTrace");jTe.extendTrace=H0t;function GTe(t){return t.stack.split(`
`).filter(function(e){return e.indexOf(__filename)<0})}s(GTe,"filter")});var KTe=H((zTe,YTe)=>{f();var G0t=require("path"),Qf=HTe(),jS=require("events").EventEmitter;YTe.exports=zTe=Qf;function VS(t){return function(e){let n,r=Array.prototype.slice.call(arguments,1);if(typeof r[r.length-1]=="function"){let o=r[r.length-1];n=s(function(a){a&&o(a)},"errBack")}let i=new EQ(this,e,n);return t.call(this,i,r)}}s(VS,"normalizeMethod");function vne(t,e){for(let n in e.prototype)t.prototype[n]=e.prototype[n]}s(vne,"inherits");Qf.cached={Database:s(function(t,e,n){if(t===""||t===":memory:")return new Ru(t,e,n);let r;if(t=G0t.resolve(t),!Qf.cached.objects[t])r=Qf.cached.objects[t]=new Ru(t,e,n);else{r=Qf.cached.objects[t];let o=typeof e=="number"?n:e;if(typeof o=="function"){let a=function(){o.call(r,null)};var i=a;s(a,"cb"),r.open?process.nextTick(a):r.once("open",a)}}return r},"Database"),objects:{}};var Ru=Qf.Database,EQ=Qf.Statement,xne=Qf.Backup;vne(Ru,jS);vne(EQ,jS);vne(xne,jS);Ru.prototype.prepare=VS(function(t,e){return e.length?t.bind.apply(t,e):t});Ru.prototype.run=VS(function(t,e){return t.run.apply(t,e).finalize(),this});Ru.prototype.get=VS(function(t,e){return t.get.apply(t,e).finalize(),this});Ru.prototype.all=VS(function(t,e){return t.all.apply(t,e).finalize(),this});Ru.prototype.each=VS(function(t,e){return t.each.apply(t,e).finalize(),this});Ru.prototype.map=VS(function(t,e){return t.map.apply(t,e).finalize(),this});Ru.prototype.backup=function(){let t;return arguments.length<=2?t=new xne(this,arguments[0],"main","main",!0,arguments[1]):t=new xne(this,arguments[0],arguments[1],arguments[2],arguments[3],arguments[4]),t.retryErrors=[Qf.BUSY,Qf.LOCKED],t};EQ.prototype.map=function(){let t=Array.prototype.slice.call(arguments),e=t.pop();return t.push(function(n,r){if(n)return e(n);let i={};if(r.length){let o=Object.keys(r[0]),a=o[0];if(o.length>2)for(let l=0;l<r.length;l++)i[r[l][a]]=r[l];else{let l=o[1];for(let c=0;c<r.length;c++)i[r[c][a]]=r[c][l]}}e(n,i)}),this.all.apply(this,t)};var $Te=!1,bne=["trace","profile","change"];Ru.prototype.addListener=Ru.prototype.on=function(t){let e=jS.prototype.addListener.apply(this,arguments);return bne.indexOf(t)>=0&&this.configure(t,!0),e};Ru.prototype.removeListener=function(t){let e=jS.prototype.removeListener.apply(this,arguments);return bne.indexOf(t)>=0&&!this._events[t]&&this.configure(t,!1),e};Ru.prototype.removeAllListeners=function(t){let e=jS.prototype.removeAllListeners.apply(this,arguments);return bne.indexOf(t)>=0&&this.configure(t,!1),e};Qf.verbose=function(){if(!$Te){let t=VTe();["prepare","get","run","all","each","map","close","exec"].forEach(function(e){t.extendTrace(Ru.prototype,e)}),["bind","get","run","all","each","map","reset","finalize"].forEach(function(e){t.extendTrace(EQ.prototype,e)}),$Te=!0}return Qf}});var FQ=H(Xa=>{"use strict";f();Object.defineProperty(Xa,"__esModule",{value:!0});Xa.thenable=Xa.typedArray=Xa.stringArray=Xa.array=Xa.func=Xa.error=Xa.number=Xa.string=Xa.boolean=void 0;function V0t(t){return t===!0||t===!1}s(V0t,"boolean");Xa.boolean=V0t;function twe(t){return typeof t=="string"||t instanceof String}s(twe,"string");Xa.string=twe;function $0t(t){return typeof t=="number"||t instanceof Number}s($0t,"number");Xa.number=$0t;function z0t(t){return t instanceof Error}s(z0t,"error");Xa.error=z0t;function nwe(t){return typeof t=="function"}s(nwe,"func");Xa.func=nwe;function rwe(t){return Array.isArray(t)}s(rwe,"array");Xa.array=rwe;function Y0t(t){return rwe(t)&&t.every(e=>twe(e))}s(Y0t,"stringArray");Xa.stringArray=Y0t;function K0t(t,e){return Array.isArray(t)&&t.every(e)}s(K0t,"typedArray");Xa.typedArray=K0t;function J0t(t){return t&&nwe(t.then)}s(J0t,"thenable");Xa.thenable=J0t});var Tne=H(Of=>{"use strict";f();Object.defineProperty(Of,"__esModule",{value:!0});Of.generateUuid=Of.parse=Of.isUUID=Of.v4=Of.empty=void 0;var Q8=class{static{s(this,"ValueUUID")}constructor(e){this._value=e}asHex(){return this._value}equals(e){return this.asHex()===e.asHex()}},O8=class t extends Q8{static{s(this,"V4UUID")}static _oneOf(e){return e[Math.floor(e.length*Math.random())]}static _randomHex(){return t._oneOf(t._chars)}constructor(){super([t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),"-","4",t._randomHex(),t._randomHex(),t._randomHex(),"-",t._oneOf(t._timeHighBits),t._randomHex(),t._randomHex(),t._randomHex(),"-",t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex(),t._randomHex()].join(""))}};O8._chars=["0","1","2","3","4","5","6","6","7","8","9","a","b","c","d","e","f"];O8._timeHighBits=["8","9","a","b"];Of.empty=new Q8("00000000-0000-0000-0000-000000000000");function iwe(){return new O8}s(iwe,"v4");Of.v4=iwe;var X0t=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i;function owe(t){return X0t.test(t)}s(owe,"isUUID");Of.isUUID=owe;function Z0t(t){if(!owe(t))throw new Error("invalid uuid");return new Q8(t)}s(Z0t,"parse");Of.parse=Z0t;function eft(){return iwe().asHex()}s(eft,"generateUuid");Of.generateUuid=eft});var swe=H(nv=>{"use strict";f();Object.defineProperty(nv,"__esModule",{value:!0});nv.attachPartialResult=nv.ProgressFeature=nv.attachWorkDone=void 0;var tv=ri(),tft=Tne(),MI=class t{static{s(this,"WorkDoneProgressReporterImpl")}constructor(e,n){this._connection=e,this._token=n,t.Instances.set(this._token,this)}begin(e,n,r,i){let o={kind:"begin",title:e,percentage:n,message:r,cancellable:i};this._connection.sendProgress(tv.WorkDoneProgress.type,this._token,o)}report(e,n){let r={kind:"report"};typeof e=="number"?(r.percentage=e,n!==void 0&&(r.message=n)):r.message=e,this._connection.sendProgress(tv.WorkDoneProgress.type,this._token,r)}done(){t.Instances.delete(this._token),this._connection.sendProgress(tv.WorkDoneProgress.type,this._token,{kind:"end"})}};MI.Instances=new Map;var MQ=class extends MI{static{s(this,"WorkDoneProgressServerReporterImpl")}constructor(e,n){super(e,n),this._source=new tv.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose(),super.done()}cancel(){this._source.cancel()}},U8=class{static{s(this,"NullProgressReporter")}constructor(){}begin(){}report(){}done(){}},QQ=class extends U8{static{s(this,"NullProgressServerReporter")}constructor(){super(),this._source=new tv.CancellationTokenSource}get token(){return this._source.token}done(){this._source.dispose()}cancel(){this._source.cancel()}};function nft(t,e){if(e===void 0||e.workDoneToken===void 0)return new U8;let n=e.workDoneToken;return delete e.workDoneToken,new MI(t,n)}s(nft,"attachWorkDone");nv.attachWorkDone=nft;var rft=s(t=>class extends t{constructor(){super(),this._progressSupported=!1}initialize(e){super.initialize(e),e?.window?.workDoneProgress===!0&&(this._progressSupported=!0,this.connection.onNotification(tv.WorkDoneProgressCancelNotification.type,n=>{let r=MI.Instances.get(n.token);(r instanceof MQ||r instanceof QQ)&&r.cancel()}))}attachWorkDoneProgress(e){return e===void 0?new U8:new MI(this.connection,e)}createWorkDoneProgress(){if(this._progressSupported){let e=(0,tft.generateUuid)();return this.connection.sendRequest(tv.WorkDoneProgressCreateRequest.type,{token:e}).then(()=>new MQ(this.connection,e))}else return Promise.resolve(new QQ)}},"ProgressFeature");nv.ProgressFeature=rft;var wne;(function(t){t.type=new tv.ProgressType})(wne||(wne={}));var _ne=class{static{s(this,"ResultProgressReporterImpl")}constructor(e,n){this._connection=e,this._token=n}report(e){this._connection.sendProgress(wne.type,this._token,e)}};function ift(t,e){if(e===void 0||e.partialResultToken===void 0)return;let n=e.partialResultToken;return delete e.partialResultToken,new _ne(t,n)}s(ift,"attachPartialResult");nv.attachPartialResult=ift});var awe=H(OQ=>{"use strict";f();Object.defineProperty(OQ,"__esModule",{value:!0});OQ.ConfigurationFeature=void 0;var oft=ri(),sft=FQ(),aft=s(t=>class extends t{getConfiguration(e){return e?sft.string(e)?this._getConfiguration({section:e}):this._getConfiguration(e):this._getConfiguration({})}_getConfiguration(e){let n={items:Array.isArray(e)?e:[e]};return this.connection.sendRequest(oft.ConfigurationRequest.type,n).then(r=>Array.isArray(r)?Array.isArray(e)?r:r[0]:Array.isArray(e)?[]:null)}},"ConfigurationFeature");OQ.ConfigurationFeature=aft});var lwe=H(qQ=>{"use strict";f();Object.defineProperty(qQ,"__esModule",{value:!0});qQ.WorkspaceFoldersFeature=void 0;var UQ=ri(),lft=s(t=>class extends t{constructor(){super(),this._notificationIsAutoRegistered=!1}initialize(e){super.initialize(e);let n=e.workspace;n&&n.workspaceFolders&&(this._onDidChangeWorkspaceFolders=new UQ.Emitter,this.connection.onNotification(UQ.DidChangeWorkspaceFoldersNotification.type,r=>{this._onDidChangeWorkspaceFolders.fire(r.event)}))}fillServerCapabilities(e){super.fillServerCapabilities(e);let n=e.workspace?.workspaceFolders?.changeNotifications;this._notificationIsAutoRegistered=n===!0||typeof n=="string"}getWorkspaceFolders(){return this.connection.sendRequest(UQ.WorkspaceFoldersRequest.type)}get onDidChangeWorkspaceFolders(){if(!this._onDidChangeWorkspaceFolders)throw new Error("Client doesn't support sending workspace folder change events.");return!this._notificationIsAutoRegistered&&!this._unregistration&&(this._unregistration=this.connection.client.register(UQ.DidChangeWorkspaceFoldersNotification.type)),this._onDidChangeWorkspaceFolders.event}},"WorkspaceFoldersFeature");qQ.WorkspaceFoldersFeature=lft});var cwe=H(WQ=>{"use strict";f();Object.defineProperty(WQ,"__esModule",{value:!0});WQ.CallHierarchyFeature=void 0;var Sne=ri(),cft=s(t=>class extends t{get callHierarchy(){return{onPrepare:s(e=>this.connection.onRequest(Sne.CallHierarchyPrepareRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0)),"onPrepare"),onIncomingCalls:s(e=>{let n=Sne.CallHierarchyIncomingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"onIncomingCalls"),onOutgoingCalls:s(e=>{let n=Sne.CallHierarchyOutgoingCallsRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"onOutgoingCalls")}}},"CallHierarchyFeature");WQ.CallHierarchyFeature=cft});var kne=H(rv=>{"use strict";f();Object.defineProperty(rv,"__esModule",{value:!0});rv.SemanticTokensBuilder=rv.SemanticTokensDiff=rv.SemanticTokensFeature=void 0;var HQ=ri(),uft=s(t=>class extends t{get semanticTokens(){return{refresh:s(()=>this.connection.sendRequest(HQ.SemanticTokensRefreshRequest.type),"refresh"),on:s(e=>{let n=HQ.SemanticTokensRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"on"),onDelta:s(e=>{let n=HQ.SemanticTokensDeltaRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"onDelta"),onRange:s(e=>{let n=HQ.SemanticTokensRangeRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"onRange")}}},"SemanticTokensFeature");rv.SemanticTokensFeature=uft;var GQ=class{static{s(this,"SemanticTokensDiff")}constructor(e,n){this.originalSequence=e,this.modifiedSequence=n}computeDiff(){let e=this.originalSequence.length,n=this.modifiedSequence.length,r=0;for(;r<n&&r<e&&this.originalSequence[r]===this.modifiedSequence[r];)r++;if(r<n&&r<e){let i=e-1,o=n-1;for(;i>=r&&o>=r&&this.originalSequence[i]===this.modifiedSequence[o];)i--,o--;(i<r||o<r)&&(i++,o++);let a=i-r+1,l=this.modifiedSequence.slice(r,o+1);return l.length===1&&l[0]===this.originalSequence[i]?[{start:r,deleteCount:a-1}]:[{start:r,deleteCount:a,data:l}]}else return r<n?[{start:r,deleteCount:0,data:this.modifiedSequence.slice(r)}]:r<e?[{start:r,deleteCount:e-r}]:[]}};rv.SemanticTokensDiff=GQ;var Rne=class{static{s(this,"SemanticTokensBuilder")}constructor(){this._prevData=void 0,this.initialize()}initialize(){this._id=Date.now(),this._prevLine=0,this._prevChar=0,this._data=[],this._dataLen=0}push(e,n,r,i,o){let a=e,l=n;this._dataLen>0&&(a-=this._prevLine,a===0&&(l-=this._prevChar)),this._data[this._dataLen++]=a,this._data[this._dataLen++]=l,this._data[this._dataLen++]=r,this._data[this._dataLen++]=i,this._data[this._dataLen++]=o,this._prevLine=e,this._prevChar=n}get id(){return this._id.toString()}previousResult(e){this.id===e&&(this._prevData=this._data),this.initialize()}build(){return this._prevData=void 0,{resultId:this.id,data:this._data}}canBuildEdits(){return this._prevData!==void 0}buildEdits(){return this._prevData!==void 0?{resultId:this.id,edits:new GQ(this._prevData,this._data).computeDiff()}:this.build()}};rv.SemanticTokensBuilder=Rne});var uwe=H(jQ=>{"use strict";f();Object.defineProperty(jQ,"__esModule",{value:!0});jQ.ShowDocumentFeature=void 0;var dft=ri(),fft=s(t=>class extends t{showDocument(e){return this.connection.sendRequest(dft.ShowDocumentRequest.type,e)}},"ShowDocumentFeature");jQ.ShowDocumentFeature=fft});var dwe=H(VQ=>{"use strict";f();Object.defineProperty(VQ,"__esModule",{value:!0});VQ.FileOperationsFeature=void 0;var zS=ri(),pft=s(t=>class extends t{onDidCreateFiles(e){return this.connection.onNotification(zS.DidCreateFilesNotification.type,n=>{e(n)})}onDidRenameFiles(e){return this.connection.onNotification(zS.DidRenameFilesNotification.type,n=>{e(n)})}onDidDeleteFiles(e){return this.connection.onNotification(zS.DidDeleteFilesNotification.type,n=>{e(n)})}onWillCreateFiles(e){return this.connection.onRequest(zS.WillCreateFilesRequest.type,(n,r)=>e(n,r))}onWillRenameFiles(e){return this.connection.onRequest(zS.WillRenameFilesRequest.type,(n,r)=>e(n,r))}onWillDeleteFiles(e){return this.connection.onRequest(zS.WillDeleteFilesRequest.type,(n,r)=>e(n,r))}},"FileOperationsFeature");VQ.FileOperationsFeature=pft});var fwe=H($Q=>{"use strict";f();Object.defineProperty($Q,"__esModule",{value:!0});$Q.LinkedEditingRangeFeature=void 0;var mft=ri(),hft=s(t=>class extends t{onLinkedEditingRange(e){return this.connection.onRequest(mft.LinkedEditingRangeRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0))}},"LinkedEditingRangeFeature");$Q.LinkedEditingRangeFeature=hft});var pwe=H(zQ=>{"use strict";f();Object.defineProperty(zQ,"__esModule",{value:!0});zQ.TypeHierarchyFeature=void 0;var Bne=ri(),gft=s(t=>class extends t{get typeHierarchy(){return{onPrepare:s(e=>this.connection.onRequest(Bne.TypeHierarchyPrepareRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),void 0)),"onPrepare"),onSupertypes:s(e=>{let n=Bne.TypeHierarchySupertypesRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"onSupertypes"),onSubtypes:s(e=>{let n=Bne.TypeHierarchySubtypesRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"onSubtypes")}}},"TypeHierarchyFeature");zQ.TypeHierarchyFeature=gft});var hwe=H(YQ=>{"use strict";f();Object.defineProperty(YQ,"__esModule",{value:!0});YQ.InlineValueFeature=void 0;var mwe=ri(),Aft=s(t=>class extends t{get inlineValue(){return{refresh:s(()=>this.connection.sendRequest(mwe.InlineValueRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(mwe.InlineValueRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n))),"on")}}},"InlineValueFeature");YQ.InlineValueFeature=Aft});var Awe=H(KQ=>{"use strict";f();Object.defineProperty(KQ,"__esModule",{value:!0});KQ.FoldingRangeFeature=void 0;var gwe=ri(),yft=s(t=>class extends t{get foldingRange(){return{refresh:s(()=>this.connection.sendRequest(gwe.FoldingRangeRefreshRequest.type),"refresh"),on:s(e=>{let n=gwe.FoldingRangeRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"on")}}},"FoldingRangeFeature");KQ.FoldingRangeFeature=yft});var ywe=H(JQ=>{"use strict";f();Object.defineProperty(JQ,"__esModule",{value:!0});JQ.InlayHintFeature=void 0;var Pne=ri(),Cft=s(t=>class extends t{get inlayHint(){return{refresh:s(()=>this.connection.sendRequest(Pne.InlayHintRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(Pne.InlayHintRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n))),"on"),resolve:s(e=>this.connection.onRequest(Pne.InlayHintResolveRequest.type,(n,r)=>e(n,r)),"resolve")}}},"InlayHintFeature");JQ.InlayHintFeature=Cft});var Cwe=H(XQ=>{"use strict";f();Object.defineProperty(XQ,"__esModule",{value:!0});XQ.DiagnosticFeature=void 0;var q8=ri(),xft=s(t=>class extends t{get diagnostics(){return{refresh:s(()=>this.connection.sendRequest(q8.DiagnosticRefreshRequest.type),"refresh"),on:s(e=>this.connection.onRequest(q8.DocumentDiagnosticRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(q8.DocumentDiagnosticRequest.partialResult,n))),"on"),onWorkspace:s(e=>this.connection.onRequest(q8.WorkspaceDiagnosticRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n),this.attachPartialResultProgress(q8.WorkspaceDiagnosticRequest.partialResult,n))),"onWorkspace")}}},"DiagnosticFeature");XQ.DiagnosticFeature=xft});var Nne=H(ZQ=>{"use strict";f();Object.defineProperty(ZQ,"__esModule",{value:!0});ZQ.TextDocuments=void 0;var QI=ri(),Dne=class{static{s(this,"TextDocuments")}constructor(e){this._configuration=e,this._syncedDocuments=new Map,this._onDidChangeContent=new QI.Emitter,this._onDidOpen=new QI.Emitter,this._onDidClose=new QI.Emitter,this._onDidSave=new QI.Emitter,this._onWillSave=new QI.Emitter}get onDidOpen(){return this._onDidOpen.event}get onDidChangeContent(){return this._onDidChangeContent.event}get onWillSave(){return this._onWillSave.event}onWillSaveWaitUntil(e){this._willSaveWaitUntil=e}get onDidSave(){return this._onDidSave.event}get onDidClose(){return this._onDidClose.event}get(e){return this._syncedDocuments.get(e)}all(){return Array.from(this._syncedDocuments.values())}keys(){return Array.from(this._syncedDocuments.keys())}listen(e){e.__textDocumentSync=QI.TextDocumentSyncKind.Incremental;let n=[];return n.push(e.onDidOpenTextDocument(r=>{let i=r.textDocument,o=this._configuration.create(i.uri,i.languageId,i.version,i.text);this._syncedDocuments.set(i.uri,o);let a=Object.freeze({document:o});this._onDidOpen.fire(a),this._onDidChangeContent.fire(a)})),n.push(e.onDidChangeTextDocument(r=>{let i=r.textDocument,o=r.contentChanges;if(o.length===0)return;let{version:a}=i;if(a==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let l=this._syncedDocuments.get(i.uri);l!==void 0&&(l=this._configuration.update(l,o,a),this._syncedDocuments.set(i.uri,l),this._onDidChangeContent.fire(Object.freeze({document:l})))})),n.push(e.onDidCloseTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&(this._syncedDocuments.delete(r.textDocument.uri),this._onDidClose.fire(Object.freeze({document:i})))})),n.push(e.onWillSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onWillSave.fire(Object.freeze({document:i,reason:r.reason}))})),n.push(e.onWillSaveTextDocumentWaitUntil((r,i)=>{let o=this._syncedDocuments.get(r.textDocument.uri);return o!==void 0&&this._willSaveWaitUntil?this._willSaveWaitUntil(Object.freeze({document:o,reason:r.reason}),i):[]})),n.push(e.onDidSaveTextDocument(r=>{let i=this._syncedDocuments.get(r.textDocument.uri);i!==void 0&&this._onDidSave.fire(Object.freeze({document:i}))})),QI.Disposable.create(()=>{n.forEach(r=>r.dispose())})}};ZQ.TextDocuments=Dne});var Fne=H(YS=>{"use strict";f();Object.defineProperty(YS,"__esModule",{value:!0});YS.NotebookDocuments=YS.NotebookSyncFeature=void 0;var Uf=ri(),xwe=Nne(),vft=s(t=>class extends t{get synchronization(){return{onDidOpenNotebookDocument:s(e=>this.connection.onNotification(Uf.DidOpenNotebookDocumentNotification.type,n=>{e(n)}),"onDidOpenNotebookDocument"),onDidChangeNotebookDocument:s(e=>this.connection.onNotification(Uf.DidChangeNotebookDocumentNotification.type,n=>{e(n)}),"onDidChangeNotebookDocument"),onDidSaveNotebookDocument:s(e=>this.connection.onNotification(Uf.DidSaveNotebookDocumentNotification.type,n=>{e(n)}),"onDidSaveNotebookDocument"),onDidCloseNotebookDocument:s(e=>this.connection.onNotification(Uf.DidCloseNotebookDocumentNotification.type,n=>{e(n)}),"onDidCloseNotebookDocument")}}},"NotebookSyncFeature");YS.NotebookSyncFeature=vft;var eO=class t{static{s(this,"CellTextDocumentConnection")}onDidOpenTextDocument(e){return this.openHandler=e,Uf.Disposable.create(()=>{this.openHandler=void 0})}openTextDocument(e){this.openHandler&&this.openHandler(e)}onDidChangeTextDocument(e){return this.changeHandler=e,Uf.Disposable.create(()=>{this.changeHandler=e})}changeTextDocument(e){this.changeHandler&&this.changeHandler(e)}onDidCloseTextDocument(e){return this.closeHandler=e,Uf.Disposable.create(()=>{this.closeHandler=void 0})}closeTextDocument(e){this.closeHandler&&this.closeHandler(e)}onWillSaveTextDocument(){return t.NULL_DISPOSE}onWillSaveTextDocumentWaitUntil(){return t.NULL_DISPOSE}onDidSaveTextDocument(){return t.NULL_DISPOSE}};eO.NULL_DISPOSE=Object.freeze({dispose:s(()=>{},"dispose")});var Lne=class{static{s(this,"NotebookDocuments")}constructor(e){e instanceof xwe.TextDocuments?this._cellTextDocuments=e:this._cellTextDocuments=new xwe.TextDocuments(e),this.notebookDocuments=new Map,this.notebookCellMap=new Map,this._onDidOpen=new Uf.Emitter,this._onDidChange=new Uf.Emitter,this._onDidSave=new Uf.Emitter,this._onDidClose=new Uf.Emitter}get cellTextDocuments(){return this._cellTextDocuments}getCellTextDocument(e){return this._cellTextDocuments.get(e.document)}getNotebookDocument(e){return this.notebookDocuments.get(e)}getNotebookCell(e){let n=this.notebookCellMap.get(e);return n&&n[0]}findNotebookDocumentForCell(e){let n=typeof e=="string"?e:e.document,r=this.notebookCellMap.get(n);return r&&r[1]}get onDidOpen(){return this._onDidOpen.event}get onDidSave(){return this._onDidSave.event}get onDidChange(){return this._onDidChange.event}get onDidClose(){return this._onDidClose.event}listen(e){let n=new eO,r=[];return r.push(this.cellTextDocuments.listen(n)),r.push(e.notebooks.synchronization.onDidOpenNotebookDocument(i=>{this.notebookDocuments.set(i.notebookDocument.uri,i.notebookDocument);for(let o of i.cellTextDocuments)n.openTextDocument({textDocument:o});this.updateCellMap(i.notebookDocument),this._onDidOpen.fire(i.notebookDocument)})),r.push(e.notebooks.synchronization.onDidChangeNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o===void 0)return;o.version=i.notebookDocument.version;let a=o.metadata,l=!1,c=i.change;c.metadata!==void 0&&(l=!0,o.metadata=c.metadata);let u=[],d=[],p=[],m=[];if(c.cells!==void 0){let b=c.cells;if(b.structure!==void 0){let E=b.structure.array;if(o.cells.splice(E.start,E.deleteCount,...E.cells!==void 0?E.cells:[]),b.structure.didOpen!==void 0)for(let _ of b.structure.didOpen)n.openTextDocument({textDocument:_}),u.push(_.uri);if(b.structure.didClose)for(let _ of b.structure.didClose)n.closeTextDocument({textDocument:_}),d.push(_.uri)}if(b.data!==void 0){let E=new Map(b.data.map(_=>[_.document,_]));for(let _=0;_<=o.cells.length;_++){let k=E.get(o.cells[_].document);if(k!==void 0){let P=o.cells.splice(_,1,k);if(p.push({old:P[0],new:k}),E.delete(k.document),E.size===0)break}}}if(b.textContent!==void 0)for(let E of b.textContent)n.changeTextDocument({textDocument:E.document,contentChanges:E.changes}),m.push(E.document.uri)}this.updateCellMap(o);let h={notebookDocument:o};l&&(h.metadata={old:a,new:o.metadata});let g=[];for(let b of u)g.push(this.getNotebookCell(b));let y=[];for(let b of d)y.push(this.getNotebookCell(b));let v=[];for(let b of m)v.push(this.getNotebookCell(b));(g.length>0||y.length>0||p.length>0||v.length>0)&&(h.cells={added:g,removed:y,changed:{data:p,textContent:v}}),(h.metadata!==void 0||h.cells!==void 0)&&this._onDidChange.fire(h)})),r.push(e.notebooks.synchronization.onDidSaveNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);o!==void 0&&this._onDidSave.fire(o)})),r.push(e.notebooks.synchronization.onDidCloseNotebookDocument(i=>{let o=this.notebookDocuments.get(i.notebookDocument.uri);if(o!==void 0){this._onDidClose.fire(o);for(let a of i.cellTextDocuments)n.closeTextDocument({textDocument:a});this.notebookDocuments.delete(i.notebookDocument.uri);for(let a of o.cells)this.notebookCellMap.delete(a.document)}})),Uf.Disposable.create(()=>{r.forEach(i=>i.dispose())})}updateCellMap(e){for(let n of e.cells)this.notebookCellMap.set(n.document,[n,e])}};YS.NotebookDocuments=Lne});var vwe=H(tO=>{"use strict";f();Object.defineProperty(tO,"__esModule",{value:!0});tO.MonikerFeature=void 0;var bft=ri(),Eft=s(t=>class extends t{get moniker(){return{on:s(e=>{let n=bft.MonikerRequest.type;return this.connection.onRequest(n,(r,i)=>e(r,i,this.attachWorkDoneProgress(r),this.attachPartialResultProgress(n,r)))},"on")}}},"MonikerFeature");tO.MonikerFeature=Eft});var Wne=H(mo=>{"use strict";f();Object.defineProperty(mo,"__esModule",{value:!0});mo.createConnection=mo.combineFeatures=mo.combineNotebooksFeatures=mo.combineLanguagesFeatures=mo.combineWorkspaceFeatures=mo.combineWindowFeatures=mo.combineClientFeatures=mo.combineTracerFeatures=mo.combineTelemetryFeatures=mo.combineConsoleFeatures=mo._NotebooksImpl=mo._LanguagesImpl=mo.BulkUnregistration=mo.BulkRegistration=mo.ErrorMessageTracker=void 0;var $t=ri(),qf=FQ(),Qne=Tne(),zr=swe(),Ift=awe(),Tft=lwe(),wft=cwe(),_ft=kne(),Sft=uwe(),Rft=dwe(),kft=fwe(),Bft=pwe(),Pft=hwe(),Dft=Awe(),Nft=ywe(),Lft=Cwe(),Fft=Fne(),Mft=vwe();function Mne(t){if(t!==null)return t}s(Mne,"null2Undefined");var One=class{static{s(this,"ErrorMessageTracker")}constructor(){this._messages=Object.create(null)}add(e){let n=this._messages[e];n||(n=0),n++,this._messages[e]=n}sendErrors(e){Object.keys(this._messages).forEach(n=>{e.window.showErrorMessage(n)})}};mo.ErrorMessageTracker=One;var nO=class{static{s(this,"RemoteConsoleImpl")}constructor(){}rawAttach(e){this._rawConnection=e}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}fillServerCapabilities(e){}initialize(e){}error(e){this.send($t.MessageType.Error,e)}warn(e){this.send($t.MessageType.Warning,e)}info(e){this.send($t.MessageType.Info,e)}log(e){this.send($t.MessageType.Log,e)}debug(e){this.send($t.MessageType.Debug,e)}send(e,n){this._rawConnection&&this._rawConnection.sendNotification($t.LogMessageNotification.type,{type:e,message:n}).catch(()=>{(0,$t.RAL)().console.error("Sending log message failed")})}},Une=class{static{s(this,"_RemoteWindowImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}showErrorMessage(e,...n){let r={type:$t.MessageType.Error,message:e,actions:n};return this.connection.sendRequest($t.ShowMessageRequest.type,r).then(Mne)}showWarningMessage(e,...n){let r={type:$t.MessageType.Warning,message:e,actions:n};return this.connection.sendRequest($t.ShowMessageRequest.type,r).then(Mne)}showInformationMessage(e,...n){let r={type:$t.MessageType.Info,message:e,actions:n};return this.connection.sendRequest($t.ShowMessageRequest.type,r).then(Mne)}},bwe=(0,Sft.ShowDocumentFeature)((0,zr.ProgressFeature)(Une)),Ewe;(function(t){function e(){return new rO}s(e,"create"),t.create=e})(Ewe||(mo.BulkRegistration=Ewe={}));var rO=class{static{s(this,"BulkRegistrationImpl")}constructor(){this._registrations=[],this._registered=new Set}add(e,n){let r=qf.string(e)?e:e.method;if(this._registered.has(r))throw new Error(`${r} is already added to this registration`);let i=Qne.generateUuid();this._registrations.push({id:i,method:r,registerOptions:n||{}}),this._registered.add(r)}asRegistrationParams(){return{registrations:this._registrations}}},Iwe;(function(t){function e(){return new W8(void 0,[])}s(e,"create"),t.create=e})(Iwe||(mo.BulkUnregistration=Iwe={}));var W8=class{static{s(this,"BulkUnregistrationImpl")}constructor(e,n){this._connection=e,this._unregistrations=new Map,n.forEach(r=>{this._unregistrations.set(r.method,r)})}get isAttached(){return!!this._connection}attach(e){this._connection=e}add(e){this._unregistrations.set(e.method,e)}dispose(){let e=[];for(let r of this._unregistrations.values())e.push(r);let n={unregisterations:e};this._connection.sendRequest($t.UnregistrationRequest.type,n).catch(()=>{this._connection.console.info("Bulk unregistration failed.")})}disposeSingle(e){let n=qf.string(e)?e:e.method,r=this._unregistrations.get(n);if(!r)return!1;let i={unregisterations:[r]};return this._connection.sendRequest($t.UnregistrationRequest.type,i).then(()=>{this._unregistrations.delete(n)},o=>{this._connection.console.info(`Un-registering request handler for ${r.id} failed.`)}),!0}},iO=class{static{s(this,"RemoteClientImpl")}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}register(e,n,r){return e instanceof rO?this.registerMany(e):e instanceof W8?this.registerSingle1(e,n,r):this.registerSingle2(e,n)}registerSingle1(e,n,r){let i=qf.string(n)?n:n.method,o=Qne.generateUuid(),a={registrations:[{id:o,method:i,registerOptions:r||{}}]};return e.isAttached||e.attach(this.connection),this.connection.sendRequest($t.RegistrationRequest.type,a).then(l=>(e.add({id:o,method:i}),e),l=>(this.connection.console.info(`Registering request handler for ${i} failed.`),Promise.reject(l)))}registerSingle2(e,n){let r=qf.string(e)?e:e.method,i=Qne.generateUuid(),o={registrations:[{id:i,method:r,registerOptions:n||{}}]};return this.connection.sendRequest($t.RegistrationRequest.type,o).then(a=>$t.Disposable.create(()=>{this.unregisterSingle(i,r).catch(()=>{this.connection.console.info(`Un-registering capability with id ${i} failed.`)})}),a=>(this.connection.console.info(`Registering request handler for ${r} failed.`),Promise.reject(a)))}unregisterSingle(e,n){let r={unregisterations:[{id:e,method:n}]};return this.connection.sendRequest($t.UnregistrationRequest.type,r).catch(()=>{this.connection.console.info(`Un-registering request handler for ${e} failed.`)})}registerMany(e){let n=e.asRegistrationParams();return this.connection.sendRequest($t.RegistrationRequest.type,n).then(()=>new W8(this._connection,n.registrations.map(r=>({id:r.id,method:r.method}))),r=>(this.connection.console.info("Bulk registration failed."),Promise.reject(r)))}},qne=class{static{s(this,"_RemoteWorkspaceImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}applyEdit(e){function n(i){return i&&!!i.edit}s(n,"isApplyWorkspaceEditParams");let r=n(e)?e:{edit:e};return this.connection.sendRequest($t.ApplyWorkspaceEditRequest.type,r)}},Twe=(0,Rft.FileOperationsFeature)((0,Tft.WorkspaceFoldersFeature)((0,Ift.ConfigurationFeature)(qne))),oO=class{static{s(this,"TracerImpl")}constructor(){this._trace=$t.Trace.Off}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}set trace(e){this._trace=e}log(e,n){this._trace!==$t.Trace.Off&&this.connection.sendNotification($t.LogTraceNotification.type,{message:e,verbose:this._trace===$t.Trace.Verbose?n:void 0}).catch(()=>{})}},sO=class{static{s(this,"TelemetryImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}logEvent(e){this.connection.sendNotification($t.TelemetryEventNotification.type,e).catch(()=>{this.connection.console.log("Sending TelemetryEventNotification failed")})}},aO=class{static{s(this,"_LanguagesImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,zr.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,n){return(0,zr.attachPartialResult)(this.connection,n)}};mo._LanguagesImpl=aO;var wwe=(0,Dft.FoldingRangeFeature)((0,Mft.MonikerFeature)((0,Lft.DiagnosticFeature)((0,Nft.InlayHintFeature)((0,Pft.InlineValueFeature)((0,Bft.TypeHierarchyFeature)((0,kft.LinkedEditingRangeFeature)((0,_ft.SemanticTokensFeature)((0,wft.CallHierarchyFeature)(aO))))))))),lO=class{static{s(this,"_NotebooksImpl")}constructor(){}attach(e){this._connection=e}get connection(){if(!this._connection)throw new Error("Remote is not attached to a connection yet.");return this._connection}initialize(e){}fillServerCapabilities(e){}attachWorkDoneProgress(e){return(0,zr.attachWorkDone)(this.connection,e)}attachPartialResultProgress(e,n){return(0,zr.attachPartialResult)(this.connection,n)}};mo._NotebooksImpl=lO;var _we=(0,Fft.NotebookSyncFeature)(lO);function Swe(t,e){return function(n){return e(t(n))}}s(Swe,"combineConsoleFeatures");mo.combineConsoleFeatures=Swe;function Rwe(t,e){return function(n){return e(t(n))}}s(Rwe,"combineTelemetryFeatures");mo.combineTelemetryFeatures=Rwe;function kwe(t,e){return function(n){return e(t(n))}}s(kwe,"combineTracerFeatures");mo.combineTracerFeatures=kwe;function Bwe(t,e){return function(n){return e(t(n))}}s(Bwe,"combineClientFeatures");mo.combineClientFeatures=Bwe;function Pwe(t,e){return function(n){return e(t(n))}}s(Pwe,"combineWindowFeatures");mo.combineWindowFeatures=Pwe;function Dwe(t,e){return function(n){return e(t(n))}}s(Dwe,"combineWorkspaceFeatures");mo.combineWorkspaceFeatures=Dwe;function Nwe(t,e){return function(n){return e(t(n))}}s(Nwe,"combineLanguagesFeatures");mo.combineLanguagesFeatures=Nwe;function Lwe(t,e){return function(n){return e(t(n))}}s(Lwe,"combineNotebooksFeatures");mo.combineNotebooksFeatures=Lwe;function Qft(t,e){function n(i,o,a){return i&&o?a(i,o):i||o}return s(n,"combine"),{__brand:"features",console:n(t.console,e.console,Swe),tracer:n(t.tracer,e.tracer,kwe),telemetry:n(t.telemetry,e.telemetry,Rwe),client:n(t.client,e.client,Bwe),window:n(t.window,e.window,Pwe),workspace:n(t.workspace,e.workspace,Dwe),languages:n(t.languages,e.languages,Nwe),notebooks:n(t.notebooks,e.notebooks,Lwe)}}s(Qft,"combineFeatures");mo.combineFeatures=Qft;function Oft(t,e,n){let r=n&&n.console?new(n.console(nO)):new nO,i=t(r);r.rawAttach(i);let o=n&&n.tracer?new(n.tracer(oO)):new oO,a=n&&n.telemetry?new(n.telemetry(sO)):new sO,l=n&&n.client?new(n.client(iO)):new iO,c=n&&n.window?new(n.window(bwe)):new bwe,u=n&&n.workspace?new(n.workspace(Twe)):new Twe,d=n&&n.languages?new(n.languages(wwe)):new wwe,p=n&&n.notebooks?new(n.notebooks(_we)):new _we,m=[r,o,a,l,c,u,d,p];function h(E){return E instanceof Promise?E:qf.thenable(E)?new Promise((_,k)=>{E.then(P=>_(P),P=>k(P))}):Promise.resolve(E)}s(h,"asPromise");let g,y,v,b={listen:s(()=>i.listen(),"listen"),sendRequest:s((E,..._)=>i.sendRequest(qf.string(E)?E:E.method,..._),"sendRequest"),onRequest:s((E,_)=>i.onRequest(E,_),"onRequest"),sendNotification:s((E,_)=>{let k=qf.string(E)?E:E.method;return i.sendNotification(k,_)},"sendNotification"),onNotification:s((E,_)=>i.onNotification(E,_),"onNotification"),onProgress:i.onProgress,sendProgress:i.sendProgress,onInitialize:s(E=>(y=E,{dispose:s(()=>{y=void 0},"dispose")}),"onInitialize"),onInitialized:s(E=>i.onNotification($t.InitializedNotification.type,E),"onInitialized"),onShutdown:s(E=>(g=E,{dispose:s(()=>{g=void 0},"dispose")}),"onShutdown"),onExit:s(E=>(v=E,{dispose:s(()=>{v=void 0},"dispose")}),"onExit"),get console(){return r},get telemetry(){return a},get tracer(){return o},get client(){return l},get window(){return c},get workspace(){return u},get languages(){return d},get notebooks(){return p},onDidChangeConfiguration:s(E=>i.onNotification($t.DidChangeConfigurationNotification.type,E),"onDidChangeConfiguration"),onDidChangeWatchedFiles:s(E=>i.onNotification($t.DidChangeWatchedFilesNotification.type,E),"onDidChangeWatchedFiles"),__textDocumentSync:void 0,onDidOpenTextDocument:s(E=>i.onNotification($t.DidOpenTextDocumentNotification.type,E),"onDidOpenTextDocument"),onDidChangeTextDocument:s(E=>i.onNotification($t.DidChangeTextDocumentNotification.type,E),"onDidChangeTextDocument"),onDidCloseTextDocument:s(E=>i.onNotification($t.DidCloseTextDocumentNotification.type,E),"onDidCloseTextDocument"),onWillSaveTextDocument:s(E=>i.onNotification($t.WillSaveTextDocumentNotification.type,E),"onWillSaveTextDocument"),onWillSaveTextDocumentWaitUntil:s(E=>i.onRequest($t.WillSaveTextDocumentWaitUntilRequest.type,E),"onWillSaveTextDocumentWaitUntil"),onDidSaveTextDocument:s(E=>i.onNotification($t.DidSaveTextDocumentNotification.type,E),"onDidSaveTextDocument"),sendDiagnostics:s(E=>i.sendNotification($t.PublishDiagnosticsNotification.type,E),"sendDiagnostics"),onHover:s(E=>i.onRequest($t.HoverRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),void 0)),"onHover"),onCompletion:s(E=>i.onRequest($t.CompletionRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),(0,zr.attachPartialResult)(i,_))),"onCompletion"),onCompletionResolve:s(E=>i.onRequest($t.CompletionResolveRequest.type,E),"onCompletionResolve"),onSignatureHelp:s(E=>i.onRequest($t.SignatureHelpRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),void 0)),"onSignatureHelp"),onDeclaration:s(E=>i.onRequest($t.DeclarationRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),(0,zr.attachPartialResult)(i,_))),"onDeclaration"),onDefinition:s(E=>i.onRequest($t.DefinitionRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),(0,zr.attachPartialResult)(i,_))),"onDefinition"),onTypeDefinition:s(E=>i.onRequest($t.TypeDefinitionRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),(0,zr.attachPartialResult)(i,_))),"onTypeDefinition"),onImplementation:s(E=>i.onRequest($t.ImplementationRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),(0,zr.attachPartialResult)(i,_))),"onImplementation"),onReferences:s(E=>i.onRequest($t.ReferencesRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),(0,zr.attachPartialResult)(i,_))),"onReferences"),onDocumentHighlight:s(E=>i.onRequest($t.DocumentHighlightRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),(0,zr.attachPartialResult)(i,_))),"onDocumentHighlight"),onDocumentSymbol:s(E=>i.onRequest($t.DocumentSymbolRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),(0,zr.attachPartialResult)(i,_))),"onDocumentSymbol"),onWorkspaceSymbol:s(E=>i.onRequest($t.WorkspaceSymbolRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),(0,zr.attachPartialResult)(i,_))),"onWorkspaceSymbol"),onWorkspaceSymbolResolve:s(E=>i.onRequest($t.WorkspaceSymbolResolveRequest.type,E),"onWorkspaceSymbolResolve"),onCodeAction:s(E=>i.onRequest($t.CodeActionRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),(0,zr.attachPartialResult)(i,_))),"onCodeAction"),onCodeActionResolve:s(E=>i.onRequest($t.CodeActionResolveRequest.type,(_,k)=>E(_,k)),"onCodeActionResolve"),onCodeLens:s(E=>i.onRequest($t.CodeLensRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),(0,zr.attachPartialResult)(i,_))),"onCodeLens"),onCodeLensResolve:s(E=>i.onRequest($t.CodeLensResolveRequest.type,(_,k)=>E(_,k)),"onCodeLensResolve"),onDocumentFormatting:s(E=>i.onRequest($t.DocumentFormattingRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),void 0)),"onDocumentFormatting"),onDocumentRangeFormatting:s(E=>i.onRequest($t.DocumentRangeFormattingRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),void 0)),"onDocumentRangeFormatting"),onDocumentOnTypeFormatting:s(E=>i.onRequest($t.DocumentOnTypeFormattingRequest.type,(_,k)=>E(_,k)),"onDocumentOnTypeFormatting"),onRenameRequest:s(E=>i.onRequest($t.RenameRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),void 0)),"onRenameRequest"),onPrepareRename:s(E=>i.onRequest($t.PrepareRenameRequest.type,(_,k)=>E(_,k)),"onPrepareRename"),onDocumentLinks:s(E=>i.onRequest($t.DocumentLinkRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),(0,zr.attachPartialResult)(i,_))),"onDocumentLinks"),onDocumentLinkResolve:s(E=>i.onRequest($t.DocumentLinkResolveRequest.type,(_,k)=>E(_,k)),"onDocumentLinkResolve"),onDocumentColor:s(E=>i.onRequest($t.DocumentColorRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),(0,zr.attachPartialResult)(i,_))),"onDocumentColor"),onColorPresentation:s(E=>i.onRequest($t.ColorPresentationRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),(0,zr.attachPartialResult)(i,_))),"onColorPresentation"),onFoldingRanges:s(E=>i.onRequest($t.FoldingRangeRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),(0,zr.attachPartialResult)(i,_))),"onFoldingRanges"),onSelectionRanges:s(E=>i.onRequest($t.SelectionRangeRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),(0,zr.attachPartialResult)(i,_))),"onSelectionRanges"),onExecuteCommand:s(E=>i.onRequest($t.ExecuteCommandRequest.type,(_,k)=>E(_,k,(0,zr.attachWorkDone)(i,_),void 0)),"onExecuteCommand"),dispose:s(()=>i.dispose(),"dispose")};for(let E of m)E.attach(b);return i.onRequest($t.InitializeRequest.type,E=>{e.initialize(E),qf.string(E.trace)&&(o.trace=$t.Trace.fromString(E.trace));for(let _ of m)_.initialize(E.capabilities);if(y){let _=y(E,new $t.CancellationTokenSource().token,(0,zr.attachWorkDone)(i,E),void 0);return h(_).then(k=>{if(k instanceof $t.ResponseError)return k;let P=k;P||(P={capabilities:{}});let N=P.capabilities;N||(N={},P.capabilities=N),N.textDocumentSync===void 0||N.textDocumentSync===null?N.textDocumentSync=qf.number(b.__textDocumentSync)?b.__textDocumentSync:$t.TextDocumentSyncKind.None:!qf.number(N.textDocumentSync)&&!qf.number(N.textDocumentSync.change)&&(N.textDocumentSync.change=qf.number(b.__textDocumentSync)?b.__textDocumentSync:$t.TextDocumentSyncKind.None);for(let U of m)U.fillServerCapabilities(N);return P})}else{let _={capabilities:{textDocumentSync:$t.TextDocumentSyncKind.None}};for(let k of m)k.fillServerCapabilities(_.capabilities);return _}}),i.onRequest($t.ShutdownRequest.type,()=>{if(e.shutdownReceived=!0,g)return g(new $t.CancellationTokenSource().token)}),i.onNotification($t.ExitNotification.type,()=>{try{v&&v()}finally{e.shutdownReceived?e.exit(0):e.exit(1)}}),i.onNotification($t.SetTraceNotification.type,E=>{o.trace=$t.Trace.fromString(E.value)}),b}s(Oft,"createConnection");mo.createConnection=Oft});var Fwe=H(yd=>{"use strict";f();Object.defineProperty(yd,"__esModule",{value:!0});yd.resolveModulePath=yd.FileSystem=yd.resolveGlobalYarnPath=yd.resolveGlobalNodePath=yd.resolve=yd.uriToFilePath=void 0;var Uft=require("url"),wm=require("path"),Hne=require("fs"),$ne=require("child_process");function qft(t){let e=Uft.parse(t);if(e.protocol!=="file:"||!e.path)return;let n=e.path.split("/");for(var r=0,i=n.length;r<i;r++)n[r]=decodeURIComponent(n[r]);if(process.platform==="win32"&&n.length>1){let o=n[0],a=n[1];o.length===0&&a.length>1&&a[1]===":"&&n.shift()}return wm.normalize(n.join("/"))}s(qft,"uriToFilePath");yd.uriToFilePath=qft;function Gne(){return process.platform==="win32"}s(Gne,"isWindows");function cO(t,e,n,r){let i="NODE_PATH",o=["var p = process;","p.on('message',function(m){","if(m.c==='e'){","p.exit(0);","}","else if(m.c==='rs'){","try{","var r=require.resolve(m.a);","p.send({c:'r',s:true,r:r});","}","catch(err){","p.send({c:'r',s:false});","}","}","});"].join("");return new Promise((a,l)=>{let c=process.env,u=Object.create(null);Object.keys(c).forEach(d=>u[d]=c[d]),e&&Hne.existsSync(e)&&(u[i]?u[i]=e+wm.delimiter+u[i]:u[i]=e,r&&r(`NODE_PATH value is: ${u[i]}`)),u.ELECTRON_RUN_AS_NODE="1";try{let d=(0,$ne.fork)("",[],{cwd:n,env:u,execArgv:["-e",o]});if(d.pid===void 0){l(new Error(`Starting process to resolve node module  ${t} failed`));return}d.on("error",m=>{l(m)}),d.on("message",m=>{m.c==="r"&&(d.send({c:"e"}),m.s?a(m.r):l(new Error(`Failed to resolve module: ${t}`)))});let p={c:"rs",a:t};d.send(p)}catch(d){l(d)}})}s(cO,"resolve");yd.resolve=cO;function jne(t){let e="npm",n=Object.create(null);Object.keys(process.env).forEach(o=>n[o]=process.env[o]),n.NO_UPDATE_NOTIFIER="true";let r={encoding:"utf8",env:n};Gne()&&(e="npm.cmd",r.shell=!0);let i=s(()=>{},"handler");try{process.on("SIGPIPE",i);let o=(0,$ne.spawnSync)(e,["config","get","prefix"],r).stdout;if(!o){t&&t("'npm config get prefix' didn't return a value.");return}let a=o.trim();return t&&t(`'npm config get prefix' value is: ${a}`),a.length>0?Gne()?wm.join(a,"node_modules"):wm.join(a,"lib","node_modules"):void 0}catch{return}finally{process.removeListener("SIGPIPE",i)}}s(jne,"resolveGlobalNodePath");yd.resolveGlobalNodePath=jne;function Wft(t){let e="yarn",n={encoding:"utf8"};Gne()&&(e="yarn.cmd",n.shell=!0);let r=s(()=>{},"handler");try{process.on("SIGPIPE",r);let i=(0,$ne.spawnSync)(e,["global","dir","--json"],n),o=i.stdout;if(!o){t&&(t("'yarn global dir' didn't return a value."),i.stderr&&t(i.stderr));return}let a=o.trim().split(/\r?\n/);for(let l of a)try{let c=JSON.parse(l);if(c.type==="log")return wm.join(c.data,"node_modules")}catch{}return}catch{return}finally{process.removeListener("SIGPIPE",r)}}s(Wft,"resolveGlobalYarnPath");yd.resolveGlobalYarnPath=Wft;var Vne;(function(t){let e;function n(){return e!==void 0||(process.platform==="win32"?e=!1:e=!Hne.existsSync(__filename.toUpperCase())||!Hne.existsSync(__filename.toLowerCase())),e}s(n,"isCaseSensitive"),t.isCaseSensitive=n;function r(i,o){return n()?wm.normalize(o).indexOf(wm.normalize(i))===0:wm.normalize(o).toLowerCase().indexOf(wm.normalize(i).toLowerCase())===0}s(r,"isParent"),t.isParent=r})(Vne||(yd.FileSystem=Vne={}));function Hft(t,e,n,r){return n?(wm.isAbsolute(n)||(n=wm.join(t,n)),cO(e,n,n,r).then(i=>Vne.isParent(n,i)?i:Promise.reject(new Error(`Failed to load ${e} from node path location.`))).then(void 0,i=>cO(e,jne(r),t,r))):cO(e,jne(r),t,r)}s(Hft,"resolveModulePath");yd.resolveModulePath=Hft});var zne=H((x_n,Mwe)=>{"use strict";f();Mwe.exports=ri()});var Qwe=H(uO=>{"use strict";f();Object.defineProperty(uO,"__esModule",{value:!0});uO.InlineCompletionFeature=void 0;var Gft=ri(),jft=s(t=>class extends t{get inlineCompletion(){return{on:s(e=>this.connection.onRequest(Gft.InlineCompletionRequest.type,(n,r)=>e(n,r,this.attachWorkDoneProgress(n))),"on")}}},"InlineCompletionFeature");uO.InlineCompletionFeature=jft});var qwe=H(zc=>{"use strict";f();var Vft=zc&&zc.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[n]},"get")}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),Uwe=zc&&zc.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Vft(e,t,n)};Object.defineProperty(zc,"__esModule",{value:!0});zc.ProposedFeatures=zc.NotebookDocuments=zc.TextDocuments=zc.SemanticTokensBuilder=void 0;var $ft=kne();Object.defineProperty(zc,"SemanticTokensBuilder",{enumerable:!0,get:s(function(){return $ft.SemanticTokensBuilder},"get")});var zft=Qwe();Uwe(ri(),zc);var Yft=Nne();Object.defineProperty(zc,"TextDocuments",{enumerable:!0,get:s(function(){return Yft.TextDocuments},"get")});var Kft=Fne();Object.defineProperty(zc,"NotebookDocuments",{enumerable:!0,get:s(function(){return Kft.NotebookDocuments},"get")});Uwe(Wne(),zc);var Owe;(function(t){t.all={__brand:"features",languages:zft.InlineCompletionFeature}})(Owe||(zc.ProposedFeatures=Owe={}))});var Za=H(Wf=>{"use strict";f();var Jft=Wf&&Wf.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[n]},"get")}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),jwe=Wf&&Wf.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&Jft(e,t,n)};Object.defineProperty(Wf,"__esModule",{value:!0});Wf.createConnection=Wf.Files=void 0;var Wwe=require("node:util"),Yne=FQ(),Xft=Wne(),H8=Fwe(),OI=zne();jwe(zne(),Wf);jwe(qwe(),Wf);var Hwe;(function(t){t.uriToFilePath=H8.uriToFilePath,t.resolveGlobalNodePath=H8.resolveGlobalNodePath,t.resolveGlobalYarnPath=H8.resolveGlobalYarnPath,t.resolve=H8.resolve,t.resolveModulePath=H8.resolveModulePath})(Hwe||(Wf.Files=Hwe={}));var Gwe;function dO(){if(Gwe!==void 0)try{Gwe.end()}catch{}}s(dO,"endProtocolConnection");var KS=!1,Vwe;function Zft(){let t="--clientProcessId";function e(n){try{let r=parseInt(n);isNaN(r)||(Vwe=setInterval(()=>{try{process.kill(r,0)}catch{dO(),process.exit(KS?0:1)}},3e3))}catch{}}s(e,"runTimer");for(let n=2;n<process.argv.length;n++){let r=process.argv[n];if(r===t&&n+1<process.argv.length){e(process.argv[n+1]);return}else{let i=r.split("=");i[0]===t&&e(i[1])}}}s(Zft,"setupExitTimer");Zft();var ept={initialize:s(t=>{let e=t.processId;Yne.number(e)&&Vwe===void 0&&setInterval(()=>{try{process.kill(e,0)}catch{process.exit(KS?0:1)}},3e3)},"initialize"),get shutdownReceived(){return KS},set shutdownReceived(t){KS=t},exit:s(t=>{dO(),process.exit(t)},"exit")};function tpt(t,e,n,r){let i,o,a,l;return t!==void 0&&t.__brand==="features"&&(i=t,t=e,e=n,n=r),OI.ConnectionStrategy.is(t)||OI.ConnectionOptions.is(t)?l=t:(o=t,a=e,l=n),npt(o,a,l,i)}s(tpt,"createConnection");Wf.createConnection=tpt;function npt(t,e,n,r){let i=!1;if(!t&&!e&&process.argv.length>2){let c,u,d=process.argv.slice(2);for(let p=0;p<d.length;p++){let m=d[p];if(m==="--node-ipc"){t=new OI.IPCMessageReader(process),e=new OI.IPCMessageWriter(process);break}else if(m==="--stdio"){i=!0,t=process.stdin,e=process.stdout;break}else if(m==="--socket"){c=parseInt(d[p+1]);break}else if(m==="--pipe"){u=d[p+1];break}else{var o=m.split("=");if(o[0]==="--socket"){c=parseInt(o[1]);break}else if(o[0]==="--pipe"){u=o[1];break}}}if(c){let p=(0,OI.createServerSocketTransport)(c);t=p[0],e=p[1]}else if(u){let p=(0,OI.createServerPipeTransport)(u);t=p[0],e=p[1]}}var a="Use arguments of createConnection or set command line parameters: '--node-ipc', '--stdio' or '--socket={number}'";if(!t)throw new Error("Connection input stream is not set. "+a);if(!e)throw new Error("Connection output stream is not set. "+a);if(Yne.func(t.read)&&Yne.func(t.on)){let c=t;c.on("end",()=>{dO(),process.exit(KS?0:1)}),c.on("close",()=>{dO(),process.exit(KS?0:1)})}let l=s(c=>{let u=(0,OI.createProtocolConnection)(t,e,c,n);return i&&rpt(c),u},"connectionFactory");return(0,Xft.createConnection)(l,ept,r)}s(npt,"_createConnection");function rpt(t){function e(r){return r.map(i=>typeof i=="string"?i:(0,Wwe.inspect)(i)).join(" ")}s(e,"serialize");let n=new Map;console.assert=s(function(i,...o){if(!i)if(o.length===0)t.error("Assertion failed");else{let[a,...l]=o;t.error(`Assertion failed: ${a} ${e(l)}`)}},"assert"),console.count=s(function(i="default"){let o=String(i),a=n.get(o)??0;a+=1,n.set(o,a),t.log(`${o}: ${o}`)},"count"),console.countReset=s(function(i){i===void 0?n.clear():n.delete(String(i))},"countReset"),console.debug=s(function(...i){t.log(e(i))},"debug"),console.dir=s(function(i,o){t.log((0,Wwe.inspect)(i,o))},"dir"),console.log=s(function(...i){t.log(e(i))},"log"),console.error=s(function(...i){t.error(e(i))},"error"),console.trace=s(function(...i){let o=new Error().stack.replace(/(.+\n){2}/,""),a="Trace";i.length!==0&&(a+=`: ${e(i)}`),t.log(`${a}
${o}`)},"trace"),console.warn=s(function(...i){t.warn(e(i))},"warn")}s(rpt,"patchConsole")});var _m=H((P_n,$we)=>{"use strict";f();$we.exports=Za()});var O5e=H((O3n,Q5e)=>{"use strict";f();Q5e.exports=F5e;function F5e(t,e,n){t instanceof RegExp&&(t=L5e(t,n)),e instanceof RegExp&&(e=L5e(e,n));var r=M5e(t,e,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+t.length,r[1]),post:n.slice(r[1]+e.length)}}s(F5e,"balanced");function L5e(t,e){var n=e.match(t);return n?n[0]:null}s(L5e,"maybeMatch");F5e.range=M5e;function M5e(t,e,n){var r,i,o,a,l,c=n.indexOf(t),u=n.indexOf(e,c+1),d=c;if(c>=0&&u>0){if(t===e)return[c,u];for(r=[],o=n.length;d>=0&&!l;)d==c?(r.push(d),c=n.indexOf(t,d+1)):r.length==1?l=[r.pop(),u]:(i=r.pop(),i<o&&(o=i,a=u),u=n.indexOf(e,d+1)),d=c<u&&c>=0?c:u;r.length&&(l=[o,a])}return l}s(M5e,"range")});var $5e=H((W3n,V5e)=>{f();var U5e=O5e();V5e.exports=zpt;var q5e="\0SLASH"+Math.random()+"\0",W5e="\0OPEN"+Math.random()+"\0",Kre="\0CLOSE"+Math.random()+"\0",H5e="\0COMMA"+Math.random()+"\0",G5e="\0PERIOD"+Math.random()+"\0";function Yre(t){return parseInt(t,10)==t?parseInt(t,10):t.charCodeAt(0)}s(Yre,"numeric");function Vpt(t){return t.split("\\\\").join(q5e).split("\\{").join(W5e).split("\\}").join(Kre).split("\\,").join(H5e).split("\\.").join(G5e)}s(Vpt,"escapeBraces");function $pt(t){return t.split(q5e).join("\\").split(W5e).join("{").split(Kre).join("}").split(H5e).join(",").split(G5e).join(".")}s($pt,"unescapeBraces");function j5e(t){if(!t)return[""];var e=[],n=U5e("{","}",t);if(!n)return t.split(",");var r=n.pre,i=n.body,o=n.post,a=r.split(",");a[a.length-1]+="{"+i+"}";var l=j5e(o);return o.length&&(a[a.length-1]+=l.shift(),a.push.apply(a,l)),e.push.apply(e,a),e}s(j5e,"parseCommaParts");function zpt(t){return t?(t.substr(0,2)==="{}"&&(t="\\{\\}"+t.substr(2)),Z8(Vpt(t),!0).map($pt)):[]}s(zpt,"expandTop");function Ypt(t){return"{"+t+"}"}s(Ypt,"embrace");function Kpt(t){return/^-?0\d/.test(t)}s(Kpt,"isPadded");function Jpt(t,e){return t<=e}s(Jpt,"lte");function Xpt(t,e){return t>=e}s(Xpt,"gte");function Z8(t,e){var n=[],r=U5e("{","}",t);if(!r)return[t];var i=r.pre,o=r.post.length?Z8(r.post,!1):[""];if(/\$$/.test(r.pre))for(var a=0;a<o.length;a++){var l=i+"{"+r.body+"}"+o[a];n.push(l)}else{var c=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(r.body),u=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(r.body),d=c||u,p=r.body.indexOf(",")>=0;if(!d&&!p)return r.post.match(/,(?!,).*\}/)?(t=r.pre+"{"+r.body+Kre+r.post,Z8(t)):[t];var m;if(d)m=r.body.split(/\.\./);else if(m=j5e(r.body),m.length===1&&(m=Z8(m[0],!1).map(Ypt),m.length===1))return o.map(function(ae){return r.pre+m[0]+ae});var h;if(d){var g=Yre(m[0]),y=Yre(m[1]),v=Math.max(m[0].length,m[1].length),b=m.length==3?Math.abs(Yre(m[2])):1,E=Jpt,_=y<g;_&&(b*=-1,E=Xpt);var k=m.some(Kpt);h=[];for(var P=g;E(P,y);P+=b){var N;if(u)N=String.fromCharCode(P),N==="\\"&&(N="");else if(N=String(P),k){var U=v-N.length;if(U>0){var ne=new Array(U+1).join("0");P<0?N="-"+ne+N.slice(1):N=ne+N}}h.push(N)}}else{h=[];for(var he=0;he<m.length;he++)h.push.apply(h,Z8(m[he],!1))}for(var he=0;he<h.length;he++)for(var a=0;a<o.length;a++){var l=i+h[he]+o[a];(!e||d||l)&&n.push(l)}}return n}s(Z8,"expand")});var Qs=H((Njn,z3e)=>{f();z3e.exports={kClose:Symbol("close"),kDestroy:Symbol("destroy"),kDispatch:Symbol("dispatch"),kUrl:Symbol("url"),kWriting:Symbol("writing"),kResuming:Symbol("resuming"),kQueue:Symbol("queue"),kConnect:Symbol("connect"),kConnecting:Symbol("connecting"),kKeepAliveDefaultTimeout:Symbol("default keep alive timeout"),kKeepAliveMaxTimeout:Symbol("max keep alive timeout"),kKeepAliveTimeoutThreshold:Symbol("keep alive timeout threshold"),kKeepAliveTimeoutValue:Symbol("keep alive timeout"),kKeepAlive:Symbol("keep alive"),kHeadersTimeout:Symbol("headers timeout"),kBodyTimeout:Symbol("body timeout"),kServerName:Symbol("server name"),kLocalAddress:Symbol("local address"),kHost:Symbol("host"),kNoRef:Symbol("no ref"),kBodyUsed:Symbol("used"),kBody:Symbol("abstracted request body"),kRunning:Symbol("running"),kBlocking:Symbol("blocking"),kPending:Symbol("pending"),kSize:Symbol("size"),kBusy:Symbol("busy"),kQueued:Symbol("queued"),kFree:Symbol("free"),kConnected:Symbol("connected"),kClosed:Symbol("closed"),kNeedDrain:Symbol("need drain"),kReset:Symbol("reset"),kDestroyed:Symbol.for("nodejs.stream.destroyed"),kResume:Symbol("resume"),kOnError:Symbol("on error"),kMaxHeadersSize:Symbol("max headers size"),kRunningIdx:Symbol("running index"),kPendingIdx:Symbol("pending index"),kError:Symbol("error"),kClients:Symbol("clients"),kClient:Symbol("client"),kParser:Symbol("parser"),kOnDestroyed:Symbol("destroy callbacks"),kPipelining:Symbol("pipelining"),kSocket:Symbol("socket"),kHostHeader:Symbol("host header"),kConnector:Symbol("connector"),kStrictContentLength:Symbol("strict content length"),kMaxRedirections:Symbol("maxRedirections"),kMaxRequests:Symbol("maxRequestsPerClient"),kProxy:Symbol("proxy agent options"),kCounter:Symbol("socket request counter"),kInterceptors:Symbol("dispatch interceptors"),kMaxResponseSize:Symbol("max response size"),kHTTP2Session:Symbol("http2Session"),kHTTP2SessionState:Symbol("http2Session state"),kRetryHandlerDefaultRetry:Symbol("retry agent default retry"),kConstruct:Symbol("constructable"),kListeners:Symbol("listeners"),kHTTPContext:Symbol("http context"),kMaxConcurrentStreams:Symbol("max concurrent streams"),kNoProxyAgent:Symbol("no proxy agent"),kHttpProxyAgent:Symbol("http proxy agent"),kHttpsProxyAgent:Symbol("https proxy agent")}});var yo=H((Fjn,Y3e)=>{"use strict";f();var Zs=class extends Error{static{s(this,"UndiciError")}constructor(e){super(e),this.name="UndiciError",this.code="UND_ERR"}},Coe=class extends Zs{static{s(this,"ConnectTimeoutError")}constructor(e){super(e),this.name="ConnectTimeoutError",this.message=e||"Connect Timeout Error",this.code="UND_ERR_CONNECT_TIMEOUT"}},xoe=class extends Zs{static{s(this,"HeadersTimeoutError")}constructor(e){super(e),this.name="HeadersTimeoutError",this.message=e||"Headers Timeout Error",this.code="UND_ERR_HEADERS_TIMEOUT"}},voe=class extends Zs{static{s(this,"HeadersOverflowError")}constructor(e){super(e),this.name="HeadersOverflowError",this.message=e||"Headers Overflow Error",this.code="UND_ERR_HEADERS_OVERFLOW"}},boe=class extends Zs{static{s(this,"BodyTimeoutError")}constructor(e){super(e),this.name="BodyTimeoutError",this.message=e||"Body Timeout Error",this.code="UND_ERR_BODY_TIMEOUT"}},Eoe=class extends Zs{static{s(this,"ResponseStatusCodeError")}constructor(e,n,r,i){super(e),this.name="ResponseStatusCodeError",this.message=e||"Response Status Code Error",this.code="UND_ERR_RESPONSE_STATUS_CODE",this.body=i,this.status=n,this.statusCode=n,this.headers=r}},Ioe=class extends Zs{static{s(this,"InvalidArgumentError")}constructor(e){super(e),this.name="InvalidArgumentError",this.message=e||"Invalid Argument Error",this.code="UND_ERR_INVALID_ARG"}},Toe=class extends Zs{static{s(this,"InvalidReturnValueError")}constructor(e){super(e),this.name="InvalidReturnValueError",this.message=e||"Invalid Return Value Error",this.code="UND_ERR_INVALID_RETURN_VALUE"}},yq=class extends Zs{static{s(this,"AbortError")}constructor(e){super(e),this.name="AbortError",this.message=e||"The operation was aborted"}},woe=class extends yq{static{s(this,"RequestAbortedError")}constructor(e){super(e),this.name="AbortError",this.message=e||"Request aborted",this.code="UND_ERR_ABORTED"}},_oe=class extends Zs{static{s(this,"InformationalError")}constructor(e){super(e),this.name="InformationalError",this.message=e||"Request information",this.code="UND_ERR_INFO"}},Soe=class extends Zs{static{s(this,"RequestContentLengthMismatchError")}constructor(e){super(e),this.name="RequestContentLengthMismatchError",this.message=e||"Request body length does not match content-length header",this.code="UND_ERR_REQ_CONTENT_LENGTH_MISMATCH"}},Roe=class extends Zs{static{s(this,"ResponseContentLengthMismatchError")}constructor(e){super(e),this.name="ResponseContentLengthMismatchError",this.message=e||"Response body length does not match content-length header",this.code="UND_ERR_RES_CONTENT_LENGTH_MISMATCH"}},koe=class extends Zs{static{s(this,"ClientDestroyedError")}constructor(e){super(e),this.name="ClientDestroyedError",this.message=e||"The client is destroyed",this.code="UND_ERR_DESTROYED"}},Boe=class extends Zs{static{s(this,"ClientClosedError")}constructor(e){super(e),this.name="ClientClosedError",this.message=e||"The client is closed",this.code="UND_ERR_CLOSED"}},Poe=class extends Zs{static{s(this,"SocketError")}constructor(e,n){super(e),this.name="SocketError",this.message=e||"Socket error",this.code="UND_ERR_SOCKET",this.socket=n}},Doe=class extends Zs{static{s(this,"NotSupportedError")}constructor(e){super(e),this.name="NotSupportedError",this.message=e||"Not supported error",this.code="UND_ERR_NOT_SUPPORTED"}},Noe=class extends Zs{static{s(this,"BalancedPoolMissingUpstreamError")}constructor(e){super(e),this.name="MissingUpstreamError",this.message=e||"No upstream has been added to the BalancedPool",this.code="UND_ERR_BPL_MISSING_UPSTREAM"}},Loe=class extends Error{static{s(this,"HTTPParserError")}constructor(e,n,r){super(e),this.name="HTTPParserError",this.code=n?`HPE_${n}`:void 0,this.data=r?r.toString():void 0}},Foe=class extends Zs{static{s(this,"ResponseExceededMaxSizeError")}constructor(e){super(e),this.name="ResponseExceededMaxSizeError",this.message=e||"Response content exceeded max size",this.code="UND_ERR_RES_EXCEEDED_MAX_SIZE"}},Moe=class extends Zs{static{s(this,"RequestRetryError")}constructor(e,n,{headers:r,data:i}){super(e),this.name="RequestRetryError",this.message=e||"Request retry error",this.code="UND_ERR_REQ_RETRY",this.statusCode=n,this.data=i,this.headers=r}},Qoe=class extends Zs{static{s(this,"ResponseError")}constructor(e,n,{headers:r,data:i}){super(e),this.name="ResponseError",this.message=e||"Response error",this.code="UND_ERR_RESPONSE",this.statusCode=n,this.data=i,this.headers=r}},Ooe=class extends Zs{static{s(this,"SecureProxyConnectionError")}constructor(e,n,r){super(n,{cause:e,...r??{}}),this.name="SecureProxyConnectionError",this.message=n||"Secure Proxy Connection failed",this.code="UND_ERR_PRX_TLS",this.cause=e}};Y3e.exports={AbortError:yq,HTTPParserError:Loe,UndiciError:Zs,HeadersTimeoutError:xoe,HeadersOverflowError:voe,BodyTimeoutError:boe,RequestContentLengthMismatchError:Soe,ConnectTimeoutError:Coe,ResponseStatusCodeError:Eoe,InvalidArgumentError:Ioe,InvalidReturnValueError:Toe,RequestAbortedError:woe,ClientDestroyedError:koe,ClientClosedError:Boe,InformationalError:_oe,SocketError:Poe,NotSupportedError:Doe,ResponseContentLengthMismatchError:Roe,BalancedPoolMissingUpstreamError:Noe,ResponseExceededMaxSizeError:Foe,RequestRetryError:Moe,ResponseError:Qoe,SecureProxyConnectionError:Ooe}});var xq=H((Ojn,K3e)=>{"use strict";f();var Cq={},Uoe=["Accept","Accept-Encoding","Accept-Language","Accept-Ranges","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Age","Allow","Alt-Svc","Alt-Used","Authorization","Cache-Control","Clear-Site-Data","Connection","Content-Disposition","Content-Encoding","Content-Language","Content-Length","Content-Location","Content-Range","Content-Security-Policy","Content-Security-Policy-Report-Only","Content-Type","Cookie","Cross-Origin-Embedder-Policy","Cross-Origin-Opener-Policy","Cross-Origin-Resource-Policy","Date","Device-Memory","Downlink","ECT","ETag","Expect","Expect-CT","Expires","Forwarded","From","Host","If-Match","If-Modified-Since","If-None-Match","If-Range","If-Unmodified-Since","Keep-Alive","Last-Modified","Link","Location","Max-Forwards","Origin","Permissions-Policy","Pragma","Proxy-Authenticate","Proxy-Authorization","RTT","Range","Referer","Referrer-Policy","Refresh","Retry-After","Sec-WebSocket-Accept","Sec-WebSocket-Extensions","Sec-WebSocket-Key","Sec-WebSocket-Protocol","Sec-WebSocket-Version","Server","Server-Timing","Service-Worker-Allowed","Service-Worker-Navigation-Preload","Set-Cookie","SourceMap","Strict-Transport-Security","Supports-Loading-Mode","TE","Timing-Allow-Origin","Trailer","Transfer-Encoding","Upgrade","Upgrade-Insecure-Requests","User-Agent","Vary","Via","WWW-Authenticate","X-Content-Type-Options","X-DNS-Prefetch-Control","X-Frame-Options","X-Permitted-Cross-Domain-Policies","X-Powered-By","X-Requested-With","X-XSS-Protection"];for(let t=0;t<Uoe.length;++t){let e=Uoe[t],n=e.toLowerCase();Cq[e]=Cq[n]=n}Object.setPrototypeOf(Cq,null);K3e.exports={wellknownHeaderNames:Uoe,headerNameLowerCasedRecord:Cq}});var eke=H((qjn,Z3e)=>{"use strict";f();var{wellknownHeaderNames:J3e,headerNameLowerCasedRecord:TAt}=xq(),qoe=class t{static{s(this,"TstNode")}value=null;left=null;middle=null;right=null;code;constructor(e,n,r){if(r===void 0||r>=e.length)throw new TypeError("Unreachable");if((this.code=e.charCodeAt(r))>127)throw new TypeError("key must be ascii string");e.length!==++r?this.middle=new t(e,n,r):this.value=n}add(e,n){let r=e.length;if(r===0)throw new TypeError("Unreachable");let i=0,o=this;for(;;){let a=e.charCodeAt(i);if(a>127)throw new TypeError("key must be ascii string");if(o.code===a)if(r===++i){o.value=n;break}else if(o.middle!==null)o=o.middle;else{o.middle=new t(e,n,i);break}else if(o.code<a)if(o.left!==null)o=o.left;else{o.left=new t(e,n,i);break}else if(o.right!==null)o=o.right;else{o.right=new t(e,n,i);break}}}search(e){let n=e.length,r=0,i=this;for(;i!==null&&r<n;){let o=e[r];for(o<=90&&o>=65&&(o|=32);i!==null;){if(o===i.code){if(n===++r)return i;i=i.middle;break}i=i.code<o?i.left:i.right}}return null}},vq=class{static{s(this,"TernarySearchTree")}node=null;insert(e,n){this.node===null?this.node=new qoe(e,n,0):this.node.add(e,n)}lookup(e){return this.node?.search(e)?.value??null}},X3e=new vq;for(let t=0;t<J3e.length;++t){let e=TAt[J3e[t]];X3e.insert(e,e)}Z3e.exports={TernarySearchTree:vq,tree:X3e}});var yi=H((Gjn,gke)=>{"use strict";f();var TP=require("node:assert"),{kDestroyed:nke,kBodyUsed:W5,kListeners:Woe,kBody:tke}=Qs(),{IncomingMessage:wAt}=require("node:http"),Iq=require("node:stream"),_At=require("node:net"),{Blob:SAt}=require("node:buffer"),RAt=require("node:util"),{stringify:kAt}=require("node:querystring"),{EventEmitter:BAt}=require("node:events"),{InvalidArgumentError:Wl}=yo(),{headerNameLowerCasedRecord:PAt}=xq(),{tree:rke}=eke(),[DAt,NAt]=process.versions.node.split(".").map(t=>Number(t)),Eq=class{static{s(this,"BodyAsyncIterable")}constructor(e){this[tke]=e,this[W5]=!1}async*[Symbol.asyncIterator](){TP(!this[W5],"disturbed"),this[W5]=!0,yield*this[tke]}};function LAt(t){return Tq(t)?(lke(t)===0&&t.on("data",function(){TP(!1)}),typeof t.readableDidRead!="boolean"&&(t[W5]=!1,BAt.prototype.on.call(t,"data",function(){this[W5]=!0})),t):t&&typeof t.pipeTo=="function"?new Eq(t):t&&typeof t!="string"&&!ArrayBuffer.isView(t)&&ake(t)?new Eq(t):t}s(LAt,"wrapRequestBody");function FAt(){}s(FAt,"nop");function Tq(t){return t&&typeof t=="object"&&typeof t.pipe=="function"&&typeof t.on=="function"}s(Tq,"isStream");function ike(t){if(t===null)return!1;if(t instanceof SAt)return!0;if(typeof t!="object")return!1;{let e=t[Symbol.toStringTag];return(e==="Blob"||e==="File")&&("stream"in t&&typeof t.stream=="function"||"arrayBuffer"in t&&typeof t.arrayBuffer=="function")}}s(ike,"isBlobLike");function MAt(t,e){if(t.includes("?")||t.includes("#"))throw new Error('Query params cannot be passed when url already contains "?" or "#".');let n=kAt(e);return n&&(t+="?"+n),t}s(MAt,"buildURL");function oke(t){let e=parseInt(t,10);return e===Number(t)&&e>=0&&e<=65535}s(oke,"isValidPort");function bq(t){return t!=null&&t[0]==="h"&&t[1]==="t"&&t[2]==="t"&&t[3]==="p"&&(t[4]===":"||t[4]==="s"&&t[5]===":")}s(bq,"isHttpOrHttpsPrefixed");function ske(t){if(typeof t=="string"){if(t=new URL(t),!bq(t.origin||t.protocol))throw new Wl("Invalid URL protocol: the URL must start with `http:` or `https:`.");return t}if(!t||typeof t!="object")throw new Wl("Invalid URL: The URL argument must be a non-null object.");if(!(t instanceof URL)){if(t.port!=null&&t.port!==""&&oke(t.port)===!1)throw new Wl("Invalid URL: port must be a valid integer or a string representation of an integer.");if(t.path!=null&&typeof t.path!="string")throw new Wl("Invalid URL path: the path must be a string or null/undefined.");if(t.pathname!=null&&typeof t.pathname!="string")throw new Wl("Invalid URL pathname: the pathname must be a string or null/undefined.");if(t.hostname!=null&&typeof t.hostname!="string")throw new Wl("Invalid URL hostname: the hostname must be a string or null/undefined.");if(t.origin!=null&&typeof t.origin!="string")throw new Wl("Invalid URL origin: the origin must be a string or null/undefined.");if(!bq(t.origin||t.protocol))throw new Wl("Invalid URL protocol: the URL must start with `http:` or `https:`.");let e=t.port!=null?t.port:t.protocol==="https:"?443:80,n=t.origin!=null?t.origin:`${t.protocol||""}//${t.hostname||""}:${e}`,r=t.path!=null?t.path:`${t.pathname||""}${t.search||""}`;return n[n.length-1]==="/"&&(n=n.slice(0,n.length-1)),r&&r[0]!=="/"&&(r=`/${r}`),new URL(`${n}${r}`)}if(!bq(t.origin||t.protocol))throw new Wl("Invalid URL protocol: the URL must start with `http:` or `https:`.");return t}s(ske,"parseURL");function QAt(t){if(t=ske(t),t.pathname!=="/"||t.search||t.hash)throw new Wl("invalid url");return t}s(QAt,"parseOrigin");function OAt(t){if(t[0]==="["){let n=t.indexOf("]");return TP(n!==-1),t.substring(1,n)}let e=t.indexOf(":");return e===-1?t:t.substring(0,e)}s(OAt,"getHostname");function UAt(t){if(!t)return null;TP(typeof t=="string");let e=OAt(t);return _At.isIP(e)?"":e}s(UAt,"getServerName");function qAt(t){return JSON.parse(JSON.stringify(t))}s(qAt,"deepClone");function WAt(t){return t!=null&&typeof t[Symbol.asyncIterator]=="function"}s(WAt,"isAsyncIterable");function ake(t){return t!=null&&(typeof t[Symbol.iterator]=="function"||typeof t[Symbol.asyncIterator]=="function")}s(ake,"isIterable");function lke(t){if(t==null)return 0;if(Tq(t)){let e=t._readableState;return e&&e.objectMode===!1&&e.ended===!0&&Number.isFinite(e.length)?e.length:null}else{if(ike(t))return t.size!=null?t.size:null;if(dke(t))return t.byteLength}return null}s(lke,"bodyLength");function cke(t){return t&&!!(t.destroyed||t[nke]||Iq.isDestroyed?.(t))}s(cke,"isDestroyed");function HAt(t,e){t==null||!Tq(t)||cke(t)||(typeof t.destroy=="function"?(Object.getPrototypeOf(t).constructor===wAt&&(t.socket=null),t.destroy(e)):e&&queueMicrotask(()=>{t.emit("error",e)}),t.destroyed!==!0&&(t[nke]=!0))}s(HAt,"destroy");var GAt=/timeout=(\d+)/;function jAt(t){let e=t.toString().match(GAt);return e?parseInt(e[1],10)*1e3:null}s(jAt,"parseKeepAliveTimeout");function uke(t){return typeof t=="string"?PAt[t]??t.toLowerCase():rke.lookup(t)??t.toString("latin1").toLowerCase()}s(uke,"headerNameToString");function VAt(t){return rke.lookup(t)??t.toString("latin1").toLowerCase()}s(VAt,"bufferToLowerCasedHeaderName");function $At(t,e){e===void 0&&(e={});for(let n=0;n<t.length;n+=2){let r=uke(t[n]),i=e[r];if(i)typeof i=="string"&&(i=[i],e[r]=i),i.push(t[n+1].toString("utf8"));else{let o=t[n+1];typeof o=="string"?e[r]=o:e[r]=Array.isArray(o)?o.map(a=>a.toString("utf8")):o.toString("utf8")}}return"content-length"in e&&"content-disposition"in e&&(e["content-disposition"]=Buffer.from(e["content-disposition"]).toString("latin1")),e}s($At,"parseHeaders");function zAt(t){let e=t.length,n=new Array(e),r=!1,i=-1,o,a,l=0;for(let c=0;c<t.length;c+=2)o=t[c],a=t[c+1],typeof o!="string"&&(o=o.toString()),typeof a!="string"&&(a=a.toString("utf8")),l=o.length,l===14&&o[7]==="-"&&(o==="content-length"||o.toLowerCase()==="content-length")?r=!0:l===19&&o[7]==="-"&&(o==="content-disposition"||o.toLowerCase()==="content-disposition")&&(i=c+1),n[c]=o,n[c+1]=a;return r&&i!==-1&&(n[i]=Buffer.from(n[i]).toString("latin1")),n}s(zAt,"parseRawHeaders");function dke(t){return t instanceof Uint8Array||Buffer.isBuffer(t)}s(dke,"isBuffer");function YAt(t,e,n){if(!t||typeof t!="object")throw new Wl("handler must be an object");if(typeof t.onConnect!="function")throw new Wl("invalid onConnect method");if(typeof t.onError!="function")throw new Wl("invalid onError method");if(typeof t.onBodySent!="function"&&t.onBodySent!==void 0)throw new Wl("invalid onBodySent method");if(n||e==="CONNECT"){if(typeof t.onUpgrade!="function")throw new Wl("invalid onUpgrade method")}else{if(typeof t.onHeaders!="function")throw new Wl("invalid onHeaders method");if(typeof t.onData!="function")throw new Wl("invalid onData method");if(typeof t.onComplete!="function")throw new Wl("invalid onComplete method")}}s(YAt,"validateHandler");function KAt(t){return!!(t&&(Iq.isDisturbed(t)||t[W5]))}s(KAt,"isDisturbed");function JAt(t){return!!(t&&Iq.isErrored(t))}s(JAt,"isErrored");function XAt(t){return!!(t&&Iq.isReadable(t))}s(XAt,"isReadable");function ZAt(t){return{localAddress:t.localAddress,localPort:t.localPort,remoteAddress:t.remoteAddress,remotePort:t.remotePort,remoteFamily:t.remoteFamily,timeout:t.timeout,bytesWritten:t.bytesWritten,bytesRead:t.bytesRead}}s(ZAt,"getSocketInfo");function e1t(t){let e;return new ReadableStream({async start(){e=t[Symbol.asyncIterator]()},async pull(n){let{done:r,value:i}=await e.next();if(r)queueMicrotask(()=>{n.close(),n.byobRequest?.respond(0)});else{let o=Buffer.isBuffer(i)?i:Buffer.from(i);o.byteLength&&n.enqueue(new Uint8Array(o))}return n.desiredSize>0},async cancel(n){await e.return()},type:"bytes"})}s(e1t,"ReadableStreamFrom");function t1t(t){return t&&typeof t=="object"&&typeof t.append=="function"&&typeof t.delete=="function"&&typeof t.get=="function"&&typeof t.getAll=="function"&&typeof t.has=="function"&&typeof t.set=="function"&&t[Symbol.toStringTag]==="FormData"}s(t1t,"isFormDataLike");function n1t(t,e){return"addEventListener"in t?(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)):(t.addListener("abort",e),()=>t.removeListener("abort",e))}s(n1t,"addAbortListener");var r1t=typeof String.prototype.toWellFormed=="function",i1t=typeof String.prototype.isWellFormed=="function";function fke(t){return r1t?`${t}`.toWellFormed():RAt.toUSVString(t)}s(fke,"toUSVString");function o1t(t){return i1t?`${t}`.isWellFormed():fke(t)===`${t}`}s(o1t,"isUSVString");function pke(t){switch(t){case 34:case 40:case 41:case 44:case 47:case 58:case 59:case 60:case 61:case 62:case 63:case 64:case 91:case 92:case 93:case 123:case 125:return!1;default:return t>=33&&t<=126}}s(pke,"isTokenCharCode");function s1t(t){if(t.length===0)return!1;for(let e=0;e<t.length;++e)if(!pke(t.charCodeAt(e)))return!1;return!0}s(s1t,"isValidHTTPToken");var a1t=/[^\t\x20-\x7e\x80-\xff]/;function l1t(t){return!a1t.test(t)}s(l1t,"isValidHeaderValue");function c1t(t){if(t==null||t==="")return{start:0,end:null,size:null};let e=t?t.match(/^bytes (\d+)-(\d+)\/(\d+)?$/):null;return e?{start:parseInt(e[1]),end:e[2]?parseInt(e[2]):null,size:e[3]?parseInt(e[3]):null}:null}s(c1t,"parseRangeHeader");function u1t(t,e,n){return(t[Woe]??=[]).push([e,n]),t.on(e,n),t}s(u1t,"addListener");function d1t(t){for(let[e,n]of t[Woe]??[])t.removeListener(e,n);t[Woe]=null}s(d1t,"removeAllListeners");function f1t(t,e,n){try{e.onError(n),TP(e.aborted)}catch(r){t.emit("error",r)}}s(f1t,"errorRequest");var mke=Object.create(null);mke.enumerable=!0;var Hoe={delete:"DELETE",DELETE:"DELETE",get:"GET",GET:"GET",head:"HEAD",HEAD:"HEAD",options:"OPTIONS",OPTIONS:"OPTIONS",post:"POST",POST:"POST",put:"PUT",PUT:"PUT"},hke={...Hoe,patch:"patch",PATCH:"PATCH"};Object.setPrototypeOf(Hoe,null);Object.setPrototypeOf(hke,null);gke.exports={kEnumerableProperty:mke,nop:FAt,isDisturbed:KAt,isErrored:JAt,isReadable:XAt,toUSVString:fke,isUSVString:o1t,isBlobLike:ike,parseOrigin:QAt,parseURL:ske,getServerName:UAt,isStream:Tq,isIterable:ake,isAsyncIterable:WAt,isDestroyed:cke,headerNameToString:uke,bufferToLowerCasedHeaderName:VAt,addListener:u1t,removeAllListeners:d1t,errorRequest:f1t,parseRawHeaders:zAt,parseHeaders:$At,parseKeepAliveTimeout:jAt,destroy:HAt,bodyLength:lke,deepClone:qAt,ReadableStreamFrom:e1t,isBuffer:dke,validateHandler:YAt,getSocketInfo:ZAt,isFormDataLike:t1t,buildURL:MAt,addAbortListener:n1t,isValidHTTPToken:s1t,isValidHeaderValue:l1t,isTokenCharCode:pke,parseRangeHeader:c1t,normalizedMethodRecordsBase:Hoe,normalizedMethodRecords:hke,isValidPort:oke,isHttpOrHttpsPrefixed:bq,nodeMajor:DAt,nodeMinor:NAt,safeHTTPMethods:["GET","HEAD","OPTIONS","TRACE"],wrapRequestBody:LAt}});var H5=H(($jn,yke)=>{"use strict";f();var bo=require("node:diagnostics_channel"),joe=require("node:util"),wq=joe.debuglog("undici"),Goe=joe.debuglog("fetch"),C2=joe.debuglog("websocket"),Ake=!1,p1t={beforeConnect:bo.channel("undici:client:beforeConnect"),connected:bo.channel("undici:client:connected"),connectError:bo.channel("undici:client:connectError"),sendHeaders:bo.channel("undici:client:sendHeaders"),create:bo.channel("undici:request:create"),bodySent:bo.channel("undici:request:bodySent"),headers:bo.channel("undici:request:headers"),trailers:bo.channel("undici:request:trailers"),error:bo.channel("undici:request:error"),open:bo.channel("undici:websocket:open"),close:bo.channel("undici:websocket:close"),socketError:bo.channel("undici:websocket:socket_error"),ping:bo.channel("undici:websocket:ping"),pong:bo.channel("undici:websocket:pong")};if(wq.enabled||Goe.enabled){let t=Goe.enabled?Goe:wq;bo.channel("undici:client:beforeConnect").subscribe(e=>{let{connectParams:{version:n,protocol:r,port:i,host:o}}=e;t("connecting to %s using %s%s",`${o}${i?`:${i}`:""}`,r,n)}),bo.channel("undici:client:connected").subscribe(e=>{let{connectParams:{version:n,protocol:r,port:i,host:o}}=e;t("connected to %s using %s%s",`${o}${i?`:${i}`:""}`,r,n)}),bo.channel("undici:client:connectError").subscribe(e=>{let{connectParams:{version:n,protocol:r,port:i,host:o},error:a}=e;t("connection to %s using %s%s errored - %s",`${o}${i?`:${i}`:""}`,r,n,a.message)}),bo.channel("undici:client:sendHeaders").subscribe(e=>{let{request:{method:n,path:r,origin:i}}=e;t("sending request to %s %s/%s",n,i,r)}),bo.channel("undici:request:headers").subscribe(e=>{let{request:{method:n,path:r,origin:i},response:{statusCode:o}}=e;t("received response to %s %s/%s - HTTP %d",n,i,r,o)}),bo.channel("undici:request:trailers").subscribe(e=>{let{request:{method:n,path:r,origin:i}}=e;t("trailers received from %s %s/%s",n,i,r)}),bo.channel("undici:request:error").subscribe(e=>{let{request:{method:n,path:r,origin:i},error:o}=e;t("request to %s %s/%s errored - %s",n,i,r,o.message)}),Ake=!0}if(C2.enabled){if(!Ake){let t=wq.enabled?wq:C2;bo.channel("undici:client:beforeConnect").subscribe(e=>{let{connectParams:{version:n,protocol:r,port:i,host:o}}=e;t("connecting to %s%s using %s%s",o,i?`:${i}`:"",r,n)}),bo.channel("undici:client:connected").subscribe(e=>{let{connectParams:{version:n,protocol:r,port:i,host:o}}=e;t("connected to %s%s using %s%s",o,i?`:${i}`:"",r,n)}),bo.channel("undici:client:connectError").subscribe(e=>{let{connectParams:{version:n,protocol:r,port:i,host:o},error:a}=e;t("connection to %s%s using %s%s errored - %s",o,i?`:${i}`:"",r,n,a.message)}),bo.channel("undici:client:sendHeaders").subscribe(e=>{let{request:{method:n,path:r,origin:i}}=e;t("sending request to %s %s/%s",n,i,r)})}bo.channel("undici:websocket:open").subscribe(t=>{let{address:{address:e,port:n}}=t;C2("connection opened %s%s",e,n?`:${n}`:"")}),bo.channel("undici:websocket:close").subscribe(t=>{let{websocket:e,code:n,reason:r}=t;C2("closed connection to %s - %s %s",e.url,n,r)}),bo.channel("undici:websocket:socket_error").subscribe(t=>{C2("connection errored - %s",t.message)}),bo.channel("undici:websocket:ping").subscribe(t=>{C2("ping received")}),bo.channel("undici:websocket:pong").subscribe(t=>{C2("pong received")})}yke.exports={channels:p1t}});var Eke=H((Yjn,bke)=>{"use strict";f();var{InvalidArgumentError:ea,NotSupportedError:m1t}=yo(),z1=require("node:assert"),{isValidHTTPToken:vke,isValidHeaderValue:Cke,isStream:h1t,destroy:g1t,isBuffer:A1t,isFormDataLike:y1t,isIterable:C1t,isBlobLike:x1t,buildURL:v1t,validateHandler:b1t,getServerName:E1t,normalizedMethodRecords:I1t}=yi(),{channels:Dg}=H5(),{headerNameLowerCasedRecord:xke}=xq(),T1t=/[^\u0021-\u00ff]/,tp=Symbol("handler"),Voe=class{static{s(this,"Request")}constructor(e,{path:n,method:r,body:i,headers:o,query:a,idempotent:l,blocking:c,upgrade:u,headersTimeout:d,bodyTimeout:p,reset:m,throwOnError:h,expectContinue:g,servername:y},v){if(typeof n!="string")throw new ea("path must be a string");if(n[0]!=="/"&&!(n.startsWith("http://")||n.startsWith("https://"))&&r!=="CONNECT")throw new ea("path must be an absolute URL or start with a slash");if(T1t.test(n))throw new ea("invalid request path");if(typeof r!="string")throw new ea("method must be a string");if(I1t[r]===void 0&&!vke(r))throw new ea("invalid request method");if(u&&typeof u!="string")throw new ea("upgrade must be a string");if(d!=null&&(!Number.isFinite(d)||d<0))throw new ea("invalid headersTimeout");if(p!=null&&(!Number.isFinite(p)||p<0))throw new ea("invalid bodyTimeout");if(m!=null&&typeof m!="boolean")throw new ea("invalid reset");if(g!=null&&typeof g!="boolean")throw new ea("invalid expectContinue");if(this.headersTimeout=d,this.bodyTimeout=p,this.throwOnError=h===!0,this.method=r,this.abort=null,i==null)this.body=null;else if(h1t(i)){this.body=i;let b=this.body._readableState;(!b||!b.autoDestroy)&&(this.endHandler=s(function(){g1t(this)},"autoDestroy"),this.body.on("end",this.endHandler)),this.errorHandler=E=>{this.abort?this.abort(E):this.error=E},this.body.on("error",this.errorHandler)}else if(A1t(i))this.body=i.byteLength?i:null;else if(ArrayBuffer.isView(i))this.body=i.buffer.byteLength?Buffer.from(i.buffer,i.byteOffset,i.byteLength):null;else if(i instanceof ArrayBuffer)this.body=i.byteLength?Buffer.from(i):null;else if(typeof i=="string")this.body=i.length?Buffer.from(i):null;else if(y1t(i)||C1t(i)||x1t(i))this.body=i;else throw new ea("body must be a string, a Buffer, a Readable stream, an iterable, or an async iterable");if(this.completed=!1,this.aborted=!1,this.upgrade=u||null,this.path=a?v1t(n,a):n,this.origin=e,this.idempotent=l??(r==="HEAD"||r==="GET"),this.blocking=c??!1,this.reset=m??null,this.host=null,this.contentLength=null,this.contentType=null,this.headers=[],this.expectContinue=g??!1,Array.isArray(o)){if(o.length%2!==0)throw new ea("headers array must be even");for(let b=0;b<o.length;b+=2)_q(this,o[b],o[b+1])}else if(o&&typeof o=="object")if(o[Symbol.iterator])for(let b of o){if(!Array.isArray(b)||b.length!==2)throw new ea("headers must be in key-value pair format");_q(this,b[0],b[1])}else{let b=Object.keys(o);for(let E=0;E<b.length;++E)_q(this,b[E],o[b[E]])}else if(o!=null)throw new ea("headers must be an object or an array");b1t(v,r,u),this.servername=y||E1t(this.host),this[tp]=v,Dg.create.hasSubscribers&&Dg.create.publish({request:this})}onBodySent(e){if(this[tp].onBodySent)try{return this[tp].onBodySent(e)}catch(n){this.abort(n)}}onRequestSent(){if(Dg.bodySent.hasSubscribers&&Dg.bodySent.publish({request:this}),this[tp].onRequestSent)try{return this[tp].onRequestSent()}catch(e){this.abort(e)}}onConnect(e){if(z1(!this.aborted),z1(!this.completed),this.error)e(this.error);else return this.abort=e,this[tp].onConnect(e)}onResponseStarted(){return this[tp].onResponseStarted?.()}onHeaders(e,n,r,i){z1(!this.aborted),z1(!this.completed),Dg.headers.hasSubscribers&&Dg.headers.publish({request:this,response:{statusCode:e,headers:n,statusText:i}});try{return this[tp].onHeaders(e,n,r,i)}catch(o){this.abort(o)}}onData(e){z1(!this.aborted),z1(!this.completed);try{return this[tp].onData(e)}catch(n){return this.abort(n),!1}}onUpgrade(e,n,r){return z1(!this.aborted),z1(!this.completed),this[tp].onUpgrade(e,n,r)}onComplete(e){this.onFinally(),z1(!this.aborted),this.completed=!0,Dg.trailers.hasSubscribers&&Dg.trailers.publish({request:this,trailers:e});try{return this[tp].onComplete(e)}catch(n){this.onError(n)}}onError(e){if(this.onFinally(),Dg.error.hasSubscribers&&Dg.error.publish({request:this,error:e}),!this.aborted)return this.aborted=!0,this[tp].onError(e)}onFinally(){this.errorHandler&&(this.body.off("error",this.errorHandler),this.errorHandler=null),this.endHandler&&(this.body.off("end",this.endHandler),this.endHandler=null)}addHeader(e,n){return _q(this,e,n),this}};function _q(t,e,n){if(n&&typeof n=="object"&&!Array.isArray(n))throw new ea(`invalid ${e} header`);if(n===void 0)return;let r=xke[e];if(r===void 0&&(r=e.toLowerCase(),xke[r]===void 0&&!vke(r)))throw new ea("invalid header key");if(Array.isArray(n)){let i=[];for(let o=0;o<n.length;o++)if(typeof n[o]=="string"){if(!Cke(n[o]))throw new ea(`invalid ${e} header`);i.push(n[o])}else if(n[o]===null)i.push("");else{if(typeof n[o]=="object")throw new ea(`invalid ${e} header`);i.push(`${n[o]}`)}n=i}else if(typeof n=="string"){if(!Cke(n))throw new ea(`invalid ${e} header`)}else n===null?n="":n=`${n}`;if(t.host===null&&r==="host"){if(typeof n!="string")throw new ea("invalid host header");t.host=n}else if(t.contentLength===null&&r==="content-length"){if(t.contentLength=parseInt(n,10),!Number.isFinite(t.contentLength))throw new ea("invalid content-length header")}else if(t.contentType===null&&r==="content-type")t.contentType=n,t.headers.push(e,n);else{if(r==="transfer-encoding"||r==="keep-alive"||r==="upgrade")throw new ea(`invalid ${r} header`);if(r==="connection"){let i=typeof n=="string"?n.toLowerCase():null;if(i!=="close"&&i!=="keep-alive")throw new ea("invalid connection header");i==="close"&&(t.reset=!0)}else{if(r==="expect")throw new m1t("expect header not supported");t.headers.push(e,n)}}}s(_q,"processHeader");bke.exports=Voe});var wP=H((Xjn,Ike)=>{"use strict";f();var w1t=require("node:events"),Sq=class extends w1t{static{s(this,"Dispatcher")}dispatch(){throw new Error("not implemented")}close(){throw new Error("not implemented")}destroy(){throw new Error("not implemented")}compose(...e){let n=Array.isArray(e[0])?e[0]:e,r=this.dispatch.bind(this);for(let i of n)if(i!=null){if(typeof i!="function")throw new TypeError(`invalid interceptor, expected function received ${typeof i}`);if(r=i(r),r==null||typeof r!="function"||r.length!==2)throw new TypeError("invalid interceptor")}return new $oe(this,r)}},$oe=class extends Sq{static{s(this,"ComposedDispatcher")}#e=null;#t=null;constructor(e,n){super(),this.#e=e,this.#t=n}dispatch(...e){this.#t(...e)}close(...e){return this.#e.close(...e)}destroy(...e){return this.#e.destroy(...e)}};Ike.exports=Sq});var $5=H((tVn,Tke)=>{"use strict";f();var _1t=wP(),{ClientDestroyedError:zoe,ClientClosedError:S1t,InvalidArgumentError:G5}=yo(),{kDestroy:R1t,kClose:k1t,kClosed:_P,kDestroyed:j5,kDispatch:Yoe,kInterceptors:x2}=Qs(),Y1=Symbol("onDestroyed"),V5=Symbol("onClosed"),Rq=Symbol("Intercepted Dispatch"),Koe=class extends _1t{static{s(this,"DispatcherBase")}constructor(){super(),this[j5]=!1,this[Y1]=null,this[_P]=!1,this[V5]=[]}get destroyed(){return this[j5]}get closed(){return this[_P]}get interceptors(){return this[x2]}set interceptors(e){if(e){for(let n=e.length-1;n>=0;n--)if(typeof this[x2][n]!="function")throw new G5("interceptor must be an function")}this[x2]=e}close(e){if(e===void 0)return new Promise((r,i)=>{this.close((o,a)=>o?i(o):r(a))});if(typeof e!="function")throw new G5("invalid callback");if(this[j5]){queueMicrotask(()=>e(new zoe,null));return}if(this[_P]){this[V5]?this[V5].push(e):queueMicrotask(()=>e(null,null));return}this[_P]=!0,this[V5].push(e);let n=s(()=>{let r=this[V5];this[V5]=null;for(let i=0;i<r.length;i++)r[i](null,null)},"onClosed");this[k1t]().then(()=>this.destroy()).then(()=>{queueMicrotask(n)})}destroy(e,n){if(typeof e=="function"&&(n=e,e=null),n===void 0)return new Promise((i,o)=>{this.destroy(e,(a,l)=>a?o(a):i(l))});if(typeof n!="function")throw new G5("invalid callback");if(this[j5]){this[Y1]?this[Y1].push(n):queueMicrotask(()=>n(null,null));return}e||(e=new zoe),this[j5]=!0,this[Y1]=this[Y1]||[],this[Y1].push(n);let r=s(()=>{let i=this[Y1];this[Y1]=null;for(let o=0;o<i.length;o++)i[o](null,null)},"onDestroyed");this[R1t](e).then(()=>{queueMicrotask(r)})}[Rq](e,n){if(!this[x2]||this[x2].length===0)return this[Rq]=this[Yoe],this[Yoe](e,n);let r=this[Yoe].bind(this);for(let i=this[x2].length-1;i>=0;i--)r=this[x2][i](r);return this[Rq]=r,r(e,n)}dispatch(e,n){if(!n||typeof n!="object")throw new G5("handler must be an object");try{if(!e||typeof e!="object")throw new G5("opts must be an object.");if(this[j5]||this[Y1])throw new zoe;if(this[_P])throw new S1t;return this[Rq](e,n)}catch(r){if(typeof n.onError!="function")throw new G5("invalid onError method");return n.onError(r),!1}}};Tke.exports=Koe});var rse=H((iVn,Rke)=>{"use strict";f();var z5=0,Joe=1e3,Xoe=(Joe>>1)-1,K1,Zoe=Symbol("kFastTimer"),J1=[],ese=-2,tse=-1,_ke=0,wke=1;function nse(){z5+=Xoe;let t=0,e=J1.length;for(;t<e;){let n=J1[t];n._state===_ke?(n._idleStart=z5-Xoe,n._state=wke):n._state===wke&&z5>=n._idleStart+n._idleTimeout&&(n._state=tse,n._idleStart=-1,n._onTimeout(n._timerArg)),n._state===tse?(n._state=ese,--e!==0&&(J1[t]=J1[e])):++t}J1.length=e,J1.length!==0&&Ske()}s(nse,"onTick");function Ske(){K1?K1.refresh():(clearTimeout(K1),K1=setTimeout(nse,Xoe),K1.unref&&K1.unref())}s(Ske,"refreshTimeout");var kq=class{static{s(this,"FastTimer")}[Zoe]=!0;_state=ese;_idleTimeout=-1;_idleStart=-1;_onTimeout;_timerArg;constructor(e,n,r){this._onTimeout=e,this._idleTimeout=n,this._timerArg=r,this.refresh()}refresh(){this._state===ese&&J1.push(this),(!K1||J1.length===1)&&Ske(),this._state=_ke}clear(){this._state=tse,this._idleStart=-1}};Rke.exports={setTimeout(t,e,n){return e<=Joe?setTimeout(t,e,n):new kq(t,e,n)},clearTimeout(t){t[Zoe]?t.clear():clearTimeout(t)},setFastTimeout(t,e,n){return new kq(t,e,n)},clearFastTimeout(t){t.clear()},now(){return z5},tick(t=0){z5+=t-Joe+1,nse(),nse()},reset(){z5=0,J1.length=0,clearTimeout(K1),K1=null},kFastTimer:Zoe}});var SP=H((cVn,Nke)=>{"use strict";f();var B1t=require("node:net"),kke=require("node:assert"),Dke=yi(),{InvalidArgumentError:P1t,ConnectTimeoutError:D1t}=yo(),Bq=rse();function Bke(){}s(Bke,"noop");var ise,ose;global.FinalizationRegistry&&!(process.env.NODE_V8_COVERAGE||process.env.UNDICI_NO_FG)?ose=class{static{s(this,"WeakSessionCache")}constructor(e){this._maxCachedSessions=e,this._sessionCache=new Map,this._sessionRegistry=new global.FinalizationRegistry(n=>{if(this._sessionCache.size<this._maxCachedSessions)return;let r=this._sessionCache.get(n);r!==void 0&&r.deref()===void 0&&this._sessionCache.delete(n)})}get(e){let n=this._sessionCache.get(e);return n?n.deref():null}set(e,n){this._maxCachedSessions!==0&&(this._sessionCache.set(e,new WeakRef(n)),this._sessionRegistry.register(n,e))}}:ose=class{static{s(this,"SimpleSessionCache")}constructor(e){this._maxCachedSessions=e,this._sessionCache=new Map}get(e){return this._sessionCache.get(e)}set(e,n){if(this._maxCachedSessions!==0){if(this._sessionCache.size>=this._maxCachedSessions){let{value:r}=this._sessionCache.keys().next();this._sessionCache.delete(r)}this._sessionCache.set(e,n)}}};function N1t({allowH2:t,maxCachedSessions:e,socketPath:n,timeout:r,session:i,...o}){if(e!=null&&(!Number.isInteger(e)||e<0))throw new P1t("maxCachedSessions must be a positive integer or zero");let a={path:n,...o},l=new ose(e??100);return r=r??1e4,t=t??!1,s(function({hostname:u,host:d,protocol:p,port:m,servername:h,localAddress:g,httpSocket:y},v){let b;if(p==="https:"){ise||(ise=require("node:tls")),h=h||a.servername||Dke.getServerName(d)||null;let _=h||u;kke(_);let k=i||l.get(_)||null;m=m||443,b=ise.connect({highWaterMark:16384,...a,servername:h,session:k,localAddress:g,ALPNProtocols:t?["http/1.1","h2"]:["http/1.1"],socket:y,port:m,host:u}),b.on("session",function(P){l.set(_,P)})}else kke(!y,"httpSocket can only be sent on TLS update"),m=m||80,b=B1t.connect({highWaterMark:64*1024,...a,localAddress:g,port:m,host:u});if(a.keepAlive==null||a.keepAlive){let _=a.keepAliveInitialDelay===void 0?6e4:a.keepAliveInitialDelay;b.setKeepAlive(!0,_)}let E=L1t(new WeakRef(b),{timeout:r,hostname:u,port:m});return b.setNoDelay(!0).once(p==="https:"?"secureConnect":"connect",function(){if(queueMicrotask(E),v){let _=v;v=null,_(null,this)}}).on("error",function(_){if(queueMicrotask(E),v){let k=v;v=null,k(_)}}),b},"connect")}s(N1t,"buildConnector");var L1t=process.platform==="win32"?(t,e)=>{if(!e.timeout)return Bke;let n=null,r=null,i=Bq.setFastTimeout(()=>{n=setImmediate(()=>{r=setImmediate(()=>Pke(t.deref(),e))})},e.timeout);return()=>{Bq.clearFastTimeout(i),clearImmediate(n),clearImmediate(r)}}:(t,e)=>{if(!e.timeout)return Bke;let n=null,r=Bq.setFastTimeout(()=>{n=setImmediate(()=>{Pke(t.deref(),e)})},e.timeout);return()=>{Bq.clearFastTimeout(r),clearImmediate(n)}};function Pke(t,e){if(t==null)return;let n="Connect Timeout Error";Array.isArray(t.autoSelectFamilyAttemptedAddresses)?n+=` (attempted addresses: ${t.autoSelectFamilyAttemptedAddresses.join(", ")},`:n+=` (attempted address: ${e.hostname}:${e.port},`,n+=` timeout: ${e.timeout}ms)`,Dke.destroy(t,new D1t(n))}s(Pke,"onConnectTimeout");Nke.exports=N1t});var Lke=H(Pq=>{"use strict";f();Object.defineProperty(Pq,"__esModule",{value:!0});Pq.enumToMap=void 0;function F1t(t){let e={};return Object.keys(t).forEach(n=>{let r=t[n];typeof r=="number"&&(e[n]=r)}),e}s(F1t,"enumToMap");Pq.enumToMap=F1t});var Fke=H(Ut=>{"use strict";f();Object.defineProperty(Ut,"__esModule",{value:!0});Ut.SPECIAL_HEADERS=Ut.HEADER_STATE=Ut.MINOR=Ut.MAJOR=Ut.CONNECTION_TOKEN_CHARS=Ut.HEADER_CHARS=Ut.TOKEN=Ut.STRICT_TOKEN=Ut.HEX=Ut.URL_CHAR=Ut.STRICT_URL_CHAR=Ut.USERINFO_CHARS=Ut.MARK=Ut.ALPHANUM=Ut.NUM=Ut.HEX_MAP=Ut.NUM_MAP=Ut.ALPHA=Ut.FINISH=Ut.H_METHOD_MAP=Ut.METHOD_MAP=Ut.METHODS_RTSP=Ut.METHODS_ICE=Ut.METHODS_HTTP=Ut.METHODS=Ut.LENIENT_FLAGS=Ut.FLAGS=Ut.TYPE=Ut.ERROR=void 0;var M1t=Lke(),Q1t;(function(t){t[t.OK=0]="OK",t[t.INTERNAL=1]="INTERNAL",t[t.STRICT=2]="STRICT",t[t.LF_EXPECTED=3]="LF_EXPECTED",t[t.UNEXPECTED_CONTENT_LENGTH=4]="UNEXPECTED_CONTENT_LENGTH",t[t.CLOSED_CONNECTION=5]="CLOSED_CONNECTION",t[t.INVALID_METHOD=6]="INVALID_METHOD",t[t.INVALID_URL=7]="INVALID_URL",t[t.INVALID_CONSTANT=8]="INVALID_CONSTANT",t[t.INVALID_VERSION=9]="INVALID_VERSION",t[t.INVALID_HEADER_TOKEN=10]="INVALID_HEADER_TOKEN",t[t.INVALID_CONTENT_LENGTH=11]="INVALID_CONTENT_LENGTH",t[t.INVALID_CHUNK_SIZE=12]="INVALID_CHUNK_SIZE",t[t.INVALID_STATUS=13]="INVALID_STATUS",t[t.INVALID_EOF_STATE=14]="INVALID_EOF_STATE",t[t.INVALID_TRANSFER_ENCODING=15]="INVALID_TRANSFER_ENCODING",t[t.CB_MESSAGE_BEGIN=16]="CB_MESSAGE_BEGIN",t[t.CB_HEADERS_COMPLETE=17]="CB_HEADERS_COMPLETE",t[t.CB_MESSAGE_COMPLETE=18]="CB_MESSAGE_COMPLETE",t[t.CB_CHUNK_HEADER=19]="CB_CHUNK_HEADER",t[t.CB_CHUNK_COMPLETE=20]="CB_CHUNK_COMPLETE",t[t.PAUSED=21]="PAUSED",t[t.PAUSED_UPGRADE=22]="PAUSED_UPGRADE",t[t.PAUSED_H2_UPGRADE=23]="PAUSED_H2_UPGRADE",t[t.USER=24]="USER"})(Q1t=Ut.ERROR||(Ut.ERROR={}));var O1t;(function(t){t[t.BOTH=0]="BOTH",t[t.REQUEST=1]="REQUEST",t[t.RESPONSE=2]="RESPONSE"})(O1t=Ut.TYPE||(Ut.TYPE={}));var U1t;(function(t){t[t.CONNECTION_KEEP_ALIVE=1]="CONNECTION_KEEP_ALIVE",t[t.CONNECTION_CLOSE=2]="CONNECTION_CLOSE",t[t.CONNECTION_UPGRADE=4]="CONNECTION_UPGRADE",t[t.CHUNKED=8]="CHUNKED",t[t.UPGRADE=16]="UPGRADE",t[t.CONTENT_LENGTH=32]="CONTENT_LENGTH",t[t.SKIPBODY=64]="SKIPBODY",t[t.TRAILING=128]="TRAILING",t[t.TRANSFER_ENCODING=512]="TRANSFER_ENCODING"})(U1t=Ut.FLAGS||(Ut.FLAGS={}));var q1t;(function(t){t[t.HEADERS=1]="HEADERS",t[t.CHUNKED_LENGTH=2]="CHUNKED_LENGTH",t[t.KEEP_ALIVE=4]="KEEP_ALIVE"})(q1t=Ut.LENIENT_FLAGS||(Ut.LENIENT_FLAGS={}));var ar;(function(t){t[t.DELETE=0]="DELETE",t[t.GET=1]="GET",t[t.HEAD=2]="HEAD",t[t.POST=3]="POST",t[t.PUT=4]="PUT",t[t.CONNECT=5]="CONNECT",t[t.OPTIONS=6]="OPTIONS",t[t.TRACE=7]="TRACE",t[t.COPY=8]="COPY",t[t.LOCK=9]="LOCK",t[t.MKCOL=10]="MKCOL",t[t.MOVE=11]="MOVE",t[t.PROPFIND=12]="PROPFIND",t[t.PROPPATCH=13]="PROPPATCH",t[t.SEARCH=14]="SEARCH",t[t.UNLOCK=15]="UNLOCK",t[t.BIND=16]="BIND",t[t.REBIND=17]="REBIND",t[t.UNBIND=18]="UNBIND",t[t.ACL=19]="ACL",t[t.REPORT=20]="REPORT",t[t.MKACTIVITY=21]="MKACTIVITY",t[t.CHECKOUT=22]="CHECKOUT",t[t.MERGE=23]="MERGE",t[t["M-SEARCH"]=24]="M-SEARCH",t[t.NOTIFY=25]="NOTIFY",t[t.SUBSCRIBE=26]="SUBSCRIBE",t[t.UNSUBSCRIBE=27]="UNSUBSCRIBE",t[t.PATCH=28]="PATCH",t[t.PURGE=29]="PURGE",t[t.MKCALENDAR=30]="MKCALENDAR",t[t.LINK=31]="LINK",t[t.UNLINK=32]="UNLINK",t[t.SOURCE=33]="SOURCE",t[t.PRI=34]="PRI",t[t.DESCRIBE=35]="DESCRIBE",t[t.ANNOUNCE=36]="ANNOUNCE",t[t.SETUP=37]="SETUP",t[t.PLAY=38]="PLAY",t[t.PAUSE=39]="PAUSE",t[t.TEARDOWN=40]="TEARDOWN",t[t.GET_PARAMETER=41]="GET_PARAMETER",t[t.SET_PARAMETER=42]="SET_PARAMETER",t[t.REDIRECT=43]="REDIRECT",t[t.RECORD=44]="RECORD",t[t.FLUSH=45]="FLUSH"})(ar=Ut.METHODS||(Ut.METHODS={}));Ut.METHODS_HTTP=[ar.DELETE,ar.GET,ar.HEAD,ar.POST,ar.PUT,ar.CONNECT,ar.OPTIONS,ar.TRACE,ar.COPY,ar.LOCK,ar.MKCOL,ar.MOVE,ar.PROPFIND,ar.PROPPATCH,ar.SEARCH,ar.UNLOCK,ar.BIND,ar.REBIND,ar.UNBIND,ar.ACL,ar.REPORT,ar.MKACTIVITY,ar.CHECKOUT,ar.MERGE,ar["M-SEARCH"],ar.NOTIFY,ar.SUBSCRIBE,ar.UNSUBSCRIBE,ar.PATCH,ar.PURGE,ar.MKCALENDAR,ar.LINK,ar.UNLINK,ar.PRI,ar.SOURCE];Ut.METHODS_ICE=[ar.SOURCE];Ut.METHODS_RTSP=[ar.OPTIONS,ar.DESCRIBE,ar.ANNOUNCE,ar.SETUP,ar.PLAY,ar.PAUSE,ar.TEARDOWN,ar.GET_PARAMETER,ar.SET_PARAMETER,ar.REDIRECT,ar.RECORD,ar.FLUSH,ar.GET,ar.POST];Ut.METHOD_MAP=M1t.enumToMap(ar);Ut.H_METHOD_MAP={};Object.keys(Ut.METHOD_MAP).forEach(t=>{/^H/.test(t)&&(Ut.H_METHOD_MAP[t]=Ut.METHOD_MAP[t])});var W1t;(function(t){t[t.SAFE=0]="SAFE",t[t.SAFE_WITH_CB=1]="SAFE_WITH_CB",t[t.UNSAFE=2]="UNSAFE"})(W1t=Ut.FINISH||(Ut.FINISH={}));Ut.ALPHA=[];for(let t=65;t<=90;t++)Ut.ALPHA.push(String.fromCharCode(t)),Ut.ALPHA.push(String.fromCharCode(t+32));Ut.NUM_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9};Ut.HEX_MAP={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15};Ut.NUM=["0","1","2","3","4","5","6","7","8","9"];Ut.ALPHANUM=Ut.ALPHA.concat(Ut.NUM);Ut.MARK=["-","_",".","!","~","*","'","(",")"];Ut.USERINFO_CHARS=Ut.ALPHANUM.concat(Ut.MARK).concat(["%",";",":","&","=","+","$",","]);Ut.STRICT_URL_CHAR=["!",'"',"$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","@","[","\\","]","^","_","`","{","|","}","~"].concat(Ut.ALPHANUM);Ut.URL_CHAR=Ut.STRICT_URL_CHAR.concat(["	","\f"]);for(let t=128;t<=255;t++)Ut.URL_CHAR.push(t);Ut.HEX=Ut.NUM.concat(["a","b","c","d","e","f","A","B","C","D","E","F"]);Ut.STRICT_TOKEN=["!","#","$","%","&","'","*","+","-",".","^","_","`","|","~"].concat(Ut.ALPHANUM);Ut.TOKEN=Ut.STRICT_TOKEN.concat([" "]);Ut.HEADER_CHARS=["	"];for(let t=32;t<=255;t++)t!==127&&Ut.HEADER_CHARS.push(t);Ut.CONNECTION_TOKEN_CHARS=Ut.HEADER_CHARS.filter(t=>t!==44);Ut.MAJOR=Ut.NUM_MAP;Ut.MINOR=Ut.MAJOR;var Y5;(function(t){t[t.GENERAL=0]="GENERAL",t[t.CONNECTION=1]="CONNECTION",t[t.CONTENT_LENGTH=2]="CONTENT_LENGTH",t[t.TRANSFER_ENCODING=3]="TRANSFER_ENCODING",t[t.UPGRADE=4]="UPGRADE",t[t.CONNECTION_KEEP_ALIVE=5]="CONNECTION_KEEP_ALIVE",t[t.CONNECTION_CLOSE=6]="CONNECTION_CLOSE",t[t.CONNECTION_UPGRADE=7]="CONNECTION_UPGRADE",t[t.TRANSFER_ENCODING_CHUNKED=8]="TRANSFER_ENCODING_CHUNKED"})(Y5=Ut.HEADER_STATE||(Ut.HEADER_STATE={}));Ut.SPECIAL_HEADERS={connection:Y5.CONNECTION,"content-length":Y5.CONTENT_LENGTH,"proxy-connection":Y5.CONNECTION,"transfer-encoding":Y5.TRANSFER_ENCODING,upgrade:Y5.UPGRADE}});var sse=H((AVn,Mke)=>{"use strict";f();var{Buffer:H1t}=require("node:buffer");Mke.exports=H1t.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVuaWVudF9oZWFkZXJzACEhbGxodHRwX3NldF9sZW5pZW50X2NodW5rZWRfbGVuZ3RoACIdbGxodHRwX3NldF9sZW5pZW50X2tlZXBfYWxpdmUAIyRsbGh0dHBfc2V0X2xlbmllbnRfdHJhbnNmZXJfZW5jb2RpbmcAJBhsbGh0dHBfbWVzc2FnZV9uZWVkc19lb2YALgkXAQBBAQsRAQIDBAUKBgcrLSwqKSglJyYK07MCLBYAQYjQACgCAARAAAtBiNAAQQE2AgALFAAgABAwIAAgAjYCOCAAIAE6ACgLFAAgACAALwEyIAAtAC4gABAvEAALHgEBf0HAABAyIgEQMCABQYAINgI4IAEgADoAKCABC48MAQd/AkAgAEUNACAAQQhrIgEgAEEEaygCACIAQXhxIgRqIQUCQCAAQQFxDQAgAEEDcUUNASABIAEoAgAiAGsiAUGc0AAoAgBJDQEgACAEaiEEAkACQEGg0AAoAgAgAUcEQCAAQf8BTQRAIABBA3YhAyABKAIIIgAgASgCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBQsgAiAANgIIIAAgAjYCDAwECyABKAIYIQYgASABKAIMIgBHBEAgACABKAIIIgI2AgggAiAANgIMDAMLIAFBFGoiAygCACICRQRAIAEoAhAiAkUNAiABQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFKAIEIgBBA3FBA0cNAiAFIABBfnE2AgRBlNAAIAQ2AgAgBSAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCABKAIcIgJBAnRBvNIAaiIDKAIAIAFGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgAUYbaiAANgIAIABFDQELIAAgBjYCGCABKAIQIgIEQCAAIAI2AhAgAiAANgIYCyABQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAFTw0AIAUoAgQiAEEBcUUNAAJAAkACQAJAIABBAnFFBEBBpNAAKAIAIAVGBEBBpNAAIAE2AgBBmNAAQZjQACgCACAEaiIANgIAIAEgAEEBcjYCBCABQaDQACgCAEcNBkGU0ABBADYCAEGg0ABBADYCAAwGC0Gg0AAoAgAgBUYEQEGg0AAgATYCAEGU0ABBlNAAKAIAIARqIgA2AgAgASAAQQFyNgIEIAAgAWogADYCAAwGCyAAQXhxIARqIQQgAEH/AU0EQCAAQQN2IQMgBSgCCCIAIAUoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAULIAIgADYCCCAAIAI2AgwMBAsgBSgCGCEGIAUgBSgCDCIARwRAQZzQACgCABogACAFKAIIIgI2AgggAiAANgIMDAMLIAVBFGoiAygCACICRQRAIAUoAhAiAkUNAiAFQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFIABBfnE2AgQgASAEaiAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCAFKAIcIgJBAnRBvNIAaiIDKAIAIAVGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiAANgIAIABFDQELIAAgBjYCGCAFKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAFQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAEaiAENgIAIAEgBEEBcjYCBCABQaDQACgCAEcNAEGU0AAgBDYCAAwBCyAEQf8BTQRAIARBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASAEQQN2dCIDcUUEQEGM0AAgAiADcjYCACAADAELIAAoAggLIgIgATYCDCAAIAE2AgggASAANgIMIAEgAjYCCAwBC0EfIQIgBEH///8HTQRAIARBJiAEQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAgsgASACNgIcIAFCADcCECACQQJ0QbzSAGohAAJAQZDQACgCACIDQQEgAnQiB3FFBEAgACABNgIAQZDQACADIAdyNgIAIAEgADYCGCABIAE2AgggASABNgIMDAELIARBGSACQQF2a0EAIAJBH0cbdCECIAAoAgAhAAJAA0AgACIDKAIEQXhxIARGDQEgAkEddiEAIAJBAXQhAiADIABBBHFqQRBqIgcoAgAiAA0ACyAHIAE2AgAgASADNgIYIAEgATYCDCABIAE2AggMAQsgAygCCCIAIAE2AgwgAyABNgIIIAFBADYCGCABIAM2AgwgASAANgIIC0Gs0ABBrNAAKAIAQQFrIgBBfyAAGzYCAAsLBwAgAC0AKAsHACAALQAqCwcAIAAtACsLBwAgAC0AKQsHACAALwEyCwcAIAAtAC4LQAEEfyAAKAIYIQEgAC0ALSECIAAtACghAyAAKAI4IQQgABAwIAAgBDYCOCAAIAM6ACggACACOgAtIAAgATYCGAu74gECB38DfiABIAJqIQQCQCAAIgIoAgwiAA0AIAIoAgQEQCACIAE2AgQLIwBBEGsiCCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAhwiA0EBaw7dAdoBAdkBAgMEBQYHCAkKCwwNDtgBDxDXARES1gETFBUWFxgZGhvgAd8BHB0e1QEfICEiIyQl1AEmJygpKiss0wHSAS0u0QHQAS8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRtsBR0hJSs8BzgFLzQFMzAFNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AAYEBggGDAYQBhQGGAYcBiAGJAYoBiwGMAY0BjgGPAZABkQGSAZMBlAGVAZYBlwGYAZkBmgGbAZwBnQGeAZ8BoAGhAaIBowGkAaUBpgGnAagBqQGqAasBrAGtAa4BrwGwAbEBsgGzAbQBtQG2AbcBywHKAbgByQG5AcgBugG7AbwBvQG+Ab8BwAHBAcIBwwHEAcUBxgEA3AELQQAMxgELQQ4MxQELQQ0MxAELQQ8MwwELQRAMwgELQRMMwQELQRQMwAELQRUMvwELQRYMvgELQRgMvQELQRkMvAELQRoMuwELQRsMugELQRwMuQELQR0MuAELQQgMtwELQR4MtgELQSAMtQELQR8MtAELQQcMswELQSEMsgELQSIMsQELQSMMsAELQSQMrwELQRIMrgELQREMrQELQSUMrAELQSYMqwELQScMqgELQSgMqQELQcMBDKgBC0EqDKcBC0ErDKYBC0EsDKUBC0EtDKQBC0EuDKMBC0EvDKIBC0HEAQyhAQtBMAygAQtBNAyfAQtBDAyeAQtBMQydAQtBMgycAQtBMwybAQtBOQyaAQtBNQyZAQtBxQEMmAELQQsMlwELQToMlgELQTYMlQELQQoMlAELQTcMkwELQTgMkgELQTwMkQELQTsMkAELQT0MjwELQQkMjgELQSkMjQELQT4MjAELQT8MiwELQcAADIoBC0HBAAyJAQtBwgAMiAELQcMADIcBC0HEAAyGAQtBxQAMhQELQcYADIQBC0EXDIMBC0HHAAyCAQtByAAMgQELQckADIABC0HKAAx/C0HLAAx+C0HNAAx9C0HMAAx8C0HOAAx7C0HPAAx6C0HQAAx5C0HRAAx4C0HSAAx3C0HTAAx2C0HUAAx1C0HWAAx0C0HVAAxzC0EGDHILQdcADHELQQUMcAtB2AAMbwtBBAxuC0HZAAxtC0HaAAxsC0HbAAxrC0HcAAxqC0EDDGkLQd0ADGgLQd4ADGcLQd8ADGYLQeEADGULQeAADGQLQeIADGMLQeMADGILQQIMYQtB5AAMYAtB5QAMXwtB5gAMXgtB5wAMXQtB6AAMXAtB6QAMWwtB6gAMWgtB6wAMWQtB7AAMWAtB7QAMVwtB7gAMVgtB7wAMVQtB8AAMVAtB8QAMUwtB8gAMUgtB8wAMUQtB9AAMUAtB9QAMTwtB9gAMTgtB9wAMTQtB+AAMTAtB+QAMSwtB+gAMSgtB+wAMSQtB/AAMSAtB/QAMRwtB/gAMRgtB/wAMRQtBgAEMRAtBgQEMQwtBggEMQgtBgwEMQQtBhAEMQAtBhQEMPwtBhgEMPgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCADDsYBAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHyAhIyUmKCorLC8wMTIzNDU2Nzk6Ozw9lANAQkRFRklLTk9QUVJTVFVWWFpbXF1eX2BhYmNkZWZnaGpsb3Bxc3V2eHl6e3x/gAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcsBzAHNAc4BzwGKA4kDiAOHA4QDgwOAA/sC+gL5AvgC9wL0AvMC8gLLAsECsALZAQsgASAERw3wAkHdASEDDLMDCyABIARHDcgBQcMBIQMMsgMLIAEgBEcNe0H3ACEDDLEDCyABIARHDXBB7wAhAwywAwsgASAERw1pQeoAIQMMrwMLIAEgBEcNZUHoACEDDK4DCyABIARHDWJB5gAhAwytAwsgASAERw0aQRghAwysAwsgASAERw0VQRIhAwyrAwsgASAERw1CQcUAIQMMqgMLIAEgBEcNNEE/IQMMqQMLIAEgBEcNMkE8IQMMqAMLIAEgBEcNK0ExIQMMpwMLIAItAC5BAUYNnwMMwQILQQAhAAJAAkACQCACLQAqRQ0AIAItACtFDQAgAi8BMCIDQQJxRQ0BDAILIAIvATAiA0EBcUUNAQtBASEAIAItAChBAUYNACACLwEyIgVB5ABrQeQASQ0AIAVBzAFGDQAgBUGwAkYNACADQcAAcQ0AQQAhACADQYgEcUGABEYNACADQShxQQBHIQALIAJBADsBMCACQQA6AC8gAEUN3wIgAkIANwMgDOACC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAARQ3MASAAQRVHDd0CIAJBBDYCHCACIAE2AhQgAkGwGDYCECACQRU2AgxBACEDDKQDCyABIARGBEBBBiEDDKQDCyABQQFqIQFBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAA3ZAgwcCyACQgA3AyBBEiEDDIkDCyABIARHDRZBHSEDDKEDCyABIARHBEAgAUEBaiEBQRAhAwyIAwtBByEDDKADCyACIAIpAyAiCiAEIAFrrSILfSIMQgAgCiAMWhs3AyAgCiALWA3UAkEIIQMMnwMLIAEgBEcEQCACQQk2AgggAiABNgIEQRQhAwyGAwtBCSEDDJ4DCyACKQMgQgBSDccBIAIgAi8BMEGAAXI7ATAMQgsgASAERw0/QdAAIQMMnAMLIAEgBEYEQEELIQMMnAMLIAFBAWohAUEAIQACQCACKAI4IgNFDQAgAygCUCIDRQ0AIAIgAxEAACEACyAADc8CDMYBC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ3GASAAQRVHDc0CIAJBCzYCHCACIAE2AhQgAkGCGTYCECACQRU2AgxBACEDDJoDC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ0MIABBFUcNygIgAkEaNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMmQMLQQAhAAJAIAIoAjgiA0UNACADKAJMIgNFDQAgAiADEQAAIQALIABFDcQBIABBFUcNxwIgAkELNgIcIAIgATYCFCACQZEXNgIQIAJBFTYCDEEAIQMMmAMLIAEgBEYEQEEPIQMMmAMLIAEtAAAiAEE7Rg0HIABBDUcNxAIgAUEBaiEBDMMBC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3DASAAQRVHDcICIAJBDzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJYDCwNAIAEtAABB8DVqLQAAIgBBAUcEQCAAQQJHDcECIAIoAgQhAEEAIQMgAkEANgIEIAIgACABQQFqIgEQLSIADcICDMUBCyAEIAFBAWoiAUcNAAtBEiEDDJUDC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3FASAAQRVHDb0CIAJBGzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJQDCyABIARGBEBBFiEDDJQDCyACQQo2AgggAiABNgIEQQAhAAJAIAIoAjgiA0UNACADKAJIIgNFDQAgAiADEQAAIQALIABFDcIBIABBFUcNuQIgAkEVNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMkwMLIAEgBEcEQANAIAEtAABB8DdqLQAAIgBBAkcEQAJAIABBAWsOBMQCvQIAvgK9AgsgAUEBaiEBQQghAwz8AgsgBCABQQFqIgFHDQALQRUhAwyTAwtBFSEDDJIDCwNAIAEtAABB8DlqLQAAIgBBAkcEQCAAQQFrDgTFArcCwwK4ArcCCyAEIAFBAWoiAUcNAAtBGCEDDJEDCyABIARHBEAgAkELNgIIIAIgATYCBEEHIQMM+AILQRkhAwyQAwsgAUEBaiEBDAILIAEgBEYEQEEaIQMMjwMLAkAgAS0AAEENaw4UtQG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwEAvwELQQAhAyACQQA2AhwgAkGvCzYCECACQQI2AgwgAiABQQFqNgIUDI4DCyABIARGBEBBGyEDDI4DCyABLQAAIgBBO0cEQCAAQQ1HDbECIAFBAWohAQy6AQsgAUEBaiEBC0EiIQMM8wILIAEgBEYEQEEcIQMMjAMLQgAhCgJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAS0AAEEwaw43wQLAAgABAgMEBQYH0AHQAdAB0AHQAdAB0AEICQoLDA3QAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdABDg8QERIT0AELQgIhCgzAAgtCAyEKDL8CC0IEIQoMvgILQgUhCgy9AgtCBiEKDLwCC0IHIQoMuwILQgghCgy6AgtCCSEKDLkCC0IKIQoMuAILQgshCgy3AgtCDCEKDLYCC0INIQoMtQILQg4hCgy0AgtCDyEKDLMCC0IKIQoMsgILQgshCgyxAgtCDCEKDLACC0INIQoMrwILQg4hCgyuAgtCDyEKDK0CC0IAIQoCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAEtAABBMGsON8ACvwIAAQIDBAUGB74CvgK+Ar4CvgK+Ar4CCAkKCwwNvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ag4PEBESE74CC0ICIQoMvwILQgMhCgy+AgtCBCEKDL0CC0IFIQoMvAILQgYhCgy7AgtCByEKDLoCC0IIIQoMuQILQgkhCgy4AgtCCiEKDLcCC0ILIQoMtgILQgwhCgy1AgtCDSEKDLQCC0IOIQoMswILQg8hCgyyAgtCCiEKDLECC0ILIQoMsAILQgwhCgyvAgtCDSEKDK4CC0IOIQoMrQILQg8hCgysAgsgAiACKQMgIgogBCABa60iC30iDEIAIAogDFobNwMgIAogC1gNpwJBHyEDDIkDCyABIARHBEAgAkEJNgIIIAIgATYCBEElIQMM8AILQSAhAwyIAwtBASEFIAIvATAiA0EIcUUEQCACKQMgQgBSIQULAkAgAi0ALgRAQQEhACACLQApQQVGDQEgA0HAAHFFIAVxRQ0BC0EAIQAgA0HAAHENAEECIQAgA0EIcQ0AIANBgARxBEACQCACLQAoQQFHDQAgAi0ALUEKcQ0AQQUhAAwCC0EEIQAMAQsgA0EgcUUEQAJAIAItAChBAUYNACACLwEyIgBB5ABrQeQASQ0AIABBzAFGDQAgAEGwAkYNAEEEIQAgA0EocUUNAiADQYgEcUGABEYNAgtBACEADAELQQBBAyACKQMgUBshAAsgAEEBaw4FvgIAsAEBpAKhAgtBESEDDO0CCyACQQE6AC8MhAMLIAEgBEcNnQJBJCEDDIQDCyABIARHDRxBxgAhAwyDAwtBACEAAkAgAigCOCIDRQ0AIAMoAkQiA0UNACACIAMRAAAhAAsgAEUNJyAAQRVHDZgCIAJB0AA2AhwgAiABNgIUIAJBkRg2AhAgAkEVNgIMQQAhAwyCAwsgASAERgRAQSghAwyCAwtBACEDIAJBADYCBCACQQw2AgggAiABIAEQKiIARQ2UAiACQSc2AhwgAiABNgIUIAIgADYCDAyBAwsgASAERgRAQSkhAwyBAwsgAS0AACIAQSBGDRMgAEEJRw2VAiABQQFqIQEMFAsgASAERwRAIAFBAWohAQwWC0EqIQMM/wILIAEgBEYEQEErIQMM/wILIAEtAAAiAEEJRyAAQSBHcQ2QAiACLQAsQQhHDd0CIAJBADoALAzdAgsgASAERgRAQSwhAwz+AgsgAS0AAEEKRw2OAiABQQFqIQEMsAELIAEgBEcNigJBLyEDDPwCCwNAIAEtAAAiAEEgRwRAIABBCmsOBIQCiAKIAoQChgILIAQgAUEBaiIBRw0AC0ExIQMM+wILQTIhAyABIARGDfoCIAIoAgAiACAEIAFraiEHIAEgAGtBA2ohBgJAA0AgAEHwO2otAAAgAS0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDQEgAEEDRgRAQQYhAQziAgsgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAc2AgAM+wILIAJBADYCAAyGAgtBMyEDIAQgASIARg35AiAEIAFrIAIoAgAiAWohByAAIAFrQQhqIQYCQANAIAFB9DtqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBCEYEQEEFIQEM4QILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPoCCyACQQA2AgAgACEBDIUCC0E0IQMgBCABIgBGDfgCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgJAA0AgAUHQwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBBUYEQEEHIQEM4AILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPkCCyACQQA2AgAgACEBDIQCCyABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRg0JDIECCyAEIAFBAWoiAUcNAAtBMCEDDPgCC0EwIQMM9wILIAEgBEcEQANAIAEtAAAiAEEgRwRAIABBCmsOBP8B/gH+Af8B/gELIAQgAUEBaiIBRw0AC0E4IQMM9wILQTghAwz2AgsDQCABLQAAIgBBIEcgAEEJR3EN9gEgBCABQQFqIgFHDQALQTwhAwz1AgsDQCABLQAAIgBBIEcEQAJAIABBCmsOBPkBBAT5AQALIABBLEYN9QEMAwsgBCABQQFqIgFHDQALQT8hAwz0AgtBwAAhAyABIARGDfMCIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAEGAQGstAAAgAS0AAEEgckcNASAAQQZGDdsCIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPQCCyACQQA2AgALQTYhAwzZAgsgASAERgRAQcEAIQMM8gILIAJBDDYCCCACIAE2AgQgAi0ALEEBaw4E+wHuAewB6wHUAgsgAUEBaiEBDPoBCyABIARHBEADQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxIgBBCUYNACAAQSBGDQACQAJAAkACQCAAQeMAaw4TAAMDAwMDAwMBAwMDAwMDAwMDAgMLIAFBAWohAUExIQMM3AILIAFBAWohAUEyIQMM2wILIAFBAWohAUEzIQMM2gILDP4BCyAEIAFBAWoiAUcNAAtBNSEDDPACC0E1IQMM7wILIAEgBEcEQANAIAEtAABBgDxqLQAAQQFHDfcBIAQgAUEBaiIBRw0AC0E9IQMM7wILQT0hAwzuAgtBACEAAkAgAigCOCIDRQ0AIAMoAkAiA0UNACACIAMRAAAhAAsgAEUNASAAQRVHDeYBIAJBwgA2AhwgAiABNgIUIAJB4xg2AhAgAkEVNgIMQQAhAwztAgsgAUEBaiEBC0E8IQMM0gILIAEgBEYEQEHCACEDDOsCCwJAA0ACQCABLQAAQQlrDhgAAswCzALRAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAgDMAgsgBCABQQFqIgFHDQALQcIAIQMM6wILIAFBAWohASACLQAtQQFxRQ3+AQtBLCEDDNACCyABIARHDd4BQcQAIQMM6AILA0AgAS0AAEGQwABqLQAAQQFHDZwBIAQgAUEBaiIBRw0AC0HFACEDDOcCCyABLQAAIgBBIEYN/gEgAEE6Rw3AAiACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgAN3gEM3QELQccAIQMgBCABIgBGDeUCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFBkMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvwIgAUEFRg3CAiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzlAgtByAAhAyAEIAEiAEYN5AIgBCABayACKAIAIgFqIQcgACABa0EJaiEGA0AgAUGWwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw2+AkECIAFBCUYNwgIaIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOQCCyABIARGBEBByQAhAwzkAgsCQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxQe4Aaw4HAL8CvwK/Ar8CvwIBvwILIAFBAWohAUE+IQMMywILIAFBAWohAUE/IQMMygILQcoAIQMgBCABIgBGDeICIAQgAWsgAigCACIBaiEGIAAgAWtBAWohBwNAIAFBoMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvAIgAUEBRg2+AiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBjYCAAziAgtBywAhAyAEIAEiAEYN4QIgBCABayACKAIAIgFqIQcgACABa0EOaiEGA0AgAUGiwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw27AiABQQ5GDb4CIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOECC0HMACEDIAQgASIARg3gAiAEIAFrIAIoAgAiAWohByAAIAFrQQ9qIQYDQCABQcDCAGotAAAgAC0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDboCQQMgAUEPRg2+AhogAUEBaiEBIAQgAEEBaiIARw0ACyACIAc2AgAM4AILQc0AIQMgBCABIgBGDd8CIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFB0MIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNuQJBBCABQQVGDb0CGiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzfAgsgASAERgRAQc4AIQMM3wILAkACQAJAAkAgAS0AACIAQSByIAAgAEHBAGtB/wFxQRpJG0H/AXFB4wBrDhMAvAK8ArwCvAK8ArwCvAK8ArwCvAK8ArwCAbwCvAK8AgIDvAILIAFBAWohAUHBACEDDMgCCyABQQFqIQFBwgAhAwzHAgsgAUEBaiEBQcMAIQMMxgILIAFBAWohAUHEACEDDMUCCyABIARHBEAgAkENNgIIIAIgATYCBEHFACEDDMUCC0HPACEDDN0CCwJAAkAgAS0AAEEKaw4EAZABkAEAkAELIAFBAWohAQtBKCEDDMMCCyABIARGBEBB0QAhAwzcAgsgAS0AAEEgRw0AIAFBAWohASACLQAtQQFxRQ3QAQtBFyEDDMECCyABIARHDcsBQdIAIQMM2QILQdMAIQMgASAERg3YAiACKAIAIgAgBCABa2ohBiABIABrQQFqIQUDQCABLQAAIABB1sIAai0AAEcNxwEgAEEBRg3KASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBjYCAAzYAgsgASAERgRAQdUAIQMM2AILIAEtAABBCkcNwgEgAUEBaiEBDMoBCyABIARGBEBB1gAhAwzXAgsCQAJAIAEtAABBCmsOBADDAcMBAcMBCyABQQFqIQEMygELIAFBAWohAUHKACEDDL0CC0EAIQACQCACKAI4IgNFDQAgAygCPCIDRQ0AIAIgAxEAACEACyAADb8BQc0AIQMMvAILIAItAClBIkYNzwIMiQELIAQgASIFRgRAQdsAIQMM1AILQQAhAEEBIQFBASEGQQAhAwJAAn8CQAJAAkACQAJAAkACQCAFLQAAQTBrDgrFAcQBAAECAwQFBgjDAQtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshA0EAIQFBACEGDL0BC0EJIQNBASEAQQAhAUEAIQYMvAELIAEgBEYEQEHdACEDDNMCCyABLQAAQS5HDbgBIAFBAWohAQyIAQsgASAERw22AUHfACEDDNECCyABIARHBEAgAkEONgIIIAIgATYCBEHQACEDDLgCC0HgACEDDNACC0HhACEDIAEgBEYNzwIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGA0AgAS0AACAAQeLCAGotAABHDbEBIABBA0YNswEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMzwILQeIAIQMgASAERg3OAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYDQCABLQAAIABB5sIAai0AAEcNsAEgAEECRg2vASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAzOAgtB4wAhAyABIARGDc0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgNAIAEtAAAgAEHpwgBqLQAARw2vASAAQQNGDa0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADM0CCyABIARGBEBB5QAhAwzNAgsgAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANqgFB1gAhAwyzAgsgASAERwRAA0AgAS0AACIAQSBHBEACQAJAAkAgAEHIAGsOCwABswGzAbMBswGzAbMBswGzAQKzAQsgAUEBaiEBQdIAIQMMtwILIAFBAWohAUHTACEDDLYCCyABQQFqIQFB1AAhAwy1AgsgBCABQQFqIgFHDQALQeQAIQMMzAILQeQAIQMMywILA0AgAS0AAEHwwgBqLQAAIgBBAUcEQCAAQQJrDgOnAaYBpQGkAQsgBCABQQFqIgFHDQALQeYAIQMMygILIAFBAWogASAERw0CGkHnACEDDMkCCwNAIAEtAABB8MQAai0AACIAQQFHBEACQCAAQQJrDgSiAaEBoAEAnwELQdcAIQMMsQILIAQgAUEBaiIBRw0AC0HoACEDDMgCCyABIARGBEBB6QAhAwzIAgsCQCABLQAAIgBBCmsOGrcBmwGbAbQBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBpAGbAZsBAJkBCyABQQFqCyEBQQYhAwytAgsDQCABLQAAQfDGAGotAABBAUcNfSAEIAFBAWoiAUcNAAtB6gAhAwzFAgsgAUEBaiABIARHDQIaQesAIQMMxAILIAEgBEYEQEHsACEDDMQCCyABQQFqDAELIAEgBEYEQEHtACEDDMMCCyABQQFqCyEBQQQhAwyoAgsgASAERgRAQe4AIQMMwQILAkACQAJAIAEtAABB8MgAai0AAEEBaw4HkAGPAY4BAHwBAo0BCyABQQFqIQEMCwsgAUEBagyTAQtBACEDIAJBADYCHCACQZsSNgIQIAJBBzYCDCACIAFBAWo2AhQMwAILAkADQCABLQAAQfDIAGotAAAiAEEERwRAAkACQCAAQQFrDgeUAZMBkgGNAQAEAY0BC0HaACEDDKoCCyABQQFqIQFB3AAhAwypAgsgBCABQQFqIgFHDQALQe8AIQMMwAILIAFBAWoMkQELIAQgASIARgRAQfAAIQMMvwILIAAtAABBL0cNASAAQQFqIQEMBwsgBCABIgBGBEBB8QAhAwy+AgsgAC0AACIBQS9GBEAgAEEBaiEBQd0AIQMMpQILIAFBCmsiA0EWSw0AIAAhAUEBIAN0QYmAgAJxDfkBC0EAIQMgAkEANgIcIAIgADYCFCACQYwcNgIQIAJBBzYCDAy8AgsgASAERwRAIAFBAWohAUHeACEDDKMCC0HyACEDDLsCCyABIARGBEBB9AAhAwy7AgsCQCABLQAAQfDMAGotAABBAWsOA/cBcwCCAQtB4QAhAwyhAgsgASAERwRAA0AgAS0AAEHwygBqLQAAIgBBA0cEQAJAIABBAWsOAvkBAIUBC0HfACEDDKMCCyAEIAFBAWoiAUcNAAtB8wAhAwy6AgtB8wAhAwy5AgsgASAERwRAIAJBDzYCCCACIAE2AgRB4AAhAwygAgtB9QAhAwy4AgsgASAERgRAQfYAIQMMuAILIAJBDzYCCCACIAE2AgQLQQMhAwydAgsDQCABLQAAQSBHDY4CIAQgAUEBaiIBRw0AC0H3ACEDDLUCCyABIARGBEBB+AAhAwy1AgsgAS0AAEEgRw16IAFBAWohAQxbC0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAADXgMgAILIAEgBEYEQEH6ACEDDLMCCyABLQAAQcwARw10IAFBAWohAUETDHYLQfsAIQMgASAERg2xAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYDQCABLQAAIABB8M4Aai0AAEcNcyAAQQVGDXUgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMsQILIAEgBEYEQEH8ACEDDLECCwJAAkAgAS0AAEHDAGsODAB0dHR0dHR0dHR0AXQLIAFBAWohAUHmACEDDJgCCyABQQFqIQFB5wAhAwyXAgtB/QAhAyABIARGDa8CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDXIgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADLACCyACQQA2AgAgBkEBaiEBQRAMcwtB/gAhAyABIARGDa4CIAIoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQfbOAGotAABHDXEgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK8CCyACQQA2AgAgBkEBaiEBQRYMcgtB/wAhAyABIARGDa0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQfzOAGotAABHDXAgAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK4CCyACQQA2AgAgBkEBaiEBQQUMcQsgASAERgRAQYABIQMMrQILIAEtAABB2QBHDW4gAUEBaiEBQQgMcAsgASAERgRAQYEBIQMMrAILAkACQCABLQAAQc4Aaw4DAG8BbwsgAUEBaiEBQesAIQMMkwILIAFBAWohAUHsACEDDJICCyABIARGBEBBggEhAwyrAgsCQAJAIAEtAABByABrDggAbm5ubm5uAW4LIAFBAWohAUHqACEDDJICCyABQQFqIQFB7QAhAwyRAgtBgwEhAyABIARGDakCIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQYDPAGotAABHDWwgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKoCCyACQQA2AgAgBkEBaiEBQQAMbQtBhAEhAyABIARGDagCIAIoAgAiACAEIAFraiEFIAEgAGtBBGohBgJAA0AgAS0AACAAQYPPAGotAABHDWsgAEEERg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKkCCyACQQA2AgAgBkEBaiEBQSMMbAsgASAERgRAQYUBIQMMqAILAkACQCABLQAAQcwAaw4IAGtra2trawFrCyABQQFqIQFB7wAhAwyPAgsgAUEBaiEBQfAAIQMMjgILIAEgBEYEQEGGASEDDKcCCyABLQAAQcUARw1oIAFBAWohAQxgC0GHASEDIAEgBEYNpQIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABBiM8Aai0AAEcNaCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpgILIAJBADYCACAGQQFqIQFBLQxpC0GIASEDIAEgBEYNpAIgAigCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABB0M8Aai0AAEcNZyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpQILIAJBADYCACAGQQFqIQFBKQxoCyABIARGBEBBiQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEVDF8LQZIBIQMgASAERg2aAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGhzwBqLQAARw1dIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAybAgsgAkEANgIAIAZBAWohAUEeDF4LIAEgBEYEQEGTASEDDJoCCyABLQAAQcwARw1bIAFBAWohAUEKDF0LIAEgBEYEQEGUASEDDJkCCwJAAkAgAS0AAEHBAGsODwBcXFxcXFxcXFxcXFxcAVwLIAFBAWohAUH+ACEDDIACCyABQQFqIQFB/wAhAwz/AQsgASAERgRAQZUBIQMMmAILAkACQCABLQAAQcEAaw4DAFsBWwsgAUEBaiEBQf0AIQMM/wELIAFBAWohAUGAASEDDP4BC0GWASEDIAEgBEYNlgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBp88Aai0AAEcNWSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlwILIAJBADYCACAGQQFqIQFBCwxaCyABIARGBEBBlwEhAwyWAgsCQAJAAkACQCABLQAAQS1rDiMAW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sBW1tbW1sCW1tbA1sLIAFBAWohAUH7ACEDDP8BCyABQQFqIQFB/AAhAwz+AQsgAUEBaiEBQYEBIQMM/QELIAFBAWohAUGCASEDDPwBC0GYASEDIAEgBEYNlAIgAigCACIAIAQgAWtqIQUgASAAa0EEaiEGAkADQCABLQAAIABBqc8Aai0AAEcNVyAAQQRGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlQILIAJBADYCACAGQQFqIQFBGQxYC0GZASEDIAEgBEYNkwIgAigCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBrs8Aai0AAEcNViAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlAILIAJBADYCACAGQQFqIQFBBgxXC0GaASEDIAEgBEYNkgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBtM8Aai0AAEcNVSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkwILIAJBADYCACAGQQFqIQFBHAxWC0GbASEDIAEgBEYNkQIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBts8Aai0AAEcNVCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkgILIAJBADYCACAGQQFqIQFBJwxVCyABIARGBEBBnAEhAwyRAgsCQAJAIAEtAABB1ABrDgIAAVQLIAFBAWohAUGGASEDDPgBCyABQQFqIQFBhwEhAwz3AQtBnQEhAyABIARGDY8CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbjPAGotAABHDVIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADJACCyACQQA2AgAgBkEBaiEBQSYMUwtBngEhAyABIARGDY4CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbrPAGotAABHDVEgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI8CCyACQQA2AgAgBkEBaiEBQQMMUgtBnwEhAyABIARGDY0CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDVAgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI4CCyACQQA2AgAgBkEBaiEBQQwMUQtBoAEhAyABIARGDYwCIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQbzPAGotAABHDU8gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI0CCyACQQA2AgAgBkEBaiEBQQ0MUAsgASAERgRAQaEBIQMMjAILAkACQCABLQAAQcYAaw4LAE9PT09PT09PTwFPCyABQQFqIQFBiwEhAwzzAQsgAUEBaiEBQYwBIQMM8gELIAEgBEYEQEGiASEDDIsCCyABLQAAQdAARw1MIAFBAWohAQxGCyABIARGBEBBowEhAwyKAgsCQAJAIAEtAABByQBrDgcBTU1NTU0ATQsgAUEBaiEBQY4BIQMM8QELIAFBAWohAUEiDE0LQaQBIQMgASAERg2IAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHAzwBqLQAARw1LIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyJAgsgAkEANgIAIAZBAWohAUEdDEwLIAEgBEYEQEGlASEDDIgCCwJAAkAgAS0AAEHSAGsOAwBLAUsLIAFBAWohAUGQASEDDO8BCyABQQFqIQFBBAxLCyABIARGBEBBpgEhAwyHAgsCQAJAAkACQAJAIAEtAABBwQBrDhUATU1NTU1NTU1NTQFNTQJNTQNNTQRNCyABQQFqIQFBiAEhAwzxAQsgAUEBaiEBQYkBIQMM8AELIAFBAWohAUGKASEDDO8BCyABQQFqIQFBjwEhAwzuAQsgAUEBaiEBQZEBIQMM7QELQacBIQMgASAERg2FAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHtzwBqLQAARw1IIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyGAgsgAkEANgIAIAZBAWohAUERDEkLQagBIQMgASAERg2EAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHCzwBqLQAARw1HIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyFAgsgAkEANgIAIAZBAWohAUEsDEgLQakBIQMgASAERg2DAiACKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHFzwBqLQAARw1GIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyEAgsgAkEANgIAIAZBAWohAUErDEcLQaoBIQMgASAERg2CAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHKzwBqLQAARw1FIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyDAgsgAkEANgIAIAZBAWohAUEUDEYLIAEgBEYEQEGrASEDDIICCwJAAkACQAJAIAEtAABBwgBrDg8AAQJHR0dHR0dHR0dHRwNHCyABQQFqIQFBkwEhAwzrAQsgAUEBaiEBQZQBIQMM6gELIAFBAWohAUGVASEDDOkBCyABQQFqIQFBlgEhAwzoAQsgASAERgRAQawBIQMMgQILIAEtAABBxQBHDUIgAUEBaiEBDD0LQa0BIQMgASAERg3/ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHNzwBqLQAARw1CIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyAAgsgAkEANgIAIAZBAWohAUEODEMLIAEgBEYEQEGuASEDDP8BCyABLQAAQdAARw1AIAFBAWohAUElDEILQa8BIQMgASAERg39ASACKAIAIgAgBCABa2ohBSABIABrQQhqIQYCQANAIAEtAAAgAEHQzwBqLQAARw1AIABBCEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz+AQsgAkEANgIAIAZBAWohAUEqDEELIAEgBEYEQEGwASEDDP0BCwJAAkAgAS0AAEHVAGsOCwBAQEBAQEBAQEABQAsgAUEBaiEBQZoBIQMM5AELIAFBAWohAUGbASEDDOMBCyABIARGBEBBsQEhAwz8AQsCQAJAIAEtAABBwQBrDhQAPz8/Pz8/Pz8/Pz8/Pz8/Pz8/AT8LIAFBAWohAUGZASEDDOMBCyABQQFqIQFBnAEhAwziAQtBsgEhAyABIARGDfoBIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQdnPAGotAABHDT0gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPsBCyACQQA2AgAgBkEBaiEBQSEMPgtBswEhAyABIARGDfkBIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAS0AACAAQd3PAGotAABHDTwgAEEGRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPoBCyACQQA2AgAgBkEBaiEBQRoMPQsgASAERgRAQbQBIQMM+QELAkACQAJAIAEtAABBxQBrDhEAPT09PT09PT09AT09PT09Aj0LIAFBAWohAUGdASEDDOEBCyABQQFqIQFBngEhAwzgAQsgAUEBaiEBQZ8BIQMM3wELQbUBIQMgASAERg33ASACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHkzwBqLQAARw06IABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz4AQsgAkEANgIAIAZBAWohAUEoDDsLQbYBIQMgASAERg32ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHqzwBqLQAARw05IABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz3AQsgAkEANgIAIAZBAWohAUEHDDoLIAEgBEYEQEG3ASEDDPYBCwJAAkAgAS0AAEHFAGsODgA5OTk5OTk5OTk5OTkBOQsgAUEBaiEBQaEBIQMM3QELIAFBAWohAUGiASEDDNwBC0G4ASEDIAEgBEYN9AEgAigCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB7c8Aai0AAEcNNyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9QELIAJBADYCACAGQQFqIQFBEgw4C0G5ASEDIAEgBEYN8wEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8M8Aai0AAEcNNiAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9AELIAJBADYCACAGQQFqIQFBIAw3C0G6ASEDIAEgBEYN8gEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8s8Aai0AAEcNNSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8wELIAJBADYCACAGQQFqIQFBDww2CyABIARGBEBBuwEhAwzyAQsCQAJAIAEtAABByQBrDgcANTU1NTUBNQsgAUEBaiEBQaUBIQMM2QELIAFBAWohAUGmASEDDNgBC0G8ASEDIAEgBEYN8AEgAigCACIAIAQgAWtqIQUgASAAa0EHaiEGAkADQCABLQAAIABB9M8Aai0AAEcNMyAAQQdGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8QELIAJBADYCACAGQQFqIQFBGww0CyABIARGBEBBvQEhAwzwAQsCQAJAAkAgAS0AAEHCAGsOEgA0NDQ0NDQ0NDQBNDQ0NDQ0AjQLIAFBAWohAUGkASEDDNgBCyABQQFqIQFBpwEhAwzXAQsgAUEBaiEBQagBIQMM1gELIAEgBEYEQEG+ASEDDO8BCyABLQAAQc4ARw0wIAFBAWohAQwsCyABIARGBEBBvwEhAwzuAQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQcEAaw4VAAECAz8EBQY/Pz8HCAkKCz8MDQ4PPwsgAUEBaiEBQegAIQMM4wELIAFBAWohAUHpACEDDOIBCyABQQFqIQFB7gAhAwzhAQsgAUEBaiEBQfIAIQMM4AELIAFBAWohAUHzACEDDN8BCyABQQFqIQFB9gAhAwzeAQsgAUEBaiEBQfcAIQMM3QELIAFBAWohAUH6ACEDDNwBCyABQQFqIQFBgwEhAwzbAQsgAUEBaiEBQYQBIQMM2gELIAFBAWohAUGFASEDDNkBCyABQQFqIQFBkgEhAwzYAQsgAUEBaiEBQZgBIQMM1wELIAFBAWohAUGgASEDDNYBCyABQQFqIQFBowEhAwzVAQsgAUEBaiEBQaoBIQMM1AELIAEgBEcEQCACQRA2AgggAiABNgIEQasBIQMM1AELQcABIQMM7AELQQAhAAJAIAIoAjgiA0UNACADKAI0IgNFDQAgAiADEQAAIQALIABFDV4gAEEVRw0HIAJB0QA2AhwgAiABNgIUIAJBsBc2AhAgAkEVNgIMQQAhAwzrAQsgAUEBaiABIARHDQgaQcIBIQMM6gELA0ACQCABLQAAQQprDgQIAAALAAsgBCABQQFqIgFHDQALQcMBIQMM6QELIAEgBEcEQCACQRE2AgggAiABNgIEQQEhAwzQAQtBxAEhAwzoAQsgASAERgRAQcUBIQMM6AELAkACQCABLQAAQQprDgQBKCgAKAsgAUEBagwJCyABQQFqDAULIAEgBEYEQEHGASEDDOcBCwJAAkAgAS0AAEEKaw4XAQsLAQsLCwsLCwsLCwsLCwsLCwsLCwALCyABQQFqIQELQbABIQMMzQELIAEgBEYEQEHIASEDDOYBCyABLQAAQSBHDQkgAkEAOwEyIAFBAWohAUGzASEDDMwBCwNAIAEhAAJAIAEgBEcEQCABLQAAQTBrQf8BcSIDQQpJDQEMJwtBxwEhAwzmAQsCQCACLwEyIgFBmTNLDQAgAiABQQpsIgU7ATIgBUH+/wNxIANB//8Dc0sNACAAQQFqIQEgAiADIAVqIgM7ATIgA0H//wNxQegHSQ0BCwtBACEDIAJBADYCHCACQcEJNgIQIAJBDTYCDCACIABBAWo2AhQM5AELIAJBADYCHCACIAE2AhQgAkHwDDYCECACQRs2AgxBACEDDOMBCyACKAIEIQAgAkEANgIEIAIgACABECYiAA0BIAFBAWoLIQFBrQEhAwzIAQsgAkHBATYCHCACIAA2AgwgAiABQQFqNgIUQQAhAwzgAQsgAigCBCEAIAJBADYCBCACIAAgARAmIgANASABQQFqCyEBQa4BIQMMxQELIAJBwgE2AhwgAiAANgIMIAIgAUEBajYCFEEAIQMM3QELIAJBADYCHCACIAE2AhQgAkGXCzYCECACQQ02AgxBACEDDNwBCyACQQA2AhwgAiABNgIUIAJB4xA2AhAgAkEJNgIMQQAhAwzbAQsgAkECOgAoDKwBC0EAIQMgAkEANgIcIAJBrws2AhAgAkECNgIMIAIgAUEBajYCFAzZAQtBAiEDDL8BC0ENIQMMvgELQSYhAwy9AQtBFSEDDLwBC0EWIQMMuwELQRghAwy6AQtBHCEDDLkBC0EdIQMMuAELQSAhAwy3AQtBISEDDLYBC0EjIQMMtQELQcYAIQMMtAELQS4hAwyzAQtBPSEDDLIBC0HLACEDDLEBC0HOACEDDLABC0HYACEDDK8BC0HZACEDDK4BC0HbACEDDK0BC0HxACEDDKwBC0H0ACEDDKsBC0GNASEDDKoBC0GXASEDDKkBC0GpASEDDKgBC0GvASEDDKcBC0GxASEDDKYBCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB8Rs2AhAgAkEGNgIMDL0BCyACQQA2AgAgBkEBaiEBQSQLOgApIAIoAgQhACACQQA2AgQgAiAAIAEQJyIARQRAQeUAIQMMowELIAJB+QA2AhwgAiABNgIUIAIgADYCDEEAIQMMuwELIABBFUcEQCACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwy7AQsgAkH4ADYCHCACIAE2AhQgAkHKGDYCECACQRU2AgxBACEDDLoBCyACQQA2AhwgAiABNgIUIAJBjhs2AhAgAkEGNgIMQQAhAwy5AQsgAkEANgIcIAIgATYCFCACQf4RNgIQIAJBBzYCDEEAIQMMuAELIAJBADYCHCACIAE2AhQgAkGMHDYCECACQQc2AgxBACEDDLcBCyACQQA2AhwgAiABNgIUIAJBww82AhAgAkEHNgIMQQAhAwy2AQsgAkEANgIcIAIgATYCFCACQcMPNgIQIAJBBzYCDEEAIQMMtQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxBACEDDKIBCyACQeQANgIcIAIgATYCFCACQeMXNgIQIAJBFTYCDEEAIQMMoQELIAJBADYCACAGQQFqIQEgAi0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACEDIAJBADYCHCACIAE2AhQgAkH3CTYCECACQQg2AgwMoAELIAJBADYCACAGQQFqIQEgAi0AKUEhRg0DIAJBADYCHCACIAE2AhQgAkGbCjYCECACQQg2AgxBACEDDJ8BCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJBkDM2AhAgAkEINgIMDJ0BCyACQQA2AgAgBkEBaiEBIAItAClBI0kNACACQQA2AhwgAiABNgIUIAJB0wk2AhAgAkEINgIMQQAhAwycAQtB0QAhAwyCAQsgAS0AAEEwayIAQf8BcUEKSQRAIAIgADoAKiABQQFqIQFBzwAhAwyCAQsgAigCBCEAIAJBADYCBCACIAAgARAoIgBFDYYBIAJB3gA2AhwgAiABNgIUIAIgADYCDEEAIQMMmgELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ2GASACQdwANgIcIAIgATYCFCACIAA2AgxBACEDDJkBCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMhwELIAJB2gA2AhwgAiAFNgIUIAIgADYCDAyYAQtBACEBQQEhAwsgAiADOgArIAVBAWohAwJAAkACQCACLQAtQRBxDQACQAJAAkAgAi0AKg4DAQACBAsgBkUNAwwCCyAADQEMAgsgAUUNAQsgAigCBCEAIAJBADYCBCACIAAgAxAoIgBFBEAgAyEBDAILIAJB2AA2AhwgAiADNgIUIAIgADYCDEEAIQMMmAELIAIoAgQhACACQQA2AgQgAiAAIAMQKCIARQRAIAMhAQyHAQsgAkHZADYCHCACIAM2AhQgAiAANgIMQQAhAwyXAQtBzAAhAwx9CyAAQRVHBEAgAkEANgIcIAIgATYCFCACQZQNNgIQIAJBITYCDEEAIQMMlgELIAJB1wA2AhwgAiABNgIUIAJByRc2AhAgAkEVNgIMQQAhAwyVAQtBACEDIAJBADYCHCACIAE2AhQgAkGAETYCECACQQk2AgwMlAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0AIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMkwELQckAIQMMeQsgAkEANgIcIAIgATYCFCACQcEoNgIQIAJBBzYCDCACQQA2AgBBACEDDJEBCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAlIgBFDQAgAkHSADYCHCACIAE2AhQgAiAANgIMDJABC0HIACEDDHYLIAJBADYCACAFIQELIAJBgBI7ASogAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANAQtBxwAhAwxzCyAAQRVGBEAgAkHRADYCHCACIAE2AhQgAkHjFzYCECACQRU2AgxBACEDDIwBC0EAIQMgAkEANgIcIAIgATYCFCACQbkNNgIQIAJBGjYCDAyLAQtBACEDIAJBADYCHCACIAE2AhQgAkGgGTYCECACQR42AgwMigELIAEtAABBOkYEQCACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgBFDQEgAkHDADYCHCACIAA2AgwgAiABQQFqNgIUDIoBC0EAIQMgAkEANgIcIAIgATYCFCACQbERNgIQIAJBCjYCDAyJAQsgAUEBaiEBQTshAwxvCyACQcMANgIcIAIgADYCDCACIAFBAWo2AhQMhwELQQAhAyACQQA2AhwgAiABNgIUIAJB8A42AhAgAkEcNgIMDIYBCyACIAIvATBBEHI7ATAMZgsCQCACLwEwIgBBCHFFDQAgAi0AKEEBRw0AIAItAC1BCHFFDQMLIAIgAEH3+wNxQYAEcjsBMAwECyABIARHBEACQANAIAEtAABBMGsiAEH/AXFBCk8EQEE1IQMMbgsgAikDICIKQpmz5syZs+bMGVYNASACIApCCn4iCjcDICAKIACtQv8BgyILQn+FVg0BIAIgCiALfDcDICAEIAFBAWoiAUcNAAtBOSEDDIUBCyACKAIEIQBBACEDIAJBADYCBCACIAAgAUEBaiIBECoiAA0MDHcLQTkhAwyDAQsgAi0AMEEgcQ0GQcUBIQMMaQtBACEDIAJBADYCBCACIAEgARAqIgBFDQQgAkE6NgIcIAIgADYCDCACIAFBAWo2AhQMgQELIAItAChBAUcNACACLQAtQQhxRQ0BC0E3IQMMZgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIABEAgAkE7NgIcIAIgADYCDCACIAFBAWo2AhQMfwsgAUEBaiEBDG4LIAJBCDoALAwECyABQQFqIQEMbQtBACEDIAJBADYCHCACIAE2AhQgAkHkEjYCECACQQQ2AgwMewsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ1sIAJBNzYCHCACIAE2AhQgAiAANgIMDHoLIAIgAi8BMEEgcjsBMAtBMCEDDF8LIAJBNjYCHCACIAE2AhQgAiAANgIMDHcLIABBLEcNASABQQFqIQBBASEBAkACQAJAAkACQCACLQAsQQVrDgQDAQIEAAsgACEBDAQLQQIhAQwBC0EEIQELIAJBAToALCACIAIvATAgAXI7ATAgACEBDAELIAIgAi8BMEEIcjsBMCAAIQELQTkhAwxcCyACQQA6ACwLQTQhAwxaCyABIARGBEBBLSEDDHMLAkACQANAAkAgAS0AAEEKaw4EAgAAAwALIAQgAUEBaiIBRw0AC0EtIQMMdAsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ0CIAJBLDYCHCACIAE2AhQgAiAANgIMDHMLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAS0AAEENRgRAIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAi0ALUEBcQRAQcQBIQMMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIADQEMZQtBLyEDDFcLIAJBLjYCHCACIAE2AhQgAiAANgIMDG8LQQAhAyACQQA2AhwgAiABNgIUIAJB8BQ2AhAgAkEDNgIMDG4LQQEhAwJAAkACQAJAIAItACxBBWsOBAMBAgAECyACIAIvATBBCHI7ATAMAwtBAiEDDAELQQQhAwsgAkEBOgAsIAIgAi8BMCADcjsBMAtBKiEDDFMLQQAhAyACQQA2AhwgAiABNgIUIAJB4Q82AhAgAkEKNgIMDGsLQQEhAwJAAkACQAJAAkACQCACLQAsQQJrDgcFBAQDAQIABAsgAiACLwEwQQhyOwEwDAMLQQIhAwwBC0EEIQMLIAJBAToALCACIAIvATAgA3I7ATALQSshAwxSC0EAIQMgAkEANgIcIAIgATYCFCACQasSNgIQIAJBCzYCDAxqC0EAIQMgAkEANgIcIAIgATYCFCACQf0NNgIQIAJBHTYCDAxpCyABIARHBEADQCABLQAAQSBHDUggBCABQQFqIgFHDQALQSUhAwxpC0ElIQMMaAsgAi0ALUEBcQRAQcMBIQMMTwsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKSIABEAgAkEmNgIcIAIgADYCDCACIAFBAWo2AhQMaAsgAUEBaiEBDFwLIAFBAWohASACLwEwIgBBgAFxBEBBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAEUNBiAAQRVHDR8gAkEFNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMZwsCQCAAQaAEcUGgBEcNACACLQAtQQJxDQBBACEDIAJBADYCHCACIAE2AhQgAkGWEzYCECACQQQ2AgwMZwsgAgJ/IAIvATBBFHFBFEYEQEEBIAItAChBAUYNARogAi8BMkHlAEYMAQsgAi0AKUEFRgs6AC5BACEAAkAgAigCOCIDRQ0AIAMoAiQiA0UNACACIAMRAAAhAAsCQAJAAkACQAJAIAAOFgIBAAQEBAQEBAQEBAQEBAQEBAQEBAMECyACQQE6AC4LIAIgAi8BMEHAAHI7ATALQSchAwxPCyACQSM2AhwgAiABNgIUIAJBpRY2AhAgAkEVNgIMQQAhAwxnC0EAIQMgAkEANgIcIAIgATYCFCACQdULNgIQIAJBETYCDAxmC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAADQELQQ4hAwxLCyAAQRVGBEAgAkECNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMZAtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMYwtBACEDIAJBADYCHCACIAE2AhQgAkGqHDYCECACQQ82AgwMYgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEgCqdqIgEQKyIARQ0AIAJBBTYCHCACIAE2AhQgAiAANgIMDGELQQ8hAwxHC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxfC0IBIQoLIAFBAWohAQJAIAIpAyAiC0L//////////w9YBEAgAiALQgSGIAqENwMgDAELQQAhAyACQQA2AhwgAiABNgIUIAJBrQk2AhAgAkEMNgIMDF4LQSQhAwxEC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxcCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAsIgBFBEAgAUEBaiEBDFILIAJBFzYCHCACIAA2AgwgAiABQQFqNgIUDFsLIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQRY2AhwgAiAANgIMIAIgAUEBajYCFAxbC0EfIQMMQQtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQLSIARQRAIAFBAWohAQxQCyACQRQ2AhwgAiAANgIMIAIgAUEBajYCFAxYCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABEC0iAEUEQCABQQFqIQEMAQsgAkETNgIcIAIgADYCDCACIAFBAWo2AhQMWAtBHiEDDD4LQQAhAyACQQA2AhwgAiABNgIUIAJBxgw2AhAgAkEjNgIMDFYLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABEC0iAEUEQCABQQFqIQEMTgsgAkERNgIcIAIgADYCDCACIAFBAWo2AhQMVQsgAkEQNgIcIAIgATYCFCACIAA2AgwMVAtBACEDIAJBADYCHCACIAE2AhQgAkHGDDYCECACQSM2AgwMUwtBACEDIAJBADYCHCACIAE2AhQgAkHAFTYCECACQQI2AgwMUgsgAigCBCEAQQAhAyACQQA2AgQCQCACIAAgARAtIgBFBEAgAUEBaiEBDAELIAJBDjYCHCACIAA2AgwgAiABQQFqNgIUDFILQRshAww4C0EAIQMgAkEANgIcIAIgATYCFCACQcYMNgIQIAJBIzYCDAxQCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABECwiAEUEQCABQQFqIQEMAQsgAkENNgIcIAIgADYCDCACIAFBAWo2AhQMUAtBGiEDDDYLQQAhAyACQQA2AhwgAiABNgIUIAJBmg82AhAgAkEiNgIMDE4LIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQQw2AhwgAiAANgIMIAIgAUEBajYCFAxOC0EZIQMMNAtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMTAsgAEEVRwRAQQAhAyACQQA2AhwgAiABNgIUIAJBgww2AhAgAkETNgIMDEwLIAJBCjYCHCACIAE2AhQgAkHkFjYCECACQRU2AgxBACEDDEsLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABIAqnaiIBECsiAARAIAJBBzYCHCACIAE2AhQgAiAANgIMDEsLQRMhAwwxCyAAQRVHBEBBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMSgsgAkEeNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMSQtBACEAAkAgAigCOCIDRQ0AIAMoAiwiA0UNACACIAMRAAAhAAsgAEUNQSAAQRVGBEAgAkEDNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMSQtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMSAtBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMRwtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMRgsgAkEAOgAvIAItAC1BBHFFDT8LIAJBADoALyACQQE6ADRBACEDDCsLQQAhAyACQQA2AhwgAkHkETYCECACQQc2AgwgAiABQQFqNgIUDEMLAkADQAJAIAEtAABBCmsOBAACAgACCyAEIAFBAWoiAUcNAAtB3QEhAwxDCwJAAkAgAi0ANEEBRw0AQQAhAAJAIAIoAjgiA0UNACADKAJYIgNFDQAgAiADEQAAIQALIABFDQAgAEEVRw0BIAJB3AE2AhwgAiABNgIUIAJB1RY2AhAgAkEVNgIMQQAhAwxEC0HBASEDDCoLIAJBADYCHCACIAE2AhQgAkHpCzYCECACQR82AgxBACEDDEILAkACQCACLQAoQQFrDgIEAQALQcABIQMMKQtBuQEhAwwoCyACQQI6AC9BACEAAkAgAigCOCIDRQ0AIAMoAgAiA0UNACACIAMRAAAhAAsgAEUEQEHCASEDDCgLIABBFUcEQCACQQA2AhwgAiABNgIUIAJBpAw2AhAgAkEQNgIMQQAhAwxBCyACQdsBNgIcIAIgATYCFCACQfoWNgIQIAJBFTYCDEEAIQMMQAsgASAERgRAQdoBIQMMQAsgAS0AAEHIAEYNASACQQE6ACgLQawBIQMMJQtBvwEhAwwkCyABIARHBEAgAkEQNgIIIAIgATYCBEG+ASEDDCQLQdkBIQMMPAsgASAERgRAQdgBIQMMPAsgAS0AAEHIAEcNBCABQQFqIQFBvQEhAwwiCyABIARGBEBB1wEhAww7CwJAAkAgAS0AAEHFAGsOEAAFBQUFBQUFBQUFBQUFBQEFCyABQQFqIQFBuwEhAwwiCyABQQFqIQFBvAEhAwwhC0HWASEDIAEgBEYNOSACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGD0ABqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw6CyACKAIEIQAgAkIANwMAIAIgACAGQQFqIgEQJyIARQRAQcYBIQMMIQsgAkHVATYCHCACIAE2AhQgAiAANgIMQQAhAww5C0HUASEDIAEgBEYNOCACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGB0ABqLQAARw0CIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw5CyACQYEEOwEoIAIoAgQhACACQgA3AwAgAiAAIAZBAWoiARAnIgANAwwCCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB2Bs2AhAgAkEINgIMDDYLQboBIQMMHAsgAkHTATYCHCACIAE2AhQgAiAANgIMQQAhAww0C0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAARQ0AIABBFUYNASACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwwzC0HkACEDDBkLIAJB+AA2AhwgAiABNgIUIAJByhg2AhAgAkEVNgIMQQAhAwwxC0HSASEDIAQgASIARg0wIAQgAWsgAigCACIBaiEFIAAgAWtBBGohBgJAA0AgAC0AACABQfzPAGotAABHDQEgAUEERg0DIAFBAWohASAEIABBAWoiAEcNAAsgAiAFNgIADDELIAJBADYCHCACIAA2AhQgAkGQMzYCECACQQg2AgwgAkEANgIAQQAhAwwwCyABIARHBEAgAkEONgIIIAIgATYCBEG3ASEDDBcLQdEBIQMMLwsgAkEANgIAIAZBAWohAQtBuAEhAwwUCyABIARGBEBB0AEhAwwtCyABLQAAQTBrIgBB/wFxQQpJBEAgAiAAOgAqIAFBAWohAUG2ASEDDBQLIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0UIAJBzwE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAsgASAERgRAQc4BIQMMLAsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0VIAJBzQE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAtBtQEhAwwSCyAEIAEiBUYEQEHMASEDDCsLQQAhAEEBIQFBASEGQQAhAwJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAUtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyEDQQAhAUEAIQYMAgtBCSEDQQEhAEEAIQFBACEGDAELQQAhAUEBIQMLIAIgAzoAKyAFQQFqIQMCQAJAIAItAC1BEHENAAJAAkACQCACLQAqDgMBAAIECyAGRQ0DDAILIAANAQwCCyABRQ0BCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMAwsgAkHJATYCHCACIAM2AhQgAiAANgIMQQAhAwwtCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMGAsgAkHKATYCHCACIAM2AhQgAiAANgIMQQAhAwwsCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMFgsgAkHLATYCHCACIAU2AhQgAiAANgIMDCsLQbQBIQMMEQtBACEAAkAgAigCOCIDRQ0AIAMoAjwiA0UNACACIAMRAAAhAAsCQCAABEAgAEEVRg0BIAJBADYCHCACIAE2AhQgAkGUDTYCECACQSE2AgxBACEDDCsLQbIBIQMMEQsgAkHIATYCHCACIAE2AhQgAkHJFzYCECACQRU2AgxBACEDDCkLIAJBADYCACAGQQFqIQFB9QAhAwwPCyACLQApQQVGBEBB4wAhAwwPC0HiACEDDA4LIAAhASACQQA2AgALIAJBADoALEEJIQMMDAsgAkEANgIAIAdBAWohAUHAACEDDAsLQQELOgAsIAJBADYCACAGQQFqIQELQSkhAwwIC0E4IQMMBwsCQCABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRw0DIAFBAWohAQwFCyAEIAFBAWoiAUcNAAtBPiEDDCELQT4hAwwgCwsgAkEAOgAsDAELQQshAwwEC0E6IQMMAwsgAUEBaiEBQS0hAwwCCyACIAE6ACwgAkEANgIAIAZBAWohAUEMIQMMAQsgAkEANgIAIAZBAWohAUEKIQMMAAsAC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwXC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwWC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwVC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwUC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwTC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwSC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwRC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwQC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwPC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwOC0EAIQMgAkEANgIcIAIgATYCFCACQcASNgIQIAJBCzYCDAwNC0EAIQMgAkEANgIcIAIgATYCFCACQZUJNgIQIAJBCzYCDAwMC0EAIQMgAkEANgIcIAIgATYCFCACQeEPNgIQIAJBCjYCDAwLC0EAIQMgAkEANgIcIAIgATYCFCACQfsPNgIQIAJBCjYCDAwKC0EAIQMgAkEANgIcIAIgATYCFCACQfEZNgIQIAJBAjYCDAwJC0EAIQMgAkEANgIcIAIgATYCFCACQcQUNgIQIAJBAjYCDAwIC0EAIQMgAkEANgIcIAIgATYCFCACQfIVNgIQIAJBAjYCDAwHCyACQQI2AhwgAiABNgIUIAJBnBo2AhAgAkEWNgIMQQAhAwwGC0EBIQMMBQtB1AAhAyABIARGDQQgCEEIaiEJIAIoAgAhBQJAAkAgASAERwRAIAVB2MIAaiEHIAQgBWogAWshACAFQX9zQQpqIgUgAWohBgNAIAEtAAAgBy0AAEcEQEECIQcMAwsgBUUEQEEAIQcgBiEBDAMLIAVBAWshBSAHQQFqIQcgBCABQQFqIgFHDQALIAAhBSAEIQELIAlBATYCACACIAU2AgAMAQsgAkEANgIAIAkgBzYCAAsgCSABNgIEIAgoAgwhACAIKAIIDgMBBAIACwALIAJBADYCHCACQbUaNgIQIAJBFzYCDCACIABBAWo2AhRBACEDDAILIAJBADYCHCACIAA2AhQgAkHKGjYCECACQQk2AgxBACEDDAELIAEgBEYEQEEiIQMMAQsgAkEJNgIIIAIgATYCBEEhIQMLIAhBEGokACADRQRAIAIoAgwhAAwBCyACIAM2AhxBACEAIAIoAgQiAUUNACACIAEgBCACKAIIEQEAIgFFDQAgAiAENgIUIAIgATYCDCABIQALIAALvgIBAn8gAEEAOgAAIABB3ABqIgFBAWtBADoAACAAQQA6AAIgAEEAOgABIAFBA2tBADoAACABQQJrQQA6AAAgAEEAOgADIAFBBGtBADoAAEEAIABrQQNxIgEgAGoiAEEANgIAQdwAIAFrQXxxIgIgAGoiAUEEa0EANgIAAkAgAkEJSQ0AIABBADYCCCAAQQA2AgQgAUEIa0EANgIAIAFBDGtBADYCACACQRlJDQAgAEEANgIYIABBADYCFCAAQQA2AhAgAEEANgIMIAFBEGtBADYCACABQRRrQQA2AgAgAUEYa0EANgIAIAFBHGtBADYCACACIABBBHFBGHIiAmsiAUEgSQ0AIAAgAmohAANAIABCADcDGCAAQgA3AxAgAEIANwMIIABCADcDACAAQSBqIQAgAUEgayIBQR9LDQALCwtWAQF/AkAgACgCDA0AAkACQAJAAkAgAC0ALw4DAQADAgsgACgCOCIBRQ0AIAEoAiwiAUUNACAAIAERAAAiAQ0DC0EADwsACyAAQcMWNgIQQQ4hAQsgAQsaACAAKAIMRQRAIABB0Rs2AhAgAEEVNgIMCwsUACAAKAIMQRVGBEAgAEEANgIMCwsUACAAKAIMQRZGBEAgAEEANgIMCwsHACAAKAIMCwcAIAAoAhALCQAgACABNgIQCwcAIAAoAhQLFwAgAEEkTwRAAAsgAEECdEGgM2ooAgALFwAgAEEuTwRAAAsgAEECdEGwNGooAgALvwkBAX9B6yghAQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB9ysPC0GQMQ8LQdcxDwtBoi0PC0HUJw8LQeArDwtBnywPC0HrMQ8LQdUfDwtByjEPC0HeJQ8LQdQeDwtB9BwPC0GnMg8LQbEdDwtBoB0PC0G5MQ8LQbwwDwtBkiEPC0GzJg8LQeksDwtBrB4PC0HUKw8LQfcmDwtBgCYPC0GwIQ8LQf4eDwtBjSMPC0GJLQ8LQfciDwtBoDEPC0GuHw8LQcYlDwtB6B4PC0GTIg8LQcIvDwtBwx0PC0GLLA8LQeEdDwtBjS8PC0HqIQ8LQbQtDwtB0i8PC0HfMg8LQdIyDwtB8DAPC0GpIg8LQfkjDwtBmR4PC0G1LA8LQZswDwtBkjIPC0G2Kw8LQcIiDwtB+DIPC0GeJQ8LQdAiDwtBuh4PC0GBHg8LAAtB1iEhAQsgAQsWACAAIAAtAC1B/gFxIAFBAEdyOgAtCxkAIAAgAC0ALUH9AXEgAUEAR0EBdHI6AC0LGQAgACAALQAtQfsBcSABQQBHQQJ0cjoALQsZACAAIAAtAC1B9wFxIAFBAEdBA3RyOgAtCz4BAn8CQCAAKAI4IgNFDQAgAygCBCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBxhE2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCCCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9go2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCDCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7Ro2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCECIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlRA2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCFCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBqhs2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCGCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7RM2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCKCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9gg2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCHCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBwhk2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCICIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlBQ2AhBBGCEECyAEC1kBAn8CQCAALQAoQQFGDQAgAC8BMiIBQeQAa0HkAEkNACABQcwBRg0AIAFBsAJGDQAgAC8BMCIAQcAAcQ0AQQEhAiAAQYgEcUGABEYNACAAQShxRSECCyACC4wBAQJ/AkACQAJAIAAtACpFDQAgAC0AK0UNACAALwEwIgFBAnFFDQEMAgsgAC8BMCIBQQFxRQ0BC0EBIQIgAC0AKEEBRg0AIAAvATIiAEHkAGtB5ABJDQAgAEHMAUYNACAAQbACRg0AIAFBwABxDQBBACECIAFBiARxQYAERg0AIAFBKHFBAEchAgsgAgtXACAAQRhqQgA3AwAgAEIANwMAIABBOGpCADcDACAAQTBqQgA3AwAgAEEoakIANwMAIABBIGpCADcDACAAQRBqQgA3AwAgAEEIakIANwMAIABB3QE2AhwLBgAgABAyC5otAQt/IwBBEGsiCiQAQaTQACgCACIJRQRAQeTTACgCACIFRQRAQfDTAEJ/NwIAQejTAEKAgISAgIDAADcCAEHk0wAgCkEIakFwcUHYqtWqBXMiBTYCAEH40wBBADYCAEHI0wBBADYCAAtBzNMAQYDUBDYCAEGc0ABBgNQENgIAQbDQACAFNgIAQazQAEF/NgIAQdDTAEGArAM2AgADQCABQcjQAGogAUG80ABqIgI2AgAgAiABQbTQAGoiAzYCACABQcDQAGogAzYCACABQdDQAGogAUHE0ABqIgM2AgAgAyACNgIAIAFB2NAAaiABQczQAGoiAjYCACACIAM2AgAgAUHU0ABqIAI2AgAgAUEgaiIBQYACRw0AC0GM1ARBwasDNgIAQajQAEH00wAoAgA2AgBBmNAAQcCrAzYCAEGk0ABBiNQENgIAQcz/B0E4NgIAQYjUBCEJCwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB7AFNBEBBjNAAKAIAIgZBECAAQRNqQXBxIABBC0kbIgRBA3YiAHYiAUEDcQRAAkAgAUEBcSAAckEBcyICQQN0IgBBtNAAaiIBIABBvNAAaigCACIAKAIIIgNGBEBBjNAAIAZBfiACd3E2AgAMAQsgASADNgIIIAMgATYCDAsgAEEIaiEBIAAgAkEDdCICQQNyNgIEIAAgAmoiACAAKAIEQQFyNgIEDBELQZTQACgCACIIIARPDQEgAQRAAkBBAiAAdCICQQAgAmtyIAEgAHRxaCIAQQN0IgJBtNAAaiIBIAJBvNAAaigCACICKAIIIgNGBEBBjNAAIAZBfiAAd3EiBjYCAAwBCyABIAM2AgggAyABNgIMCyACIARBA3I2AgQgAEEDdCIAIARrIQUgACACaiAFNgIAIAIgBGoiBCAFQQFyNgIEIAgEQCAIQXhxQbTQAGohAEGg0AAoAgAhAwJ/QQEgCEEDdnQiASAGcUUEQEGM0AAgASAGcjYCACAADAELIAAoAggLIgEgAzYCDCAAIAM2AgggAyAANgIMIAMgATYCCAsgAkEIaiEBQaDQACAENgIAQZTQACAFNgIADBELQZDQACgCACILRQ0BIAtoQQJ0QbzSAGooAgAiACgCBEF4cSAEayEFIAAhAgNAAkAgAigCECIBRQRAIAJBFGooAgAiAUUNAQsgASgCBEF4cSAEayIDIAVJIQIgAyAFIAIbIQUgASAAIAIbIQAgASECDAELCyAAKAIYIQkgACgCDCIDIABHBEBBnNAAKAIAGiADIAAoAggiATYCCCABIAM2AgwMEAsgAEEUaiICKAIAIgFFBEAgACgCECIBRQ0DIABBEGohAgsDQCACIQcgASIDQRRqIgIoAgAiAQ0AIANBEGohAiADKAIQIgENAAsgB0EANgIADA8LQX8hBCAAQb9/Sw0AIABBE2oiAUFwcSEEQZDQACgCACIIRQ0AQQAgBGshBQJAAkACQAJ/QQAgBEGAAkkNABpBHyAEQf///wdLDQAaIARBJiABQQh2ZyIAa3ZBAXEgAEEBdGtBPmoLIgZBAnRBvNIAaigCACICRQRAQQAhAUEAIQMMAQtBACEBIARBGSAGQQF2a0EAIAZBH0cbdCEAQQAhAwNAAkAgAigCBEF4cSAEayIHIAVPDQAgAiEDIAciBQ0AQQAhBSACIQEMAwsgASACQRRqKAIAIgcgByACIABBHXZBBHFqQRBqKAIAIgJGGyABIAcbIQEgAEEBdCEAIAINAAsLIAEgA3JFBEBBACEDQQIgBnQiAEEAIABrciAIcSIARQ0DIABoQQJ0QbzSAGooAgAhAQsgAUUNAQsDQCABKAIEQXhxIARrIgIgBUkhACACIAUgABshBSABIAMgABshAyABKAIQIgAEfyAABSABQRRqKAIACyIBDQALCyADRQ0AIAVBlNAAKAIAIARrTw0AIAMoAhghByADIAMoAgwiAEcEQEGc0AAoAgAaIAAgAygCCCIBNgIIIAEgADYCDAwOCyADQRRqIgIoAgAiAUUEQCADKAIQIgFFDQMgA0EQaiECCwNAIAIhBiABIgBBFGoiAigCACIBDQAgAEEQaiECIAAoAhAiAQ0ACyAGQQA2AgAMDQtBlNAAKAIAIgMgBE8EQEGg0AAoAgAhAQJAIAMgBGsiAkEQTwRAIAEgBGoiACACQQFyNgIEIAEgA2ogAjYCACABIARBA3I2AgQMAQsgASADQQNyNgIEIAEgA2oiACAAKAIEQQFyNgIEQQAhAEEAIQILQZTQACACNgIAQaDQACAANgIAIAFBCGohAQwPC0GY0AAoAgAiAyAESwRAIAQgCWoiACADIARrIgFBAXI2AgRBpNAAIAA2AgBBmNAAIAE2AgAgCSAEQQNyNgIEIAlBCGohAQwPC0EAIQEgBAJ/QeTTACgCAARAQezTACgCAAwBC0Hw0wBCfzcCAEHo0wBCgICEgICAwAA3AgBB5NMAIApBDGpBcHFB2KrVqgVzNgIAQfjTAEEANgIAQcjTAEEANgIAQYCABAsiACAEQccAaiIFaiIGQQAgAGsiB3EiAk8EQEH80wBBMDYCAAwPCwJAQcTTACgCACIBRQ0AQbzTACgCACIIIAJqIQAgACABTSAAIAhLcQ0AQQAhAUH80wBBMDYCAAwPC0HI0wAtAABBBHENBAJAAkAgCQRAQczTACEBA0AgASgCACIAIAlNBEAgACABKAIEaiAJSw0DCyABKAIIIgENAAsLQQAQMyIAQX9GDQUgAiEGQejTACgCACIBQQFrIgMgAHEEQCACIABrIAAgA2pBACABa3FqIQYLIAQgBk8NBSAGQf7///8HSw0FQcTTACgCACIDBEBBvNMAKAIAIgcgBmohASABIAdNDQYgASADSw0GCyAGEDMiASAARw0BDAcLIAYgA2sgB3EiBkH+////B0sNBCAGEDMhACAAIAEoAgAgASgCBGpGDQMgACEBCwJAIAYgBEHIAGpPDQAgAUF/Rg0AQezTACgCACIAIAUgBmtqQQAgAGtxIgBB/v///wdLBEAgASEADAcLIAAQM0F/RwRAIAAgBmohBiABIQAMBwtBACAGaxAzGgwECyABIgBBf0cNBQwDC0EAIQMMDAtBACEADAoLIABBf0cNAgtByNMAQcjTACgCAEEEcjYCAAsgAkH+////B0sNASACEDMhAEEAEDMhASAAQX9GDQEgAUF/Rg0BIAAgAU8NASABIABrIgYgBEE4ak0NAQtBvNMAQbzTACgCACAGaiIBNgIAQcDTACgCACABSQRAQcDTACABNgIACwJAAkACQEGk0AAoAgAiAgRAQczTACEBA0AgACABKAIAIgMgASgCBCIFakYNAiABKAIIIgENAAsMAgtBnNAAKAIAIgFBAEcgACABT3FFBEBBnNAAIAA2AgALQQAhAUHQ0wAgBjYCAEHM0wAgADYCAEGs0ABBfzYCAEGw0ABB5NMAKAIANgIAQdjTAEEANgIAA0AgAUHI0ABqIAFBvNAAaiICNgIAIAIgAUG00ABqIgM2AgAgAUHA0ABqIAM2AgAgAUHQ0ABqIAFBxNAAaiIDNgIAIAMgAjYCACABQdjQAGogAUHM0ABqIgI2AgAgAiADNgIAIAFB1NAAaiACNgIAIAFBIGoiAUGAAkcNAAtBeCAAa0EPcSIBIABqIgIgBkE4ayIDIAFrIgFBAXI2AgRBqNAAQfTTACgCADYCAEGY0AAgATYCAEGk0AAgAjYCACAAIANqQTg2AgQMAgsgACACTQ0AIAIgA0kNACABKAIMQQhxDQBBeCACa0EPcSIAIAJqIgNBmNAAKAIAIAZqIgcgAGsiAEEBcjYCBCABIAUgBmo2AgRBqNAAQfTTACgCADYCAEGY0AAgADYCAEGk0AAgAzYCACACIAdqQTg2AgQMAQsgAEGc0AAoAgBJBEBBnNAAIAA2AgALIAAgBmohA0HM0wAhAQJAAkACQANAIAMgASgCAEcEQCABKAIIIgENAQwCCwsgAS0ADEEIcUUNAQtBzNMAIQEDQCABKAIAIgMgAk0EQCADIAEoAgRqIgUgAksNAwsgASgCCCEBDAALAAsgASAANgIAIAEgASgCBCAGajYCBCAAQXggAGtBD3FqIgkgBEEDcjYCBCADQXggA2tBD3FqIgYgBCAJaiIEayEBIAIgBkYEQEGk0AAgBDYCAEGY0ABBmNAAKAIAIAFqIgA2AgAgBCAAQQFyNgIEDAgLQaDQACgCACAGRgRAQaDQACAENgIAQZTQAEGU0AAoAgAgAWoiADYCACAEIABBAXI2AgQgACAEaiAANgIADAgLIAYoAgQiBUEDcUEBRw0GIAVBeHEhCCAFQf8BTQRAIAVBA3YhAyAGKAIIIgAgBigCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBwsgAiAANgIIIAAgAjYCDAwGCyAGKAIYIQcgBiAGKAIMIgBHBEAgACAGKAIIIgI2AgggAiAANgIMDAULIAZBFGoiAigCACIFRQRAIAYoAhAiBUUNBCAGQRBqIQILA0AgAiEDIAUiAEEUaiICKAIAIgUNACAAQRBqIQIgACgCECIFDQALIANBADYCAAwEC0F4IABrQQ9xIgEgAGoiByAGQThrIgMgAWsiAUEBcjYCBCAAIANqQTg2AgQgAiAFQTcgBWtBD3FqQT9rIgMgAyACQRBqSRsiA0EjNgIEQajQAEH00wAoAgA2AgBBmNAAIAE2AgBBpNAAIAc2AgAgA0EQakHU0wApAgA3AgAgA0HM0wApAgA3AghB1NMAIANBCGo2AgBB0NMAIAY2AgBBzNMAIAA2AgBB2NMAQQA2AgAgA0EkaiEBA0AgAUEHNgIAIAUgAUEEaiIBSw0ACyACIANGDQAgAyADKAIEQX5xNgIEIAMgAyACayIFNgIAIAIgBUEBcjYCBCAFQf8BTQRAIAVBeHFBtNAAaiEAAn9BjNAAKAIAIgFBASAFQQN2dCIDcUUEQEGM0AAgASADcjYCACAADAELIAAoAggLIgEgAjYCDCAAIAI2AgggAiAANgIMIAIgATYCCAwBC0EfIQEgBUH///8HTQRAIAVBJiAFQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAQsgAiABNgIcIAJCADcCECABQQJ0QbzSAGohAEGQ0AAoAgAiA0EBIAF0IgZxRQRAIAAgAjYCAEGQ0AAgAyAGcjYCACACIAA2AhggAiACNgIIIAIgAjYCDAwBCyAFQRkgAUEBdmtBACABQR9HG3QhASAAKAIAIQMCQANAIAMiACgCBEF4cSAFRg0BIAFBHXYhAyABQQF0IQEgACADQQRxakEQaiIGKAIAIgMNAAsgBiACNgIAIAIgADYCGCACIAI2AgwgAiACNgIIDAELIAAoAggiASACNgIMIAAgAjYCCCACQQA2AhggAiAANgIMIAIgATYCCAtBmNAAKAIAIgEgBE0NAEGk0AAoAgAiACAEaiICIAEgBGsiAUEBcjYCBEGY0AAgATYCAEGk0AAgAjYCACAAIARBA3I2AgQgAEEIaiEBDAgLQQAhAUH80wBBMDYCAAwHC0EAIQALIAdFDQACQCAGKAIcIgJBAnRBvNIAaiIDKAIAIAZGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAdBEEEUIAcoAhAgBkYbaiAANgIAIABFDQELIAAgBzYCGCAGKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAGQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAIaiEBIAYgCGoiBigCBCEFCyAGIAVBfnE2AgQgASAEaiABNgIAIAQgAUEBcjYCBCABQf8BTQRAIAFBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASABQQN2dCIBcUUEQEGM0AAgASACcjYCACAADAELIAAoAggLIgEgBDYCDCAAIAQ2AgggBCAANgIMIAQgATYCCAwBC0EfIQUgAUH///8HTQRAIAFBJiABQQh2ZyIAa3ZBAXEgAEEBdGtBPmohBQsgBCAFNgIcIARCADcCECAFQQJ0QbzSAGohAEGQ0AAoAgAiAkEBIAV0IgNxRQRAIAAgBDYCAEGQ0AAgAiADcjYCACAEIAA2AhggBCAENgIIIAQgBDYCDAwBCyABQRkgBUEBdmtBACAFQR9HG3QhBSAAKAIAIQACQANAIAAiAigCBEF4cSABRg0BIAVBHXYhACAFQQF0IQUgAiAAQQRxakEQaiIDKAIAIgANAAsgAyAENgIAIAQgAjYCGCAEIAQ2AgwgBCAENgIIDAELIAIoAggiACAENgIMIAIgBDYCCCAEQQA2AhggBCACNgIMIAQgADYCCAsgCUEIaiEBDAILAkAgB0UNAAJAIAMoAhwiAUECdEG80gBqIgIoAgAgA0YEQCACIAA2AgAgAA0BQZDQACAIQX4gAXdxIgg2AgAMAgsgB0EQQRQgBygCECADRhtqIAA2AgAgAEUNAQsgACAHNgIYIAMoAhAiAQRAIAAgATYCECABIAA2AhgLIANBFGooAgAiAUUNACAAQRRqIAE2AgAgASAANgIYCwJAIAVBD00EQCADIAQgBWoiAEEDcjYCBCAAIANqIgAgACgCBEEBcjYCBAwBCyADIARqIgIgBUEBcjYCBCADIARBA3I2AgQgAiAFaiAFNgIAIAVB/wFNBEAgBUF4cUG00ABqIQACf0GM0AAoAgAiAUEBIAVBA3Z0IgVxRQRAQYzQACABIAVyNgIAIAAMAQsgACgCCAsiASACNgIMIAAgAjYCCCACIAA2AgwgAiABNgIIDAELQR8hASAFQf///wdNBEAgBUEmIAVBCHZnIgBrdkEBcSAAQQF0a0E+aiEBCyACIAE2AhwgAkIANwIQIAFBAnRBvNIAaiEAQQEgAXQiBCAIcUUEQCAAIAI2AgBBkNAAIAQgCHI2AgAgAiAANgIYIAIgAjYCCCACIAI2AgwMAQsgBUEZIAFBAXZrQQAgAUEfRxt0IQEgACgCACEEAkADQCAEIgAoAgRBeHEgBUYNASABQR12IQQgAUEBdCEBIAAgBEEEcWpBEGoiBigCACIEDQALIAYgAjYCACACIAA2AhggAiACNgIMIAIgAjYCCAwBCyAAKAIIIgEgAjYCDCAAIAI2AgggAkEANgIYIAIgADYCDCACIAE2AggLIANBCGohAQwBCwJAIAlFDQACQCAAKAIcIgFBAnRBvNIAaiICKAIAIABGBEAgAiADNgIAIAMNAUGQ0AAgC0F+IAF3cTYCAAwCCyAJQRBBFCAJKAIQIABGG2ogAzYCACADRQ0BCyADIAk2AhggACgCECIBBEAgAyABNgIQIAEgAzYCGAsgAEEUaigCACIBRQ0AIANBFGogATYCACABIAM2AhgLAkAgBUEPTQRAIAAgBCAFaiIBQQNyNgIEIAAgAWoiASABKAIEQQFyNgIEDAELIAAgBGoiByAFQQFyNgIEIAAgBEEDcjYCBCAFIAdqIAU2AgAgCARAIAhBeHFBtNAAaiEBQaDQACgCACEDAn9BASAIQQN2dCICIAZxRQRAQYzQACACIAZyNgIAIAEMAQsgASgCCAsiAiADNgIMIAEgAzYCCCADIAE2AgwgAyACNgIIC0Gg0AAgBzYCAEGU0AAgBTYCAAsgAEEIaiEBCyAKQRBqJAAgAQtDACAARQRAPwBBEHQPCwJAIABB//8DcQ0AIABBAEgNACAAQRB2QAAiAEF/RgRAQfzTAEEwNgIAQX8PCyAAQRB0DwsACwvcPyIAQYAICwkBAAAAAgAAAAMAQZQICwUEAAAABQBBpAgLCQYAAAAHAAAACABB3AgLii1JbnZhbGlkIGNoYXIgaW4gdXJsIHF1ZXJ5AFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fYm9keQBDb250ZW50LUxlbmd0aCBvdmVyZmxvdwBDaHVuayBzaXplIG92ZXJmbG93AFJlc3BvbnNlIG92ZXJmbG93AEludmFsaWQgbWV0aG9kIGZvciBIVFRQL3gueCByZXF1ZXN0AEludmFsaWQgbWV0aG9kIGZvciBSVFNQL3gueCByZXF1ZXN0AEV4cGVjdGVkIFNPVVJDRSBtZXRob2QgZm9yIElDRS94LnggcmVxdWVzdABJbnZhbGlkIGNoYXIgaW4gdXJsIGZyYWdtZW50IHN0YXJ0AEV4cGVjdGVkIGRvdABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3N0YXR1cwBJbnZhbGlkIHJlc3BvbnNlIHN0YXR1cwBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zAFVzZXIgY2FsbGJhY2sgZXJyb3IAYG9uX3Jlc2V0YCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfaGVhZGVyYCBjYWxsYmFjayBlcnJvcgBgb25fbWVzc2FnZV9iZWdpbmAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3N0YXR1c19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX3ZlcnNpb25fY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl91cmxfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZWAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXRob2RfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfZmllbGRfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fbmFtZWAgY2FsbGJhY2sgZXJyb3IAVW5leHBlY3RlZCBjaGFyIGluIHVybCBzZXJ2ZXIASW52YWxpZCBoZWFkZXIgdmFsdWUgY2hhcgBJbnZhbGlkIGhlYWRlciBmaWVsZCBjaGFyAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdmVyc2lvbgBJbnZhbGlkIG1pbm9yIHZlcnNpb24ASW52YWxpZCBtYWpvciB2ZXJzaW9uAEV4cGVjdGVkIHNwYWNlIGFmdGVyIHZlcnNpb24ARXhwZWN0ZWQgQ1JMRiBhZnRlciB2ZXJzaW9uAEludmFsaWQgSFRUUCB2ZXJzaW9uAEludmFsaWQgaGVhZGVyIHRva2VuAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fdXJsAEludmFsaWQgY2hhcmFjdGVycyBpbiB1cmwAVW5leHBlY3RlZCBzdGFydCBjaGFyIGluIHVybABEb3VibGUgQCBpbiB1cmwARW1wdHkgQ29udGVudC1MZW5ndGgASW52YWxpZCBjaGFyYWN0ZXIgaW4gQ29udGVudC1MZW5ndGgARHVwbGljYXRlIENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhciBpbiB1cmwgcGF0aABDb250ZW50LUxlbmd0aCBjYW4ndCBiZSBwcmVzZW50IHdpdGggVHJhbnNmZXItRW5jb2RpbmcASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgc2l6ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl92YWx1ZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl92YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHZhbHVlAE1pc3NpbmcgZXhwZWN0ZWQgTEYgYWZ0ZXIgaGVhZGVyIHZhbHVlAEludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYCBoZWFkZXIgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZSB2YWx1ZQBJbnZhbGlkIGNoYXJhY3RlciBpbiBjaHVuayBleHRlbnNpb25zIHF1b3RlZCB2YWx1ZQBQYXVzZWQgYnkgb25faGVhZGVyc19jb21wbGV0ZQBJbnZhbGlkIEVPRiBzdGF0ZQBvbl9yZXNldCBwYXVzZQBvbl9jaHVua19oZWFkZXIgcGF1c2UAb25fbWVzc2FnZV9iZWdpbiBwYXVzZQBvbl9jaHVua19leHRlbnNpb25fdmFsdWUgcGF1c2UAb25fc3RhdHVzX2NvbXBsZXRlIHBhdXNlAG9uX3ZlcnNpb25fY29tcGxldGUgcGF1c2UAb25fdXJsX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2NvbXBsZXRlIHBhdXNlAG9uX2hlYWRlcl92YWx1ZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXNzYWdlX2NvbXBsZXRlIHBhdXNlAG9uX21ldGhvZF9jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfZmllbGRfY29tcGxldGUgcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUgcGF1c2UAVW5leHBlY3RlZCBzcGFjZSBhZnRlciBzdGFydCBsaW5lAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fY2h1bmtfZXh0ZW5zaW9uX25hbWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBuYW1lAFBhdXNlIG9uIENPTk5FQ1QvVXBncmFkZQBQYXVzZSBvbiBQUkkvVXBncmFkZQBFeHBlY3RlZCBIVFRQLzIgQ29ubmVjdGlvbiBQcmVmYWNlAFNwYW4gY2FsbGJhY2sgZXJyb3IgaW4gb25fbWV0aG9kAEV4cGVjdGVkIHNwYWNlIGFmdGVyIG1ldGhvZABTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2hlYWRlcl9maWVsZABQYXVzZWQASW52YWxpZCB3b3JkIGVuY291bnRlcmVkAEludmFsaWQgbWV0aG9kIGVuY291bnRlcmVkAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2NoZW1hAFJlcXVlc3QgaGFzIGludmFsaWQgYFRyYW5zZmVyLUVuY29kaW5nYABTV0lUQ0hfUFJPWFkAVVNFX1BST1hZAE1LQUNUSVZJVFkAVU5QUk9DRVNTQUJMRV9FTlRJVFkAQ09QWQBNT1ZFRF9QRVJNQU5FTlRMWQBUT09fRUFSTFkATk9USUZZAEZBSUxFRF9ERVBFTkRFTkNZAEJBRF9HQVRFV0FZAFBMQVkAUFVUAENIRUNLT1VUAEdBVEVXQVlfVElNRU9VVABSRVFVRVNUX1RJTUVPVVQATkVUV09SS19DT05ORUNUX1RJTUVPVVQAQ09OTkVDVElPTl9USU1FT1VUAExPR0lOX1RJTUVPVVQATkVUV09SS19SRUFEX1RJTUVPVVQAUE9TVABNSVNESVJFQ1RFRF9SRVFVRVNUAENMSUVOVF9DTE9TRURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX0xPQURfQkFMQU5DRURfUkVRVUVTVABCQURfUkVRVUVTVABIVFRQX1JFUVVFU1RfU0VOVF9UT19IVFRQU19QT1JUAFJFUE9SVABJTV9BX1RFQVBPVABSRVNFVF9DT05URU5UAE5PX0NPTlRFTlQAUEFSVElBTF9DT05URU5UAEhQRV9JTlZBTElEX0NPTlNUQU5UAEhQRV9DQl9SRVNFVABHRVQASFBFX1NUUklDVABDT05GTElDVABURU1QT1JBUllfUkVESVJFQ1QAUEVSTUFORU5UX1JFRElSRUNUAENPTk5FQ1QATVVMVElfU1RBVFVTAEhQRV9JTlZBTElEX1NUQVRVUwBUT09fTUFOWV9SRVFVRVNUUwBFQVJMWV9ISU5UUwBVTkFWQUlMQUJMRV9GT1JfTEVHQUxfUkVBU09OUwBPUFRJT05TAFNXSVRDSElOR19QUk9UT0NPTFMAVkFSSUFOVF9BTFNPX05FR09USUFURVMATVVMVElQTEVfQ0hPSUNFUwBJTlRFUk5BTF9TRVJWRVJfRVJST1IAV0VCX1NFUlZFUl9VTktOT1dOX0VSUk9SAFJBSUxHVU5fRVJST1IASURFTlRJVFlfUFJPVklERVJfQVVUSEVOVElDQVRJT05fRVJST1IAU1NMX0NFUlRJRklDQVRFX0VSUk9SAElOVkFMSURfWF9GT1JXQVJERURfRk9SAFNFVF9QQVJBTUVURVIAR0VUX1BBUkFNRVRFUgBIUEVfVVNFUgBTRUVfT1RIRVIASFBFX0NCX0NIVU5LX0hFQURFUgBNS0NBTEVOREFSAFNFVFVQAFdFQl9TRVJWRVJfSVNfRE9XTgBURUFSRE9XTgBIUEVfQ0xPU0VEX0NPTk5FQ1RJT04ASEVVUklTVElDX0VYUElSQVRJT04ARElTQ09OTkVDVEVEX09QRVJBVElPTgBOT05fQVVUSE9SSVRBVElWRV9JTkZPUk1BVElPTgBIUEVfSU5WQUxJRF9WRVJTSU9OAEhQRV9DQl9NRVNTQUdFX0JFR0lOAFNJVEVfSVNfRlJPWkVOAEhQRV9JTlZBTElEX0hFQURFUl9UT0tFTgBJTlZBTElEX1RPS0VOAEZPUkJJRERFTgBFTkhBTkNFX1lPVVJfQ0FMTQBIUEVfSU5WQUxJRF9VUkwAQkxPQ0tFRF9CWV9QQVJFTlRBTF9DT05UUk9MAE1LQ09MAEFDTABIUEVfSU5URVJOQUwAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRV9VTk9GRklDSUFMAEhQRV9PSwBVTkxJTksAVU5MT0NLAFBSSQBSRVRSWV9XSVRIAEhQRV9JTlZBTElEX0NPTlRFTlRfTEVOR1RIAEhQRV9VTkVYUEVDVEVEX0NPTlRFTlRfTEVOR1RIAEZMVVNIAFBST1BQQVRDSABNLVNFQVJDSABVUklfVE9PX0xPTkcAUFJPQ0VTU0lORwBNSVNDRUxMQU5FT1VTX1BFUlNJU1RFTlRfV0FSTklORwBNSVNDRUxMQU5FT1VTX1dBUk5JTkcASFBFX0lOVkFMSURfVFJBTlNGRVJfRU5DT0RJTkcARXhwZWN0ZWQgQ1JMRgBIUEVfSU5WQUxJRF9DSFVOS19TSVpFAE1PVkUAQ09OVElOVUUASFBFX0NCX1NUQVRVU19DT01QTEVURQBIUEVfQ0JfSEVBREVSU19DT01QTEVURQBIUEVfQ0JfVkVSU0lPTl9DT01QTEVURQBIUEVfQ0JfVVJMX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19DT01QTEVURQBIUEVfQ0JfSEVBREVSX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fVkFMVUVfQ09NUExFVEUASFBFX0NCX0NIVU5LX0VYVEVOU0lPTl9OQU1FX0NPTVBMRVRFAEhQRV9DQl9NRVNTQUdFX0NPTVBMRVRFAEhQRV9DQl9NRVRIT0RfQ09NUExFVEUASFBFX0NCX0hFQURFUl9GSUVMRF9DT01QTEVURQBERUxFVEUASFBFX0lOVkFMSURfRU9GX1NUQVRFAElOVkFMSURfU1NMX0NFUlRJRklDQVRFAFBBVVNFAE5PX1JFU1BPTlNFAFVOU1VQUE9SVEVEX01FRElBX1RZUEUAR09ORQBOT1RfQUNDRVBUQUJMRQBTRVJWSUNFX1VOQVZBSUxBQkxFAFJBTkdFX05PVF9TQVRJU0ZJQUJMRQBPUklHSU5fSVNfVU5SRUFDSEFCTEUAUkVTUE9OU0VfSVNfU1RBTEUAUFVSR0UATUVSR0UAUkVRVUVTVF9IRUFERVJfRklFTERTX1RPT19MQVJHRQBSRVFVRVNUX0hFQURFUl9UT09fTEFSR0UAUEFZTE9BRF9UT09fTEFSR0UASU5TVUZGSUNJRU5UX1NUT1JBR0UASFBFX1BBVVNFRF9VUEdSQURFAEhQRV9QQVVTRURfSDJfVVBHUkFERQBTT1VSQ0UAQU5OT1VOQ0UAVFJBQ0UASFBFX1VORVhQRUNURURfU1BBQ0UAREVTQ1JJQkUAVU5TVUJTQ1JJQkUAUkVDT1JEAEhQRV9JTlZBTElEX01FVEhPRABOT1RfRk9VTkQAUFJPUEZJTkQAVU5CSU5EAFJFQklORABVTkFVVEhPUklaRUQATUVUSE9EX05PVF9BTExPV0VEAEhUVFBfVkVSU0lPTl9OT1RfU1VQUE9SVEVEAEFMUkVBRFlfUkVQT1JURUQAQUNDRVBURUQATk9UX0lNUExFTUVOVEVEAExPT1BfREVURUNURUQASFBFX0NSX0VYUEVDVEVEAEhQRV9MRl9FWFBFQ1RFRABDUkVBVEVEAElNX1VTRUQASFBFX1BBVVNFRABUSU1FT1VUX09DQ1VSRUQAUEFZTUVOVF9SRVFVSVJFRABQUkVDT05ESVRJT05fUkVRVUlSRUQAUFJPWFlfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATkVUV09SS19BVVRIRU5USUNBVElPTl9SRVFVSVJFRABMRU5HVEhfUkVRVUlSRUQAU1NMX0NFUlRJRklDQVRFX1JFUVVJUkVEAFVQR1JBREVfUkVRVUlSRUQAUEFHRV9FWFBJUkVEAFBSRUNPTkRJVElPTl9GQUlMRUQARVhQRUNUQVRJT05fRkFJTEVEAFJFVkFMSURBVElPTl9GQUlMRUQAU1NMX0hBTkRTSEFLRV9GQUlMRUQATE9DS0VEAFRSQU5TRk9STUFUSU9OX0FQUExJRUQATk9UX01PRElGSUVEAE5PVF9FWFRFTkRFRABCQU5EV0lEVEhfTElNSVRfRVhDRUVERUQAU0lURV9JU19PVkVSTE9BREVEAEhFQUQARXhwZWN0ZWQgSFRUUC8AAF4TAAAmEwAAMBAAAPAXAACdEwAAFRIAADkXAADwEgAAChAAAHUSAACtEgAAghMAAE8UAAB/EAAAoBUAACMUAACJEgAAixQAAE0VAADUEQAAzxQAABAYAADJFgAA3BYAAMERAADgFwAAuxQAAHQUAAB8FQAA5RQAAAgXAAAfEAAAZRUAAKMUAAAoFQAAAhUAAJkVAAAsEAAAixkAAE8PAADUDgAAahAAAM4QAAACFwAAiQ4AAG4TAAAcEwAAZhQAAFYXAADBEwAAzRMAAGwTAABoFwAAZhcAAF8XAAAiEwAAzg8AAGkOAADYDgAAYxYAAMsTAACqDgAAKBcAACYXAADFEwAAXRYAAOgRAABnEwAAZRMAAPIWAABzEwAAHRcAAPkWAADzEQAAzw4AAM4VAAAMEgAAsxEAAKURAABhEAAAMhcAALsTAEH5NQsBAQBBkDYL4AEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB/TcLAQEAQZE4C14CAwICAgICAAACAgACAgACAgICAgICAgICAAQAAAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEH9OQsBAQBBkToLXgIAAgICAgIAAAICAAICAAICAgICAgICAgIAAwAEAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgIAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgICAgACAAIAQfA7Cw1sb3NlZWVwLWFsaXZlAEGJPAsBAQBBoDwL4AEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBBiT4LAQEAQaA+C+cBAQEBAQEBAQEBAQEBAgEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQFjaHVua2VkAEGwwAALXwEBAAEBAQEBAAABAQABAQABAQEBAQEBAQEBAAAAAAAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAEGQwgALIWVjdGlvbmVudC1sZW5ndGhvbnJveHktY29ubmVjdGlvbgBBwMIACy1yYW5zZmVyLWVuY29kaW5ncGdyYWRlDQoNCg0KU00NCg0KVFRQL0NFL1RTUC8AQfnCAAsFAQIAAQMAQZDDAAvgAQQBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH5xAALBQECAAEDAEGQxQAL4AEEAQEFAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cYACwQBAAABAEGRxwAL3wEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAEH6yAALBAEAAAIAQZDJAAtfAwQAAAQEBAQEBAQEBAQEBQQEBAQEBAQEBAQEBAAEAAYHBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQABAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAAAAQAQfrKAAsEAQAAAQBBkMsACwEBAEGqywALQQIAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwAAAAAAAAMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAEH6zAALBAEAAAEAQZDNAAsBAQBBms0ACwYCAAAAAAIAQbHNAAs6AwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB8M4AC5YBTk9VTkNFRUNLT1VUTkVDVEVURUNSSUJFTFVTSEVURUFEU0VBUkNIUkdFQ1RJVklUWUxFTkRBUlZFT1RJRllQVElPTlNDSFNFQVlTVEFUQ0hHRU9SRElSRUNUT1JUUkNIUEFSQU1FVEVSVVJDRUJTQ1JJQkVBUkRPV05BQ0VJTkROS0NLVUJTQ1JJQkVIVFRQL0FEVFAv","base64")});var Oke=H((CVn,Qke)=>{"use strict";f();var{Buffer:G1t}=require("node:buffer");Qke.exports=G1t.from("AGFzbQEAAAABJwdgAX8Bf2ADf39/AX9gAX8AYAJ/fwBgBH9/f38Bf2AAAGADf39/AALLAQgDZW52GHdhc21fb25faGVhZGVyc19jb21wbGV0ZQAEA2VudhV3YXNtX29uX21lc3NhZ2VfYmVnaW4AAANlbnYLd2FzbV9vbl91cmwAAQNlbnYOd2FzbV9vbl9zdGF0dXMAAQNlbnYUd2FzbV9vbl9oZWFkZXJfZmllbGQAAQNlbnYUd2FzbV9vbl9oZWFkZXJfdmFsdWUAAQNlbnYMd2FzbV9vbl9ib2R5AAEDZW52GHdhc21fb25fbWVzc2FnZV9jb21wbGV0ZQAAAy0sBQYAAAIAAAAAAAACAQIAAgICAAADAAAAAAMDAwMBAQEBAQEBAQEAAAIAAAAEBQFwARISBQMBAAIGCAF/AUGA1AQLB9EFIgZtZW1vcnkCAAtfaW5pdGlhbGl6ZQAIGV9faW5kaXJlY3RfZnVuY3Rpb25fdGFibGUBAAtsbGh0dHBfaW5pdAAJGGxsaHR0cF9zaG91bGRfa2VlcF9hbGl2ZQAvDGxsaHR0cF9hbGxvYwALBm1hbGxvYwAxC2xsaHR0cF9mcmVlAAwEZnJlZQAMD2xsaHR0cF9nZXRfdHlwZQANFWxsaHR0cF9nZXRfaHR0cF9tYWpvcgAOFWxsaHR0cF9nZXRfaHR0cF9taW5vcgAPEWxsaHR0cF9nZXRfbWV0aG9kABAWbGxodHRwX2dldF9zdGF0dXNfY29kZQAREmxsaHR0cF9nZXRfdXBncmFkZQASDGxsaHR0cF9yZXNldAATDmxsaHR0cF9leGVjdXRlABQUbGxodHRwX3NldHRpbmdzX2luaXQAFQ1sbGh0dHBfZmluaXNoABYMbGxodHRwX3BhdXNlABcNbGxodHRwX3Jlc3VtZQAYG2xsaHR0cF9yZXN1bWVfYWZ0ZXJfdXBncmFkZQAZEGxsaHR0cF9nZXRfZXJybm8AGhdsbGh0dHBfZ2V0X2Vycm9yX3JlYXNvbgAbF2xsaHR0cF9zZXRfZXJyb3JfcmVhc29uABwUbGxodHRwX2dldF9lcnJvcl9wb3MAHRFsbGh0dHBfZXJybm9fbmFtZQAeEmxsaHR0cF9tZXRob2RfbmFtZQAfEmxsaHR0cF9zdGF0dXNfbmFtZQAgGmxsaHR0cF9zZXRfbGVuaWVudF9oZWFkZXJzACEhbGxodHRwX3NldF9sZW5pZW50X2NodW5rZWRfbGVuZ3RoACIdbGxodHRwX3NldF9sZW5pZW50X2tlZXBfYWxpdmUAIyRsbGh0dHBfc2V0X2xlbmllbnRfdHJhbnNmZXJfZW5jb2RpbmcAJBhsbGh0dHBfbWVzc2FnZV9uZWVkc19lb2YALgkXAQBBAQsRAQIDBAUKBgcrLSwqKSglJyYK77MCLBYAQYjQACgCAARAAAtBiNAAQQE2AgALFAAgABAwIAAgAjYCOCAAIAE6ACgLFAAgACAALwEyIAAtAC4gABAvEAALHgEBf0HAABAyIgEQMCABQYAINgI4IAEgADoAKCABC48MAQd/AkAgAEUNACAAQQhrIgEgAEEEaygCACIAQXhxIgRqIQUCQCAAQQFxDQAgAEEDcUUNASABIAEoAgAiAGsiAUGc0AAoAgBJDQEgACAEaiEEAkACQEGg0AAoAgAgAUcEQCAAQf8BTQRAIABBA3YhAyABKAIIIgAgASgCDCICRgRAQYzQAEGM0AAoAgBBfiADd3E2AgAMBQsgAiAANgIIIAAgAjYCDAwECyABKAIYIQYgASABKAIMIgBHBEAgACABKAIIIgI2AgggAiAANgIMDAMLIAFBFGoiAygCACICRQRAIAEoAhAiAkUNAiABQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFKAIEIgBBA3FBA0cNAiAFIABBfnE2AgRBlNAAIAQ2AgAgBSAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCABKAIcIgJBAnRBvNIAaiIDKAIAIAFGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgAUYbaiAANgIAIABFDQELIAAgBjYCGCABKAIQIgIEQCAAIAI2AhAgAiAANgIYCyABQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAFTw0AIAUoAgQiAEEBcUUNAAJAAkACQAJAIABBAnFFBEBBpNAAKAIAIAVGBEBBpNAAIAE2AgBBmNAAQZjQACgCACAEaiIANgIAIAEgAEEBcjYCBCABQaDQACgCAEcNBkGU0ABBADYCAEGg0ABBADYCAAwGC0Gg0AAoAgAgBUYEQEGg0AAgATYCAEGU0ABBlNAAKAIAIARqIgA2AgAgASAAQQFyNgIEIAAgAWogADYCAAwGCyAAQXhxIARqIQQgAEH/AU0EQCAAQQN2IQMgBSgCCCIAIAUoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAULIAIgADYCCCAAIAI2AgwMBAsgBSgCGCEGIAUgBSgCDCIARwRAQZzQACgCABogACAFKAIIIgI2AgggAiAANgIMDAMLIAVBFGoiAygCACICRQRAIAUoAhAiAkUNAiAFQRBqIQMLA0AgAyEHIAIiAEEUaiIDKAIAIgINACAAQRBqIQMgACgCECICDQALIAdBADYCAAwCCyAFIABBfnE2AgQgASAEaiAENgIAIAEgBEEBcjYCBAwDC0EAIQALIAZFDQACQCAFKAIcIgJBAnRBvNIAaiIDKAIAIAVGBEAgAyAANgIAIAANAUGQ0ABBkNAAKAIAQX4gAndxNgIADAILIAZBEEEUIAYoAhAgBUYbaiAANgIAIABFDQELIAAgBjYCGCAFKAIQIgIEQCAAIAI2AhAgAiAANgIYCyAFQRRqKAIAIgJFDQAgAEEUaiACNgIAIAIgADYCGAsgASAEaiAENgIAIAEgBEEBcjYCBCABQaDQACgCAEcNAEGU0AAgBDYCAAwBCyAEQf8BTQRAIARBeHFBtNAAaiEAAn9BjNAAKAIAIgJBASAEQQN2dCIDcUUEQEGM0AAgAiADcjYCACAADAELIAAoAggLIgIgATYCDCAAIAE2AgggASAANgIMIAEgAjYCCAwBC0EfIQIgBEH///8HTQRAIARBJiAEQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAgsgASACNgIcIAFCADcCECACQQJ0QbzSAGohAAJAQZDQACgCACIDQQEgAnQiB3FFBEAgACABNgIAQZDQACADIAdyNgIAIAEgADYCGCABIAE2AgggASABNgIMDAELIARBGSACQQF2a0EAIAJBH0cbdCECIAAoAgAhAAJAA0AgACIDKAIEQXhxIARGDQEgAkEddiEAIAJBAXQhAiADIABBBHFqQRBqIgcoAgAiAA0ACyAHIAE2AgAgASADNgIYIAEgATYCDCABIAE2AggMAQsgAygCCCIAIAE2AgwgAyABNgIIIAFBADYCGCABIAM2AgwgASAANgIIC0Gs0ABBrNAAKAIAQQFrIgBBfyAAGzYCAAsLBwAgAC0AKAsHACAALQAqCwcAIAAtACsLBwAgAC0AKQsHACAALwEyCwcAIAAtAC4LQAEEfyAAKAIYIQEgAC0ALSECIAAtACghAyAAKAI4IQQgABAwIAAgBDYCOCAAIAM6ACggACACOgAtIAAgATYCGAu74gECB38DfiABIAJqIQQCQCAAIgIoAgwiAA0AIAIoAgQEQCACIAE2AgQLIwBBEGsiCCQAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAIoAhwiA0EBaw7dAdoBAdkBAgMEBQYHCAkKCwwNDtgBDxDXARES1gETFBUWFxgZGhvgAd8BHB0e1QEfICEiIyQl1AEmJygpKiss0wHSAS0u0QHQAS8wMTIzNDU2Nzg5Ojs8PT4/QEFCQ0RFRtsBR0hJSs8BzgFLzQFMzAFNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AAYEBggGDAYQBhQGGAYcBiAGJAYoBiwGMAY0BjgGPAZABkQGSAZMBlAGVAZYBlwGYAZkBmgGbAZwBnQGeAZ8BoAGhAaIBowGkAaUBpgGnAagBqQGqAasBrAGtAa4BrwGwAbEBsgGzAbQBtQG2AbcBywHKAbgByQG5AcgBugG7AbwBvQG+Ab8BwAHBAcIBwwHEAcUBxgEA3AELQQAMxgELQQ4MxQELQQ0MxAELQQ8MwwELQRAMwgELQRMMwQELQRQMwAELQRUMvwELQRYMvgELQRgMvQELQRkMvAELQRoMuwELQRsMugELQRwMuQELQR0MuAELQQgMtwELQR4MtgELQSAMtQELQR8MtAELQQcMswELQSEMsgELQSIMsQELQSMMsAELQSQMrwELQRIMrgELQREMrQELQSUMrAELQSYMqwELQScMqgELQSgMqQELQcMBDKgBC0EqDKcBC0ErDKYBC0EsDKUBC0EtDKQBC0EuDKMBC0EvDKIBC0HEAQyhAQtBMAygAQtBNAyfAQtBDAyeAQtBMQydAQtBMgycAQtBMwybAQtBOQyaAQtBNQyZAQtBxQEMmAELQQsMlwELQToMlgELQTYMlQELQQoMlAELQTcMkwELQTgMkgELQTwMkQELQTsMkAELQT0MjwELQQkMjgELQSkMjQELQT4MjAELQT8MiwELQcAADIoBC0HBAAyJAQtBwgAMiAELQcMADIcBC0HEAAyGAQtBxQAMhQELQcYADIQBC0EXDIMBC0HHAAyCAQtByAAMgQELQckADIABC0HKAAx/C0HLAAx+C0HNAAx9C0HMAAx8C0HOAAx7C0HPAAx6C0HQAAx5C0HRAAx4C0HSAAx3C0HTAAx2C0HUAAx1C0HWAAx0C0HVAAxzC0EGDHILQdcADHELQQUMcAtB2AAMbwtBBAxuC0HZAAxtC0HaAAxsC0HbAAxrC0HcAAxqC0EDDGkLQd0ADGgLQd4ADGcLQd8ADGYLQeEADGULQeAADGQLQeIADGMLQeMADGILQQIMYQtB5AAMYAtB5QAMXwtB5gAMXgtB5wAMXQtB6AAMXAtB6QAMWwtB6gAMWgtB6wAMWQtB7AAMWAtB7QAMVwtB7gAMVgtB7wAMVQtB8AAMVAtB8QAMUwtB8gAMUgtB8wAMUQtB9AAMUAtB9QAMTwtB9gAMTgtB9wAMTQtB+AAMTAtB+QAMSwtB+gAMSgtB+wAMSQtB/AAMSAtB/QAMRwtB/gAMRgtB/wAMRQtBgAEMRAtBgQEMQwtBggEMQgtBgwEMQQtBhAEMQAtBhQEMPwtBhgEMPgtBhwEMPQtBiAEMPAtBiQEMOwtBigEMOgtBiwEMOQtBjAEMOAtBjQEMNwtBjgEMNgtBjwEMNQtBkAEMNAtBkQEMMwtBkgEMMgtBkwEMMQtBlAEMMAtBlQEMLwtBlgEMLgtBlwEMLQtBmAEMLAtBmQEMKwtBmgEMKgtBmwEMKQtBnAEMKAtBnQEMJwtBngEMJgtBnwEMJQtBoAEMJAtBoQEMIwtBogEMIgtBowEMIQtBpAEMIAtBpQEMHwtBpgEMHgtBpwEMHQtBqAEMHAtBqQEMGwtBqgEMGgtBqwEMGQtBrAEMGAtBrQEMFwtBrgEMFgtBAQwVC0GvAQwUC0GwAQwTC0GxAQwSC0GzAQwRC0GyAQwQC0G0AQwPC0G1AQwOC0G2AQwNC0G3AQwMC0G4AQwLC0G5AQwKC0G6AQwJC0G7AQwIC0HGAQwHC0G8AQwGC0G9AQwFC0G+AQwEC0G/AQwDC0HAAQwCC0HCAQwBC0HBAQshAwNAAkACQAJAAkACQAJAAkACQAJAIAICfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAgJ/AkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACfwJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACfwJAAkACQAJAAn8CQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCADDsYBAAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHyAhIyUmKCorLC8wMTIzNDU2Nzk6Ozw9lANAQkRFRklLTk9QUVJTVFVWWFpbXF1eX2BhYmNkZWZnaGpsb3Bxc3V2eHl6e3x/gAGBAYIBgwGEAYUBhgGHAYgBiQGKAYsBjAGNAY4BjwGQAZEBkgGTAZQBlQGWAZcBmAGZAZoBmwGcAZ0BngGfAaABoQGiAaMBpAGlAaYBpwGoAakBqgGrAawBrQGuAa8BsAGxAbIBswG0AbUBtgG3AbgBuQG6AbsBvAG9Ab4BvwHAAcEBwgHDAcQBxQHGAccByAHJAcsBzAHNAc4BzwGKA4kDiAOHA4QDgwOAA/sC+gL5AvgC9wL0AvMC8gLLAsECsALZAQsgASAERw3wAkHdASEDDLMDCyABIARHDcgBQcMBIQMMsgMLIAEgBEcNe0H3ACEDDLEDCyABIARHDXBB7wAhAwywAwsgASAERw1pQeoAIQMMrwMLIAEgBEcNZUHoACEDDK4DCyABIARHDWJB5gAhAwytAwsgASAERw0aQRghAwysAwsgASAERw0VQRIhAwyrAwsgASAERw1CQcUAIQMMqgMLIAEgBEcNNEE/IQMMqQMLIAEgBEcNMkE8IQMMqAMLIAEgBEcNK0ExIQMMpwMLIAItAC5BAUYNnwMMwQILQQAhAAJAAkACQCACLQAqRQ0AIAItACtFDQAgAi8BMCIDQQJxRQ0BDAILIAIvATAiA0EBcUUNAQtBASEAIAItAChBAUYNACACLwEyIgVB5ABrQeQASQ0AIAVBzAFGDQAgBUGwAkYNACADQcAAcQ0AQQAhACADQYgEcUGABEYNACADQShxQQBHIQALIAJBADsBMCACQQA6AC8gAEUN3wIgAkIANwMgDOACC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAARQ3MASAAQRVHDd0CIAJBBDYCHCACIAE2AhQgAkGwGDYCECACQRU2AgxBACEDDKQDCyABIARGBEBBBiEDDKQDCyABQQFqIQFBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAA3ZAgwcCyACQgA3AyBBEiEDDIkDCyABIARHDRZBHSEDDKEDCyABIARHBEAgAUEBaiEBQRAhAwyIAwtBByEDDKADCyACIAIpAyAiCiAEIAFrrSILfSIMQgAgCiAMWhs3AyAgCiALWA3UAkEIIQMMnwMLIAEgBEcEQCACQQk2AgggAiABNgIEQRQhAwyGAwtBCSEDDJ4DCyACKQMgQgBSDccBIAIgAi8BMEGAAXI7ATAMQgsgASAERw0/QdAAIQMMnAMLIAEgBEYEQEELIQMMnAMLIAFBAWohAUEAIQACQCACKAI4IgNFDQAgAygCUCIDRQ0AIAIgAxEAACEACyAADc8CDMYBC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ3GASAAQRVHDc0CIAJBCzYCHCACIAE2AhQgAkGCGTYCECACQRU2AgxBACEDDJoDC0EAIQACQCACKAI4IgNFDQAgAygCSCIDRQ0AIAIgAxEAACEACyAARQ0MIABBFUcNygIgAkEaNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMmQMLQQAhAAJAIAIoAjgiA0UNACADKAJMIgNFDQAgAiADEQAAIQALIABFDcQBIABBFUcNxwIgAkELNgIcIAIgATYCFCACQZEXNgIQIAJBFTYCDEEAIQMMmAMLIAEgBEYEQEEPIQMMmAMLIAEtAAAiAEE7Rg0HIABBDUcNxAIgAUEBaiEBDMMBC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3DASAAQRVHDcICIAJBDzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJYDCwNAIAEtAABB8DVqLQAAIgBBAUcEQCAAQQJHDcECIAIoAgQhAEEAIQMgAkEANgIEIAIgACABQQFqIgEQLSIADcICDMUBCyAEIAFBAWoiAUcNAAtBEiEDDJUDC0EAIQACQCACKAI4IgNFDQAgAygCTCIDRQ0AIAIgAxEAACEACyAARQ3FASAAQRVHDb0CIAJBGzYCHCACIAE2AhQgAkGRFzYCECACQRU2AgxBACEDDJQDCyABIARGBEBBFiEDDJQDCyACQQo2AgggAiABNgIEQQAhAAJAIAIoAjgiA0UNACADKAJIIgNFDQAgAiADEQAAIQALIABFDcIBIABBFUcNuQIgAkEVNgIcIAIgATYCFCACQYIZNgIQIAJBFTYCDEEAIQMMkwMLIAEgBEcEQANAIAEtAABB8DdqLQAAIgBBAkcEQAJAIABBAWsOBMQCvQIAvgK9AgsgAUEBaiEBQQghAwz8AgsgBCABQQFqIgFHDQALQRUhAwyTAwtBFSEDDJIDCwNAIAEtAABB8DlqLQAAIgBBAkcEQCAAQQFrDgTFArcCwwK4ArcCCyAEIAFBAWoiAUcNAAtBGCEDDJEDCyABIARHBEAgAkELNgIIIAIgATYCBEEHIQMM+AILQRkhAwyQAwsgAUEBaiEBDAILIAEgBEYEQEEaIQMMjwMLAkAgAS0AAEENaw4UtQG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwG/Ab8BvwEAvwELQQAhAyACQQA2AhwgAkGvCzYCECACQQI2AgwgAiABQQFqNgIUDI4DCyABIARGBEBBGyEDDI4DCyABLQAAIgBBO0cEQCAAQQ1HDbECIAFBAWohAQy6AQsgAUEBaiEBC0EiIQMM8wILIAEgBEYEQEEcIQMMjAMLQgAhCgJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAgAS0AAEEwaw43wQLAAgABAgMEBQYH0AHQAdAB0AHQAdAB0AEICQoLDA3QAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdABDg8QERIT0AELQgIhCgzAAgtCAyEKDL8CC0IEIQoMvgILQgUhCgy9AgtCBiEKDLwCC0IHIQoMuwILQgghCgy6AgtCCSEKDLkCC0IKIQoMuAILQgshCgy3AgtCDCEKDLYCC0INIQoMtQILQg4hCgy0AgtCDyEKDLMCC0IKIQoMsgILQgshCgyxAgtCDCEKDLACC0INIQoMrwILQg4hCgyuAgtCDyEKDK0CC0IAIQoCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIAEtAABBMGsON8ACvwIAAQIDBAUGB74CvgK+Ar4CvgK+Ar4CCAkKCwwNvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ar4CvgK+Ag4PEBESE74CC0ICIQoMvwILQgMhCgy+AgtCBCEKDL0CC0IFIQoMvAILQgYhCgy7AgtCByEKDLoCC0IIIQoMuQILQgkhCgy4AgtCCiEKDLcCC0ILIQoMtgILQgwhCgy1AgtCDSEKDLQCC0IOIQoMswILQg8hCgyyAgtCCiEKDLECC0ILIQoMsAILQgwhCgyvAgtCDSEKDK4CC0IOIQoMrQILQg8hCgysAgsgAiACKQMgIgogBCABa60iC30iDEIAIAogDFobNwMgIAogC1gNpwJBHyEDDIkDCyABIARHBEAgAkEJNgIIIAIgATYCBEElIQMM8AILQSAhAwyIAwtBASEFIAIvATAiA0EIcUUEQCACKQMgQgBSIQULAkAgAi0ALgRAQQEhACACLQApQQVGDQEgA0HAAHFFIAVxRQ0BC0EAIQAgA0HAAHENAEECIQAgA0EIcQ0AIANBgARxBEACQCACLQAoQQFHDQAgAi0ALUEKcQ0AQQUhAAwCC0EEIQAMAQsgA0EgcUUEQAJAIAItAChBAUYNACACLwEyIgBB5ABrQeQASQ0AIABBzAFGDQAgAEGwAkYNAEEEIQAgA0EocUUNAiADQYgEcUGABEYNAgtBACEADAELQQBBAyACKQMgUBshAAsgAEEBaw4FvgIAsAEBpAKhAgtBESEDDO0CCyACQQE6AC8MhAMLIAEgBEcNnQJBJCEDDIQDCyABIARHDRxBxgAhAwyDAwtBACEAAkAgAigCOCIDRQ0AIAMoAkQiA0UNACACIAMRAAAhAAsgAEUNJyAAQRVHDZgCIAJB0AA2AhwgAiABNgIUIAJBkRg2AhAgAkEVNgIMQQAhAwyCAwsgASAERgRAQSghAwyCAwtBACEDIAJBADYCBCACQQw2AgggAiABIAEQKiIARQ2UAiACQSc2AhwgAiABNgIUIAIgADYCDAyBAwsgASAERgRAQSkhAwyBAwsgAS0AACIAQSBGDRMgAEEJRw2VAiABQQFqIQEMFAsgASAERwRAIAFBAWohAQwWC0EqIQMM/wILIAEgBEYEQEErIQMM/wILIAEtAAAiAEEJRyAAQSBHcQ2QAiACLQAsQQhHDd0CIAJBADoALAzdAgsgASAERgRAQSwhAwz+AgsgAS0AAEEKRw2OAiABQQFqIQEMsAELIAEgBEcNigJBLyEDDPwCCwNAIAEtAAAiAEEgRwRAIABBCmsOBIQCiAKIAoQChgILIAQgAUEBaiIBRw0AC0ExIQMM+wILQTIhAyABIARGDfoCIAIoAgAiACAEIAFraiEHIAEgAGtBA2ohBgJAA0AgAEHwO2otAAAgAS0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDQEgAEEDRgRAQQYhAQziAgsgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAc2AgAM+wILIAJBADYCAAyGAgtBMyEDIAQgASIARg35AiAEIAFrIAIoAgAiAWohByAAIAFrQQhqIQYCQANAIAFB9DtqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBCEYEQEEFIQEM4QILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPoCCyACQQA2AgAgACEBDIUCC0E0IQMgBCABIgBGDfgCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgJAA0AgAUHQwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw0BIAFBBUYEQEEHIQEM4AILIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADPkCCyACQQA2AgAgACEBDIQCCyABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRg0JDIECCyAEIAFBAWoiAUcNAAtBMCEDDPgCC0EwIQMM9wILIAEgBEcEQANAIAEtAAAiAEEgRwRAIABBCmsOBP8B/gH+Af8B/gELIAQgAUEBaiIBRw0AC0E4IQMM9wILQTghAwz2AgsDQCABLQAAIgBBIEcgAEEJR3EN9gEgBCABQQFqIgFHDQALQTwhAwz1AgsDQCABLQAAIgBBIEcEQAJAIABBCmsOBPkBBAT5AQALIABBLEYN9QEMAwsgBCABQQFqIgFHDQALQT8hAwz0AgtBwAAhAyABIARGDfMCIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAEGAQGstAAAgAS0AAEEgckcNASAAQQZGDdsCIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPQCCyACQQA2AgALQTYhAwzZAgsgASAERgRAQcEAIQMM8gILIAJBDDYCCCACIAE2AgQgAi0ALEEBaw4E+wHuAewB6wHUAgsgAUEBaiEBDPoBCyABIARHBEADQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxIgBBCUYNACAAQSBGDQACQAJAAkACQCAAQeMAaw4TAAMDAwMDAwMBAwMDAwMDAwMDAgMLIAFBAWohAUExIQMM3AILIAFBAWohAUEyIQMM2wILIAFBAWohAUEzIQMM2gILDP4BCyAEIAFBAWoiAUcNAAtBNSEDDPACC0E1IQMM7wILIAEgBEcEQANAIAEtAABBgDxqLQAAQQFHDfcBIAQgAUEBaiIBRw0AC0E9IQMM7wILQT0hAwzuAgtBACEAAkAgAigCOCIDRQ0AIAMoAkAiA0UNACACIAMRAAAhAAsgAEUNASAAQRVHDeYBIAJBwgA2AhwgAiABNgIUIAJB4xg2AhAgAkEVNgIMQQAhAwztAgsgAUEBaiEBC0E8IQMM0gILIAEgBEYEQEHCACEDDOsCCwJAA0ACQCABLQAAQQlrDhgAAswCzALRAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAswCzALMAgDMAgsgBCABQQFqIgFHDQALQcIAIQMM6wILIAFBAWohASACLQAtQQFxRQ3+AQtBLCEDDNACCyABIARHDd4BQcQAIQMM6AILA0AgAS0AAEGQwABqLQAAQQFHDZwBIAQgAUEBaiIBRw0AC0HFACEDDOcCCyABLQAAIgBBIEYN/gEgAEE6Rw3AAiACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgAN3gEM3QELQccAIQMgBCABIgBGDeUCIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFBkMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvwIgAUEFRg3CAiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzlAgtByAAhAyAEIAEiAEYN5AIgBCABayACKAIAIgFqIQcgACABa0EJaiEGA0AgAUGWwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw2+AkECIAFBCUYNwgIaIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOQCCyABIARGBEBByQAhAwzkAgsCQAJAIAEtAAAiAEEgciAAIABBwQBrQf8BcUEaSRtB/wFxQe4Aaw4HAL8CvwK/Ar8CvwIBvwILIAFBAWohAUE+IQMMywILIAFBAWohAUE/IQMMygILQcoAIQMgBCABIgBGDeICIAQgAWsgAigCACIBaiEGIAAgAWtBAWohBwNAIAFBoMIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNvAIgAUEBRg2+AiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBjYCAAziAgtBywAhAyAEIAEiAEYN4QIgBCABayACKAIAIgFqIQcgACABa0EOaiEGA0AgAUGiwgBqLQAAIAAtAAAiBUEgciAFIAVBwQBrQf8BcUEaSRtB/wFxRw27AiABQQ5GDb4CIAFBAWohASAEIABBAWoiAEcNAAsgAiAHNgIADOECC0HMACEDIAQgASIARg3gAiAEIAFrIAIoAgAiAWohByAAIAFrQQ9qIQYDQCABQcDCAGotAAAgAC0AACIFQSByIAUgBUHBAGtB/wFxQRpJG0H/AXFHDboCQQMgAUEPRg2+AhogAUEBaiEBIAQgAEEBaiIARw0ACyACIAc2AgAM4AILQc0AIQMgBCABIgBGDd8CIAQgAWsgAigCACIBaiEHIAAgAWtBBWohBgNAIAFB0MIAai0AACAALQAAIgVBIHIgBSAFQcEAa0H/AXFBGkkbQf8BcUcNuQJBBCABQQVGDb0CGiABQQFqIQEgBCAAQQFqIgBHDQALIAIgBzYCAAzfAgsgASAERgRAQc4AIQMM3wILAkACQAJAAkAgAS0AACIAQSByIAAgAEHBAGtB/wFxQRpJG0H/AXFB4wBrDhMAvAK8ArwCvAK8ArwCvAK8ArwCvAK8ArwCAbwCvAK8AgIDvAILIAFBAWohAUHBACEDDMgCCyABQQFqIQFBwgAhAwzHAgsgAUEBaiEBQcMAIQMMxgILIAFBAWohAUHEACEDDMUCCyABIARHBEAgAkENNgIIIAIgATYCBEHFACEDDMUCC0HPACEDDN0CCwJAAkAgAS0AAEEKaw4EAZABkAEAkAELIAFBAWohAQtBKCEDDMMCCyABIARGBEBB0QAhAwzcAgsgAS0AAEEgRw0AIAFBAWohASACLQAtQQFxRQ3QAQtBFyEDDMECCyABIARHDcsBQdIAIQMM2QILQdMAIQMgASAERg3YAiACKAIAIgAgBCABa2ohBiABIABrQQFqIQUDQCABLQAAIABB1sIAai0AAEcNxwEgAEEBRg3KASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBjYCAAzYAgsgASAERgRAQdUAIQMM2AILIAEtAABBCkcNwgEgAUEBaiEBDMoBCyABIARGBEBB1gAhAwzXAgsCQAJAIAEtAABBCmsOBADDAcMBAcMBCyABQQFqIQEMygELIAFBAWohAUHKACEDDL0CC0EAIQACQCACKAI4IgNFDQAgAygCPCIDRQ0AIAIgAxEAACEACyAADb8BQc0AIQMMvAILIAItAClBIkYNzwIMiQELIAQgASIFRgRAQdsAIQMM1AILQQAhAEEBIQFBASEGQQAhAwJAAn8CQAJAAkACQAJAAkACQCAFLQAAQTBrDgrFAcQBAAECAwQFBgjDAQtBAgwGC0EDDAULQQQMBAtBBQwDC0EGDAILQQcMAQtBCAshA0EAIQFBACEGDL0BC0EJIQNBASEAQQAhAUEAIQYMvAELIAEgBEYEQEHdACEDDNMCCyABLQAAQS5HDbgBIAFBAWohAQyIAQsgASAERw22AUHfACEDDNECCyABIARHBEAgAkEONgIIIAIgATYCBEHQACEDDLgCC0HgACEDDNACC0HhACEDIAEgBEYNzwIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGA0AgAS0AACAAQeLCAGotAABHDbEBIABBA0YNswEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMzwILQeIAIQMgASAERg3OAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYDQCABLQAAIABB5sIAai0AAEcNsAEgAEECRg2vASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAzOAgtB4wAhAyABIARGDc0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgNAIAEtAAAgAEHpwgBqLQAARw2vASAAQQNGDa0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADM0CCyABIARGBEBB5QAhAwzNAgsgAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANqgFB1gAhAwyzAgsgASAERwRAA0AgAS0AACIAQSBHBEACQAJAAkAgAEHIAGsOCwABswGzAbMBswGzAbMBswGzAQKzAQsgAUEBaiEBQdIAIQMMtwILIAFBAWohAUHTACEDDLYCCyABQQFqIQFB1AAhAwy1AgsgBCABQQFqIgFHDQALQeQAIQMMzAILQeQAIQMMywILA0AgAS0AAEHwwgBqLQAAIgBBAUcEQCAAQQJrDgOnAaYBpQGkAQsgBCABQQFqIgFHDQALQeYAIQMMygILIAFBAWogASAERw0CGkHnACEDDMkCCwNAIAEtAABB8MQAai0AACIAQQFHBEACQCAAQQJrDgSiAaEBoAEAnwELQdcAIQMMsQILIAQgAUEBaiIBRw0AC0HoACEDDMgCCyABIARGBEBB6QAhAwzIAgsCQCABLQAAIgBBCmsOGrcBmwGbAbQBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBmwGbAZsBpAGbAZsBAJkBCyABQQFqCyEBQQYhAwytAgsDQCABLQAAQfDGAGotAABBAUcNfSAEIAFBAWoiAUcNAAtB6gAhAwzFAgsgAUEBaiABIARHDQIaQesAIQMMxAILIAEgBEYEQEHsACEDDMQCCyABQQFqDAELIAEgBEYEQEHtACEDDMMCCyABQQFqCyEBQQQhAwyoAgsgASAERgRAQe4AIQMMwQILAkACQAJAIAEtAABB8MgAai0AAEEBaw4HkAGPAY4BAHwBAo0BCyABQQFqIQEMCwsgAUEBagyTAQtBACEDIAJBADYCHCACQZsSNgIQIAJBBzYCDCACIAFBAWo2AhQMwAILAkADQCABLQAAQfDIAGotAAAiAEEERwRAAkACQCAAQQFrDgeUAZMBkgGNAQAEAY0BC0HaACEDDKoCCyABQQFqIQFB3AAhAwypAgsgBCABQQFqIgFHDQALQe8AIQMMwAILIAFBAWoMkQELIAQgASIARgRAQfAAIQMMvwILIAAtAABBL0cNASAAQQFqIQEMBwsgBCABIgBGBEBB8QAhAwy+AgsgAC0AACIBQS9GBEAgAEEBaiEBQd0AIQMMpQILIAFBCmsiA0EWSw0AIAAhAUEBIAN0QYmAgAJxDfkBC0EAIQMgAkEANgIcIAIgADYCFCACQYwcNgIQIAJBBzYCDAy8AgsgASAERwRAIAFBAWohAUHeACEDDKMCC0HyACEDDLsCCyABIARGBEBB9AAhAwy7AgsCQCABLQAAQfDMAGotAABBAWsOA/cBcwCCAQtB4QAhAwyhAgsgASAERwRAA0AgAS0AAEHwygBqLQAAIgBBA0cEQAJAIABBAWsOAvkBAIUBC0HfACEDDKMCCyAEIAFBAWoiAUcNAAtB8wAhAwy6AgtB8wAhAwy5AgsgASAERwRAIAJBDzYCCCACIAE2AgRB4AAhAwygAgtB9QAhAwy4AgsgASAERgRAQfYAIQMMuAILIAJBDzYCCCACIAE2AgQLQQMhAwydAgsDQCABLQAAQSBHDY4CIAQgAUEBaiIBRw0AC0H3ACEDDLUCCyABIARGBEBB+AAhAwy1AgsgAS0AAEEgRw16IAFBAWohAQxbC0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAADXgMgAILIAEgBEYEQEH6ACEDDLMCCyABLQAAQcwARw10IAFBAWohAUETDHYLQfsAIQMgASAERg2xAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYDQCABLQAAIABB8M4Aai0AAEcNcyAAQQVGDXUgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMsQILIAEgBEYEQEH8ACEDDLECCwJAAkAgAS0AAEHDAGsODAB0dHR0dHR0dHR0AXQLIAFBAWohAUHmACEDDJgCCyABQQFqIQFB5wAhAwyXAgtB/QAhAyABIARGDa8CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDXIgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADLACCyACQQA2AgAgBkEBaiEBQRAMcwtB/gAhAyABIARGDa4CIAIoAgAiACAEIAFraiEFIAEgAGtBBWohBgJAA0AgAS0AACAAQfbOAGotAABHDXEgAEEFRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK8CCyACQQA2AgAgBkEBaiEBQRYMcgtB/wAhAyABIARGDa0CIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQfzOAGotAABHDXAgAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADK4CCyACQQA2AgAgBkEBaiEBQQUMcQsgASAERgRAQYABIQMMrQILIAEtAABB2QBHDW4gAUEBaiEBQQgMcAsgASAERgRAQYEBIQMMrAILAkACQCABLQAAQc4Aaw4DAG8BbwsgAUEBaiEBQesAIQMMkwILIAFBAWohAUHsACEDDJICCyABIARGBEBBggEhAwyrAgsCQAJAIAEtAABByABrDggAbm5ubm5uAW4LIAFBAWohAUHqACEDDJICCyABQQFqIQFB7QAhAwyRAgtBgwEhAyABIARGDakCIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQYDPAGotAABHDWwgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKoCCyACQQA2AgAgBkEBaiEBQQAMbQtBhAEhAyABIARGDagCIAIoAgAiACAEIAFraiEFIAEgAGtBBGohBgJAA0AgAS0AACAAQYPPAGotAABHDWsgAEEERg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADKkCCyACQQA2AgAgBkEBaiEBQSMMbAsgASAERgRAQYUBIQMMqAILAkACQCABLQAAQcwAaw4IAGtra2trawFrCyABQQFqIQFB7wAhAwyPAgsgAUEBaiEBQfAAIQMMjgILIAEgBEYEQEGGASEDDKcCCyABLQAAQcUARw1oIAFBAWohAQxgC0GHASEDIAEgBEYNpQIgAigCACIAIAQgAWtqIQUgASAAa0EDaiEGAkADQCABLQAAIABBiM8Aai0AAEcNaCAAQQNGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpgILIAJBADYCACAGQQFqIQFBLQxpC0GIASEDIAEgBEYNpAIgAigCACIAIAQgAWtqIQUgASAAa0EIaiEGAkADQCABLQAAIABB0M8Aai0AAEcNZyAAQQhGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMpQILIAJBADYCACAGQQFqIQFBKQxoCyABIARGBEBBiQEhAwykAgtBASABLQAAQd8ARw1nGiABQQFqIQEMXgtBigEhAyABIARGDaICIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgNAIAEtAAAgAEGMzwBqLQAARw1kIABBAUYN+gEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMogILQYsBIQMgASAERg2hAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGOzwBqLQAARw1kIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyiAgsgAkEANgIAIAZBAWohAUECDGULQYwBIQMgASAERg2gAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHwzwBqLQAARw1jIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyhAgsgAkEANgIAIAZBAWohAUEfDGQLQY0BIQMgASAERg2fAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHyzwBqLQAARw1iIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAygAgsgAkEANgIAIAZBAWohAUEJDGMLIAEgBEYEQEGOASEDDJ8CCwJAAkAgAS0AAEHJAGsOBwBiYmJiYgFiCyABQQFqIQFB+AAhAwyGAgsgAUEBaiEBQfkAIQMMhQILQY8BIQMgASAERg2dAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGRzwBqLQAARw1gIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyeAgsgAkEANgIAIAZBAWohAUEYDGELQZABIQMgASAERg2cAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGXzwBqLQAARw1fIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAydAgsgAkEANgIAIAZBAWohAUEXDGALQZEBIQMgASAERg2bAiACKAIAIgAgBCABa2ohBSABIABrQQZqIQYCQANAIAEtAAAgAEGazwBqLQAARw1eIABBBkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAycAgsgAkEANgIAIAZBAWohAUEVDF8LQZIBIQMgASAERg2aAiACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEGhzwBqLQAARw1dIABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAybAgsgAkEANgIAIAZBAWohAUEeDF4LIAEgBEYEQEGTASEDDJoCCyABLQAAQcwARw1bIAFBAWohAUEKDF0LIAEgBEYEQEGUASEDDJkCCwJAAkAgAS0AAEHBAGsODwBcXFxcXFxcXFxcXFxcAVwLIAFBAWohAUH+ACEDDIACCyABQQFqIQFB/wAhAwz/AQsgASAERgRAQZUBIQMMmAILAkACQCABLQAAQcEAaw4DAFsBWwsgAUEBaiEBQf0AIQMM/wELIAFBAWohAUGAASEDDP4BC0GWASEDIAEgBEYNlgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBp88Aai0AAEcNWSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlwILIAJBADYCACAGQQFqIQFBCwxaCyABIARGBEBBlwEhAwyWAgsCQAJAAkACQCABLQAAQS1rDiMAW1tbW1tbW1tbW1tbW1tbW1tbW1tbW1sBW1tbW1sCW1tbA1sLIAFBAWohAUH7ACEDDP8BCyABQQFqIQFB/AAhAwz+AQsgAUEBaiEBQYEBIQMM/QELIAFBAWohAUGCASEDDPwBC0GYASEDIAEgBEYNlAIgAigCACIAIAQgAWtqIQUgASAAa0EEaiEGAkADQCABLQAAIABBqc8Aai0AAEcNVyAAQQRGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlQILIAJBADYCACAGQQFqIQFBGQxYC0GZASEDIAEgBEYNkwIgAigCACIAIAQgAWtqIQUgASAAa0EFaiEGAkADQCABLQAAIABBrs8Aai0AAEcNViAAQQVGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMlAILIAJBADYCACAGQQFqIQFBBgxXC0GaASEDIAEgBEYNkgIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBtM8Aai0AAEcNVSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkwILIAJBADYCACAGQQFqIQFBHAxWC0GbASEDIAEgBEYNkQIgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABBts8Aai0AAEcNVCAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAMkgILIAJBADYCACAGQQFqIQFBJwxVCyABIARGBEBBnAEhAwyRAgsCQAJAIAEtAABB1ABrDgIAAVQLIAFBAWohAUGGASEDDPgBCyABQQFqIQFBhwEhAwz3AQtBnQEhAyABIARGDY8CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbjPAGotAABHDVIgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADJACCyACQQA2AgAgBkEBaiEBQSYMUwtBngEhAyABIARGDY4CIAIoAgAiACAEIAFraiEFIAEgAGtBAWohBgJAA0AgAS0AACAAQbrPAGotAABHDVEgAEEBRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI8CCyACQQA2AgAgBkEBaiEBQQMMUgtBnwEhAyABIARGDY0CIAIoAgAiACAEIAFraiEFIAEgAGtBAmohBgJAA0AgAS0AACAAQe3PAGotAABHDVAgAEECRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI4CCyACQQA2AgAgBkEBaiEBQQwMUQtBoAEhAyABIARGDYwCIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQbzPAGotAABHDU8gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADI0CCyACQQA2AgAgBkEBaiEBQQ0MUAsgASAERgRAQaEBIQMMjAILAkACQCABLQAAQcYAaw4LAE9PT09PT09PTwFPCyABQQFqIQFBiwEhAwzzAQsgAUEBaiEBQYwBIQMM8gELIAEgBEYEQEGiASEDDIsCCyABLQAAQdAARw1MIAFBAWohAQxGCyABIARGBEBBowEhAwyKAgsCQAJAIAEtAABByQBrDgcBTU1NTU0ATQsgAUEBaiEBQY4BIQMM8QELIAFBAWohAUEiDE0LQaQBIQMgASAERg2IAiACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEHAzwBqLQAARw1LIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyJAgsgAkEANgIAIAZBAWohAUEdDEwLIAEgBEYEQEGlASEDDIgCCwJAAkAgAS0AAEHSAGsOAwBLAUsLIAFBAWohAUGQASEDDO8BCyABQQFqIQFBBAxLCyABIARGBEBBpgEhAwyHAgsCQAJAAkACQAJAIAEtAABBwQBrDhUATU1NTU1NTU1NTQFNTQJNTQNNTQRNCyABQQFqIQFBiAEhAwzxAQsgAUEBaiEBQYkBIQMM8AELIAFBAWohAUGKASEDDO8BCyABQQFqIQFBjwEhAwzuAQsgAUEBaiEBQZEBIQMM7QELQacBIQMgASAERg2FAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHtzwBqLQAARw1IIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyGAgsgAkEANgIAIAZBAWohAUERDEkLQagBIQMgASAERg2EAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHCzwBqLQAARw1HIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyFAgsgAkEANgIAIAZBAWohAUEsDEgLQakBIQMgASAERg2DAiACKAIAIgAgBCABa2ohBSABIABrQQRqIQYCQANAIAEtAAAgAEHFzwBqLQAARw1GIABBBEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyEAgsgAkEANgIAIAZBAWohAUErDEcLQaoBIQMgASAERg2CAiACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHKzwBqLQAARw1FIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyDAgsgAkEANgIAIAZBAWohAUEUDEYLIAEgBEYEQEGrASEDDIICCwJAAkACQAJAIAEtAABBwgBrDg8AAQJHR0dHR0dHR0dHRwNHCyABQQFqIQFBkwEhAwzrAQsgAUEBaiEBQZQBIQMM6gELIAFBAWohAUGVASEDDOkBCyABQQFqIQFBlgEhAwzoAQsgASAERgRAQawBIQMMgQILIAEtAABBxQBHDUIgAUEBaiEBDD0LQa0BIQMgASAERg3/ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHNzwBqLQAARw1CIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAyAAgsgAkEANgIAIAZBAWohAUEODEMLIAEgBEYEQEGuASEDDP8BCyABLQAAQdAARw1AIAFBAWohAUElDEILQa8BIQMgASAERg39ASACKAIAIgAgBCABa2ohBSABIABrQQhqIQYCQANAIAEtAAAgAEHQzwBqLQAARw1AIABBCEYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz+AQsgAkEANgIAIAZBAWohAUEqDEELIAEgBEYEQEGwASEDDP0BCwJAAkAgAS0AAEHVAGsOCwBAQEBAQEBAQEABQAsgAUEBaiEBQZoBIQMM5AELIAFBAWohAUGbASEDDOMBCyABIARGBEBBsQEhAwz8AQsCQAJAIAEtAABBwQBrDhQAPz8/Pz8/Pz8/Pz8/Pz8/Pz8/AT8LIAFBAWohAUGZASEDDOMBCyABQQFqIQFBnAEhAwziAQtBsgEhAyABIARGDfoBIAIoAgAiACAEIAFraiEFIAEgAGtBA2ohBgJAA0AgAS0AACAAQdnPAGotAABHDT0gAEEDRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPsBCyACQQA2AgAgBkEBaiEBQSEMPgtBswEhAyABIARGDfkBIAIoAgAiACAEIAFraiEFIAEgAGtBBmohBgJAA0AgAS0AACAAQd3PAGotAABHDTwgAEEGRg0BIABBAWohACAEIAFBAWoiAUcNAAsgAiAFNgIADPoBCyACQQA2AgAgBkEBaiEBQRoMPQsgASAERgRAQbQBIQMM+QELAkACQAJAIAEtAABBxQBrDhEAPT09PT09PT09AT09PT09Aj0LIAFBAWohAUGdASEDDOEBCyABQQFqIQFBngEhAwzgAQsgAUEBaiEBQZ8BIQMM3wELQbUBIQMgASAERg33ASACKAIAIgAgBCABa2ohBSABIABrQQVqIQYCQANAIAEtAAAgAEHkzwBqLQAARw06IABBBUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz4AQsgAkEANgIAIAZBAWohAUEoDDsLQbYBIQMgASAERg32ASACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEHqzwBqLQAARw05IABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAz3AQsgAkEANgIAIAZBAWohAUEHDDoLIAEgBEYEQEG3ASEDDPYBCwJAAkAgAS0AAEHFAGsODgA5OTk5OTk5OTk5OTkBOQsgAUEBaiEBQaEBIQMM3QELIAFBAWohAUGiASEDDNwBC0G4ASEDIAEgBEYN9AEgAigCACIAIAQgAWtqIQUgASAAa0ECaiEGAkADQCABLQAAIABB7c8Aai0AAEcNNyAAQQJGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9QELIAJBADYCACAGQQFqIQFBEgw4C0G5ASEDIAEgBEYN8wEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8M8Aai0AAEcNNiAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM9AELIAJBADYCACAGQQFqIQFBIAw3C0G6ASEDIAEgBEYN8gEgAigCACIAIAQgAWtqIQUgASAAa0EBaiEGAkADQCABLQAAIABB8s8Aai0AAEcNNSAAQQFGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8wELIAJBADYCACAGQQFqIQFBDww2CyABIARGBEBBuwEhAwzyAQsCQAJAIAEtAABByQBrDgcANTU1NTUBNQsgAUEBaiEBQaUBIQMM2QELIAFBAWohAUGmASEDDNgBC0G8ASEDIAEgBEYN8AEgAigCACIAIAQgAWtqIQUgASAAa0EHaiEGAkADQCABLQAAIABB9M8Aai0AAEcNMyAAQQdGDQEgAEEBaiEAIAQgAUEBaiIBRw0ACyACIAU2AgAM8QELIAJBADYCACAGQQFqIQFBGww0CyABIARGBEBBvQEhAwzwAQsCQAJAAkAgAS0AAEHCAGsOEgA0NDQ0NDQ0NDQBNDQ0NDQ0AjQLIAFBAWohAUGkASEDDNgBCyABQQFqIQFBpwEhAwzXAQsgAUEBaiEBQagBIQMM1gELIAEgBEYEQEG+ASEDDO8BCyABLQAAQc4ARw0wIAFBAWohAQwsCyABIARGBEBBvwEhAwzuAQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCABLQAAQcEAaw4VAAECAz8EBQY/Pz8HCAkKCz8MDQ4PPwsgAUEBaiEBQegAIQMM4wELIAFBAWohAUHpACEDDOIBCyABQQFqIQFB7gAhAwzhAQsgAUEBaiEBQfIAIQMM4AELIAFBAWohAUHzACEDDN8BCyABQQFqIQFB9gAhAwzeAQsgAUEBaiEBQfcAIQMM3QELIAFBAWohAUH6ACEDDNwBCyABQQFqIQFBgwEhAwzbAQsgAUEBaiEBQYQBIQMM2gELIAFBAWohAUGFASEDDNkBCyABQQFqIQFBkgEhAwzYAQsgAUEBaiEBQZgBIQMM1wELIAFBAWohAUGgASEDDNYBCyABQQFqIQFBowEhAwzVAQsgAUEBaiEBQaoBIQMM1AELIAEgBEcEQCACQRA2AgggAiABNgIEQasBIQMM1AELQcABIQMM7AELQQAhAAJAIAIoAjgiA0UNACADKAI0IgNFDQAgAiADEQAAIQALIABFDV4gAEEVRw0HIAJB0QA2AhwgAiABNgIUIAJBsBc2AhAgAkEVNgIMQQAhAwzrAQsgAUEBaiABIARHDQgaQcIBIQMM6gELA0ACQCABLQAAQQprDgQIAAALAAsgBCABQQFqIgFHDQALQcMBIQMM6QELIAEgBEcEQCACQRE2AgggAiABNgIEQQEhAwzQAQtBxAEhAwzoAQsgASAERgRAQcUBIQMM6AELAkACQCABLQAAQQprDgQBKCgAKAsgAUEBagwJCyABQQFqDAULIAEgBEYEQEHGASEDDOcBCwJAAkAgAS0AAEEKaw4XAQsLAQsLCwsLCwsLCwsLCwsLCwsLCwALCyABQQFqIQELQbABIQMMzQELIAEgBEYEQEHIASEDDOYBCyABLQAAQSBHDQkgAkEAOwEyIAFBAWohAUGzASEDDMwBCwNAIAEhAAJAIAEgBEcEQCABLQAAQTBrQf8BcSIDQQpJDQEMJwtBxwEhAwzmAQsCQCACLwEyIgFBmTNLDQAgAiABQQpsIgU7ATIgBUH+/wNxIANB//8Dc0sNACAAQQFqIQEgAiADIAVqIgM7ATIgA0H//wNxQegHSQ0BCwtBACEDIAJBADYCHCACQcEJNgIQIAJBDTYCDCACIABBAWo2AhQM5AELIAJBADYCHCACIAE2AhQgAkHwDDYCECACQRs2AgxBACEDDOMBCyACKAIEIQAgAkEANgIEIAIgACABECYiAA0BIAFBAWoLIQFBrQEhAwzIAQsgAkHBATYCHCACIAA2AgwgAiABQQFqNgIUQQAhAwzgAQsgAigCBCEAIAJBADYCBCACIAAgARAmIgANASABQQFqCyEBQa4BIQMMxQELIAJBwgE2AhwgAiAANgIMIAIgAUEBajYCFEEAIQMM3QELIAJBADYCHCACIAE2AhQgAkGXCzYCECACQQ02AgxBACEDDNwBCyACQQA2AhwgAiABNgIUIAJB4xA2AhAgAkEJNgIMQQAhAwzbAQsgAkECOgAoDKwBC0EAIQMgAkEANgIcIAJBrws2AhAgAkECNgIMIAIgAUEBajYCFAzZAQtBAiEDDL8BC0ENIQMMvgELQSYhAwy9AQtBFSEDDLwBC0EWIQMMuwELQRghAwy6AQtBHCEDDLkBC0EdIQMMuAELQSAhAwy3AQtBISEDDLYBC0EjIQMMtQELQcYAIQMMtAELQS4hAwyzAQtBPSEDDLIBC0HLACEDDLEBC0HOACEDDLABC0HYACEDDK8BC0HZACEDDK4BC0HbACEDDK0BC0HxACEDDKwBC0H0ACEDDKsBC0GNASEDDKoBC0GXASEDDKkBC0GpASEDDKgBC0GvASEDDKcBC0GxASEDDKYBCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB8Rs2AhAgAkEGNgIMDL0BCyACQQA2AgAgBkEBaiEBQSQLOgApIAIoAgQhACACQQA2AgQgAiAAIAEQJyIARQRAQeUAIQMMowELIAJB+QA2AhwgAiABNgIUIAIgADYCDEEAIQMMuwELIABBFUcEQCACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwy7AQsgAkH4ADYCHCACIAE2AhQgAkHKGDYCECACQRU2AgxBACEDDLoBCyACQQA2AhwgAiABNgIUIAJBjhs2AhAgAkEGNgIMQQAhAwy5AQsgAkEANgIcIAIgATYCFCACQf4RNgIQIAJBBzYCDEEAIQMMuAELIAJBADYCHCACIAE2AhQgAkGMHDYCECACQQc2AgxBACEDDLcBCyACQQA2AhwgAiABNgIUIAJBww82AhAgAkEHNgIMQQAhAwy2AQsgAkEANgIcIAIgATYCFCACQcMPNgIQIAJBBzYCDEEAIQMMtQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0RIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMtAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0gIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMswELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0iIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMsgELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0OIAJB5QA2AhwgAiABNgIUIAIgADYCDEEAIQMMsQELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0dIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMsAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0fIAJB0gA2AhwgAiABNgIUIAIgADYCDEEAIQMMrwELIABBP0cNASABQQFqCyEBQQUhAwyUAQtBACEDIAJBADYCHCACIAE2AhQgAkH9EjYCECACQQc2AgwMrAELIAJBADYCHCACIAE2AhQgAkHcCDYCECACQQc2AgxBACEDDKsBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNByACQeUANgIcIAIgATYCFCACIAA2AgxBACEDDKoBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNFiACQdMANgIcIAIgATYCFCACIAA2AgxBACEDDKkBCyACKAIEIQAgAkEANgIEIAIgACABECUiAEUNGCACQdIANgIcIAIgATYCFCACIAA2AgxBACEDDKgBCyACQQA2AhwgAiABNgIUIAJBxgo2AhAgAkEHNgIMQQAhAwynAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQMgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwymAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRIgAkHTADYCHCACIAE2AhQgAiAANgIMQQAhAwylAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDRQgAkHSADYCHCACIAE2AhQgAiAANgIMQQAhAwykAQsgAigCBCEAIAJBADYCBCACIAAgARAlIgBFDQAgAkHlADYCHCACIAE2AhQgAiAANgIMQQAhAwyjAQtB1QAhAwyJAQsgAEEVRwRAIAJBADYCHCACIAE2AhQgAkG5DTYCECACQRo2AgxBACEDDKIBCyACQeQANgIcIAIgATYCFCACQeMXNgIQIAJBFTYCDEEAIQMMoQELIAJBADYCACAGQQFqIQEgAi0AKSIAQSNrQQtJDQQCQCAAQQZLDQBBASAAdEHKAHFFDQAMBQtBACEDIAJBADYCHCACIAE2AhQgAkH3CTYCECACQQg2AgwMoAELIAJBADYCACAGQQFqIQEgAi0AKUEhRg0DIAJBADYCHCACIAE2AhQgAkGbCjYCECACQQg2AgxBACEDDJ8BCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJBkDM2AhAgAkEINgIMDJ0BCyACQQA2AgAgBkEBaiEBIAItAClBI0kNACACQQA2AhwgAiABNgIUIAJB0wk2AhAgAkEINgIMQQAhAwycAQtB0QAhAwyCAQsgAS0AAEEwayIAQf8BcUEKSQRAIAIgADoAKiABQQFqIQFBzwAhAwyCAQsgAigCBCEAIAJBADYCBCACIAAgARAoIgBFDYYBIAJB3gA2AhwgAiABNgIUIAIgADYCDEEAIQMMmgELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ2GASACQdwANgIcIAIgATYCFCACIAA2AgxBACEDDJkBCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMhwELIAJB2gA2AhwgAiAFNgIUIAIgADYCDAyYAQtBACEBQQEhAwsgAiADOgArIAVBAWohAwJAAkACQCACLQAtQRBxDQACQAJAAkAgAi0AKg4DAQACBAsgBkUNAwwCCyAADQEMAgsgAUUNAQsgAigCBCEAIAJBADYCBCACIAAgAxAoIgBFBEAgAyEBDAILIAJB2AA2AhwgAiADNgIUIAIgADYCDEEAIQMMmAELIAIoAgQhACACQQA2AgQgAiAAIAMQKCIARQRAIAMhAQyHAQsgAkHZADYCHCACIAM2AhQgAiAANgIMQQAhAwyXAQtBzAAhAwx9CyAAQRVHBEAgAkEANgIcIAIgATYCFCACQZQNNgIQIAJBITYCDEEAIQMMlgELIAJB1wA2AhwgAiABNgIUIAJByRc2AhAgAkEVNgIMQQAhAwyVAQtBACEDIAJBADYCHCACIAE2AhQgAkGAETYCECACQQk2AgwMlAELIAIoAgQhACACQQA2AgQgAiAAIAEQJSIARQ0AIAJB0wA2AhwgAiABNgIUIAIgADYCDEEAIQMMkwELQckAIQMMeQsgAkEANgIcIAIgATYCFCACQcEoNgIQIAJBBzYCDCACQQA2AgBBACEDDJEBCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAlIgBFDQAgAkHSADYCHCACIAE2AhQgAiAANgIMDJABC0HIACEDDHYLIAJBADYCACAFIQELIAJBgBI7ASogAUEBaiEBQQAhAAJAIAIoAjgiA0UNACADKAIwIgNFDQAgAiADEQAAIQALIAANAQtBxwAhAwxzCyAAQRVGBEAgAkHRADYCHCACIAE2AhQgAkHjFzYCECACQRU2AgxBACEDDIwBC0EAIQMgAkEANgIcIAIgATYCFCACQbkNNgIQIAJBGjYCDAyLAQtBACEDIAJBADYCHCACIAE2AhQgAkGgGTYCECACQR42AgwMigELIAEtAABBOkYEQCACKAIEIQBBACEDIAJBADYCBCACIAAgARApIgBFDQEgAkHDADYCHCACIAA2AgwgAiABQQFqNgIUDIoBC0EAIQMgAkEANgIcIAIgATYCFCACQbERNgIQIAJBCjYCDAyJAQsgAUEBaiEBQTshAwxvCyACQcMANgIcIAIgADYCDCACIAFBAWo2AhQMhwELQQAhAyACQQA2AhwgAiABNgIUIAJB8A42AhAgAkEcNgIMDIYBCyACIAIvATBBEHI7ATAMZgsCQCACLwEwIgBBCHFFDQAgAi0AKEEBRw0AIAItAC1BCHFFDQMLIAIgAEH3+wNxQYAEcjsBMAwECyABIARHBEACQANAIAEtAABBMGsiAEH/AXFBCk8EQEE1IQMMbgsgAikDICIKQpmz5syZs+bMGVYNASACIApCCn4iCjcDICAKIACtQv8BgyILQn+FVg0BIAIgCiALfDcDICAEIAFBAWoiAUcNAAtBOSEDDIUBCyACKAIEIQBBACEDIAJBADYCBCACIAAgAUEBaiIBECoiAA0MDHcLQTkhAwyDAQsgAi0AMEEgcQ0GQcUBIQMMaQtBACEDIAJBADYCBCACIAEgARAqIgBFDQQgAkE6NgIcIAIgADYCDCACIAFBAWo2AhQMgQELIAItAChBAUcNACACLQAtQQhxRQ0BC0E3IQMMZgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIABEAgAkE7NgIcIAIgADYCDCACIAFBAWo2AhQMfwsgAUEBaiEBDG4LIAJBCDoALAwECyABQQFqIQEMbQtBACEDIAJBADYCHCACIAE2AhQgAkHkEjYCECACQQQ2AgwMewsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ1sIAJBNzYCHCACIAE2AhQgAiAANgIMDHoLIAIgAi8BMEEgcjsBMAtBMCEDDF8LIAJBNjYCHCACIAE2AhQgAiAANgIMDHcLIABBLEcNASABQQFqIQBBASEBAkACQAJAAkACQCACLQAsQQVrDgQDAQIEAAsgACEBDAQLQQIhAQwBC0EEIQELIAJBAToALCACIAIvATAgAXI7ATAgACEBDAELIAIgAi8BMEEIcjsBMCAAIQELQTkhAwxcCyACQQA6ACwLQTQhAwxaCyABIARGBEBBLSEDDHMLAkACQANAAkAgAS0AAEEKaw4EAgAAAwALIAQgAUEBaiIBRw0AC0EtIQMMdAsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIARQ0CIAJBLDYCHCACIAE2AhQgAiAANgIMDHMLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAS0AAEENRgRAIAIoAgQhAEEAIQMgAkEANgIEIAIgACABECoiAEUEQCABQQFqIQEMAgsgAkEsNgIcIAIgADYCDCACIAFBAWo2AhQMcgsgAi0ALUEBcQRAQcQBIQMMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKiIADQEMZQtBLyEDDFcLIAJBLjYCHCACIAE2AhQgAiAANgIMDG8LQQAhAyACQQA2AhwgAiABNgIUIAJB8BQ2AhAgAkEDNgIMDG4LQQEhAwJAAkACQAJAIAItACxBBWsOBAMBAgAECyACIAIvATBBCHI7ATAMAwtBAiEDDAELQQQhAwsgAkEBOgAsIAIgAi8BMCADcjsBMAtBKiEDDFMLQQAhAyACQQA2AhwgAiABNgIUIAJB4Q82AhAgAkEKNgIMDGsLQQEhAwJAAkACQAJAAkACQCACLQAsQQJrDgcFBAQDAQIABAsgAiACLwEwQQhyOwEwDAMLQQIhAwwBC0EEIQMLIAJBAToALCACIAIvATAgA3I7ATALQSshAwxSC0EAIQMgAkEANgIcIAIgATYCFCACQasSNgIQIAJBCzYCDAxqC0EAIQMgAkEANgIcIAIgATYCFCACQf0NNgIQIAJBHTYCDAxpCyABIARHBEADQCABLQAAQSBHDUggBCABQQFqIgFHDQALQSUhAwxpC0ElIQMMaAsgAi0ALUEBcQRAQcMBIQMMTwsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQKSIABEAgAkEmNgIcIAIgADYCDCACIAFBAWo2AhQMaAsgAUEBaiEBDFwLIAFBAWohASACLwEwIgBBgAFxBEBBACEAAkAgAigCOCIDRQ0AIAMoAlQiA0UNACACIAMRAAAhAAsgAEUNBiAAQRVHDR8gAkEFNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMZwsCQCAAQaAEcUGgBEcNACACLQAtQQJxDQBBACEDIAJBADYCHCACIAE2AhQgAkGWEzYCECACQQQ2AgwMZwsgAgJ/IAIvATBBFHFBFEYEQEEBIAItAChBAUYNARogAi8BMkHlAEYMAQsgAi0AKUEFRgs6AC5BACEAAkAgAigCOCIDRQ0AIAMoAiQiA0UNACACIAMRAAAhAAsCQAJAAkACQAJAIAAOFgIBAAQEBAQEBAQEBAQEBAQEBAQEBAMECyACQQE6AC4LIAIgAi8BMEHAAHI7ATALQSchAwxPCyACQSM2AhwgAiABNgIUIAJBpRY2AhAgAkEVNgIMQQAhAwxnC0EAIQMgAkEANgIcIAIgATYCFCACQdULNgIQIAJBETYCDAxmC0EAIQACQCACKAI4IgNFDQAgAygCLCIDRQ0AIAIgAxEAACEACyAADQELQQ4hAwxLCyAAQRVGBEAgAkECNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMZAtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMYwtBACEDIAJBADYCHCACIAE2AhQgAkGqHDYCECACQQ82AgwMYgsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEgCqdqIgEQKyIARQ0AIAJBBTYCHCACIAE2AhQgAiAANgIMDGELQQ8hAwxHC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxfC0IBIQoLIAFBAWohAQJAIAIpAyAiC0L//////////w9YBEAgAiALQgSGIAqENwMgDAELQQAhAyACQQA2AhwgAiABNgIUIAJBrQk2AhAgAkEMNgIMDF4LQSQhAwxEC0EAIQMgAkEANgIcIAIgATYCFCACQc0TNgIQIAJBDDYCDAxcCyACKAIEIQBBACEDIAJBADYCBCACIAAgARAsIgBFBEAgAUEBaiEBDFILIAJBFzYCHCACIAA2AgwgAiABQQFqNgIUDFsLIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQRY2AhwgAiAANgIMIAIgAUEBajYCFAxbC0EfIQMMQQtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMWQsgAigCBCEAQQAhAyACQQA2AgQgAiAAIAEQLSIARQRAIAFBAWohAQxQCyACQRQ2AhwgAiAANgIMIAIgAUEBajYCFAxYCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABEC0iAEUEQCABQQFqIQEMAQsgAkETNgIcIAIgADYCDCACIAFBAWo2AhQMWAtBHiEDDD4LQQAhAyACQQA2AhwgAiABNgIUIAJBxgw2AhAgAkEjNgIMDFYLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABEC0iAEUEQCABQQFqIQEMTgsgAkERNgIcIAIgADYCDCACIAFBAWo2AhQMVQsgAkEQNgIcIAIgATYCFCACIAA2AgwMVAtBACEDIAJBADYCHCACIAE2AhQgAkHGDDYCECACQSM2AgwMUwtBACEDIAJBADYCHCACIAE2AhQgAkHAFTYCECACQQI2AgwMUgsgAigCBCEAQQAhAyACQQA2AgQCQCACIAAgARAtIgBFBEAgAUEBaiEBDAELIAJBDjYCHCACIAA2AgwgAiABQQFqNgIUDFILQRshAww4C0EAIQMgAkEANgIcIAIgATYCFCACQcYMNgIQIAJBIzYCDAxQCyACKAIEIQBBACEDIAJBADYCBAJAIAIgACABECwiAEUEQCABQQFqIQEMAQsgAkENNgIcIAIgADYCDCACIAFBAWo2AhQMUAtBGiEDDDYLQQAhAyACQQA2AhwgAiABNgIUIAJBmg82AhAgAkEiNgIMDE4LIAIoAgQhAEEAIQMgAkEANgIEAkAgAiAAIAEQLCIARQRAIAFBAWohAQwBCyACQQw2AhwgAiAANgIMIAIgAUEBajYCFAxOC0EZIQMMNAtBACEDIAJBADYCHCACIAE2AhQgAkGaDzYCECACQSI2AgwMTAsgAEEVRwRAQQAhAyACQQA2AhwgAiABNgIUIAJBgww2AhAgAkETNgIMDEwLIAJBCjYCHCACIAE2AhQgAkHkFjYCECACQRU2AgxBACEDDEsLIAIoAgQhAEEAIQMgAkEANgIEIAIgACABIAqnaiIBECsiAARAIAJBBzYCHCACIAE2AhQgAiAANgIMDEsLQRMhAwwxCyAAQRVHBEBBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMSgsgAkEeNgIcIAIgATYCFCACQfkXNgIQIAJBFTYCDEEAIQMMSQtBACEAAkAgAigCOCIDRQ0AIAMoAiwiA0UNACACIAMRAAAhAAsgAEUNQSAAQRVGBEAgAkEDNgIcIAIgATYCFCACQbAYNgIQIAJBFTYCDEEAIQMMSQtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMSAtBACEDIAJBADYCHCACIAE2AhQgAkHaDTYCECACQRQ2AgwMRwtBACEDIAJBADYCHCACIAE2AhQgAkGnDjYCECACQRI2AgwMRgsgAkEAOgAvIAItAC1BBHFFDT8LIAJBADoALyACQQE6ADRBACEDDCsLQQAhAyACQQA2AhwgAkHkETYCECACQQc2AgwgAiABQQFqNgIUDEMLAkADQAJAIAEtAABBCmsOBAACAgACCyAEIAFBAWoiAUcNAAtB3QEhAwxDCwJAAkAgAi0ANEEBRw0AQQAhAAJAIAIoAjgiA0UNACADKAJYIgNFDQAgAiADEQAAIQALIABFDQAgAEEVRw0BIAJB3AE2AhwgAiABNgIUIAJB1RY2AhAgAkEVNgIMQQAhAwxEC0HBASEDDCoLIAJBADYCHCACIAE2AhQgAkHpCzYCECACQR82AgxBACEDDEILAkACQCACLQAoQQFrDgIEAQALQcABIQMMKQtBuQEhAwwoCyACQQI6AC9BACEAAkAgAigCOCIDRQ0AIAMoAgAiA0UNACACIAMRAAAhAAsgAEUEQEHCASEDDCgLIABBFUcEQCACQQA2AhwgAiABNgIUIAJBpAw2AhAgAkEQNgIMQQAhAwxBCyACQdsBNgIcIAIgATYCFCACQfoWNgIQIAJBFTYCDEEAIQMMQAsgASAERgRAQdoBIQMMQAsgAS0AAEHIAEYNASACQQE6ACgLQawBIQMMJQtBvwEhAwwkCyABIARHBEAgAkEQNgIIIAIgATYCBEG+ASEDDCQLQdkBIQMMPAsgASAERgRAQdgBIQMMPAsgAS0AAEHIAEcNBCABQQFqIQFBvQEhAwwiCyABIARGBEBB1wEhAww7CwJAAkAgAS0AAEHFAGsOEAAFBQUFBQUFBQUFBQUFBQEFCyABQQFqIQFBuwEhAwwiCyABQQFqIQFBvAEhAwwhC0HWASEDIAEgBEYNOSACKAIAIgAgBCABa2ohBSABIABrQQJqIQYCQANAIAEtAAAgAEGD0ABqLQAARw0DIABBAkYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw6CyACKAIEIQAgAkIANwMAIAIgACAGQQFqIgEQJyIARQRAQcYBIQMMIQsgAkHVATYCHCACIAE2AhQgAiAANgIMQQAhAww5C0HUASEDIAEgBEYNOCACKAIAIgAgBCABa2ohBSABIABrQQFqIQYCQANAIAEtAAAgAEGB0ABqLQAARw0CIABBAUYNASAAQQFqIQAgBCABQQFqIgFHDQALIAIgBTYCAAw5CyACQYEEOwEoIAIoAgQhACACQgA3AwAgAiAAIAZBAWoiARAnIgANAwwCCyACQQA2AgALQQAhAyACQQA2AhwgAiABNgIUIAJB2Bs2AhAgAkEINgIMDDYLQboBIQMMHAsgAkHTATYCHCACIAE2AhQgAiAANgIMQQAhAww0C0EAIQACQCACKAI4IgNFDQAgAygCOCIDRQ0AIAIgAxEAACEACyAARQ0AIABBFUYNASACQQA2AhwgAiABNgIUIAJBzA42AhAgAkEgNgIMQQAhAwwzC0HkACEDDBkLIAJB+AA2AhwgAiABNgIUIAJByhg2AhAgAkEVNgIMQQAhAwwxC0HSASEDIAQgASIARg0wIAQgAWsgAigCACIBaiEFIAAgAWtBBGohBgJAA0AgAC0AACABQfzPAGotAABHDQEgAUEERg0DIAFBAWohASAEIABBAWoiAEcNAAsgAiAFNgIADDELIAJBADYCHCACIAA2AhQgAkGQMzYCECACQQg2AgwgAkEANgIAQQAhAwwwCyABIARHBEAgAkEONgIIIAIgATYCBEG3ASEDDBcLQdEBIQMMLwsgAkEANgIAIAZBAWohAQtBuAEhAwwUCyABIARGBEBB0AEhAwwtCyABLQAAQTBrIgBB/wFxQQpJBEAgAiAAOgAqIAFBAWohAUG2ASEDDBQLIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0UIAJBzwE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAsgASAERgRAQc4BIQMMLAsCQCABLQAAQS5GBEAgAUEBaiEBDAELIAIoAgQhACACQQA2AgQgAiAAIAEQKCIARQ0VIAJBzQE2AhwgAiABNgIUIAIgADYCDEEAIQMMLAtBtQEhAwwSCyAEIAEiBUYEQEHMASEDDCsLQQAhAEEBIQFBASEGQQAhAwJAAkACQAJAAkACfwJAAkACQAJAAkACQAJAIAUtAABBMGsOCgoJAAECAwQFBggLC0ECDAYLQQMMBQtBBAwEC0EFDAMLQQYMAgtBBwwBC0EICyEDQQAhAUEAIQYMAgtBCSEDQQEhAEEAIQFBACEGDAELQQAhAUEBIQMLIAIgAzoAKyAFQQFqIQMCQAJAIAItAC1BEHENAAJAAkACQCACLQAqDgMBAAIECyAGRQ0DDAILIAANAQwCCyABRQ0BCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMAwsgAkHJATYCHCACIAM2AhQgAiAANgIMQQAhAwwtCyACKAIEIQAgAkEANgIEIAIgACADECgiAEUEQCADIQEMGAsgAkHKATYCHCACIAM2AhQgAiAANgIMQQAhAwwsCyACKAIEIQAgAkEANgIEIAIgACAFECgiAEUEQCAFIQEMFgsgAkHLATYCHCACIAU2AhQgAiAANgIMDCsLQbQBIQMMEQtBACEAAkAgAigCOCIDRQ0AIAMoAjwiA0UNACACIAMRAAAhAAsCQCAABEAgAEEVRg0BIAJBADYCHCACIAE2AhQgAkGUDTYCECACQSE2AgxBACEDDCsLQbIBIQMMEQsgAkHIATYCHCACIAE2AhQgAkHJFzYCECACQRU2AgxBACEDDCkLIAJBADYCACAGQQFqIQFB9QAhAwwPCyACLQApQQVGBEBB4wAhAwwPC0HiACEDDA4LIAAhASACQQA2AgALIAJBADoALEEJIQMMDAsgAkEANgIAIAdBAWohAUHAACEDDAsLQQELOgAsIAJBADYCACAGQQFqIQELQSkhAwwIC0E4IQMMBwsCQCABIARHBEADQCABLQAAQYA+ai0AACIAQQFHBEAgAEECRw0DIAFBAWohAQwFCyAEIAFBAWoiAUcNAAtBPiEDDCELQT4hAwwgCwsgAkEAOgAsDAELQQshAwwEC0E6IQMMAwsgAUEBaiEBQS0hAwwCCyACIAE6ACwgAkEANgIAIAZBAWohAUEMIQMMAQsgAkEANgIAIAZBAWohAUEKIQMMAAsAC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwXC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwWC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwVC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwUC0EAIQMgAkEANgIcIAIgATYCFCACQc0QNgIQIAJBCTYCDAwTC0EAIQMgAkEANgIcIAIgATYCFCACQekKNgIQIAJBCTYCDAwSC0EAIQMgAkEANgIcIAIgATYCFCACQbcQNgIQIAJBCTYCDAwRC0EAIQMgAkEANgIcIAIgATYCFCACQZwRNgIQIAJBCTYCDAwQC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwPC0EAIQMgAkEANgIcIAIgATYCFCACQZcVNgIQIAJBDzYCDAwOC0EAIQMgAkEANgIcIAIgATYCFCACQcASNgIQIAJBCzYCDAwNC0EAIQMgAkEANgIcIAIgATYCFCACQZUJNgIQIAJBCzYCDAwMC0EAIQMgAkEANgIcIAIgATYCFCACQeEPNgIQIAJBCjYCDAwLC0EAIQMgAkEANgIcIAIgATYCFCACQfsPNgIQIAJBCjYCDAwKC0EAIQMgAkEANgIcIAIgATYCFCACQfEZNgIQIAJBAjYCDAwJC0EAIQMgAkEANgIcIAIgATYCFCACQcQUNgIQIAJBAjYCDAwIC0EAIQMgAkEANgIcIAIgATYCFCACQfIVNgIQIAJBAjYCDAwHCyACQQI2AhwgAiABNgIUIAJBnBo2AhAgAkEWNgIMQQAhAwwGC0EBIQMMBQtB1AAhAyABIARGDQQgCEEIaiEJIAIoAgAhBQJAAkAgASAERwRAIAVB2MIAaiEHIAQgBWogAWshACAFQX9zQQpqIgUgAWohBgNAIAEtAAAgBy0AAEcEQEECIQcMAwsgBUUEQEEAIQcgBiEBDAMLIAVBAWshBSAHQQFqIQcgBCABQQFqIgFHDQALIAAhBSAEIQELIAlBATYCACACIAU2AgAMAQsgAkEANgIAIAkgBzYCAAsgCSABNgIEIAgoAgwhACAIKAIIDgMBBAIACwALIAJBADYCHCACQbUaNgIQIAJBFzYCDCACIABBAWo2AhRBACEDDAILIAJBADYCHCACIAA2AhQgAkHKGjYCECACQQk2AgxBACEDDAELIAEgBEYEQEEiIQMMAQsgAkEJNgIIIAIgATYCBEEhIQMLIAhBEGokACADRQRAIAIoAgwhAAwBCyACIAM2AhxBACEAIAIoAgQiAUUNACACIAEgBCACKAIIEQEAIgFFDQAgAiAENgIUIAIgATYCDCABIQALIAALvgIBAn8gAEEAOgAAIABB3ABqIgFBAWtBADoAACAAQQA6AAIgAEEAOgABIAFBA2tBADoAACABQQJrQQA6AAAgAEEAOgADIAFBBGtBADoAAEEAIABrQQNxIgEgAGoiAEEANgIAQdwAIAFrQXxxIgIgAGoiAUEEa0EANgIAAkAgAkEJSQ0AIABBADYCCCAAQQA2AgQgAUEIa0EANgIAIAFBDGtBADYCACACQRlJDQAgAEEANgIYIABBADYCFCAAQQA2AhAgAEEANgIMIAFBEGtBADYCACABQRRrQQA2AgAgAUEYa0EANgIAIAFBHGtBADYCACACIABBBHFBGHIiAmsiAUEgSQ0AIAAgAmohAANAIABCADcDGCAAQgA3AxAgAEIANwMIIABCADcDACAAQSBqIQAgAUEgayIBQR9LDQALCwtWAQF/AkAgACgCDA0AAkACQAJAAkAgAC0ALw4DAQADAgsgACgCOCIBRQ0AIAEoAiwiAUUNACAAIAERAAAiAQ0DC0EADwsACyAAQcMWNgIQQQ4hAQsgAQsaACAAKAIMRQRAIABB0Rs2AhAgAEEVNgIMCwsUACAAKAIMQRVGBEAgAEEANgIMCwsUACAAKAIMQRZGBEAgAEEANgIMCwsHACAAKAIMCwcAIAAoAhALCQAgACABNgIQCwcAIAAoAhQLFwAgAEEkTwRAAAsgAEECdEGgM2ooAgALFwAgAEEuTwRAAAsgAEECdEGwNGooAgALvwkBAX9B6yghAQJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAIABB5ABrDvQDY2IAAWFhYWFhYQIDBAVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhBgcICQoLDA0OD2FhYWFhEGFhYWFhYWFhYWFhEWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYRITFBUWFxgZGhthYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhHB0eHyAhIiMkJSYnKCkqKywtLi8wMTIzNDU2YTc4OTphYWFhYWFhYTthYWE8YWFhYT0+P2FhYWFhYWFhQGFhQWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYUJDREVGR0hJSktMTU5PUFFSU2FhYWFhYWFhVFVWV1hZWlthXF1hYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFeYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhX2BhC0HhJw8LQaQhDwtByywPC0H+MQ8LQcAkDwtBqyQPC0GNKA8LQeImDwtBgDAPC0G5Lw8LQdckDwtB7x8PC0HhHw8LQfofDwtB8iAPC0GoLw8LQa4yDwtBiDAPC0HsJw8LQYIiDwtBjh0PC0HQLg8LQcojDwtBxTIPC0HfHA8LQdIcDwtBxCAPC0HXIA8LQaIfDwtB7S4PC0GrMA8LQdQlDwtBzC4PC0H6Lg8LQfwrDwtB0jAPC0HxHQ8LQbsgDwtB9ysPC0GQMQ8LQdcxDwtBoi0PC0HUJw8LQeArDwtBnywPC0HrMQ8LQdUfDwtByjEPC0HeJQ8LQdQeDwtB9BwPC0GnMg8LQbEdDwtBoB0PC0G5MQ8LQbwwDwtBkiEPC0GzJg8LQeksDwtBrB4PC0HUKw8LQfcmDwtBgCYPC0GwIQ8LQf4eDwtBjSMPC0GJLQ8LQfciDwtBoDEPC0GuHw8LQcYlDwtB6B4PC0GTIg8LQcIvDwtBwx0PC0GLLA8LQeEdDwtBjS8PC0HqIQ8LQbQtDwtB0i8PC0HfMg8LQdIyDwtB8DAPC0GpIg8LQfkjDwtBmR4PC0G1LA8LQZswDwtBkjIPC0G2Kw8LQcIiDwtB+DIPC0GeJQ8LQdAiDwtBuh4PC0GBHg8LAAtB1iEhAQsgAQsWACAAIAAtAC1B/gFxIAFBAEdyOgAtCxkAIAAgAC0ALUH9AXEgAUEAR0EBdHI6AC0LGQAgACAALQAtQfsBcSABQQBHQQJ0cjoALQsZACAAIAAtAC1B9wFxIAFBAEdBA3RyOgAtCz4BAn8CQCAAKAI4IgNFDQAgAygCBCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBxhE2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCCCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9go2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCDCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7Ro2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCECIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlRA2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCFCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBqhs2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCGCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB7RM2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCKCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABB9gg2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCHCIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBwhk2AhBBGCEECyAECz4BAn8CQCAAKAI4IgNFDQAgAygCICIDRQ0AIAAgASACIAFrIAMRAQAiBEF/Rw0AIABBlBQ2AhBBGCEECyAEC1kBAn8CQCAALQAoQQFGDQAgAC8BMiIBQeQAa0HkAEkNACABQcwBRg0AIAFBsAJGDQAgAC8BMCIAQcAAcQ0AQQEhAiAAQYgEcUGABEYNACAAQShxRSECCyACC4wBAQJ/AkACQAJAIAAtACpFDQAgAC0AK0UNACAALwEwIgFBAnFFDQEMAgsgAC8BMCIBQQFxRQ0BC0EBIQIgAC0AKEEBRg0AIAAvATIiAEHkAGtB5ABJDQAgAEHMAUYNACAAQbACRg0AIAFBwABxDQBBACECIAFBiARxQYAERg0AIAFBKHFBAEchAgsgAgtzACAAQRBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAA/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQTBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQSBq/QwAAAAAAAAAAAAAAAAAAAAA/QsDACAAQd0BNgIcCwYAIAAQMguaLQELfyMAQRBrIgokAEGk0AAoAgAiCUUEQEHk0wAoAgAiBUUEQEHw0wBCfzcCAEHo0wBCgICEgICAwAA3AgBB5NMAIApBCGpBcHFB2KrVqgVzIgU2AgBB+NMAQQA2AgBByNMAQQA2AgALQczTAEGA1AQ2AgBBnNAAQYDUBDYCAEGw0AAgBTYCAEGs0ABBfzYCAEHQ0wBBgKwDNgIAA0AgAUHI0ABqIAFBvNAAaiICNgIAIAIgAUG00ABqIgM2AgAgAUHA0ABqIAM2AgAgAUHQ0ABqIAFBxNAAaiIDNgIAIAMgAjYCACABQdjQAGogAUHM0ABqIgI2AgAgAiADNgIAIAFB1NAAaiACNgIAIAFBIGoiAUGAAkcNAAtBjNQEQcGrAzYCAEGo0ABB9NMAKAIANgIAQZjQAEHAqwM2AgBBpNAAQYjUBDYCAEHM/wdBODYCAEGI1AQhCQsCQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQCAAQewBTQRAQYzQACgCACIGQRAgAEETakFwcSAAQQtJGyIEQQN2IgB2IgFBA3EEQAJAIAFBAXEgAHJBAXMiAkEDdCIAQbTQAGoiASAAQbzQAGooAgAiACgCCCIDRgRAQYzQACAGQX4gAndxNgIADAELIAEgAzYCCCADIAE2AgwLIABBCGohASAAIAJBA3QiAkEDcjYCBCAAIAJqIgAgACgCBEEBcjYCBAwRC0GU0AAoAgAiCCAETw0BIAEEQAJAQQIgAHQiAkEAIAJrciABIAB0cWgiAEEDdCICQbTQAGoiASACQbzQAGooAgAiAigCCCIDRgRAQYzQACAGQX4gAHdxIgY2AgAMAQsgASADNgIIIAMgATYCDAsgAiAEQQNyNgIEIABBA3QiACAEayEFIAAgAmogBTYCACACIARqIgQgBUEBcjYCBCAIBEAgCEF4cUG00ABqIQBBoNAAKAIAIQMCf0EBIAhBA3Z0IgEgBnFFBEBBjNAAIAEgBnI2AgAgAAwBCyAAKAIICyIBIAM2AgwgACADNgIIIAMgADYCDCADIAE2AggLIAJBCGohAUGg0AAgBDYCAEGU0AAgBTYCAAwRC0GQ0AAoAgAiC0UNASALaEECdEG80gBqKAIAIgAoAgRBeHEgBGshBSAAIQIDQAJAIAIoAhAiAUUEQCACQRRqKAIAIgFFDQELIAEoAgRBeHEgBGsiAyAFSSECIAMgBSACGyEFIAEgACACGyEAIAEhAgwBCwsgACgCGCEJIAAoAgwiAyAARwRAQZzQACgCABogAyAAKAIIIgE2AgggASADNgIMDBALIABBFGoiAigCACIBRQRAIAAoAhAiAUUNAyAAQRBqIQILA0AgAiEHIAEiA0EUaiICKAIAIgENACADQRBqIQIgAygCECIBDQALIAdBADYCAAwPC0F/IQQgAEG/f0sNACAAQRNqIgFBcHEhBEGQ0AAoAgAiCEUNAEEAIARrIQUCQAJAAkACf0EAIARBgAJJDQAaQR8gBEH///8HSw0AGiAEQSYgAUEIdmciAGt2QQFxIABBAXRrQT5qCyIGQQJ0QbzSAGooAgAiAkUEQEEAIQFBACEDDAELQQAhASAEQRkgBkEBdmtBACAGQR9HG3QhAEEAIQMDQAJAIAIoAgRBeHEgBGsiByAFTw0AIAIhAyAHIgUNAEEAIQUgAiEBDAMLIAEgAkEUaigCACIHIAcgAiAAQR12QQRxakEQaigCACICRhsgASAHGyEBIABBAXQhACACDQALCyABIANyRQRAQQAhA0ECIAZ0IgBBACAAa3IgCHEiAEUNAyAAaEECdEG80gBqKAIAIQELIAFFDQELA0AgASgCBEF4cSAEayICIAVJIQAgAiAFIAAbIQUgASADIAAbIQMgASgCECIABH8gAAUgAUEUaigCAAsiAQ0ACwsgA0UNACAFQZTQACgCACAEa08NACADKAIYIQcgAyADKAIMIgBHBEBBnNAAKAIAGiAAIAMoAggiATYCCCABIAA2AgwMDgsgA0EUaiICKAIAIgFFBEAgAygCECIBRQ0DIANBEGohAgsDQCACIQYgASIAQRRqIgIoAgAiAQ0AIABBEGohAiAAKAIQIgENAAsgBkEANgIADA0LQZTQACgCACIDIARPBEBBoNAAKAIAIQECQCADIARrIgJBEE8EQCABIARqIgAgAkEBcjYCBCABIANqIAI2AgAgASAEQQNyNgIEDAELIAEgA0EDcjYCBCABIANqIgAgACgCBEEBcjYCBEEAIQBBACECC0GU0AAgAjYCAEGg0AAgADYCACABQQhqIQEMDwtBmNAAKAIAIgMgBEsEQCAEIAlqIgAgAyAEayIBQQFyNgIEQaTQACAANgIAQZjQACABNgIAIAkgBEEDcjYCBCAJQQhqIQEMDwtBACEBIAQCf0Hk0wAoAgAEQEHs0wAoAgAMAQtB8NMAQn83AgBB6NMAQoCAhICAgMAANwIAQeTTACAKQQxqQXBxQdiq1aoFczYCAEH40wBBADYCAEHI0wBBADYCAEGAgAQLIgAgBEHHAGoiBWoiBkEAIABrIgdxIgJPBEBB/NMAQTA2AgAMDwsCQEHE0wAoAgAiAUUNAEG80wAoAgAiCCACaiEAIAAgAU0gACAIS3ENAEEAIQFB/NMAQTA2AgAMDwtByNMALQAAQQRxDQQCQAJAIAkEQEHM0wAhAQNAIAEoAgAiACAJTQRAIAAgASgCBGogCUsNAwsgASgCCCIBDQALC0EAEDMiAEF/Rg0FIAIhBkHo0wAoAgAiAUEBayIDIABxBEAgAiAAayAAIANqQQAgAWtxaiEGCyAEIAZPDQUgBkH+////B0sNBUHE0wAoAgAiAwRAQbzTACgCACIHIAZqIQEgASAHTQ0GIAEgA0sNBgsgBhAzIgEgAEcNAQwHCyAGIANrIAdxIgZB/v///wdLDQQgBhAzIQAgACABKAIAIAEoAgRqRg0DIAAhAQsCQCAGIARByABqTw0AIAFBf0YNAEHs0wAoAgAiACAFIAZrakEAIABrcSIAQf7///8HSwRAIAEhAAwHCyAAEDNBf0cEQCAAIAZqIQYgASEADAcLQQAgBmsQMxoMBAsgASIAQX9HDQUMAwtBACEDDAwLQQAhAAwKCyAAQX9HDQILQcjTAEHI0wAoAgBBBHI2AgALIAJB/v///wdLDQEgAhAzIQBBABAzIQEgAEF/Rg0BIAFBf0YNASAAIAFPDQEgASAAayIGIARBOGpNDQELQbzTAEG80wAoAgAgBmoiATYCAEHA0wAoAgAgAUkEQEHA0wAgATYCAAsCQAJAAkBBpNAAKAIAIgIEQEHM0wAhAQNAIAAgASgCACIDIAEoAgQiBWpGDQIgASgCCCIBDQALDAILQZzQACgCACIBQQBHIAAgAU9xRQRAQZzQACAANgIAC0EAIQFB0NMAIAY2AgBBzNMAIAA2AgBBrNAAQX82AgBBsNAAQeTTACgCADYCAEHY0wBBADYCAANAIAFByNAAaiABQbzQAGoiAjYCACACIAFBtNAAaiIDNgIAIAFBwNAAaiADNgIAIAFB0NAAaiABQcTQAGoiAzYCACADIAI2AgAgAUHY0ABqIAFBzNAAaiICNgIAIAIgAzYCACABQdTQAGogAjYCACABQSBqIgFBgAJHDQALQXggAGtBD3EiASAAaiICIAZBOGsiAyABayIBQQFyNgIEQajQAEH00wAoAgA2AgBBmNAAIAE2AgBBpNAAIAI2AgAgACADakE4NgIEDAILIAAgAk0NACACIANJDQAgASgCDEEIcQ0AQXggAmtBD3EiACACaiIDQZjQACgCACAGaiIHIABrIgBBAXI2AgQgASAFIAZqNgIEQajQAEH00wAoAgA2AgBBmNAAIAA2AgBBpNAAIAM2AgAgAiAHakE4NgIEDAELIABBnNAAKAIASQRAQZzQACAANgIACyAAIAZqIQNBzNMAIQECQAJAAkADQCADIAEoAgBHBEAgASgCCCIBDQEMAgsLIAEtAAxBCHFFDQELQczTACEBA0AgASgCACIDIAJNBEAgAyABKAIEaiIFIAJLDQMLIAEoAgghAQwACwALIAEgADYCACABIAEoAgQgBmo2AgQgAEF4IABrQQ9xaiIJIARBA3I2AgQgA0F4IANrQQ9xaiIGIAQgCWoiBGshASACIAZGBEBBpNAAIAQ2AgBBmNAAQZjQACgCACABaiIANgIAIAQgAEEBcjYCBAwIC0Gg0AAoAgAgBkYEQEGg0AAgBDYCAEGU0ABBlNAAKAIAIAFqIgA2AgAgBCAAQQFyNgIEIAAgBGogADYCAAwICyAGKAIEIgVBA3FBAUcNBiAFQXhxIQggBUH/AU0EQCAFQQN2IQMgBigCCCIAIAYoAgwiAkYEQEGM0ABBjNAAKAIAQX4gA3dxNgIADAcLIAIgADYCCCAAIAI2AgwMBgsgBigCGCEHIAYgBigCDCIARwRAIAAgBigCCCICNgIIIAIgADYCDAwFCyAGQRRqIgIoAgAiBUUEQCAGKAIQIgVFDQQgBkEQaiECCwNAIAIhAyAFIgBBFGoiAigCACIFDQAgAEEQaiECIAAoAhAiBQ0ACyADQQA2AgAMBAtBeCAAa0EPcSIBIABqIgcgBkE4ayIDIAFrIgFBAXI2AgQgACADakE4NgIEIAIgBUE3IAVrQQ9xakE/ayIDIAMgAkEQakkbIgNBIzYCBEGo0ABB9NMAKAIANgIAQZjQACABNgIAQaTQACAHNgIAIANBEGpB1NMAKQIANwIAIANBzNMAKQIANwIIQdTTACADQQhqNgIAQdDTACAGNgIAQczTACAANgIAQdjTAEEANgIAIANBJGohAQNAIAFBBzYCACAFIAFBBGoiAUsNAAsgAiADRg0AIAMgAygCBEF+cTYCBCADIAMgAmsiBTYCACACIAVBAXI2AgQgBUH/AU0EQCAFQXhxQbTQAGohAAJ/QYzQACgCACIBQQEgBUEDdnQiA3FFBEBBjNAAIAEgA3I2AgAgAAwBCyAAKAIICyIBIAI2AgwgACACNgIIIAIgADYCDCACIAE2AggMAQtBHyEBIAVB////B00EQCAFQSYgBUEIdmciAGt2QQFxIABBAXRrQT5qIQELIAIgATYCHCACQgA3AhAgAUECdEG80gBqIQBBkNAAKAIAIgNBASABdCIGcUUEQCAAIAI2AgBBkNAAIAMgBnI2AgAgAiAANgIYIAIgAjYCCCACIAI2AgwMAQsgBUEZIAFBAXZrQQAgAUEfRxt0IQEgACgCACEDAkADQCADIgAoAgRBeHEgBUYNASABQR12IQMgAUEBdCEBIAAgA0EEcWpBEGoiBigCACIDDQALIAYgAjYCACACIAA2AhggAiACNgIMIAIgAjYCCAwBCyAAKAIIIgEgAjYCDCAAIAI2AgggAkEANgIYIAIgADYCDCACIAE2AggLQZjQACgCACIBIARNDQBBpNAAKAIAIgAgBGoiAiABIARrIgFBAXI2AgRBmNAAIAE2AgBBpNAAIAI2AgAgACAEQQNyNgIEIABBCGohAQwIC0EAIQFB/NMAQTA2AgAMBwtBACEACyAHRQ0AAkAgBigCHCICQQJ0QbzSAGoiAygCACAGRgRAIAMgADYCACAADQFBkNAAQZDQACgCAEF+IAJ3cTYCAAwCCyAHQRBBFCAHKAIQIAZGG2ogADYCACAARQ0BCyAAIAc2AhggBigCECICBEAgACACNgIQIAIgADYCGAsgBkEUaigCACICRQ0AIABBFGogAjYCACACIAA2AhgLIAEgCGohASAGIAhqIgYoAgQhBQsgBiAFQX5xNgIEIAEgBGogATYCACAEIAFBAXI2AgQgAUH/AU0EQCABQXhxQbTQAGohAAJ/QYzQACgCACICQQEgAUEDdnQiAXFFBEBBjNAAIAEgAnI2AgAgAAwBCyAAKAIICyIBIAQ2AgwgACAENgIIIAQgADYCDCAEIAE2AggMAQtBHyEFIAFB////B00EQCABQSYgAUEIdmciAGt2QQFxIABBAXRrQT5qIQULIAQgBTYCHCAEQgA3AhAgBUECdEG80gBqIQBBkNAAKAIAIgJBASAFdCIDcUUEQCAAIAQ2AgBBkNAAIAIgA3I2AgAgBCAANgIYIAQgBDYCCCAEIAQ2AgwMAQsgAUEZIAVBAXZrQQAgBUEfRxt0IQUgACgCACEAAkADQCAAIgIoAgRBeHEgAUYNASAFQR12IQAgBUEBdCEFIAIgAEEEcWpBEGoiAygCACIADQALIAMgBDYCACAEIAI2AhggBCAENgIMIAQgBDYCCAwBCyACKAIIIgAgBDYCDCACIAQ2AgggBEEANgIYIAQgAjYCDCAEIAA2AggLIAlBCGohAQwCCwJAIAdFDQACQCADKAIcIgFBAnRBvNIAaiICKAIAIANGBEAgAiAANgIAIAANAUGQ0AAgCEF+IAF3cSIINgIADAILIAdBEEEUIAcoAhAgA0YbaiAANgIAIABFDQELIAAgBzYCGCADKAIQIgEEQCAAIAE2AhAgASAANgIYCyADQRRqKAIAIgFFDQAgAEEUaiABNgIAIAEgADYCGAsCQCAFQQ9NBEAgAyAEIAVqIgBBA3I2AgQgACADaiIAIAAoAgRBAXI2AgQMAQsgAyAEaiICIAVBAXI2AgQgAyAEQQNyNgIEIAIgBWogBTYCACAFQf8BTQRAIAVBeHFBtNAAaiEAAn9BjNAAKAIAIgFBASAFQQN2dCIFcUUEQEGM0AAgASAFcjYCACAADAELIAAoAggLIgEgAjYCDCAAIAI2AgggAiAANgIMIAIgATYCCAwBC0EfIQEgBUH///8HTQRAIAVBJiAFQQh2ZyIAa3ZBAXEgAEEBdGtBPmohAQsgAiABNgIcIAJCADcCECABQQJ0QbzSAGohAEEBIAF0IgQgCHFFBEAgACACNgIAQZDQACAEIAhyNgIAIAIgADYCGCACIAI2AgggAiACNgIMDAELIAVBGSABQQF2a0EAIAFBH0cbdCEBIAAoAgAhBAJAA0AgBCIAKAIEQXhxIAVGDQEgAUEddiEEIAFBAXQhASAAIARBBHFqQRBqIgYoAgAiBA0ACyAGIAI2AgAgAiAANgIYIAIgAjYCDCACIAI2AggMAQsgACgCCCIBIAI2AgwgACACNgIIIAJBADYCGCACIAA2AgwgAiABNgIICyADQQhqIQEMAQsCQCAJRQ0AAkAgACgCHCIBQQJ0QbzSAGoiAigCACAARgRAIAIgAzYCACADDQFBkNAAIAtBfiABd3E2AgAMAgsgCUEQQRQgCSgCECAARhtqIAM2AgAgA0UNAQsgAyAJNgIYIAAoAhAiAQRAIAMgATYCECABIAM2AhgLIABBFGooAgAiAUUNACADQRRqIAE2AgAgASADNgIYCwJAIAVBD00EQCAAIAQgBWoiAUEDcjYCBCAAIAFqIgEgASgCBEEBcjYCBAwBCyAAIARqIgcgBUEBcjYCBCAAIARBA3I2AgQgBSAHaiAFNgIAIAgEQCAIQXhxQbTQAGohAUGg0AAoAgAhAwJ/QQEgCEEDdnQiAiAGcUUEQEGM0AAgAiAGcjYCACABDAELIAEoAggLIgIgAzYCDCABIAM2AgggAyABNgIMIAMgAjYCCAtBoNAAIAc2AgBBlNAAIAU2AgALIABBCGohAQsgCkEQaiQAIAELQwAgAEUEQD8AQRB0DwsCQCAAQf//A3ENACAAQQBIDQAgAEEQdkAAIgBBf0YEQEH80wBBMDYCAEF/DwsgAEEQdA8LAAsL3D8iAEGACAsJAQAAAAIAAAADAEGUCAsFBAAAAAUAQaQICwkGAAAABwAAAAgAQdwIC4otSW52YWxpZCBjaGFyIGluIHVybCBxdWVyeQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2JvZHkAQ29udGVudC1MZW5ndGggb3ZlcmZsb3cAQ2h1bmsgc2l6ZSBvdmVyZmxvdwBSZXNwb25zZSBvdmVyZmxvdwBJbnZhbGlkIG1ldGhvZCBmb3IgSFRUUC94LnggcmVxdWVzdABJbnZhbGlkIG1ldGhvZCBmb3IgUlRTUC94LnggcmVxdWVzdABFeHBlY3RlZCBTT1VSQ0UgbWV0aG9kIGZvciBJQ0UveC54IHJlcXVlc3QASW52YWxpZCBjaGFyIGluIHVybCBmcmFnbWVudCBzdGFydABFeHBlY3RlZCBkb3QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9zdGF0dXMASW52YWxpZCByZXNwb25zZSBzdGF0dXMASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucwBVc2VyIGNhbGxiYWNrIGVycm9yAGBvbl9yZXNldGAgY2FsbGJhY2sgZXJyb3IAYG9uX2NodW5rX2hlYWRlcmAgY2FsbGJhY2sgZXJyb3IAYG9uX21lc3NhZ2VfYmVnaW5gIGNhbGxiYWNrIGVycm9yAGBvbl9jaHVua19leHRlbnNpb25fdmFsdWVgIGNhbGxiYWNrIGVycm9yAGBvbl9zdGF0dXNfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl92ZXJzaW9uX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fdXJsX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGVgIGNhbGxiYWNrIGVycm9yAGBvbl9tZXNzYWdlX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fbWV0aG9kX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlYCBjYWxsYmFjayBlcnJvcgBgb25fY2h1bmtfZXh0ZW5zaW9uX25hbWVgIGNhbGxiYWNrIGVycm9yAFVuZXhwZWN0ZWQgY2hhciBpbiB1cmwgc2VydmVyAEludmFsaWQgaGVhZGVyIHZhbHVlIGNoYXIASW52YWxpZCBoZWFkZXIgZmllbGQgY2hhcgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3ZlcnNpb24ASW52YWxpZCBtaW5vciB2ZXJzaW9uAEludmFsaWQgbWFqb3IgdmVyc2lvbgBFeHBlY3RlZCBzcGFjZSBhZnRlciB2ZXJzaW9uAEV4cGVjdGVkIENSTEYgYWZ0ZXIgdmVyc2lvbgBJbnZhbGlkIEhUVFAgdmVyc2lvbgBJbnZhbGlkIGhlYWRlciB0b2tlbgBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX3VybABJbnZhbGlkIGNoYXJhY3RlcnMgaW4gdXJsAFVuZXhwZWN0ZWQgc3RhcnQgY2hhciBpbiB1cmwARG91YmxlIEAgaW4gdXJsAEVtcHR5IENvbnRlbnQtTGVuZ3RoAEludmFsaWQgY2hhcmFjdGVyIGluIENvbnRlbnQtTGVuZ3RoAER1cGxpY2F0ZSBDb250ZW50LUxlbmd0aABJbnZhbGlkIGNoYXIgaW4gdXJsIHBhdGgAQ29udGVudC1MZW5ndGggY2FuJ3QgYmUgcHJlc2VudCB3aXRoIFRyYW5zZmVyLUVuY29kaW5nAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIHNpemUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfdmFsdWUAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9jaHVua19leHRlbnNpb25fdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyB2YWx1ZQBNaXNzaW5nIGV4cGVjdGVkIExGIGFmdGVyIGhlYWRlciB2YWx1ZQBJbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AgaGVhZGVyIHZhbHVlAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgcXVvdGUgdmFsdWUASW52YWxpZCBjaGFyYWN0ZXIgaW4gY2h1bmsgZXh0ZW5zaW9ucyBxdW90ZWQgdmFsdWUAUGF1c2VkIGJ5IG9uX2hlYWRlcnNfY29tcGxldGUASW52YWxpZCBFT0Ygc3RhdGUAb25fcmVzZXQgcGF1c2UAb25fY2h1bmtfaGVhZGVyIHBhdXNlAG9uX21lc3NhZ2VfYmVnaW4gcGF1c2UAb25fY2h1bmtfZXh0ZW5zaW9uX3ZhbHVlIHBhdXNlAG9uX3N0YXR1c19jb21wbGV0ZSBwYXVzZQBvbl92ZXJzaW9uX2NvbXBsZXRlIHBhdXNlAG9uX3VybF9jb21wbGV0ZSBwYXVzZQBvbl9jaHVua19jb21wbGV0ZSBwYXVzZQBvbl9oZWFkZXJfdmFsdWVfY29tcGxldGUgcGF1c2UAb25fbWVzc2FnZV9jb21wbGV0ZSBwYXVzZQBvbl9tZXRob2RfY29tcGxldGUgcGF1c2UAb25faGVhZGVyX2ZpZWxkX2NvbXBsZXRlIHBhdXNlAG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lIHBhdXNlAFVuZXhwZWN0ZWQgc3BhY2UgYWZ0ZXIgc3RhcnQgbGluZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX2NodW5rX2V4dGVuc2lvbl9uYW1lAEludmFsaWQgY2hhcmFjdGVyIGluIGNodW5rIGV4dGVuc2lvbnMgbmFtZQBQYXVzZSBvbiBDT05ORUNUL1VwZ3JhZGUAUGF1c2Ugb24gUFJJL1VwZ3JhZGUARXhwZWN0ZWQgSFRUUC8yIENvbm5lY3Rpb24gUHJlZmFjZQBTcGFuIGNhbGxiYWNrIGVycm9yIGluIG9uX21ldGhvZABFeHBlY3RlZCBzcGFjZSBhZnRlciBtZXRob2QAU3BhbiBjYWxsYmFjayBlcnJvciBpbiBvbl9oZWFkZXJfZmllbGQAUGF1c2VkAEludmFsaWQgd29yZCBlbmNvdW50ZXJlZABJbnZhbGlkIG1ldGhvZCBlbmNvdW50ZXJlZABVbmV4cGVjdGVkIGNoYXIgaW4gdXJsIHNjaGVtYQBSZXF1ZXN0IGhhcyBpbnZhbGlkIGBUcmFuc2Zlci1FbmNvZGluZ2AAU1dJVENIX1BST1hZAFVTRV9QUk9YWQBNS0FDVElWSVRZAFVOUFJPQ0VTU0FCTEVfRU5USVRZAENPUFkATU9WRURfUEVSTUFORU5UTFkAVE9PX0VBUkxZAE5PVElGWQBGQUlMRURfREVQRU5ERU5DWQBCQURfR0FURVdBWQBQTEFZAFBVVABDSEVDS09VVABHQVRFV0FZX1RJTUVPVVQAUkVRVUVTVF9USU1FT1VUAE5FVFdPUktfQ09OTkVDVF9USU1FT1VUAENPTk5FQ1RJT05fVElNRU9VVABMT0dJTl9USU1FT1VUAE5FVFdPUktfUkVBRF9USU1FT1VUAFBPU1QATUlTRElSRUNURURfUkVRVUVTVABDTElFTlRfQ0xPU0VEX1JFUVVFU1QAQ0xJRU5UX0NMT1NFRF9MT0FEX0JBTEFOQ0VEX1JFUVVFU1QAQkFEX1JFUVVFU1QASFRUUF9SRVFVRVNUX1NFTlRfVE9fSFRUUFNfUE9SVABSRVBPUlQASU1fQV9URUFQT1QAUkVTRVRfQ09OVEVOVABOT19DT05URU5UAFBBUlRJQUxfQ09OVEVOVABIUEVfSU5WQUxJRF9DT05TVEFOVABIUEVfQ0JfUkVTRVQAR0VUAEhQRV9TVFJJQ1QAQ09ORkxJQ1QAVEVNUE9SQVJZX1JFRElSRUNUAFBFUk1BTkVOVF9SRURJUkVDVABDT05ORUNUAE1VTFRJX1NUQVRVUwBIUEVfSU5WQUxJRF9TVEFUVVMAVE9PX01BTllfUkVRVUVTVFMARUFSTFlfSElOVFMAVU5BVkFJTEFCTEVfRk9SX0xFR0FMX1JFQVNPTlMAT1BUSU9OUwBTV0lUQ0hJTkdfUFJPVE9DT0xTAFZBUklBTlRfQUxTT19ORUdPVElBVEVTAE1VTFRJUExFX0NIT0lDRVMASU5URVJOQUxfU0VSVkVSX0VSUk9SAFdFQl9TRVJWRVJfVU5LTk9XTl9FUlJPUgBSQUlMR1VOX0VSUk9SAElERU5USVRZX1BST1ZJREVSX0FVVEhFTlRJQ0FUSU9OX0VSUk9SAFNTTF9DRVJUSUZJQ0FURV9FUlJPUgBJTlZBTElEX1hfRk9SV0FSREVEX0ZPUgBTRVRfUEFSQU1FVEVSAEdFVF9QQVJBTUVURVIASFBFX1VTRVIAU0VFX09USEVSAEhQRV9DQl9DSFVOS19IRUFERVIATUtDQUxFTkRBUgBTRVRVUABXRUJfU0VSVkVSX0lTX0RPV04AVEVBUkRPV04ASFBFX0NMT1NFRF9DT05ORUNUSU9OAEhFVVJJU1RJQ19FWFBJUkFUSU9OAERJU0NPTk5FQ1RFRF9PUEVSQVRJT04ATk9OX0FVVEhPUklUQVRJVkVfSU5GT1JNQVRJT04ASFBFX0lOVkFMSURfVkVSU0lPTgBIUEVfQ0JfTUVTU0FHRV9CRUdJTgBTSVRFX0lTX0ZST1pFTgBIUEVfSU5WQUxJRF9IRUFERVJfVE9LRU4ASU5WQUxJRF9UT0tFTgBGT1JCSURERU4ARU5IQU5DRV9ZT1VSX0NBTE0ASFBFX0lOVkFMSURfVVJMAEJMT0NLRURfQllfUEFSRU5UQUxfQ09OVFJPTABNS0NPTABBQ0wASFBFX0lOVEVSTkFMAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0VfVU5PRkZJQ0lBTABIUEVfT0sAVU5MSU5LAFVOTE9DSwBQUkkAUkVUUllfV0lUSABIUEVfSU5WQUxJRF9DT05URU5UX0xFTkdUSABIUEVfVU5FWFBFQ1RFRF9DT05URU5UX0xFTkdUSABGTFVTSABQUk9QUEFUQ0gATS1TRUFSQ0gAVVJJX1RPT19MT05HAFBST0NFU1NJTkcATUlTQ0VMTEFORU9VU19QRVJTSVNURU5UX1dBUk5JTkcATUlTQ0VMTEFORU9VU19XQVJOSU5HAEhQRV9JTlZBTElEX1RSQU5TRkVSX0VOQ09ESU5HAEV4cGVjdGVkIENSTEYASFBFX0lOVkFMSURfQ0hVTktfU0laRQBNT1ZFAENPTlRJTlVFAEhQRV9DQl9TVEFUVVNfQ09NUExFVEUASFBFX0NCX0hFQURFUlNfQ09NUExFVEUASFBFX0NCX1ZFUlNJT05fQ09NUExFVEUASFBFX0NCX1VSTF9DT01QTEVURQBIUEVfQ0JfQ0hVTktfQ09NUExFVEUASFBFX0NCX0hFQURFUl9WQUxVRV9DT01QTEVURQBIUEVfQ0JfQ0hVTktfRVhURU5TSU9OX1ZBTFVFX0NPTVBMRVRFAEhQRV9DQl9DSFVOS19FWFRFTlNJT05fTkFNRV9DT01QTEVURQBIUEVfQ0JfTUVTU0FHRV9DT01QTEVURQBIUEVfQ0JfTUVUSE9EX0NPTVBMRVRFAEhQRV9DQl9IRUFERVJfRklFTERfQ09NUExFVEUAREVMRVRFAEhQRV9JTlZBTElEX0VPRl9TVEFURQBJTlZBTElEX1NTTF9DRVJUSUZJQ0FURQBQQVVTRQBOT19SRVNQT05TRQBVTlNVUFBPUlRFRF9NRURJQV9UWVBFAEdPTkUATk9UX0FDQ0VQVEFCTEUAU0VSVklDRV9VTkFWQUlMQUJMRQBSQU5HRV9OT1RfU0FUSVNGSUFCTEUAT1JJR0lOX0lTX1VOUkVBQ0hBQkxFAFJFU1BPTlNFX0lTX1NUQUxFAFBVUkdFAE1FUkdFAFJFUVVFU1RfSEVBREVSX0ZJRUxEU19UT09fTEFSR0UAUkVRVUVTVF9IRUFERVJfVE9PX0xBUkdFAFBBWUxPQURfVE9PX0xBUkdFAElOU1VGRklDSUVOVF9TVE9SQUdFAEhQRV9QQVVTRURfVVBHUkFERQBIUEVfUEFVU0VEX0gyX1VQR1JBREUAU09VUkNFAEFOTk9VTkNFAFRSQUNFAEhQRV9VTkVYUEVDVEVEX1NQQUNFAERFU0NSSUJFAFVOU1VCU0NSSUJFAFJFQ09SRABIUEVfSU5WQUxJRF9NRVRIT0QATk9UX0ZPVU5EAFBST1BGSU5EAFVOQklORABSRUJJTkQAVU5BVVRIT1JJWkVEAE1FVEhPRF9OT1RfQUxMT1dFRABIVFRQX1ZFUlNJT05fTk9UX1NVUFBPUlRFRABBTFJFQURZX1JFUE9SVEVEAEFDQ0VQVEVEAE5PVF9JTVBMRU1FTlRFRABMT09QX0RFVEVDVEVEAEhQRV9DUl9FWFBFQ1RFRABIUEVfTEZfRVhQRUNURUQAQ1JFQVRFRABJTV9VU0VEAEhQRV9QQVVTRUQAVElNRU9VVF9PQ0NVUkVEAFBBWU1FTlRfUkVRVUlSRUQAUFJFQ09ORElUSU9OX1JFUVVJUkVEAFBST1hZX0FVVEhFTlRJQ0FUSU9OX1JFUVVJUkVEAE5FVFdPUktfQVVUSEVOVElDQVRJT05fUkVRVUlSRUQATEVOR1RIX1JFUVVJUkVEAFNTTF9DRVJUSUZJQ0FURV9SRVFVSVJFRABVUEdSQURFX1JFUVVJUkVEAFBBR0VfRVhQSVJFRABQUkVDT05ESVRJT05fRkFJTEVEAEVYUEVDVEFUSU9OX0ZBSUxFRABSRVZBTElEQVRJT05fRkFJTEVEAFNTTF9IQU5EU0hBS0VfRkFJTEVEAExPQ0tFRABUUkFOU0ZPUk1BVElPTl9BUFBMSUVEAE5PVF9NT0RJRklFRABOT1RfRVhURU5ERUQAQkFORFdJRFRIX0xJTUlUX0VYQ0VFREVEAFNJVEVfSVNfT1ZFUkxPQURFRABIRUFEAEV4cGVjdGVkIEhUVFAvAABeEwAAJhMAADAQAADwFwAAnRMAABUSAAA5FwAA8BIAAAoQAAB1EgAArRIAAIITAABPFAAAfxAAAKAVAAAjFAAAiRIAAIsUAABNFQAA1BEAAM8UAAAQGAAAyRYAANwWAADBEQAA4BcAALsUAAB0FAAAfBUAAOUUAAAIFwAAHxAAAGUVAACjFAAAKBUAAAIVAACZFQAALBAAAIsZAABPDwAA1A4AAGoQAADOEAAAAhcAAIkOAABuEwAAHBMAAGYUAABWFwAAwRMAAM0TAABsEwAAaBcAAGYXAABfFwAAIhMAAM4PAABpDgAA2A4AAGMWAADLEwAAqg4AACgXAAAmFwAAxRMAAF0WAADoEQAAZxMAAGUTAADyFgAAcxMAAB0XAAD5FgAA8xEAAM8OAADOFQAADBIAALMRAAClEQAAYRAAADIXAAC7EwBB+TULAQEAQZA2C+ABAQECAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQf03CwEBAEGROAteAgMCAgICAgAAAgIAAgIAAgICAgICAgICAgAEAAAAAAACAgICAgICAgICAgICAgICAgICAgICAgICAgAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAgICAAIAAgBB/TkLAQEAQZE6C14CAAICAgICAAACAgACAgACAgICAgICAgICAAMABAAAAAICAgICAgICAgICAgICAgICAgICAgICAgICAAAAAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAAgACAEHwOwsNbG9zZWVlcC1hbGl2ZQBBiTwLAQEAQaA8C+ABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQYk+CwEBAEGgPgvnAQEBAQEBAQEBAQEBAQIBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBY2h1bmtlZABBsMAAC18BAQABAQEBAQAAAQEAAQEAAQEBAQEBAQEBAQAAAAAAAAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQBBkMIACyFlY3Rpb25lbnQtbGVuZ3Rob25yb3h5LWNvbm5lY3Rpb24AQcDCAAstcmFuc2Zlci1lbmNvZGluZ3BncmFkZQ0KDQoNClNNDQoNClRUUC9DRS9UU1AvAEH5wgALBQECAAEDAEGQwwAL4AEEAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+cQACwUBAgABAwBBkMUAC+ABBAEBBQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEAQfnGAAsEAQAAAQBBkccAC98BAQEAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQBB+sgACwQBAAACAEGQyQALXwMEAAAEBAQEBAQEBAQEBAUEBAQEBAQEBAQEBAQABAAGBwQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAAEAAQABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQAAAAEAEH6ygALBAEAAAEAQZDLAAsBAQBBqssAC0ECAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAAAAAAAADAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBB+swACwQBAAABAEGQzQALAQEAQZrNAAsGAgAAAAACAEGxzQALOgMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAAAAAAAAAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAQfDOAAuWAU5PVU5DRUVDS09VVE5FQ1RFVEVDUklCRUxVU0hFVEVBRFNFQVJDSFJHRUNUSVZJVFlMRU5EQVJWRU9USUZZUFRJT05TQ0hTRUFZU1RBVENIR0VPUkRJUkVDVE9SVFJDSFBBUkFNRVRFUlVSQ0VCU0NSSUJFQVJET1dOQUNFSU5ETktDS1VCU0NSSUJFSFRUUC9BRFRQLw==","base64")});var RP=H((vVn,$ke)=>{"use strict";f();var Uke=["GET","HEAD","POST"],j1t=new Set(Uke),V1t=[101,204,205,304],qke=[301,302,303,307,308],$1t=new Set(qke),Wke=["1","7","9","11","13","15","17","19","20","21","22","23","25","37","42","43","53","69","77","79","87","95","101","102","103","104","109","110","111","113","115","117","119","123","135","137","139","143","161","179","389","427","465","512","513","514","515","526","530","531","532","540","548","554","556","563","587","601","636","989","990","993","995","1719","1720","1723","2049","3659","4045","4190","5060","5061","6000","6566","6665","6666","6667","6668","6669","6679","6697","10080"],z1t=new Set(Wke),Hke=["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"],Y1t=new Set(Hke),K1t=["follow","manual","error"],Gke=["GET","HEAD","OPTIONS","TRACE"],J1t=new Set(Gke),X1t=["navigate","same-origin","no-cors","cors"],Z1t=["omit","same-origin","include"],eyt=["default","no-store","reload","no-cache","force-cache","only-if-cached"],tyt=["content-encoding","content-language","content-location","content-type","content-length"],nyt=["half"],jke=["CONNECT","TRACE","TRACK"],ryt=new Set(jke),Vke=["audio","audioworklet","font","image","manifest","paintworklet","script","style","track","video","xslt",""],iyt=new Set(Vke);$ke.exports={subresource:Vke,forbiddenMethods:jke,requestBodyHeader:tyt,referrerPolicy:Hke,requestRedirect:K1t,requestMode:X1t,requestCredentials:Z1t,requestCache:eyt,redirectStatus:qke,corsSafeListedMethods:Uke,nullBodyStatus:V1t,safeMethods:Gke,badPorts:Wke,requestDuplex:nyt,subresourceSet:iyt,badPortsSet:z1t,redirectStatusSet:$1t,corsSafeListedMethodsSet:j1t,safeMethodsSet:J1t,forbiddenMethodsSet:ryt,referrerPolicySet:Y1t}});var lse=H((EVn,zke)=>{"use strict";f();var ase=Symbol.for("undici.globalOrigin.1");function oyt(){return globalThis[ase]}s(oyt,"getGlobalOrigin");function syt(t){if(t===void 0){Object.defineProperty(globalThis,ase,{value:void 0,writable:!0,enumerable:!1,configurable:!1});return}let e=new URL(t);if(e.protocol!=="http:"&&e.protocol!=="https:")throw new TypeError(`Only http & https urls are allowed, received ${e.protocol}`);Object.defineProperty(globalThis,ase,{value:e,writable:!0,enumerable:!1,configurable:!1})}s(syt,"setGlobalOrigin");zke.exports={getGlobalOrigin:oyt,setGlobalOrigin:syt}});var Id=H((wVn,tBe)=>{"use strict";f();var Nq=require("node:assert"),ayt=new TextEncoder,kP=/^[!#$%&'*+\-.^_|~A-Za-z0-9]+$/,lyt=/[\u000A\u000D\u0009\u0020]/,cyt=/[\u0009\u000A\u000C\u000D\u0020]/g,uyt=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function dyt(t){Nq(t.protocol==="data:");let e=Jke(t,!0);e=e.slice(5);let n={position:0},r=K5(",",e,n),i=r.length;if(r=Ayt(r,!0,!0),n.position>=e.length)return"failure";n.position++;let o=e.slice(i+1),a=Xke(o);if(/;(\u0020){0,}base64$/i.test(r)){let c=eBe(a);if(a=pyt(c),a==="failure")return"failure";r=r.slice(0,-6),r=r.replace(/(\u0020)+$/,""),r=r.slice(0,-1)}r.startsWith(";")&&(r="text/plain"+r);let l=cse(r);return l==="failure"&&(l=cse("text/plain;charset=US-ASCII")),{mimeType:l,body:a}}s(dyt,"dataURLProcessor");function Jke(t,e=!1){if(!e)return t.href;let n=t.href,r=t.hash.length,i=r===0?n:n.substring(0,n.length-r);return!r&&n.endsWith("#")?i.slice(0,-1):i}s(Jke,"URLSerializer");function Lq(t,e,n){let r="";for(;n.position<e.length&&t(e[n.position]);)r+=e[n.position],n.position++;return r}s(Lq,"collectASequenceOfCodePoints");function K5(t,e,n){let r=e.indexOf(t,n.position),i=n.position;return r===-1?(n.position=e.length,e.slice(i)):(n.position=r,e.slice(i,n.position))}s(K5,"collectASequenceOfCodePointsFast");function Xke(t){let e=ayt.encode(t);return fyt(e)}s(Xke,"stringPercentDecode");function Yke(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}s(Yke,"isHexCharByte");function Kke(t){return t>=48&&t<=57?t-48:(t&223)-55}s(Kke,"hexByteToNumber");function fyt(t){let e=t.length,n=new Uint8Array(e),r=0;for(let i=0;i<e;++i){let o=t[i];o!==37?n[r++]=o:o===37&&!(Yke(t[i+1])&&Yke(t[i+2]))?n[r++]=37:(n[r++]=Kke(t[i+1])<<4|Kke(t[i+2]),i+=2)}return e===r?n:n.subarray(0,r)}s(fyt,"percentDecode");function cse(t){t=Dq(t,!0,!0);let e={position:0},n=K5("/",t,e);if(n.length===0||!kP.test(n)||e.position>t.length)return"failure";e.position++;let r=K5(";",t,e);if(r=Dq(r,!1,!0),r.length===0||!kP.test(r))return"failure";let i=n.toLowerCase(),o=r.toLowerCase(),a={type:i,subtype:o,parameters:new Map,essence:`${i}/${o}`};for(;e.position<t.length;){e.position++,Lq(u=>lyt.test(u),t,e);let l=Lq(u=>u!==";"&&u!=="=",t,e);if(l=l.toLowerCase(),e.position<t.length){if(t[e.position]===";")continue;e.position++}if(e.position>t.length)break;let c=null;if(t[e.position]==='"')c=Zke(t,e,!0),K5(";",t,e);else if(c=K5(";",t,e),c=Dq(c,!1,!0),c.length===0)continue;l.length!==0&&kP.test(l)&&(c.length===0||uyt.test(c))&&!a.parameters.has(l)&&a.parameters.set(l,c)}return a}s(cse,"parseMIMEType");function pyt(t){t=t.replace(cyt,"");let e=t.length;if(e%4===0&&t.charCodeAt(e-1)===61&&(--e,t.charCodeAt(e-1)===61&&--e),e%4===1||/[^+/0-9A-Za-z]/.test(t.length===e?t:t.substring(0,e)))return"failure";let n=Buffer.from(t,"base64");return new Uint8Array(n.buffer,n.byteOffset,n.byteLength)}s(pyt,"forgivingBase64");function Zke(t,e,n){let r=e.position,i="";for(Nq(t[e.position]==='"'),e.position++;i+=Lq(a=>a!=='"'&&a!=="\\",t,e),!(e.position>=t.length);){let o=t[e.position];if(e.position++,o==="\\"){if(e.position>=t.length){i+="\\";break}i+=t[e.position],e.position++}else{Nq(o==='"');break}}return n?i:t.slice(r,e.position)}s(Zke,"collectAnHTTPQuotedString");function myt(t){Nq(t!=="failure");let{parameters:e,essence:n}=t,r=n;for(let[i,o]of e.entries())r+=";",r+=i,r+="=",kP.test(o)||(o=o.replace(/(\\|")/g,"\\$1"),o='"'+o,o+='"'),r+=o;return r}s(myt,"serializeAMimeType");function hyt(t){return t===13||t===10||t===9||t===32}s(hyt,"isHTTPWhiteSpace");function Dq(t,e=!0,n=!0){return use(t,e,n,hyt)}s(Dq,"removeHTTPWhitespace");function gyt(t){return t===13||t===10||t===9||t===12||t===32}s(gyt,"isASCIIWhitespace");function Ayt(t,e=!0,n=!0){return use(t,e,n,gyt)}s(Ayt,"removeASCIIWhitespace");function use(t,e,n,r){let i=0,o=t.length-1;if(e)for(;i<t.length&&r(t.charCodeAt(i));)i++;if(n)for(;o>0&&r(t.charCodeAt(o));)o--;return i===0&&o===t.length-1?t:t.slice(i,o+1)}s(use,"removeChars");function eBe(t){let e=t.length;if(65535>e)return String.fromCharCode.apply(null,t);let n="",r=0,i=65535;for(;r<e;)r+i>e&&(i=e-r),n+=String.fromCharCode.apply(null,t.subarray(r,r+=i));return n}s(eBe,"isomorphicDecode");function yyt(t){switch(t.essence){case"application/ecmascript":case"application/javascript":case"application/x-ecmascript":case"application/x-javascript":case"text/ecmascript":case"text/javascript":case"text/javascript1.0":case"text/javascript1.1":case"text/javascript1.2":case"text/javascript1.3":case"text/javascript1.4":case"text/javascript1.5":case"text/jscript":case"text/livescript":case"text/x-ecmascript":case"text/x-javascript":return"text/javascript";case"application/json":case"text/json":return"application/json";case"image/svg+xml":return"image/svg+xml";case"text/xml":case"application/xml":return"application/xml"}return t.subtype.endsWith("+json")?"application/json":t.subtype.endsWith("+xml")?"application/xml":""}s(yyt,"minimizeSupportedMimeType");tBe.exports={dataURLProcessor:dyt,URLSerializer:Jke,collectASequenceOfCodePoints:Lq,collectASequenceOfCodePointsFast:K5,stringPercentDecode:Xke,parseMIMEType:cse,collectAnHTTPQuotedString:Zke,serializeAMimeType:myt,removeChars:use,removeHTTPWhitespace:Dq,minimizeSupportedMimeType:yyt,HTTP_TOKEN_CODEPOINTS:kP,isomorphicDecode:eBe}});var yc=H((RVn,nBe)=>{"use strict";f();var{types:Ng,inspect:Cyt}=require("node:util"),{markAsUncloneable:xyt}=require("node:worker_threads"),{toUSVString:vyt}=yi(),Pt={};Pt.converters={};Pt.util={};Pt.errors={};Pt.errors.exception=function(t){return new TypeError(`${t.header}: ${t.message}`)};Pt.errors.conversionFailed=function(t){let e=t.types.length===1?"":" one of",n=`${t.argument} could not be converted to${e}: ${t.types.join(", ")}.`;return Pt.errors.exception({header:t.prefix,message:n})};Pt.errors.invalidArgument=function(t){return Pt.errors.exception({header:t.prefix,message:`"${t.value}" is an invalid ${t.type}.`})};Pt.brandCheck=function(t,e,n){if(n?.strict!==!1){if(!(t instanceof e)){let r=new TypeError("Illegal invocation");throw r.code="ERR_INVALID_THIS",r}}else if(t?.[Symbol.toStringTag]!==e.prototype[Symbol.toStringTag]){let r=new TypeError("Illegal invocation");throw r.code="ERR_INVALID_THIS",r}};Pt.argumentLengthCheck=function({length:t},e,n){if(t<e)throw Pt.errors.exception({message:`${e} argument${e!==1?"s":""} required, but${t?" only":""} ${t} found.`,header:n})};Pt.illegalConstructor=function(){throw Pt.errors.exception({header:"TypeError",message:"Illegal constructor"})};Pt.util.Type=function(t){switch(typeof t){case"undefined":return"Undefined";case"boolean":return"Boolean";case"string":return"String";case"symbol":return"Symbol";case"number":return"Number";case"bigint":return"BigInt";case"function":case"object":return t===null?"Null":"Object"}};Pt.util.markAsUncloneable=xyt||(()=>{});Pt.util.ConvertToInt=function(t,e,n,r){let i,o;e===64?(i=Math.pow(2,53)-1,n==="unsigned"?o=0:o=Math.pow(-2,53)+1):n==="unsigned"?(o=0,i=Math.pow(2,e)-1):(o=Math.pow(-2,e)-1,i=Math.pow(2,e-1)-1);let a=Number(t);if(a===0&&(a=0),r?.enforceRange===!0){if(Number.isNaN(a)||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY)throw Pt.errors.exception({header:"Integer conversion",message:`Could not convert ${Pt.util.Stringify(t)} to an integer.`});if(a=Pt.util.IntegerPart(a),a<o||a>i)throw Pt.errors.exception({header:"Integer conversion",message:`Value must be between ${o}-${i}, got ${a}.`});return a}return!Number.isNaN(a)&&r?.clamp===!0?(a=Math.min(Math.max(a,o),i),Math.floor(a)%2===0?a=Math.floor(a):a=Math.ceil(a),a):Number.isNaN(a)||a===0&&Object.is(0,a)||a===Number.POSITIVE_INFINITY||a===Number.NEGATIVE_INFINITY?0:(a=Pt.util.IntegerPart(a),a=a%Math.pow(2,e),n==="signed"&&a>=Math.pow(2,e)-1?a-Math.pow(2,e):a)};Pt.util.IntegerPart=function(t){let e=Math.floor(Math.abs(t));return t<0?-1*e:e};Pt.util.Stringify=function(t){switch(Pt.util.Type(t)){case"Symbol":return`Symbol(${t.description})`;case"Object":return Cyt(t);case"String":return`"${t}"`;default:return`${t}`}};Pt.sequenceConverter=function(t){return(e,n,r,i)=>{if(Pt.util.Type(e)!=="Object")throw Pt.errors.exception({header:n,message:`${r} (${Pt.util.Stringify(e)}) is not iterable.`});let o=typeof i=="function"?i():e?.[Symbol.iterator]?.(),a=[],l=0;if(o===void 0||typeof o.next!="function")throw Pt.errors.exception({header:n,message:`${r} is not iterable.`});for(;;){let{done:c,value:u}=o.next();if(c)break;a.push(t(u,n,`${r}[${l++}]`))}return a}};Pt.recordConverter=function(t,e){return(n,r,i)=>{if(Pt.util.Type(n)!=="Object")throw Pt.errors.exception({header:r,message:`${i} ("${Pt.util.Type(n)}") is not an Object.`});let o={};if(!Ng.isProxy(n)){let l=[...Object.getOwnPropertyNames(n),...Object.getOwnPropertySymbols(n)];for(let c of l){let u=t(c,r,i),d=e(n[c],r,i);o[u]=d}return o}let a=Reflect.ownKeys(n);for(let l of a)if(Reflect.getOwnPropertyDescriptor(n,l)?.enumerable){let u=t(l,r,i),d=e(n[l],r,i);o[u]=d}return o}};Pt.interfaceConverter=function(t){return(e,n,r,i)=>{if(i?.strict!==!1&&!(e instanceof t))throw Pt.errors.exception({header:n,message:`Expected ${r} ("${Pt.util.Stringify(e)}") to be an instance of ${t.name}.`});return e}};Pt.dictionaryConverter=function(t){return(e,n,r)=>{let i=Pt.util.Type(e),o={};if(i==="Null"||i==="Undefined")return o;if(i!=="Object")throw Pt.errors.exception({header:n,message:`Expected ${e} to be one of: Null, Undefined, Object.`});for(let a of t){let{key:l,defaultValue:c,required:u,converter:d}=a;if(u===!0&&!Object.hasOwn(e,l))throw Pt.errors.exception({header:n,message:`Missing required key "${l}".`});let p=e[l],m=Object.hasOwn(a,"defaultValue");if(m&&p!==null&&(p??=c()),u||m||p!==void 0){if(p=d(p,n,`${r}.${l}`),a.allowedValues&&!a.allowedValues.includes(p))throw Pt.errors.exception({header:n,message:`${p} is not an accepted type. Expected one of ${a.allowedValues.join(", ")}.`});o[l]=p}}return o}};Pt.nullableConverter=function(t){return(e,n,r)=>e===null?e:t(e,n,r)};Pt.converters.DOMString=function(t,e,n,r){if(t===null&&r?.legacyNullToEmptyString)return"";if(typeof t=="symbol")throw Pt.errors.exception({header:e,message:`${n} is a symbol, which cannot be converted to a DOMString.`});return String(t)};Pt.converters.ByteString=function(t,e,n){let r=Pt.converters.DOMString(t,e,n);for(let i=0;i<r.length;i++)if(r.charCodeAt(i)>255)throw new TypeError(`Cannot convert argument to a ByteString because the character at index ${i} has a value of ${r.charCodeAt(i)} which is greater than 255.`);return r};Pt.converters.USVString=vyt;Pt.converters.boolean=function(t){return!!t};Pt.converters.any=function(t){return t};Pt.converters["long long"]=function(t,e,n){return Pt.util.ConvertToInt(t,64,"signed",void 0,e,n)};Pt.converters["unsigned long long"]=function(t,e,n){return Pt.util.ConvertToInt(t,64,"unsigned",void 0,e,n)};Pt.converters["unsigned long"]=function(t,e,n){return Pt.util.ConvertToInt(t,32,"unsigned",void 0,e,n)};Pt.converters["unsigned short"]=function(t,e,n,r){return Pt.util.ConvertToInt(t,16,"unsigned",r,e,n)};Pt.converters.ArrayBuffer=function(t,e,n,r){if(Pt.util.Type(t)!=="Object"||!Ng.isAnyArrayBuffer(t))throw Pt.errors.conversionFailed({prefix:e,argument:`${n} ("${Pt.util.Stringify(t)}")`,types:["ArrayBuffer"]});if(r?.allowShared===!1&&Ng.isSharedArrayBuffer(t))throw Pt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.resizable||t.growable)throw Pt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Pt.converters.TypedArray=function(t,e,n,r,i){if(Pt.util.Type(t)!=="Object"||!Ng.isTypedArray(t)||t.constructor.name!==e.name)throw Pt.errors.conversionFailed({prefix:n,argument:`${r} ("${Pt.util.Stringify(t)}")`,types:[e.name]});if(i?.allowShared===!1&&Ng.isSharedArrayBuffer(t.buffer))throw Pt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.buffer.resizable||t.buffer.growable)throw Pt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Pt.converters.DataView=function(t,e,n,r){if(Pt.util.Type(t)!=="Object"||!Ng.isDataView(t))throw Pt.errors.exception({header:e,message:`${n} is not a DataView.`});if(r?.allowShared===!1&&Ng.isSharedArrayBuffer(t.buffer))throw Pt.errors.exception({header:"ArrayBuffer",message:"SharedArrayBuffer is not allowed."});if(t.buffer.resizable||t.buffer.growable)throw Pt.errors.exception({header:"ArrayBuffer",message:"Received a resizable ArrayBuffer."});return t};Pt.converters.BufferSource=function(t,e,n,r){if(Ng.isAnyArrayBuffer(t))return Pt.converters.ArrayBuffer(t,e,n,{...r,allowShared:!1});if(Ng.isTypedArray(t))return Pt.converters.TypedArray(t,t.constructor,e,n,{...r,allowShared:!1});if(Ng.isDataView(t))return Pt.converters.DataView(t,e,n,{...r,allowShared:!1});throw Pt.errors.conversionFailed({prefix:e,argument:`${n} ("${Pt.util.Stringify(t)}")`,types:["BufferSource"]})};Pt.converters["sequence<ByteString>"]=Pt.sequenceConverter(Pt.converters.ByteString);Pt.converters["sequence<sequence<ByteString>>"]=Pt.sequenceConverter(Pt.converters["sequence<ByteString>"]);Pt.converters["record<ByteString, ByteString>"]=Pt.recordConverter(Pt.converters.ByteString,Pt.converters.ByteString);nBe.exports={webidl:Pt}});var R0=H((BVn,gBe)=>{"use strict";f();var{Transform:byt}=require("node:stream"),rBe=require("node:zlib"),{redirectStatusSet:Eyt,referrerPolicySet:Iyt,badPortsSet:Tyt}=RP(),{getGlobalOrigin:iBe}=lse(),{collectASequenceOfCodePoints:v2,collectAnHTTPQuotedString:wyt,removeChars:_yt,parseMIMEType:Syt}=Id(),{performance:Ryt}=require("node:perf_hooks"),{isBlobLike:kyt,ReadableStreamFrom:Byt,isValidHTTPToken:oBe,normalizedMethodRecordsBase:Pyt}=yi(),b2=require("node:assert"),{isUint8Array:Dyt}=require("node:util/types"),{webidl:BP}=yc(),sBe=[],Mq;try{Mq=require("node:crypto");let t=["sha256","sha384","sha512"];sBe=Mq.getHashes().filter(e=>t.includes(e))}catch{}function aBe(t){let e=t.urlList,n=e.length;return n===0?null:e[n-1].toString()}s(aBe,"responseURL");function Nyt(t,e){if(!Eyt.has(t.status))return null;let n=t.headersList.get("location",!0);return n!==null&&cBe(n)&&(lBe(n)||(n=Lyt(n)),n=new URL(n,aBe(t))),n&&!n.hash&&(n.hash=e),n}s(Nyt,"responseLocationURL");function lBe(t){for(let e=0;e<t.length;++e){let n=t.charCodeAt(e);if(n>126||n<32)return!1}return!0}s(lBe,"isValidEncodedURL");function Lyt(t){return Buffer.from(t,"binary").toString("utf8")}s(Lyt,"normalizeBinaryStringToUtf8");function DP(t){return t.urlList[t.urlList.length-1]}s(DP,"requestCurrentURL");function Fyt(t){let e=DP(t);return mBe(e)&&Tyt.has(e.port)?"blocked":"allowed"}s(Fyt,"requestBadPort");function Myt(t){return t instanceof Error||t?.constructor?.name==="Error"||t?.constructor?.name==="DOMException"}s(Myt,"isErrorLike");function Qyt(t){for(let e=0;e<t.length;++e){let n=t.charCodeAt(e);if(!(n===9||n>=32&&n<=126||n>=128&&n<=255))return!1}return!0}s(Qyt,"isValidReasonPhrase");var Oyt=oBe;function cBe(t){return(t[0]==="	"||t[0]===" "||t[t.length-1]==="	"||t[t.length-1]===" "||t.includes(`
`)||t.includes("\r")||t.includes("\0"))===!1}s(cBe,"isValidHeaderValue");function Uyt(t,e){let{headersList:n}=e,r=(n.get("referrer-policy",!0)??"").split(","),i="";if(r.length>0)for(let o=r.length;o!==0;o--){let a=r[o-1].trim();if(Iyt.has(a)){i=a;break}}i!==""&&(t.referrerPolicy=i)}s(Uyt,"setRequestReferrerPolicyOnRedirect");function qyt(){return"allowed"}s(qyt,"crossOriginResourcePolicyCheck");function Wyt(){return"success"}s(Wyt,"corsCheck");function Hyt(){return"success"}s(Hyt,"TAOCheck");function Gyt(t){let e=null;e=t.mode,t.headersList.set("sec-fetch-mode",e,!0)}s(Gyt,"appendFetchMetadata");function jyt(t){let e=t.origin;if(!(e==="client"||e===void 0)){if(t.responseTainting==="cors"||t.mode==="websocket")t.headersList.append("origin",e,!0);else if(t.method!=="GET"&&t.method!=="HEAD"){switch(t.referrerPolicy){case"no-referrer":e=null;break;case"no-referrer-when-downgrade":case"strict-origin":case"strict-origin-when-cross-origin":t.origin&&fse(t.origin)&&!fse(DP(t))&&(e=null);break;case"same-origin":Qq(t,DP(t))||(e=null);break;default:}t.headersList.append("origin",e,!0)}}}s(jyt,"appendRequestOriginHeader");function J5(t,e){return t}s(J5,"coarsenTime");function Vyt(t,e,n){return!t?.startTime||t.startTime<e?{domainLookupStartTime:e,domainLookupEndTime:e,connectionStartTime:e,connectionEndTime:e,secureConnectionStartTime:e,ALPNNegotiatedProtocol:t?.ALPNNegotiatedProtocol}:{domainLookupStartTime:J5(t.domainLookupStartTime,n),domainLookupEndTime:J5(t.domainLookupEndTime,n),connectionStartTime:J5(t.connectionStartTime,n),connectionEndTime:J5(t.connectionEndTime,n),secureConnectionStartTime:J5(t.secureConnectionStartTime,n),ALPNNegotiatedProtocol:t.ALPNNegotiatedProtocol}}s(Vyt,"clampAndCoarsenConnectionTimingInfo");function $yt(t){return J5(Ryt.now(),t)}s($yt,"coarsenedSharedCurrentTime");function zyt(t){return{startTime:t.startTime??0,redirectStartTime:0,redirectEndTime:0,postRedirectStartTime:t.startTime??0,finalServiceWorkerStartTime:0,finalNetworkResponseStartTime:0,finalNetworkRequestStartTime:0,endTime:0,encodedBodySize:0,decodedBodySize:0,finalConnectionTimingInfo:null}}s(zyt,"createOpaqueTimingInfo");function uBe(){return{referrerPolicy:"strict-origin-when-cross-origin"}}s(uBe,"makePolicyContainer");function Yyt(t){return{referrerPolicy:t.referrerPolicy}}s(Yyt,"clonePolicyContainer");function Kyt(t){let e=t.referrerPolicy;b2(e);let n=null;if(t.referrer==="client"){let l=iBe();if(!l||l.origin==="null")return"no-referrer";n=new URL(l)}else t.referrer instanceof URL&&(n=t.referrer);let r=dse(n),i=dse(n,!0);r.toString().length>4096&&(r=i);let o=Qq(t,r),a=PP(r)&&!PP(t.url);switch(e){case"origin":return i??dse(n,!0);case"unsafe-url":return r;case"same-origin":return o?i:"no-referrer";case"origin-when-cross-origin":return o?r:i;case"strict-origin-when-cross-origin":{let l=DP(t);return Qq(r,l)?r:PP(r)&&!PP(l)?"no-referrer":i}case"strict-origin":case"no-referrer-when-downgrade":default:return a?"no-referrer":i}}s(Kyt,"determineRequestsReferrer");function dse(t,e){return b2(t instanceof URL),t=new URL(t),t.protocol==="file:"||t.protocol==="about:"||t.protocol==="blank:"?"no-referrer":(t.username="",t.password="",t.hash="",e&&(t.pathname="",t.search=""),t)}s(dse,"stripURLForReferrer");function PP(t){if(!(t instanceof URL))return!1;if(t.href==="about:blank"||t.href==="about:srcdoc"||t.protocol==="data:"||t.protocol==="file:")return!0;return e(t.origin);function e(n){if(n==null||n==="null")return!1;let r=new URL(n);return!!(r.protocol==="https:"||r.protocol==="wss:"||/^127(?:\.[0-9]+){0,2}\.[0-9]+$|^\[(?:0*:)*?:?0*1\]$/.test(r.hostname)||r.hostname==="localhost"||r.hostname.includes("localhost.")||r.hostname.endsWith(".localhost"))}}s(PP,"isURLPotentiallyTrustworthy");function Jyt(t,e){if(Mq===void 0)return!0;let n=dBe(e);if(n==="no metadata"||n.length===0)return!0;let r=Zyt(n),i=eCt(n,r);for(let o of i){let a=o.algo,l=o.hash,c=Mq.createHash(a).update(t).digest("base64");if(c[c.length-1]==="="&&(c[c.length-2]==="="?c=c.slice(0,-2):c=c.slice(0,-1)),tCt(c,l))return!0}return!1}s(Jyt,"bytesMatch");var Xyt=/(?<algo>sha256|sha384|sha512)-((?<hash>[A-Za-z0-9+/]+|[A-Za-z0-9_-]+)={0,2}(?:\s|$)( +[!-~]*)?)?/i;function dBe(t){let e=[],n=!0;for(let r of t.split(" ")){n=!1;let i=Xyt.exec(r);if(i===null||i.groups===void 0||i.groups.algo===void 0)continue;let o=i.groups.algo.toLowerCase();sBe.includes(o)&&e.push(i.groups)}return n===!0?"no metadata":e}s(dBe,"parseMetadata");function Zyt(t){let e=t[0].algo;if(e[3]==="5")return e;for(let n=1;n<t.length;++n){let r=t[n];if(r.algo[3]==="5"){e="sha512";break}else{if(e[3]==="3")continue;r.algo[3]==="3"&&(e="sha384")}}return e}s(Zyt,"getStrongestMetadata");function eCt(t,e){if(t.length===1)return t;let n=0;for(let r=0;r<t.length;++r)t[r].algo===e&&(t[n++]=t[r]);return t.length=n,t}s(eCt,"filterMetadataListByAlgorithm");function tCt(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n]){if(t[n]==="+"&&e[n]==="-"||t[n]==="/"&&e[n]==="_")continue;return!1}return!0}s(tCt,"compareBase64Mixed");function nCt(t){}s(nCt,"tryUpgradeRequestToAPotentiallyTrustworthyURL");function Qq(t,e){return t.origin===e.origin&&t.origin==="null"||t.protocol===e.protocol&&t.hostname===e.hostname&&t.port===e.port}s(Qq,"sameOrigin");function rCt(){let t,e;return{promise:new Promise((r,i)=>{t=r,e=i}),resolve:t,reject:e}}s(rCt,"createDeferredPromise");function iCt(t){return t.controller.state==="aborted"}s(iCt,"isAborted");function oCt(t){return t.controller.state==="aborted"||t.controller.state==="terminated"}s(oCt,"isCancelled");function sCt(t){return Pyt[t.toLowerCase()]??t}s(sCt,"normalizeMethod");function aCt(t){let e=JSON.stringify(t);if(e===void 0)throw new TypeError("Value is not JSON serializable");return b2(typeof e=="string"),e}s(aCt,"serializeJavascriptValueToJSONString");var lCt=Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]()));function fBe(t,e,n=0,r=1){class i{static{s(this,"FastIterableIterator")}#e;#t;#i;constructor(a,l){this.#e=a,this.#t=l,this.#i=0}next(){if(typeof this!="object"||this===null||!(#e in this))throw new TypeError(`'next' called on an object that does not implement interface ${t} Iterator.`);let a=this.#i,l=this.#e[e],c=l.length;if(a>=c)return{value:void 0,done:!0};let{[n]:u,[r]:d}=l[a];this.#i=a+1;let p;switch(this.#t){case"key":p=u;break;case"value":p=d;break;case"key+value":p=[u,d];break}return{value:p,done:!1}}}return delete i.prototype.constructor,Object.setPrototypeOf(i.prototype,lCt),Object.defineProperties(i.prototype,{[Symbol.toStringTag]:{writable:!1,enumerable:!1,configurable:!0,value:`${t} Iterator`},next:{writable:!0,enumerable:!0,configurable:!0}}),function(o,a){return new i(o,a)}}s(fBe,"createIterator");function cCt(t,e,n,r=0,i=1){let o=fBe(t,n,r,i),a={keys:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return BP.brandCheck(this,e),o(this,"key")},"keys")},values:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return BP.brandCheck(this,e),o(this,"value")},"values")},entries:{writable:!0,enumerable:!0,configurable:!0,value:s(function(){return BP.brandCheck(this,e),o(this,"key+value")},"entries")},forEach:{writable:!0,enumerable:!0,configurable:!0,value:s(function(c,u=globalThis){if(BP.brandCheck(this,e),BP.argumentLengthCheck(arguments,1,`${t}.forEach`),typeof c!="function")throw new TypeError(`Failed to execute 'forEach' on '${t}': parameter 1 is not of type 'Function'.`);for(let{0:d,1:p}of o(this,"key+value"))c.call(u,p,d,this)},"forEach")}};return Object.defineProperties(e.prototype,{...a,[Symbol.iterator]:{writable:!0,enumerable:!1,configurable:!0,value:a.entries.value}})}s(cCt,"iteratorMixin");async function uCt(t,e,n){let r=e,i=n,o;try{o=t.stream.getReader()}catch(a){i(a);return}try{r(await pBe(o))}catch(a){i(a)}}s(uCt,"fullyReadBody");function dCt(t){return t instanceof ReadableStream||t[Symbol.toStringTag]==="ReadableStream"&&typeof t.tee=="function"}s(dCt,"isReadableStreamLike");function fCt(t){try{t.close(),t.byobRequest?.respond(0)}catch(e){if(!e.message.includes("Controller is already closed")&&!e.message.includes("ReadableStream is already closed"))throw e}}s(fCt,"readableStreamClose");var pCt=/[^\x00-\xFF]/;function Fq(t){return b2(!pCt.test(t)),t}s(Fq,"isomorphicEncode");async function pBe(t){let e=[],n=0;for(;;){let{done:r,value:i}=await t.read();if(r)return Buffer.concat(e,n);if(!Dyt(i))throw new TypeError("Received non-Uint8Array chunk");e.push(i),n+=i.length}}s(pBe,"readAllBytes");function mCt(t){b2("protocol"in t);let e=t.protocol;return e==="about:"||e==="blob:"||e==="data:"}s(mCt,"urlIsLocal");function fse(t){return typeof t=="string"&&t[5]===":"&&t[0]==="h"&&t[1]==="t"&&t[2]==="t"&&t[3]==="p"&&t[4]==="s"||t.protocol==="https:"}s(fse,"urlHasHttpsScheme");function mBe(t){b2("protocol"in t);let e=t.protocol;return e==="http:"||e==="https:"}s(mBe,"urlIsHttpHttpsScheme");function hCt(t,e){let n=t;if(!n.startsWith("bytes"))return"failure";let r={position:5};if(e&&v2(c=>c==="	"||c===" ",n,r),n.charCodeAt(r.position)!==61)return"failure";r.position++,e&&v2(c=>c==="	"||c===" ",n,r);let i=v2(c=>{let u=c.charCodeAt(0);return u>=48&&u<=57},n,r),o=i.length?Number(i):null;if(e&&v2(c=>c==="	"||c===" ",n,r),n.charCodeAt(r.position)!==45)return"failure";r.position++,e&&v2(c=>c==="	"||c===" ",n,r);let a=v2(c=>{let u=c.charCodeAt(0);return u>=48&&u<=57},n,r),l=a.length?Number(a):null;return r.position<n.length||l===null&&o===null||o>l?"failure":{rangeStartValue:o,rangeEndValue:l}}s(hCt,"simpleRangeHeaderValue");function gCt(t,e,n){let r="bytes ";return r+=Fq(`${t}`),r+="-",r+=Fq(`${e}`),r+="/",r+=Fq(`${n}`),r}s(gCt,"buildContentRange");var pse=class extends byt{static{s(this,"InflateStream")}#e;constructor(e){super(),this.#e=e}_transform(e,n,r){if(!this._inflateStream){if(e.length===0){r();return}this._inflateStream=(e[0]&15)===8?rBe.createInflate(this.#e):rBe.createInflateRaw(this.#e),this._inflateStream.on("data",this.push.bind(this)),this._inflateStream.on("end",()=>this.push(null)),this._inflateStream.on("error",i=>this.destroy(i))}this._inflateStream.write(e,n,r)}_final(e){this._inflateStream&&(this._inflateStream.end(),this._inflateStream=null),e()}};function ACt(t){return new pse(t)}s(ACt,"createInflate");function yCt(t){let e=null,n=null,r=null,i=hBe("content-type",t);if(i===null)return"failure";for(let o of i){let a=Syt(o);a==="failure"||a.essence==="*/*"||(r=a,r.essence!==n?(e=null,r.parameters.has("charset")&&(e=r.parameters.get("charset")),n=r.essence):!r.parameters.has("charset")&&e!==null&&r.parameters.set("charset",e))}return r??"failure"}s(yCt,"extractMimeType");function CCt(t){let e=t,n={position:0},r=[],i="";for(;n.position<e.length;){if(i+=v2(o=>o!=='"'&&o!==",",e,n),n.position<e.length)if(e.charCodeAt(n.position)===34){if(i+=wyt(e,n),n.position<e.length)continue}else b2(e.charCodeAt(n.position)===44),n.position++;i=_yt(i,!0,!0,o=>o===9||o===32),r.push(i),i=""}return r}s(CCt,"gettingDecodingSplitting");function hBe(t,e){let n=e.get(t,!0);return n===null?null:CCt(n)}s(hBe,"getDecodeSplit");var xCt=new TextDecoder;function vCt(t){return t.length===0?"":(t[0]===239&&t[1]===187&&t[2]===191&&(t=t.subarray(3)),xCt.decode(t))}s(vCt,"utf8DecodeBytes");var mse=class{static{s(this,"EnvironmentSettingsObjectBase")}get baseUrl(){return iBe()}get origin(){return this.baseUrl?.origin}policyContainer=uBe()},hse=class{static{s(this,"EnvironmentSettingsObject")}settingsObject=new mse},bCt=new hse;gBe.exports={isAborted:iCt,isCancelled:oCt,isValidEncodedURL:lBe,createDeferredPromise:rCt,ReadableStreamFrom:Byt,tryUpgradeRequestToAPotentiallyTrustworthyURL:nCt,clampAndCoarsenConnectionTimingInfo:Vyt,coarsenedSharedCurrentTime:$yt,determineRequestsReferrer:Kyt,makePolicyContainer:uBe,clonePolicyContainer:Yyt,appendFetchMetadata:Gyt,appendRequestOriginHeader:jyt,TAOCheck:Hyt,corsCheck:Wyt,crossOriginResourcePolicyCheck:qyt,createOpaqueTimingInfo:zyt,setRequestReferrerPolicyOnRedirect:Uyt,isValidHTTPToken:oBe,requestBadPort:Fyt,requestCurrentURL:DP,responseURL:aBe,responseLocationURL:Nyt,isBlobLike:kyt,isURLPotentiallyTrustworthy:PP,isValidReasonPhrase:Qyt,sameOrigin:Qq,normalizeMethod:sCt,serializeJavascriptValueToJSONString:aCt,iteratorMixin:cCt,createIterator:fBe,isValidHeaderName:Oyt,isValidHeaderValue:cBe,isErrorLike:Myt,fullyReadBody:uCt,bytesMatch:Jyt,isReadableStreamLike:dCt,readableStreamClose:fCt,isomorphicEncode:Fq,urlIsLocal:mCt,urlHasHttpsScheme:fse,urlIsHttpHttpsScheme:mBe,readAllBytes:pBe,simpleRangeHeaderValue:hCt,buildContentRange:gCt,parseMetadata:dBe,createInflate:ACt,extractMimeType:yCt,getDecodeSplit:hBe,utf8DecodeBytes:vCt,environmentSettingsObject:bCt}});var bv=H((NVn,ABe)=>{"use strict";f();ABe.exports={kUrl:Symbol("url"),kHeaders:Symbol("headers"),kSignal:Symbol("signal"),kState:Symbol("state"),kDispatcher:Symbol("dispatcher")}});var Ase=H((FVn,yBe)=>{"use strict";f();var{Blob:ECt,File:ICt}=require("node:buffer"),{kState:X1}=bv(),{webidl:Lg}=yc(),gse=class t{static{s(this,"FileLike")}constructor(e,n,r={}){let i=n,o=r.type,a=r.lastModified??Date.now();this[X1]={blobLike:e,name:i,type:o,lastModified:a}}stream(...e){return Lg.brandCheck(this,t),this[X1].blobLike.stream(...e)}arrayBuffer(...e){return Lg.brandCheck(this,t),this[X1].blobLike.arrayBuffer(...e)}slice(...e){return Lg.brandCheck(this,t),this[X1].blobLike.slice(...e)}text(...e){return Lg.brandCheck(this,t),this[X1].blobLike.text(...e)}get size(){return Lg.brandCheck(this,t),this[X1].blobLike.size}get type(){return Lg.brandCheck(this,t),this[X1].blobLike.type}get name(){return Lg.brandCheck(this,t),this[X1].name}get lastModified(){return Lg.brandCheck(this,t),this[X1].lastModified}get[Symbol.toStringTag](){return"File"}};Lg.converters.Blob=Lg.interfaceConverter(ECt);function TCt(t){return t instanceof ICt||t&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&t[Symbol.toStringTag]==="File"}s(TCt,"isFileLike");yBe.exports={FileLike:gse,isFileLike:TCt}});var LP=H((OVn,EBe)=>{"use strict";f();var{isBlobLike:Oq,iteratorMixin:wCt}=R0(),{kState:Mu}=bv(),{kEnumerableProperty:X5}=yi(),{FileLike:CBe,isFileLike:_Ct}=Ase(),{webidl:ts}=yc(),{File:bBe}=require("node:buffer"),xBe=require("node:util"),vBe=globalThis.File??bBe,NP=class t{static{s(this,"FormData")}constructor(e){if(ts.util.markAsUncloneable(this),e!==void 0)throw ts.errors.conversionFailed({prefix:"FormData constructor",argument:"Argument 1",types:["undefined"]});this[Mu]=[]}append(e,n,r=void 0){ts.brandCheck(this,t);let i="FormData.append";if(ts.argumentLengthCheck(arguments,2,i),arguments.length===3&&!Oq(n))throw new TypeError("Failed to execute 'append' on 'FormData': parameter 2 is not of type 'Blob'");e=ts.converters.USVString(e,i,"name"),n=Oq(n)?ts.converters.Blob(n,i,"value",{strict:!1}):ts.converters.USVString(n,i,"value"),r=arguments.length===3?ts.converters.USVString(r,i,"filename"):void 0;let o=yse(e,n,r);this[Mu].push(o)}delete(e){ts.brandCheck(this,t);let n="FormData.delete";ts.argumentLengthCheck(arguments,1,n),e=ts.converters.USVString(e,n,"name"),this[Mu]=this[Mu].filter(r=>r.name!==e)}get(e){ts.brandCheck(this,t);let n="FormData.get";ts.argumentLengthCheck(arguments,1,n),e=ts.converters.USVString(e,n,"name");let r=this[Mu].findIndex(i=>i.name===e);return r===-1?null:this[Mu][r].value}getAll(e){ts.brandCheck(this,t);let n="FormData.getAll";return ts.argumentLengthCheck(arguments,1,n),e=ts.converters.USVString(e,n,"name"),this[Mu].filter(r=>r.name===e).map(r=>r.value)}has(e){ts.brandCheck(this,t);let n="FormData.has";return ts.argumentLengthCheck(arguments,1,n),e=ts.converters.USVString(e,n,"name"),this[Mu].findIndex(r=>r.name===e)!==-1}set(e,n,r=void 0){ts.brandCheck(this,t);let i="FormData.set";if(ts.argumentLengthCheck(arguments,2,i),arguments.length===3&&!Oq(n))throw new TypeError("Failed to execute 'set' on 'FormData': parameter 2 is not of type 'Blob'");e=ts.converters.USVString(e,i,"name"),n=Oq(n)?ts.converters.Blob(n,i,"name",{strict:!1}):ts.converters.USVString(n,i,"name"),r=arguments.length===3?ts.converters.USVString(r,i,"name"):void 0;let o=yse(e,n,r),a=this[Mu].findIndex(l=>l.name===e);a!==-1?this[Mu]=[...this[Mu].slice(0,a),o,...this[Mu].slice(a+1).filter(l=>l.name!==e)]:this[Mu].push(o)}[xBe.inspect.custom](e,n){let r=this[Mu].reduce((o,a)=>(o[a.name]?Array.isArray(o[a.name])?o[a.name].push(a.value):o[a.name]=[o[a.name],a.value]:o[a.name]=a.value,o),{__proto__:null});n.depth??=e,n.colors??=!0;let i=xBe.formatWithOptions(n,r);return`FormData ${i.slice(i.indexOf("]")+2)}`}};wCt("FormData",NP,Mu,"name","value");Object.defineProperties(NP.prototype,{append:X5,delete:X5,get:X5,getAll:X5,has:X5,set:X5,[Symbol.toStringTag]:{value:"FormData",configurable:!0}});function yse(t,e,n){if(typeof e!="string"){if(_Ct(e)||(e=e instanceof Blob?new vBe([e],"blob",{type:e.type}):new CBe(e,"blob",{type:e.type})),n!==void 0){let r={type:e.type,lastModified:e.lastModified};e=e instanceof bBe?new vBe([e],n,r):new CBe(e,n,r)}}return{name:t,value:e}}s(yse,"makeEntry");EBe.exports={FormData:NP,makeEntry:yse}});var RBe=H((WVn,SBe)=>{"use strict";f();var{isUSVString:IBe,bufferToLowerCasedHeaderName:SCt}=yi(),{utf8DecodeBytes:RCt}=R0(),{HTTP_TOKEN_CODEPOINTS:kCt,isomorphicDecode:TBe}=Id(),{isFileLike:BCt}=Ase(),{makeEntry:PCt}=LP(),Uq=require("node:assert"),{File:DCt}=require("node:buffer"),NCt=globalThis.File??DCt,LCt=Buffer.from('form-data; name="'),wBe=Buffer.from("; filename"),FCt=Buffer.from("--"),MCt=Buffer.from(`--\r
`);function QCt(t){for(let e=0;e<t.length;++e)if((t.charCodeAt(e)&-128)!==0)return!1;return!0}s(QCt,"isAsciiString");function OCt(t){let e=t.length;if(e<27||e>70)return!1;for(let n=0;n<e;++n){let r=t.charCodeAt(n);if(!(r>=48&&r<=57||r>=65&&r<=90||r>=97&&r<=122||r===39||r===45||r===95))return!1}return!0}s(OCt,"validateBoundary");function UCt(t,e){Uq(e!=="failure"&&e.essence==="multipart/form-data");let n=e.parameters.get("boundary");if(n===void 0)return"failure";let r=Buffer.from(`--${n}`,"utf8"),i=[],o={position:0};for(;t[o.position]===13&&t[o.position+1]===10;)o.position+=2;let a=t.length;for(;t[a-1]===10&&t[a-2]===13;)a-=2;for(a!==t.length&&(t=t.subarray(0,a));;){if(t.subarray(o.position,o.position+r.length).equals(r))o.position+=r.length;else return"failure";if(o.position===t.length-2&&qq(t,FCt,o)||o.position===t.length-4&&qq(t,MCt,o))return i;if(t[o.position]!==13||t[o.position+1]!==10)return"failure";o.position+=2;let l=qCt(t,o);if(l==="failure")return"failure";let{name:c,filename:u,contentType:d,encoding:p}=l;o.position+=2;let m;{let g=t.indexOf(r.subarray(2),o.position);if(g===-1)return"failure";m=t.subarray(o.position,g-4),o.position+=m.length,p==="base64"&&(m=Buffer.from(m.toString(),"base64"))}if(t[o.position]!==13||t[o.position+1]!==10)return"failure";o.position+=2;let h;u!==null?(d??="text/plain",QCt(d)||(d=""),h=new NCt([m],u,{type:d})):h=RCt(Buffer.from(m)),Uq(IBe(c)),Uq(typeof h=="string"&&IBe(h)||BCt(h)),i.push(PCt(c,h,u))}}s(UCt,"multipartFormDataParser");function qCt(t,e){let n=null,r=null,i=null,o=null;for(;;){if(t[e.position]===13&&t[e.position+1]===10)return n===null?"failure":{name:n,filename:r,contentType:i,encoding:o};let a=Z5(l=>l!==10&&l!==13&&l!==58,t,e);if(a=Cse(a,!0,!0,l=>l===9||l===32),!kCt.test(a.toString())||t[e.position]!==58)return"failure";switch(e.position++,Z5(l=>l===32||l===9,t,e),SCt(a)){case"content-disposition":{if(n=r=null,!qq(t,LCt,e)||(e.position+=17,n=_Be(t,e),n===null))return"failure";if(qq(t,wBe,e)){let l=e.position+wBe.length;if(t[l]===42&&(e.position+=1,l+=1),t[l]!==61||t[l+1]!==34||(e.position+=12,r=_Be(t,e),r===null))return"failure"}break}case"content-type":{let l=Z5(c=>c!==10&&c!==13,t,e);l=Cse(l,!1,!0,c=>c===9||c===32),i=TBe(l);break}case"content-transfer-encoding":{let l=Z5(c=>c!==10&&c!==13,t,e);l=Cse(l,!1,!0,c=>c===9||c===32),o=TBe(l);break}default:Z5(l=>l!==10&&l!==13,t,e)}if(t[e.position]!==13&&t[e.position+1]!==10)return"failure";e.position+=2}}s(qCt,"parseMultipartFormDataHeaders");function _Be(t,e){Uq(t[e.position-1]===34);let n=Z5(r=>r!==10&&r!==13&&r!==34,t,e);return t[e.position]!==34?null:(e.position++,n=new TextDecoder().decode(n).replace(/%0A/ig,`
`).replace(/%0D/ig,"\r").replace(/%22/g,'"'),n)}s(_Be,"parseMultipartFormDataName");function Z5(t,e,n){let r=n.position;for(;r<e.length&&t(e[r]);)++r;return e.subarray(n.position,n.position=r)}s(Z5,"collectASequenceOfBytes");function Cse(t,e,n,r){let i=0,o=t.length-1;if(e)for(;i<t.length&&r(t[i]);)i++;if(n)for(;o>0&&r(t[o]);)o--;return i===0&&o===t.length-1?t:t.subarray(i,o+1)}s(Cse,"removeChars");function qq(t,e,n){if(t.length<e.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[n.position+r])return!1;return!0}s(qq,"bufferStartsWith");SBe.exports={multipartFormDataParser:UCt,validateBoundary:OCt}});var n4=H((jVn,MBe)=>{"use strict";f();var FP=yi(),{ReadableStreamFrom:WCt,isBlobLike:kBe,isReadableStreamLike:HCt,readableStreamClose:GCt,createDeferredPromise:jCt,fullyReadBody:VCt,extractMimeType:$Ct,utf8DecodeBytes:DBe}=R0(),{FormData:BBe}=LP(),{kState:t4}=bv(),{webidl:zCt}=yc(),{Blob:YCt}=require("node:buffer"),xse=require("node:assert"),{isErrored:NBe,isDisturbed:KCt}=require("node:stream"),{isArrayBuffer:JCt}=require("node:util/types"),{serializeAMimeType:XCt}=Id(),{multipartFormDataParser:ZCt}=RBe(),vse;try{let t=require("node:crypto");vse=s(e=>t.randomInt(0,e),"random")}catch{vse=s(t=>Math.floor(Math.random(t)),"random")}var Wq=new TextEncoder;function ext(){}s(ext,"noop");var bse=globalThis.FinalizationRegistry&&process.version.indexOf("v18")!==0,Ese;bse&&(Ese=new FinalizationRegistry(t=>{let e=t.deref();e&&!e.locked&&!KCt(e)&&!NBe(e)&&e.cancel("Response object has been garbage collected").catch(ext)}));function LBe(t,e=!1){let n=null;t instanceof ReadableStream?n=t:kBe(t)?n=t.stream():n=new ReadableStream({async pull(c){let u=typeof i=="string"?Wq.encode(i):i;u.byteLength&&c.enqueue(u),queueMicrotask(()=>GCt(c))},start(){},type:"bytes"}),xse(HCt(n));let r=null,i=null,o=null,a=null;if(typeof t=="string")i=t,a="text/plain;charset=UTF-8";else if(t instanceof URLSearchParams)i=t.toString(),a="application/x-www-form-urlencoded;charset=UTF-8";else if(JCt(t))i=new Uint8Array(t.slice());else if(ArrayBuffer.isView(t))i=new Uint8Array(t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength));else if(FP.isFormDataLike(t)){let c=`----formdata-undici-0${`${vse(1e11)}`.padStart(11,"0")}`,u=`--${c}\r
Content-Disposition: form-data`;let d=s(v=>v.replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),"escape"),p=s(v=>v.replace(/\r?\n|\r/g,`\r
`),"normalizeLinefeeds"),m=[],h=new Uint8Array([13,10]);o=0;let g=!1;for(let[v,b]of t)if(typeof b=="string"){let E=Wq.encode(u+`; name="${d(p(v))}"\r
\r
${p(b)}\r
`);m.push(E),o+=E.byteLength}else{let E=Wq.encode(`${u}; name="${d(p(v))}"`+(b.name?`; filename="${d(b.name)}"`:"")+`\r
Content-Type: ${b.type||"application/octet-stream"}\r
\r
`);m.push(E,b,h),typeof b.size=="number"?o+=E.byteLength+b.size+h.byteLength:g=!0}let y=Wq.encode(`--${c}--\r
`);m.push(y),o+=y.byteLength,g&&(o=null),i=t,r=s(async function*(){for(let v of m)v.stream?yield*v.stream():yield v},"action"),a=`multipart/form-data; boundary=${c}`}else if(kBe(t))i=t,o=t.size,t.type&&(a=t.type);else if(typeof t[Symbol.asyncIterator]=="function"){if(e)throw new TypeError("keepalive");if(FP.isDisturbed(t)||t.locked)throw new TypeError("Response body object should not be disturbed or locked");n=t instanceof ReadableStream?t:WCt(t)}if((typeof i=="string"||FP.isBuffer(i))&&(o=Buffer.byteLength(i)),r!=null){let c;n=new ReadableStream({async start(){c=r(t)[Symbol.asyncIterator]()},async pull(u){let{value:d,done:p}=await c.next();if(p)queueMicrotask(()=>{u.close(),u.byobRequest?.respond(0)});else if(!NBe(n)){let m=new Uint8Array(d);m.byteLength&&u.enqueue(m)}return u.desiredSize>0},async cancel(u){await c.return()},type:"bytes"})}return[{stream:n,source:i,length:o},a]}s(LBe,"extractBody");function txt(t,e=!1){return t instanceof ReadableStream&&(xse(!FP.isDisturbed(t),"The body has already been consumed."),xse(!t.locked,"The stream is locked.")),LBe(t,e)}s(txt,"safelyExtractBody");function nxt(t,e){let[n,r]=e.stream.tee();return bse&&Ese.register(t,new WeakRef(n)),e.stream=n,{stream:r,length:e.length,source:e.source}}s(nxt,"cloneBody");function rxt(t){if(t.aborted)throw new DOMException("The operation was aborted.","AbortError")}s(rxt,"throwIfAborted");function ixt(t){return{blob(){return e4(this,n=>{let r=PBe(this);return r===null?r="":r&&(r=XCt(r)),new YCt([n],{type:r})},t)},arrayBuffer(){return e4(this,n=>new Uint8Array(n).buffer,t)},text(){return e4(this,DBe,t)},json(){return e4(this,sxt,t)},formData(){return e4(this,n=>{let r=PBe(this);if(r!==null)switch(r.essence){case"multipart/form-data":{let i=ZCt(n,r);if(i==="failure")throw new TypeError("Failed to parse body as FormData.");let o=new BBe;return o[t4]=i,o}case"application/x-www-form-urlencoded":{let i=new URLSearchParams(n.toString()),o=new BBe;for(let[a,l]of i)o.append(a,l);return o}}throw new TypeError('Content-Type was not one of "multipart/form-data" or "application/x-www-form-urlencoded".')},t)},bytes(){return e4(this,n=>new Uint8Array(n),t)}}}s(ixt,"bodyMixinMethods");function oxt(t){Object.assign(t.prototype,ixt(t))}s(oxt,"mixinBody");async function e4(t,e,n){if(zCt.brandCheck(t,n),FBe(t))throw new TypeError("Body is unusable: Body has already been read");rxt(t[t4]);let r=jCt(),i=s(a=>r.reject(a),"errorSteps"),o=s(a=>{try{r.resolve(e(a))}catch(l){i(l)}},"successSteps");return t[t4].body==null?(o(Buffer.allocUnsafe(0)),r.promise):(await VCt(t[t4].body,o,i),r.promise)}s(e4,"consumeBody");function FBe(t){let e=t[t4].body;return e!=null&&(e.stream.locked||FP.isDisturbed(e.stream))}s(FBe,"bodyUnusable");function sxt(t){return JSON.parse(DBe(t))}s(sxt,"parseJSONFromBytes");function PBe(t){let e=t[t4].headersList,n=$Ct(e);return n==="failure"?null:n}s(PBe,"bodyMimeType");MBe.exports={extractBody:LBe,safelyExtractBody:txt,cloneBody:nxt,mixinBody:oxt,streamRegistry:Ese,hasFinalizationRegistry:bse,bodyUnusable:FBe}});var zBe=H((zVn,$Be)=>{"use strict";f();var yr=require("node:assert"),Gr=yi(),{channels:QBe}=H5(),Ise=rse(),{RequestContentLengthMismatchError:E2,ResponseContentLengthMismatchError:axt,RequestAbortedError:GBe,HeadersTimeoutError:lxt,HeadersOverflowError:cxt,SocketError:zq,InformationalError:r4,BodyTimeoutError:uxt,HTTPParserError:dxt,ResponseExceededMaxSizeError:fxt}=yo(),{kUrl:jBe,kReset:Td,kClient:Sse,kParser:ua,kBlocking:OP,kRunning:Xc,kPending:pxt,kSize:OBe,kWriting:Iv,kQueue:Mm,kNoRef:MP,kKeepAliveDefaultTimeout:mxt,kHostHeader:hxt,kPendingIdx:gxt,kRunningIdx:np,kError:rp,kPipelining:Vq,kSocket:i4,kKeepAliveTimeoutValue:Yq,kMaxHeadersSize:Tse,kKeepAliveMaxTimeout:Axt,kKeepAliveTimeoutThreshold:yxt,kHeadersTimeout:Cxt,kBodyTimeout:xxt,kStrictContentLength:Rse,kMaxRequests:UBe,kCounter:vxt,kMaxResponseSize:bxt,kOnError:Ext,kResume:Ev,kHTTPContext:VBe}=Qs(),Fg=Fke(),Ixt=Buffer.alloc(0),Hq=Buffer[Symbol.species],Gq=Gr.addListener,Txt=Gr.removeAllListeners,wse;async function wxt(){let t=process.env.JEST_WORKER_ID?sse():void 0,e;try{e=await WebAssembly.compile(Oke())}catch{e=await WebAssembly.compile(t||sse())}return await WebAssembly.instantiate(e,{env:{wasm_on_url:s((n,r,i)=>0,"wasm_on_url"),wasm_on_status:s((n,r,i)=>{yr(gl.ptr===n);let o=r-Qg+Mg.byteOffset;return gl.onStatus(new Hq(Mg.buffer,o,i))||0},"wasm_on_status"),wasm_on_message_begin:s(n=>(yr(gl.ptr===n),gl.onMessageBegin()||0),"wasm_on_message_begin"),wasm_on_header_field:s((n,r,i)=>{yr(gl.ptr===n);let o=r-Qg+Mg.byteOffset;return gl.onHeaderField(new Hq(Mg.buffer,o,i))||0},"wasm_on_header_field"),wasm_on_header_value:s((n,r,i)=>{yr(gl.ptr===n);let o=r-Qg+Mg.byteOffset;return gl.onHeaderValue(new Hq(Mg.buffer,o,i))||0},"wasm_on_header_value"),wasm_on_headers_complete:s((n,r,i,o)=>(yr(gl.ptr===n),gl.onHeadersComplete(r,!!i,!!o)||0),"wasm_on_headers_complete"),wasm_on_body:s((n,r,i)=>{yr(gl.ptr===n);let o=r-Qg+Mg.byteOffset;return gl.onBody(new Hq(Mg.buffer,o,i))||0},"wasm_on_body"),wasm_on_message_complete:s(n=>(yr(gl.ptr===n),gl.onMessageComplete()||0),"wasm_on_message_complete")}})}s(wxt,"lazyllhttp");var _se=null,kse=wxt();kse.catch();var gl=null,Mg=null,jq=0,Qg=null,_xt=0,QP=1,o4=2|QP,$q=4|QP,Bse=8|_xt,Pse=class{static{s(this,"Parser")}constructor(e,n,{exports:r}){yr(Number.isFinite(e[Tse])&&e[Tse]>0),this.llhttp=r,this.ptr=this.llhttp.llhttp_alloc(Fg.TYPE.RESPONSE),this.client=e,this.socket=n,this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.statusCode=null,this.statusText="",this.upgrade=!1,this.headers=[],this.headersSize=0,this.headersMaxSize=e[Tse],this.shouldKeepAlive=!1,this.paused=!1,this.resume=this.resume.bind(this),this.bytesRead=0,this.keepAlive="",this.contentLength="",this.connection="",this.maxResponseSize=e[bxt]}setTimeout(e,n){e!==this.timeoutValue||n&QP^this.timeoutType&QP?(this.timeout&&(Ise.clearTimeout(this.timeout),this.timeout=null),e&&(n&QP?this.timeout=Ise.setFastTimeout(qBe,e,new WeakRef(this)):(this.timeout=setTimeout(qBe,e,new WeakRef(this)),this.timeout.unref())),this.timeoutValue=e):this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.timeoutType=n}resume(){this.socket.destroyed||!this.paused||(yr(this.ptr!=null),yr(gl==null),this.llhttp.llhttp_resume(this.ptr),yr(this.timeoutType===$q),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),this.paused=!1,this.execute(this.socket.read()||Ixt),this.readMore())}readMore(){for(;!this.paused&&this.ptr;){let e=this.socket.read();if(e===null)break;this.execute(e)}}execute(e){yr(this.ptr!=null),yr(gl==null),yr(!this.paused);let{socket:n,llhttp:r}=this;e.length>jq&&(Qg&&r.free(Qg),jq=Math.ceil(e.length/4096)*4096,Qg=r.malloc(jq)),new Uint8Array(r.memory.buffer,Qg,jq).set(e);try{let i;try{Mg=e,gl=this,i=r.llhttp_execute(this.ptr,Qg,e.length)}catch(a){throw a}finally{gl=null,Mg=null}let o=r.llhttp_get_error_pos(this.ptr)-Qg;if(i===Fg.ERROR.PAUSED_UPGRADE)this.onUpgrade(e.slice(o));else if(i===Fg.ERROR.PAUSED)this.paused=!0,n.unshift(e.slice(o));else if(i!==Fg.ERROR.OK){let a=r.llhttp_get_error_reason(this.ptr),l="";if(a){let c=new Uint8Array(r.memory.buffer,a).indexOf(0);l="Response does not match the HTTP/1.1 protocol ("+Buffer.from(r.memory.buffer,a,c).toString()+")"}throw new dxt(l,Fg.ERROR[i],e.slice(o))}}catch(i){Gr.destroy(n,i)}}destroy(){yr(this.ptr!=null),yr(gl==null),this.llhttp.llhttp_free(this.ptr),this.ptr=null,this.timeout&&Ise.clearTimeout(this.timeout),this.timeout=null,this.timeoutValue=null,this.timeoutType=null,this.paused=!1}onStatus(e){this.statusText=e.toString()}onMessageBegin(){let{socket:e,client:n}=this;if(e.destroyed)return-1;let r=n[Mm][n[np]];if(!r)return-1;r.onResponseStarted()}onHeaderField(e){let n=this.headers.length;(n&1)===0?this.headers.push(e):this.headers[n-1]=Buffer.concat([this.headers[n-1],e]),this.trackHeader(e.length)}onHeaderValue(e){let n=this.headers.length;(n&1)===1?(this.headers.push(e),n+=1):this.headers[n-1]=Buffer.concat([this.headers[n-1],e]);let r=this.headers[n-2];if(r.length===10){let i=Gr.bufferToLowerCasedHeaderName(r);i==="keep-alive"?this.keepAlive+=e.toString():i==="connection"&&(this.connection+=e.toString())}else r.length===14&&Gr.bufferToLowerCasedHeaderName(r)==="content-length"&&(this.contentLength+=e.toString());this.trackHeader(e.length)}trackHeader(e){this.headersSize+=e,this.headersSize>=this.headersMaxSize&&Gr.destroy(this.socket,new cxt)}onUpgrade(e){let{upgrade:n,client:r,socket:i,headers:o,statusCode:a}=this;yr(n),yr(r[i4]===i),yr(!i.destroyed),yr(!this.paused),yr((o.length&1)===0);let l=r[Mm][r[np]];yr(l),yr(l.upgrade||l.method==="CONNECT"),this.statusCode=null,this.statusText="",this.shouldKeepAlive=null,this.headers=[],this.headersSize=0,i.unshift(e),i[ua].destroy(),i[ua]=null,i[Sse]=null,i[rp]=null,Txt(i),r[i4]=null,r[VBe]=null,r[Mm][r[np]++]=null,r.emit("disconnect",r[jBe],[r],new r4("upgrade"));try{l.onUpgrade(a,o,i)}catch(c){Gr.destroy(i,c)}r[Ev]()}onHeadersComplete(e,n,r){let{client:i,socket:o,headers:a,statusText:l}=this;if(o.destroyed)return-1;let c=i[Mm][i[np]];if(!c)return-1;if(yr(!this.upgrade),yr(this.statusCode<200),e===100)return Gr.destroy(o,new zq("bad response",Gr.getSocketInfo(o))),-1;if(n&&!c.upgrade)return Gr.destroy(o,new zq("bad upgrade",Gr.getSocketInfo(o))),-1;if(yr(this.timeoutType===o4),this.statusCode=e,this.shouldKeepAlive=r||c.method==="HEAD"&&!o[Td]&&this.connection.toLowerCase()==="keep-alive",this.statusCode>=200){let d=c.bodyTimeout!=null?c.bodyTimeout:i[xxt];this.setTimeout(d,$q)}else this.timeout&&this.timeout.refresh&&this.timeout.refresh();if(c.method==="CONNECT")return yr(i[Xc]===1),this.upgrade=!0,2;if(n)return yr(i[Xc]===1),this.upgrade=!0,2;if(yr((this.headers.length&1)===0),this.headers=[],this.headersSize=0,this.shouldKeepAlive&&i[Vq]){let d=this.keepAlive?Gr.parseKeepAliveTimeout(this.keepAlive):null;if(d!=null){let p=Math.min(d-i[yxt],i[Axt]);p<=0?o[Td]=!0:i[Yq]=p}else i[Yq]=i[mxt]}else o[Td]=!0;let u=c.onHeaders(e,a,this.resume,l)===!1;return c.aborted?-1:c.method==="HEAD"||e<200?1:(o[OP]&&(o[OP]=!1,i[Ev]()),u?Fg.ERROR.PAUSED:0)}onBody(e){let{client:n,socket:r,statusCode:i,maxResponseSize:o}=this;if(r.destroyed)return-1;let a=n[Mm][n[np]];if(yr(a),yr(this.timeoutType===$q),this.timeout&&this.timeout.refresh&&this.timeout.refresh(),yr(i>=200),o>-1&&this.bytesRead+e.length>o)return Gr.destroy(r,new fxt),-1;if(this.bytesRead+=e.length,a.onData(e)===!1)return Fg.ERROR.PAUSED}onMessageComplete(){let{client:e,socket:n,statusCode:r,upgrade:i,headers:o,contentLength:a,bytesRead:l,shouldKeepAlive:c}=this;if(n.destroyed&&(!r||c))return-1;if(i)return;yr(r>=100),yr((this.headers.length&1)===0);let u=e[Mm][e[np]];if(yr(u),this.statusCode=null,this.statusText="",this.bytesRead=0,this.contentLength="",this.keepAlive="",this.connection="",this.headers=[],this.headersSize=0,!(r<200)){if(u.method!=="HEAD"&&a&&l!==parseInt(a,10))return Gr.destroy(n,new axt),-1;if(u.onComplete(o),e[Mm][e[np]++]=null,n[Iv])return yr(e[Xc]===0),Gr.destroy(n,new r4("reset")),Fg.ERROR.PAUSED;if(c){if(n[Td]&&e[Xc]===0)return Gr.destroy(n,new r4("reset")),Fg.ERROR.PAUSED;e[Vq]==null||e[Vq]===1?setImmediate(()=>e[Ev]()):e[Ev]()}else return Gr.destroy(n,new r4("reset")),Fg.ERROR.PAUSED}}};function qBe(t){let{socket:e,timeoutType:n,client:r,paused:i}=t.deref();n===o4?(!e[Iv]||e.writableNeedDrain||r[Xc]>1)&&(yr(!i,"cannot be paused while waiting for headers"),Gr.destroy(e,new lxt)):n===$q?i||Gr.destroy(e,new uxt):n===Bse&&(yr(r[Xc]===0&&r[Yq]),Gr.destroy(e,new r4("socket idle timeout")))}s(qBe,"onParserTimeout");async function Sxt(t,e){t[i4]=e,_se||(_se=await kse,kse=null),e[MP]=!1,e[Iv]=!1,e[Td]=!1,e[OP]=!1,e[ua]=new Pse(t,e,_se),Gq(e,"error",function(r){yr(r.code!=="ERR_TLS_CERT_ALTNAME_INVALID");let i=this[ua];if(r.code==="ECONNRESET"&&i.statusCode&&!i.shouldKeepAlive){i.onMessageComplete();return}this[rp]=r,this[Sse][Ext](r)}),Gq(e,"readable",function(){let r=this[ua];r&&r.readMore()}),Gq(e,"end",function(){let r=this[ua];if(r.statusCode&&!r.shouldKeepAlive){r.onMessageComplete();return}Gr.destroy(this,new zq("other side closed",Gr.getSocketInfo(this)))}),Gq(e,"close",function(){let r=this[Sse],i=this[ua];i&&(!this[rp]&&i.statusCode&&!i.shouldKeepAlive&&i.onMessageComplete(),this[ua].destroy(),this[ua]=null);let o=this[rp]||new zq("closed",Gr.getSocketInfo(this));if(r[i4]=null,r[VBe]=null,r.destroyed){yr(r[pxt]===0);let a=r[Mm].splice(r[np]);for(let l=0;l<a.length;l++){let c=a[l];Gr.errorRequest(r,c,o)}}else if(r[Xc]>0&&o.code!=="UND_ERR_INFO"){let a=r[Mm][r[np]];r[Mm][r[np]++]=null,Gr.errorRequest(r,a,o)}r[gxt]=r[np],yr(r[Xc]===0),r.emit("disconnect",r[jBe],[r],o),r[Ev]()});let n=!1;return e.on("close",()=>{n=!0}),{version:"h1",defaultPipelining:1,write(...r){return Bxt(t,...r)},resume(){Rxt(t)},destroy(r,i){n?queueMicrotask(i):e.destroy(r).on("close",i)},get destroyed(){return e.destroyed},busy(r){return!!(e[Iv]||e[Td]||e[OP]||r&&(t[Xc]>0&&!r.idempotent||t[Xc]>0&&(r.upgrade||r.method==="CONNECT")||t[Xc]>0&&Gr.bodyLength(r.body)!==0&&(Gr.isStream(r.body)||Gr.isAsyncIterable(r.body)||Gr.isFormDataLike(r.body))))}}}s(Sxt,"connectH1");function Rxt(t){let e=t[i4];if(e&&!e.destroyed){if(t[OBe]===0?!e[MP]&&e.unref&&(e.unref(),e[MP]=!0):e[MP]&&e.ref&&(e.ref(),e[MP]=!1),t[OBe]===0)e[ua].timeoutType!==Bse&&e[ua].setTimeout(t[Yq],Bse);else if(t[Xc]>0&&e[ua].statusCode<200&&e[ua].timeoutType!==o4){let n=t[Mm][t[np]],r=n.headersTimeout!=null?n.headersTimeout:t[Cxt];e[ua].setTimeout(r,o4)}}}s(Rxt,"resumeH1");function kxt(t){return t!=="GET"&&t!=="HEAD"&&t!=="OPTIONS"&&t!=="TRACE"&&t!=="CONNECT"}s(kxt,"shouldSendContentLength");function Bxt(t,e){let{method:n,path:r,host:i,upgrade:o,blocking:a,reset:l}=e,{body:c,headers:u,contentLength:d}=e,p=n==="PUT"||n==="POST"||n==="PATCH"||n==="QUERY"||n==="PROPFIND"||n==="PROPPATCH";if(Gr.isFormDataLike(c)){wse||(wse=n4().extractBody);let[v,b]=wse(c);e.contentType==null&&u.push("content-type",b),c=v.stream,d=v.length}else Gr.isBlobLike(c)&&e.contentType==null&&c.type&&u.push("content-type",c.type);c&&typeof c.read=="function"&&c.read(0);let m=Gr.bodyLength(c);if(d=m??d,d===null&&(d=e.contentLength),d===0&&!p&&(d=null),kxt(n)&&d>0&&e.contentLength!==null&&e.contentLength!==d){if(t[Rse])return Gr.errorRequest(t,e,new E2),!1;process.emitWarning(new E2)}let h=t[i4],g=s(v=>{e.aborted||e.completed||(Gr.errorRequest(t,e,v||new GBe),Gr.destroy(c),Gr.destroy(h,new r4("aborted")))},"abort");try{e.onConnect(g)}catch(v){Gr.errorRequest(t,e,v)}if(e.aborted)return!1;n==="HEAD"&&(h[Td]=!0),(o||n==="CONNECT")&&(h[Td]=!0),l!=null&&(h[Td]=l),t[UBe]&&h[vxt]++>=t[UBe]&&(h[Td]=!0),a&&(h[OP]=!0);let y=`${n} ${r} HTTP/1.1\r
`;if(typeof i=="string"?y+=`host: ${i}\r
`:y+=t[hxt],o?y+=`connection: upgrade\r
upgrade: ${o}\r
`:t[Vq]&&!h[Td]?y+=`connection: keep-alive\r
`:y+=`connection: close\r
`,Array.isArray(u))for(let v=0;v<u.length;v+=2){let b=u[v+0],E=u[v+1];if(Array.isArray(E))for(let _=0;_<E.length;_++)y+=`${b}: ${E[_]}\r
`;else y+=`${b}: ${E}\r
`}return QBe.sendHeaders.hasSubscribers&&QBe.sendHeaders.publish({request:e,headers:y,socket:h}),!c||m===0?WBe(g,null,t,e,h,d,y,p):Gr.isBuffer(c)?WBe(g,c,t,e,h,d,y,p):Gr.isBlobLike(c)?typeof c.stream=="function"?HBe(g,c.stream(),t,e,h,d,y,p):Dxt(g,c,t,e,h,d,y,p):Gr.isStream(c)?Pxt(g,c,t,e,h,d,y,p):Gr.isIterable(c)?HBe(g,c,t,e,h,d,y,p):yr(!1),!0}s(Bxt,"writeH1");function Pxt(t,e,n,r,i,o,a,l){yr(o!==0||n[Xc]===0,"stream body cannot be pipelined");let c=!1,u=new Kq({abort:t,socket:i,request:r,contentLength:o,client:n,expectsPayload:l,header:a}),d=s(function(g){if(!c)try{!u.write(g)&&this.pause&&this.pause()}catch(y){Gr.destroy(this,y)}},"onData"),p=s(function(){c||e.resume&&e.resume()},"onDrain"),m=s(function(){if(queueMicrotask(()=>{e.removeListener("error",h)}),!c){let g=new GBe;queueMicrotask(()=>h(g))}},"onClose"),h=s(function(g){if(!c){if(c=!0,yr(i.destroyed||i[Iv]&&n[Xc]<=1),i.off("drain",p).off("error",h),e.removeListener("data",d).removeListener("end",h).removeListener("close",m),!g)try{u.end()}catch(y){g=y}u.destroy(g),g&&(g.code!=="UND_ERR_INFO"||g.message!=="reset")?Gr.destroy(e,g):Gr.destroy(e)}},"onFinished");e.on("data",d).on("end",h).on("error",h).on("close",m),e.resume&&e.resume(),i.on("drain",p).on("error",h),e.errorEmitted??e.errored?setImmediate(()=>h(e.errored)):(e.endEmitted??e.readableEnded)&&setImmediate(()=>h(null)),(e.closeEmitted??e.closed)&&setImmediate(m)}s(Pxt,"writeStream");function WBe(t,e,n,r,i,o,a,l){try{e?Gr.isBuffer(e)&&(yr(o===e.byteLength,"buffer body must have content length"),i.cork(),i.write(`${a}content-length: ${o}\r
\r
`,"latin1"),i.write(e),i.uncork(),r.onBodySent(e),!l&&r.reset!==!1&&(i[Td]=!0)):o===0?i.write(`${a}content-length: 0\r
\r
`,"latin1"):(yr(o===null,"no body must not have content length"),i.write(`${a}\r
`,"latin1")),r.onRequestSent(),n[Ev]()}catch(c){t(c)}}s(WBe,"writeBuffer");async function Dxt(t,e,n,r,i,o,a,l){yr(o===e.size,"blob body must have content length");try{if(o!=null&&o!==e.size)throw new E2;let c=Buffer.from(await e.arrayBuffer());i.cork(),i.write(`${a}content-length: ${o}\r
\r
`,"latin1"),i.write(c),i.uncork(),r.onBodySent(c),r.onRequestSent(),!l&&r.reset!==!1&&(i[Td]=!0),n[Ev]()}catch(c){t(c)}}s(Dxt,"writeBlob");async function HBe(t,e,n,r,i,o,a,l){yr(o!==0||n[Xc]===0,"iterator body cannot be pipelined");let c=null;function u(){if(c){let m=c;c=null,m()}}s(u,"onDrain");let d=s(()=>new Promise((m,h)=>{yr(c===null),i[rp]?h(i[rp]):c=m}),"waitForDrain");i.on("close",u).on("drain",u);let p=new Kq({abort:t,socket:i,request:r,contentLength:o,client:n,expectsPayload:l,header:a});try{for await(let m of e){if(i[rp])throw i[rp];p.write(m)||await d()}p.end()}catch(m){p.destroy(m)}finally{i.off("close",u).off("drain",u)}}s(HBe,"writeIterable");var Kq=class{static{s(this,"AsyncWriter")}constructor({abort:e,socket:n,request:r,contentLength:i,client:o,expectsPayload:a,header:l}){this.socket=n,this.request=r,this.contentLength=i,this.client=o,this.bytesWritten=0,this.expectsPayload=a,this.header=l,this.abort=e,n[Iv]=!0}write(e){let{socket:n,request:r,contentLength:i,client:o,bytesWritten:a,expectsPayload:l,header:c}=this;if(n[rp])throw n[rp];if(n.destroyed)return!1;let u=Buffer.byteLength(e);if(!u)return!0;if(i!==null&&a+u>i){if(o[Rse])throw new E2;process.emitWarning(new E2)}n.cork(),a===0&&(!l&&r.reset!==!1&&(n[Td]=!0),i===null?n.write(`${c}transfer-encoding: chunked\r
`,"latin1"):n.write(`${c}content-length: ${i}\r
\r
`,"latin1")),i===null&&n.write(`\r
${u.toString(16)}\r
`,"latin1"),this.bytesWritten+=u;let d=n.write(e);return n.uncork(),r.onBodySent(e),d||n[ua].timeout&&n[ua].timeoutType===o4&&n[ua].timeout.refresh&&n[ua].timeout.refresh(),d}end(){let{socket:e,contentLength:n,client:r,bytesWritten:i,expectsPayload:o,header:a,request:l}=this;if(l.onRequestSent(),e[Iv]=!1,e[rp])throw e[rp];if(!e.destroyed){if(i===0?o?e.write(`${a}content-length: 0\r
\r
`,"latin1"):e.write(`${a}\r
`,"latin1"):n===null&&e.write(`\r
0\r
\r
`,"latin1"),n!==null&&i!==n){if(r[Rse])throw new E2;process.emitWarning(new E2)}e[ua].timeout&&e[ua].timeoutType===o4&&e[ua].timeout.refresh&&e[ua].timeout.refresh(),r[Ev]()}}destroy(e){let{socket:n,client:r,abort:i}=this;n[Iv]=!1,e&&(yr(r[Xc]<=1,"pipeline should only contain this request"),i(e))}};$Be.exports=Sxt});var n8e=H((JVn,t8e)=>{"use strict";f();var ip=require("node:assert"),{pipeline:Nxt}=require("node:stream"),Mi=yi(),{RequestContentLengthMismatchError:Dse,RequestAbortedError:YBe,SocketError:UP,InformationalError:Nse}=yo(),{kUrl:Jq,kReset:Zq,kClient:s4,kRunning:eW,kPending:Lxt,kQueue:Tv,kPendingIdx:Lse,kRunningIdx:Qm,kError:Um,kSocket:Hl,kStrictContentLength:Fxt,kOnError:Fse,kMaxConcurrentStreams:e8e,kHTTP2Session:Om,kResume:wv,kSize:Mxt,kHTTPContext:Qxt}=Qs(),Z1=Symbol("open streams"),KBe,JBe=!1,Xq;try{Xq=require("node:http2")}catch{Xq={constants:{}}}var{constants:{HTTP2_HEADER_AUTHORITY:Oxt,HTTP2_HEADER_METHOD:Uxt,HTTP2_HEADER_PATH:qxt,HTTP2_HEADER_SCHEME:Wxt,HTTP2_HEADER_CONTENT_LENGTH:Hxt,HTTP2_HEADER_EXPECT:Gxt,HTTP2_HEADER_STATUS:jxt}}=Xq;function Vxt(t){let e=[];for(let[n,r]of Object.entries(t))if(Array.isArray(r))for(let i of r)e.push(Buffer.from(n),Buffer.from(i));else e.push(Buffer.from(n),Buffer.from(r));return e}s(Vxt,"parseH2Headers");async function $xt(t,e){t[Hl]=e,JBe||(JBe=!0,process.emitWarning("H2 support is experimental, expect them to change at any time.",{code:"UNDICI-H2"}));let n=Xq.connect(t[Jq],{createConnection:s(()=>e,"createConnection"),peerMaxConcurrentStreams:t[e8e]});n[Z1]=0,n[s4]=t,n[Hl]=e,Mi.addListener(n,"error",Yxt),Mi.addListener(n,"frameError",Kxt),Mi.addListener(n,"end",Jxt),Mi.addListener(n,"goaway",Xxt),Mi.addListener(n,"close",function(){let{[s4]:i}=this,{[Hl]:o}=i,a=this[Hl][Um]||this[Um]||new UP("closed",Mi.getSocketInfo(o));if(i[Om]=null,i.destroyed){ip(i[Lxt]===0);let l=i[Tv].splice(i[Qm]);for(let c=0;c<l.length;c++){let u=l[c];Mi.errorRequest(i,u,a)}}}),n.unref(),t[Om]=n,e[Om]=n,Mi.addListener(e,"error",function(i){ip(i.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[Um]=i,this[s4][Fse](i)}),Mi.addListener(e,"end",function(){Mi.destroy(this,new UP("other side closed",Mi.getSocketInfo(this)))}),Mi.addListener(e,"close",function(){let i=this[Um]||new UP("closed",Mi.getSocketInfo(this));t[Hl]=null,this[Om]!=null&&this[Om].destroy(i),t[Lse]=t[Qm],ip(t[eW]===0),t.emit("disconnect",t[Jq],[t],i),t[wv]()});let r=!1;return e.on("close",()=>{r=!0}),{version:"h2",defaultPipelining:1/0,write(...i){return evt(t,...i)},resume(){zxt(t)},destroy(i,o){r?queueMicrotask(o):e.destroy(i).on("close",o)},get destroyed(){return e.destroyed},busy(){return!1}}}s($xt,"connectH2");function zxt(t){let e=t[Hl];e?.destroyed===!1&&(t[Mxt]===0&&t[e8e]===0?(e.unref(),t[Om].unref()):(e.ref(),t[Om].ref()))}s(zxt,"resumeH2");function Yxt(t){ip(t.code!=="ERR_TLS_CERT_ALTNAME_INVALID"),this[Hl][Um]=t,this[s4][Fse](t)}s(Yxt,"onHttp2SessionError");function Kxt(t,e,n){if(n===0){let r=new Nse(`HTTP/2: "frameError" received - type ${t}, code ${e}`);this[Hl][Um]=r,this[s4][Fse](r)}}s(Kxt,"onHttp2FrameError");function Jxt(){let t=new UP("other side closed",Mi.getSocketInfo(this[Hl]));this.destroy(t),Mi.destroy(this[Hl],t)}s(Jxt,"onHttp2SessionEnd");function Xxt(t){let e=this[Um]||new UP(`HTTP/2: "GOAWAY" frame received with code ${t}`,Mi.getSocketInfo(this)),n=this[s4];if(n[Hl]=null,n[Qxt]=null,this[Om]!=null&&(this[Om].destroy(e),this[Om]=null),Mi.destroy(this[Hl],e),n[Qm]<n[Tv].length){let r=n[Tv][n[Qm]];n[Tv][n[Qm]++]=null,Mi.errorRequest(n,r,e),n[Lse]=n[Qm]}ip(n[eW]===0),n.emit("disconnect",n[Jq],[n],e),n[wv]()}s(Xxt,"onHTTP2GoAway");function Zxt(t){return t!=="GET"&&t!=="HEAD"&&t!=="OPTIONS"&&t!=="TRACE"&&t!=="CONNECT"}s(Zxt,"shouldSendContentLength");function evt(t,e){let n=t[Om],{method:r,path:i,host:o,upgrade:a,expectContinue:l,signal:c,headers:u}=e,{body:d}=e;if(a)return Mi.errorRequest(t,e,new Error("Upgrade not supported for H2")),!1;let p={};for(let k=0;k<u.length;k+=2){let P=u[k+0],N=u[k+1];if(Array.isArray(N))for(let U=0;U<N.length;U++)p[P]?p[P]+=`,${N[U]}`:p[P]=N[U];else p[P]=N}let m,{hostname:h,port:g}=t[Jq];p[Oxt]=o||`${h}${g?`:${g}`:""}`,p[Uxt]=r;let y=s(k=>{e.aborted||e.completed||(k=k||new YBe,Mi.errorRequest(t,e,k),m!=null&&Mi.destroy(m,k),Mi.destroy(d,k),t[Tv][t[Qm]++]=null,t[wv]())},"abort");try{e.onConnect(y)}catch(k){Mi.errorRequest(t,e,k)}if(e.aborted)return!1;if(r==="CONNECT")return n.ref(),m=n.request(p,{endStream:!1,signal:c}),m.id&&!m.pending?(e.onUpgrade(null,null,m),++n[Z1],t[Tv][t[Qm]++]=null):m.once("ready",()=>{e.onUpgrade(null,null,m),++n[Z1],t[Tv][t[Qm]++]=null}),m.once("close",()=>{n[Z1]-=1,n[Z1]===0&&n.unref()}),!0;p[qxt]=i,p[Wxt]="https";let v=r==="PUT"||r==="POST"||r==="PATCH";d&&typeof d.read=="function"&&d.read(0);let b=Mi.bodyLength(d);if(Mi.isFormDataLike(d)){KBe??=n4().extractBody;let[k,P]=KBe(d);p["content-type"]=P,d=k.stream,b=k.length}if(b==null&&(b=e.contentLength),(b===0||!v)&&(b=null),Zxt(r)&&b>0&&e.contentLength!=null&&e.contentLength!==b){if(t[Fxt])return Mi.errorRequest(t,e,new Dse),!1;process.emitWarning(new Dse)}b!=null&&(ip(d,"no body must not have content length"),p[Hxt]=`${b}`),n.ref();let E=r==="GET"||r==="HEAD"||d===null;return l?(p[Gxt]="100-continue",m=n.request(p,{endStream:E,signal:c}),m.once("continue",_)):(m=n.request(p,{endStream:E,signal:c}),_()),++n[Z1],m.once("response",k=>{let{[jxt]:P,...N}=k;if(e.onResponseStarted(),e.aborted){let U=new YBe;Mi.errorRequest(t,e,U),Mi.destroy(m,U);return}e.onHeaders(Number(P),Vxt(N),m.resume.bind(m),"")===!1&&m.pause(),m.on("data",U=>{e.onData(U)===!1&&m.pause()})}),m.once("end",()=>{(m.state?.state==null||m.state.state<6)&&e.onComplete([]),n[Z1]===0&&n.unref(),y(new Nse("HTTP/2: stream half-closed (remote)")),t[Tv][t[Qm]++]=null,t[Lse]=t[Qm],t[wv]()}),m.once("close",()=>{n[Z1]-=1,n[Z1]===0&&n.unref()}),m.once("error",function(k){y(k)}),m.once("frameError",(k,P)=>{y(new Nse(`HTTP/2: "frameError" received - type ${k}, code ${P}`))}),!0;function _(){!d||b===0?XBe(y,m,null,t,e,t[Hl],b,v):Mi.isBuffer(d)?XBe(y,m,d,t,e,t[Hl],b,v):Mi.isBlobLike(d)?typeof d.stream=="function"?ZBe(y,m,d.stream(),t,e,t[Hl],b,v):nvt(y,m,d,t,e,t[Hl],b,v):Mi.isStream(d)?tvt(y,t[Hl],v,m,d,t,e,b):Mi.isIterable(d)?ZBe(y,m,d,t,e,t[Hl],b,v):ip(!1)}s(_,"writeBodyH2")}s(evt,"writeH2");function XBe(t,e,n,r,i,o,a,l){try{n!=null&&Mi.isBuffer(n)&&(ip(a===n.byteLength,"buffer body must have content length"),e.cork(),e.write(n),e.uncork(),e.end(),i.onBodySent(n)),l||(o[Zq]=!0),i.onRequestSent(),r[wv]()}catch(c){t(c)}}s(XBe,"writeBuffer");function tvt(t,e,n,r,i,o,a,l){ip(l!==0||o[eW]===0,"stream body cannot be pipelined");let c=Nxt(i,r,d=>{d?(Mi.destroy(c,d),t(d)):(Mi.removeAllListeners(c),a.onRequestSent(),n||(e[Zq]=!0),o[wv]())});Mi.addListener(c,"data",u);function u(d){a.onBodySent(d)}s(u,"onPipeData")}s(tvt,"writeStream");async function nvt(t,e,n,r,i,o,a,l){ip(a===n.size,"blob body must have content length");try{if(a!=null&&a!==n.size)throw new Dse;let c=Buffer.from(await n.arrayBuffer());e.cork(),e.write(c),e.uncork(),e.end(),i.onBodySent(c),i.onRequestSent(),l||(o[Zq]=!0),r[wv]()}catch(c){t(c)}}s(nvt,"writeBlob");async function ZBe(t,e,n,r,i,o,a,l){ip(a!==0||r[eW]===0,"iterator body cannot be pipelined");let c=null;function u(){if(c){let p=c;c=null,p()}}s(u,"onDrain");let d=s(()=>new Promise((p,m)=>{ip(c===null),o[Um]?m(o[Um]):c=p}),"waitForDrain");e.on("close",u).on("drain",u);try{for await(let p of n){if(o[Um])throw o[Um];let m=e.write(p);i.onBodySent(p),m||await d()}e.end(),i.onRequestSent(),l||(o[Zq]=!0),r[wv]()}catch(p){t(p)}finally{e.off("close",u).off("drain",u)}}s(ZBe,"writeIterable");t8e.exports=$xt});var nW=H((e$n,o8e)=>{"use strict";f();var Og=yi(),{kBodyUsed:qP}=Qs(),Qse=require("node:assert"),{InvalidArgumentError:rvt}=yo(),ivt=require("node:events"),ovt=[300,301,302,303,307,308],r8e=Symbol("body"),tW=class{static{s(this,"BodyAsyncIterable")}constructor(e){this[r8e]=e,this[qP]=!1}async*[Symbol.asyncIterator](){Qse(!this[qP],"disturbed"),this[qP]=!0,yield*this[r8e]}},Mse=class{static{s(this,"RedirectHandler")}constructor(e,n,r,i){if(n!=null&&(!Number.isInteger(n)||n<0))throw new rvt("maxRedirections must be a positive number");Og.validateHandler(i,r.method,r.upgrade),this.dispatch=e,this.location=null,this.abort=null,this.opts={...r,maxRedirections:0},this.maxRedirections=n,this.handler=i,this.history=[],this.redirectionLimitReached=!1,Og.isStream(this.opts.body)?(Og.bodyLength(this.opts.body)===0&&this.opts.body.on("data",function(){Qse(!1)}),typeof this.opts.body.readableDidRead!="boolean"&&(this.opts.body[qP]=!1,ivt.prototype.on.call(this.opts.body,"data",function(){this[qP]=!0}))):this.opts.body&&typeof this.opts.body.pipeTo=="function"?this.opts.body=new tW(this.opts.body):this.opts.body&&typeof this.opts.body!="string"&&!ArrayBuffer.isView(this.opts.body)&&Og.isIterable(this.opts.body)&&(this.opts.body=new tW(this.opts.body))}onConnect(e){this.abort=e,this.handler.onConnect(e,{history:this.history})}onUpgrade(e,n,r){this.handler.onUpgrade(e,n,r)}onError(e){this.handler.onError(e)}onHeaders(e,n,r,i){if(this.location=this.history.length>=this.maxRedirections||Og.isDisturbed(this.opts.body)?null:svt(e,n),this.opts.throwOnMaxRedirect&&this.history.length>=this.maxRedirections){this.request&&this.request.abort(new Error("max redirects")),this.redirectionLimitReached=!0,this.abort(new Error("max redirects"));return}if(this.opts.origin&&this.history.push(new URL(this.opts.path,this.opts.origin)),!this.location)return this.handler.onHeaders(e,n,r,i);let{origin:o,pathname:a,search:l}=Og.parseURL(new URL(this.location,this.opts.origin&&new URL(this.opts.path,this.opts.origin))),c=l?`${a}${l}`:a;this.opts.headers=avt(this.opts.headers,e===303,this.opts.origin!==o),this.opts.path=c,this.opts.origin=o,this.opts.maxRedirections=0,this.opts.query=null,e===303&&this.opts.method!=="HEAD"&&(this.opts.method="GET",this.opts.body=null)}onData(e){if(!this.location)return this.handler.onData(e)}onComplete(e){this.location?(this.location=null,this.abort=null,this.dispatch(this.opts,this)):this.handler.onComplete(e)}onBodySent(e){this.handler.onBodySent&&this.handler.onBodySent(e)}};function svt(t,e){if(ovt.indexOf(t)===-1)return null;for(let n=0;n<e.length;n+=2)if(e[n].length===8&&Og.headerNameToString(e[n])==="location")return e[n+1]}s(svt,"parseLocation");function i8e(t,e,n){if(t.length===4)return Og.headerNameToString(t)==="host";if(e&&Og.headerNameToString(t).startsWith("content-"))return!0;if(n&&(t.length===13||t.length===6||t.length===19)){let r=Og.headerNameToString(t);return r==="authorization"||r==="cookie"||r==="proxy-authorization"}return!1}s(i8e,"shouldRemoveHeader");function avt(t,e,n){let r=[];if(Array.isArray(t))for(let i=0;i<t.length;i+=2)i8e(t[i],e,n)||r.push(t[i],t[i+1]);else if(t&&typeof t=="object")for(let i of Object.keys(t))i8e(i,e,n)||r.push(i,t[i]);else Qse(t==null,"headers must be an object or an array");return r}s(avt,"cleanRequestHeaders");o8e.exports=Mse});var rW=H((r$n,s8e)=>{"use strict";f();var lvt=nW();function cvt({maxRedirections:t}){return e=>s(function(r,i){let{maxRedirections:o=t}=r;if(!o)return e(r,i);let a=new lvt(e,o,r,i);return r={...r,maxRedirections:0},e(r,a)},"Intercept")}s(cvt,"createRedirectInterceptor");s8e.exports=cvt});var zP=H((s$n,g8e)=>{"use strict";f();var ey=require("node:assert"),f8e=require("node:net"),uvt=require("node:http"),I2=yi(),{channels:a4}=H5(),dvt=Eke(),fvt=$5(),{InvalidArgumentError:Pa,InformationalError:pvt,ClientDestroyedError:mvt}=yo(),hvt=SP(),{kUrl:Ug,kServerName:_v,kClient:gvt,kBusy:Ose,kConnect:Avt,kResuming:T2,kRunning:VP,kPending:$P,kSize:jP,kQueue:qm,kConnected:yvt,kConnecting:l4,kNeedDrain:Rv,kKeepAliveDefaultTimeout:a8e,kHostHeader:Cvt,kPendingIdx:Wm,kRunningIdx:ty,kError:xvt,kPipelining:iW,kKeepAliveTimeoutValue:vvt,kMaxHeadersSize:bvt,kKeepAliveMaxTimeout:Evt,kKeepAliveTimeoutThreshold:Ivt,kHeadersTimeout:Tvt,kBodyTimeout:wvt,kStrictContentLength:_vt,kConnector:WP,kMaxRedirections:Svt,kMaxRequests:Use,kCounter:Rvt,kClose:kvt,kDestroy:Bvt,kDispatch:Pvt,kInterceptors:l8e,kLocalAddress:HP,kMaxResponseSize:Dvt,kOnError:Nvt,kHTTPContext:Da,kMaxConcurrentStreams:Lvt,kResume:GP}=Qs(),Fvt=zBe(),Mvt=n8e(),c8e=!1,Sv=Symbol("kClosedResolve"),u8e=s(()=>{},"noop");function p8e(t){return t[iW]??t[Da]?.defaultPipelining??1}s(p8e,"getPipelining");var qse=class extends fvt{static{s(this,"Client")}constructor(e,{interceptors:n,maxHeaderSize:r,headersTimeout:i,socketTimeout:o,requestTimeout:a,connectTimeout:l,bodyTimeout:c,idleTimeout:u,keepAlive:d,keepAliveTimeout:p,maxKeepAliveTimeout:m,keepAliveMaxTimeout:h,keepAliveTimeoutThreshold:g,socketPath:y,pipelining:v,tls:b,strictContentLength:E,maxCachedSessions:_,maxRedirections:k,connect:P,maxRequestsPerClient:N,localAddress:U,maxResponseSize:ne,autoSelectFamily:he,autoSelectFamilyAttemptTimeout:ae,maxConcurrentStreams:G,allowH2:W}={}){if(super(),d!==void 0)throw new Pa("unsupported keepAlive, use pipelining=0 instead");if(o!==void 0)throw new Pa("unsupported socketTimeout, use headersTimeout & bodyTimeout instead");if(a!==void 0)throw new Pa("unsupported requestTimeout, use headersTimeout & bodyTimeout instead");if(u!==void 0)throw new Pa("unsupported idleTimeout, use keepAliveTimeout instead");if(m!==void 0)throw new Pa("unsupported maxKeepAliveTimeout, use keepAliveMaxTimeout instead");if(r!=null&&!Number.isFinite(r))throw new Pa("invalid maxHeaderSize");if(y!=null&&typeof y!="string")throw new Pa("invalid socketPath");if(l!=null&&(!Number.isFinite(l)||l<0))throw new Pa("invalid connectTimeout");if(p!=null&&(!Number.isFinite(p)||p<=0))throw new Pa("invalid keepAliveTimeout");if(h!=null&&(!Number.isFinite(h)||h<=0))throw new Pa("invalid keepAliveMaxTimeout");if(g!=null&&!Number.isFinite(g))throw new Pa("invalid keepAliveTimeoutThreshold");if(i!=null&&(!Number.isInteger(i)||i<0))throw new Pa("headersTimeout must be a positive integer or zero");if(c!=null&&(!Number.isInteger(c)||c<0))throw new Pa("bodyTimeout must be a positive integer or zero");if(P!=null&&typeof P!="function"&&typeof P!="object")throw new Pa("connect must be a function or an object");if(k!=null&&(!Number.isInteger(k)||k<0))throw new Pa("maxRedirections must be a positive number");if(N!=null&&(!Number.isInteger(N)||N<0))throw new Pa("maxRequestsPerClient must be a positive number");if(U!=null&&(typeof U!="string"||f8e.isIP(U)===0))throw new Pa("localAddress must be valid string IP address");if(ne!=null&&(!Number.isInteger(ne)||ne<-1))throw new Pa("maxResponseSize must be a positive number");if(ae!=null&&(!Number.isInteger(ae)||ae<-1))throw new Pa("autoSelectFamilyAttemptTimeout must be a positive number");if(W!=null&&typeof W!="boolean")throw new Pa("allowH2 must be a valid boolean value");if(G!=null&&(typeof G!="number"||G<1))throw new Pa("maxConcurrentStreams must be a positive integer, greater than 0");typeof P!="function"&&(P=hvt({...b,maxCachedSessions:_,allowH2:W,socketPath:y,timeout:l,...he?{autoSelectFamily:he,autoSelectFamilyAttemptTimeout:ae}:void 0,...P})),n?.Client&&Array.isArray(n.Client)?(this[l8e]=n.Client,c8e||(c8e=!0,process.emitWarning("Client.Options#interceptor is deprecated. Use Dispatcher#compose instead.",{code:"UNDICI-CLIENT-INTERCEPTOR-DEPRECATED"}))):this[l8e]=[Qvt({maxRedirections:k})],this[Ug]=I2.parseOrigin(e),this[WP]=P,this[iW]=v??1,this[bvt]=r||uvt.maxHeaderSize,this[a8e]=p??4e3,this[Evt]=h??6e5,this[Ivt]=g??2e3,this[vvt]=this[a8e],this[_v]=null,this[HP]=U??null,this[T2]=0,this[Rv]=0,this[Cvt]=`host: ${this[Ug].hostname}${this[Ug].port?`:${this[Ug].port}`:""}\r
`,this[wvt]=c??3e5,this[Tvt]=i??3e5,this[_vt]=E??!0,this[Svt]=k,this[Use]=N,this[Sv]=null,this[Dvt]=ne>-1?ne:-1,this[Lvt]=G??100,this[Da]=null,this[qm]=[],this[ty]=0,this[Wm]=0,this[GP]=ue=>Wse(this,ue),this[Nvt]=ue=>m8e(this,ue)}get pipelining(){return this[iW]}set pipelining(e){this[iW]=e,this[GP](!0)}get[$P](){return this[qm].length-this[Wm]}get[VP](){return this[Wm]-this[ty]}get[jP](){return this[qm].length-this[ty]}get[yvt](){return!!this[Da]&&!this[l4]&&!this[Da].destroyed}get[Ose](){return!!(this[Da]?.busy(null)||this[jP]>=(p8e(this)||1)||this[$P]>0)}[Avt](e){h8e(this),this.once("connect",e)}[Pvt](e,n){let r=e.origin||this[Ug].origin,i=new dvt(r,e,n);return this[qm].push(i),this[T2]||(I2.bodyLength(i.body)==null&&I2.isIterable(i.body)?(this[T2]=1,queueMicrotask(()=>Wse(this))):this[GP](!0)),this[T2]&&this[Rv]!==2&&this[Ose]&&(this[Rv]=2),this[Rv]<2}async[kvt](){return new Promise(e=>{this[jP]?this[Sv]=e:e(null)})}async[Bvt](e){return new Promise(n=>{let r=this[qm].splice(this[Wm]);for(let o=0;o<r.length;o++){let a=r[o];I2.errorRequest(this,a,e)}let i=s(()=>{this[Sv]&&(this[Sv](),this[Sv]=null),n(null)},"callback");this[Da]?(this[Da].destroy(e,i),this[Da]=null):queueMicrotask(i),this[GP]()})}},Qvt=rW();function m8e(t,e){if(t[VP]===0&&e.code!=="UND_ERR_INFO"&&e.code!=="UND_ERR_SOCKET"){ey(t[Wm]===t[ty]);let n=t[qm].splice(t[ty]);for(let r=0;r<n.length;r++){let i=n[r];I2.errorRequest(t,i,e)}ey(t[jP]===0)}}s(m8e,"onError");async function h8e(t){ey(!t[l4]),ey(!t[Da]);let{host:e,hostname:n,protocol:r,port:i}=t[Ug];if(n[0]==="["){let o=n.indexOf("]");ey(o!==-1);let a=n.substring(1,o);ey(f8e.isIP(a)),n=a}t[l4]=!0,a4.beforeConnect.hasSubscribers&&a4.beforeConnect.publish({connectParams:{host:e,hostname:n,protocol:r,port:i,version:t[Da]?.version,servername:t[_v],localAddress:t[HP]},connector:t[WP]});try{let o=await new Promise((a,l)=>{t[WP]({host:e,hostname:n,protocol:r,port:i,servername:t[_v],localAddress:t[HP]},(c,u)=>{c?l(c):a(u)})});if(t.destroyed){I2.destroy(o.on("error",u8e),new mvt);return}ey(o);try{t[Da]=o.alpnProtocol==="h2"?await Mvt(t,o):await Fvt(t,o)}catch(a){throw o.destroy().on("error",u8e),a}t[l4]=!1,o[Rvt]=0,o[Use]=t[Use],o[gvt]=t,o[xvt]=null,a4.connected.hasSubscribers&&a4.connected.publish({connectParams:{host:e,hostname:n,protocol:r,port:i,version:t[Da]?.version,servername:t[_v],localAddress:t[HP]},connector:t[WP],socket:o}),t.emit("connect",t[Ug],[t])}catch(o){if(t.destroyed)return;if(t[l4]=!1,a4.connectError.hasSubscribers&&a4.connectError.publish({connectParams:{host:e,hostname:n,protocol:r,port:i,version:t[Da]?.version,servername:t[_v],localAddress:t[HP]},connector:t[WP],error:o}),o.code==="ERR_TLS_CERT_ALTNAME_INVALID")for(ey(t[VP]===0);t[$P]>0&&t[qm][t[Wm]].servername===t[_v];){let a=t[qm][t[Wm]++];I2.errorRequest(t,a,o)}else m8e(t,o);t.emit("connectionError",t[Ug],[t],o)}t[GP]()}s(h8e,"connect");function d8e(t){t[Rv]=0,t.emit("drain",t[Ug],[t])}s(d8e,"emitDrain");function Wse(t,e){t[T2]!==2&&(t[T2]=2,Ovt(t,e),t[T2]=0,t[ty]>256&&(t[qm].splice(0,t[ty]),t[Wm]-=t[ty],t[ty]=0))}s(Wse,"resume");function Ovt(t,e){for(;;){if(t.destroyed){ey(t[$P]===0);return}if(t[Sv]&&!t[jP]){t[Sv](),t[Sv]=null;return}if(t[Da]&&t[Da].resume(),t[Ose])t[Rv]=2;else if(t[Rv]===2){e?(t[Rv]=1,queueMicrotask(()=>d8e(t))):d8e(t);continue}if(t[$P]===0||t[VP]>=(p8e(t)||1))return;let n=t[qm][t[Wm]];if(t[Ug].protocol==="https:"&&t[_v]!==n.servername){if(t[VP]>0)return;t[_v]=n.servername,t[Da]?.destroy(new pvt("servername changed"),()=>{t[Da]=null,Wse(t)})}if(t[l4])return;if(!t[Da]){h8e(t);return}if(t[Da].destroyed||t[Da].busy(n))return;!n.aborted&&t[Da].write(n)?t[Wm]++:t[qm].splice(t[Wm],1)}}s(Ovt,"_resume");g8e.exports=qse});var Hse=H((u$n,A8e)=>{"use strict";f();var oW=class{static{s(this,"FixedCircularBuffer")}constructor(){this.bottom=0,this.top=0,this.list=new Array(2048),this.next=null}isEmpty(){return this.top===this.bottom}isFull(){return(this.top+1&2047)===this.bottom}push(e){this.list[this.top]=e,this.top=this.top+1&2047}shift(){let e=this.list[this.bottom];return e===void 0?null:(this.list[this.bottom]=void 0,this.bottom=this.bottom+1&2047,e)}};A8e.exports=class{static{s(this,"FixedQueue")}constructor(){this.head=this.tail=new oW}isEmpty(){return this.head.isEmpty()}push(e){this.head.isFull()&&(this.head=this.head.next=new oW),this.head.push(e)}shift(){let e=this.tail,n=e.shift();return e.isEmpty()&&e.next!==null&&(this.tail=e.next),n}}});var C8e=H((p$n,y8e)=>{f();var{kFree:Uvt,kConnected:qvt,kPending:Wvt,kQueued:Hvt,kRunning:Gvt,kSize:jvt}=Qs(),w2=Symbol("pool"),Gse=class{static{s(this,"PoolStats")}constructor(e){this[w2]=e}get connected(){return this[w2][qvt]}get free(){return this[w2][Uvt]}get pending(){return this[w2][Wvt]}get queued(){return this[w2][Hvt]}get running(){return this[w2][Gvt]}get size(){return this[w2][jvt]}};y8e.exports=Gse});var Kse=H((g$n,R8e)=>{"use strict";f();var Vvt=$5(),$vt=Hse(),{kConnected:jse,kSize:x8e,kRunning:v8e,kPending:b8e,kQueued:YP,kBusy:zvt,kFree:Yvt,kUrl:Kvt,kClose:Jvt,kDestroy:Xvt,kDispatch:Zvt}=Qs(),ebt=C8e(),wd=Symbol("clients"),Qu=Symbol("needDrain"),KP=Symbol("queue"),Vse=Symbol("closed resolve"),$se=Symbol("onDrain"),E8e=Symbol("onConnect"),I8e=Symbol("onDisconnect"),T8e=Symbol("onConnectionError"),zse=Symbol("get dispatcher"),_8e=Symbol("add client"),S8e=Symbol("remove client"),w8e=Symbol("stats"),Yse=class extends Vvt{static{s(this,"PoolBase")}constructor(){super(),this[KP]=new $vt,this[wd]=[],this[YP]=0;let e=this;this[$se]=s(function(r,i){let o=e[KP],a=!1;for(;!a;){let l=o.shift();if(!l)break;e[YP]--,a=!this.dispatch(l.opts,l.handler)}this[Qu]=a,!this[Qu]&&e[Qu]&&(e[Qu]=!1,e.emit("drain",r,[e,...i])),e[Vse]&&o.isEmpty()&&Promise.all(e[wd].map(l=>l.close())).then(e[Vse])},"onDrain"),this[E8e]=(n,r)=>{e.emit("connect",n,[e,...r])},this[I8e]=(n,r,i)=>{e.emit("disconnect",n,[e,...r],i)},this[T8e]=(n,r,i)=>{e.emit("connectionError",n,[e,...r],i)},this[w8e]=new ebt(this)}get[zvt](){return this[Qu]}get[jse](){return this[wd].filter(e=>e[jse]).length}get[Yvt](){return this[wd].filter(e=>e[jse]&&!e[Qu]).length}get[b8e](){let e=this[YP];for(let{[b8e]:n}of this[wd])e+=n;return e}get[v8e](){let e=0;for(let{[v8e]:n}of this[wd])e+=n;return e}get[x8e](){let e=this[YP];for(let{[x8e]:n}of this[wd])e+=n;return e}get stats(){return this[w8e]}async[Jvt](){this[KP].isEmpty()?await Promise.all(this[wd].map(e=>e.close())):await new Promise(e=>{this[Vse]=e})}async[Xvt](e){for(;;){let n=this[KP].shift();if(!n)break;n.handler.onError(e)}await Promise.all(this[wd].map(n=>n.destroy(e)))}[Zvt](e,n){let r=this[zse]();return r?r.dispatch(e,n)||(r[Qu]=!0,this[Qu]=!this[zse]()):(this[Qu]=!0,this[KP].push({opts:e,handler:n}),this[YP]++),!this[Qu]}[_8e](e){return e.on("drain",this[$se]).on("connect",this[E8e]).on("disconnect",this[I8e]).on("connectionError",this[T8e]),this[wd].push(e),this[Qu]&&queueMicrotask(()=>{this[Qu]&&this[$se](e[Kvt],[this,e])}),this}[S8e](e){e.close(()=>{let n=this[wd].indexOf(e);n!==-1&&this[wd].splice(n,1)}),this[Qu]=this[wd].some(n=>!n[Qu]&&n.closed!==!0&&n.destroyed!==!0)}};R8e.exports={PoolBase:Yse,kClients:wd,kNeedDrain:Qu,kAddClient:_8e,kRemoveClient:S8e,kGetDispatcher:zse}});var c4=H((C$n,D8e)=>{"use strict";f();var{PoolBase:tbt,kClients:sW,kNeedDrain:nbt,kAddClient:rbt,kGetDispatcher:ibt}=Kse(),obt=zP(),{InvalidArgumentError:Jse}=yo(),k8e=yi(),{kUrl:B8e,kInterceptors:sbt}=Qs(),abt=SP(),Xse=Symbol("options"),Zse=Symbol("connections"),P8e=Symbol("factory");function lbt(t,e){return new obt(t,e)}s(lbt,"defaultFactory");var eae=class extends tbt{static{s(this,"Pool")}constructor(e,{connections:n,factory:r=lbt,connect:i,connectTimeout:o,tls:a,maxCachedSessions:l,socketPath:c,autoSelectFamily:u,autoSelectFamilyAttemptTimeout:d,allowH2:p,...m}={}){if(super(),n!=null&&(!Number.isFinite(n)||n<0))throw new Jse("invalid connections");if(typeof r!="function")throw new Jse("factory must be a function.");if(i!=null&&typeof i!="function"&&typeof i!="object")throw new Jse("connect must be a function or an object");typeof i!="function"&&(i=abt({...a,maxCachedSessions:l,allowH2:p,socketPath:c,timeout:o,...u?{autoSelectFamily:u,autoSelectFamilyAttemptTimeout:d}:void 0,...i})),this[sbt]=m.interceptors?.Pool&&Array.isArray(m.interceptors.Pool)?m.interceptors.Pool:[],this[Zse]=n||null,this[B8e]=k8e.parseOrigin(e),this[Xse]={...k8e.deepClone(m),connect:i,allowH2:p},this[Xse].interceptors=m.interceptors?{...m.interceptors}:void 0,this[P8e]=r,this.on("connectionError",(h,g,y)=>{for(let v of g){let b=this[sW].indexOf(v);b!==-1&&this[sW].splice(b,1)}})}[ibt](){for(let e of this[sW])if(!e[nbt])return e;if(!this[Zse]||this[sW].length<this[Zse]){let e=this[P8e](this[B8e],this[Xse]);return this[rbt](e),e}}};D8e.exports=eae});var Q8e=H((b$n,M8e)=>{"use strict";f();var{BalancedPoolMissingUpstreamError:cbt,InvalidArgumentError:ubt}=yo(),{PoolBase:dbt,kClients:Zc,kNeedDrain:JP,kAddClient:fbt,kRemoveClient:pbt,kGetDispatcher:mbt}=Kse(),hbt=c4(),{kUrl:tae,kInterceptors:gbt}=Qs(),{parseOrigin:N8e}=yi(),L8e=Symbol("factory"),aW=Symbol("options"),F8e=Symbol("kGreatestCommonDivisor"),_2=Symbol("kCurrentWeight"),S2=Symbol("kIndex"),op=Symbol("kWeight"),lW=Symbol("kMaxWeightPerServer"),cW=Symbol("kErrorPenalty");function Abt(t,e){if(t===0)return e;for(;e!==0;){let n=e;e=t%e,t=n}return t}s(Abt,"getGreatestCommonDivisor");function ybt(t,e){return new hbt(t,e)}s(ybt,"defaultFactory");var nae=class extends dbt{static{s(this,"BalancedPool")}constructor(e=[],{factory:n=ybt,...r}={}){if(super(),this[aW]=r,this[S2]=-1,this[_2]=0,this[lW]=this[aW].maxWeightPerServer||100,this[cW]=this[aW].errorPenalty||15,Array.isArray(e)||(e=[e]),typeof n!="function")throw new ubt("factory must be a function.");this[gbt]=r.interceptors?.BalancedPool&&Array.isArray(r.interceptors.BalancedPool)?r.interceptors.BalancedPool:[],this[L8e]=n;for(let i of e)this.addUpstream(i);this._updateBalancedPoolStats()}addUpstream(e){let n=N8e(e).origin;if(this[Zc].find(i=>i[tae].origin===n&&i.closed!==!0&&i.destroyed!==!0))return this;let r=this[L8e](n,Object.assign({},this[aW]));this[fbt](r),r.on("connect",()=>{r[op]=Math.min(this[lW],r[op]+this[cW])}),r.on("connectionError",()=>{r[op]=Math.max(1,r[op]-this[cW]),this._updateBalancedPoolStats()}),r.on("disconnect",(...i)=>{let o=i[2];o&&o.code==="UND_ERR_SOCKET"&&(r[op]=Math.max(1,r[op]-this[cW]),this._updateBalancedPoolStats())});for(let i of this[Zc])i[op]=this[lW];return this._updateBalancedPoolStats(),this}_updateBalancedPoolStats(){let e=0;for(let n=0;n<this[Zc].length;n++)e=Abt(this[Zc][n][op],e);this[F8e]=e}removeUpstream(e){let n=N8e(e).origin,r=this[Zc].find(i=>i[tae].origin===n&&i.closed!==!0&&i.destroyed!==!0);return r&&this[pbt](r),this}get upstreams(){return this[Zc].filter(e=>e.closed!==!0&&e.destroyed!==!0).map(e=>e[tae].origin)}[mbt](){if(this[Zc].length===0)throw new cbt;if(!this[Zc].find(o=>!o[JP]&&o.closed!==!0&&o.destroyed!==!0)||this[Zc].map(o=>o[JP]).reduce((o,a)=>o&&a,!0))return;let r=0,i=this[Zc].findIndex(o=>!o[JP]);for(;r++<this[Zc].length;){this[S2]=(this[S2]+1)%this[Zc].length;let o=this[Zc][this[S2]];if(o[op]>this[Zc][i][op]&&!o[JP]&&(i=this[S2]),this[S2]===0&&(this[_2]=this[_2]-this[F8e],this[_2]<=0&&(this[_2]=this[lW])),o[op]>=this[_2]&&!o[JP])return o}return this[_2]=this[Zc][i][op],this[S2]=i,this[Zc][i]}};M8e.exports=nae});var u4=H((T$n,j8e)=>{"use strict";f();var{InvalidArgumentError:uW}=yo(),{kClients:kv,kRunning:O8e,kClose:Cbt,kDestroy:xbt,kDispatch:vbt,kInterceptors:bbt}=Qs(),Ebt=$5(),Ibt=c4(),Tbt=zP(),wbt=yi(),_bt=rW(),U8e=Symbol("onConnect"),q8e=Symbol("onDisconnect"),W8e=Symbol("onConnectionError"),Sbt=Symbol("maxRedirections"),H8e=Symbol("onDrain"),G8e=Symbol("factory"),rae=Symbol("options");function Rbt(t,e){return e&&e.connections===1?new Tbt(t,e):new Ibt(t,e)}s(Rbt,"defaultFactory");var iae=class extends Ebt{static{s(this,"Agent")}constructor({factory:e=Rbt,maxRedirections:n=0,connect:r,...i}={}){if(super(),typeof e!="function")throw new uW("factory must be a function.");if(r!=null&&typeof r!="function"&&typeof r!="object")throw new uW("connect must be a function or an object");if(!Number.isInteger(n)||n<0)throw new uW("maxRedirections must be a positive number");r&&typeof r!="function"&&(r={...r}),this[bbt]=i.interceptors?.Agent&&Array.isArray(i.interceptors.Agent)?i.interceptors.Agent:[_bt({maxRedirections:n})],this[rae]={...wbt.deepClone(i),connect:r},this[rae].interceptors=i.interceptors?{...i.interceptors}:void 0,this[Sbt]=n,this[G8e]=e,this[kv]=new Map,this[H8e]=(o,a)=>{this.emit("drain",o,[this,...a])},this[U8e]=(o,a)=>{this.emit("connect",o,[this,...a])},this[q8e]=(o,a,l)=>{this.emit("disconnect",o,[this,...a],l)},this[W8e]=(o,a,l)=>{this.emit("connectionError",o,[this,...a],l)}}get[O8e](){let e=0;for(let n of this[kv].values())e+=n[O8e];return e}[vbt](e,n){let r;if(e.origin&&(typeof e.origin=="string"||e.origin instanceof URL))r=String(e.origin);else throw new uW("opts.origin must be a non-empty string or URL.");let i=this[kv].get(r);return i||(i=this[G8e](e.origin,this[rae]).on("drain",this[H8e]).on("connect",this[U8e]).on("disconnect",this[q8e]).on("connectionError",this[W8e]),this[kv].set(r,i)),i.dispatch(e,n)}async[Cbt](){let e=[];for(let n of this[kv].values())e.push(n.close());this[kv].clear(),await Promise.all(e)}async[xbt](e){let n=[];for(let r of this[kv].values())n.push(r.destroy(e));this[kv].clear(),await Promise.all(n)}};j8e.exports=iae});var aae=H((S$n,Y8e)=>{"use strict";f();var{kProxy:kbt,kClose:Bbt,kDestroy:Pbt,kInterceptors:Dbt}=Qs(),{URL:XP}=require("node:url"),Nbt=u4(),Lbt=c4(),Fbt=$5(),{InvalidArgumentError:pW,RequestAbortedError:Mbt,SecureProxyConnectionError:Qbt}=yo(),V8e=SP(),dW=Symbol("proxy agent"),fW=Symbol("proxy client"),ZP=Symbol("proxy headers"),oae=Symbol("request tls settings"),$8e=Symbol("proxy tls settings"),z8e=Symbol("connect endpoint function");function Obt(t){return t==="https:"?443:80}s(Obt,"defaultProtocolPort");function Ubt(t,e){return new Lbt(t,e)}s(Ubt,"defaultFactory");var qbt=s(()=>{},"noop"),sae=class extends Fbt{static{s(this,"ProxyAgent")}constructor(e){if(super(),!e||typeof e=="object"&&!(e instanceof XP)&&!e.uri)throw new pW("Proxy uri is mandatory");let{clientFactory:n=Ubt}=e;if(typeof n!="function")throw new pW("Proxy opts.clientFactory must be a function.");let r=this.#e(e),{href:i,origin:o,port:a,protocol:l,username:c,password:u,hostname:d}=r;if(this[kbt]={uri:i,protocol:l},this[Dbt]=e.interceptors?.ProxyAgent&&Array.isArray(e.interceptors.ProxyAgent)?e.interceptors.ProxyAgent:[],this[oae]=e.requestTls,this[$8e]=e.proxyTls,this[ZP]=e.headers||{},e.auth&&e.token)throw new pW("opts.auth cannot be used in combination with opts.token");e.auth?this[ZP]["proxy-authorization"]=`Basic ${e.auth}`:e.token?this[ZP]["proxy-authorization"]=e.token:c&&u&&(this[ZP]["proxy-authorization"]=`Basic ${Buffer.from(`${decodeURIComponent(c)}:${decodeURIComponent(u)}`).toString("base64")}`);let p=V8e({...e.proxyTls});this[z8e]=V8e({...e.requestTls}),this[fW]=n(r,{connect:p}),this[dW]=new Nbt({...e,connect:s(async(m,h)=>{let g=m.host;m.port||(g+=`:${Obt(m.protocol)}`);try{let{socket:y,statusCode:v}=await this[fW].connect({origin:o,port:a,path:g,signal:m.signal,headers:{...this[ZP],host:m.host},servername:this[$8e]?.servername||d});if(v!==200&&(y.on("error",qbt).destroy(),h(new Mbt(`Proxy response (${v}) !== 200 when HTTP Tunneling`))),m.protocol!=="https:"){h(null,y);return}let b;this[oae]?b=this[oae].servername:b=m.servername,this[z8e]({...m,servername:b,httpSocket:y},h)}catch(y){y.code==="ERR_TLS_CERT_ALTNAME_INVALID"?h(new Qbt(y)):h(y)}},"connect")})}dispatch(e,n){let r=Wbt(e.headers);if(Hbt(r),r&&!("host"in r)&&!("Host"in r)){let{host:i}=new XP(e.origin);r.host=i}return this[dW].dispatch({...e,headers:r},n)}#e(e){return typeof e=="string"?new XP(e):e instanceof XP?e:new XP(e.uri)}async[Bbt](){await this[dW].close(),await this[fW].close()}async[Pbt](){await this[dW].destroy(),await this[fW].destroy()}};function Wbt(t){if(Array.isArray(t)){let e={};for(let n=0;n<t.length;n+=2)e[t[n]]=t[n+1];return e}return t}s(Wbt,"buildHeaders");function Hbt(t){if(t&&Object.keys(t).find(n=>n.toLowerCase()==="proxy-authorization"))throw new pW("Proxy-Authorization should be sent in ProxyAgent constructor")}s(Hbt,"throwIfProxyAuthIsSent");Y8e.exports=sae});var tPe=H((B$n,ePe)=>{"use strict";f();var Gbt=$5(),{kClose:jbt,kDestroy:Vbt,kClosed:K8e,kDestroyed:J8e,kDispatch:$bt,kNoProxyAgent:eD,kHttpProxyAgent:Bv,kHttpsProxyAgent:R2}=Qs(),X8e=aae(),zbt=u4(),Ybt={"http:":80,"https:":443},Z8e=!1,lae=class extends Gbt{static{s(this,"EnvHttpProxyAgent")}#e=null;#t=null;#i=null;constructor(e={}){super(),this.#i=e,Z8e||(Z8e=!0,process.emitWarning("EnvHttpProxyAgent is experimental, expect them to change at any time.",{code:"UNDICI-EHPA"}));let{httpProxy:n,httpsProxy:r,noProxy:i,...o}=e;this[eD]=new zbt(o);let a=n??process.env.http_proxy??process.env.HTTP_PROXY;a?this[Bv]=new X8e({...o,uri:a}):this[Bv]=this[eD];let l=r??process.env.https_proxy??process.env.HTTPS_PROXY;l?this[R2]=new X8e({...o,uri:l}):this[R2]=this[Bv],this.#o()}[$bt](e,n){let r=new URL(e.origin);return this.#r(r).dispatch(e,n)}async[jbt](){await this[eD].close(),this[Bv][K8e]||await this[Bv].close(),this[R2][K8e]||await this[R2].close()}async[Vbt](e){await this[eD].destroy(e),this[Bv][J8e]||await this[Bv].destroy(e),this[R2][J8e]||await this[R2].destroy(e)}#r(e){let{protocol:n,host:r,port:i}=e;return r=r.replace(/:\d*$/,"").toLowerCase(),i=Number.parseInt(i,10)||Ybt[n]||0,this.#n(r,i)?n==="https:"?this[R2]:this[Bv]:this[eD]}#n(e,n){if(this.#s&&this.#o(),this.#t.length===0)return!0;if(this.#e==="*")return!1;for(let r=0;r<this.#t.length;r++){let i=this.#t[r];if(!(i.port&&i.port!==n)){if(/^[.*]/.test(i.hostname)){if(e.endsWith(i.hostname.replace(/^\*/,"")))return!1}else if(e===i.hostname)return!1}}return!0}#o(){let e=this.#i.noProxy??this.#a,n=e.split(/[,\s]/),r=[];for(let i=0;i<n.length;i++){let o=n[i];if(!o)continue;let a=o.match(/^(.+):(\d+)$/);r.push({hostname:(a?a[1]:o).toLowerCase(),port:a?Number.parseInt(a[2],10):0})}this.#e=e,this.#t=r}get#s(){return this.#i.noProxy!==void 0?!1:this.#e!==this.#a}get#a(){return process.env.no_proxy??process.env.NO_PROXY??""}};ePe.exports=lae});var mW=H((N$n,oPe)=>{"use strict";f();var d4=require("node:assert"),{kRetryHandlerDefaultRetry:nPe}=Qs(),{RequestRetryError:tD}=yo(),{isDisturbed:rPe,parseHeaders:Kbt,parseRangeHeader:iPe,wrapRequestBody:Jbt}=yi();function Xbt(t){let e=Date.now();return new Date(t).getTime()-e}s(Xbt,"calculateRetryAfterHeader");var cae=class t{static{s(this,"RetryHandler")}constructor(e,n){let{retryOptions:r,...i}=e,{retry:o,maxRetries:a,maxTimeout:l,minTimeout:c,timeoutFactor:u,methods:d,errorCodes:p,retryAfter:m,statusCodes:h}=r??{};this.dispatch=n.dispatch,this.handler=n.handler,this.opts={...i,body:Jbt(e.body)},this.abort=null,this.aborted=!1,this.retryOpts={retry:o??t[nPe],retryAfter:m??!0,maxTimeout:l??30*1e3,minTimeout:c??500,timeoutFactor:u??2,maxRetries:a??5,methods:d??["GET","HEAD","OPTIONS","PUT","DELETE","TRACE"],statusCodes:h??[500,502,503,504,429],errorCodes:p??["ECONNRESET","ECONNREFUSED","ENOTFOUND","ENETDOWN","ENETUNREACH","EHOSTDOWN","EHOSTUNREACH","EPIPE","UND_ERR_SOCKET"]},this.retryCount=0,this.retryCountCheckpoint=0,this.start=0,this.end=null,this.etag=null,this.resume=null,this.handler.onConnect(g=>{this.aborted=!0,this.abort?this.abort(g):this.reason=g})}onRequestSent(){this.handler.onRequestSent&&this.handler.onRequestSent()}onUpgrade(e,n,r){this.handler.onUpgrade&&this.handler.onUpgrade(e,n,r)}onConnect(e){this.aborted?e(this.reason):this.abort=e}onBodySent(e){if(this.handler.onBodySent)return this.handler.onBodySent(e)}static[nPe](e,{state:n,opts:r},i){let{statusCode:o,code:a,headers:l}=e,{method:c,retryOptions:u}=r,{maxRetries:d,minTimeout:p,maxTimeout:m,timeoutFactor:h,statusCodes:g,errorCodes:y,methods:v}=u,{counter:b}=n;if(a&&a!=="UND_ERR_REQ_RETRY"&&!y.includes(a)){i(e);return}if(Array.isArray(v)&&!v.includes(c)){i(e);return}if(o!=null&&Array.isArray(g)&&!g.includes(o)){i(e);return}if(b>d){i(e);return}let E=l?.["retry-after"];E&&(E=Number(E),E=Number.isNaN(E)?Xbt(E):E*1e3);let _=E>0?Math.min(E,m):Math.min(p*h**(b-1),m);setTimeout(()=>i(null),_)}onHeaders(e,n,r,i){let o=Kbt(n);if(this.retryCount+=1,e>=300)return this.retryOpts.statusCodes.includes(e)===!1?this.handler.onHeaders(e,n,r,i):(this.abort(new tD("Request failed",e,{headers:o,data:{count:this.retryCount}})),!1);if(this.resume!=null){if(this.resume=null,e!==206&&(this.start>0||e!==200))return this.abort(new tD("server does not support the range header and the payload was partially consumed",e,{headers:o,data:{count:this.retryCount}})),!1;let l=iPe(o["content-range"]);if(!l)return this.abort(new tD("Content-Range mismatch",e,{headers:o,data:{count:this.retryCount}})),!1;if(this.etag!=null&&this.etag!==o.etag)return this.abort(new tD("ETag mismatch",e,{headers:o,data:{count:this.retryCount}})),!1;let{start:c,size:u,end:d=u-1}=l;return d4(this.start===c,"content-range mismatch"),d4(this.end==null||this.end===d,"content-range mismatch"),this.resume=r,!0}if(this.end==null){if(e===206){let l=iPe(o["content-range"]);if(l==null)return this.handler.onHeaders(e,n,r,i);let{start:c,size:u,end:d=u-1}=l;d4(c!=null&&Number.isFinite(c),"content-range mismatch"),d4(d!=null&&Number.isFinite(d),"invalid content-length"),this.start=c,this.end=d}if(this.end==null){let l=o["content-length"];this.end=l!=null?Number(l)-1:null}return d4(Number.isFinite(this.start)),d4(this.end==null||Number.isFinite(this.end),"invalid content-length"),this.resume=r,this.etag=o.etag!=null?o.etag:null,this.etag!=null&&this.etag.startsWith("W/")&&(this.etag=null),this.handler.onHeaders(e,n,r,i)}let a=new tD("Request failed",e,{headers:o,data:{count:this.retryCount}});return this.abort(a),!1}onData(e){return this.start+=e.length,this.handler.onData(e)}onComplete(e){return this.retryCount=0,this.handler.onComplete(e)}onError(e){if(this.aborted||rPe(this.opts.body))return this.handler.onError(e);this.retryCount-this.retryCountCheckpoint>0?this.retryCount=this.retryCountCheckpoint+(this.retryCount-this.retryCountCheckpoint):this.retryCount+=1,this.retryOpts.retry(e,{state:{counter:this.retryCount},opts:{retryOptions:this.retryOpts,...this.opts}},n.bind(this));function n(r){if(r!=null||this.aborted||rPe(this.opts.body))return this.handler.onError(r);if(this.start!==0){let i={range:`bytes=${this.start}-${this.end??""}`};this.etag!=null&&(i["if-match"]=this.etag),this.opts={...this.opts,headers:{...this.opts.headers,...i}}}try{this.retryCountCheckpoint=this.retryCount,this.dispatch(this.opts,this)}catch(i){this.handler.onError(i)}}s(n,"onRetry")}};oPe.exports=cae});var aPe=H((M$n,sPe)=>{"use strict";f();var Zbt=wP(),eEt=mW(),uae=class extends Zbt{static{s(this,"RetryAgent")}#e=null;#t=null;constructor(e,n={}){super(n),this.#e=e,this.#t=n}dispatch(e,n){let r=new eEt({...e,retryOptions:this.#t},{dispatch:this.#e.dispatch.bind(this.#e),handler:n});return this.#e.dispatch(e,r)}close(){return this.#e.close()}destroy(){return this.#e.destroy()}};sPe.exports=uae});var gae=H((U$n,gPe)=>{"use strict";f();var fPe=require("node:assert"),{Readable:tEt}=require("node:stream"),{RequestAbortedError:pPe,NotSupportedError:nEt,InvalidArgumentError:rEt,AbortError:dae}=yo(),mPe=yi(),{ReadableStreamFrom:iEt}=yi(),k0=Symbol("kConsume"),nD=Symbol("kReading"),Pv=Symbol("kBody"),lPe=Symbol("kAbort"),hPe=Symbol("kContentType"),cPe=Symbol("kContentLength"),oEt=s(()=>{},"noop"),fae=class extends tEt{static{s(this,"BodyReadable")}constructor({resume:e,abort:n,contentType:r="",contentLength:i,highWaterMark:o=64*1024}){super({autoDestroy:!0,read:e,highWaterMark:o}),this._readableState.dataEmitted=!1,this[lPe]=n,this[k0]=null,this[Pv]=null,this[hPe]=r,this[cPe]=i,this[nD]=!1}destroy(e){return!e&&!this._readableState.endEmitted&&(e=new pPe),e&&this[lPe](),super.destroy(e)}_destroy(e,n){this[nD]?n(e):setImmediate(()=>{n(e)})}on(e,...n){return(e==="data"||e==="readable")&&(this[nD]=!0),super.on(e,...n)}addListener(e,...n){return this.on(e,...n)}off(e,...n){let r=super.off(e,...n);return(e==="data"||e==="readable")&&(this[nD]=this.listenerCount("data")>0||this.listenerCount("readable")>0),r}removeListener(e,...n){return this.off(e,...n)}push(e){return this[k0]&&e!==null?(mae(this[k0],e),this[nD]?super.push(e):!0):super.push(e)}async text(){return rD(this,"text")}async json(){return rD(this,"json")}async blob(){return rD(this,"blob")}async bytes(){return rD(this,"bytes")}async arrayBuffer(){return rD(this,"arrayBuffer")}async formData(){throw new nEt}get bodyUsed(){return mPe.isDisturbed(this)}get body(){return this[Pv]||(this[Pv]=iEt(this),this[k0]&&(this[Pv].getReader(),fPe(this[Pv].locked))),this[Pv]}async dump(e){let n=Number.isFinite(e?.limit)?e.limit:131072,r=e?.signal;if(r!=null&&(typeof r!="object"||!("aborted"in r)))throw new rEt("signal must be an AbortSignal");return r?.throwIfAborted(),this._readableState.closeEmitted?null:await new Promise((i,o)=>{this[cPe]>n&&this.destroy(new dae);let a=s(()=>{this.destroy(r.reason??new dae)},"onAbort");r?.addEventListener("abort",a),this.on("close",function(){r?.removeEventListener("abort",a),r?.aborted?o(r.reason??new dae):i(null)}).on("error",oEt).on("data",function(l){n-=l.length,n<=0&&this.destroy()}).resume()})}};function sEt(t){return t[Pv]&&t[Pv].locked===!0||t[k0]}s(sEt,"isLocked");function aEt(t){return mPe.isDisturbed(t)||sEt(t)}s(aEt,"isUnusable");async function rD(t,e){return fPe(!t[k0]),new Promise((n,r)=>{if(aEt(t)){let i=t._readableState;i.destroyed&&i.closeEmitted===!1?t.on("error",o=>{r(o)}).on("close",()=>{r(new TypeError("unusable"))}):r(i.errored??new TypeError("unusable"))}else queueMicrotask(()=>{t[k0]={type:e,stream:t,resolve:n,reject:r,length:0,body:[]},t.on("error",function(i){hae(this[k0],i)}).on("close",function(){this[k0].body!==null&&hae(this[k0],new pPe)}),lEt(t[k0])})})}s(rD,"consume");function lEt(t){if(t.body===null)return;let{_readableState:e}=t.stream;if(e.bufferIndex){let n=e.bufferIndex,r=e.buffer.length;for(let i=n;i<r;i++)mae(t,e.buffer[i])}else for(let n of e.buffer)mae(t,n);for(e.endEmitted?dPe(this[k0]):t.stream.on("end",function(){dPe(this[k0])}),t.stream.resume();t.stream.read()!=null;);}s(lEt,"consumeStart");function pae(t,e){if(t.length===0||e===0)return"";let n=t.length===1?t[0]:Buffer.concat(t,e),r=n.length,i=r>2&&n[0]===239&&n[1]===187&&n[2]===191?3:0;return n.utf8Slice(i,r)}s(pae,"chunksDecode");function uPe(t,e){if(t.length===0||e===0)return new Uint8Array(0);if(t.length===1)return new Uint8Array(t[0]);let n=new Uint8Array(Buffer.allocUnsafeSlow(e).buffer),r=0;for(let i=0;i<t.length;++i){let o=t[i];n.set(o,r),r+=o.length}return n}s(uPe,"chunksConcat");function dPe(t){let{type:e,body:n,resolve:r,stream:i,length:o}=t;try{e==="text"?r(pae(n,o)):e==="json"?r(JSON.parse(pae(n,o))):e==="arrayBuffer"?r(uPe(n,o).buffer):e==="blob"?r(new Blob(n,{type:i[hPe]})):e==="bytes"&&r(uPe(n,o)),hae(t)}catch(a){i.destroy(a)}}s(dPe,"consumeEnd");function mae(t,e){t.length+=e.length,t.body.push(e)}s(mae,"consumePush");function hae(t,e){t.body!==null&&(e?t.reject(e):t.resolve(),t.type=null,t.stream=null,t.resolve=null,t.reject=null,t.length=0,t.body=null)}s(hae,"consumeFinish");gPe.exports={Readable:fae,chunksDecode:pae}});var Aae=H((H$n,vPe)=>{f();var cEt=require("node:assert"),{ResponseStatusCodeError:APe}=yo(),{chunksDecode:yPe}=gae(),uEt=128*1024;async function dEt({callback:t,body:e,contentType:n,statusCode:r,statusMessage:i,headers:o}){cEt(e);let a=[],l=0;try{for await(let p of e)if(a.push(p),l+=p.length,l>uEt){a=[],l=0;break}}catch{a=[],l=0}let c=`Response status code ${r}${i?`: ${i}`:""}`;if(r===204||!n||!l){queueMicrotask(()=>t(new APe(c,r,o)));return}let u=Error.stackTraceLimit;Error.stackTraceLimit=0;let d;try{CPe(n)?d=JSON.parse(yPe(a,l)):xPe(n)&&(d=yPe(a,l))}catch{}finally{Error.stackTraceLimit=u}queueMicrotask(()=>t(new APe(c,r,o,d)))}s(dEt,"getResolveErrorBodyCallback");var CPe=s(t=>t.length>15&&t[11]==="/"&&t[0]==="a"&&t[1]==="p"&&t[2]==="p"&&t[3]==="l"&&t[4]==="i"&&t[5]==="c"&&t[6]==="a"&&t[7]==="t"&&t[8]==="i"&&t[9]==="o"&&t[10]==="n"&&t[12]==="j"&&t[13]==="s"&&t[14]==="o"&&t[15]==="n","isContentTypeApplicationJson"),xPe=s(t=>t.length>4&&t[4]==="/"&&t[0]==="t"&&t[1]==="e"&&t[2]==="x"&&t[3]==="t","isContentTypeText");vPe.exports={getResolveErrorBodyCallback:dEt,isContentTypeApplicationJson:CPe,isContentTypeText:xPe}});var IPe=H((V$n,yae)=>{"use strict";f();var fEt=require("node:assert"),{Readable:pEt}=gae(),{InvalidArgumentError:f4,RequestAbortedError:bPe}=yo(),B0=yi(),{getResolveErrorBodyCallback:mEt}=Aae(),{AsyncResource:hEt}=require("node:async_hooks"),hW=class extends hEt{static{s(this,"RequestHandler")}constructor(e,n){if(!e||typeof e!="object")throw new f4("invalid opts");let{signal:r,method:i,opaque:o,body:a,onInfo:l,responseHeaders:c,throwOnError:u,highWaterMark:d}=e;try{if(typeof n!="function")throw new f4("invalid callback");if(d&&(typeof d!="number"||d<0))throw new f4("invalid highWaterMark");if(r&&typeof r.on!="function"&&typeof r.addEventListener!="function")throw new f4("signal must be an EventEmitter or EventTarget");if(i==="CONNECT")throw new f4("invalid method");if(l&&typeof l!="function")throw new f4("invalid onInfo callback");super("UNDICI_REQUEST")}catch(p){throw B0.isStream(a)&&B0.destroy(a.on("error",B0.nop),p),p}this.method=i,this.responseHeaders=c||null,this.opaque=o||null,this.callback=n,this.res=null,this.abort=null,this.body=a,this.trailers={},this.context=null,this.onInfo=l||null,this.throwOnError=u,this.highWaterMark=d,this.signal=r,this.reason=null,this.removeAbortListener=null,B0.isStream(a)&&a.on("error",p=>{this.onError(p)}),this.signal&&(this.signal.aborted?this.reason=this.signal.reason??new bPe:this.removeAbortListener=B0.addAbortListener(this.signal,()=>{this.reason=this.signal.reason??new bPe,this.res?B0.destroy(this.res.on("error",B0.nop),this.reason):this.abort&&this.abort(this.reason),this.removeAbortListener&&(this.res?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}))}onConnect(e,n){if(this.reason){e(this.reason);return}fEt(this.callback),this.abort=e,this.context=n}onHeaders(e,n,r,i){let{callback:o,opaque:a,abort:l,context:c,responseHeaders:u,highWaterMark:d}=this,p=u==="raw"?B0.parseRawHeaders(n):B0.parseHeaders(n);if(e<200){this.onInfo&&this.onInfo({statusCode:e,headers:p});return}let m=u==="raw"?B0.parseHeaders(n):p,h=m["content-type"],g=m["content-length"],y=new pEt({resume:r,abort:l,contentType:h,contentLength:this.method!=="HEAD"&&g?Number(g):null,highWaterMark:d});this.removeAbortListener&&y.on("close",this.removeAbortListener),this.callback=null,this.res=y,o!==null&&(this.throwOnError&&e>=400?this.runInAsyncScope(mEt,null,{callback:o,body:y,contentType:h,statusCode:e,statusMessage:i,headers:p}):this.runInAsyncScope(o,null,null,{statusCode:e,headers:p,trailers:this.trailers,opaque:a,body:y,context:c}))}onData(e){return this.res.push(e)}onComplete(e){B0.parseHeaders(e,this.trailers),this.res.push(null)}onError(e){let{res:n,callback:r,body:i,opaque:o}=this;r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,e,{opaque:o})})),n&&(this.res=null,queueMicrotask(()=>{B0.destroy(n,e)})),i&&(this.body=null,B0.destroy(i,e)),this.removeAbortListener&&(n?.off("close",this.removeAbortListener),this.removeAbortListener(),this.removeAbortListener=null)}};function EPe(t,e){if(e===void 0)return new Promise((n,r)=>{EPe.call(this,t,(i,o)=>i?r(i):n(o))});try{this.dispatch(t,new hW(t,e))}catch(n){if(typeof e!="function")throw n;let r=t?.opaque;queueMicrotask(()=>e(n,{opaque:r}))}}s(EPe,"request");yae.exports=EPe;yae.exports.RequestHandler=hW});var iD=H((Y$n,_Pe)=>{f();var{addAbortListener:gEt}=yi(),{RequestAbortedError:AEt}=yo(),p4=Symbol("kListener"),qg=Symbol("kSignal");function TPe(t){t.abort?t.abort(t[qg]?.reason):t.reason=t[qg]?.reason??new AEt,wPe(t)}s(TPe,"abort");function yEt(t,e){if(t.reason=null,t[qg]=null,t[p4]=null,!!e){if(e.aborted){TPe(t);return}t[qg]=e,t[p4]=()=>{TPe(t)},gEt(t[qg],t[p4])}}s(yEt,"addSignal");function wPe(t){t[qg]&&("removeEventListener"in t[qg]?t[qg].removeEventListener("abort",t[p4]):t[qg].removeListener("abort",t[p4]),t[qg]=null,t[p4]=null)}s(wPe,"removeSignal");_Pe.exports={addSignal:yEt,removeSignal:wPe}});var BPe=H((X$n,kPe)=>{"use strict";f();var CEt=require("node:assert"),{finished:xEt,PassThrough:vEt}=require("node:stream"),{InvalidArgumentError:m4,InvalidReturnValueError:bEt}=yo(),Hm=yi(),{getResolveErrorBodyCallback:EEt}=Aae(),{AsyncResource:IEt}=require("node:async_hooks"),{addSignal:TEt,removeSignal:SPe}=iD(),Cae=class extends IEt{static{s(this,"StreamHandler")}constructor(e,n,r){if(!e||typeof e!="object")throw new m4("invalid opts");let{signal:i,method:o,opaque:a,body:l,onInfo:c,responseHeaders:u,throwOnError:d}=e;try{if(typeof r!="function")throw new m4("invalid callback");if(typeof n!="function")throw new m4("invalid factory");if(i&&typeof i.on!="function"&&typeof i.addEventListener!="function")throw new m4("signal must be an EventEmitter or EventTarget");if(o==="CONNECT")throw new m4("invalid method");if(c&&typeof c!="function")throw new m4("invalid onInfo callback");super("UNDICI_STREAM")}catch(p){throw Hm.isStream(l)&&Hm.destroy(l.on("error",Hm.nop),p),p}this.responseHeaders=u||null,this.opaque=a||null,this.factory=n,this.callback=r,this.res=null,this.abort=null,this.context=null,this.trailers=null,this.body=l,this.onInfo=c||null,this.throwOnError=d||!1,Hm.isStream(l)&&l.on("error",p=>{this.onError(p)}),TEt(this,i)}onConnect(e,n){if(this.reason){e(this.reason);return}CEt(this.callback),this.abort=e,this.context=n}onHeaders(e,n,r,i){let{factory:o,opaque:a,context:l,callback:c,responseHeaders:u}=this,d=u==="raw"?Hm.parseRawHeaders(n):Hm.parseHeaders(n);if(e<200){this.onInfo&&this.onInfo({statusCode:e,headers:d});return}this.factory=null;let p;if(this.throwOnError&&e>=400){let g=(u==="raw"?Hm.parseHeaders(n):d)["content-type"];p=new vEt,this.callback=null,this.runInAsyncScope(EEt,null,{callback:c,body:p,contentType:g,statusCode:e,statusMessage:i,headers:d})}else{if(o===null)return;if(p=this.runInAsyncScope(o,null,{statusCode:e,headers:d,opaque:a,context:l}),!p||typeof p.write!="function"||typeof p.end!="function"||typeof p.on!="function")throw new bEt("expected Writable");xEt(p,{readable:!1},h=>{let{callback:g,res:y,opaque:v,trailers:b,abort:E}=this;this.res=null,(h||!y.readable)&&Hm.destroy(y,h),this.callback=null,this.runInAsyncScope(g,null,h||null,{opaque:v,trailers:b}),h&&E()})}return p.on("drain",r),this.res=p,(p.writableNeedDrain!==void 0?p.writableNeedDrain:p._writableState?.needDrain)!==!0}onData(e){let{res:n}=this;return n?n.write(e):!0}onComplete(e){let{res:n}=this;SPe(this),n&&(this.trailers=Hm.parseHeaders(e),n.end())}onError(e){let{res:n,callback:r,opaque:i,body:o}=this;SPe(this),this.factory=null,n?(this.res=null,Hm.destroy(n,e)):r&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(r,null,e,{opaque:i})})),o&&(this.body=null,Hm.destroy(o,e))}};function RPe(t,e,n){if(n===void 0)return new Promise((r,i)=>{RPe.call(this,t,e,(o,a)=>o?i(o):r(a))});try{this.dispatch(t,new Cae(t,e,n))}catch(r){if(typeof n!="function")throw r;let i=t?.opaque;queueMicrotask(()=>n(r,{opaque:i}))}}s(RPe,"stream");kPe.exports=RPe});var LPe=H((tzn,NPe)=>{"use strict";f();var{Readable:DPe,Duplex:wEt,PassThrough:_Et}=require("node:stream"),{InvalidArgumentError:oD,InvalidReturnValueError:SEt,RequestAbortedError:xae}=yo(),sp=yi(),{AsyncResource:REt}=require("node:async_hooks"),{addSignal:kEt,removeSignal:BEt}=iD(),PPe=require("node:assert"),h4=Symbol("resume"),vae=class extends DPe{static{s(this,"PipelineRequest")}constructor(){super({autoDestroy:!0}),this[h4]=null}_read(){let{[h4]:e}=this;e&&(this[h4]=null,e())}_destroy(e,n){this._read(),n(e)}},bae=class extends DPe{static{s(this,"PipelineResponse")}constructor(e){super({autoDestroy:!0}),this[h4]=e}_read(){this[h4]()}_destroy(e,n){!e&&!this._readableState.endEmitted&&(e=new xae),n(e)}},Eae=class extends REt{static{s(this,"PipelineHandler")}constructor(e,n){if(!e||typeof e!="object")throw new oD("invalid opts");if(typeof n!="function")throw new oD("invalid handler");let{signal:r,method:i,opaque:o,onInfo:a,responseHeaders:l}=e;if(r&&typeof r.on!="function"&&typeof r.addEventListener!="function")throw new oD("signal must be an EventEmitter or EventTarget");if(i==="CONNECT")throw new oD("invalid method");if(a&&typeof a!="function")throw new oD("invalid onInfo callback");super("UNDICI_PIPELINE"),this.opaque=o||null,this.responseHeaders=l||null,this.handler=n,this.abort=null,this.context=null,this.onInfo=a||null,this.req=new vae().on("error",sp.nop),this.ret=new wEt({readableObjectMode:e.objectMode,autoDestroy:!0,read:s(()=>{let{body:c}=this;c?.resume&&c.resume()},"read"),write:s((c,u,d)=>{let{req:p}=this;p.push(c,u)||p._readableState.destroyed?d():p[h4]=d},"write"),destroy:s((c,u)=>{let{body:d,req:p,res:m,ret:h,abort:g}=this;!c&&!h._readableState.endEmitted&&(c=new xae),g&&c&&g(),sp.destroy(d,c),sp.destroy(p,c),sp.destroy(m,c),BEt(this),u(c)},"destroy")}).on("prefinish",()=>{let{req:c}=this;c.push(null)}),this.res=null,kEt(this,r)}onConnect(e,n){let{ret:r,res:i}=this;if(this.reason){e(this.reason);return}PPe(!i,"pipeline cannot be retried"),PPe(!r.destroyed),this.abort=e,this.context=n}onHeaders(e,n,r){let{opaque:i,handler:o,context:a}=this;if(e<200){if(this.onInfo){let c=this.responseHeaders==="raw"?sp.parseRawHeaders(n):sp.parseHeaders(n);this.onInfo({statusCode:e,headers:c})}return}this.res=new bae(r);let l;try{this.handler=null;let c=this.responseHeaders==="raw"?sp.parseRawHeaders(n):sp.parseHeaders(n);l=this.runInAsyncScope(o,null,{statusCode:e,headers:c,opaque:i,body:this.res,context:a})}catch(c){throw this.res.on("error",sp.nop),c}if(!l||typeof l.on!="function")throw new SEt("expected Readable");l.on("data",c=>{let{ret:u,body:d}=this;!u.push(c)&&d.pause&&d.pause()}).on("error",c=>{let{ret:u}=this;sp.destroy(u,c)}).on("end",()=>{let{ret:c}=this;c.push(null)}).on("close",()=>{let{ret:c}=this;c._readableState.ended||sp.destroy(c,new xae)}),this.body=l}onData(e){let{res:n}=this;return n.push(e)}onComplete(e){let{res:n}=this;n.push(null)}onError(e){let{ret:n}=this;this.handler=null,sp.destroy(n,e)}};function PEt(t,e){try{let n=new Eae(t,e);return this.dispatch({...t,body:n.req},n),n.ret}catch(n){return new _Et().destroy(n)}}s(PEt,"pipeline");NPe.exports=PEt});var qPe=H((izn,UPe)=>{"use strict";f();var{InvalidArgumentError:Iae,SocketError:DEt}=yo(),{AsyncResource:NEt}=require("node:async_hooks"),FPe=yi(),{addSignal:LEt,removeSignal:MPe}=iD(),QPe=require("node:assert"),Tae=class extends NEt{static{s(this,"UpgradeHandler")}constructor(e,n){if(!e||typeof e!="object")throw new Iae("invalid opts");if(typeof n!="function")throw new Iae("invalid callback");let{signal:r,opaque:i,responseHeaders:o}=e;if(r&&typeof r.on!="function"&&typeof r.addEventListener!="function")throw new Iae("signal must be an EventEmitter or EventTarget");super("UNDICI_UPGRADE"),this.responseHeaders=o||null,this.opaque=i||null,this.callback=n,this.abort=null,this.context=null,LEt(this,r)}onConnect(e,n){if(this.reason){e(this.reason);return}QPe(this.callback),this.abort=e,this.context=null}onHeaders(){throw new DEt("bad upgrade",null)}onUpgrade(e,n,r){QPe(e===101);let{callback:i,opaque:o,context:a}=this;MPe(this),this.callback=null;let l=this.responseHeaders==="raw"?FPe.parseRawHeaders(n):FPe.parseHeaders(n);this.runInAsyncScope(i,null,null,{headers:l,socket:r,opaque:o,context:a})}onError(e){let{callback:n,opaque:r}=this;MPe(this),n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,e,{opaque:r})}))}};function OPe(t,e){if(e===void 0)return new Promise((n,r)=>{OPe.call(this,t,(i,o)=>i?r(i):n(o))});try{let n=new Tae(t,e);this.dispatch({...t,method:t.method||"GET",upgrade:t.protocol||"Websocket"},n)}catch(n){if(typeof e!="function")throw n;let r=t?.opaque;queueMicrotask(()=>e(n,{opaque:r}))}}s(OPe,"upgrade");UPe.exports=OPe});var VPe=H((azn,jPe)=>{"use strict";f();var FEt=require("node:assert"),{AsyncResource:MEt}=require("node:async_hooks"),{InvalidArgumentError:wae,SocketError:QEt}=yo(),WPe=yi(),{addSignal:OEt,removeSignal:HPe}=iD(),_ae=class extends MEt{static{s(this,"ConnectHandler")}constructor(e,n){if(!e||typeof e!="object")throw new wae("invalid opts");if(typeof n!="function")throw new wae("invalid callback");let{signal:r,opaque:i,responseHeaders:o}=e;if(r&&typeof r.on!="function"&&typeof r.addEventListener!="function")throw new wae("signal must be an EventEmitter or EventTarget");super("UNDICI_CONNECT"),this.opaque=i||null,this.responseHeaders=o||null,this.callback=n,this.abort=null,OEt(this,r)}onConnect(e,n){if(this.reason){e(this.reason);return}FEt(this.callback),this.abort=e,this.context=n}onHeaders(){throw new QEt("bad connect",null)}onUpgrade(e,n,r){let{callback:i,opaque:o,context:a}=this;HPe(this),this.callback=null;let l=n;l!=null&&(l=this.responseHeaders==="raw"?WPe.parseRawHeaders(n):WPe.parseHeaders(n)),this.runInAsyncScope(i,null,null,{statusCode:e,headers:l,socket:r,opaque:o,context:a})}onError(e){let{callback:n,opaque:r}=this;HPe(this),n&&(this.callback=null,queueMicrotask(()=>{this.runInAsyncScope(n,null,e,{opaque:r})}))}};function GPe(t,e){if(e===void 0)return new Promise((n,r)=>{GPe.call(this,t,(i,o)=>i?r(i):n(o))});try{let n=new _ae(t,e);this.dispatch({...t,method:"CONNECT"},n)}catch(n){if(typeof e!="function")throw n;let r=t?.opaque;queueMicrotask(()=>e(n,{opaque:r}))}}s(GPe,"connect");jPe.exports=GPe});var $Pe=H((uzn,g4)=>{"use strict";f();g4.exports.request=IPe();g4.exports.stream=BPe();g4.exports.pipeline=LPe();g4.exports.upgrade=qPe();g4.exports.connect=VPe()});var Rae=H((fzn,zPe)=>{"use strict";f();var{UndiciError:UEt}=yo(),Sae=class t extends UEt{static{s(this,"MockNotMatchedError")}constructor(e){super(e),Error.captureStackTrace(this,t),this.name="MockNotMatchedError",this.message=e||"The request does not match any registered mock dispatches",this.code="UND_MOCK_ERR_MOCK_NOT_MATCHED"}};zPe.exports={MockNotMatchedError:Sae}});var A4=H((hzn,YPe)=>{"use strict";f();YPe.exports={kAgent:Symbol("agent"),kOptions:Symbol("options"),kFactory:Symbol("factory"),kDispatches:Symbol("dispatches"),kDispatchKey:Symbol("dispatch key"),kDefaultHeaders:Symbol("default headers"),kDefaultTrailers:Symbol("default trailers"),kContentLength:Symbol("content length"),kMockAgent:Symbol("mock agent"),kMockAgentSet:Symbol("mock agent set"),kMockAgentGet:Symbol("mock agent get"),kMockDispatch:Symbol("mock dispatch"),kClose:Symbol("close"),kOriginalClose:Symbol("original agent close"),kOrigin:Symbol("origin"),kIsMockActive:Symbol("is mock active"),kNetConnect:Symbol("net connect"),kGetNetConnect:Symbol("get net connect"),kConnected:Symbol("connected")}});var sD=H((Azn,sDe)=>{"use strict";f();var{MockNotMatchedError:k2}=Rae(),{kDispatches:gW,kMockAgent:qEt,kOriginalDispatch:WEt,kOrigin:HEt,kGetNetConnect:GEt}=A4(),{buildURL:jEt}=yi(),{STATUS_CODES:VEt}=require("node:http"),{types:{isPromise:$Et}}=require("node:util");function ny(t,e){return typeof t=="string"?t===e:t instanceof RegExp?t.test(e):typeof t=="function"?t(e)===!0:!1}s(ny,"matchValue");function JPe(t){return Object.fromEntries(Object.entries(t).map(([e,n])=>[e.toLocaleLowerCase(),n]))}s(JPe,"lowerCaseEntries");function XPe(t,e){if(Array.isArray(t)){for(let n=0;n<t.length;n+=2)if(t[n].toLocaleLowerCase()===e.toLocaleLowerCase())return t[n+1];return}else return typeof t.get=="function"?t.get(e):JPe(t)[e.toLocaleLowerCase()]}s(XPe,"getHeaderByName");function Pae(t){let e=t.slice(),n=[];for(let r=0;r<e.length;r+=2)n.push([e[r],e[r+1]]);return Object.fromEntries(n)}s(Pae,"buildHeadersFromArray");function ZPe(t,e){if(typeof t.headers=="function")return Array.isArray(e)&&(e=Pae(e)),t.headers(e?JPe(e):{});if(typeof t.headers>"u")return!0;if(typeof e!="object"||typeof t.headers!="object")return!1;for(let[n,r]of Object.entries(t.headers)){let i=XPe(e,n);if(!ny(r,i))return!1}return!0}s(ZPe,"matchHeaders");function KPe(t){if(typeof t!="string")return t;let e=t.split("?");if(e.length!==2)return t;let n=new URLSearchParams(e.pop());return n.sort(),[...e,n.toString()].join("?")}s(KPe,"safeUrl");function zEt(t,{path:e,method:n,body:r,headers:i}){let o=ny(t.path,e),a=ny(t.method,n),l=typeof t.body<"u"?ny(t.body,r):!0,c=ZPe(t,i);return o&&a&&l&&c}s(zEt,"matchKey");function eDe(t){return Buffer.isBuffer(t)||t instanceof Uint8Array||t instanceof ArrayBuffer?t:typeof t=="object"?JSON.stringify(t):t.toString()}s(eDe,"getResponseData");function tDe(t,e){let n=e.query?jEt(e.path,e.query):e.path,r=typeof n=="string"?KPe(n):n,i=t.filter(({consumed:o})=>!o).filter(({path:o})=>ny(KPe(o),r));if(i.length===0)throw new k2(`Mock dispatch not matched for path '${r}'`);if(i=i.filter(({method:o})=>ny(o,e.method)),i.length===0)throw new k2(`Mock dispatch not matched for method '${e.method}' on path '${r}'`);if(i=i.filter(({body:o})=>typeof o<"u"?ny(o,e.body):!0),i.length===0)throw new k2(`Mock dispatch not matched for body '${e.body}' on path '${r}'`);if(i=i.filter(o=>ZPe(o,e.headers)),i.length===0){let o=typeof e.headers=="object"?JSON.stringify(e.headers):e.headers;throw new k2(`Mock dispatch not matched for headers '${o}' on path '${r}'`)}return i[0]}s(tDe,"getMockDispatch");function YEt(t,e,n){let r={timesInvoked:0,times:1,persist:!1,consumed:!1},i=typeof n=="function"?{callback:n}:{...n},o={...r,...e,pending:!0,data:{error:null,...i}};return t.push(o),o}s(YEt,"addMockDispatch");function kae(t,e){let n=t.findIndex(r=>r.consumed?zEt(r,e):!1);n!==-1&&t.splice(n,1)}s(kae,"deleteMockDispatch");function nDe(t){let{path:e,method:n,body:r,headers:i,query:o}=t;return{path:e,method:n,body:r,headers:i,query:o}}s(nDe,"buildKey");function Bae(t){let e=Object.keys(t),n=[];for(let r=0;r<e.length;++r){let i=e[r],o=t[i],a=Buffer.from(`${i}`);if(Array.isArray(o))for(let l=0;l<o.length;++l)n.push(a,Buffer.from(`${o[l]}`));else n.push(a,Buffer.from(`${o}`))}return n}s(Bae,"generateKeyValues");function rDe(t){return VEt[t]||"unknown"}s(rDe,"getStatusText");async function KEt(t){let e=[];for await(let n of t)e.push(n);return Buffer.concat(e).toString("utf8")}s(KEt,"getResponse");function iDe(t,e){let n=nDe(t),r=tDe(this[gW],n);r.timesInvoked++,r.data.callback&&(r.data={...r.data,...r.data.callback(t)});let{data:{statusCode:i,data:o,headers:a,trailers:l,error:c},delay:u,persist:d}=r,{timesInvoked:p,times:m}=r;if(r.consumed=!d&&p>=m,r.pending=p<m,c!==null)return kae(this[gW],n),e.onError(c),!0;typeof u=="number"&&u>0?setTimeout(()=>{h(this[gW])},u):h(this[gW]);function h(y,v=o){let b=Array.isArray(t.headers)?Pae(t.headers):t.headers,E=typeof v=="function"?v({...t,headers:b}):v;if($Et(E)){E.then(N=>h(y,N));return}let _=eDe(E),k=Bae(a),P=Bae(l);e.onConnect?.(N=>e.onError(N),null),e.onHeaders?.(i,k,g,rDe(i)),e.onData?.(Buffer.from(_)),e.onComplete?.(P),kae(y,n)}s(h,"handleReply");function g(){}return s(g,"resume"),!0}s(iDe,"mockDispatch");function JEt(){let t=this[qEt],e=this[HEt],n=this[WEt];return s(function(i,o){if(t.isMockActive)try{iDe.call(this,i,o)}catch(a){if(a instanceof k2){let l=t[GEt]();if(l===!1)throw new k2(`${a.message}: subsequent request to origin ${e} was not allowed (net.connect disabled)`);if(oDe(l,e))n.call(this,i,o);else throw new k2(`${a.message}: subsequent request to origin ${e} was not allowed (net.connect is not enabled for this origin)`)}else throw a}else n.call(this,i,o)},"dispatch")}s(JEt,"buildMockDispatch");function oDe(t,e){let n=new URL(e);return t===!0?!0:!!(Array.isArray(t)&&t.some(r=>ny(r,n.host)))}s(oDe,"checkNetConnect");function XEt(t){if(t){let{agent:e,...n}=t;return n}}s(XEt,"buildMockOptions");sDe.exports={getResponseData:eDe,getMockDispatch:tDe,addMockDispatch:YEt,deleteMockDispatch:kae,buildKey:nDe,generateKeyValues:Bae,matchValue:ny,getResponse:KEt,getStatusText:rDe,mockDispatch:iDe,buildMockDispatch:JEt,checkNetConnect:oDe,buildMockOptions:XEt,getHeaderByName:XPe,buildHeadersFromArray:Pae}});var Oae=H((xzn,Qae)=>{"use strict";f();var{getResponseData:ZEt,buildKey:eIt,addMockDispatch:Dae}=sD(),{kDispatches:AW,kDispatchKey:yW,kDefaultHeaders:Nae,kDefaultTrailers:Lae,kContentLength:Fae,kMockDispatch:CW}=A4(),{InvalidArgumentError:Wg}=yo(),{buildURL:tIt}=yi(),y4=class{static{s(this,"MockScope")}constructor(e){this[CW]=e}delay(e){if(typeof e!="number"||!Number.isInteger(e)||e<=0)throw new Wg("waitInMs must be a valid integer > 0");return this[CW].delay=e,this}persist(){return this[CW].persist=!0,this}times(e){if(typeof e!="number"||!Number.isInteger(e)||e<=0)throw new Wg("repeatTimes must be a valid integer > 0");return this[CW].times=e,this}},Mae=class{static{s(this,"MockInterceptor")}constructor(e,n){if(typeof e!="object")throw new Wg("opts must be an object");if(typeof e.path>"u")throw new Wg("opts.path must be defined");if(typeof e.method>"u"&&(e.method="GET"),typeof e.path=="string")if(e.query)e.path=tIt(e.path,e.query);else{let r=new URL(e.path,"data://");e.path=r.pathname+r.search}typeof e.method=="string"&&(e.method=e.method.toUpperCase()),this[yW]=eIt(e),this[AW]=n,this[Nae]={},this[Lae]={},this[Fae]=!1}createMockScopeDispatchData({statusCode:e,data:n,responseOptions:r}){let i=ZEt(n),o=this[Fae]?{"content-length":i.length}:{},a={...this[Nae],...o,...r.headers},l={...this[Lae],...r.trailers};return{statusCode:e,data:n,headers:a,trailers:l}}validateReplyParameters(e){if(typeof e.statusCode>"u")throw new Wg("statusCode must be defined");if(typeof e.responseOptions!="object"||e.responseOptions===null)throw new Wg("responseOptions must be an object")}reply(e){if(typeof e=="function"){let o=s(l=>{let c=e(l);if(typeof c!="object"||c===null)throw new Wg("reply options callback must return an object");let u={data:"",responseOptions:{},...c};return this.validateReplyParameters(u),{...this.createMockScopeDispatchData(u)}},"wrappedDefaultsCallback"),a=Dae(this[AW],this[yW],o);return new y4(a)}let n={statusCode:e,data:arguments[1]===void 0?"":arguments[1],responseOptions:arguments[2]===void 0?{}:arguments[2]};this.validateReplyParameters(n);let r=this.createMockScopeDispatchData(n),i=Dae(this[AW],this[yW],r);return new y4(i)}replyWithError(e){if(typeof e>"u")throw new Wg("error must be defined");let n=Dae(this[AW],this[yW],{error:e});return new y4(n)}defaultReplyHeaders(e){if(typeof e>"u")throw new Wg("headers must be defined");return this[Nae]=e,this}defaultReplyTrailers(e){if(typeof e>"u")throw new Wg("trailers must be defined");return this[Lae]=e,this}replyContentLength(){return this[Fae]=!0,this}};Qae.exports.MockInterceptor=Mae;Qae.exports.MockScope=y4});var Wae=H((Ezn,pDe)=>{"use strict";f();var{promisify:nIt}=require("node:util"),rIt=zP(),{buildMockDispatch:iIt}=sD(),{kDispatches:aDe,kMockAgent:lDe,kClose:cDe,kOriginalClose:uDe,kOrigin:dDe,kOriginalDispatch:oIt,kConnected:Uae}=A4(),{MockInterceptor:sIt}=Oae(),fDe=Qs(),{InvalidArgumentError:aIt}=yo(),qae=class extends rIt{static{s(this,"MockClient")}constructor(e,n){if(super(e,n),!n||!n.agent||typeof n.agent.dispatch!="function")throw new aIt("Argument opts.agent must implement Agent");this[lDe]=n.agent,this[dDe]=e,this[aDe]=[],this[Uae]=1,this[oIt]=this.dispatch,this[uDe]=this.close.bind(this),this.dispatch=iIt.call(this),this.close=this[cDe]}get[fDe.kConnected](){return this[Uae]}intercept(e){return new sIt(e,this[aDe])}async[cDe](){await nIt(this[uDe])(),this[Uae]=0,this[lDe][fDe.kClients].delete(this[dDe])}};pDe.exports=qae});var jae=H((wzn,xDe)=>{"use strict";f();var{promisify:lIt}=require("node:util"),cIt=c4(),{buildMockDispatch:uIt}=sD(),{kDispatches:mDe,kMockAgent:hDe,kClose:gDe,kOriginalClose:ADe,kOrigin:yDe,kOriginalDispatch:dIt,kConnected:Hae}=A4(),{MockInterceptor:fIt}=Oae(),CDe=Qs(),{InvalidArgumentError:pIt}=yo(),Gae=class extends cIt{static{s(this,"MockPool")}constructor(e,n){if(super(e,n),!n||!n.agent||typeof n.agent.dispatch!="function")throw new pIt("Argument opts.agent must implement Agent");this[hDe]=n.agent,this[yDe]=e,this[mDe]=[],this[Hae]=1,this[dIt]=this.dispatch,this[ADe]=this.close.bind(this),this.dispatch=uIt.call(this),this.close=this[gDe]}get[CDe.kConnected](){return this[Hae]}intercept(e){return new fIt(e,this[mDe])}async[gDe](){await lIt(this[ADe])(),this[Hae]=0,this[hDe][CDe.kClients].delete(this[yDe])}};xDe.exports=Gae});var bDe=H((kzn,vDe)=>{"use strict";f();var mIt={pronoun:"it",is:"is",was:"was",this:"this"},hIt={pronoun:"they",is:"are",was:"were",this:"these"};vDe.exports=class{static{s(this,"Pluralizer")}constructor(e,n){this.singular=e,this.plural=n}pluralize(e){let n=e===1,r=n?mIt:hIt,i=n?this.singular:this.plural;return{...r,count:e,noun:i}}}});var IDe=H((Nzn,EDe)=>{"use strict";f();var{Transform:gIt}=require("node:stream"),{Console:AIt}=require("node:console"),yIt=process.versions.icu?"\u2705":"Y ",CIt=process.versions.icu?"\u274C":"N ";EDe.exports=class{static{s(this,"PendingInterceptorsFormatter")}constructor({disableColors:e}={}){this.transform=new gIt({transform(n,r,i){i(null,n)}}),this.logger=new AIt({stdout:this.transform,inspectOptions:{colors:!e&&!process.env.CI}})}format(e){let n=e.map(({method:r,path:i,data:{statusCode:o},persist:a,times:l,timesInvoked:c,origin:u})=>({Method:r,Origin:u,Path:i,"Status code":o,Persistent:a?yIt:CIt,Invocations:c,Remaining:a?1/0:l-c}));return this.logger.table(n),this.transform.read().toString()}}});var SDe=H((Mzn,_De)=>{"use strict";f();var{kClients:B2}=Qs(),xIt=u4(),{kAgent:Vae,kMockAgentSet:xW,kMockAgentGet:TDe,kDispatches:$ae,kIsMockActive:vW,kNetConnect:P2,kGetNetConnect:vIt,kOptions:bW,kFactory:EW}=A4(),bIt=Wae(),EIt=jae(),{matchValue:IIt,buildMockOptions:TIt}=sD(),{InvalidArgumentError:wDe,UndiciError:wIt}=yo(),_It=wP(),SIt=bDe(),RIt=IDe(),zae=class extends _It{static{s(this,"MockAgent")}constructor(e){if(super(e),this[P2]=!0,this[vW]=!0,e?.agent&&typeof e.agent.dispatch!="function")throw new wDe("Argument opts.agent must implement Agent");let n=e?.agent?e.agent:new xIt(e);this[Vae]=n,this[B2]=n[B2],this[bW]=TIt(e)}get(e){let n=this[TDe](e);return n||(n=this[EW](e),this[xW](e,n)),n}dispatch(e,n){return this.get(e.origin),this[Vae].dispatch(e,n)}async close(){await this[Vae].close(),this[B2].clear()}deactivate(){this[vW]=!1}activate(){this[vW]=!0}enableNetConnect(e){if(typeof e=="string"||typeof e=="function"||e instanceof RegExp)Array.isArray(this[P2])?this[P2].push(e):this[P2]=[e];else if(typeof e>"u")this[P2]=!0;else throw new wDe("Unsupported matcher. Must be one of String|Function|RegExp.")}disableNetConnect(){this[P2]=!1}get isMockActive(){return this[vW]}[xW](e,n){this[B2].set(e,n)}[EW](e){let n=Object.assign({agent:this},this[bW]);return this[bW]&&this[bW].connections===1?new bIt(e,n):new EIt(e,n)}[TDe](e){let n=this[B2].get(e);if(n)return n;if(typeof e!="string"){let r=this[EW]("http://localhost:9999");return this[xW](e,r),r}for(let[r,i]of Array.from(this[B2]))if(i&&typeof r!="string"&&IIt(r,e)){let o=this[EW](e);return this[xW](e,o),o[$ae]=i[$ae],o}}[vIt](){return this[P2]}pendingInterceptors(){let e=this[B2];return Array.from(e.entries()).flatMap(([n,r])=>r[$ae].map(i=>({...i,origin:n}))).filter(({pending:n})=>n)}assertNoPendingInterceptors({pendingInterceptorsFormatter:e=new RIt}={}){let n=this.pendingInterceptors();if(n.length===0)return;let r=new SIt("interceptor","interceptors").pluralize(n.length);throw new wIt(`
${r.count} ${r.noun} ${r.is} pending:

${e.format(n)}
`.trim())}};_De.exports=zae});var IW=H((Uzn,PDe)=>{"use strict";f();var RDe=Symbol.for("undici.globalDispatcher.1"),{InvalidArgumentError:kIt}=yo(),BIt=u4();BDe()===void 0&&kDe(new BIt);function kDe(t){if(!t||typeof t.dispatch!="function")throw new kIt("Argument agent must implement Agent");Object.defineProperty(globalThis,RDe,{value:t,writable:!0,enumerable:!1,configurable:!1})}s(kDe,"setGlobalDispatcher");function BDe(){return globalThis[RDe]}s(BDe,"getGlobalDispatcher");PDe.exports={setGlobalDispatcher:kDe,getGlobalDispatcher:BDe}});var TW=H((Gzn,DDe)=>{"use strict";f();DDe.exports=class{static{s(this,"DecoratorHandler")}#e;constructor(e){if(typeof e!="object"||e===null)throw new TypeError("handler must be an object");this.#e=e}onConnect(...e){return this.#e.onConnect?.(...e)}onError(...e){return this.#e.onError?.(...e)}onUpgrade(...e){return this.#e.onUpgrade?.(...e)}onResponseStarted(...e){return this.#e.onResponseStarted?.(...e)}onHeaders(...e){return this.#e.onHeaders?.(...e)}onData(...e){return this.#e.onData?.(...e)}onComplete(...e){return this.#e.onComplete?.(...e)}onBodySent(...e){return this.#e.onBodySent?.(...e)}}});var LDe=H(($zn,NDe)=>{"use strict";f();var PIt=nW();NDe.exports=t=>{let e=t?.maxRedirections;return n=>s(function(i,o){let{maxRedirections:a=e,...l}=i;if(!a)return n(i,o);let c=new PIt(n,a,i,o);return n(l,c)},"redirectInterceptor")}});var MDe=H((Kzn,FDe)=>{"use strict";f();var DIt=mW();FDe.exports=t=>e=>s(function(r,i){return e(r,new DIt({...r,retryOptions:{...t,...r.retryOptions}},{handler:i,dispatch:e}))},"retryInterceptor")});var ODe=H((Zzn,QDe)=>{"use strict";f();var NIt=yi(),{InvalidArgumentError:LIt,RequestAbortedError:FIt}=yo(),MIt=TW(),Yae=class extends MIt{static{s(this,"DumpHandler")}#e=1024*1024;#t=null;#i=!1;#r=!1;#n=0;#o=null;#s=null;constructor({maxSize:e},n){if(super(n),e!=null&&(!Number.isFinite(e)||e<1))throw new LIt("maxSize must be a number greater than 0");this.#e=e??this.#e,this.#s=n}onConnect(e){this.#t=e,this.#s.onConnect(this.#a.bind(this))}#a(e){this.#r=!0,this.#o=e}onHeaders(e,n,r,i){let a=NIt.parseHeaders(n)["content-length"];if(a!=null&&a>this.#e)throw new FIt(`Response size (${a}) larger than maxSize (${this.#e})`);return this.#r?!0:this.#s.onHeaders(e,n,r,i)}onError(e){this.#i||(e=this.#o??e,this.#s.onError(e))}onData(e){return this.#n=this.#n+e.length,this.#n>=this.#e&&(this.#i=!0,this.#r?this.#s.onError(this.#o):this.#s.onComplete([])),!0}onComplete(e){if(!this.#i){if(this.#r){this.#s.onError(this.reason);return}this.#s.onComplete(e)}}};function QIt({maxSize:t}={maxSize:1024*1024}){return e=>s(function(r,i){let{dumpMaxSize:o=t}=r,a=new Yae({maxSize:o},i);return e(r,a)},"Intercept")}s(QIt,"createDumpInterceptor");QDe.exports=QIt});var WDe=H((nYn,qDe)=>{"use strict";f();var{isIP:OIt}=require("node:net"),{lookup:UIt}=require("node:dns"),qIt=TW(),{InvalidArgumentError:C4,InformationalError:WIt}=yo(),UDe=Math.pow(2,31)-1,Kae=class{static{s(this,"DNSInstance")}#e=0;#t=0;#i=new Map;dualStack=!0;affinity=null;lookup=null;pick=null;constructor(e){this.#e=e.maxTTL,this.#t=e.maxItems,this.dualStack=e.dualStack,this.affinity=e.affinity,this.lookup=e.lookup??this.#r,this.pick=e.pick??this.#n}get full(){return this.#i.size===this.#t}runLookup(e,n,r){let i=this.#i.get(e.hostname);if(i==null&&this.full){r(null,e.origin);return}let o={affinity:this.affinity,dualStack:this.dualStack,lookup:this.lookup,pick:this.pick,...n.dns,maxTTL:this.#e,maxItems:this.#t};if(i==null)this.lookup(e,o,(a,l)=>{if(a||l==null||l.length===0){r(a??new WIt("No DNS entries found"));return}this.setRecords(e,l);let c=this.#i.get(e.hostname),u=this.pick(e,c,o.affinity),d;typeof u.port=="number"?d=`:${u.port}`:e.port!==""?d=`:${e.port}`:d="",r(null,`${e.protocol}//${u.family===6?`[${u.address}]`:u.address}${d}`)});else{let a=this.pick(e,i,o.affinity);if(a==null){this.#i.delete(e.hostname),this.runLookup(e,n,r);return}let l;typeof a.port=="number"?l=`:${a.port}`:e.port!==""?l=`:${e.port}`:l="",r(null,`${e.protocol}//${a.family===6?`[${a.address}]`:a.address}${l}`)}}#r(e,n,r){UIt(e.hostname,{all:!0,family:this.dualStack===!1?this.affinity:0,order:"ipv4first"},(i,o)=>{if(i)return r(i);let a=new Map;for(let l of o)a.set(`${l.address}:${l.family}`,l);r(null,a.values())})}#n(e,n,r){let i=null,{records:o,offset:a}=n,l;if(this.dualStack?(r==null&&(a==null||a===UDe?(n.offset=0,r=4):(n.offset++,r=(n.offset&1)===1?6:4)),o[r]!=null&&o[r].ips.length>0?l=o[r]:l=o[r===4?6:4]):l=o[r],l==null||l.ips.length===0)return i;l.offset==null||l.offset===UDe?l.offset=0:l.offset++;let c=l.offset%l.ips.length;return i=l.ips[c]??null,i==null?i:Date.now()-i.timestamp>i.ttl?(l.ips.splice(c,1),this.pick(e,n,r)):i}setRecords(e,n){let r=Date.now(),i={records:{4:null,6:null}};for(let o of n){o.timestamp=r,typeof o.ttl=="number"?o.ttl=Math.min(o.ttl,this.#e):o.ttl=this.#e;let a=i.records[o.family]??{ips:[]};a.ips.push(o),i.records[o.family]=a}this.#i.set(e.hostname,i)}getHandler(e,n){return new Jae(this,e,n)}},Jae=class extends qIt{static{s(this,"DNSDispatchHandler")}#e=null;#t=null;#i=null;#r=null;#n=null;constructor(e,{origin:n,handler:r,dispatch:i},o){super(r),this.#n=n,this.#r=r,this.#t={...o},this.#e=e,this.#i=i}onError(e){switch(e.code){case"ETIMEDOUT":case"ECONNREFUSED":{if(this.#e.dualStack){this.#e.runLookup(this.#n,this.#t,(n,r)=>{if(n)return this.#r.onError(n);let i={...this.#t,origin:r};this.#i(i,this)});return}this.#r.onError(e);return}case"ENOTFOUND":this.#e.deleteRecord(this.#n);default:this.#r.onError(e);break}}};qDe.exports=t=>{if(t?.maxTTL!=null&&(typeof t?.maxTTL!="number"||t?.maxTTL<0))throw new C4("Invalid maxTTL. Must be a positive number");if(t?.maxItems!=null&&(typeof t?.maxItems!="number"||t?.maxItems<1))throw new C4("Invalid maxItems. Must be a positive number and greater than zero");if(t?.affinity!=null&&t?.affinity!==4&&t?.affinity!==6)throw new C4("Invalid affinity. Must be either 4 or 6");if(t?.dualStack!=null&&typeof t?.dualStack!="boolean")throw new C4("Invalid dualStack. Must be a boolean");if(t?.lookup!=null&&typeof t?.lookup!="function")throw new C4("Invalid lookup. Must be a function");if(t?.pick!=null&&typeof t?.pick!="function")throw new C4("Invalid pick. Must be a function");let e=t?.dualStack??!0,n;e?n=t?.affinity??null:n=t?.affinity??4;let r={maxTTL:t?.maxTTL??1e4,lookup:t?.lookup??null,pick:t?.pick??null,dualStack:e,affinity:n,maxItems:t?.maxItems??1/0},i=new Kae(r);return o=>s(function(l,c){let u=l.origin.constructor===URL?l.origin:new URL(l.origin);return OIt(u.hostname)!==0?o(l,c):(i.runLookup(u,l,(d,p)=>{if(d)return c.onError(d);let m=null;m={...l,servername:u.hostname,origin:p,headers:{host:u.hostname,...l.headers}},o(m,i.getHandler({origin:u,dispatch:o,handler:c},l))}),!0)},"dnsInterceptor")}});var D2=H((oYn,YDe)=>{"use strict";f();var{kConstruct:HIt}=Qs(),{kEnumerableProperty:x4}=yi(),{iteratorMixin:GIt,isValidHeaderName:aD,isValidHeaderValue:GDe}=R0(),{webidl:eo}=yc(),Xae=require("node:assert"),wW=require("node:util"),el=Symbol("headers map"),P0=Symbol("headers map sorted");function HDe(t){return t===10||t===13||t===9||t===32}s(HDe,"isHTTPWhiteSpaceCharCode");function jDe(t){let e=0,n=t.length;for(;n>e&&HDe(t.charCodeAt(n-1));)--n;for(;n>e&&HDe(t.charCodeAt(e));)++e;return e===0&&n===t.length?t:t.substring(e,n)}s(jDe,"headerValueNormalize");function VDe(t,e){if(Array.isArray(e))for(let n=0;n<e.length;++n){let r=e[n];if(r.length!==2)throw eo.errors.exception({header:"Headers constructor",message:`expected name/value pair to be length 2, found ${r.length}.`});Zae(t,r[0],r[1])}else if(typeof e=="object"&&e!==null){let n=Object.keys(e);for(let r=0;r<n.length;++r)Zae(t,n[r],e[n[r]])}else throw eo.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})}s(VDe,"fill");function Zae(t,e,n){if(n=jDe(n),aD(e)){if(!GDe(n))throw eo.errors.invalidArgument({prefix:"Headers.append",value:n,type:"header value"})}else throw eo.errors.invalidArgument({prefix:"Headers.append",value:e,type:"header name"});if(zDe(t)==="immutable")throw new TypeError("immutable");return ele(t).append(e,n,!1)}s(Zae,"appendHeader");function $De(t,e){return t[0]<e[0]?-1:1}s($De,"compareHeaderName");var _W=class t{static{s(this,"HeadersList")}cookies=null;constructor(e){e instanceof t?(this[el]=new Map(e[el]),this[P0]=e[P0],this.cookies=e.cookies===null?null:[...e.cookies]):(this[el]=new Map(e),this[P0]=null)}contains(e,n){return this[el].has(n?e:e.toLowerCase())}clear(){this[el].clear(),this[P0]=null,this.cookies=null}append(e,n,r){this[P0]=null;let i=r?e:e.toLowerCase(),o=this[el].get(i);if(o){let a=i==="cookie"?"; ":", ";this[el].set(i,{name:o.name,value:`${o.value}${a}${n}`})}else this[el].set(i,{name:e,value:n});i==="set-cookie"&&(this.cookies??=[]).push(n)}set(e,n,r){this[P0]=null;let i=r?e:e.toLowerCase();i==="set-cookie"&&(this.cookies=[n]),this[el].set(i,{name:e,value:n})}delete(e,n){this[P0]=null,n||(e=e.toLowerCase()),e==="set-cookie"&&(this.cookies=null),this[el].delete(e)}get(e,n){return this[el].get(n?e:e.toLowerCase())?.value??null}*[Symbol.iterator](){for(let{0:e,1:{value:n}}of this[el])yield[e,n]}get entries(){let e={};if(this[el].size!==0)for(let{name:n,value:r}of this[el].values())e[n]=r;return e}rawValues(){return this[el].values()}get entriesList(){let e=[];if(this[el].size!==0)for(let{0:n,1:{name:r,value:i}}of this[el])if(n==="set-cookie")for(let o of this.cookies)e.push([r,o]);else e.push([r,i]);return e}toSortedArray(){let e=this[el].size,n=new Array(e);if(e<=32){if(e===0)return n;let r=this[el][Symbol.iterator](),i=r.next().value;n[0]=[i[0],i[1].value],Xae(i[1].value!==null);for(let o=1,a=0,l=0,c=0,u=0,d,p;o<e;++o){for(p=r.next().value,d=n[o]=[p[0],p[1].value],Xae(d[1]!==null),c=0,l=o;c<l;)u=c+(l-c>>1),n[u][0]<=d[0]?c=u+1:l=u;if(o!==u){for(a=o;a>c;)n[a]=n[--a];n[c]=d}}if(!r.next().done)throw new TypeError("Unreachable");return n}else{let r=0;for(let{0:i,1:{value:o}}of this[el])n[r++]=[i,o],Xae(o!==null);return n.sort($De)}}},Gm=class t{static{s(this,"Headers")}#e;#t;constructor(e=void 0){eo.util.markAsUncloneable(this),e!==HIt&&(this.#t=new _W,this.#e="none",e!==void 0&&(e=eo.converters.HeadersInit(e,"Headers contructor","init"),VDe(this,e)))}append(e,n){eo.brandCheck(this,t),eo.argumentLengthCheck(arguments,2,"Headers.append");let r="Headers.append";return e=eo.converters.ByteString(e,r,"name"),n=eo.converters.ByteString(n,r,"value"),Zae(this,e,n)}delete(e){if(eo.brandCheck(this,t),eo.argumentLengthCheck(arguments,1,"Headers.delete"),e=eo.converters.ByteString(e,"Headers.delete","name"),!aD(e))throw eo.errors.invalidArgument({prefix:"Headers.delete",value:e,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.contains(e,!1)&&this.#t.delete(e,!1)}get(e){eo.brandCheck(this,t),eo.argumentLengthCheck(arguments,1,"Headers.get");let n="Headers.get";if(e=eo.converters.ByteString(e,n,"name"),!aD(e))throw eo.errors.invalidArgument({prefix:n,value:e,type:"header name"});return this.#t.get(e,!1)}has(e){eo.brandCheck(this,t),eo.argumentLengthCheck(arguments,1,"Headers.has");let n="Headers.has";if(e=eo.converters.ByteString(e,n,"name"),!aD(e))throw eo.errors.invalidArgument({prefix:n,value:e,type:"header name"});return this.#t.contains(e,!1)}set(e,n){eo.brandCheck(this,t),eo.argumentLengthCheck(arguments,2,"Headers.set");let r="Headers.set";if(e=eo.converters.ByteString(e,r,"name"),n=eo.converters.ByteString(n,r,"value"),n=jDe(n),aD(e)){if(!GDe(n))throw eo.errors.invalidArgument({prefix:r,value:n,type:"header value"})}else throw eo.errors.invalidArgument({prefix:r,value:e,type:"header name"});if(this.#e==="immutable")throw new TypeError("immutable");this.#t.set(e,n,!1)}getSetCookie(){eo.brandCheck(this,t);let e=this.#t.cookies;return e?[...e]:[]}get[P0](){if(this.#t[P0])return this.#t[P0];let e=[],n=this.#t.toSortedArray(),r=this.#t.cookies;if(r===null||r.length===1)return this.#t[P0]=n;for(let i=0;i<n.length;++i){let{0:o,1:a}=n[i];if(o==="set-cookie")for(let l=0;l<r.length;++l)e.push([o,r[l]]);else e.push([o,a])}return this.#t[P0]=e}[wW.inspect.custom](e,n){return n.depth??=e,`Headers ${wW.formatWithOptions(n,this.#t.entries)}`}static getHeadersGuard(e){return e.#e}static setHeadersGuard(e,n){e.#e=n}static getHeadersList(e){return e.#t}static setHeadersList(e,n){e.#t=n}},{getHeadersGuard:zDe,setHeadersGuard:jIt,getHeadersList:ele,setHeadersList:VIt}=Gm;Reflect.deleteProperty(Gm,"getHeadersGuard");Reflect.deleteProperty(Gm,"setHeadersGuard");Reflect.deleteProperty(Gm,"getHeadersList");Reflect.deleteProperty(Gm,"setHeadersList");GIt("Headers",Gm,P0,0,1);Object.defineProperties(Gm.prototype,{append:x4,delete:x4,get:x4,has:x4,set:x4,getSetCookie:x4,[Symbol.toStringTag]:{value:"Headers",configurable:!0},[wW.inspect.custom]:{enumerable:!1}});eo.converters.HeadersInit=function(t,e,n){if(eo.util.Type(t)==="Object"){let r=Reflect.get(t,Symbol.iterator);if(!wW.types.isProxy(t)&&r===Gm.prototype.entries)try{return ele(t).entriesList}catch{}return typeof r=="function"?eo.converters["sequence<sequence<ByteString>>"](t,e,n,r.bind(t)):eo.converters["record<ByteString, ByteString>"](t,e,n)}throw eo.errors.conversionFailed({prefix:"Headers constructor",argument:"Argument 1",types:["sequence<sequence<ByteString>>","record<ByteString, ByteString>"]})};YDe.exports={fill:VDe,compareHeaderName:$De,Headers:Gm,HeadersList:_W,getHeadersGuard:zDe,setHeadersGuard:jIt,setHeadersList:VIt,getHeadersList:ele}});var cD=H((lYn,o9e)=>{"use strict";f();var{Headers:t9e,HeadersList:KDe,fill:$It,getHeadersGuard:zIt,setHeadersGuard:n9e,setHeadersList:r9e}=D2(),{extractBody:JDe,cloneBody:YIt,mixinBody:KIt,hasFinalizationRegistry:JIt,streamRegistry:XIt,bodyUnusable:ZIt}=n4(),tle=yi(),XDe=require("node:util"),{kEnumerableProperty:D0}=tle,{isValidReasonPhrase:e2t,isCancelled:t2t,isAborted:n2t,isBlobLike:r2t,serializeJavascriptValueToJSONString:i2t,isErrorLike:o2t,isomorphicEncode:s2t,environmentSettingsObject:a2t}=R0(),{redirectStatusSet:l2t,nullBodyStatus:c2t}=RP(),{kState:da,kHeaders:ry}=bv(),{webidl:ii}=yc(),{FormData:u2t}=LP(),{URLSerializer:ZDe}=Id(),{kConstruct:RW}=Qs(),nle=require("node:assert"),{types:d2t}=require("node:util"),f2t=new TextEncoder("utf-8"),N2=class t{static{s(this,"Response")}static error(){return lD(kW(),"immutable")}static json(e,n={}){ii.argumentLengthCheck(arguments,1,"Response.json"),n!==null&&(n=ii.converters.ResponseInit(n));let r=f2t.encode(i2t(e)),i=JDe(r),o=lD(v4({}),"response");return e9e(o,n,{body:i[0],type:"application/json"}),o}static redirect(e,n=302){ii.argumentLengthCheck(arguments,1,"Response.redirect"),e=ii.converters.USVString(e),n=ii.converters["unsigned short"](n);let r;try{r=new URL(e,a2t.settingsObject.baseUrl)}catch(a){throw new TypeError(`Failed to parse URL from ${e}`,{cause:a})}if(!l2t.has(n))throw new RangeError(`Invalid status code ${n}`);let i=lD(v4({}),"immutable");i[da].status=n;let o=s2t(ZDe(r));return i[da].headersList.append("location",o,!0),i}constructor(e=null,n={}){if(ii.util.markAsUncloneable(this),e===RW)return;e!==null&&(e=ii.converters.BodyInit(e)),n=ii.converters.ResponseInit(n),this[da]=v4({}),this[ry]=new t9e(RW),n9e(this[ry],"response"),r9e(this[ry],this[da].headersList);let r=null;if(e!=null){let[i,o]=JDe(e);r={body:i,type:o}}e9e(this,n,r)}get type(){return ii.brandCheck(this,t),this[da].type}get url(){ii.brandCheck(this,t);let e=this[da].urlList,n=e[e.length-1]??null;return n===null?"":ZDe(n,!0)}get redirected(){return ii.brandCheck(this,t),this[da].urlList.length>1}get status(){return ii.brandCheck(this,t),this[da].status}get ok(){return ii.brandCheck(this,t),this[da].status>=200&&this[da].status<=299}get statusText(){return ii.brandCheck(this,t),this[da].statusText}get headers(){return ii.brandCheck(this,t),this[ry]}get body(){return ii.brandCheck(this,t),this[da].body?this[da].body.stream:null}get bodyUsed(){return ii.brandCheck(this,t),!!this[da].body&&tle.isDisturbed(this[da].body.stream)}clone(){if(ii.brandCheck(this,t),ZIt(this))throw ii.errors.exception({header:"Response.clone",message:"Body has already been consumed."});let e=rle(this[da]);return lD(e,zIt(this[ry]))}[XDe.inspect.custom](e,n){n.depth===null&&(n.depth=2),n.colors??=!0;let r={status:this.status,statusText:this.statusText,headers:this.headers,body:this.body,bodyUsed:this.bodyUsed,ok:this.ok,redirected:this.redirected,type:this.type,url:this.url};return`Response ${XDe.formatWithOptions(n,r)}`}};KIt(N2);Object.defineProperties(N2.prototype,{type:D0,url:D0,status:D0,ok:D0,redirected:D0,statusText:D0,headers:D0,clone:D0,body:D0,bodyUsed:D0,[Symbol.toStringTag]:{value:"Response",configurable:!0}});Object.defineProperties(N2,{json:D0,redirect:D0,error:D0});function rle(t){if(t.internalResponse)return i9e(rle(t.internalResponse),t.type);let e=v4({...t,body:null});return t.body!=null&&(e.body=YIt(e,t.body)),e}s(rle,"cloneResponse");function v4(t){return{aborted:!1,rangeRequested:!1,timingAllowPassed:!1,requestIncludesCredentials:!1,type:"default",status:200,timingInfo:null,cacheState:"",statusText:"",...t,headersList:t?.headersList?new KDe(t?.headersList):new KDe,urlList:t?.urlList?[...t.urlList]:[]}}s(v4,"makeResponse");function kW(t){let e=o2t(t);return v4({type:"error",status:0,error:e?t:new Error(t&&String(t)),aborted:t&&t.name==="AbortError"})}s(kW,"makeNetworkError");function p2t(t){return t.type==="error"&&t.status===0}s(p2t,"isNetworkError");function SW(t,e){return e={internalResponse:t,...e},new Proxy(t,{get(n,r){return r in e?e[r]:n[r]},set(n,r,i){return nle(!(r in e)),n[r]=i,!0}})}s(SW,"makeFilteredResponse");function i9e(t,e){if(e==="basic")return SW(t,{type:"basic",headersList:t.headersList});if(e==="cors")return SW(t,{type:"cors",headersList:t.headersList});if(e==="opaque")return SW(t,{type:"opaque",urlList:Object.freeze([]),status:0,statusText:"",body:null});if(e==="opaqueredirect")return SW(t,{type:"opaqueredirect",status:0,statusText:"",headersList:[],body:null});nle(!1)}s(i9e,"filterResponse");function m2t(t,e=null){return nle(t2t(t)),n2t(t)?kW(Object.assign(new DOMException("The operation was aborted.","AbortError"),{cause:e})):kW(Object.assign(new DOMException("Request was cancelled."),{cause:e}))}s(m2t,"makeAppropriateNetworkError");function e9e(t,e,n){if(e.status!==null&&(e.status<200||e.status>599))throw new RangeError('init["status"] must be in the range of 200 to 599, inclusive.');if("statusText"in e&&e.statusText!=null&&!e2t(String(e.statusText)))throw new TypeError("Invalid statusText");if("status"in e&&e.status!=null&&(t[da].status=e.status),"statusText"in e&&e.statusText!=null&&(t[da].statusText=e.statusText),"headers"in e&&e.headers!=null&&$It(t[ry],e.headers),n){if(c2t.includes(t.status))throw ii.errors.exception({header:"Response constructor",message:`Invalid response status code ${t.status}`});t[da].body=n.body,n.type!=null&&!t[da].headersList.contains("content-type",!0)&&t[da].headersList.append("content-type",n.type,!0)}}s(e9e,"initializeResponse");function lD(t,e){let n=new N2(RW);return n[da]=t,n[ry]=new t9e(RW),r9e(n[ry],t.headersList),n9e(n[ry],e),JIt&&t.body?.stream&&XIt.register(n,new WeakRef(t.body.stream)),n}s(lD,"fromInnerResponse");ii.converters.ReadableStream=ii.interfaceConverter(ReadableStream);ii.converters.FormData=ii.interfaceConverter(u2t);ii.converters.URLSearchParams=ii.interfaceConverter(URLSearchParams);ii.converters.XMLHttpRequestBodyInit=function(t,e,n){return typeof t=="string"?ii.converters.USVString(t,e,n):r2t(t)?ii.converters.Blob(t,e,n,{strict:!1}):ArrayBuffer.isView(t)||d2t.isArrayBuffer(t)?ii.converters.BufferSource(t,e,n):tle.isFormDataLike(t)?ii.converters.FormData(t,e,n,{strict:!1}):t instanceof URLSearchParams?ii.converters.URLSearchParams(t,e,n):ii.converters.DOMString(t,e,n)};ii.converters.BodyInit=function(t,e,n){return t instanceof ReadableStream?ii.converters.ReadableStream(t,e,n):t?.[Symbol.asyncIterator]?t:ii.converters.XMLHttpRequestBodyInit(t,e,n)};ii.converters.ResponseInit=ii.dictionaryConverter([{key:"status",converter:ii.converters["unsigned short"],defaultValue:s(()=>200,"defaultValue")},{key:"statusText",converter:ii.converters.ByteString,defaultValue:s(()=>"","defaultValue")},{key:"headers",converter:ii.converters.HeadersInit}]);o9e.exports={isNetworkError:p2t,makeNetworkError:kW,makeResponse:v4,makeAppropriateNetworkError:m2t,filterResponse:i9e,Response:N2,cloneResponse:rle,fromInnerResponse:lD}});var c9e=H((dYn,l9e)=>{"use strict";f();var{kConnected:s9e,kSize:a9e}=Qs(),ile=class{static{s(this,"CompatWeakRef")}constructor(e){this.value=e}deref(){return this.value[s9e]===0&&this.value[a9e]===0?void 0:this.value}},ole=class{static{s(this,"CompatFinalizer")}constructor(e){this.finalizer=e}register(e,n){e.on&&e.on("disconnect",()=>{e[s9e]===0&&e[a9e]===0&&this.finalizer(n)})}unregister(e){}};l9e.exports=function(){return process.env.NODE_V8_COVERAGE&&process.version.startsWith("v18")?(process._rawDebug("Using compatibility WeakRef and FinalizationRegistry"),{WeakRef:ile,FinalizationRegistry:ole}):{WeakRef,FinalizationRegistry}}});var b4=H((mYn,I9e)=>{"use strict";f();var{extractBody:h2t,mixinBody:g2t,cloneBody:A2t,bodyUnusable:u9e}=n4(),{Headers:C9e,fill:y2t,HeadersList:NW,setHeadersGuard:ale,getHeadersGuard:C2t,setHeadersList:x9e,getHeadersList:d9e}=D2(),{FinalizationRegistry:x2t}=c9e()(),PW=yi(),f9e=require("node:util"),{isValidHTTPToken:v2t,sameOrigin:p9e,environmentSettingsObject:BW}=R0(),{forbiddenMethodsSet:b2t,corsSafeListedMethodsSet:E2t,referrerPolicy:I2t,requestRedirect:T2t,requestMode:w2t,requestCredentials:_2t,requestCache:S2t,requestDuplex:R2t}=RP(),{kEnumerableProperty:tl,normalizedMethodRecordsBase:k2t,normalizedMethodRecords:B2t}=PW,{kHeaders:N0,kSignal:DW,kState:xs,kDispatcher:sle}=bv(),{webidl:Cr}=yc(),{URLSerializer:P2t}=Id(),{kConstruct:LW}=Qs(),D2t=require("node:assert"),{getMaxListeners:m9e,setMaxListeners:h9e,getEventListeners:N2t,defaultMaxListeners:g9e}=require("node:events"),L2t=Symbol("abortController"),v9e=new x2t(({signal:t,abort:e})=>{t.removeEventListener("abort",e)}),FW=new WeakMap;function A9e(t){return e;function e(){let n=t.deref();if(n!==void 0){v9e.unregister(e),this.removeEventListener("abort",e),n.abort(this.reason);let r=FW.get(n.signal);if(r!==void 0){if(r.size!==0){for(let i of r){let o=i.deref();o!==void 0&&o.abort(this.reason)}r.clear()}FW.delete(n.signal)}}}}s(A9e,"buildAbort");var y9e=!1,Dv=class t{static{s(this,"Request")}constructor(e,n={}){if(Cr.util.markAsUncloneable(this),e===LW)return;let r="Request constructor";Cr.argumentLengthCheck(arguments,1,r),e=Cr.converters.RequestInfo(e,r,"input"),n=Cr.converters.RequestInit(n,r,"init");let i=null,o=null,a=BW.settingsObject.baseUrl,l=null;if(typeof e=="string"){this[sle]=n.dispatcher;let b;try{b=new URL(e,a)}catch(E){throw new TypeError("Failed to parse URL from "+e,{cause:E})}if(b.username||b.password)throw new TypeError("Request cannot be constructed from a URL that includes credentials: "+e);i=MW({urlList:[b]}),o="cors"}else this[sle]=n.dispatcher||e[sle],D2t(e instanceof t),i=e[xs],l=e[DW];let c=BW.settingsObject.origin,u="client";if(i.window?.constructor?.name==="EnvironmentSettingsObject"&&p9e(i.window,c)&&(u=i.window),n.window!=null)throw new TypeError(`'window' option '${u}' must be null`);"window"in n&&(u="no-window"),i=MW({method:i.method,headersList:i.headersList,unsafeRequest:i.unsafeRequest,client:BW.settingsObject,window:u,priority:i.priority,origin:i.origin,referrer:i.referrer,referrerPolicy:i.referrerPolicy,mode:i.mode,credentials:i.credentials,cache:i.cache,redirect:i.redirect,integrity:i.integrity,keepalive:i.keepalive,reloadNavigation:i.reloadNavigation,historyNavigation:i.historyNavigation,urlList:[...i.urlList]});let d=Object.keys(n).length!==0;if(d&&(i.mode==="navigate"&&(i.mode="same-origin"),i.reloadNavigation=!1,i.historyNavigation=!1,i.origin="client",i.referrer="client",i.referrerPolicy="",i.url=i.urlList[i.urlList.length-1],i.urlList=[i.url]),n.referrer!==void 0){let b=n.referrer;if(b==="")i.referrer="no-referrer";else{let E;try{E=new URL(b,a)}catch(_){throw new TypeError(`Referrer "${b}" is not a valid URL.`,{cause:_})}E.protocol==="about:"&&E.hostname==="client"||c&&!p9e(E,BW.settingsObject.baseUrl)?i.referrer="client":i.referrer=E}}n.referrerPolicy!==void 0&&(i.referrerPolicy=n.referrerPolicy);let p;if(n.mode!==void 0?p=n.mode:p=o,p==="navigate")throw Cr.errors.exception({header:"Request constructor",message:"invalid request mode navigate."});if(p!=null&&(i.mode=p),n.credentials!==void 0&&(i.credentials=n.credentials),n.cache!==void 0&&(i.cache=n.cache),i.cache==="only-if-cached"&&i.mode!=="same-origin")throw new TypeError("'only-if-cached' can be set only with 'same-origin' mode");if(n.redirect!==void 0&&(i.redirect=n.redirect),n.integrity!=null&&(i.integrity=String(n.integrity)),n.keepalive!==void 0&&(i.keepalive=!!n.keepalive),n.method!==void 0){let b=n.method,E=B2t[b];if(E!==void 0)i.method=E;else{if(!v2t(b))throw new TypeError(`'${b}' is not a valid HTTP method.`);let _=b.toUpperCase();if(b2t.has(_))throw new TypeError(`'${b}' HTTP method is unsupported.`);b=k2t[_]??b,i.method=b}!y9e&&i.method==="patch"&&(process.emitWarning("Using `patch` is highly likely to result in a `405 Method Not Allowed`. `PATCH` is much more likely to succeed.",{code:"UNDICI-FETCH-patch"}),y9e=!0)}n.signal!==void 0&&(l=n.signal),this[xs]=i;let m=new AbortController;if(this[DW]=m.signal,l!=null){if(!l||typeof l.aborted!="boolean"||typeof l.addEventListener!="function")throw new TypeError("Failed to construct 'Request': member signal is not of type AbortSignal.");if(l.aborted)m.abort(l.reason);else{this[L2t]=m;let b=new WeakRef(m),E=A9e(b);try{(typeof m9e=="function"&&m9e(l)===g9e||N2t(l,"abort").length>=g9e)&&h9e(1500,l)}catch{}PW.addAbortListener(l,E),v9e.register(m,{signal:l,abort:E},E)}}if(this[N0]=new C9e(LW),x9e(this[N0],i.headersList),ale(this[N0],"request"),p==="no-cors"){if(!E2t.has(i.method))throw new TypeError(`'${i.method} is unsupported in no-cors mode.`);ale(this[N0],"request-no-cors")}if(d){let b=d9e(this[N0]),E=n.headers!==void 0?n.headers:new NW(b);if(b.clear(),E instanceof NW){for(let{name:_,value:k}of E.rawValues())b.append(_,k,!1);b.cookies=E.cookies}else y2t(this[N0],E)}let h=e instanceof t?e[xs].body:null;if((n.body!=null||h!=null)&&(i.method==="GET"||i.method==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body.");let g=null;if(n.body!=null){let[b,E]=h2t(n.body,i.keepalive);g=b,E&&!d9e(this[N0]).contains("content-type",!0)&&this[N0].append("content-type",E)}let y=g??h;if(y!=null&&y.source==null){if(g!=null&&n.duplex==null)throw new TypeError("RequestInit: duplex option is required when sending a body.");if(i.mode!=="same-origin"&&i.mode!=="cors")throw new TypeError('If request is made from ReadableStream, mode should be "same-origin" or "cors"');i.useCORSPreflightFlag=!0}let v=y;if(g==null&&h!=null){if(u9e(e))throw new TypeError("Cannot construct a Request with a Request object that has already been used.");let b=new TransformStream;h.stream.pipeThrough(b),v={source:h.source,length:h.length,stream:b.readable}}this[xs].body=v}get method(){return Cr.brandCheck(this,t),this[xs].method}get url(){return Cr.brandCheck(this,t),P2t(this[xs].url)}get headers(){return Cr.brandCheck(this,t),this[N0]}get destination(){return Cr.brandCheck(this,t),this[xs].destination}get referrer(){return Cr.brandCheck(this,t),this[xs].referrer==="no-referrer"?"":this[xs].referrer==="client"?"about:client":this[xs].referrer.toString()}get referrerPolicy(){return Cr.brandCheck(this,t),this[xs].referrerPolicy}get mode(){return Cr.brandCheck(this,t),this[xs].mode}get credentials(){return this[xs].credentials}get cache(){return Cr.brandCheck(this,t),this[xs].cache}get redirect(){return Cr.brandCheck(this,t),this[xs].redirect}get integrity(){return Cr.brandCheck(this,t),this[xs].integrity}get keepalive(){return Cr.brandCheck(this,t),this[xs].keepalive}get isReloadNavigation(){return Cr.brandCheck(this,t),this[xs].reloadNavigation}get isHistoryNavigation(){return Cr.brandCheck(this,t),this[xs].historyNavigation}get signal(){return Cr.brandCheck(this,t),this[DW]}get body(){return Cr.brandCheck(this,t),this[xs].body?this[xs].body.stream:null}get bodyUsed(){return Cr.brandCheck(this,t),!!this[xs].body&&PW.isDisturbed(this[xs].body.stream)}get duplex(){return Cr.brandCheck(this,t),"half"}clone(){if(Cr.brandCheck(this,t),u9e(this))throw new TypeError("unusable");let e=b9e(this[xs]),n=new AbortController;if(this.signal.aborted)n.abort(this.signal.reason);else{let r=FW.get(this.signal);r===void 0&&(r=new Set,FW.set(this.signal,r));let i=new WeakRef(n);r.add(i),PW.addAbortListener(n.signal,A9e(i))}return E9e(e,n.signal,C2t(this[N0]))}[f9e.inspect.custom](e,n){n.depth===null&&(n.depth=2),n.colors??=!0;let r={method:this.method,url:this.url,headers:this.headers,destination:this.destination,referrer:this.referrer,referrerPolicy:this.referrerPolicy,mode:this.mode,credentials:this.credentials,cache:this.cache,redirect:this.redirect,integrity:this.integrity,keepalive:this.keepalive,isReloadNavigation:this.isReloadNavigation,isHistoryNavigation:this.isHistoryNavigation,signal:this.signal};return`Request ${f9e.formatWithOptions(n,r)}`}};g2t(Dv);function MW(t){return{method:t.method??"GET",localURLsOnly:t.localURLsOnly??!1,unsafeRequest:t.unsafeRequest??!1,body:t.body??null,client:t.client??null,reservedClient:t.reservedClient??null,replacesClientId:t.replacesClientId??"",window:t.window??"client",keepalive:t.keepalive??!1,serviceWorkers:t.serviceWorkers??"all",initiator:t.initiator??"",destination:t.destination??"",priority:t.priority??null,origin:t.origin??"client",policyContainer:t.policyContainer??"client",referrer:t.referrer??"client",referrerPolicy:t.referrerPolicy??"",mode:t.mode??"no-cors",useCORSPreflightFlag:t.useCORSPreflightFlag??!1,credentials:t.credentials??"same-origin",useCredentials:t.useCredentials??!1,cache:t.cache??"default",redirect:t.redirect??"follow",integrity:t.integrity??"",cryptoGraphicsNonceMetadata:t.cryptoGraphicsNonceMetadata??"",parserMetadata:t.parserMetadata??"",reloadNavigation:t.reloadNavigation??!1,historyNavigation:t.historyNavigation??!1,userActivation:t.userActivation??!1,taintedOrigin:t.taintedOrigin??!1,redirectCount:t.redirectCount??0,responseTainting:t.responseTainting??"basic",preventNoCacheCacheControlHeaderModification:t.preventNoCacheCacheControlHeaderModification??!1,done:t.done??!1,timingAllowFailed:t.timingAllowFailed??!1,urlList:t.urlList,url:t.urlList[0],headersList:t.headersList?new NW(t.headersList):new NW}}s(MW,"makeRequest");function b9e(t){let e=MW({...t,body:null});return t.body!=null&&(e.body=A2t(e,t.body)),e}s(b9e,"cloneRequest");function E9e(t,e,n){let r=new Dv(LW);return r[xs]=t,r[DW]=e,r[N0]=new C9e(LW),x9e(r[N0],t.headersList),ale(r[N0],n),r}s(E9e,"fromInnerRequest");Object.defineProperties(Dv.prototype,{method:tl,url:tl,headers:tl,redirect:tl,clone:tl,signal:tl,duplex:tl,destination:tl,body:tl,bodyUsed:tl,isHistoryNavigation:tl,isReloadNavigation:tl,keepalive:tl,integrity:tl,cache:tl,credentials:tl,attribute:tl,referrerPolicy:tl,referrer:tl,mode:tl,[Symbol.toStringTag]:{value:"Request",configurable:!0}});Cr.converters.Request=Cr.interfaceConverter(Dv);Cr.converters.RequestInfo=function(t,e,n){return typeof t=="string"?Cr.converters.USVString(t,e,n):t instanceof Dv?Cr.converters.Request(t,e,n):Cr.converters.USVString(t,e,n)};Cr.converters.AbortSignal=Cr.interfaceConverter(AbortSignal);Cr.converters.RequestInit=Cr.dictionaryConverter([{key:"method",converter:Cr.converters.ByteString},{key:"headers",converter:Cr.converters.HeadersInit},{key:"body",converter:Cr.nullableConverter(Cr.converters.BodyInit)},{key:"referrer",converter:Cr.converters.USVString},{key:"referrerPolicy",converter:Cr.converters.DOMString,allowedValues:I2t},{key:"mode",converter:Cr.converters.DOMString,allowedValues:w2t},{key:"credentials",converter:Cr.converters.DOMString,allowedValues:_2t},{key:"cache",converter:Cr.converters.DOMString,allowedValues:S2t},{key:"redirect",converter:Cr.converters.DOMString,allowedValues:T2t},{key:"integrity",converter:Cr.converters.DOMString},{key:"keepalive",converter:Cr.converters.boolean},{key:"signal",converter:Cr.nullableConverter(t=>Cr.converters.AbortSignal(t,"RequestInit","signal",{strict:!1}))},{key:"window",converter:Cr.converters.any},{key:"duplex",converter:Cr.converters.DOMString,allowedValues:R2t},{key:"dispatcher",converter:Cr.converters.any}]);I9e.exports={Request:Dv,makeRequest:MW,fromInnerRequest:E9e,cloneRequest:b9e}});var dD=H((AYn,O9e)=>{"use strict";f();var{makeNetworkError:Do,makeAppropriateNetworkError:QW,filterResponse:lle,makeResponse:OW,fromInnerResponse:F2t}=cD(),{HeadersList:T9e}=D2(),{Request:M2t,cloneRequest:Q2t}=b4(),Nv=require("node:zlib"),{bytesMatch:O2t,makePolicyContainer:U2t,clonePolicyContainer:q2t,requestBadPort:W2t,TAOCheck:H2t,appendRequestOriginHeader:G2t,responseLocationURL:j2t,requestCurrentURL:Hg,setRequestReferrerPolicyOnRedirect:V2t,tryUpgradeRequestToAPotentiallyTrustworthyURL:$2t,createOpaqueTimingInfo:ple,appendFetchMetadata:z2t,corsCheck:Y2t,crossOriginResourcePolicyCheck:K2t,determineRequestsReferrer:J2t,coarsenedSharedCurrentTime:uD,createDeferredPromise:X2t,isBlobLike:Z2t,sameOrigin:fle,isCancelled:L2,isAborted:w9e,isErrorLike:eTt,fullyReadBody:tTt,readableStreamClose:nTt,isomorphicEncode:UW,urlIsLocal:rTt,urlIsHttpHttpsScheme:mle,urlHasHttpsScheme:iTt,clampAndCoarsenConnectionTimingInfo:oTt,simpleRangeHeaderValue:sTt,buildContentRange:aTt,createInflate:lTt,extractMimeType:cTt}=R0(),{kState:k9e,kDispatcher:uTt}=bv(),F2=require("node:assert"),{safelyExtractBody:hle,extractBody:_9e}=n4(),{redirectStatusSet:B9e,nullBodyStatus:P9e,safeMethodsSet:dTt,requestBodyHeader:fTt,subresourceSet:pTt}=RP(),mTt=require("node:events"),{Readable:hTt,pipeline:gTt,finished:ATt}=require("node:stream"),{addAbortListener:yTt,isErrored:CTt,isReadable:qW,bufferToLowerCasedHeaderName:S9e}=yi(),{dataURLProcessor:xTt,serializeAMimeType:vTt,minimizeSupportedMimeType:bTt}=Id(),{getGlobalDispatcher:ETt}=IW(),{webidl:ITt}=yc(),{STATUS_CODES:TTt}=require("node:http"),wTt=["GET","HEAD"],_Tt=typeof __UNDICI_IS_NODE__<"u"||typeof esbuildDetection<"u"?"node":"undici",cle,WW=class extends mTt{static{s(this,"Fetch")}constructor(e){super(),this.dispatcher=e,this.connection=null,this.dump=!1,this.state="ongoing"}terminate(e){this.state==="ongoing"&&(this.state="terminated",this.connection?.destroy(e),this.emit("terminated",e))}abort(e){this.state==="ongoing"&&(this.state="aborted",e||(e=new DOMException("The operation was aborted.","AbortError")),this.serializedAbortReason=e,this.connection?.destroy(e),this.emit("terminated",e))}};function STt(t){D9e(t,"fetch")}s(STt,"handleFetchDone");function RTt(t,e=void 0){ITt.argumentLengthCheck(arguments,1,"globalThis.fetch");let n=X2t(),r;try{r=new M2t(t,e)}catch(d){return n.reject(d),n.promise}let i=r[k9e];if(r.signal.aborted)return ule(n,i,null,r.signal.reason),n.promise;i.client.globalObject?.constructor?.name==="ServiceWorkerGlobalScope"&&(i.serviceWorkers="none");let a=null,l=!1,c=null;return yTt(r.signal,()=>{l=!0,F2(c!=null),c.abort(r.signal.reason);let d=a?.deref();ule(n,i,d,r.signal.reason)}),c=L9e({request:i,processResponseEndOfBody:STt,processResponse:s(d=>{if(!l){if(d.aborted){ule(n,i,a,c.serializedAbortReason);return}if(d.type==="error"){n.reject(new TypeError("fetch failed",{cause:d.error}));return}a=new WeakRef(F2t(d,"immutable")),n.resolve(a.deref()),n=null}},"processResponse"),dispatcher:r[uTt]}),n.promise}s(RTt,"fetch");function D9e(t,e="other"){if(t.type==="error"&&t.aborted||!t.urlList?.length)return;let n=t.urlList[0],r=t.timingInfo,i=t.cacheState;mle(n)&&r!==null&&(t.timingAllowPassed||(r=ple({startTime:r.startTime}),i=""),r.endTime=uD(),t.timingInfo=r,N9e(r,n.href,e,globalThis,i))}s(D9e,"finalizeAndReportTiming");var N9e=performance.markResourceTiming;function ule(t,e,n,r){if(t&&t.reject(r),e.body!=null&&qW(e.body?.stream)&&e.body.stream.cancel(r).catch(o=>{if(o.code!=="ERR_INVALID_STATE")throw o}),n==null)return;let i=n[k9e];i.body!=null&&qW(i.body?.stream)&&i.body.stream.cancel(r).catch(o=>{if(o.code!=="ERR_INVALID_STATE")throw o})}s(ule,"abortFetch");function L9e({request:t,processRequestBodyChunkLength:e,processRequestEndOfBody:n,processResponse:r,processResponseEndOfBody:i,processResponseConsumeBody:o,useParallelQueue:a=!1,dispatcher:l=ETt()}){F2(l);let c=null,u=!1;t.client!=null&&(c=t.client.globalObject,u=t.client.crossOriginIsolatedCapability);let d=uD(u),p=ple({startTime:d}),m={controller:new WW(l),request:t,timingInfo:p,processRequestBodyChunkLength:e,processRequestEndOfBody:n,processResponse:r,processResponseConsumeBody:o,processResponseEndOfBody:i,taskDestination:c,crossOriginIsolatedCapability:u};return F2(!t.body||t.body.stream),t.window==="client"&&(t.window=t.client?.globalObject?.constructor?.name==="Window"?t.client:"no-window"),t.origin==="client"&&(t.origin=t.client.origin),t.policyContainer==="client"&&(t.client!=null?t.policyContainer=q2t(t.client.policyContainer):t.policyContainer=U2t()),t.headersList.contains("accept",!0)||t.headersList.append("accept","*/*",!0),t.headersList.contains("accept-language",!0)||t.headersList.append("accept-language","*",!0),t.priority,pTt.has(t.destination),F9e(m).catch(h=>{m.controller.terminate(h)}),m.controller}s(L9e,"fetching");async function F9e(t,e=!1){let n=t.request,r=null;if(n.localURLsOnly&&!rTt(Hg(n))&&(r=Do("local URLs only")),$2t(n),W2t(n)==="blocked"&&(r=Do("bad port")),n.referrerPolicy===""&&(n.referrerPolicy=n.policyContainer.referrerPolicy),n.referrer!=="no-referrer"&&(n.referrer=J2t(n)),r===null&&(r=await(async()=>{let o=Hg(n);return fle(o,n.url)&&n.responseTainting==="basic"||o.protocol==="data:"||n.mode==="navigate"||n.mode==="websocket"?(n.responseTainting="basic",await R9e(t)):n.mode==="same-origin"?Do('request mode cannot be "same-origin"'):n.mode==="no-cors"?n.redirect!=="follow"?Do('redirect mode cannot be "follow" for "no-cors" request'):(n.responseTainting="opaque",await R9e(t)):mle(Hg(n))?(n.responseTainting="cors",await M9e(t)):Do("URL scheme must be a HTTP(S) scheme")})()),e)return r;r.status!==0&&!r.internalResponse&&(n.responseTainting,n.responseTainting==="basic"?r=lle(r,"basic"):n.responseTainting==="cors"?r=lle(r,"cors"):n.responseTainting==="opaque"?r=lle(r,"opaque"):F2(!1));let i=r.status===0?r:r.internalResponse;if(i.urlList.length===0&&i.urlList.push(...n.urlList),n.timingAllowFailed||(r.timingAllowPassed=!0),r.type==="opaque"&&i.status===206&&i.rangeRequested&&!n.headers.contains("range",!0)&&(r=i=Do()),r.status!==0&&(n.method==="HEAD"||n.method==="CONNECT"||P9e.includes(i.status))&&(i.body=null,t.controller.dump=!0),n.integrity){let o=s(l=>dle(t,Do(l)),"processBodyError");if(n.responseTainting==="opaque"||r.body==null){o(r.error);return}let a=s(l=>{if(!O2t(l,n.integrity)){o("integrity mismatch");return}r.body=hle(l)[0],dle(t,r)},"processBody");await tTt(r.body,a,o)}else dle(t,r)}s(F9e,"mainFetch");function R9e(t){if(L2(t)&&t.request.redirectCount===0)return Promise.resolve(QW(t));let{request:e}=t,{protocol:n}=Hg(e);switch(n){case"about:":return Promise.resolve(Do("about scheme is not supported"));case"blob:":{cle||(cle=require("node:buffer").resolveObjectURL);let r=Hg(e);if(r.search.length!==0)return Promise.resolve(Do("NetworkError when attempting to fetch resource."));let i=cle(r.toString());if(e.method!=="GET"||!Z2t(i))return Promise.resolve(Do("invalid method"));let o=OW(),a=i.size,l=UW(`${a}`),c=i.type;if(e.headersList.contains("range",!0)){o.rangeRequested=!0;let u=e.headersList.get("range",!0),d=sTt(u,!0);if(d==="failure")return Promise.resolve(Do("failed to fetch the data URL"));let{rangeStartValue:p,rangeEndValue:m}=d;if(p===null)p=a-m,m=p+m-1;else{if(p>=a)return Promise.resolve(Do("Range start is greater than the blob's size."));(m===null||m>=a)&&(m=a-1)}let h=i.slice(p,m,c),g=_9e(h);o.body=g[0];let y=UW(`${h.size}`),v=aTt(p,m,a);o.status=206,o.statusText="Partial Content",o.headersList.set("content-length",y,!0),o.headersList.set("content-type",c,!0),o.headersList.set("content-range",v,!0)}else{let u=_9e(i);o.statusText="OK",o.body=u[0],o.headersList.set("content-length",l,!0),o.headersList.set("content-type",c,!0)}return Promise.resolve(o)}case"data:":{let r=Hg(e),i=xTt(r);if(i==="failure")return Promise.resolve(Do("failed to fetch the data URL"));let o=vTt(i.mimeType);return Promise.resolve(OW({statusText:"OK",headersList:[["content-type",{name:"Content-Type",value:o}]],body:hle(i.body)[0]}))}case"file:":return Promise.resolve(Do("not implemented... yet..."));case"http:":case"https:":return M9e(t).catch(r=>Do(r));default:return Promise.resolve(Do("unknown scheme"))}}s(R9e,"schemeFetch");function kTt(t,e){t.request.done=!0,t.processResponseDone!=null&&queueMicrotask(()=>t.processResponseDone(e))}s(kTt,"finalizeResponse");function dle(t,e){let n=t.timingInfo,r=s(()=>{let o=Date.now();t.request.destination==="document"&&(t.controller.fullTimingInfo=n),t.controller.reportTimingSteps=()=>{if(t.request.url.protocol!=="https:")return;n.endTime=o;let l=e.cacheState,c=e.bodyInfo;e.timingAllowPassed||(n=ple(n),l="");let u=0;if(t.request.mode!=="navigator"||!e.hasCrossOriginRedirects){u=e.status;let d=cTt(e.headersList);d!=="failure"&&(c.contentType=bTt(d))}t.request.initiatorType!=null&&N9e(n,t.request.url.href,t.request.initiatorType,globalThis,l,c,u)};let a=s(()=>{t.request.done=!0,t.processResponseEndOfBody!=null&&queueMicrotask(()=>t.processResponseEndOfBody(e)),t.request.initiatorType!=null&&t.controller.reportTimingSteps()},"processResponseEndOfBodyTask");queueMicrotask(()=>a())},"processResponseEndOfBody");t.processResponse!=null&&queueMicrotask(()=>{t.processResponse(e),t.processResponse=null});let i=e.type==="error"?e:e.internalResponse??e;i.body==null?r():ATt(i.body.stream,()=>{r()})}s(dle,"fetchFinale");async function M9e(t){let e=t.request,n=null,r=null,i=t.timingInfo;if(e.serviceWorkers,n===null){if(e.redirect==="follow"&&(e.serviceWorkers="none"),r=n=await Q9e(t),e.responseTainting==="cors"&&Y2t(e,n)==="failure")return Do("cors failure");H2t(e,n)==="failure"&&(e.timingAllowFailed=!0)}return(e.responseTainting==="opaque"||n.type==="opaque")&&K2t(e.origin,e.client,e.destination,r)==="blocked"?Do("blocked"):(B9e.has(r.status)&&(e.redirect!=="manual"&&t.controller.connection.destroy(void 0,!1),e.redirect==="error"?n=Do("unexpected redirect"):e.redirect==="manual"?n=r:e.redirect==="follow"?n=await BTt(t,n):F2(!1)),n.timingInfo=i,n)}s(M9e,"httpFetch");function BTt(t,e){let n=t.request,r=e.internalResponse?e.internalResponse:e,i;try{if(i=j2t(r,Hg(n).hash),i==null)return e}catch(a){return Promise.resolve(Do(a))}if(!mle(i))return Promise.resolve(Do("URL scheme must be a HTTP(S) scheme"));if(n.redirectCount===20)return Promise.resolve(Do("redirect count exceeded"));if(n.redirectCount+=1,n.mode==="cors"&&(i.username||i.password)&&!fle(n,i))return Promise.resolve(Do('cross origin not allowed for request mode "cors"'));if(n.responseTainting==="cors"&&(i.username||i.password))return Promise.resolve(Do('URL cannot contain credentials for request mode "cors"'));if(r.status!==303&&n.body!=null&&n.body.source==null)return Promise.resolve(Do());if([301,302].includes(r.status)&&n.method==="POST"||r.status===303&&!wTt.includes(n.method)){n.method="GET",n.body=null;for(let a of fTt)n.headersList.delete(a)}fle(Hg(n),i)||(n.headersList.delete("authorization",!0),n.headersList.delete("proxy-authorization",!0),n.headersList.delete("cookie",!0),n.headersList.delete("host",!0)),n.body!=null&&(F2(n.body.source!=null),n.body=hle(n.body.source)[0]);let o=t.timingInfo;return o.redirectEndTime=o.postRedirectStartTime=uD(t.crossOriginIsolatedCapability),o.redirectStartTime===0&&(o.redirectStartTime=o.startTime),n.urlList.push(i),V2t(n,r),F9e(t,!0)}s(BTt,"httpRedirectFetch");async function Q9e(t,e=!1,n=!1){let r=t.request,i=null,o=null,a=null,l=null,c=!1;r.window==="no-window"&&r.redirect==="error"?(i=t,o=r):(o=Q2t(r),i={...t},i.request=o);let u=r.credentials==="include"||r.credentials==="same-origin"&&r.responseTainting==="basic",d=o.body?o.body.length:null,p=null;if(o.body==null&&["POST","PUT"].includes(o.method)&&(p="0"),d!=null&&(p=UW(`${d}`)),p!=null&&o.headersList.append("content-length",p,!0),d!=null&&o.keepalive,o.referrer instanceof URL&&o.headersList.append("referer",UW(o.referrer.href),!0),G2t(o),z2t(o),o.headersList.contains("user-agent",!0)||o.headersList.append("user-agent",_Tt),o.cache==="default"&&(o.headersList.contains("if-modified-since",!0)||o.headersList.contains("if-none-match",!0)||o.headersList.contains("if-unmodified-since",!0)||o.headersList.contains("if-match",!0)||o.headersList.contains("if-range",!0))&&(o.cache="no-store"),o.cache==="no-cache"&&!o.preventNoCacheCacheControlHeaderModification&&!o.headersList.contains("cache-control",!0)&&o.headersList.append("cache-control","max-age=0",!0),(o.cache==="no-store"||o.cache==="reload")&&(o.headersList.contains("pragma",!0)||o.headersList.append("pragma","no-cache",!0),o.headersList.contains("cache-control",!0)||o.headersList.append("cache-control","no-cache",!0)),o.headersList.contains("range",!0)&&o.headersList.append("accept-encoding","identity",!0),o.headersList.contains("accept-encoding",!0)||(iTt(Hg(o))?o.headersList.append("accept-encoding","br, gzip, deflate",!0):o.headersList.append("accept-encoding","gzip, deflate",!0)),o.headersList.delete("host",!0),l==null&&(o.cache="no-store"),o.cache!=="no-store"&&o.cache,a==null){if(o.cache==="only-if-cached")return Do("only if cached");let m=await PTt(i,u,n);!dTt.has(o.method)&&m.status>=200&&m.status<=399,c&&m.status,a==null&&(a=m)}if(a.urlList=[...o.urlList],o.headersList.contains("range",!0)&&(a.rangeRequested=!0),a.requestIncludesCredentials=u,a.status===407)return r.window==="no-window"?Do():L2(t)?QW(t):Do("proxy authentication required");if(a.status===421&&!n&&(r.body==null||r.body.source!=null)){if(L2(t))return QW(t);t.controller.connection.destroy(),a=await Q9e(t,e,!0)}return a}s(Q9e,"httpNetworkOrCacheFetch");async function PTt(t,e=!1,n=!1){F2(!t.controller.connection||t.controller.connection.destroyed),t.controller.connection={abort:null,destroyed:!1,destroy(g,y=!0){this.destroyed||(this.destroyed=!0,y&&this.abort?.(g??new DOMException("The operation was aborted.","AbortError")))}};let r=t.request,i=null,o=t.timingInfo;null==null&&(r.cache="no-store");let l=n?"yes":"no";r.mode;let c=null;if(r.body==null&&t.processRequestEndOfBody)queueMicrotask(()=>t.processRequestEndOfBody());else if(r.body!=null){let g=s(async function*(b){L2(t)||(yield b,t.processRequestBodyChunkLength?.(b.byteLength))},"processBodyChunk"),y=s(()=>{L2(t)||t.processRequestEndOfBody&&t.processRequestEndOfBody()},"processEndOfBody"),v=s(b=>{L2(t)||(b.name==="AbortError"?t.controller.abort():t.controller.terminate(b))},"processBodyError");c=async function*(){try{for await(let b of r.body.stream)yield*g(b);y()}catch(b){v(b)}}()}try{let{body:g,status:y,statusText:v,headersList:b,socket:E}=await h({body:c});if(E)i=OW({status:y,statusText:v,headersList:b,socket:E});else{let _=g[Symbol.asyncIterator]();t.controller.next=()=>_.next(),i=OW({status:y,statusText:v,headersList:b})}}catch(g){return g.name==="AbortError"?(t.controller.connection.destroy(),QW(t,g)):Do(g)}let u=s(async()=>{await t.controller.resume()},"pullAlgorithm"),d=s(g=>{L2(t)||t.controller.abort(g)},"cancelAlgorithm"),p=new ReadableStream({async start(g){t.controller.controller=g},async pull(g){await u(g)},async cancel(g){await d(g)},type:"bytes"});i.body={stream:p,source:null,length:null},t.controller.onAborted=m,t.controller.on("terminated",m),t.controller.resume=async()=>{for(;;){let g,y;try{let{done:b,value:E}=await t.controller.next();if(w9e(t))break;g=b?void 0:E}catch(b){t.controller.ended&&!o.encodedBodySize?g=void 0:(g=b,y=!0)}if(g===void 0){nTt(t.controller.controller),kTt(t,i);return}if(o.decodedBodySize+=g?.byteLength??0,y){t.controller.terminate(g);return}let v=new Uint8Array(g);if(v.byteLength&&t.controller.controller.enqueue(v),CTt(p)){t.controller.terminate();return}if(t.controller.controller.desiredSize<=0)return}};function m(g){w9e(t)?(i.aborted=!0,qW(p)&&t.controller.controller.error(t.controller.serializedAbortReason)):qW(p)&&t.controller.controller.error(new TypeError("terminated",{cause:eTt(g)?g:void 0})),t.controller.connection.destroy()}return s(m,"onAborted"),i;function h({body:g}){let y=Hg(r),v=t.controller.dispatcher;return new Promise((b,E)=>v.dispatch({path:y.pathname+y.search,origin:y.origin,method:r.method,body:v.isMockActive?r.body&&(r.body.source||r.body.stream):g,headers:r.headersList.entries,maxRedirections:0,upgrade:r.mode==="websocket"?"websocket":void 0},{body:null,abort:null,onConnect(_){let{connection:k}=t.controller;o.finalConnectionTimingInfo=oTt(void 0,o.postRedirectStartTime,t.crossOriginIsolatedCapability),k.destroyed?_(new DOMException("The operation was aborted.","AbortError")):(t.controller.on("terminated",_),this.abort=k.abort=_),o.finalNetworkRequestStartTime=uD(t.crossOriginIsolatedCapability)},onResponseStarted(){o.finalNetworkResponseStartTime=uD(t.crossOriginIsolatedCapability)},onHeaders(_,k,P,N){if(_<200)return;let U=[],ne="",he=new T9e;for(let ie=0;ie<k.length;ie+=2)he.append(S9e(k[ie]),k[ie+1].toString("latin1"),!0);let ae=he.get("content-encoding",!0);ae&&(U=ae.toLowerCase().split(",").map(ie=>ie.trim())),ne=he.get("location",!0),this.body=new hTt({read:P});let G=[],W=ne&&r.redirect==="follow"&&B9e.has(_);if(U.length!==0&&r.method!=="HEAD"&&r.method!=="CONNECT"&&!P9e.includes(_)&&!W)for(let ie=U.length-1;ie>=0;--ie){let V=U[ie];if(V==="x-gzip"||V==="gzip")G.push(Nv.createGunzip({flush:Nv.constants.Z_SYNC_FLUSH,finishFlush:Nv.constants.Z_SYNC_FLUSH}));else if(V==="deflate")G.push(lTt({flush:Nv.constants.Z_SYNC_FLUSH,finishFlush:Nv.constants.Z_SYNC_FLUSH}));else if(V==="br")G.push(Nv.createBrotliDecompress({flush:Nv.constants.BROTLI_OPERATION_FLUSH,finishFlush:Nv.constants.BROTLI_OPERATION_FLUSH}));else{G.length=0;break}}let ue=this.onError.bind(this);return b({status:_,statusText:N,headersList:he,body:G.length?gTt(this.body,...G,ie=>{ie&&this.onError(ie)}).on("error",ue):this.body.on("error",ue)}),!0},onData(_){if(t.controller.dump)return;let k=_;return o.encodedBodySize+=k.byteLength,this.body.push(k)},onComplete(){this.abort&&t.controller.off("terminated",this.abort),t.controller.onAborted&&t.controller.off("terminated",t.controller.onAborted),t.controller.ended=!0,this.body.push(null)},onError(_){this.abort&&t.controller.off("terminated",this.abort),this.body?.destroy(_),t.controller.terminate(_),E(_)},onUpgrade(_,k,P){if(_!==101)return;let N=new T9e;for(let U=0;U<k.length;U+=2)N.append(S9e(k[U]),k[U+1].toString("latin1"),!0);return b({status:_,statusText:TTt[_],headersList:N,socket:P}),!0}}))}s(h,"dispatch")}s(PTt,"httpNetworkFetch");O9e.exports={fetch:RTt,Fetch:WW,fetching:L9e,finalizeAndReportTiming:D9e}});var gle=H((xYn,U9e)=>{"use strict";f();U9e.exports={kState:Symbol("FileReader state"),kResult:Symbol("FileReader result"),kError:Symbol("FileReader error"),kLastProgressEventFired:Symbol("FileReader last progress event fired timestamp"),kEvents:Symbol("FileReader events"),kAborted:Symbol("FileReader aborted")}});var W9e=H((bYn,q9e)=>{"use strict";f();var{webidl:L0}=yc(),HW=Symbol("ProgressEvent state"),Ale=class t extends Event{static{s(this,"ProgressEvent")}constructor(e,n={}){e=L0.converters.DOMString(e,"ProgressEvent constructor","type"),n=L0.converters.ProgressEventInit(n??{}),super(e,n),this[HW]={lengthComputable:n.lengthComputable,loaded:n.loaded,total:n.total}}get lengthComputable(){return L0.brandCheck(this,t),this[HW].lengthComputable}get loaded(){return L0.brandCheck(this,t),this[HW].loaded}get total(){return L0.brandCheck(this,t),this[HW].total}};L0.converters.ProgressEventInit=L0.dictionaryConverter([{key:"lengthComputable",converter:L0.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"loaded",converter:L0.converters["unsigned long long"],defaultValue:s(()=>0,"defaultValue")},{key:"total",converter:L0.converters["unsigned long long"],defaultValue:s(()=>0,"defaultValue")},{key:"bubbles",converter:L0.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"cancelable",converter:L0.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"composed",converter:L0.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}]);q9e.exports={ProgressEvent:Ale}});var G9e=H((TYn,H9e)=>{"use strict";f();function DTt(t){if(!t)return"failure";switch(t.trim().toLowerCase()){case"unicode-1-1-utf-8":case"unicode11utf8":case"unicode20utf8":case"utf-8":case"utf8":case"x-unicode20utf8":return"UTF-8";case"866":case"cp866":case"csibm866":case"ibm866":return"IBM866";case"csisolatin2":case"iso-8859-2":case"iso-ir-101":case"iso8859-2":case"iso88592":case"iso_8859-2":case"iso_8859-2:1987":case"l2":case"latin2":return"ISO-8859-2";case"csisolatin3":case"iso-8859-3":case"iso-ir-109":case"iso8859-3":case"iso88593":case"iso_8859-3":case"iso_8859-3:1988":case"l3":case"latin3":return"ISO-8859-3";case"csisolatin4":case"iso-8859-4":case"iso-ir-110":case"iso8859-4":case"iso88594":case"iso_8859-4":case"iso_8859-4:1988":case"l4":case"latin4":return"ISO-8859-4";case"csisolatincyrillic":case"cyrillic":case"iso-8859-5":case"iso-ir-144":case"iso8859-5":case"iso88595":case"iso_8859-5":case"iso_8859-5:1988":return"ISO-8859-5";case"arabic":case"asmo-708":case"csiso88596e":case"csiso88596i":case"csisolatinarabic":case"ecma-114":case"iso-8859-6":case"iso-8859-6-e":case"iso-8859-6-i":case"iso-ir-127":case"iso8859-6":case"iso88596":case"iso_8859-6":case"iso_8859-6:1987":return"ISO-8859-6";case"csisolatingreek":case"ecma-118":case"elot_928":case"greek":case"greek8":case"iso-8859-7":case"iso-ir-126":case"iso8859-7":case"iso88597":case"iso_8859-7":case"iso_8859-7:1987":case"sun_eu_greek":return"ISO-8859-7";case"csiso88598e":case"csisolatinhebrew":case"hebrew":case"iso-8859-8":case"iso-8859-8-e":case"iso-ir-138":case"iso8859-8":case"iso88598":case"iso_8859-8":case"iso_8859-8:1988":case"visual":return"ISO-8859-8";case"csiso88598i":case"iso-8859-8-i":case"logical":return"ISO-8859-8-I";case"csisolatin6":case"iso-8859-10":case"iso-ir-157":case"iso8859-10":case"iso885910":case"l6":case"latin6":return"ISO-8859-10";case"iso-8859-13":case"iso8859-13":case"iso885913":return"ISO-8859-13";case"iso-8859-14":case"iso8859-14":case"iso885914":return"ISO-8859-14";case"csisolatin9":case"iso-8859-15":case"iso8859-15":case"iso885915":case"iso_8859-15":case"l9":return"ISO-8859-15";case"iso-8859-16":return"ISO-8859-16";case"cskoi8r":case"koi":case"koi8":case"koi8-r":case"koi8_r":return"KOI8-R";case"koi8-ru":case"koi8-u":return"KOI8-U";case"csmacintosh":case"mac":case"macintosh":case"x-mac-roman":return"macintosh";case"iso-8859-11":case"iso8859-11":case"iso885911":case"tis-620":case"windows-874":return"windows-874";case"cp1250":case"windows-1250":case"x-cp1250":return"windows-1250";case"cp1251":case"windows-1251":case"x-cp1251":return"windows-1251";case"ansi_x3.4-1968":case"ascii":case"cp1252":case"cp819":case"csisolatin1":case"ibm819":case"iso-8859-1":case"iso-ir-100":case"iso8859-1":case"iso88591":case"iso_8859-1":case"iso_8859-1:1987":case"l1":case"latin1":case"us-ascii":case"windows-1252":case"x-cp1252":return"windows-1252";case"cp1253":case"windows-1253":case"x-cp1253":return"windows-1253";case"cp1254":case"csisolatin5":case"iso-8859-9":case"iso-ir-148":case"iso8859-9":case"iso88599":case"iso_8859-9":case"iso_8859-9:1989":case"l5":case"latin5":case"windows-1254":case"x-cp1254":return"windows-1254";case"cp1255":case"windows-1255":case"x-cp1255":return"windows-1255";case"cp1256":case"windows-1256":case"x-cp1256":return"windows-1256";case"cp1257":case"windows-1257":case"x-cp1257":return"windows-1257";case"cp1258":case"windows-1258":case"x-cp1258":return"windows-1258";case"x-mac-cyrillic":case"x-mac-ukrainian":return"x-mac-cyrillic";case"chinese":case"csgb2312":case"csiso58gb231280":case"gb2312":case"gb_2312":case"gb_2312-80":case"gbk":case"iso-ir-58":case"x-gbk":return"GBK";case"gb18030":return"gb18030";case"big5":case"big5-hkscs":case"cn-big5":case"csbig5":case"x-x-big5":return"Big5";case"cseucpkdfmtjapanese":case"euc-jp":case"x-euc-jp":return"EUC-JP";case"csiso2022jp":case"iso-2022-jp":return"ISO-2022-JP";case"csshiftjis":case"ms932":case"ms_kanji":case"shift-jis":case"shift_jis":case"sjis":case"windows-31j":case"x-sjis":return"Shift_JIS";case"cseuckr":case"csksc56011987":case"euc-kr":case"iso-ir-149":case"korean":case"ks_c_5601-1987":case"ks_c_5601-1989":case"ksc5601":case"ksc_5601":case"windows-949":return"EUC-KR";case"csiso2022kr":case"hz-gb-2312":case"iso-2022-cn":case"iso-2022-cn-ext":case"iso-2022-kr":case"replacement":return"replacement";case"unicodefffe":case"utf-16be":return"UTF-16BE";case"csunicode":case"iso-10646-ucs-2":case"ucs-2":case"unicode":case"unicodefeff":case"utf-16":case"utf-16le":return"UTF-16LE";case"x-user-defined":return"x-user-defined";default:return"failure"}}s(DTt,"getEncoding");H9e.exports={getEncoding:DTt}});var X9e=H((SYn,J9e)=>{"use strict";f();var{kState:E4,kError:yle,kResult:j9e,kAborted:fD,kLastProgressEventFired:Cle}=gle(),{ProgressEvent:NTt}=W9e(),{getEncoding:V9e}=G9e(),{serializeAMimeType:LTt,parseMIMEType:$9e}=Id(),{types:FTt}=require("node:util"),{StringDecoder:z9e}=require("string_decoder"),{btoa:Y9e}=require("node:buffer"),MTt={enumerable:!0,writable:!1,configurable:!1};function QTt(t,e,n,r){if(t[E4]==="loading")throw new DOMException("Invalid state","InvalidStateError");t[E4]="loading",t[j9e]=null,t[yle]=null;let o=e.stream().getReader(),a=[],l=o.read(),c=!0;(async()=>{for(;!t[fD];)try{let{done:u,value:d}=await l;if(c&&!t[fD]&&queueMicrotask(()=>{Lv("loadstart",t)}),c=!1,!u&&FTt.isUint8Array(d))a.push(d),(t[Cle]===void 0||Date.now()-t[Cle]>=50)&&!t[fD]&&(t[Cle]=Date.now(),queueMicrotask(()=>{Lv("progress",t)})),l=o.read();else if(u){queueMicrotask(()=>{t[E4]="done";try{let p=OTt(a,n,e.type,r);if(t[fD])return;t[j9e]=p,Lv("load",t)}catch(p){t[yle]=p,Lv("error",t)}t[E4]!=="loading"&&Lv("loadend",t)});break}}catch(u){if(t[fD])return;queueMicrotask(()=>{t[E4]="done",t[yle]=u,Lv("error",t),t[E4]!=="loading"&&Lv("loadend",t)});break}})()}s(QTt,"readOperation");function Lv(t,e){let n=new NTt(t,{bubbles:!1,cancelable:!1});e.dispatchEvent(n)}s(Lv,"fireAProgressEvent");function OTt(t,e,n,r){switch(e){case"DataURL":{let i="data:",o=$9e(n||"application/octet-stream");o!=="failure"&&(i+=LTt(o)),i+=";base64,";let a=new z9e("latin1");for(let l of t)i+=Y9e(a.write(l));return i+=Y9e(a.end()),i}case"Text":{let i="failure";if(r&&(i=V9e(r)),i==="failure"&&n){let o=$9e(n);o!=="failure"&&(i=V9e(o.parameters.get("charset")))}return i==="failure"&&(i="UTF-8"),UTt(t,i)}case"ArrayBuffer":return K9e(t).buffer;case"BinaryString":{let i="",o=new z9e("latin1");for(let a of t)i+=o.write(a);return i+=o.end(),i}}}s(OTt,"packageData");function UTt(t,e){let n=K9e(t),r=qTt(n),i=0;r!==null&&(e=r,i=r==="UTF-8"?3:2);let o=n.slice(i);return new TextDecoder(e).decode(o)}s(UTt,"decode");function qTt(t){let[e,n,r]=t;return e===239&&n===187&&r===191?"UTF-8":e===254&&n===255?"UTF-16BE":e===255&&n===254?"UTF-16LE":null}s(qTt,"BOMSniffing");function K9e(t){let e=t.reduce((r,i)=>r+i.byteLength,0),n=0;return t.reduce((r,i)=>(r.set(i,n),n+=i.byteLength,r),new Uint8Array(e))}s(K9e,"combineByteSequences");J9e.exports={staticPropertyDescriptors:MTt,readOperation:QTt,fireAProgressEvent:Lv}});var n6e=H((BYn,t6e)=>{"use strict";f();var{staticPropertyDescriptors:I4,readOperation:GW,fireAProgressEvent:Z9e}=X9e(),{kState:M2,kError:e6e,kResult:jW,kEvents:Co,kAborted:WTt}=gle(),{webidl:Qo}=yc(),{kEnumerableProperty:_d}=yi(),jm=class t extends EventTarget{static{s(this,"FileReader")}constructor(){super(),this[M2]="empty",this[jW]=null,this[e6e]=null,this[Co]={loadend:null,error:null,abort:null,load:null,progress:null,loadstart:null}}readAsArrayBuffer(e){Qo.brandCheck(this,t),Qo.argumentLengthCheck(arguments,1,"FileReader.readAsArrayBuffer"),e=Qo.converters.Blob(e,{strict:!1}),GW(this,e,"ArrayBuffer")}readAsBinaryString(e){Qo.brandCheck(this,t),Qo.argumentLengthCheck(arguments,1,"FileReader.readAsBinaryString"),e=Qo.converters.Blob(e,{strict:!1}),GW(this,e,"BinaryString")}readAsText(e,n=void 0){Qo.brandCheck(this,t),Qo.argumentLengthCheck(arguments,1,"FileReader.readAsText"),e=Qo.converters.Blob(e,{strict:!1}),n!==void 0&&(n=Qo.converters.DOMString(n,"FileReader.readAsText","encoding")),GW(this,e,"Text",n)}readAsDataURL(e){Qo.brandCheck(this,t),Qo.argumentLengthCheck(arguments,1,"FileReader.readAsDataURL"),e=Qo.converters.Blob(e,{strict:!1}),GW(this,e,"DataURL")}abort(){if(this[M2]==="empty"||this[M2]==="done"){this[jW]=null;return}this[M2]==="loading"&&(this[M2]="done",this[jW]=null),this[WTt]=!0,Z9e("abort",this),this[M2]!=="loading"&&Z9e("loadend",this)}get readyState(){switch(Qo.brandCheck(this,t),this[M2]){case"empty":return this.EMPTY;case"loading":return this.LOADING;case"done":return this.DONE}}get result(){return Qo.brandCheck(this,t),this[jW]}get error(){return Qo.brandCheck(this,t),this[e6e]}get onloadend(){return Qo.brandCheck(this,t),this[Co].loadend}set onloadend(e){Qo.brandCheck(this,t),this[Co].loadend&&this.removeEventListener("loadend",this[Co].loadend),typeof e=="function"?(this[Co].loadend=e,this.addEventListener("loadend",e)):this[Co].loadend=null}get onerror(){return Qo.brandCheck(this,t),this[Co].error}set onerror(e){Qo.brandCheck(this,t),this[Co].error&&this.removeEventListener("error",this[Co].error),typeof e=="function"?(this[Co].error=e,this.addEventListener("error",e)):this[Co].error=null}get onloadstart(){return Qo.brandCheck(this,t),this[Co].loadstart}set onloadstart(e){Qo.brandCheck(this,t),this[Co].loadstart&&this.removeEventListener("loadstart",this[Co].loadstart),typeof e=="function"?(this[Co].loadstart=e,this.addEventListener("loadstart",e)):this[Co].loadstart=null}get onprogress(){return Qo.brandCheck(this,t),this[Co].progress}set onprogress(e){Qo.brandCheck(this,t),this[Co].progress&&this.removeEventListener("progress",this[Co].progress),typeof e=="function"?(this[Co].progress=e,this.addEventListener("progress",e)):this[Co].progress=null}get onload(){return Qo.brandCheck(this,t),this[Co].load}set onload(e){Qo.brandCheck(this,t),this[Co].load&&this.removeEventListener("load",this[Co].load),typeof e=="function"?(this[Co].load=e,this.addEventListener("load",e)):this[Co].load=null}get onabort(){return Qo.brandCheck(this,t),this[Co].abort}set onabort(e){Qo.brandCheck(this,t),this[Co].abort&&this.removeEventListener("abort",this[Co].abort),typeof e=="function"?(this[Co].abort=e,this.addEventListener("abort",e)):this[Co].abort=null}};jm.EMPTY=jm.prototype.EMPTY=0;jm.LOADING=jm.prototype.LOADING=1;jm.DONE=jm.prototype.DONE=2;Object.defineProperties(jm.prototype,{EMPTY:I4,LOADING:I4,DONE:I4,readAsArrayBuffer:_d,readAsBinaryString:_d,readAsText:_d,readAsDataURL:_d,abort:_d,readyState:_d,result:_d,error:_d,onloadstart:_d,onprogress:_d,onload:_d,onabort:_d,onerror:_d,onloadend:_d,[Symbol.toStringTag]:{value:"FileReader",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(jm,{EMPTY:I4,LOADING:I4,DONE:I4});t6e.exports={FileReader:jm}});var VW=H((NYn,r6e)=>{"use strict";f();r6e.exports={kConstruct:Qs().kConstruct}});var s6e=H((FYn,o6e)=>{"use strict";f();var HTt=require("node:assert"),{URLSerializer:i6e}=Id(),{isValidHeaderName:GTt}=R0();function jTt(t,e,n=!1){let r=i6e(t,n),i=i6e(e,n);return r===i}s(jTt,"urlEquals");function VTt(t){HTt(t!==null);let e=[];for(let n of t.split(","))n=n.trim(),GTt(n)&&e.push(n);return e}s(VTt,"getFieldValues");o6e.exports={urlEquals:jTt,getFieldValues:VTt}});var c6e=H((OYn,l6e)=>{"use strict";f();var{kConstruct:$Tt}=VW(),{urlEquals:zTt,getFieldValues:xle}=s6e(),{kEnumerableProperty:Q2,isDisturbed:YTt}=yi(),{webidl:Jn}=yc(),{Response:KTt,cloneResponse:JTt,fromInnerResponse:XTt}=cD(),{Request:iy,fromInnerRequest:ZTt}=b4(),{kState:Vm}=bv(),{fetching:ewt}=dD(),{urlIsHttpHttpsScheme:$W,createDeferredPromise:T4,readAllBytes:twt}=R0(),vle=require("node:assert"),zW=class t{static{s(this,"Cache")}#e;constructor(){arguments[0]!==$Tt&&Jn.illegalConstructor(),Jn.util.markAsUncloneable(this),this.#e=arguments[1]}async match(e,n={}){Jn.brandCheck(this,t);let r="Cache.match";Jn.argumentLengthCheck(arguments,1,r),e=Jn.converters.RequestInfo(e,r,"request"),n=Jn.converters.CacheQueryOptions(n,r,"options");let i=this.#n(e,n,1);if(i.length!==0)return i[0]}async matchAll(e=void 0,n={}){Jn.brandCheck(this,t);let r="Cache.matchAll";return e!==void 0&&(e=Jn.converters.RequestInfo(e,r,"request")),n=Jn.converters.CacheQueryOptions(n,r,"options"),this.#n(e,n)}async add(e){Jn.brandCheck(this,t);let n="Cache.add";Jn.argumentLengthCheck(arguments,1,n),e=Jn.converters.RequestInfo(e,n,"request");let r=[e];return await this.addAll(r)}async addAll(e){Jn.brandCheck(this,t);let n="Cache.addAll";Jn.argumentLengthCheck(arguments,1,n);let r=[],i=[];for(let m of e){if(m===void 0)throw Jn.errors.conversionFailed({prefix:n,argument:"Argument 1",types:["undefined is not allowed"]});if(m=Jn.converters.RequestInfo(m),typeof m=="string")continue;let h=m[Vm];if(!$W(h.url)||h.method!=="GET")throw Jn.errors.exception({header:n,message:"Expected http/s scheme when method is not GET."})}let o=[];for(let m of e){let h=new iy(m)[Vm];if(!$W(h.url))throw Jn.errors.exception({header:n,message:"Expected http/s scheme."});h.initiator="fetch",h.destination="subresource",i.push(h);let g=T4();o.push(ewt({request:h,processResponse(y){if(y.type==="error"||y.status===206||y.status<200||y.status>299)g.reject(Jn.errors.exception({header:"Cache.addAll",message:"Received an invalid status code or the request failed."}));else if(y.headersList.contains("vary")){let v=xle(y.headersList.get("vary"));for(let b of v)if(b==="*"){g.reject(Jn.errors.exception({header:"Cache.addAll",message:"invalid vary field value"}));for(let E of o)E.abort();return}}},processResponseEndOfBody(y){if(y.aborted){g.reject(new DOMException("aborted","AbortError"));return}g.resolve(y)}})),r.push(g.promise)}let l=await Promise.all(r),c=[],u=0;for(let m of l){let h={type:"put",request:i[u],response:m};c.push(h),u++}let d=T4(),p=null;try{this.#t(c)}catch(m){p=m}return queueMicrotask(()=>{p===null?d.resolve(void 0):d.reject(p)}),d.promise}async put(e,n){Jn.brandCheck(this,t);let r="Cache.put";Jn.argumentLengthCheck(arguments,2,r),e=Jn.converters.RequestInfo(e,r,"request"),n=Jn.converters.Response(n,r,"response");let i=null;if(e instanceof iy?i=e[Vm]:i=new iy(e)[Vm],!$W(i.url)||i.method!=="GET")throw Jn.errors.exception({header:r,message:"Expected an http/s scheme when method is not GET"});let o=n[Vm];if(o.status===206)throw Jn.errors.exception({header:r,message:"Got 206 status"});if(o.headersList.contains("vary")){let h=xle(o.headersList.get("vary"));for(let g of h)if(g==="*")throw Jn.errors.exception({header:r,message:"Got * vary field value"})}if(o.body&&(YTt(o.body.stream)||o.body.stream.locked))throw Jn.errors.exception({header:r,message:"Response body is locked or disturbed"});let a=JTt(o),l=T4();if(o.body!=null){let g=o.body.stream.getReader();twt(g).then(l.resolve,l.reject)}else l.resolve(void 0);let c=[],u={type:"put",request:i,response:a};c.push(u);let d=await l.promise;a.body!=null&&(a.body.source=d);let p=T4(),m=null;try{this.#t(c)}catch(h){m=h}return queueMicrotask(()=>{m===null?p.resolve():p.reject(m)}),p.promise}async delete(e,n={}){Jn.brandCheck(this,t);let r="Cache.delete";Jn.argumentLengthCheck(arguments,1,r),e=Jn.converters.RequestInfo(e,r,"request"),n=Jn.converters.CacheQueryOptions(n,r,"options");let i=null;if(e instanceof iy){if(i=e[Vm],i.method!=="GET"&&!n.ignoreMethod)return!1}else vle(typeof e=="string"),i=new iy(e)[Vm];let o=[],a={type:"delete",request:i,options:n};o.push(a);let l=T4(),c=null,u;try{u=this.#t(o)}catch(d){c=d}return queueMicrotask(()=>{c===null?l.resolve(!!u?.length):l.reject(c)}),l.promise}async keys(e=void 0,n={}){Jn.brandCheck(this,t);let r="Cache.keys";e!==void 0&&(e=Jn.converters.RequestInfo(e,r,"request")),n=Jn.converters.CacheQueryOptions(n,r,"options");let i=null;if(e!==void 0)if(e instanceof iy){if(i=e[Vm],i.method!=="GET"&&!n.ignoreMethod)return[]}else typeof e=="string"&&(i=new iy(e)[Vm]);let o=T4(),a=[];if(e===void 0)for(let l of this.#e)a.push(l[0]);else{let l=this.#i(i,n);for(let c of l)a.push(c[0])}return queueMicrotask(()=>{let l=[];for(let c of a){let u=ZTt(c,new AbortController().signal,"immutable");l.push(u)}o.resolve(Object.freeze(l))}),o.promise}#t(e){let n=this.#e,r=[...n],i=[],o=[];try{for(let a of e){if(a.type!=="delete"&&a.type!=="put")throw Jn.errors.exception({header:"Cache.#batchCacheOperations",message:'operation type does not match "delete" or "put"'});if(a.type==="delete"&&a.response!=null)throw Jn.errors.exception({header:"Cache.#batchCacheOperations",message:"delete operation should not have an associated response"});if(this.#i(a.request,a.options,i).length)throw new DOMException("???","InvalidStateError");let l;if(a.type==="delete"){if(l=this.#i(a.request,a.options),l.length===0)return[];for(let c of l){let u=n.indexOf(c);vle(u!==-1),n.splice(u,1)}}else if(a.type==="put"){if(a.response==null)throw Jn.errors.exception({header:"Cache.#batchCacheOperations",message:"put operation should have an associated response"});let c=a.request;if(!$W(c.url))throw Jn.errors.exception({header:"Cache.#batchCacheOperations",message:"expected http or https scheme"});if(c.method!=="GET")throw Jn.errors.exception({header:"Cache.#batchCacheOperations",message:"not get method"});if(a.options!=null)throw Jn.errors.exception({header:"Cache.#batchCacheOperations",message:"options must not be defined"});l=this.#i(a.request);for(let u of l){let d=n.indexOf(u);vle(d!==-1),n.splice(d,1)}n.push([a.request,a.response]),i.push([a.request,a.response])}o.push([a.request,a.response])}return o}catch(a){throw this.#e.length=0,this.#e=r,a}}#i(e,n,r){let i=[],o=r??this.#e;for(let a of o){let[l,c]=a;this.#r(e,l,c,n)&&i.push(a)}return i}#r(e,n,r=null,i){let o=new URL(e.url),a=new URL(n.url);if(i?.ignoreSearch&&(a.search="",o.search=""),!zTt(o,a,!0))return!1;if(r==null||i?.ignoreVary||!r.headersList.contains("vary"))return!0;let l=xle(r.headersList.get("vary"));for(let c of l){if(c==="*")return!1;let u=n.headersList.get(c),d=e.headersList.get(c);if(u!==d)return!1}return!0}#n(e,n,r=1/0){let i=null;if(e!==void 0)if(e instanceof iy){if(i=e[Vm],i.method!=="GET"&&!n.ignoreMethod)return[]}else typeof e=="string"&&(i=new iy(e)[Vm]);let o=[];if(e===void 0)for(let l of this.#e)o.push(l[1]);else{let l=this.#i(i,n);for(let c of l)o.push(c[1])}let a=[];for(let l of o){let c=XTt(l,"immutable");if(a.push(c.clone()),a.length>=r)break}return Object.freeze(a)}};Object.defineProperties(zW.prototype,{[Symbol.toStringTag]:{value:"Cache",configurable:!0},match:Q2,matchAll:Q2,add:Q2,addAll:Q2,put:Q2,delete:Q2,keys:Q2});var a6e=[{key:"ignoreSearch",converter:Jn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"ignoreMethod",converter:Jn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"ignoreVary",converter:Jn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}];Jn.converters.CacheQueryOptions=Jn.dictionaryConverter(a6e);Jn.converters.MultiCacheQueryOptions=Jn.dictionaryConverter([...a6e,{key:"cacheName",converter:Jn.converters.DOMString}]);Jn.converters.Response=Jn.interfaceConverter(KTt);Jn.converters["sequence<RequestInfo>"]=Jn.sequenceConverter(Jn.converters.RequestInfo);l6e.exports={Cache:zW}});var d6e=H((WYn,u6e)=>{"use strict";f();var{kConstruct:pD}=VW(),{Cache:YW}=c6e(),{webidl:eu}=yc(),{kEnumerableProperty:mD}=yi(),KW=class t{static{s(this,"CacheStorage")}#e=new Map;constructor(){arguments[0]!==pD&&eu.illegalConstructor(),eu.util.markAsUncloneable(this)}async match(e,n={}){if(eu.brandCheck(this,t),eu.argumentLengthCheck(arguments,1,"CacheStorage.match"),e=eu.converters.RequestInfo(e),n=eu.converters.MultiCacheQueryOptions(n),n.cacheName!=null){if(this.#e.has(n.cacheName)){let r=this.#e.get(n.cacheName);return await new YW(pD,r).match(e,n)}}else for(let r of this.#e.values()){let o=await new YW(pD,r).match(e,n);if(o!==void 0)return o}}async has(e){eu.brandCheck(this,t);let n="CacheStorage.has";return eu.argumentLengthCheck(arguments,1,n),e=eu.converters.DOMString(e,n,"cacheName"),this.#e.has(e)}async open(e){eu.brandCheck(this,t);let n="CacheStorage.open";if(eu.argumentLengthCheck(arguments,1,n),e=eu.converters.DOMString(e,n,"cacheName"),this.#e.has(e)){let i=this.#e.get(e);return new YW(pD,i)}let r=[];return this.#e.set(e,r),new YW(pD,r)}async delete(e){eu.brandCheck(this,t);let n="CacheStorage.delete";return eu.argumentLengthCheck(arguments,1,n),e=eu.converters.DOMString(e,n,"cacheName"),this.#e.delete(e)}async keys(){return eu.brandCheck(this,t),[...this.#e.keys()]}};Object.defineProperties(KW.prototype,{[Symbol.toStringTag]:{value:"CacheStorage",configurable:!0},match:mD,has:mD,open:mD,delete:mD,keys:mD});u6e.exports={CacheStorage:KW}});var p6e=H((jYn,f6e)=>{"use strict";f();f6e.exports={maxAttributeValueSize:1024,maxNameValuePairSize:4096}});var ble=H(($Yn,y6e)=>{"use strict";f();function nwt(t){for(let e=0;e<t.length;++e){let n=t.charCodeAt(e);if(n>=0&&n<=8||n>=10&&n<=31||n===127)return!0}return!1}s(nwt,"isCTLExcludingHtab");function m6e(t){for(let e=0;e<t.length;++e){let n=t.charCodeAt(e);if(n<33||n>126||n===34||n===40||n===41||n===60||n===62||n===64||n===44||n===59||n===58||n===92||n===47||n===91||n===93||n===63||n===61||n===123||n===125)throw new Error("Invalid cookie name")}}s(m6e,"validateCookieName");function h6e(t){let e=t.length,n=0;if(t[0]==='"'){if(e===1||t[e-1]!=='"')throw new Error("Invalid cookie value");--e,++n}for(;n<e;){let r=t.charCodeAt(n++);if(r<33||r>126||r===34||r===44||r===59||r===92)throw new Error("Invalid cookie value")}}s(h6e,"validateCookieValue");function g6e(t){for(let e=0;e<t.length;++e){let n=t.charCodeAt(e);if(n<32||n===127||n===59)throw new Error("Invalid cookie path")}}s(g6e,"validateCookiePath");function rwt(t){if(t.startsWith("-")||t.endsWith(".")||t.endsWith("-"))throw new Error("Invalid cookie domain")}s(rwt,"validateCookieDomain");var iwt=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],owt=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],JW=Array(61).fill(0).map((t,e)=>e.toString().padStart(2,"0"));function A6e(t){return typeof t=="number"&&(t=new Date(t)),`${iwt[t.getUTCDay()]}, ${JW[t.getUTCDate()]} ${owt[t.getUTCMonth()]} ${t.getUTCFullYear()} ${JW[t.getUTCHours()]}:${JW[t.getUTCMinutes()]}:${JW[t.getUTCSeconds()]} GMT`}s(A6e,"toIMFDate");function swt(t){if(t<0)throw new Error("Invalid cookie max-age")}s(swt,"validateCookieMaxAge");function awt(t){if(t.name.length===0)return null;m6e(t.name),h6e(t.value);let e=[`${t.name}=${t.value}`];t.name.startsWith("__Secure-")&&(t.secure=!0),t.name.startsWith("__Host-")&&(t.secure=!0,t.domain=null,t.path="/"),t.secure&&e.push("Secure"),t.httpOnly&&e.push("HttpOnly"),typeof t.maxAge=="number"&&(swt(t.maxAge),e.push(`Max-Age=${t.maxAge}`)),t.domain&&(rwt(t.domain),e.push(`Domain=${t.domain}`)),t.path&&(g6e(t.path),e.push(`Path=${t.path}`)),t.expires&&t.expires.toString()!=="Invalid Date"&&e.push(`Expires=${A6e(t.expires)}`),t.sameSite&&e.push(`SameSite=${t.sameSite}`);for(let n of t.unparsed){if(!n.includes("="))throw new Error("Invalid unparsed");let[r,...i]=n.split("=");e.push(`${r.trim()}=${i.join("=")}`)}return e.join("; ")}s(awt,"stringify");y6e.exports={isCTLExcludingHtab:nwt,validateCookieName:m6e,validateCookiePath:g6e,validateCookieValue:h6e,toIMFDate:A6e,stringify:awt}});var x6e=H((KYn,C6e)=>{"use strict";f();var{maxNameValuePairSize:lwt,maxAttributeValueSize:cwt}=p6e(),{isCTLExcludingHtab:uwt}=ble(),{collectASequenceOfCodePointsFast:XW}=Id(),dwt=require("node:assert");function fwt(t){if(uwt(t))return null;let e="",n="",r="",i="";if(t.includes(";")){let o={position:0};e=XW(";",t,o),n=t.slice(o.position)}else e=t;if(!e.includes("="))i=e;else{let o={position:0};r=XW("=",e,o),i=e.slice(o.position+1)}return r=r.trim(),i=i.trim(),r.length+i.length>lwt?null:{name:r,value:i,...w4(n)}}s(fwt,"parseSetCookie");function w4(t,e={}){if(t.length===0)return e;dwt(t[0]===";"),t=t.slice(1);let n="";t.includes(";")?(n=XW(";",t,{position:0}),t=t.slice(n.length)):(n=t,t="");let r="",i="";if(n.includes("=")){let a={position:0};r=XW("=",n,a),i=n.slice(a.position+1)}else r=n;if(r=r.trim(),i=i.trim(),i.length>cwt)return w4(t,e);let o=r.toLowerCase();if(o==="expires"){let a=new Date(i);e.expires=a}else if(o==="max-age"){let a=i.charCodeAt(0);if((a<48||a>57)&&i[0]!=="-"||!/^\d+$/.test(i))return w4(t,e);let l=Number(i);e.maxAge=l}else if(o==="domain"){let a=i;a[0]==="."&&(a=a.slice(1)),a=a.toLowerCase(),e.domain=a}else if(o==="path"){let a="";i.length===0||i[0]!=="/"?a="/":a=i,e.path=a}else if(o==="secure")e.secure=!0;else if(o==="httponly")e.httpOnly=!0;else if(o==="samesite"){let a="Default",l=i.toLowerCase();l.includes("none")&&(a="None"),l.includes("strict")&&(a="Strict"),l.includes("lax")&&(a="Lax"),e.sameSite=a}else e.unparsed??=[],e.unparsed.push(`${r}=${i}`);return w4(t,e)}s(w4,"parseUnparsedAttributes");C6e.exports={parseSetCookie:fwt,parseUnparsedAttributes:w4}});var E6e=H((ZYn,b6e)=>{"use strict";f();var{parseSetCookie:pwt}=x6e(),{stringify:mwt}=ble(),{webidl:Qi}=yc(),{Headers:ZW}=D2();function hwt(t){Qi.argumentLengthCheck(arguments,1,"getCookies"),Qi.brandCheck(t,ZW,{strict:!1});let e=t.get("cookie"),n={};if(!e)return n;for(let r of e.split(";")){let[i,...o]=r.split("=");n[i.trim()]=o.join("=")}return n}s(hwt,"getCookies");function gwt(t,e,n){Qi.brandCheck(t,ZW,{strict:!1});let r="deleteCookie";Qi.argumentLengthCheck(arguments,2,r),e=Qi.converters.DOMString(e,r,"name"),n=Qi.converters.DeleteCookieAttributes(n),v6e(t,{name:e,value:"",expires:new Date(0),...n})}s(gwt,"deleteCookie");function Awt(t){Qi.argumentLengthCheck(arguments,1,"getSetCookies"),Qi.brandCheck(t,ZW,{strict:!1});let e=t.getSetCookie();return e?e.map(n=>pwt(n)):[]}s(Awt,"getSetCookies");function v6e(t,e){Qi.argumentLengthCheck(arguments,2,"setCookie"),Qi.brandCheck(t,ZW,{strict:!1}),e=Qi.converters.Cookie(e);let n=mwt(e);n&&t.append("Set-Cookie",n)}s(v6e,"setCookie");Qi.converters.DeleteCookieAttributes=Qi.dictionaryConverter([{converter:Qi.nullableConverter(Qi.converters.DOMString),key:"path",defaultValue:s(()=>null,"defaultValue")},{converter:Qi.nullableConverter(Qi.converters.DOMString),key:"domain",defaultValue:s(()=>null,"defaultValue")}]);Qi.converters.Cookie=Qi.dictionaryConverter([{converter:Qi.converters.DOMString,key:"name"},{converter:Qi.converters.DOMString,key:"value"},{converter:Qi.nullableConverter(t=>typeof t=="number"?Qi.converters["unsigned long long"](t):new Date(t)),key:"expires",defaultValue:s(()=>null,"defaultValue")},{converter:Qi.nullableConverter(Qi.converters["long long"]),key:"maxAge",defaultValue:s(()=>null,"defaultValue")},{converter:Qi.nullableConverter(Qi.converters.DOMString),key:"domain",defaultValue:s(()=>null,"defaultValue")},{converter:Qi.nullableConverter(Qi.converters.DOMString),key:"path",defaultValue:s(()=>null,"defaultValue")},{converter:Qi.nullableConverter(Qi.converters.boolean),key:"secure",defaultValue:s(()=>null,"defaultValue")},{converter:Qi.nullableConverter(Qi.converters.boolean),key:"httpOnly",defaultValue:s(()=>null,"defaultValue")},{converter:Qi.converters.USVString,key:"sameSite",allowedValues:["Strict","Lax","None"]},{converter:Qi.sequenceConverter(Qi.converters.DOMString),key:"unparsed",defaultValue:s(()=>new Array(0),"defaultValue")}]);b6e.exports={getCookies:hwt,deleteCookie:gwt,getSetCookies:Awt,setCookie:v6e}});var S4=H((nKn,T6e)=>{"use strict";f();var{webidl:jn}=yc(),{kEnumerableProperty:Sd}=yi(),{kConstruct:I6e}=Qs(),{MessagePort:ywt}=require("node:worker_threads"),_4=class t extends Event{static{s(this,"MessageEvent")}#e;constructor(e,n={}){if(e===I6e){super(arguments[1],arguments[2]),jn.util.markAsUncloneable(this);return}let r="MessageEvent constructor";jn.argumentLengthCheck(arguments,1,r),e=jn.converters.DOMString(e,r,"type"),n=jn.converters.MessageEventInit(n,r,"eventInitDict"),super(e,n),this.#e=n,jn.util.markAsUncloneable(this)}get data(){return jn.brandCheck(this,t),this.#e.data}get origin(){return jn.brandCheck(this,t),this.#e.origin}get lastEventId(){return jn.brandCheck(this,t),this.#e.lastEventId}get source(){return jn.brandCheck(this,t),this.#e.source}get ports(){return jn.brandCheck(this,t),Object.isFrozen(this.#e.ports)||Object.freeze(this.#e.ports),this.#e.ports}initMessageEvent(e,n=!1,r=!1,i=null,o="",a="",l=null,c=[]){return jn.brandCheck(this,t),jn.argumentLengthCheck(arguments,1,"MessageEvent.initMessageEvent"),new t(e,{bubbles:n,cancelable:r,data:i,origin:o,lastEventId:a,source:l,ports:c})}static createFastMessageEvent(e,n){let r=new t(I6e,e,n);return r.#e=n,r.#e.data??=null,r.#e.origin??="",r.#e.lastEventId??="",r.#e.source??=null,r.#e.ports??=[],r}},{createFastMessageEvent:Cwt}=_4;delete _4.createFastMessageEvent;var eH=class t extends Event{static{s(this,"CloseEvent")}#e;constructor(e,n={}){let r="CloseEvent constructor";jn.argumentLengthCheck(arguments,1,r),e=jn.converters.DOMString(e,r,"type"),n=jn.converters.CloseEventInit(n),super(e,n),this.#e=n,jn.util.markAsUncloneable(this)}get wasClean(){return jn.brandCheck(this,t),this.#e.wasClean}get code(){return jn.brandCheck(this,t),this.#e.code}get reason(){return jn.brandCheck(this,t),this.#e.reason}},tH=class t extends Event{static{s(this,"ErrorEvent")}#e;constructor(e,n){let r="ErrorEvent constructor";jn.argumentLengthCheck(arguments,1,r),super(e,n),jn.util.markAsUncloneable(this),e=jn.converters.DOMString(e,r,"type"),n=jn.converters.ErrorEventInit(n??{}),this.#e=n}get message(){return jn.brandCheck(this,t),this.#e.message}get filename(){return jn.brandCheck(this,t),this.#e.filename}get lineno(){return jn.brandCheck(this,t),this.#e.lineno}get colno(){return jn.brandCheck(this,t),this.#e.colno}get error(){return jn.brandCheck(this,t),this.#e.error}};Object.defineProperties(_4.prototype,{[Symbol.toStringTag]:{value:"MessageEvent",configurable:!0},data:Sd,origin:Sd,lastEventId:Sd,source:Sd,ports:Sd,initMessageEvent:Sd});Object.defineProperties(eH.prototype,{[Symbol.toStringTag]:{value:"CloseEvent",configurable:!0},reason:Sd,code:Sd,wasClean:Sd});Object.defineProperties(tH.prototype,{[Symbol.toStringTag]:{value:"ErrorEvent",configurable:!0},message:Sd,filename:Sd,lineno:Sd,colno:Sd,error:Sd});jn.converters.MessagePort=jn.interfaceConverter(ywt);jn.converters["sequence<MessagePort>"]=jn.sequenceConverter(jn.converters.MessagePort);var Ele=[{key:"bubbles",converter:jn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"cancelable",converter:jn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"composed",converter:jn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")}];jn.converters.MessageEventInit=jn.dictionaryConverter([...Ele,{key:"data",converter:jn.converters.any,defaultValue:s(()=>null,"defaultValue")},{key:"origin",converter:jn.converters.USVString,defaultValue:s(()=>"","defaultValue")},{key:"lastEventId",converter:jn.converters.DOMString,defaultValue:s(()=>"","defaultValue")},{key:"source",converter:jn.nullableConverter(jn.converters.MessagePort),defaultValue:s(()=>null,"defaultValue")},{key:"ports",converter:jn.converters["sequence<MessagePort>"],defaultValue:s(()=>new Array(0),"defaultValue")}]);jn.converters.CloseEventInit=jn.dictionaryConverter([...Ele,{key:"wasClean",converter:jn.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"code",converter:jn.converters["unsigned short"],defaultValue:s(()=>0,"defaultValue")},{key:"reason",converter:jn.converters.USVString,defaultValue:s(()=>"","defaultValue")}]);jn.converters.ErrorEventInit=jn.dictionaryConverter([...Ele,{key:"message",converter:jn.converters.DOMString,defaultValue:s(()=>"","defaultValue")},{key:"filename",converter:jn.converters.USVString,defaultValue:s(()=>"","defaultValue")},{key:"lineno",converter:jn.converters["unsigned long"],defaultValue:s(()=>0,"defaultValue")},{key:"colno",converter:jn.converters["unsigned long"],defaultValue:s(()=>0,"defaultValue")},{key:"error",converter:jn.converters.any}]);T6e.exports={MessageEvent:_4,CloseEvent:eH,ErrorEvent:tH,createFastMessageEvent:Cwt}});var O2=H((oKn,w6e)=>{"use strict";f();var xwt="258EAFA5-E914-47DA-95CA-C5AB0DC85B11",vwt={enumerable:!0,writable:!1,configurable:!1},bwt={CONNECTING:0,OPEN:1,CLOSING:2,CLOSED:3},Ewt={NOT_SENT:0,PROCESSING:1,SENT:2},Iwt={CONTINUATION:0,TEXT:1,BINARY:2,CLOSE:8,PING:9,PONG:10},Twt=2**16-1,wwt={INFO:0,PAYLOADLENGTH_16:2,PAYLOADLENGTH_64:3,READ_DATA:4},_wt=Buffer.allocUnsafe(0),Swt={string:1,typedArray:2,arrayBuffer:3,blob:4};w6e.exports={uid:xwt,sentCloseFrameState:Ewt,staticPropertyDescriptors:vwt,states:bwt,opcodes:Iwt,maxUnsigned16Bit:Twt,parserStates:wwt,emptyBuffer:_wt,sendHints:Swt}});var hD=H((aKn,_6e)=>{"use strict";f();_6e.exports={kWebSocketURL:Symbol("url"),kReadyState:Symbol("ready state"),kController:Symbol("controller"),kResponse:Symbol("response"),kBinaryType:Symbol("binary type"),kSentClose:Symbol("sent close"),kReceivedClose:Symbol("received close"),kByteParser:Symbol("byte parser")}});var yD=H((cKn,F6e)=>{"use strict";f();var{kReadyState:gD,kController:Rwt,kResponse:kwt,kBinaryType:Bwt,kWebSocketURL:Pwt}=hD(),{states:AD,opcodes:Fv}=O2(),{ErrorEvent:Dwt,createFastMessageEvent:Nwt}=S4(),{isUtf8:Lwt}=require("node:buffer"),{collectASequenceOfCodePointsFast:Fwt,removeHTTPWhitespace:S6e}=Id();function Mwt(t){return t[gD]===AD.CONNECTING}s(Mwt,"isConnecting");function Qwt(t){return t[gD]===AD.OPEN}s(Qwt,"isEstablished");function Owt(t){return t[gD]===AD.CLOSING}s(Owt,"isClosing");function Uwt(t){return t[gD]===AD.CLOSED}s(Uwt,"isClosed");function Ile(t,e,n=(i,o)=>new Event(i,o),r={}){let i=n(t,r);e.dispatchEvent(i)}s(Ile,"fireEvent");function qwt(t,e,n){if(t[gD]!==AD.OPEN)return;let r;if(e===Fv.TEXT)try{r=L6e(n)}catch{k6e(t,"Received invalid UTF-8 in text frame.");return}else e===Fv.BINARY&&(t[Bwt]==="blob"?r=new Blob([n]):r=Wwt(n));Ile("message",t,Nwt,{origin:t[Pwt].origin,data:r})}s(qwt,"websocketMessageReceived");function Wwt(t){return t.byteLength===t.buffer.byteLength?t.buffer:t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}s(Wwt,"toArrayBuffer");function Hwt(t){if(t.length===0)return!1;for(let e=0;e<t.length;++e){let n=t.charCodeAt(e);if(n<33||n>126||n===34||n===40||n===41||n===44||n===47||n===58||n===59||n===60||n===61||n===62||n===63||n===64||n===91||n===92||n===93||n===123||n===125)return!1}return!0}s(Hwt,"isValidSubprotocol");function Gwt(t){return t>=1e3&&t<1015?t!==1004&&t!==1005&&t!==1006:t>=3e3&&t<=4999}s(Gwt,"isValidStatusCode");function k6e(t,e){let{[Rwt]:n,[kwt]:r}=t;n.abort(),r?.socket&&!r.socket.destroyed&&r.socket.destroy(),e&&Ile("error",t,(i,o)=>new Dwt(i,o),{error:new Error(e),message:e})}s(k6e,"failWebsocketConnection");function B6e(t){return t===Fv.CLOSE||t===Fv.PING||t===Fv.PONG}s(B6e,"isControlFrame");function P6e(t){return t===Fv.CONTINUATION}s(P6e,"isContinuationFrame");function D6e(t){return t===Fv.TEXT||t===Fv.BINARY}s(D6e,"isTextBinaryFrame");function jwt(t){return D6e(t)||P6e(t)||B6e(t)}s(jwt,"isValidOpcode");function Vwt(t){let e={position:0},n=new Map;for(;e.position<t.length;){let r=Fwt(";",t,e),[i,o=""]=r.split("=");n.set(S6e(i,!0,!1),S6e(o,!1,!0)),e.position++}return n}s(Vwt,"parseExtensions");function $wt(t){for(let e=0;e<t.length;e++){let n=t.charCodeAt(e);if(n<48||n>57)return!1}return!0}s($wt,"isValidClientWindowBits");var N6e=typeof process.versions.icu=="string",R6e=N6e?new TextDecoder("utf-8",{fatal:!0}):void 0,L6e=N6e?R6e.decode.bind(R6e):function(t){if(Lwt(t))return t.toString("utf-8");throw new TypeError("Invalid utf-8 received.")};F6e.exports={isConnecting:Mwt,isEstablished:Qwt,isClosing:Owt,isClosed:Uwt,fireEvent:Ile,isValidSubprotocol:Hwt,isValidStatusCode:Gwt,failWebsocketConnection:k6e,websocketMessageReceived:qwt,utf8Decode:L6e,isControlFrame:B6e,isContinuationFrame:P6e,isTextBinaryFrame:D6e,isValidOpcode:jwt,parseExtensions:Vwt,isValidClientWindowBits:$wt}});var rH=H((fKn,M6e)=>{"use strict";f();var{maxUnsigned16Bit:zwt}=O2(),nH=16386,Tle,CD=null,R4=nH;try{Tle=require("node:crypto")}catch{Tle={randomFillSync:s(function(e,n,r){for(let i=0;i<e.length;++i)e[i]=Math.random()*255|0;return e},"randomFillSync")}}function Ywt(){return R4===nH&&(R4=0,Tle.randomFillSync(CD??=Buffer.allocUnsafe(nH),0,nH)),[CD[R4++],CD[R4++],CD[R4++],CD[R4++]]}s(Ywt,"generateMask");var wle=class{static{s(this,"WebsocketFrameSend")}constructor(e){this.frameData=e}createFrame(e){let n=this.frameData,r=Ywt(),i=n?.byteLength??0,o=i,a=6;i>zwt?(a+=8,o=127):i>125&&(a+=2,o=126);let l=Buffer.allocUnsafe(i+a);l[0]=l[1]=0,l[0]|=128,l[0]=(l[0]&240)+e;l[a-4]=r[0],l[a-3]=r[1],l[a-2]=r[2],l[a-1]=r[3],l[1]=o,o===126?l.writeUInt16BE(i,2):o===127&&(l[2]=l[3]=0,l.writeUIntBE(i,4,6)),l[1]|=128;for(let c=0;c<i;++c)l[a+c]=n[c]^r[c&3];return l}};M6e.exports={WebsocketFrameSend:wle}});var Sle=H((hKn,G6e)=>{"use strict";f();var{uid:Kwt,states:xD,sentCloseFrameState:iH,emptyBuffer:Jwt,opcodes:Xwt}=O2(),{kReadyState:vD,kSentClose:oH,kByteParser:O6e,kReceivedClose:Q6e,kResponse:U6e}=hD(),{fireEvent:Zwt,failWebsocketConnection:Mv,isClosing:e_t,isClosed:t_t,isEstablished:n_t,parseExtensions:r_t}=yD(),{channels:k4}=H5(),{CloseEvent:i_t}=S4(),{makeRequest:o_t}=b4(),{fetching:s_t}=dD(),{Headers:a_t,getHeadersList:l_t}=D2(),{getDecodeSplit:c_t}=R0(),{WebsocketFrameSend:u_t}=rH(),_le;try{_le=require("node:crypto")}catch{}function d_t(t,e,n,r,i,o){let a=t;a.protocol=t.protocol==="ws:"?"http:":"https:";let l=o_t({urlList:[a],client:n,serviceWorkers:"none",referrer:"no-referrer",mode:"websocket",credentials:"include",cache:"no-store",redirect:"error"});if(o.headers){let p=l_t(new a_t(o.headers));l.headersList=p}let c=_le.randomBytes(16).toString("base64");l.headersList.append("sec-websocket-key",c),l.headersList.append("sec-websocket-version","13");for(let p of e)l.headersList.append("sec-websocket-protocol",p);return l.headersList.append("sec-websocket-extensions","permessage-deflate; client_max_window_bits"),s_t({request:l,useParallelQueue:!0,dispatcher:o.dispatcher,processResponse(p){if(p.type==="error"||p.status!==101){Mv(r,"Received network error or non-101 status code.");return}if(e.length!==0&&!p.headersList.get("Sec-WebSocket-Protocol")){Mv(r,"Server did not respond with sent protocols.");return}if(p.headersList.get("Upgrade")?.toLowerCase()!=="websocket"){Mv(r,'Server did not set Upgrade header to "websocket".');return}if(p.headersList.get("Connection")?.toLowerCase()!=="upgrade"){Mv(r,'Server did not set Connection header to "upgrade".');return}let m=p.headersList.get("Sec-WebSocket-Accept"),h=_le.createHash("sha1").update(c+Kwt).digest("base64");if(m!==h){Mv(r,"Incorrect hash received in Sec-WebSocket-Accept header.");return}let g=p.headersList.get("Sec-WebSocket-Extensions"),y;if(g!==null&&(y=r_t(g),!y.has("permessage-deflate"))){Mv(r,"Sec-WebSocket-Extensions header does not match.");return}let v=p.headersList.get("Sec-WebSocket-Protocol");if(v!==null&&!c_t("sec-websocket-protocol",l.headersList).includes(v)){Mv(r,"Protocol was not set in the opening handshake.");return}p.socket.on("data",q6e),p.socket.on("close",W6e),p.socket.on("error",H6e),k4.open.hasSubscribers&&k4.open.publish({address:p.socket.address(),protocol:v,extensions:g}),i(p,y)}})}s(d_t,"establishWebSocketConnection");function f_t(t,e,n,r){if(!(e_t(t)||t_t(t)))if(!n_t(t))Mv(t,"Connection was closed before it was established."),t[vD]=xD.CLOSING;else if(t[oH]===iH.NOT_SENT){t[oH]=iH.PROCESSING;let i=new u_t;e!==void 0&&n===void 0?(i.frameData=Buffer.allocUnsafe(2),i.frameData.writeUInt16BE(e,0)):e!==void 0&&n!==void 0?(i.frameData=Buffer.allocUnsafe(2+r),i.frameData.writeUInt16BE(e,0),i.frameData.write(n,2,"utf-8")):i.frameData=Jwt,t[U6e].socket.write(i.createFrame(Xwt.CLOSE)),t[oH]=iH.SENT,t[vD]=xD.CLOSING}else t[vD]=xD.CLOSING}s(f_t,"closeWebSocketConnection");function q6e(t){this.ws[O6e].write(t)||this.pause()}s(q6e,"onSocketData");function W6e(){let{ws:t}=this,{[U6e]:e}=t;e.socket.off("data",q6e),e.socket.off("close",W6e),e.socket.off("error",H6e);let n=t[oH]===iH.SENT&&t[Q6e],r=1005,i="",o=t[O6e].closingInfo;o&&!o.error?(r=o.code??1005,i=o.reason):t[Q6e]||(r=1006),t[vD]=xD.CLOSED,Zwt("close",t,(a,l)=>new i_t(a,l),{wasClean:n,code:r,reason:i}),k4.close.hasSubscribers&&k4.close.publish({websocket:t,code:r,reason:i})}s(W6e,"onSocketClose");function H6e(t){let{ws:e}=this;e[vD]=xD.CLOSING,k4.socketError.hasSubscribers&&k4.socketError.publish(t),this.destroy()}s(H6e,"onSocketError");G6e.exports={establishWebSocketConnection:d_t,closeWebSocketConnection:f_t}});var V6e=H((yKn,j6e)=>{"use strict";f();var{createInflateRaw:p_t,Z_DEFAULT_WINDOWBITS:m_t}=require("node:zlib"),{isValidClientWindowBits:h_t}=yD(),g_t=Buffer.from([0,0,255,255]),sH=Symbol("kBuffer"),aH=Symbol("kLength"),Rle=class{static{s(this,"PerMessageDeflate")}#e;#t={};constructor(e){this.#t.serverNoContextTakeover=e.has("server_no_context_takeover"),this.#t.serverMaxWindowBits=e.get("server_max_window_bits")}decompress(e,n,r){if(!this.#e){let i=m_t;if(this.#t.serverMaxWindowBits){if(!h_t(this.#t.serverMaxWindowBits)){r(new Error("Invalid server_max_window_bits"));return}i=Number.parseInt(this.#t.serverMaxWindowBits)}this.#e=p_t({windowBits:i}),this.#e[sH]=[],this.#e[aH]=0,this.#e.on("data",o=>{this.#e[sH].push(o),this.#e[aH]+=o.length}),this.#e.on("error",o=>{this.#e=null,r(o)})}this.#e.write(e),n&&this.#e.write(g_t),this.#e.flush(()=>{let i=Buffer.concat(this.#e[sH],this.#e[aH]);this.#e[sH].length=0,this.#e[aH]=0,r(null,i)})}};j6e.exports={PerMessageDeflate:Rle}});var rNe=H((vKn,nNe)=>{"use strict";f();var{Writable:A_t}=require("node:stream"),y_t=require("node:assert"),{parserStates:Rd,opcodes:B4,states:C_t,emptyBuffer:$6e,sentCloseFrameState:z6e}=O2(),{kReadyState:x_t,kSentClose:Y6e,kResponse:K6e,kReceivedClose:J6e}=hD(),{channels:lH}=H5(),{isValidStatusCode:v_t,isValidOpcode:b_t,failWebsocketConnection:ap,websocketMessageReceived:X6e,utf8Decode:E_t,isControlFrame:Z6e,isTextBinaryFrame:kle,isContinuationFrame:I_t}=yD(),{WebsocketFrameSend:eNe}=rH(),{closeWebSocketConnection:tNe}=Sle(),{PerMessageDeflate:T_t}=V6e(),Ble=class extends A_t{static{s(this,"ByteParser")}#e=[];#t=0;#i=!1;#r=Rd.INFO;#n={};#o=[];#s;constructor(e,n){super(),this.ws=e,this.#s=n??new Map,this.#s.has("permessage-deflate")&&this.#s.set("permessage-deflate",new T_t(n))}_write(e,n,r){this.#e.push(e),this.#t+=e.length,this.#i=!0,this.run(r)}run(e){for(;this.#i;)if(this.#r===Rd.INFO){if(this.#t<2)return e();let n=this.consume(2),r=(n[0]&128)!==0,i=n[0]&15,o=(n[1]&128)===128,a=!r&&i!==B4.CONTINUATION,l=n[1]&127,c=n[0]&64,u=n[0]&32,d=n[0]&16;if(!b_t(i))return ap(this.ws,"Invalid opcode received"),e();if(o)return ap(this.ws,"Frame cannot be masked"),e();if(c!==0&&!this.#s.has("permessage-deflate")){ap(this.ws,"Expected RSV1 to be clear.");return}if(u!==0||d!==0){ap(this.ws,"RSV1, RSV2, RSV3 must be clear");return}if(a&&!kle(i)){ap(this.ws,"Invalid frame type was fragmented.");return}if(kle(i)&&this.#o.length>0){ap(this.ws,"Expected continuation frame");return}if(this.#n.fragmented&&a){ap(this.ws,"Fragmented frame exceeded 125 bytes.");return}if((l>125||a)&&Z6e(i)){ap(this.ws,"Control frame either too large or fragmented");return}if(I_t(i)&&this.#o.length===0&&!this.#n.compressed){ap(this.ws,"Unexpected continuation frame");return}l<=125?(this.#n.payloadLength=l,this.#r=Rd.READ_DATA):l===126?this.#r=Rd.PAYLOADLENGTH_16:l===127&&(this.#r=Rd.PAYLOADLENGTH_64),kle(i)&&(this.#n.binaryType=i,this.#n.compressed=c!==0),this.#n.opcode=i,this.#n.masked=o,this.#n.fin=r,this.#n.fragmented=a}else if(this.#r===Rd.PAYLOADLENGTH_16){if(this.#t<2)return e();let n=this.consume(2);this.#n.payloadLength=n.readUInt16BE(0),this.#r=Rd.READ_DATA}else if(this.#r===Rd.PAYLOADLENGTH_64){if(this.#t<8)return e();let n=this.consume(8),r=n.readUInt32BE(0);if(r>2**31-1){ap(this.ws,"Received payload length > 2^31 bytes.");return}let i=n.readUInt32BE(4);this.#n.payloadLength=(r<<8)+i,this.#r=Rd.READ_DATA}else if(this.#r===Rd.READ_DATA){if(this.#t<this.#n.payloadLength)return e();let n=this.consume(this.#n.payloadLength);if(Z6e(this.#n.opcode))this.#i=this.parseControlFrame(n),this.#r=Rd.INFO;else if(this.#n.compressed){this.#s.get("permessage-deflate").decompress(n,this.#n.fin,(r,i)=>{if(r){tNe(this.ws,1007,r.message,r.message.length);return}if(this.#o.push(i),!this.#n.fin){this.#r=Rd.INFO,this.#i=!0,this.run(e);return}X6e(this.ws,this.#n.binaryType,Buffer.concat(this.#o)),this.#i=!0,this.#r=Rd.INFO,this.#o.length=0,this.run(e)}),this.#i=!1;break}else{if(this.#o.push(n),!this.#n.fragmented&&this.#n.fin){let r=Buffer.concat(this.#o);X6e(this.ws,this.#n.binaryType,r),this.#o.length=0}this.#r=Rd.INFO}}}consume(e){if(e>this.#t)throw new Error("Called consume() before buffers satiated.");if(e===0)return $6e;if(this.#e[0].length===e)return this.#t-=this.#e[0].length,this.#e.shift();let n=Buffer.allocUnsafe(e),r=0;for(;r!==e;){let i=this.#e[0],{length:o}=i;if(o+r===e){n.set(this.#e.shift(),r);break}else if(o+r>e){n.set(i.subarray(0,e-r),r),this.#e[0]=i.subarray(e-r);break}else n.set(this.#e.shift(),r),r+=i.length}return this.#t-=e,n}parseCloseBody(e){y_t(e.length!==1);let n;if(e.length>=2&&(n=e.readUInt16BE(0)),n!==void 0&&!v_t(n))return{code:1002,reason:"Invalid status code",error:!0};let r=e.subarray(2);r[0]===239&&r[1]===187&&r[2]===191&&(r=r.subarray(3));try{r=E_t(r)}catch{return{code:1007,reason:"Invalid UTF-8",error:!0}}return{code:n,reason:r,error:!1}}parseControlFrame(e){let{opcode:n,payloadLength:r}=this.#n;if(n===B4.CLOSE){if(r===1)return ap(this.ws,"Received close frame with a 1-byte body."),!1;if(this.#n.closeInfo=this.parseCloseBody(e),this.#n.closeInfo.error){let{code:i,reason:o}=this.#n.closeInfo;return tNe(this.ws,i,o,o.length),ap(this.ws,o),!1}if(this.ws[Y6e]!==z6e.SENT){let i=$6e;this.#n.closeInfo.code&&(i=Buffer.allocUnsafe(2),i.writeUInt16BE(this.#n.closeInfo.code,0));let o=new eNe(i);this.ws[K6e].socket.write(o.createFrame(B4.CLOSE),a=>{a||(this.ws[Y6e]=z6e.SENT)})}return this.ws[x_t]=C_t.CLOSING,this.ws[J6e]=!0,!1}else if(n===B4.PING){if(!this.ws[J6e]){let i=new eNe(e);this.ws[K6e].socket.write(i.createFrame(B4.PONG)),lH.ping.hasSubscribers&&lH.ping.publish({payload:e})}}else n===B4.PONG&&lH.pong.hasSubscribers&&lH.pong.publish({payload:e});return!0}get closingInfo(){return this.#n.closeInfo}};nNe.exports={ByteParser:Ble}});var lNe=H((IKn,aNe)=>{"use strict";f();var{WebsocketFrameSend:w_t}=rH(),{opcodes:iNe,sendHints:P4}=O2(),__t=Hse(),oNe=Buffer[Symbol.species],Ple=class{static{s(this,"SendQueue")}#e=new __t;#t=!1;#i;constructor(e){this.#i=e}add(e,n,r){if(r!==P4.blob){let o=sNe(e,r);if(!this.#t)this.#i.write(o,n);else{let a={promise:null,callback:n,frame:o};this.#e.push(a)}return}let i={promise:e.arrayBuffer().then(o=>{i.promise=null,i.frame=sNe(o,r)}),callback:n,frame:null};this.#e.push(i),this.#t||this.#r()}async#r(){this.#t=!0;let e=this.#e;for(;!e.isEmpty();){let n=e.shift();n.promise!==null&&await n.promise,this.#i.write(n.frame,n.callback),n.callback=n.frame=null}this.#t=!1}};function sNe(t,e){return new w_t(S_t(t,e)).createFrame(e===P4.string?iNe.TEXT:iNe.BINARY)}s(sNe,"createFrame");function S_t(t,e){switch(e){case P4.string:return Buffer.from(t);case P4.arrayBuffer:case P4.blob:return new oNe(t);case P4.typedArray:return new oNe(t.buffer,t.byteOffset,t.byteLength)}}s(S_t,"toBuffer");aNe.exports={SendQueue:Ple}});var ANe=H((_Kn,gNe)=>{"use strict";f();var{webidl:Or}=yc(),{URLSerializer:R_t}=Id(),{environmentSettingsObject:cNe}=R0(),{staticPropertyDescriptors:Qv,states:bD,sentCloseFrameState:k_t,sendHints:cH}=O2(),{kWebSocketURL:uNe,kReadyState:Dle,kController:B_t,kBinaryType:uH,kResponse:dNe,kSentClose:P_t,kByteParser:D_t}=hD(),{isConnecting:N_t,isEstablished:L_t,isClosing:F_t,isValidSubprotocol:M_t,fireEvent:fNe}=yD(),{establishWebSocketConnection:Q_t,closeWebSocketConnection:pNe}=Sle(),{ByteParser:O_t}=rNe(),{kEnumerableProperty:lp,isBlobLike:mNe}=yi(),{getGlobalDispatcher:U_t}=IW(),{types:hNe}=require("node:util"),{ErrorEvent:q_t,CloseEvent:W_t}=S4(),{SendQueue:H_t}=lNe(),F0=class t extends EventTarget{static{s(this,"WebSocket")}#e={open:null,error:null,close:null,message:null};#t=0;#i="";#r="";#n;constructor(e,n=[]){super(),Or.util.markAsUncloneable(this);let r="WebSocket constructor";Or.argumentLengthCheck(arguments,1,r);let i=Or.converters["DOMString or sequence<DOMString> or WebSocketInit"](n,r,"options");e=Or.converters.USVString(e,r,"url"),n=i.protocols;let o=cNe.settingsObject.baseUrl,a;try{a=new URL(e,o)}catch(c){throw new DOMException(c,"SyntaxError")}if(a.protocol==="http:"?a.protocol="ws:":a.protocol==="https:"&&(a.protocol="wss:"),a.protocol!=="ws:"&&a.protocol!=="wss:")throw new DOMException(`Expected a ws: or wss: protocol, got ${a.protocol}`,"SyntaxError");if(a.hash||a.href.endsWith("#"))throw new DOMException("Got fragment","SyntaxError");if(typeof n=="string"&&(n=[n]),n.length!==new Set(n.map(c=>c.toLowerCase())).size)throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");if(n.length>0&&!n.every(c=>M_t(c)))throw new DOMException("Invalid Sec-WebSocket-Protocol value","SyntaxError");this[uNe]=new URL(a.href);let l=cNe.settingsObject;this[B_t]=Q_t(a,n,l,this,(c,u)=>this.#o(c,u),i),this[Dle]=t.CONNECTING,this[P_t]=k_t.NOT_SENT,this[uH]="blob"}close(e=void 0,n=void 0){Or.brandCheck(this,t);let r="WebSocket.close";if(e!==void 0&&(e=Or.converters["unsigned short"](e,r,"code",{clamp:!0})),n!==void 0&&(n=Or.converters.USVString(n,r,"reason")),e!==void 0&&e!==1e3&&(e<3e3||e>4999))throw new DOMException("invalid code","InvalidAccessError");let i=0;if(n!==void 0&&(i=Buffer.byteLength(n),i>123))throw new DOMException(`Reason must be less than 123 bytes; received ${i}`,"SyntaxError");pNe(this,e,n,i)}send(e){Or.brandCheck(this,t);let n="WebSocket.send";if(Or.argumentLengthCheck(arguments,1,n),e=Or.converters.WebSocketSendData(e,n,"data"),N_t(this))throw new DOMException("Sent before connected.","InvalidStateError");if(!(!L_t(this)||F_t(this)))if(typeof e=="string"){let r=Buffer.byteLength(e);this.#t+=r,this.#n.add(e,()=>{this.#t-=r},cH.string)}else hNe.isArrayBuffer(e)?(this.#t+=e.byteLength,this.#n.add(e,()=>{this.#t-=e.byteLength},cH.arrayBuffer)):ArrayBuffer.isView(e)?(this.#t+=e.byteLength,this.#n.add(e,()=>{this.#t-=e.byteLength},cH.typedArray)):mNe(e)&&(this.#t+=e.size,this.#n.add(e,()=>{this.#t-=e.size},cH.blob))}get readyState(){return Or.brandCheck(this,t),this[Dle]}get bufferedAmount(){return Or.brandCheck(this,t),this.#t}get url(){return Or.brandCheck(this,t),R_t(this[uNe])}get extensions(){return Or.brandCheck(this,t),this.#r}get protocol(){return Or.brandCheck(this,t),this.#i}get onopen(){return Or.brandCheck(this,t),this.#e.open}set onopen(e){Or.brandCheck(this,t),this.#e.open&&this.removeEventListener("open",this.#e.open),typeof e=="function"?(this.#e.open=e,this.addEventListener("open",e)):this.#e.open=null}get onerror(){return Or.brandCheck(this,t),this.#e.error}set onerror(e){Or.brandCheck(this,t),this.#e.error&&this.removeEventListener("error",this.#e.error),typeof e=="function"?(this.#e.error=e,this.addEventListener("error",e)):this.#e.error=null}get onclose(){return Or.brandCheck(this,t),this.#e.close}set onclose(e){Or.brandCheck(this,t),this.#e.close&&this.removeEventListener("close",this.#e.close),typeof e=="function"?(this.#e.close=e,this.addEventListener("close",e)):this.#e.close=null}get onmessage(){return Or.brandCheck(this,t),this.#e.message}set onmessage(e){Or.brandCheck(this,t),this.#e.message&&this.removeEventListener("message",this.#e.message),typeof e=="function"?(this.#e.message=e,this.addEventListener("message",e)):this.#e.message=null}get binaryType(){return Or.brandCheck(this,t),this[uH]}set binaryType(e){Or.brandCheck(this,t),e!=="blob"&&e!=="arraybuffer"?this[uH]="blob":this[uH]=e}#o(e,n){this[dNe]=e;let r=new O_t(this,n);r.on("drain",G_t),r.on("error",j_t.bind(this)),e.socket.ws=this,this[D_t]=r,this.#n=new H_t(e.socket),this[Dle]=bD.OPEN;let i=e.headersList.get("sec-websocket-extensions");i!==null&&(this.#r=i);let o=e.headersList.get("sec-websocket-protocol");o!==null&&(this.#i=o),fNe("open",this)}};F0.CONNECTING=F0.prototype.CONNECTING=bD.CONNECTING;F0.OPEN=F0.prototype.OPEN=bD.OPEN;F0.CLOSING=F0.prototype.CLOSING=bD.CLOSING;F0.CLOSED=F0.prototype.CLOSED=bD.CLOSED;Object.defineProperties(F0.prototype,{CONNECTING:Qv,OPEN:Qv,CLOSING:Qv,CLOSED:Qv,url:lp,readyState:lp,bufferedAmount:lp,onopen:lp,onerror:lp,onclose:lp,close:lp,onmessage:lp,binaryType:lp,send:lp,extensions:lp,protocol:lp,[Symbol.toStringTag]:{value:"WebSocket",writable:!1,enumerable:!1,configurable:!0}});Object.defineProperties(F0,{CONNECTING:Qv,OPEN:Qv,CLOSING:Qv,CLOSED:Qv});Or.converters["sequence<DOMString>"]=Or.sequenceConverter(Or.converters.DOMString);Or.converters["DOMString or sequence<DOMString>"]=function(t,e,n){return Or.util.Type(t)==="Object"&&Symbol.iterator in t?Or.converters["sequence<DOMString>"](t):Or.converters.DOMString(t,e,n)};Or.converters.WebSocketInit=Or.dictionaryConverter([{key:"protocols",converter:Or.converters["DOMString or sequence<DOMString>"],defaultValue:s(()=>new Array(0),"defaultValue")},{key:"dispatcher",converter:Or.converters.any,defaultValue:s(()=>U_t(),"defaultValue")},{key:"headers",converter:Or.nullableConverter(Or.converters.HeadersInit)}]);Or.converters["DOMString or sequence<DOMString> or WebSocketInit"]=function(t){return Or.util.Type(t)==="Object"&&!(Symbol.iterator in t)?Or.converters.WebSocketInit(t):{protocols:Or.converters["DOMString or sequence<DOMString>"](t)}};Or.converters.WebSocketSendData=function(t){if(Or.util.Type(t)==="Object"){if(mNe(t))return Or.converters.Blob(t,{strict:!1});if(ArrayBuffer.isView(t)||hNe.isArrayBuffer(t))return Or.converters.BufferSource(t)}return Or.converters.USVString(t)};function G_t(){this.ws[dNe].socket.resume()}s(G_t,"onParserDrain");function j_t(t){let e,n;t instanceof W_t?(e=t.reason,n=t.code):e=t.message,fNe("error",this,()=>new q_t("error",{error:t,message:e})),pNe(this,n)}s(j_t,"onParserError");gNe.exports={WebSocket:F0}});var Nle=H((kKn,yNe)=>{"use strict";f();function V_t(t){return t.indexOf("\0")===-1}s(V_t,"isValidLastEventId");function $_t(t){if(t.length===0)return!1;for(let e=0;e<t.length;e++)if(t.charCodeAt(e)<48||t.charCodeAt(e)>57)return!1;return!0}s($_t,"isASCIINumber");function z_t(t){return new Promise(e=>{setTimeout(e,t).unref()})}s(z_t,"delay");yNe.exports={isValidLastEventId:V_t,isASCIINumber:$_t,delay:z_t}});var bNe=H((DKn,vNe)=>{"use strict";f();var{Transform:Y_t}=require("node:stream"),{isASCIINumber:CNe,isValidLastEventId:xNe}=Nle(),oy=[239,187,191],Lle=10,dH=13,K_t=58,J_t=32,Fle=class extends Y_t{static{s(this,"EventSourceStream")}state=null;checkBOM=!0;crlfCheck=!1;eventEndCheck=!1;buffer=null;pos=0;event={data:void 0,event:void 0,id:void 0,retry:void 0};constructor(e={}){e.readableObjectMode=!0,super(e),this.state=e.eventSourceSettings||{},e.push&&(this.push=e.push)}_transform(e,n,r){if(e.length===0){r();return}if(this.buffer?this.buffer=Buffer.concat([this.buffer,e]):this.buffer=e,this.checkBOM)switch(this.buffer.length){case 1:if(this.buffer[0]===oy[0]){r();return}this.checkBOM=!1,r();return;case 2:if(this.buffer[0]===oy[0]&&this.buffer[1]===oy[1]){r();return}this.checkBOM=!1;break;case 3:if(this.buffer[0]===oy[0]&&this.buffer[1]===oy[1]&&this.buffer[2]===oy[2]){this.buffer=Buffer.alloc(0),this.checkBOM=!1,r();return}this.checkBOM=!1;break;default:this.buffer[0]===oy[0]&&this.buffer[1]===oy[1]&&this.buffer[2]===oy[2]&&(this.buffer=this.buffer.subarray(3)),this.checkBOM=!1;break}for(;this.pos<this.buffer.length;){if(this.eventEndCheck){if(this.crlfCheck){if(this.buffer[this.pos]===Lle){this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.crlfCheck=!1;continue}this.crlfCheck=!1}if(this.buffer[this.pos]===Lle||this.buffer[this.pos]===dH){this.buffer[this.pos]===dH&&(this.crlfCheck=!0),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,(this.event.data!==void 0||this.event.event||this.event.id||this.event.retry)&&this.processEvent(this.event),this.clearEvent();continue}this.eventEndCheck=!1;continue}if(this.buffer[this.pos]===Lle||this.buffer[this.pos]===dH){this.buffer[this.pos]===dH&&(this.crlfCheck=!0),this.parseLine(this.buffer.subarray(0,this.pos),this.event),this.buffer=this.buffer.subarray(this.pos+1),this.pos=0,this.eventEndCheck=!0;continue}this.pos++}r()}parseLine(e,n){if(e.length===0)return;let r=e.indexOf(K_t);if(r===0)return;let i="",o="";if(r!==-1){i=e.subarray(0,r).toString("utf8");let a=r+1;e[a]===J_t&&++a,o=e.subarray(a).toString("utf8")}else i=e.toString("utf8"),o="";switch(i){case"data":n[i]===void 0?n[i]=o:n[i]+=`
${o}`;break;case"retry":CNe(o)&&(n[i]=o);break;case"id":xNe(o)&&(n[i]=o);break;case"event":o.length>0&&(n[i]=o);break}}processEvent(e){e.retry&&CNe(e.retry)&&(this.state.reconnectionTime=parseInt(e.retry,10)),e.id&&xNe(e.id)&&(this.state.lastEventId=e.id),e.data!==void 0&&this.push({type:e.event||"message",options:{data:e.data,lastEventId:this.state.lastEventId,origin:this.state.origin}})}clearEvent(){this.event={data:void 0,event:void 0,id:void 0,retry:void 0}}};vNe.exports={EventSourceStream:Fle}});var kNe=H((FKn,RNe)=>{"use strict";f();var{pipeline:X_t}=require("node:stream"),{fetching:Z_t}=dD(),{makeRequest:eSt}=b4(),{webidl:sy}=yc(),{EventSourceStream:tSt}=bNe(),{parseMIMEType:nSt}=Id(),{createFastMessageEvent:rSt}=S4(),{isNetworkError:ENe}=cD(),{delay:iSt}=Nle(),{kEnumerableProperty:U2}=yi(),{environmentSettingsObject:INe}=R0(),TNe=!1,wNe=3e3,ED=0,_Ne=1,ID=2,oSt="anonymous",sSt="use-credentials",D4=class t extends EventTarget{static{s(this,"EventSource")}#e={open:null,error:null,message:null};#t=null;#i=!1;#r=ED;#n=null;#o=null;#s;#a;constructor(e,n={}){super(),sy.util.markAsUncloneable(this);let r="EventSource constructor";sy.argumentLengthCheck(arguments,1,r),TNe||(TNe=!0,process.emitWarning("EventSource is experimental, expect them to change at any time.",{code:"UNDICI-ES"})),e=sy.converters.USVString(e,r,"url"),n=sy.converters.EventSourceInitDict(n,r,"eventSourceInitDict"),this.#s=n.dispatcher,this.#a={lastEventId:"",reconnectionTime:wNe};let i=INe,o;try{o=new URL(e,i.settingsObject.baseUrl),this.#a.origin=o.origin}catch(c){throw new DOMException(c,"SyntaxError")}this.#t=o.href;let a=oSt;n.withCredentials&&(a=sSt,this.#i=!0);let l={redirect:"follow",keepalive:!0,mode:"cors",credentials:a==="anonymous"?"same-origin":"omit",referrer:"no-referrer"};l.client=INe.settingsObject,l.headersList=[["accept",{name:"accept",value:"text/event-stream"}]],l.cache="no-store",l.initiator="other",l.urlList=[new URL(this.#t)],this.#n=eSt(l),this.#l()}get readyState(){return this.#r}get url(){return this.#t}get withCredentials(){return this.#i}#l(){if(this.#r===ID)return;this.#r=ED;let e={request:this.#n,dispatcher:this.#s},n=s(r=>{ENe(r)&&(this.dispatchEvent(new Event("error")),this.close()),this.#c()},"processEventSourceEndOfBody");e.processResponseEndOfBody=n,e.processResponse=r=>{if(ENe(r))if(r.aborted){this.close(),this.dispatchEvent(new Event("error"));return}else{this.#c();return}let i=r.headersList.get("content-type",!0),o=i!==null?nSt(i):"failure",a=o!=="failure"&&o.essence==="text/event-stream";if(r.status!==200||a===!1){this.close(),this.dispatchEvent(new Event("error"));return}this.#r=_Ne,this.dispatchEvent(new Event("open")),this.#a.origin=r.urlList[r.urlList.length-1].origin;let l=new tSt({eventSourceSettings:this.#a,push:s(c=>{this.dispatchEvent(rSt(c.type,c.options))},"push")});X_t(r.body.stream,l,c=>{c?.aborted===!1&&(this.close(),this.dispatchEvent(new Event("error")))})},this.#o=Z_t(e)}async#c(){this.#r!==ID&&(this.#r=ED,this.dispatchEvent(new Event("error")),await iSt(this.#a.reconnectionTime),this.#r===ED&&(this.#a.lastEventId.length&&this.#n.headersList.set("last-event-id",this.#a.lastEventId,!0),this.#l()))}close(){sy.brandCheck(this,t),this.#r!==ID&&(this.#r=ID,this.#o.abort(),this.#n=null)}get onopen(){return this.#e.open}set onopen(e){this.#e.open&&this.removeEventListener("open",this.#e.open),typeof e=="function"?(this.#e.open=e,this.addEventListener("open",e)):this.#e.open=null}get onmessage(){return this.#e.message}set onmessage(e){this.#e.message&&this.removeEventListener("message",this.#e.message),typeof e=="function"?(this.#e.message=e,this.addEventListener("message",e)):this.#e.message=null}get onerror(){return this.#e.error}set onerror(e){this.#e.error&&this.removeEventListener("error",this.#e.error),typeof e=="function"?(this.#e.error=e,this.addEventListener("error",e)):this.#e.error=null}},SNe={CONNECTING:{__proto__:null,configurable:!1,enumerable:!0,value:ED,writable:!1},OPEN:{__proto__:null,configurable:!1,enumerable:!0,value:_Ne,writable:!1},CLOSED:{__proto__:null,configurable:!1,enumerable:!0,value:ID,writable:!1}};Object.defineProperties(D4,SNe);Object.defineProperties(D4.prototype,SNe);Object.defineProperties(D4.prototype,{close:U2,onerror:U2,onmessage:U2,onopen:U2,readyState:U2,url:U2,withCredentials:U2});sy.converters.EventSourceInitDict=sy.dictionaryConverter([{key:"withCredentials",converter:sy.converters.boolean,defaultValue:s(()=>!1,"defaultValue")},{key:"dispatcher",converter:sy.converters.any}]);RNe.exports={EventSource:D4,defaultReconnectionTime:wNe}});var NNe=H((OKn,Sr)=>{"use strict";f();var aSt=zP(),BNe=wP(),lSt=c4(),cSt=Q8e(),uSt=u4(),dSt=aae(),fSt=tPe(),pSt=aPe(),PNe=yo(),pH=yi(),{InvalidArgumentError:fH}=PNe,N4=$Pe(),mSt=SP(),hSt=Wae(),gSt=SDe(),ASt=jae(),ySt=Rae(),CSt=mW(),{getGlobalDispatcher:DNe,setGlobalDispatcher:xSt}=IW(),vSt=TW(),bSt=nW(),ESt=rW();Object.assign(BNe.prototype,N4);Sr.exports.Dispatcher=BNe;Sr.exports.Client=aSt;Sr.exports.Pool=lSt;Sr.exports.BalancedPool=cSt;Sr.exports.Agent=uSt;Sr.exports.ProxyAgent=dSt;Sr.exports.EnvHttpProxyAgent=fSt;Sr.exports.RetryAgent=pSt;Sr.exports.RetryHandler=CSt;Sr.exports.DecoratorHandler=vSt;Sr.exports.RedirectHandler=bSt;Sr.exports.createRedirectInterceptor=ESt;Sr.exports.interceptors={redirect:LDe(),retry:MDe(),dump:ODe(),dns:WDe()};Sr.exports.buildConnector=mSt;Sr.exports.errors=PNe;Sr.exports.util={parseHeaders:pH.parseHeaders,headerNameToString:pH.headerNameToString};function TD(t){return(e,n,r)=>{if(typeof n=="function"&&(r=n,n=null),!e||typeof e!="string"&&typeof e!="object"&&!(e instanceof URL))throw new fH("invalid url");if(n!=null&&typeof n!="object")throw new fH("invalid opts");if(n&&n.path!=null){if(typeof n.path!="string")throw new fH("invalid opts.path");let a=n.path;n.path.startsWith("/")||(a=`/${a}`),e=new URL(pH.parseOrigin(e).origin+a)}else n||(n=typeof e=="object"?e:{}),e=pH.parseURL(e);let{agent:i,dispatcher:o=DNe()}=n;if(i)throw new fH("unsupported opts.agent. Did you mean opts.client?");return t.call(o,{...n,origin:e.origin,path:e.search?`${e.pathname}${e.search}`:e.pathname,method:n.method||(n.body?"PUT":"GET")},r)}}s(TD,"makeDispatcher");Sr.exports.setGlobalDispatcher=xSt;Sr.exports.getGlobalDispatcher=DNe;var ISt=dD().fetch;Sr.exports.fetch=s(async function(e,n=void 0){try{return await ISt(e,n)}catch(r){throw r&&typeof r=="object"&&Error.captureStackTrace(r),r}},"fetch");Sr.exports.Headers=D2().Headers;Sr.exports.Response=cD().Response;Sr.exports.Request=b4().Request;Sr.exports.FormData=LP().FormData;Sr.exports.File=globalThis.File??require("node:buffer").File;Sr.exports.FileReader=n6e().FileReader;var{setGlobalOrigin:TSt,getGlobalOrigin:wSt}=lse();Sr.exports.setGlobalOrigin=TSt;Sr.exports.getGlobalOrigin=wSt;var{CacheStorage:_St}=d6e(),{kConstruct:SSt}=VW();Sr.exports.caches=new _St(SSt);var{deleteCookie:RSt,getCookies:kSt,getSetCookies:BSt,setCookie:PSt}=E6e();Sr.exports.deleteCookie=RSt;Sr.exports.getCookies=kSt;Sr.exports.getSetCookies=BSt;Sr.exports.setCookie=PSt;var{parseMIMEType:DSt,serializeAMimeType:NSt}=Id();Sr.exports.parseMIMEType=DSt;Sr.exports.serializeAMimeType=NSt;var{CloseEvent:LSt,ErrorEvent:FSt,MessageEvent:MSt}=S4();Sr.exports.WebSocket=ANe().WebSocket;Sr.exports.CloseEvent=LSt;Sr.exports.ErrorEvent=FSt;Sr.exports.MessageEvent=MSt;Sr.exports.request=TD(N4.request);Sr.exports.stream=TD(N4.stream);Sr.exports.pipeline=TD(N4.pipeline);Sr.exports.connect=TD(N4.connect);Sr.exports.upgrade=TD(N4.upgrade);Sr.exports.MockClient=hSt;Sr.exports.MockPool=ASt;Sr.exports.MockAgent=gSt;Sr.exports.mockErrors=ySt;var{EventSource:QSt}=kNe();Sr.exports.EventSource=QSt});var ui=H((WKn,LNe)=>{f();LNe.exports={options:{usePureJavaScript:!1}}});var QNe=H((GKn,MNe)=>{f();var Mle={};MNe.exports=Mle;var FNe={};Mle.encode=function(t,e,n){if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');if(n!==void 0&&typeof n!="number")throw new TypeError('"maxline" must be a number.');var r="";if(!(t instanceof Uint8Array))r=OSt(t,e);else{var i=0,o=e.length,a=e.charAt(0),l=[0];for(i=0;i<t.length;++i){for(var c=0,u=t[i];c<l.length;++c)u+=l[c]<<8,l[c]=u%o,u=u/o|0;for(;u>0;)l.push(u%o),u=u/o|0}for(i=0;t[i]===0&&i<t.length-1;++i)r+=a;for(i=l.length-1;i>=0;--i)r+=e[l[i]]}if(n){var d=new RegExp(".{1,"+n+"}","g");r=r.match(d).join(`\r
`)}return r};Mle.decode=function(t,e){if(typeof t!="string")throw new TypeError('"input" must be a string.');if(typeof e!="string")throw new TypeError('"alphabet" must be a string.');var n=FNe[e];if(!n){n=FNe[e]=[];for(var r=0;r<e.length;++r)n[e.charCodeAt(r)]=r}t=t.replace(/\s/g,"");for(var i=e.length,o=e.charAt(0),a=[0],r=0;r<t.length;r++){var l=n[t.charCodeAt(r)];if(l===void 0)return;for(var c=0,u=l;c<a.length;++c)u+=a[c]*i,a[c]=u&255,u>>=8;for(;u>0;)a.push(u&255),u>>=8}for(var d=0;t[d]===o&&d<t.length-1;++d)a.push(0);return typeof Buffer<"u"?Buffer.from(a.reverse()):new Uint8Array(a.reverse())};function OSt(t,e){var n=0,r=e.length,i=e.charAt(0),o=[0];for(n=0;n<t.length();++n){for(var a=0,l=t.at(n);a<o.length;++a)l+=o[a]<<8,o[a]=l%r,l=l/r|0;for(;l>0;)o.push(l%r),l=l/r|0}var c="";for(n=0;t.at(n)===0&&n<t.length()-1;++n)c+=i;for(n=o.length-1;n>=0;--n)c+=e[o[n]];return c}s(OSt,"_encodeWithByteBuffer")});var uo=H(($Kn,WNe)=>{f();var ONe=ui(),UNe=QNe(),Be=WNe.exports=ONe.util=ONe.util||{};(function(){if(typeof process<"u"&&process.nextTick&&!process.browser){Be.nextTick=process.nextTick,typeof setImmediate=="function"?Be.setImmediate=setImmediate:Be.setImmediate=Be.nextTick;return}if(typeof setImmediate=="function"){Be.setImmediate=function(){return setImmediate.apply(void 0,arguments)},Be.nextTick=function(l){return setImmediate(l)};return}if(Be.setImmediate=function(l){setTimeout(l,0)},typeof window<"u"&&typeof window.postMessage=="function"){let l=function(c){if(c.source===window&&c.data===t){c.stopPropagation();var u=e.slice();e.length=0,u.forEach(function(d){d()})}};var a=l;s(l,"handler");var t="forge.setImmediate",e=[];Be.setImmediate=function(c){e.push(c),e.length===1&&window.postMessage(t,"*")},window.addEventListener("message",l,!0)}if(typeof MutationObserver<"u"){var n=Date.now(),r=!0,i=document.createElement("div"),e=[];new MutationObserver(function(){var c=e.slice();e.length=0,c.forEach(function(u){u()})}).observe(i,{attributes:!0});var o=Be.setImmediate;Be.setImmediate=function(c){Date.now()-n>15?(n=Date.now(),o(c)):(e.push(c),e.length===1&&i.setAttribute("a",r=!r))}}Be.nextTick=Be.setImmediate})();Be.isNodejs=typeof process<"u"&&process.versions&&process.versions.node;Be.globalScope=function(){return Be.isNodejs?global:typeof self>"u"?window:self}();Be.isArray=Array.isArray||function(t){return Object.prototype.toString.call(t)==="[object Array]"};Be.isArrayBuffer=function(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer};Be.isArrayBufferView=function(t){return t&&Be.isArrayBuffer(t.buffer)&&t.byteLength!==void 0};function wD(t){if(!(t===8||t===16||t===24||t===32))throw new Error("Only 8, 16, 24, or 32 bits supported: "+t)}s(wD,"_checkBitsParam");Be.ByteBuffer=Qle;function Qle(t){if(this.data="",this.read=0,typeof t=="string")this.data=t;else if(Be.isArrayBuffer(t)||Be.isArrayBufferView(t))if(typeof Buffer<"u"&&t instanceof Buffer)this.data=t.toString("binary");else{var e=new Uint8Array(t);try{this.data=String.fromCharCode.apply(null,e)}catch{for(var n=0;n<e.length;++n)this.putByte(e[n])}}else(t instanceof Qle||typeof t=="object"&&typeof t.data=="string"&&typeof t.read=="number")&&(this.data=t.data,this.read=t.read);this._constructedStringLength=0}s(Qle,"ByteStringBuffer");Be.ByteStringBuffer=Qle;var USt=4096;Be.ByteStringBuffer.prototype._optimizeConstructedString=function(t){this._constructedStringLength+=t,this._constructedStringLength>USt&&(this.data.substr(0,1),this._constructedStringLength=0)};Be.ByteStringBuffer.prototype.length=function(){return this.data.length-this.read};Be.ByteStringBuffer.prototype.isEmpty=function(){return this.length()<=0};Be.ByteStringBuffer.prototype.putByte=function(t){return this.putBytes(String.fromCharCode(t))};Be.ByteStringBuffer.prototype.fillWithByte=function(t,e){t=String.fromCharCode(t);for(var n=this.data;e>0;)e&1&&(n+=t),e>>>=1,e>0&&(t+=t);return this.data=n,this._optimizeConstructedString(e),this};Be.ByteStringBuffer.prototype.putBytes=function(t){return this.data+=t,this._optimizeConstructedString(t.length),this};Be.ByteStringBuffer.prototype.putString=function(t){return this.putBytes(Be.encodeUtf8(t))};Be.ByteStringBuffer.prototype.putInt16=function(t){return this.putBytes(String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Be.ByteStringBuffer.prototype.putInt24=function(t){return this.putBytes(String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Be.ByteStringBuffer.prototype.putInt32=function(t){return this.putBytes(String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255))};Be.ByteStringBuffer.prototype.putInt16Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255))};Be.ByteStringBuffer.prototype.putInt24Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255))};Be.ByteStringBuffer.prototype.putInt32Le=function(t){return this.putBytes(String.fromCharCode(t&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>24&255))};Be.ByteStringBuffer.prototype.putInt=function(t,e){wD(e);var n="";do e-=8,n+=String.fromCharCode(t>>e&255);while(e>0);return this.putBytes(n)};Be.ByteStringBuffer.prototype.putSignedInt=function(t,e){return t<0&&(t+=2<<e-1),this.putInt(t,e)};Be.ByteStringBuffer.prototype.putBuffer=function(t){return this.putBytes(t.getBytes())};Be.ByteStringBuffer.prototype.getByte=function(){return this.data.charCodeAt(this.read++)};Be.ByteStringBuffer.prototype.getInt16=function(){var t=this.data.charCodeAt(this.read)<<8^this.data.charCodeAt(this.read+1);return this.read+=2,t};Be.ByteStringBuffer.prototype.getInt24=function(){var t=this.data.charCodeAt(this.read)<<16^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2);return this.read+=3,t};Be.ByteStringBuffer.prototype.getInt32=function(){var t=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,t};Be.ByteStringBuffer.prototype.getInt16Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8;return this.read+=2,t};Be.ByteStringBuffer.prototype.getInt24Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16;return this.read+=3,t};Be.ByteStringBuffer.prototype.getInt32Le=function(){var t=this.data.charCodeAt(this.read)^this.data.charCodeAt(this.read+1)<<8^this.data.charCodeAt(this.read+2)<<16^this.data.charCodeAt(this.read+3)<<24;return this.read+=4,t};Be.ByteStringBuffer.prototype.getInt=function(t){wD(t);var e=0;do e=(e<<8)+this.data.charCodeAt(this.read++),t-=8;while(t>0);return e};Be.ByteStringBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),n=2<<t-2;return e>=n&&(e-=n<<1),e};Be.ByteStringBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Be.ByteStringBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Be.ByteStringBuffer.prototype.at=function(t){return this.data.charCodeAt(this.read+t)};Be.ByteStringBuffer.prototype.setAt=function(t,e){return this.data=this.data.substr(0,this.read+t)+String.fromCharCode(e)+this.data.substr(this.read+t+1),this};Be.ByteStringBuffer.prototype.last=function(){return this.data.charCodeAt(this.data.length-1)};Be.ByteStringBuffer.prototype.copy=function(){var t=Be.createBuffer(this.data);return t.read=this.read,t};Be.ByteStringBuffer.prototype.compact=function(){return this.read>0&&(this.data=this.data.slice(this.read),this.read=0),this};Be.ByteStringBuffer.prototype.clear=function(){return this.data="",this.read=0,this};Be.ByteStringBuffer.prototype.truncate=function(t){var e=Math.max(0,this.length()-t);return this.data=this.data.substr(this.read,e),this.read=0,this};Be.ByteStringBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.length;++e){var n=this.data.charCodeAt(e);n<16&&(t+="0"),t+=n.toString(16)}return t};Be.ByteStringBuffer.prototype.toString=function(){return Be.decodeUtf8(this.bytes())};function qSt(t,e){e=e||{},this.read=e.readOffset||0,this.growSize=e.growSize||1024;var n=Be.isArrayBuffer(t),r=Be.isArrayBufferView(t);if(n||r){n?this.data=new DataView(t):this.data=new DataView(t.buffer,t.byteOffset,t.byteLength),this.write="writeOffset"in e?e.writeOffset:this.data.byteLength;return}this.data=new DataView(new ArrayBuffer(0)),this.write=0,t!=null&&this.putBytes(t),"writeOffset"in e&&(this.write=e.writeOffset)}s(qSt,"DataBuffer");Be.DataBuffer=qSt;Be.DataBuffer.prototype.length=function(){return this.write-this.read};Be.DataBuffer.prototype.isEmpty=function(){return this.length()<=0};Be.DataBuffer.prototype.accommodate=function(t,e){if(this.length()>=t)return this;e=Math.max(e||this.growSize,t);var n=new Uint8Array(this.data.buffer,this.data.byteOffset,this.data.byteLength),r=new Uint8Array(this.length()+e);return r.set(n),this.data=new DataView(r.buffer),this};Be.DataBuffer.prototype.putByte=function(t){return this.accommodate(1),this.data.setUint8(this.write++,t),this};Be.DataBuffer.prototype.fillWithByte=function(t,e){this.accommodate(e);for(var n=0;n<e;++n)this.data.setUint8(t);return this};Be.DataBuffer.prototype.putBytes=function(t,e){if(Be.isArrayBufferView(t)){var n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),r=n.byteLength-n.byteOffset;this.accommodate(r);var i=new Uint8Array(this.data.buffer,this.write);return i.set(n),this.write+=r,this}if(Be.isArrayBuffer(t)){var n=new Uint8Array(t);this.accommodate(n.byteLength);var i=new Uint8Array(this.data.buffer);return i.set(n,this.write),this.write+=n.byteLength,this}if(t instanceof Be.DataBuffer||typeof t=="object"&&typeof t.read=="number"&&typeof t.write=="number"&&Be.isArrayBufferView(t.data)){var n=new Uint8Array(t.data.byteLength,t.read,t.length());this.accommodate(n.byteLength);var i=new Uint8Array(t.data.byteLength,this.write);return i.set(n),this.write+=n.byteLength,this}if(t instanceof Be.ByteStringBuffer&&(t=t.data,e="binary"),e=e||"binary",typeof t=="string"){var o;if(e==="hex")return this.accommodate(Math.ceil(t.length/2)),o=new Uint8Array(this.data.buffer,this.write),this.write+=Be.binary.hex.decode(t,o,this.write),this;if(e==="base64")return this.accommodate(Math.ceil(t.length/4)*3),o=new Uint8Array(this.data.buffer,this.write),this.write+=Be.binary.base64.decode(t,o,this.write),this;if(e==="utf8"&&(t=Be.encodeUtf8(t),e="binary"),e==="binary"||e==="raw")return this.accommodate(t.length),o=new Uint8Array(this.data.buffer,this.write),this.write+=Be.binary.raw.decode(o),this;if(e==="utf16")return this.accommodate(t.length*2),o=new Uint16Array(this.data.buffer,this.write),this.write+=Be.text.utf16.encode(o),this;throw new Error("Invalid encoding: "+e)}throw Error("Invalid parameter: "+t)};Be.DataBuffer.prototype.putBuffer=function(t){return this.putBytes(t),t.clear(),this};Be.DataBuffer.prototype.putString=function(t){return this.putBytes(t,"utf16")};Be.DataBuffer.prototype.putInt16=function(t){return this.accommodate(2),this.data.setInt16(this.write,t),this.write+=2,this};Be.DataBuffer.prototype.putInt24=function(t){return this.accommodate(3),this.data.setInt16(this.write,t>>8&65535),this.data.setInt8(this.write,t>>16&255),this.write+=3,this};Be.DataBuffer.prototype.putInt32=function(t){return this.accommodate(4),this.data.setInt32(this.write,t),this.write+=4,this};Be.DataBuffer.prototype.putInt16Le=function(t){return this.accommodate(2),this.data.setInt16(this.write,t,!0),this.write+=2,this};Be.DataBuffer.prototype.putInt24Le=function(t){return this.accommodate(3),this.data.setInt8(this.write,t>>16&255),this.data.setInt16(this.write,t>>8&65535,!0),this.write+=3,this};Be.DataBuffer.prototype.putInt32Le=function(t){return this.accommodate(4),this.data.setInt32(this.write,t,!0),this.write+=4,this};Be.DataBuffer.prototype.putInt=function(t,e){wD(e),this.accommodate(e/8);do e-=8,this.data.setInt8(this.write++,t>>e&255);while(e>0);return this};Be.DataBuffer.prototype.putSignedInt=function(t,e){return wD(e),this.accommodate(e/8),t<0&&(t+=2<<e-1),this.putInt(t,e)};Be.DataBuffer.prototype.getByte=function(){return this.data.getInt8(this.read++)};Be.DataBuffer.prototype.getInt16=function(){var t=this.data.getInt16(this.read);return this.read+=2,t};Be.DataBuffer.prototype.getInt24=function(){var t=this.data.getInt16(this.read)<<8^this.data.getInt8(this.read+2);return this.read+=3,t};Be.DataBuffer.prototype.getInt32=function(){var t=this.data.getInt32(this.read);return this.read+=4,t};Be.DataBuffer.prototype.getInt16Le=function(){var t=this.data.getInt16(this.read,!0);return this.read+=2,t};Be.DataBuffer.prototype.getInt24Le=function(){var t=this.data.getInt8(this.read)^this.data.getInt16(this.read+1,!0)<<8;return this.read+=3,t};Be.DataBuffer.prototype.getInt32Le=function(){var t=this.data.getInt32(this.read,!0);return this.read+=4,t};Be.DataBuffer.prototype.getInt=function(t){wD(t);var e=0;do e=(e<<8)+this.data.getInt8(this.read++),t-=8;while(t>0);return e};Be.DataBuffer.prototype.getSignedInt=function(t){var e=this.getInt(t),n=2<<t-2;return e>=n&&(e-=n<<1),e};Be.DataBuffer.prototype.getBytes=function(t){var e;return t?(t=Math.min(this.length(),t),e=this.data.slice(this.read,this.read+t),this.read+=t):t===0?e="":(e=this.read===0?this.data:this.data.slice(this.read),this.clear()),e};Be.DataBuffer.prototype.bytes=function(t){return typeof t>"u"?this.data.slice(this.read):this.data.slice(this.read,this.read+t)};Be.DataBuffer.prototype.at=function(t){return this.data.getUint8(this.read+t)};Be.DataBuffer.prototype.setAt=function(t,e){return this.data.setUint8(t,e),this};Be.DataBuffer.prototype.last=function(){return this.data.getUint8(this.write-1)};Be.DataBuffer.prototype.copy=function(){return new Be.DataBuffer(this)};Be.DataBuffer.prototype.compact=function(){if(this.read>0){var t=new Uint8Array(this.data.buffer,this.read),e=new Uint8Array(t.byteLength);e.set(t),this.data=new DataView(e),this.write-=this.read,this.read=0}return this};Be.DataBuffer.prototype.clear=function(){return this.data=new DataView(new ArrayBuffer(0)),this.read=this.write=0,this};Be.DataBuffer.prototype.truncate=function(t){return this.write=Math.max(0,this.length()-t),this.read=Math.min(this.read,this.write),this};Be.DataBuffer.prototype.toHex=function(){for(var t="",e=this.read;e<this.data.byteLength;++e){var n=this.data.getUint8(e);n<16&&(t+="0"),t+=n.toString(16)}return t};Be.DataBuffer.prototype.toString=function(t){var e=new Uint8Array(this.data,this.read,this.length());if(t=t||"utf8",t==="binary"||t==="raw")return Be.binary.raw.encode(e);if(t==="hex")return Be.binary.hex.encode(e);if(t==="base64")return Be.binary.base64.encode(e);if(t==="utf8")return Be.text.utf8.decode(e);if(t==="utf16")return Be.text.utf16.decode(e);throw new Error("Invalid encoding: "+t)};Be.createBuffer=function(t,e){return e=e||"raw",t!==void 0&&e==="utf8"&&(t=Be.encodeUtf8(t)),new Be.ByteBuffer(t)};Be.fillString=function(t,e){for(var n="";e>0;)e&1&&(n+=t),e>>>=1,e>0&&(t+=t);return n};Be.xorBytes=function(t,e,n){for(var r="",i="",o="",a=0,l=0;n>0;--n,++a)i=t.charCodeAt(a)^e.charCodeAt(a),l>=10&&(r+=o,o="",l=0),o+=String.fromCharCode(i),++l;return r+=o,r};Be.hexToBytes=function(t){var e="",n=0;for(t.length&!0&&(n=1,e+=String.fromCharCode(parseInt(t[0],16)));n<t.length;n+=2)e+=String.fromCharCode(parseInt(t.substr(n,2),16));return e};Be.bytesToHex=function(t){return Be.createBuffer(t).toHex()};Be.int32ToBytes=function(t){return String.fromCharCode(t>>24&255)+String.fromCharCode(t>>16&255)+String.fromCharCode(t>>8&255)+String.fromCharCode(t&255)};var Ov="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Uv=[62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,64,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],qNe="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz";Be.encode64=function(t,e){for(var n="",r="",i,o,a,l=0;l<t.length;)i=t.charCodeAt(l++),o=t.charCodeAt(l++),a=t.charCodeAt(l++),n+=Ov.charAt(i>>2),n+=Ov.charAt((i&3)<<4|o>>4),isNaN(o)?n+="==":(n+=Ov.charAt((o&15)<<2|a>>6),n+=isNaN(a)?"=":Ov.charAt(a&63)),e&&n.length>e&&(r+=n.substr(0,e)+`\r
`,n=n.substr(e));return r+=n,r};Be.decode64=function(t){t=t.replace(/[^A-Za-z0-9\+\/\=]/g,"");for(var e="",n,r,i,o,a=0;a<t.length;)n=Uv[t.charCodeAt(a++)-43],r=Uv[t.charCodeAt(a++)-43],i=Uv[t.charCodeAt(a++)-43],o=Uv[t.charCodeAt(a++)-43],e+=String.fromCharCode(n<<2|r>>4),i!==64&&(e+=String.fromCharCode((r&15)<<4|i>>2),o!==64&&(e+=String.fromCharCode((i&3)<<6|o)));return e};Be.encodeUtf8=function(t){return unescape(encodeURIComponent(t))};Be.decodeUtf8=function(t){return decodeURIComponent(escape(t))};Be.binary={raw:{},hex:{},base64:{},base58:{},baseN:{encode:UNe.encode,decode:UNe.decode}};Be.binary.raw.encode=function(t){return String.fromCharCode.apply(null,t)};Be.binary.raw.decode=function(t,e,n){var r=e;r||(r=new Uint8Array(t.length)),n=n||0;for(var i=n,o=0;o<t.length;++o)r[i++]=t.charCodeAt(o);return e?i-n:r};Be.binary.hex.encode=Be.bytesToHex;Be.binary.hex.decode=function(t,e,n){var r=e;r||(r=new Uint8Array(Math.ceil(t.length/2))),n=n||0;var i=0,o=n;for(t.length&1&&(i=1,r[o++]=parseInt(t[0],16));i<t.length;i+=2)r[o++]=parseInt(t.substr(i,2),16);return e?o-n:r};Be.binary.base64.encode=function(t,e){for(var n="",r="",i,o,a,l=0;l<t.byteLength;)i=t[l++],o=t[l++],a=t[l++],n+=Ov.charAt(i>>2),n+=Ov.charAt((i&3)<<4|o>>4),isNaN(o)?n+="==":(n+=Ov.charAt((o&15)<<2|a>>6),n+=isNaN(a)?"=":Ov.charAt(a&63)),e&&n.length>e&&(r+=n.substr(0,e)+`\r
`,n=n.substr(e));return r+=n,r};Be.binary.base64.decode=function(t,e,n){var r=e;r||(r=new Uint8Array(Math.ceil(t.length/4)*3)),t=t.replace(/[^A-Za-z0-9\+\/\=]/g,""),n=n||0;for(var i,o,a,l,c=0,u=n;c<t.length;)i=Uv[t.charCodeAt(c++)-43],o=Uv[t.charCodeAt(c++)-43],a=Uv[t.charCodeAt(c++)-43],l=Uv[t.charCodeAt(c++)-43],r[u++]=i<<2|o>>4,a!==64&&(r[u++]=(o&15)<<4|a>>2,l!==64&&(r[u++]=(a&3)<<6|l));return e?u-n:r.subarray(0,u)};Be.binary.base58.encode=function(t,e){return Be.binary.baseN.encode(t,qNe,e)};Be.binary.base58.decode=function(t,e){return Be.binary.baseN.decode(t,qNe,e)};Be.text={utf8:{},utf16:{}};Be.text.utf8.encode=function(t,e,n){t=Be.encodeUtf8(t);var r=e;r||(r=new Uint8Array(t.length)),n=n||0;for(var i=n,o=0;o<t.length;++o)r[i++]=t.charCodeAt(o);return e?i-n:r};Be.text.utf8.decode=function(t){return Be.decodeUtf8(String.fromCharCode.apply(null,t))};Be.text.utf16.encode=function(t,e,n){var r=e;r||(r=new Uint8Array(t.length*2));var i=new Uint16Array(r.buffer);n=n||0;for(var o=n,a=n,l=0;l<t.length;++l)i[a++]=t.charCodeAt(l),o+=2;return e?o-n:r};Be.text.utf16.decode=function(t){return String.fromCharCode.apply(null,new Uint16Array(t.buffer))};Be.deflate=function(t,e,n){if(e=Be.decode64(t.deflate(Be.encode64(e)).rval),n){var r=2,i=e.charCodeAt(1);i&32&&(r=6),e=e.substring(r,e.length-4)}return e};Be.inflate=function(t,e,n){var r=t.inflate(Be.encode64(e)).rval;return r===null?null:Be.decode64(r)};var Ole=s(function(t,e,n){if(!t)throw new Error("WebStorage not available.");var r;if(n===null?r=t.removeItem(e):(n=Be.encode64(JSON.stringify(n)),r=t.setItem(e,n)),typeof r<"u"&&r.rval!==!0){var i=new Error(r.error.message);throw i.id=r.error.id,i.name=r.error.name,i}},"_setStorageObject"),Ule=s(function(t,e){if(!t)throw new Error("WebStorage not available.");var n=t.getItem(e);if(t.init)if(n.rval===null){if(n.error){var r=new Error(n.error.message);throw r.id=n.error.id,r.name=n.error.name,r}n=null}else n=n.rval;return n!==null&&(n=JSON.parse(Be.decode64(n))),n},"_getStorageObject"),WSt=s(function(t,e,n,r){var i=Ule(t,e);i===null&&(i={}),i[n]=r,Ole(t,e,i)},"_setItem"),HSt=s(function(t,e,n){var r=Ule(t,e);return r!==null&&(r=n in r?r[n]:null),r},"_getItem"),GSt=s(function(t,e,n){var r=Ule(t,e);if(r!==null&&n in r){delete r[n];var i=!0;for(var o in r){i=!1;break}i&&(r=null),Ole(t,e,r)}},"_removeItem"),jSt=s(function(t,e){Ole(t,e,null)},"_clearItems"),mH=s(function(t,e,n){var r=null;typeof n>"u"&&(n=["web","flash"]);var i,o=!1,a=null;for(var l in n){i=n[l];try{if(i==="flash"||i==="both"){if(e[0]===null)throw new Error("Flash local storage not available.");r=t.apply(this,e),o=i==="flash"}(i==="web"||i==="both")&&(e[0]=localStorage,r=t.apply(this,e),o=!0)}catch(c){a=c}if(o)break}if(!o)throw a;return r},"_callStorageFunction");Be.setItem=function(t,e,n,r,i){mH(WSt,arguments,i)};Be.getItem=function(t,e,n,r){return mH(HSt,arguments,r)};Be.removeItem=function(t,e,n,r){mH(GSt,arguments,r)};Be.clearItems=function(t,e,n){mH(jSt,arguments,n)};Be.isEmpty=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0};Be.format=function(t){for(var e=/%./g,n,r,i=0,o=[],a=0;n=e.exec(t);){r=t.substring(a,e.lastIndex-2),r.length>0&&o.push(r),a=e.lastIndex;var l=n[0][1];switch(l){case"s":case"o":i<arguments.length?o.push(arguments[i+++1]):o.push("<?>");break;case"%":o.push("%");break;default:o.push("<%"+l+"?>")}}return o.push(t.substring(a)),o.join("")};Be.formatNumber=function(t,e,n,r){var i=t,o=isNaN(e=Math.abs(e))?2:e,a=n===void 0?",":n,l=r===void 0?".":r,c=i<0?"-":"",u=parseInt(i=Math.abs(+i||0).toFixed(o),10)+"",d=u.length>3?u.length%3:0;return c+(d?u.substr(0,d)+l:"")+u.substr(d).replace(/(\d{3})(?=\d)/g,"$1"+l)+(o?a+Math.abs(i-u).toFixed(o).slice(2):"")};Be.formatSize=function(t){return t>=1073741824?t=Be.formatNumber(t/1073741824,2,".","")+" GiB":t>=1048576?t=Be.formatNumber(t/1048576,2,".","")+" MiB":t>=1024?t=Be.formatNumber(t/1024,0)+" KiB":t=Be.formatNumber(t,0)+" bytes",t};Be.bytesFromIP=function(t){return t.indexOf(".")!==-1?Be.bytesFromIPv4(t):t.indexOf(":")!==-1?Be.bytesFromIPv6(t):null};Be.bytesFromIPv4=function(t){if(t=t.split("."),t.length!==4)return null;for(var e=Be.createBuffer(),n=0;n<t.length;++n){var r=parseInt(t[n],10);if(isNaN(r))return null;e.putByte(r)}return e.getBytes()};Be.bytesFromIPv6=function(t){var e=0;t=t.split(":").filter(function(a){return a.length===0&&++e,!0});for(var n=(8-t.length+e)*2,r=Be.createBuffer(),i=0;i<8;++i){if(!t[i]||t[i].length===0){r.fillWithByte(0,n),n=0;continue}var o=Be.hexToBytes(t[i]);o.length<2&&r.putByte(0),r.putBytes(o)}return r.getBytes()};Be.bytesToIP=function(t){return t.length===4?Be.bytesToIPv4(t):t.length===16?Be.bytesToIPv6(t):null};Be.bytesToIPv4=function(t){if(t.length!==4)return null;for(var e=[],n=0;n<t.length;++n)e.push(t.charCodeAt(n));return e.join(".")};Be.bytesToIPv6=function(t){if(t.length!==16)return null;for(var e=[],n=[],r=0,i=0;i<t.length;i+=2){for(var o=Be.bytesToHex(t[i]+t[i+1]);o[0]==="0"&&o!=="0";)o=o.substr(1);if(o==="0"){var a=n[n.length-1],l=e.length;!a||l!==a.end+1?n.push({start:l,end:l}):(a.end=l,a.end-a.start>n[r].end-n[r].start&&(r=n.length-1))}e.push(o)}if(n.length>0){var c=n[r];c.end-c.start>0&&(e.splice(c.start,c.end-c.start+1,""),c.start===0&&e.unshift(""),c.end===7&&e.push(""))}return e.join(":")};Be.estimateCores=function(t,e){if(typeof t=="function"&&(e=t,t={}),t=t||{},"cores"in Be&&!t.update)return e(null,Be.cores);if(typeof navigator<"u"&&"hardwareConcurrency"in navigator&&navigator.hardwareConcurrency>0)return Be.cores=navigator.hardwareConcurrency,e(null,Be.cores);if(typeof Worker>"u")return Be.cores=1,e(null,Be.cores);if(typeof Blob>"u")return Be.cores=2,e(null,Be.cores);var n=URL.createObjectURL(new Blob(["(",function(){self.addEventListener("message",function(a){for(var l=Date.now(),c=l+4;Date.now()<c;);self.postMessage({st:l,et:c})})}.toString(),")()"],{type:"application/javascript"}));r([],5,16);function r(a,l,c){if(l===0){var u=Math.floor(a.reduce(function(d,p){return d+p},0)/a.length);return Be.cores=Math.max(1,u),URL.revokeObjectURL(n),e(null,Be.cores)}i(c,function(d,p){a.push(o(c,p)),r(a,l-1,c)})}s(r,"sample");function i(a,l){for(var c=[],u=[],d=0;d<a;++d){var p=new Worker(n);p.addEventListener("message",function(m){if(u.push(m.data),u.length===a){for(var h=0;h<a;++h)c[h].terminate();l(null,u)}}),c.push(p)}for(var d=0;d<a;++d)c[d].postMessage(d)}s(i,"map");function o(a,l){for(var c=[],u=0;u<a;++u)for(var d=l[u],p=c[u]=[],m=0;m<a;++m)if(u!==m){var h=l[m];(d.st>h.st&&d.st<h.et||h.st>d.st&&h.st<d.et)&&p.push(m)}return c.reduce(function(g,y){return Math.max(g,y.length)},0)}s(o,"reduce")}});var hH=H((KKn,HNe)=>{f();var Gl=ui();uo();HNe.exports=Gl.cipher=Gl.cipher||{};Gl.cipher.algorithms=Gl.cipher.algorithms||{};Gl.cipher.createCipher=function(t,e){var n=t;if(typeof n=="string"&&(n=Gl.cipher.getAlgorithm(n),n&&(n=n())),!n)throw new Error("Unsupported algorithm: "+t);return new Gl.cipher.BlockCipher({algorithm:n,key:e,decrypt:!1})};Gl.cipher.createDecipher=function(t,e){var n=t;if(typeof n=="string"&&(n=Gl.cipher.getAlgorithm(n),n&&(n=n())),!n)throw new Error("Unsupported algorithm: "+t);return new Gl.cipher.BlockCipher({algorithm:n,key:e,decrypt:!0})};Gl.cipher.registerAlgorithm=function(t,e){t=t.toUpperCase(),Gl.cipher.algorithms[t]=e};Gl.cipher.getAlgorithm=function(t){return t=t.toUpperCase(),t in Gl.cipher.algorithms?Gl.cipher.algorithms[t]:null};var qle=Gl.cipher.BlockCipher=function(t){this.algorithm=t.algorithm,this.mode=this.algorithm.mode,this.blockSize=this.mode.blockSize,this._finish=!1,this._input=null,this.output=null,this._op=t.decrypt?this.mode.decrypt:this.mode.encrypt,this._decrypt=t.decrypt,this.algorithm.initialize(t)};qle.prototype.start=function(t){t=t||{};var e={};for(var n in t)e[n]=t[n];e.decrypt=this._decrypt,this._finish=!1,this._input=Gl.util.createBuffer(),this.output=t.output||Gl.util.createBuffer(),this.mode.start(e)};qle.prototype.update=function(t){for(t&&this._input.putBuffer(t);!this._op.call(this.mode,this._input,this.output,this._finish)&&!this._finish;);this._input.compact()};qle.prototype.finish=function(t){t&&(this.mode.name==="ECB"||this.mode.name==="CBC")&&(this.mode.pad=function(n){return t(this.blockSize,n,!1)},this.mode.unpad=function(n){return t(this.blockSize,n,!0)});var e={};return e.decrypt=this._decrypt,e.overflow=this._input.length()%this.blockSize,!(!this._decrypt&&this.mode.pad&&!this.mode.pad(this._input,e)||(this._finish=!0,this.update(),this._decrypt&&this.mode.unpad&&!this.mode.unpad(this.output,e))||this.mode.afterFinish&&!this.mode.afterFinish(this.output,e))}});var Hle=H((XKn,GNe)=>{f();var jl=ui();uo();jl.cipher=jl.cipher||{};var wi=GNe.exports=jl.cipher.modes=jl.cipher.modes||{};wi.ecb=function(t){t=t||{},this.name="ECB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};wi.ecb.prototype.start=function(t){};wi.ecb.prototype.encrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)e.putInt32(this._outBlock[r])};wi.ecb.prototype.decrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)e.putInt32(this._outBlock[r])};wi.ecb.prototype.pad=function(t,e){var n=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(n,n),!0};wi.ecb.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var n=t.length(),r=t.at(n-1);return r>this.blockSize<<2?!1:(t.truncate(r),!0)};wi.cbc=function(t){t=t||{},this.name="CBC",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints)};wi.cbc.prototype.start=function(t){if(t.iv===null){if(!this._prev)throw new Error("Invalid IV parameter.");this._iv=this._prev.slice(0)}else if("iv"in t)this._iv=gH(t.iv,this.blockSize),this._prev=this._iv.slice(0);else throw new Error("Invalid IV parameter.")};wi.cbc.prototype.encrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=this._prev[r]^t.getInt32();this.cipher.encrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)e.putInt32(this._outBlock[r]);this._prev=this._outBlock};wi.cbc.prototype.decrypt=function(t,e,n){if(t.length()<this.blockSize&&!(n&&t.length()>0))return!0;for(var r=0;r<this._ints;++r)this._inBlock[r]=t.getInt32();this.cipher.decrypt(this._inBlock,this._outBlock);for(var r=0;r<this._ints;++r)e.putInt32(this._prev[r]^this._outBlock[r]);this._prev=this._inBlock.slice(0)};wi.cbc.prototype.pad=function(t,e){var n=t.length()===this.blockSize?this.blockSize:this.blockSize-t.length();return t.fillWithByte(n,n),!0};wi.cbc.prototype.unpad=function(t,e){if(e.overflow>0)return!1;var n=t.length(),r=t.at(n-1);return r>this.blockSize<<2?!1:(t.truncate(r),!0)};wi.cfb=function(t){t=t||{},this.name="CFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialBlock=new Array(this._ints),this._partialOutput=jl.util.createBuffer(),this._partialBytes=0};wi.cfb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=gH(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};wi.cfb.prototype.encrypt=function(t,e,n){var r=t.length();if(r===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32()^this._outBlock[i],e.putInt32(this._inBlock[i]);return}var o=(this.blockSize-r)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32()^this._outBlock[i],this._partialOutput.putInt32(this._partialBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!n)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0};wi.cfb.prototype.decrypt=function(t,e,n){var r=t.length();if(r===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)this._inBlock[i]=t.getInt32(),e.putInt32(this._inBlock[i]^this._outBlock[i]);return}var o=(this.blockSize-r)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialBlock[i]=t.getInt32(),this._partialOutput.putInt32(this._partialBlock[i]^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._partialBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!n)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0};wi.ofb=function(t){t=t||{},this.name="OFB",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=jl.util.createBuffer(),this._partialBytes=0};wi.ofb.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=gH(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};wi.ofb.prototype.encrypt=function(t,e,n){var r=t.length();if(t.length()===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]),this._inBlock[i]=this._outBlock[i];return}var o=(this.blockSize-r)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0)t.read-=this.blockSize;else for(var i=0;i<this._ints;++i)this._inBlock[i]=this._outBlock[i];if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!n)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0};wi.ofb.prototype.decrypt=wi.ofb.prototype.encrypt;wi.ctr=function(t){t=t||{},this.name="CTR",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=null,this._outBlock=new Array(this._ints),this._partialOutput=jl.util.createBuffer(),this._partialBytes=0};wi.ctr.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");this._iv=gH(t.iv,this.blockSize),this._inBlock=this._iv.slice(0),this._partialBytes=0};wi.ctr.prototype.encrypt=function(t,e,n){var r=t.length();if(r===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize)for(var i=0;i<this._ints;++i)e.putInt32(t.getInt32()^this._outBlock[i]);else{var o=(this.blockSize-r)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o>0&&(t.read-=this.blockSize),this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!n)return e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}AH(this._inBlock)};wi.ctr.prototype.decrypt=wi.ctr.prototype.encrypt;wi.gcm=function(t){t=t||{},this.name="GCM",this.cipher=t.cipher,this.blockSize=t.blockSize||16,this._ints=this.blockSize/4,this._inBlock=new Array(this._ints),this._outBlock=new Array(this._ints),this._partialOutput=jl.util.createBuffer(),this._partialBytes=0,this._R=3774873600};wi.gcm.prototype.start=function(t){if(!("iv"in t))throw new Error("Invalid IV parameter.");var e=jl.util.createBuffer(t.iv);this._cipherLength=0;var n;if("additionalData"in t?n=jl.util.createBuffer(t.additionalData):n=jl.util.createBuffer(),"tagLength"in t?this._tagLength=t.tagLength:this._tagLength=128,this._tag=null,t.decrypt&&(this._tag=jl.util.createBuffer(t.tag).getBytes(),this._tag.length!==this._tagLength/8))throw new Error("Authentication tag does not match tag length.");this._hashBlock=new Array(this._ints),this.tag=null,this._hashSubkey=new Array(this._ints),this.cipher.encrypt([0,0,0,0],this._hashSubkey),this.componentBits=4,this._m=this.generateHashTable(this._hashSubkey,this.componentBits);var r=e.length();if(r===12)this._j0=[e.getInt32(),e.getInt32(),e.getInt32(),1];else{for(this._j0=[0,0,0,0];e.length()>0;)this._j0=this.ghash(this._hashSubkey,this._j0,[e.getInt32(),e.getInt32(),e.getInt32(),e.getInt32()]);this._j0=this.ghash(this._hashSubkey,this._j0,[0,0].concat(Wle(r*8)))}this._inBlock=this._j0.slice(0),AH(this._inBlock),this._partialBytes=0,n=jl.util.createBuffer(n),this._aDataLength=Wle(n.length()*8);var i=n.length()%this.blockSize;for(i&&n.fillWithByte(0,this.blockSize-i),this._s=[0,0,0,0];n.length()>0;)this._s=this.ghash(this._hashSubkey,this._s,[n.getInt32(),n.getInt32(),n.getInt32(),n.getInt32()])};wi.gcm.prototype.encrypt=function(t,e,n){var r=t.length();if(r===0)return!0;if(this.cipher.encrypt(this._inBlock,this._outBlock),this._partialBytes===0&&r>=this.blockSize){for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^=t.getInt32());this._cipherLength+=this.blockSize}else{var o=(this.blockSize-r)%this.blockSize;o>0&&(o=this.blockSize-o),this._partialOutput.clear();for(var i=0;i<this._ints;++i)this._partialOutput.putInt32(t.getInt32()^this._outBlock[i]);if(o<=0||n){if(n){var a=r%this.blockSize;this._cipherLength+=a,this._partialOutput.truncate(this.blockSize-a)}else this._cipherLength+=this.blockSize;for(var i=0;i<this._ints;++i)this._outBlock[i]=this._partialOutput.getInt32();this._partialOutput.read-=this.blockSize}if(this._partialBytes>0&&this._partialOutput.getBytes(this._partialBytes),o>0&&!n)return t.read-=this.blockSize,e.putBytes(this._partialOutput.getBytes(o-this._partialBytes)),this._partialBytes=o,!0;e.putBytes(this._partialOutput.getBytes(r-this._partialBytes)),this._partialBytes=0}this._s=this.ghash(this._hashSubkey,this._s,this._outBlock),AH(this._inBlock)};wi.gcm.prototype.decrypt=function(t,e,n){var r=t.length();if(r<this.blockSize&&!(n&&r>0))return!0;this.cipher.encrypt(this._inBlock,this._outBlock),AH(this._inBlock),this._hashBlock[0]=t.getInt32(),this._hashBlock[1]=t.getInt32(),this._hashBlock[2]=t.getInt32(),this._hashBlock[3]=t.getInt32(),this._s=this.ghash(this._hashSubkey,this._s,this._hashBlock);for(var i=0;i<this._ints;++i)e.putInt32(this._outBlock[i]^this._hashBlock[i]);r<this.blockSize?this._cipherLength+=r%this.blockSize:this._cipherLength+=this.blockSize};wi.gcm.prototype.afterFinish=function(t,e){var n=!0;e.decrypt&&e.overflow&&t.truncate(this.blockSize-e.overflow),this.tag=jl.util.createBuffer();var r=this._aDataLength.concat(Wle(this._cipherLength*8));this._s=this.ghash(this._hashSubkey,this._s,r);var i=[];this.cipher.encrypt(this._j0,i);for(var o=0;o<this._ints;++o)this.tag.putInt32(this._s[o]^i[o]);return this.tag.truncate(this.tag.length()%(this._tagLength/8)),e.decrypt&&this.tag.bytes()!==this._tag&&(n=!1),n};wi.gcm.prototype.multiply=function(t,e){for(var n=[0,0,0,0],r=e.slice(0),i=0;i<128;++i){var o=t[i/32|0]&1<<31-i%32;o&&(n[0]^=r[0],n[1]^=r[1],n[2]^=r[2],n[3]^=r[3]),this.pow(r,r)}return n};wi.gcm.prototype.pow=function(t,e){for(var n=t[3]&1,r=3;r>0;--r)e[r]=t[r]>>>1|(t[r-1]&1)<<31;e[0]=t[0]>>>1,n&&(e[0]^=this._R)};wi.gcm.prototype.tableMultiply=function(t){for(var e=[0,0,0,0],n=0;n<32;++n){var r=n/8|0,i=t[r]>>>(7-n%8)*4&15,o=this._m[n][i];e[0]^=o[0],e[1]^=o[1],e[2]^=o[2],e[3]^=o[3]}return e};wi.gcm.prototype.ghash=function(t,e,n){return e[0]^=n[0],e[1]^=n[1],e[2]^=n[2],e[3]^=n[3],this.tableMultiply(e)};wi.gcm.prototype.generateHashTable=function(t,e){for(var n=8/e,r=4*n,i=16*n,o=new Array(i),a=0;a<i;++a){var l=[0,0,0,0],c=a/r|0,u=(r-1-a%r)*e;l[c]=1<<e-1<<u,o[a]=this.generateSubHashTable(this.multiply(l,t),e)}return o};wi.gcm.prototype.generateSubHashTable=function(t,e){var n=1<<e,r=n>>>1,i=new Array(n);i[r]=t.slice(0);for(var o=r>>>1;o>0;)this.pow(i[2*o],i[o]=[]),o>>=1;for(o=2;o<r;){for(var a=1;a<o;++a){var l=i[o],c=i[a];i[o+a]=[l[0]^c[0],l[1]^c[1],l[2]^c[2],l[3]^c[3]]}o*=2}for(i[0]=[0,0,0,0],o=r+1;o<n;++o){var u=i[o^r];i[o]=[t[0]^u[0],t[1]^u[1],t[2]^u[2],t[3]^u[3]]}return i};function gH(t,e){if(typeof t=="string"&&(t=jl.util.createBuffer(t)),jl.util.isArray(t)&&t.length>4){var n=t;t=jl.util.createBuffer();for(var r=0;r<n.length;++r)t.putByte(n[r])}if(t.length()<e)throw new Error("Invalid IV length; got "+t.length()+" bytes and expected "+e+" bytes.");if(!jl.util.isArray(t)){for(var i=[],o=e/4,r=0;r<o;++r)i.push(t.getInt32());t=i}return t}s(gH,"transformIV");function AH(t){t[t.length-1]=t[t.length-1]+1&4294967295}s(AH,"inc32");function Wle(t){return[t/4294967296|0,t&4294967295]}s(Wle,"from64To32")});var qv=H((tJn,zNe)=>{f();var ns=ui();hH();Hle();uo();zNe.exports=ns.aes=ns.aes||{};ns.aes.startEncrypting=function(t,e,n,r){var i=yH({key:t,output:n,decrypt:!1,mode:r});return i.start(e),i};ns.aes.createEncryptionCipher=function(t,e){return yH({key:t,output:null,decrypt:!1,mode:e})};ns.aes.startDecrypting=function(t,e,n,r){var i=yH({key:t,output:n,decrypt:!0,mode:r});return i.start(e),i};ns.aes.createDecryptionCipher=function(t,e){return yH({key:t,output:null,decrypt:!0,mode:e})};ns.aes.Algorithm=function(t,e){Vle||VNe();var n=this;n.name=t,n.mode=new e({blockSize:16,cipher:{encrypt:s(function(r,i){return jle(n._w,r,i,!1)},"encrypt"),decrypt:s(function(r,i){return jle(n._w,r,i,!0)},"decrypt")}}),n._init=!1};ns.aes.Algorithm.prototype.initialize=function(t){if(!this._init){var e=t.key,n;if(typeof e=="string"&&(e.length===16||e.length===24||e.length===32))e=ns.util.createBuffer(e);else if(ns.util.isArray(e)&&(e.length===16||e.length===24||e.length===32)){n=e,e=ns.util.createBuffer();for(var r=0;r<n.length;++r)e.putByte(n[r])}if(!ns.util.isArray(e)){n=e,e=[];var i=n.length();if(i===16||i===24||i===32){i=i>>>2;for(var r=0;r<i;++r)e.push(n.getInt32())}}if(!ns.util.isArray(e)||!(e.length===4||e.length===6||e.length===8))throw new Error("Invalid key parameter.");var o=this.mode.name,a=["CFB","OFB","CTR","GCM"].indexOf(o)!==-1;this._w=$Ne(e,t.decrypt&&!a),this._init=!0}};ns.aes._expandKey=function(t,e){return Vle||VNe(),$Ne(t,e)};ns.aes._updateBlock=jle;F4("AES-ECB",ns.cipher.modes.ecb);F4("AES-CBC",ns.cipher.modes.cbc);F4("AES-CFB",ns.cipher.modes.cfb);F4("AES-OFB",ns.cipher.modes.ofb);F4("AES-CTR",ns.cipher.modes.ctr);F4("AES-GCM",ns.cipher.modes.gcm);function F4(t,e){var n=s(function(){return new ns.aes.Algorithm(t,e)},"factory");ns.cipher.registerAlgorithm(t,n)}s(F4,"registerAlgorithm");var Vle=!1,L4=4,Ou,Gle,jNe,q2,$m;function VNe(){Vle=!0,jNe=[0,1,2,4,8,16,32,64,128,27,54];for(var t=new Array(256),e=0;e<128;++e)t[e]=e<<1,t[e+128]=e+128<<1^283;Ou=new Array(256),Gle=new Array(256),q2=new Array(4),$m=new Array(4);for(var e=0;e<4;++e)q2[e]=new Array(256),$m[e]=new Array(256);for(var n=0,r=0,i,o,a,l,c,u,d,e=0;e<256;++e){l=r^r<<1^r<<2^r<<3^r<<4,l=l>>8^l&255^99,Ou[n]=l,Gle[l]=n,c=t[l],i=t[n],o=t[i],a=t[o],u=c<<24^l<<16^l<<8^(l^c),d=(i^o^a)<<24^(n^a)<<16^(n^o^a)<<8^(n^i^a);for(var p=0;p<4;++p)q2[p][n]=u,$m[p][l]=d,u=u<<24|u>>>8,d=d<<24|d>>>8;n===0?n=r=1:(n=i^t[t[t[i^a]]],r^=t[t[r]])}}s(VNe,"initialize");function $Ne(t,e){for(var n=t.slice(0),r,i=1,o=n.length,a=o+6+1,l=L4*a,c=o;c<l;++c)r=n[c-1],c%o===0?(r=Ou[r>>>16&255]<<24^Ou[r>>>8&255]<<16^Ou[r&255]<<8^Ou[r>>>24]^jNe[i]<<24,i++):o>6&&c%o===4&&(r=Ou[r>>>24]<<24^Ou[r>>>16&255]<<16^Ou[r>>>8&255]<<8^Ou[r&255]),n[c]=n[c-o]^r;if(e){var u,d=$m[0],p=$m[1],m=$m[2],h=$m[3],g=n.slice(0);l=n.length;for(var c=0,y=l-L4;c<l;c+=L4,y-=L4)if(c===0||c===l-L4)g[c]=n[y],g[c+1]=n[y+3],g[c+2]=n[y+2],g[c+3]=n[y+1];else for(var v=0;v<L4;++v)u=n[y+v],g[c+(3&-v)]=d[Ou[u>>>24]]^p[Ou[u>>>16&255]]^m[Ou[u>>>8&255]]^h[Ou[u&255]];n=g}return n}s($Ne,"_expandKey");function jle(t,e,n,r){var i=t.length/4-1,o,a,l,c,u;r?(o=$m[0],a=$m[1],l=$m[2],c=$m[3],u=Gle):(o=q2[0],a=q2[1],l=q2[2],c=q2[3],u=Ou);var d,p,m,h,g,y,v;d=e[0]^t[0],p=e[r?3:1]^t[1],m=e[2]^t[2],h=e[r?1:3]^t[3];for(var b=3,E=1;E<i;++E)g=o[d>>>24]^a[p>>>16&255]^l[m>>>8&255]^c[h&255]^t[++b],y=o[p>>>24]^a[m>>>16&255]^l[h>>>8&255]^c[d&255]^t[++b],v=o[m>>>24]^a[h>>>16&255]^l[d>>>8&255]^c[p&255]^t[++b],h=o[h>>>24]^a[d>>>16&255]^l[p>>>8&255]^c[m&255]^t[++b],d=g,p=y,m=v;n[0]=u[d>>>24]<<24^u[p>>>16&255]<<16^u[m>>>8&255]<<8^u[h&255]^t[++b],n[r?3:1]=u[p>>>24]<<24^u[m>>>16&255]<<16^u[h>>>8&255]<<8^u[d&255]^t[++b],n[2]=u[m>>>24]<<24^u[h>>>16&255]<<16^u[d>>>8&255]<<8^u[p&255]^t[++b],n[r?1:3]=u[h>>>24]<<24^u[d>>>16&255]<<16^u[p>>>8&255]<<8^u[m&255]^t[++b]}s(jle,"_updateBlock");function yH(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),n="AES-"+e,r;t.decrypt?r=ns.cipher.createDecipher(n,t.key):r=ns.cipher.createCipher(n,t.key);var i=r.start;return r.start=function(o,a){var l=null;a instanceof ns.util.ByteBuffer&&(l=a,a={}),a=a||{},a.output=l,a.iv=o,i.call(r,a)},r}s(yH,"_createCipher")});var Wv=H((iJn,YNe)=>{f();var _D=ui();_D.pki=_D.pki||{};var $le=YNe.exports=_D.pki.oids=_D.oids=_D.oids||{};function _t(t,e){$le[t]=e,$le[e]=t}s(_t,"_IN");function Eo(t,e){$le[t]=e}s(Eo,"_I_");_t("1.2.840.113549.1.1.1","rsaEncryption");_t("1.2.840.113549.1.1.4","md5WithRSAEncryption");_t("1.2.840.113549.1.1.5","sha1WithRSAEncryption");_t("1.2.840.113549.1.1.7","RSAES-OAEP");_t("1.2.840.113549.1.1.8","mgf1");_t("1.2.840.113549.1.1.9","pSpecified");_t("1.2.840.113549.1.1.10","RSASSA-PSS");_t("1.2.840.113549.1.1.11","sha256WithRSAEncryption");_t("1.2.840.113549.1.1.12","sha384WithRSAEncryption");_t("1.2.840.113549.1.1.13","sha512WithRSAEncryption");_t("1.3.101.112","EdDSA25519");_t("1.2.840.10040.4.3","dsa-with-sha1");_t("1.3.14.3.2.7","desCBC");_t("1.3.14.3.2.26","sha1");_t("1.3.14.3.2.29","sha1WithRSASignature");_t("2.16.840.1.101.3.4.2.1","sha256");_t("2.16.840.1.101.3.4.2.2","sha384");_t("2.16.840.1.101.3.4.2.3","sha512");_t("2.16.840.1.101.3.4.2.4","sha224");_t("2.16.840.1.101.3.4.2.5","sha512-224");_t("2.16.840.1.101.3.4.2.6","sha512-256");_t("1.2.840.113549.2.2","md2");_t("1.2.840.113549.2.5","md5");_t("1.2.840.113549.1.7.1","data");_t("1.2.840.113549.1.7.2","signedData");_t("1.2.840.113549.1.7.3","envelopedData");_t("1.2.840.113549.1.7.4","signedAndEnvelopedData");_t("1.2.840.113549.1.7.5","digestedData");_t("1.2.840.113549.1.7.6","encryptedData");_t("1.2.840.113549.1.9.1","emailAddress");_t("1.2.840.113549.1.9.2","unstructuredName");_t("1.2.840.113549.1.9.3","contentType");_t("1.2.840.113549.1.9.4","messageDigest");_t("1.2.840.113549.1.9.5","signingTime");_t("1.2.840.113549.1.9.6","counterSignature");_t("1.2.840.113549.1.9.7","challengePassword");_t("1.2.840.113549.1.9.8","unstructuredAddress");_t("1.2.840.113549.1.9.14","extensionRequest");_t("1.2.840.113549.1.9.20","friendlyName");_t("1.2.840.113549.1.9.21","localKeyId");_t("1.2.840.113549.1.9.22.1","x509Certificate");_t("1.2.840.113549.1.12.10.1.1","keyBag");_t("1.2.840.113549.1.12.10.1.2","pkcs8ShroudedKeyBag");_t("1.2.840.113549.1.12.10.1.3","certBag");_t("1.2.840.113549.1.12.10.1.4","crlBag");_t("1.2.840.113549.1.12.10.1.5","secretBag");_t("1.2.840.113549.1.12.10.1.6","safeContentsBag");_t("1.2.840.113549.1.5.13","pkcs5PBES2");_t("1.2.840.113549.1.5.12","pkcs5PBKDF2");_t("1.2.840.113549.1.12.1.1","pbeWithSHAAnd128BitRC4");_t("1.2.840.113549.1.12.1.2","pbeWithSHAAnd40BitRC4");_t("1.2.840.113549.1.12.1.3","pbeWithSHAAnd3-KeyTripleDES-CBC");_t("1.2.840.113549.1.12.1.4","pbeWithSHAAnd2-KeyTripleDES-CBC");_t("1.2.840.113549.1.12.1.5","pbeWithSHAAnd128BitRC2-CBC");_t("1.2.840.113549.1.12.1.6","pbewithSHAAnd40BitRC2-CBC");_t("1.2.840.113549.2.7","hmacWithSHA1");_t("1.2.840.113549.2.8","hmacWithSHA224");_t("1.2.840.113549.2.9","hmacWithSHA256");_t("1.2.840.113549.2.10","hmacWithSHA384");_t("1.2.840.113549.2.11","hmacWithSHA512");_t("1.2.840.113549.3.7","des-EDE3-CBC");_t("2.16.840.1.101.3.4.1.2","aes128-CBC");_t("2.16.840.1.101.3.4.1.22","aes192-CBC");_t("2.16.840.1.101.3.4.1.42","aes256-CBC");_t("2.5.4.3","commonName");_t("2.5.4.4","surname");_t("2.5.4.5","serialNumber");_t("2.5.4.6","countryName");_t("2.5.4.7","localityName");_t("2.5.4.8","stateOrProvinceName");_t("2.5.4.9","streetAddress");_t("2.5.4.10","organizationName");_t("2.5.4.11","organizationalUnitName");_t("2.5.4.12","title");_t("2.5.4.13","description");_t("2.5.4.15","businessCategory");_t("2.5.4.17","postalCode");_t("2.5.4.42","givenName");_t("1.3.6.1.4.1.311.60.2.1.2","jurisdictionOfIncorporationStateOrProvinceName");_t("1.3.6.1.4.1.311.60.2.1.3","jurisdictionOfIncorporationCountryName");_t("2.16.840.1.113730.1.1","nsCertType");_t("2.16.840.1.113730.1.13","nsComment");Eo("2.5.29.1","authorityKeyIdentifier");Eo("2.5.29.2","keyAttributes");Eo("2.5.29.3","certificatePolicies");Eo("2.5.29.4","keyUsageRestriction");Eo("2.5.29.5","policyMapping");Eo("2.5.29.6","subtreesConstraint");Eo("2.5.29.7","subjectAltName");Eo("2.5.29.8","issuerAltName");Eo("2.5.29.9","subjectDirectoryAttributes");Eo("2.5.29.10","basicConstraints");Eo("2.5.29.11","nameConstraints");Eo("2.5.29.12","policyConstraints");Eo("2.5.29.13","basicConstraints");_t("2.5.29.14","subjectKeyIdentifier");_t("2.5.29.15","keyUsage");Eo("2.5.29.16","privateKeyUsagePeriod");_t("2.5.29.17","subjectAltName");_t("2.5.29.18","issuerAltName");_t("2.5.29.19","basicConstraints");Eo("2.5.29.20","cRLNumber");Eo("2.5.29.21","cRLReason");Eo("2.5.29.22","expirationDate");Eo("2.5.29.23","instructionCode");Eo("2.5.29.24","invalidityDate");Eo("2.5.29.25","cRLDistributionPoints");Eo("2.5.29.26","issuingDistributionPoint");Eo("2.5.29.27","deltaCRLIndicator");Eo("2.5.29.28","issuingDistributionPoint");Eo("2.5.29.29","certificateIssuer");Eo("2.5.29.30","nameConstraints");_t("2.5.29.31","cRLDistributionPoints");_t("2.5.29.32","certificatePolicies");Eo("2.5.29.33","policyMappings");Eo("2.5.29.34","policyConstraints");_t("2.5.29.35","authorityKeyIdentifier");Eo("2.5.29.36","policyConstraints");_t("2.5.29.37","extKeyUsage");Eo("2.5.29.46","freshestCRL");Eo("2.5.29.54","inhibitAnyPolicy");_t("1.3.6.1.4.1.11129.2.4.2","timestampList");_t("1.3.6.1.5.5.7.1.1","authorityInfoAccess");_t("1.3.6.1.5.5.7.3.1","serverAuth");_t("1.3.6.1.5.5.7.3.2","clientAuth");_t("1.3.6.1.5.5.7.3.3","codeSigning");_t("1.3.6.1.5.5.7.3.4","emailProtection");_t("1.3.6.1.5.5.7.3.8","timeStamping")});var zm=H((aJn,JNe)=>{f();var vs=ui();uo();Wv();var rn=JNe.exports=vs.asn1=vs.asn1||{};rn.Class={UNIVERSAL:0,APPLICATION:64,CONTEXT_SPECIFIC:128,PRIVATE:192};rn.Type={NONE:0,BOOLEAN:1,INTEGER:2,BITSTRING:3,OCTETSTRING:4,NULL:5,OID:6,ODESC:7,EXTERNAL:8,REAL:9,ENUMERATED:10,EMBEDDED:11,UTF8:12,ROID:13,SEQUENCE:16,SET:17,PRINTABLESTRING:19,IA5STRING:22,UTCTIME:23,GENERALIZEDTIME:24,BMPSTRING:30};rn.create=function(t,e,n,r,i){if(vs.util.isArray(r)){for(var o=[],a=0;a<r.length;++a)r[a]!==void 0&&o.push(r[a]);r=o}var l={tagClass:t,type:e,constructed:n,composed:n||vs.util.isArray(r),value:r};return i&&"bitStringContents"in i&&(l.bitStringContents=i.bitStringContents,l.original=rn.copy(l)),l};rn.copy=function(t,e){var n;if(vs.util.isArray(t)){n=[];for(var r=0;r<t.length;++r)n.push(rn.copy(t[r],e));return n}return typeof t=="string"?t:(n={tagClass:t.tagClass,type:t.type,constructed:t.constructed,composed:t.composed,value:rn.copy(t.value,e)},e&&!e.excludeBitStringContents&&(n.bitStringContents=t.bitStringContents),n)};rn.equals=function(t,e,n){if(vs.util.isArray(t)){if(!vs.util.isArray(e)||t.length!==e.length)return!1;for(var r=0;r<t.length;++r)if(!rn.equals(t[r],e[r]))return!1;return!0}if(typeof t!=typeof e)return!1;if(typeof t=="string")return t===e;var i=t.tagClass===e.tagClass&&t.type===e.type&&t.constructed===e.constructed&&t.composed===e.composed&&rn.equals(t.value,e.value);return n&&n.includeBitStringContents&&(i=i&&t.bitStringContents===e.bitStringContents),i};rn.getBerValueLength=function(t){var e=t.getByte();if(e!==128){var n,r=e&128;return r?n=t.getInt((e&127)<<3):n=e,n}};function SD(t,e,n){if(n>e){var r=new Error("Too few bytes to parse DER.");throw r.available=t.length(),r.remaining=e,r.requested=n,r}}s(SD,"_checkBufferLength");var VSt=s(function(t,e){var n=t.getByte();if(e--,n!==128){var r,i=n&128;if(!i)r=n;else{var o=n&127;SD(t,e,o),r=t.getInt(o<<3)}if(r<0)throw new Error("Negative length: "+r);return r}},"_getValueLength");rn.fromDer=function(t,e){e===void 0&&(e={strict:!0,parseAllBytes:!0,decodeBitStrings:!0}),typeof e=="boolean"&&(e={strict:e,parseAllBytes:!0,decodeBitStrings:!0}),"strict"in e||(e.strict=!0),"parseAllBytes"in e||(e.parseAllBytes=!0),"decodeBitStrings"in e||(e.decodeBitStrings=!0),typeof t=="string"&&(t=vs.util.createBuffer(t));var n=t.length(),r=CH(t,t.length(),0,e);if(e.parseAllBytes&&t.length()!==0){var i=new Error("Unparsed DER bytes remain after ASN.1 parsing.");throw i.byteCount=n,i.remaining=t.length(),i}return r};function CH(t,e,n,r){var i;SD(t,e,2);var o=t.getByte();e--;var a=o&192,l=o&31;i=t.length();var c=VSt(t,e);if(e-=i-t.length(),c!==void 0&&c>e){if(r.strict){var u=new Error("Too few bytes to read ASN.1 value.");throw u.available=t.length(),u.remaining=e,u.requested=c,u}c=e}var d,p,m=(o&32)===32;if(m)if(d=[],c===void 0)for(;;){if(SD(t,e,2),t.bytes(2)==="\0\0"){t.getBytes(2),e-=2;break}i=t.length(),d.push(CH(t,e,n+1,r)),e-=i-t.length()}else for(;c>0;)i=t.length(),d.push(CH(t,c,n+1,r)),e-=i-t.length(),c-=i-t.length();if(d===void 0&&a===rn.Class.UNIVERSAL&&l===rn.Type.BITSTRING&&(p=t.bytes(c)),d===void 0&&r.decodeBitStrings&&a===rn.Class.UNIVERSAL&&l===rn.Type.BITSTRING&&c>1){var h=t.read,g=e,y=0;if(l===rn.Type.BITSTRING&&(SD(t,e,1),y=t.getByte(),e--),y===0)try{i=t.length();var v={strict:!0,decodeBitStrings:!0},b=CH(t,e,n+1,v),E=i-t.length();e-=E,l==rn.Type.BITSTRING&&E++;var _=b.tagClass;E===c&&(_===rn.Class.UNIVERSAL||_===rn.Class.CONTEXT_SPECIFIC)&&(d=[b])}catch{}d===void 0&&(t.read=h,e=g)}if(d===void 0){if(c===void 0){if(r.strict)throw new Error("Non-constructed ASN.1 object of indefinite length.");c=e}if(l===rn.Type.BMPSTRING)for(d="";c>0;c-=2)SD(t,e,2),d+=String.fromCharCode(t.getInt16()),e-=2;else d=t.getBytes(c),e-=c}var k=p===void 0?null:{bitStringContents:p};return rn.create(a,l,m,d,k)}s(CH,"_fromDer");rn.toDer=function(t){var e=vs.util.createBuffer(),n=t.tagClass|t.type,r=vs.util.createBuffer(),i=!1;if("bitStringContents"in t&&(i=!0,t.original&&(i=rn.equals(t,t.original))),i)r.putBytes(t.bitStringContents);else if(t.composed){t.constructed?n|=32:r.putByte(0);for(var o=0;o<t.value.length;++o)t.value[o]!==void 0&&r.putBuffer(rn.toDer(t.value[o]))}else if(t.type===rn.Type.BMPSTRING)for(var o=0;o<t.value.length;++o)r.putInt16(t.value.charCodeAt(o));else t.type===rn.Type.INTEGER&&t.value.length>1&&(t.value.charCodeAt(0)===0&&(t.value.charCodeAt(1)&128)===0||t.value.charCodeAt(0)===255&&(t.value.charCodeAt(1)&128)===128)?r.putBytes(t.value.substr(1)):r.putBytes(t.value);if(e.putByte(n),r.length()<=127)e.putByte(r.length()&127);else{var a=r.length(),l="";do l+=String.fromCharCode(a&255),a=a>>>8;while(a>0);e.putByte(l.length|128);for(var o=l.length-1;o>=0;--o)e.putByte(l.charCodeAt(o))}return e.putBuffer(r),e};rn.oidToDer=function(t){var e=t.split("."),n=vs.util.createBuffer();n.putByte(40*parseInt(e[0],10)+parseInt(e[1],10));for(var r,i,o,a,l=2;l<e.length;++l){r=!0,i=[],o=parseInt(e[l],10);do a=o&127,o=o>>>7,r||(a|=128),i.push(a),r=!1;while(o>0);for(var c=i.length-1;c>=0;--c)n.putByte(i[c])}return n};rn.derToOid=function(t){var e;typeof t=="string"&&(t=vs.util.createBuffer(t));var n=t.getByte();e=Math.floor(n/40)+"."+n%40;for(var r=0;t.length()>0;)n=t.getByte(),r=r<<7,n&128?r+=n&127:(e+="."+(r+n),r=0);return e};rn.utcTimeToDate=function(t){var e=new Date,n=parseInt(t.substr(0,2),10);n=n>=50?1900+n:2e3+n;var r=parseInt(t.substr(2,2),10)-1,i=parseInt(t.substr(4,2),10),o=parseInt(t.substr(6,2),10),a=parseInt(t.substr(8,2),10),l=0;if(t.length>11){var c=t.charAt(10),u=10;c!=="+"&&c!=="-"&&(l=parseInt(t.substr(10,2),10),u+=2)}if(e.setUTCFullYear(n,r,i),e.setUTCHours(o,a,l,0),u&&(c=t.charAt(u),c==="+"||c==="-")){var d=parseInt(t.substr(u+1,2),10),p=parseInt(t.substr(u+4,2),10),m=d*60+p;m*=6e4,c==="+"?e.setTime(+e-m):e.setTime(+e+m)}return e};rn.generalizedTimeToDate=function(t){var e=new Date,n=parseInt(t.substr(0,4),10),r=parseInt(t.substr(4,2),10)-1,i=parseInt(t.substr(6,2),10),o=parseInt(t.substr(8,2),10),a=parseInt(t.substr(10,2),10),l=parseInt(t.substr(12,2),10),c=0,u=0,d=!1;t.charAt(t.length-1)==="Z"&&(d=!0);var p=t.length-5,m=t.charAt(p);if(m==="+"||m==="-"){var h=parseInt(t.substr(p+1,2),10),g=parseInt(t.substr(p+4,2),10);u=h*60+g,u*=6e4,m==="+"&&(u*=-1),d=!0}return t.charAt(14)==="."&&(c=parseFloat(t.substr(14),10)*1e3),d?(e.setUTCFullYear(n,r,i),e.setUTCHours(o,a,l,c),e.setTime(+e+u)):(e.setFullYear(n,r,i),e.setHours(o,a,l,c)),e};rn.dateToUtcTime=function(t){if(typeof t=="string")return t;var e="",n=[];n.push((""+t.getUTCFullYear()).substr(2)),n.push(""+(t.getUTCMonth()+1)),n.push(""+t.getUTCDate()),n.push(""+t.getUTCHours()),n.push(""+t.getUTCMinutes()),n.push(""+t.getUTCSeconds());for(var r=0;r<n.length;++r)n[r].length<2&&(e+="0"),e+=n[r];return e+="Z",e};rn.dateToGeneralizedTime=function(t){if(typeof t=="string")return t;var e="",n=[];n.push(""+t.getUTCFullYear()),n.push(""+(t.getUTCMonth()+1)),n.push(""+t.getUTCDate()),n.push(""+t.getUTCHours()),n.push(""+t.getUTCMinutes()),n.push(""+t.getUTCSeconds());for(var r=0;r<n.length;++r)n[r].length<2&&(e+="0"),e+=n[r];return e+="Z",e};rn.integerToDer=function(t){var e=vs.util.createBuffer();if(t>=-128&&t<128)return e.putSignedInt(t,8);if(t>=-32768&&t<32768)return e.putSignedInt(t,16);if(t>=-8388608&&t<8388608)return e.putSignedInt(t,24);if(t>=-2147483648&&t<2147483648)return e.putSignedInt(t,32);var n=new Error("Integer too large; max is 32-bits.");throw n.integer=t,n};rn.derToInteger=function(t){typeof t=="string"&&(t=vs.util.createBuffer(t));var e=t.length()*8;if(e>32)throw new Error("Integer too large; max is 32-bits.");return t.getSignedInt(e)};rn.validate=function(t,e,n,r){var i=!1;if((t.tagClass===e.tagClass||typeof e.tagClass>"u")&&(t.type===e.type||typeof e.type>"u"))if(t.constructed===e.constructed||typeof e.constructed>"u"){if(i=!0,e.value&&vs.util.isArray(e.value))for(var o=0,a=0;i&&a<e.value.length;++a)i=e.value[a].optional||!1,t.value[o]&&(i=rn.validate(t.value[o],e.value[a],n,r),i?++o:e.value[a].optional&&(i=!0)),!i&&r&&r.push("["+e.name+'] Tag class "'+e.tagClass+'", type "'+e.type+'" expected value length "'+e.value.length+'", got "'+t.value.length+'"');if(i&&n&&(e.capture&&(n[e.capture]=t.value),e.captureAsn1&&(n[e.captureAsn1]=t),e.captureBitStringContents&&"bitStringContents"in t&&(n[e.captureBitStringContents]=t.bitStringContents),e.captureBitStringValue&&"bitStringContents"in t)){var l;if(t.bitStringContents.length<2)n[e.captureBitStringValue]="";else{var c=t.bitStringContents.charCodeAt(0);if(c!==0)throw new Error("captureBitStringValue only supported for zero unused bits");n[e.captureBitStringValue]=t.bitStringContents.slice(1)}}}else r&&r.push("["+e.name+'] Expected constructed "'+e.constructed+'", got "'+t.constructed+'"');else r&&(t.tagClass!==e.tagClass&&r.push("["+e.name+'] Expected tag class "'+e.tagClass+'", got "'+t.tagClass+'"'),t.type!==e.type&&r.push("["+e.name+'] Expected type "'+e.type+'", got "'+t.type+'"'));return i};var KNe=/[^\\u0000-\\u00ff]/;rn.prettyPrint=function(t,e,n){var r="";e=e||0,n=n||2,e>0&&(r+=`
`);for(var i="",o=0;o<e*n;++o)i+=" ";switch(r+=i+"Tag: ",t.tagClass){case rn.Class.UNIVERSAL:r+="Universal:";break;case rn.Class.APPLICATION:r+="Application:";break;case rn.Class.CONTEXT_SPECIFIC:r+="Context-Specific:";break;case rn.Class.PRIVATE:r+="Private:";break}if(t.tagClass===rn.Class.UNIVERSAL)switch(r+=t.type,t.type){case rn.Type.NONE:r+=" (None)";break;case rn.Type.BOOLEAN:r+=" (Boolean)";break;case rn.Type.INTEGER:r+=" (Integer)";break;case rn.Type.BITSTRING:r+=" (Bit string)";break;case rn.Type.OCTETSTRING:r+=" (Octet string)";break;case rn.Type.NULL:r+=" (Null)";break;case rn.Type.OID:r+=" (Object Identifier)";break;case rn.Type.ODESC:r+=" (Object Descriptor)";break;case rn.Type.EXTERNAL:r+=" (External or Instance of)";break;case rn.Type.REAL:r+=" (Real)";break;case rn.Type.ENUMERATED:r+=" (Enumerated)";break;case rn.Type.EMBEDDED:r+=" (Embedded PDV)";break;case rn.Type.UTF8:r+=" (UTF8)";break;case rn.Type.ROID:r+=" (Relative Object Identifier)";break;case rn.Type.SEQUENCE:r+=" (Sequence)";break;case rn.Type.SET:r+=" (Set)";break;case rn.Type.PRINTABLESTRING:r+=" (Printable String)";break;case rn.Type.IA5String:r+=" (IA5String (ASCII))";break;case rn.Type.UTCTIME:r+=" (UTC time)";break;case rn.Type.GENERALIZEDTIME:r+=" (Generalized time)";break;case rn.Type.BMPSTRING:r+=" (BMP String)";break}else r+=t.type;if(r+=`
`,r+=i+"Constructed: "+t.constructed+`
`,t.composed){for(var a=0,l="",o=0;o<t.value.length;++o)t.value[o]!==void 0&&(a+=1,l+=rn.prettyPrint(t.value[o],e+1,n),o+1<t.value.length&&(l+=","));r+=i+"Sub values: "+a+l}else{if(r+=i+"Value: ",t.type===rn.Type.OID){var c=rn.derToOid(t.value);r+=c,vs.pki&&vs.pki.oids&&c in vs.pki.oids&&(r+=" ("+vs.pki.oids[c]+") ")}if(t.type===rn.Type.INTEGER)try{r+=rn.derToInteger(t.value)}catch{r+="0x"+vs.util.bytesToHex(t.value)}else if(t.type===rn.Type.BITSTRING){if(t.value.length>1?r+="0x"+vs.util.bytesToHex(t.value.slice(1)):r+="(none)",t.value.length>0){var u=t.value.charCodeAt(0);u==1?r+=" (1 unused bit shown)":u>1&&(r+=" ("+u+" unused bits shown)")}}else if(t.type===rn.Type.OCTETSTRING)KNe.test(t.value)||(r+="("+t.value+") "),r+="0x"+vs.util.bytesToHex(t.value);else if(t.type===rn.Type.UTF8)try{r+=vs.util.decodeUtf8(t.value)}catch(d){if(d.message==="URI malformed")r+="0x"+vs.util.bytesToHex(t.value)+" (malformed UTF8)";else throw d}else t.type===rn.Type.PRINTABLESTRING||t.type===rn.Type.IA5String?r+=t.value:KNe.test(t.value)?r+="0x"+vs.util.bytesToHex(t.value):t.value.length===0?r+="[null]":r+=t.value}return r}});var Gg=H((uJn,XNe)=>{f();var xH=ui();XNe.exports=xH.md=xH.md||{};xH.md.algorithms=xH.md.algorithms||{}});var M4=H((fJn,ZNe)=>{f();var ay=ui();Gg();uo();var $St=ZNe.exports=ay.hmac=ay.hmac||{};$St.create=function(){var t=null,e=null,n=null,r=null,i={};return i.start=function(o,a){if(o!==null)if(typeof o=="string")if(o=o.toLowerCase(),o in ay.md.algorithms)e=ay.md.algorithms[o].create();else throw new Error('Unknown hash algorithm "'+o+'"');else e=o;if(a===null)a=t;else{if(typeof a=="string")a=ay.util.createBuffer(a);else if(ay.util.isArray(a)){var l=a;a=ay.util.createBuffer();for(var c=0;c<l.length;++c)a.putByte(l[c])}var u=a.length();u>e.blockLength&&(e.start(),e.update(a.bytes()),a=e.digest()),n=ay.util.createBuffer(),r=ay.util.createBuffer(),u=a.length();for(var c=0;c<u;++c){var l=a.at(c);n.putByte(54^l),r.putByte(92^l)}if(u<e.blockLength)for(var l=e.blockLength-u,c=0;c<l;++c)n.putByte(54),r.putByte(92);t=a,n=n.bytes(),r=r.bytes()}e.start(),e.update(n)},i.update=function(o){e.update(o)},i.getMac=function(){var o=e.digest().bytes();return e.start(),e.update(r),e.update(o),e.digest()},i.digest=i.getMac,i}});var bH=H((mJn,r7e)=>{f();var jg=ui();Gg();uo();var t7e=r7e.exports=jg.md5=jg.md5||{};jg.md.md5=jg.md.algorithms.md5=t7e;t7e.create=function(){n7e||zSt();var t=null,e=jg.util.createBuffer(),n=new Array(16),r={algorithm:"md5",blockLength:64,digestLength:16,messageLength:0,fullMessageLength:null,messageLengthSize:8};return r.start=function(){r.messageLength=0,r.fullMessageLength=r.messageLength64=[];for(var i=r.messageLengthSize/4,o=0;o<i;++o)r.fullMessageLength.push(0);return e=jg.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878},r},r.start(),r.update=function(i,o){o==="utf8"&&(i=jg.util.encodeUtf8(i));var a=i.length;r.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var l=r.fullMessageLength.length-1;l>=0;--l)r.fullMessageLength[l]+=a[1],a[1]=a[0]+(r.fullMessageLength[l]/4294967296>>>0),r.fullMessageLength[l]=r.fullMessageLength[l]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),e7e(t,n,e),(e.read>2048||e.length()===0)&&e.compact(),r},r.digest=function(){var i=jg.util.createBuffer();i.putBytes(e.bytes());var o=r.fullMessageLength[r.fullMessageLength.length-1]+r.messageLengthSize,a=o&r.blockLength-1;i.putBytes(zle.substr(0,r.blockLength-a));for(var l,c=0,u=r.fullMessageLength.length-1;u>=0;--u)l=r.fullMessageLength[u]*8+c,c=l/4294967296>>>0,i.putInt32Le(l>>>0);var d={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3};e7e(d,n,i);var p=jg.util.createBuffer();return p.putInt32Le(d.h0),p.putInt32Le(d.h1),p.putInt32Le(d.h2),p.putInt32Le(d.h3),p},r};var zle=null,vH=null,RD=null,Q4=null,n7e=!1;function zSt(){zle="\x80",zle+=jg.util.fillString("\0",64),vH=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,1,6,11,0,5,10,15,4,9,14,3,8,13,2,7,12,5,8,11,14,1,4,7,10,13,0,3,6,9,12,15,2,0,7,14,5,12,3,10,1,8,15,6,13,4,11,2,9],RD=[7,12,17,22,7,12,17,22,7,12,17,22,7,12,17,22,5,9,14,20,5,9,14,20,5,9,14,20,5,9,14,20,4,11,16,23,4,11,16,23,4,11,16,23,4,11,16,23,6,10,15,21,6,10,15,21,6,10,15,21,6,10,15,21],Q4=new Array(64);for(var t=0;t<64;++t)Q4[t]=Math.floor(Math.abs(Math.sin(t+1))*4294967296);n7e=!0}s(zSt,"_init");function e7e(t,e,n){for(var r,i,o,a,l,c,u,d,p=n.length();p>=64;){for(i=t.h0,o=t.h1,a=t.h2,l=t.h3,d=0;d<16;++d)e[d]=n.getInt32Le(),c=l^o&(a^l),r=i+c+Q4[d]+e[d],u=RD[d],i=l,l=a,a=o,o+=r<<u|r>>>32-u;for(;d<32;++d)c=a^l&(o^a),r=i+c+Q4[d]+e[vH[d]],u=RD[d],i=l,l=a,a=o,o+=r<<u|r>>>32-u;for(;d<48;++d)c=o^a^l,r=i+c+Q4[d]+e[vH[d]],u=RD[d],i=l,l=a,a=o,o+=r<<u|r>>>32-u;for(;d<64;++d)c=a^(o|~l),r=i+c+Q4[d]+e[vH[d]],u=RD[d],i=l,l=a,a=o,o+=r<<u|r>>>32-u;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+a|0,t.h3=t.h3+l|0,p-=64}}s(e7e,"_update")});var W2=H((AJn,o7e)=>{f();var IH=ui();uo();var i7e=o7e.exports=IH.pem=IH.pem||{};i7e.encode=function(t,e){e=e||{};var n="-----BEGIN "+t.type+`-----\r
`,r;if(t.procType&&(r={name:"Proc-Type",values:[String(t.procType.version),t.procType.type]},n+=EH(r)),t.contentDomain&&(r={name:"Content-Domain",values:[t.contentDomain]},n+=EH(r)),t.dekInfo&&(r={name:"DEK-Info",values:[t.dekInfo.algorithm]},t.dekInfo.parameters&&r.values.push(t.dekInfo.parameters),n+=EH(r)),t.headers)for(var i=0;i<t.headers.length;++i)n+=EH(t.headers[i]);return t.procType&&(n+=`\r
`),n+=IH.util.encode64(t.body,e.maxline||64)+`\r
`,n+="-----END "+t.type+`-----\r
`,n};i7e.decode=function(t){for(var e=[],n=/\s*-----BEGIN ([A-Z0-9- ]+)-----\r?\n?([\x21-\x7e\s]+?(?:\r?\n\r?\n))?([:A-Za-z0-9+\/=\s]+?)-----END \1-----/g,r=/([\x21-\x7e]+):\s*([\x21-\x7e\s^:]+)/,i=/\r?\n/,o;o=n.exec(t),!!o;){var a=o[1];a==="NEW CERTIFICATE REQUEST"&&(a="CERTIFICATE REQUEST");var l={type:a,procType:null,contentDomain:null,dekInfo:null,headers:[],body:IH.util.decode64(o[3])};if(e.push(l),!!o[2]){for(var c=o[2].split(i),u=0;o&&u<c.length;){for(var d=c[u].replace(/\s+$/,""),p=u+1;p<c.length;++p){var m=c[p];if(!/\s/.test(m[0]))break;d+=m,u=p}if(o=d.match(r),o){for(var h={name:o[1],values:[]},g=o[2].split(","),y=0;y<g.length;++y)h.values.push(YSt(g[y]));if(l.procType)if(!l.contentDomain&&h.name==="Content-Domain")l.contentDomain=g[0]||"";else if(!l.dekInfo&&h.name==="DEK-Info"){if(h.values.length===0)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must have at least one subfield.');l.dekInfo={algorithm:g[0],parameters:g[1]||null}}else l.headers.push(h);else{if(h.name!=="Proc-Type")throw new Error('Invalid PEM formatted message. The first encapsulated header must be "Proc-Type".');if(h.values.length!==2)throw new Error('Invalid PEM formatted message. The "Proc-Type" header must have two subfields.');l.procType={version:g[0],type:g[1]}}}++u}if(l.procType==="ENCRYPTED"&&!l.dekInfo)throw new Error('Invalid PEM formatted message. The "DEK-Info" header must be present if "Proc-Type" is "ENCRYPTED".')}}if(e.length===0)throw new Error("Invalid PEM formatted message.");return e};function EH(t){for(var e=t.name+": ",n=[],r=s(function(c,u){return" "+u},"insertSpace"),i=0;i<t.values.length;++i)n.push(t.values[i].replace(/^(\S+\r\n)/,r));e+=n.join(",")+`\r
`;for(var o=0,a=-1,i=0;i<e.length;++i,++o)if(o>65&&a!==-1){var l=e[a];l===","?(++a,e=e.substr(0,a)+`\r
 `+e.substr(a)):e=e.substr(0,a)+`\r
`+l+e.substr(a+1),o=i-a-1,a=-1,++i}else(e[i]===" "||e[i]==="	"||e[i]===",")&&(a=i);return e}s(EH,"foldHeader");function YSt(t){return t.replace(/^\s+/,"")}s(YSt,"ltrim")});var kD=H((xJn,a7e)=>{f();var Os=ui();hH();Hle();uo();a7e.exports=Os.des=Os.des||{};Os.des.startEncrypting=function(t,e,n,r){var i=TH({key:t,output:n,decrypt:!1,mode:r||(e===null?"ECB":"CBC")});return i.start(e),i};Os.des.createEncryptionCipher=function(t,e){return TH({key:t,output:null,decrypt:!1,mode:e})};Os.des.startDecrypting=function(t,e,n,r){var i=TH({key:t,output:n,decrypt:!0,mode:r||(e===null?"ECB":"CBC")});return i.start(e),i};Os.des.createDecryptionCipher=function(t,e){return TH({key:t,output:null,decrypt:!0,mode:e})};Os.des.Algorithm=function(t,e){var n=this;n.name=t,n.mode=new e({blockSize:8,cipher:{encrypt:s(function(r,i){return s7e(n._keys,r,i,!1)},"encrypt"),decrypt:s(function(r,i){return s7e(n._keys,r,i,!0)},"decrypt")}}),n._init=!1};Os.des.Algorithm.prototype.initialize=function(t){if(!this._init){var e=Os.util.createBuffer(t.key);if(this.name.indexOf("3DES")===0&&e.length()!==24)throw new Error("Invalid Triple-DES key size: "+e.length()*8);this._keys=i5t(e),this._init=!0}};Vg("DES-ECB",Os.cipher.modes.ecb);Vg("DES-CBC",Os.cipher.modes.cbc);Vg("DES-CFB",Os.cipher.modes.cfb);Vg("DES-OFB",Os.cipher.modes.ofb);Vg("DES-CTR",Os.cipher.modes.ctr);Vg("3DES-ECB",Os.cipher.modes.ecb);Vg("3DES-CBC",Os.cipher.modes.cbc);Vg("3DES-CFB",Os.cipher.modes.cfb);Vg("3DES-OFB",Os.cipher.modes.ofb);Vg("3DES-CTR",Os.cipher.modes.ctr);function Vg(t,e){var n=s(function(){return new Os.des.Algorithm(t,e)},"factory");Os.cipher.registerAlgorithm(t,n)}s(Vg,"registerAlgorithm");var KSt=[16843776,0,65536,16843780,16842756,66564,4,65536,1024,16843776,16843780,1024,16778244,16842756,16777216,4,1028,16778240,16778240,66560,66560,16842752,16842752,16778244,65540,16777220,16777220,65540,0,1028,66564,16777216,65536,16843780,4,16842752,16843776,16777216,16777216,1024,16842756,65536,66560,16777220,1024,4,16778244,66564,16843780,65540,16842752,16778244,16777220,1028,66564,16843776,1028,16778240,16778240,0,65540,66560,0,16842756],JSt=[-2146402272,-2147450880,32768,1081376,1048576,32,-2146435040,-2147450848,-2147483616,-2146402272,-2146402304,-2147483648,-2147450880,1048576,32,-2146435040,1081344,1048608,-2147450848,0,-2147483648,32768,1081376,-2146435072,1048608,-2147483616,0,1081344,32800,-2146402304,-2146435072,32800,0,1081376,-2146435040,1048576,-2147450848,-2146435072,-2146402304,32768,-2146435072,-2147450880,32,-2146402272,1081376,32,32768,-2147483648,32800,-2146402304,1048576,-2147483616,1048608,-2147450848,-2147483616,1048608,1081344,0,-2147450880,32800,-2147483648,-2146435040,-2146402272,1081344],XSt=[520,134349312,0,134348808,134218240,0,131592,134218240,131080,134217736,134217736,131072,134349320,131080,134348800,520,134217728,8,134349312,512,131584,134348800,134348808,131592,134218248,131584,131072,134218248,8,134349320,512,134217728,134349312,134217728,131080,520,131072,134349312,134218240,0,512,131080,134349320,134218240,134217736,512,0,134348808,134218248,131072,134217728,134349320,8,131592,131584,134217736,134348800,134218248,520,134348800,131592,8,134348808,131584],ZSt=[8396801,8321,8321,128,8396928,8388737,8388609,8193,0,8396800,8396800,8396929,129,0,8388736,8388609,1,8192,8388608,8396801,128,8388608,8193,8320,8388737,1,8320,8388736,8192,8396928,8396929,129,8388736,8388609,8396800,8396929,129,0,0,8396800,8320,8388736,8388737,1,8396801,8321,8321,128,8396929,129,1,8192,8388609,8193,8396928,8388737,8193,8320,8388608,8396801,128,8388608,8192,8396928],e5t=[256,34078976,34078720,1107296512,524288,256,1073741824,34078720,1074266368,524288,33554688,1074266368,1107296512,1107820544,524544,1073741824,33554432,1074266112,1074266112,0,1073742080,1107820800,1107820800,33554688,1107820544,1073742080,0,1107296256,34078976,33554432,1107296256,524544,524288,1107296512,256,33554432,1073741824,34078720,1107296512,1074266368,33554688,1073741824,1107820544,34078976,1074266368,256,33554432,1107820544,1107820800,524544,1107296256,1107820800,34078720,0,1074266112,1107296256,524544,33554688,1073742080,524288,0,1074266112,34078976,1073742080],t5t=[536870928,541065216,16384,541081616,541065216,16,541081616,4194304,536887296,4210704,4194304,536870928,4194320,536887296,536870912,16400,0,4194320,536887312,16384,4210688,536887312,16,541065232,541065232,0,4210704,541081600,16400,4210688,541081600,536870912,536887296,16,541065232,4210688,541081616,4194304,16400,536870928,4194304,536887296,536870912,16400,536870928,541081616,4210688,541065216,4210704,541081600,0,541065232,16,16384,541065216,4210704,16384,4194320,536887312,0,541081600,536870912,4194320,536887312],n5t=[2097152,69206018,67110914,0,2048,67110914,2099202,69208064,69208066,2097152,0,67108866,2,67108864,69206018,2050,67110912,2099202,2097154,67110912,67108866,69206016,69208064,2097154,69206016,2048,2050,69208066,2099200,2,67108864,2099200,67108864,2099200,2097152,67110914,67110914,69206018,69206018,2,2097154,67108864,67110912,2097152,69208064,2050,2099202,69208064,2050,67108866,69208066,69206016,2099200,0,2,69208066,0,2099202,69206016,2048,67108866,67110912,2048,2097154],r5t=[268439616,4096,262144,268701760,268435456,268439616,64,268435456,262208,268697600,268701760,266240,268701696,266304,4096,64,268697600,268435520,268439552,4160,266240,262208,268697664,268701696,4160,0,0,268697664,268435520,268439552,266304,262144,266304,262144,268701696,4096,64,268697664,4096,266304,268439552,64,268435520,268697600,268697664,268435456,262144,268439616,0,268701760,262208,268435520,268697600,268439552,268439616,0,268701760,266240,266240,4160,4160,262208,268435456,268701696];function i5t(t){for(var e=[0,4,536870912,536870916,65536,65540,536936448,536936452,512,516,536871424,536871428,66048,66052,536936960,536936964],n=[0,1,1048576,1048577,67108864,67108865,68157440,68157441,256,257,1048832,1048833,67109120,67109121,68157696,68157697],r=[0,8,2048,2056,16777216,16777224,16779264,16779272,0,8,2048,2056,16777216,16777224,16779264,16779272],i=[0,2097152,134217728,136314880,8192,2105344,134225920,136323072,131072,2228224,134348800,136445952,139264,2236416,134356992,136454144],o=[0,262144,16,262160,0,262144,16,262160,4096,266240,4112,266256,4096,266240,4112,266256],a=[0,1024,32,1056,0,1024,32,1056,33554432,33555456,33554464,33555488,33554432,33555456,33554464,33555488],l=[0,268435456,524288,268959744,2,268435458,524290,268959746,0,268435456,524288,268959744,2,268435458,524290,268959746],c=[0,65536,2048,67584,536870912,536936448,536872960,536938496,131072,196608,133120,198656,537001984,537067520,537004032,537069568],u=[0,262144,0,262144,2,262146,2,262146,33554432,33816576,33554432,33816576,33554434,33816578,33554434,33816578],d=[0,268435456,8,268435464,0,268435456,8,268435464,1024,268436480,1032,268436488,1024,268436480,1032,268436488],p=[0,32,0,32,1048576,1048608,1048576,1048608,8192,8224,8192,8224,1056768,1056800,1056768,1056800],m=[0,16777216,512,16777728,2097152,18874368,2097664,18874880,67108864,83886080,67109376,83886592,69206016,85983232,69206528,85983744],h=[0,4096,134217728,134221824,524288,528384,134742016,134746112,16,4112,134217744,134221840,524304,528400,134742032,134746128],g=[0,4,256,260,0,4,256,260,1,5,257,261,1,5,257,261],y=t.length()>8?3:1,v=[],b=[0,0,1,1,1,1,1,1,0,1,1,1,1,1,1,0],E=0,_,k=0;k<y;k++){var P=t.getInt32(),N=t.getInt32();_=(P>>>4^N)&252645135,N^=_,P^=_<<4,_=(N>>>-16^P)&65535,P^=_,N^=_<<-16,_=(P>>>2^N)&858993459,N^=_,P^=_<<2,_=(N>>>-16^P)&65535,P^=_,N^=_<<-16,_=(P>>>1^N)&1431655765,N^=_,P^=_<<1,_=(N>>>8^P)&16711935,P^=_,N^=_<<8,_=(P>>>1^N)&1431655765,N^=_,P^=_<<1,_=P<<8|N>>>20&240,P=N<<24|N<<8&16711680|N>>>8&65280|N>>>24&240,N=_;for(var U=0;U<b.length;++U){b[U]?(P=P<<2|P>>>26,N=N<<2|N>>>26):(P=P<<1|P>>>27,N=N<<1|N>>>27),P&=-15,N&=-15;var ne=e[P>>>28]|n[P>>>24&15]|r[P>>>20&15]|i[P>>>16&15]|o[P>>>12&15]|a[P>>>8&15]|l[P>>>4&15],he=c[N>>>28]|u[N>>>24&15]|d[N>>>20&15]|p[N>>>16&15]|m[N>>>12&15]|h[N>>>8&15]|g[N>>>4&15];_=(he>>>16^ne)&65535,v[E++]=ne^_,v[E++]=he^_<<16}}return v}s(i5t,"_createKeys");function s7e(t,e,n,r){var i=t.length===32?3:9,o;i===3?o=r?[30,-2,-2]:[0,32,2]:o=r?[94,62,-2,32,64,2,30,-2,-2]:[0,32,2,62,30,-2,64,96,2];var a,l=e[0],c=e[1];a=(l>>>4^c)&252645135,c^=a,l^=a<<4,a=(l>>>16^c)&65535,c^=a,l^=a<<16,a=(c>>>2^l)&858993459,l^=a,c^=a<<2,a=(c>>>8^l)&16711935,l^=a,c^=a<<8,a=(l>>>1^c)&1431655765,c^=a,l^=a<<1,l=l<<1|l>>>31,c=c<<1|c>>>31;for(var u=0;u<i;u+=3){for(var d=o[u+1],p=o[u+2],m=o[u];m!=d;m+=p){var h=c^t[m],g=(c>>>4|c<<28)^t[m+1];a=l,l=c,c=a^(JSt[h>>>24&63]|ZSt[h>>>16&63]|t5t[h>>>8&63]|r5t[h&63]|KSt[g>>>24&63]|XSt[g>>>16&63]|e5t[g>>>8&63]|n5t[g&63])}a=l,l=c,c=a}l=l>>>1|l<<31,c=c>>>1|c<<31,a=(l>>>1^c)&1431655765,c^=a,l^=a<<1,a=(c>>>8^l)&16711935,l^=a,c^=a<<8,a=(c>>>2^l)&858993459,l^=a,c^=a<<2,a=(l>>>16^c)&65535,c^=a,l^=a<<16,a=(l>>>4^c)&252645135,c^=a,l^=a<<4,n[0]=l,n[1]=c}s(s7e,"_updateBlock");function TH(t){t=t||{};var e=(t.mode||"CBC").toUpperCase(),n="DES-"+e,r;t.decrypt?r=Os.cipher.createDecipher(n,t.key):r=Os.cipher.createCipher(n,t.key);var i=r.start;return r.start=function(o,a){var l=null;a instanceof Os.util.ByteBuffer&&(l=a,a={}),a=a||{},a.output=l,a.iv=o,i.call(r,a)},r}s(TH,"_createCipher")});var wH=H((EJn,l7e)=>{f();var Uu=ui();M4();Gg();uo();var o5t=Uu.pkcs5=Uu.pkcs5||{},ly;Uu.util.isNodejs&&!Uu.options.usePureJavaScript&&(ly=require("crypto"));l7e.exports=Uu.pbkdf2=o5t.pbkdf2=function(t,e,n,r,i,o){if(typeof i=="function"&&(o=i,i=null),Uu.util.isNodejs&&!Uu.options.usePureJavaScript&&ly.pbkdf2&&(i===null||typeof i!="object")&&(ly.pbkdf2Sync.length>4||!i||i==="sha1"))return typeof i!="string"&&(i="sha1"),t=Buffer.from(t,"binary"),e=Buffer.from(e,"binary"),o?ly.pbkdf2Sync.length===4?ly.pbkdf2(t,e,n,r,function(_,k){if(_)return o(_);o(null,k.toString("binary"))}):ly.pbkdf2(t,e,n,r,i,function(_,k){if(_)return o(_);o(null,k.toString("binary"))}):ly.pbkdf2Sync.length===4?ly.pbkdf2Sync(t,e,n,r).toString("binary"):ly.pbkdf2Sync(t,e,n,r,i).toString("binary");if((typeof i>"u"||i===null)&&(i="sha1"),typeof i=="string"){if(!(i in Uu.md.algorithms))throw new Error("Unknown hash algorithm: "+i);i=Uu.md[i].create()}var a=i.digestLength;if(r>4294967295*a){var l=new Error("Derived key is too long.");if(o)return o(l);throw l}var c=Math.ceil(r/a),u=r-(c-1)*a,d=Uu.hmac.create();d.start(i,t);var p="",m,h,g;if(!o){for(var y=1;y<=c;++y){d.start(null,null),d.update(e),d.update(Uu.util.int32ToBytes(y)),m=g=d.digest().getBytes();for(var v=2;v<=n;++v)d.start(null,null),d.update(g),h=d.digest().getBytes(),m=Uu.util.xorBytes(m,h,a),g=h;p+=y<c?m:m.substr(0,u)}return p}var y=1,v;function b(){if(y>c)return o(null,p);d.start(null,null),d.update(e),d.update(Uu.util.int32ToBytes(y)),m=g=d.digest().getBytes(),v=2,E()}s(b,"outer");function E(){if(v<=n)return d.start(null,null),d.update(g),h=d.digest().getBytes(),m=Uu.util.xorBytes(m,h,a),g=h,++v,Uu.util.setImmediate(E);p+=y<c?m:m.substr(0,u),++y,b()}s(E,"inner"),b()}});var Kle=H((wJn,p7e)=>{f();var $g=ui();Gg();uo();var u7e=p7e.exports=$g.sha256=$g.sha256||{};$g.md.sha256=$g.md.algorithms.sha256=u7e;u7e.create=function(){d7e||s5t();var t=null,e=$g.util.createBuffer(),n=new Array(64),r={algorithm:"sha256",blockLength:64,digestLength:32,messageLength:0,fullMessageLength:null,messageLengthSize:8};return r.start=function(){r.messageLength=0,r.fullMessageLength=r.messageLength64=[];for(var i=r.messageLengthSize/4,o=0;o<i;++o)r.fullMessageLength.push(0);return e=$g.util.createBuffer(),t={h0:1779033703,h1:3144134277,h2:1013904242,h3:2773480762,h4:1359893119,h5:2600822924,h6:528734635,h7:1541459225},r},r.start(),r.update=function(i,o){o==="utf8"&&(i=$g.util.encodeUtf8(i));var a=i.length;r.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var l=r.fullMessageLength.length-1;l>=0;--l)r.fullMessageLength[l]+=a[1],a[1]=a[0]+(r.fullMessageLength[l]/4294967296>>>0),r.fullMessageLength[l]=r.fullMessageLength[l]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),c7e(t,n,e),(e.read>2048||e.length()===0)&&e.compact(),r},r.digest=function(){var i=$g.util.createBuffer();i.putBytes(e.bytes());var o=r.fullMessageLength[r.fullMessageLength.length-1]+r.messageLengthSize,a=o&r.blockLength-1;i.putBytes(Yle.substr(0,r.blockLength-a));for(var l,c,u=r.fullMessageLength[0]*8,d=0;d<r.fullMessageLength.length-1;++d)l=r.fullMessageLength[d+1]*8,c=l/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=l>>>0;i.putInt32(u);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4,h5:t.h5,h6:t.h6,h7:t.h7};c7e(p,n,i);var m=$g.util.createBuffer();return m.putInt32(p.h0),m.putInt32(p.h1),m.putInt32(p.h2),m.putInt32(p.h3),m.putInt32(p.h4),m.putInt32(p.h5),m.putInt32(p.h6),m.putInt32(p.h7),m},r};var Yle=null,d7e=!1,f7e=null;function s5t(){Yle="\x80",Yle+=$g.util.fillString("\0",64),f7e=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],d7e=!0}s(s5t,"_init");function c7e(t,e,n){for(var r,i,o,a,l,c,u,d,p,m,h,g,y,v,b,E=n.length();E>=64;){for(u=0;u<16;++u)e[u]=n.getInt32();for(;u<64;++u)r=e[u-2],r=(r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10,i=e[u-15],i=(i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3,e[u]=r+e[u-7]+i+e[u-16]|0;for(d=t.h0,p=t.h1,m=t.h2,h=t.h3,g=t.h4,y=t.h5,v=t.h6,b=t.h7,u=0;u<64;++u)a=(g>>>6|g<<26)^(g>>>11|g<<21)^(g>>>25|g<<7),l=v^g&(y^v),o=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),c=d&p|m&(d^p),r=b+a+l+f7e[u]+e[u],i=o+c,b=v,v=y,y=g,g=h+r>>>0,h=m,m=p,p=d,d=r+i>>>0;t.h0=t.h0+d|0,t.h1=t.h1+p|0,t.h2=t.h2+m|0,t.h3=t.h3+h|0,t.h4=t.h4+g|0,t.h5=t.h5+y|0,t.h6=t.h6+v|0,t.h7=t.h7+b|0,E-=64}}s(c7e,"_update")});var Jle=H((RJn,m7e)=>{f();var zg=ui();uo();var _H=null;zg.util.isNodejs&&!zg.options.usePureJavaScript&&!process.versions["node-webkit"]&&(_H=require("crypto"));var a5t=m7e.exports=zg.prng=zg.prng||{};a5t.create=function(t){for(var e={plugin:t,key:null,seed:null,time:null,reseeds:0,generated:0,keyBytes:""},n=t.md,r=new Array(32),i=0;i<32;++i)r[i]=n.create();e.pools=r,e.pool=0,e.generate=function(u,d){if(!d)return e.generateSync(u);var p=e.plugin.cipher,m=e.plugin.increment,h=e.plugin.formatKey,g=e.plugin.formatSeed,y=zg.util.createBuffer();e.key=null,v();function v(b){if(b)return d(b);if(y.length()>=u)return d(null,y.getBytes(u));if(e.generated>1048575&&(e.key=null),e.key===null)return zg.util.nextTick(function(){o(v)});var E=p(e.key,e.seed);e.generated+=E.length,y.putBytes(E),e.key=h(p(e.key,m(e.seed))),e.seed=g(p(e.key,e.seed)),zg.util.setImmediate(v)}s(v,"generate")},e.generateSync=function(u){var d=e.plugin.cipher,p=e.plugin.increment,m=e.plugin.formatKey,h=e.plugin.formatSeed;e.key=null;for(var g=zg.util.createBuffer();g.length()<u;){e.generated>1048575&&(e.key=null),e.key===null&&a();var y=d(e.key,e.seed);e.generated+=y.length,g.putBytes(y),e.key=m(d(e.key,p(e.seed))),e.seed=h(d(e.key,e.seed))}return g.getBytes(u)};function o(u){if(e.pools[0].messageLength>=32)return l(),u();var d=32-e.pools[0].messageLength<<5;e.seedFile(d,function(p,m){if(p)return u(p);e.collect(m),l(),u()})}s(o,"_reseed");function a(){if(e.pools[0].messageLength>=32)return l();var u=32-e.pools[0].messageLength<<5;e.collect(e.seedFileSync(u)),l()}s(a,"_reseedSync");function l(){e.reseeds=e.reseeds===4294967295?0:e.reseeds+1;var u=e.plugin.md.create();u.update(e.keyBytes);for(var d=1,p=0;p<32;++p)e.reseeds%d===0&&(u.update(e.pools[p].digest().getBytes()),e.pools[p].start()),d=d<<1;e.keyBytes=u.digest().getBytes(),u.start(),u.update(e.keyBytes);var m=u.digest().getBytes();e.key=e.plugin.formatKey(e.keyBytes),e.seed=e.plugin.formatSeed(m),e.generated=0}s(l,"_seed");function c(u){var d=null,p=zg.util.globalScope,m=p.crypto||p.msCrypto;m&&m.getRandomValues&&(d=s(function(P){return m.getRandomValues(P)},"getRandomValues"));var h=zg.util.createBuffer();if(d)for(;h.length()<u;){var g=Math.max(1,Math.min(u-h.length(),65536)/4),y=new Uint32Array(Math.floor(g));try{d(y);for(var v=0;v<y.length;++v)h.putInt32(y[v])}catch(P){if(!(typeof QuotaExceededError<"u"&&P instanceof QuotaExceededError))throw P}}if(h.length()<u)for(var b,E,_,k=Math.floor(Math.random()*65536);h.length()<u;){E=16807*(k&65535),b=16807*(k>>16),E+=(b&32767)<<16,E+=b>>15,E=(E&2147483647)+(E>>31),k=E&4294967295;for(var v=0;v<3;++v)_=k>>>(v<<3),_^=Math.floor(Math.random()*256),h.putByte(_&255)}return h.getBytes(u)}return s(c,"defaultSeedFile"),_H?(e.seedFile=function(u,d){_H.randomBytes(u,function(p,m){if(p)return d(p);d(null,m.toString())})},e.seedFileSync=function(u){return _H.randomBytes(u).toString()}):(e.seedFile=function(u,d){try{d(null,c(u))}catch(p){d(p)}},e.seedFileSync=c),e.collect=function(u){for(var d=u.length,p=0;p<d;++p)e.pools[e.pool].update(u.substr(p,1)),e.pool=e.pool===31?0:e.pool+1},e.collectInt=function(u,d){for(var p="",m=0;m<d;m+=8)p+=String.fromCharCode(u>>m&255);e.collect(p)},e.registerWorker=function(u){if(u===self)e.seedFile=function(p,m){function h(g){var y=g.data;y.forge&&y.forge.prng&&(self.removeEventListener("message",h),m(y.forge.prng.err,y.forge.prng.bytes))}s(h,"listener"),self.addEventListener("message",h),self.postMessage({forge:{prng:{needed:p}}})};else{var d=s(function(p){var m=p.data;m.forge&&m.forge.prng&&e.seedFile(m.forge.prng.needed,function(h,g){u.postMessage({forge:{prng:{err:h,bytes:g}}})})},"listener");u.addEventListener("message",d)}},e}});var cp=H((PJn,Xle)=>{f();var Vl=ui();qv();Kle();Jle();uo();(function(){if(Vl.random&&Vl.random.getBytes){Xle.exports=Vl.random;return}(function(t){var e={},n=new Array(4),r=Vl.util.createBuffer();e.formatKey=function(p){var m=Vl.util.createBuffer(p);return p=new Array(4),p[0]=m.getInt32(),p[1]=m.getInt32(),p[2]=m.getInt32(),p[3]=m.getInt32(),Vl.aes._expandKey(p,!1)},e.formatSeed=function(p){var m=Vl.util.createBuffer(p);return p=new Array(4),p[0]=m.getInt32(),p[1]=m.getInt32(),p[2]=m.getInt32(),p[3]=m.getInt32(),p},e.cipher=function(p,m){return Vl.aes._updateBlock(p,m,n,!1),r.putInt32(n[0]),r.putInt32(n[1]),r.putInt32(n[2]),r.putInt32(n[3]),r.getBytes()},e.increment=function(p){return++p[3],p},e.md=Vl.md.sha256;function i(){var p=Vl.prng.create(e);return p.getBytes=function(m,h){return p.generate(m,h)},p.getBytesSync=function(m){return p.generate(m)},p}s(i,"spawnPrng");var o=i(),a=null,l=Vl.util.globalScope,c=l.crypto||l.msCrypto;if(c&&c.getRandomValues&&(a=s(function(p){return c.getRandomValues(p)},"getRandomValues")),Vl.options.usePureJavaScript||!Vl.util.isNodejs&&!a){if(typeof window>"u"||window.document,o.collectInt(+new Date,32),typeof navigator<"u"){var u="";for(var d in navigator)try{typeof navigator[d]=="string"&&(u+=navigator[d])}catch{}o.collect(u),u=null}t&&(t().mousemove(function(p){o.collectInt(p.clientX,16),o.collectInt(p.clientY,16)}),t().keypress(function(p){o.collectInt(p.charCode,8)}))}if(!Vl.random)Vl.random=o;else for(var d in o)Vl.random[d]=o[d];Vl.random.createInstance=i,Xle.exports=Vl.random})(typeof jQuery<"u"?jQuery:null)})()});var ece=H((LJn,A7e)=>{f();var kd=ui();uo();var Zle=[217,120,249,196,25,221,181,237,40,233,253,121,74,160,216,157,198,126,55,131,43,118,83,142,98,76,100,136,68,139,251,162,23,154,89,245,135,179,79,19,97,69,109,141,9,129,125,50,189,143,64,235,134,183,123,11,240,149,33,34,92,107,78,130,84,214,101,147,206,96,178,28,115,86,192,20,167,140,241,220,18,117,202,31,59,190,228,209,66,61,212,48,163,60,182,38,111,191,14,218,70,105,7,87,39,242,29,155,188,148,67,3,248,17,199,246,144,239,62,231,6,195,213,47,200,102,30,215,8,232,234,222,128,82,238,247,132,170,114,172,53,77,106,42,150,26,210,113,90,21,73,116,75,159,208,94,4,24,164,236,194,224,65,110,15,81,203,204,36,145,175,80,161,244,112,57,153,124,58,133,35,184,180,122,252,2,54,91,37,85,151,49,45,93,250,152,227,138,146,174,5,223,41,16,103,108,186,201,211,0,230,207,225,158,168,44,99,22,1,63,88,226,137,169,13,56,52,27,171,51,255,176,187,72,12,95,185,177,205,46,197,243,219,71,229,165,156,119,10,166,32,104,254,127,193,173],h7e=[1,2,3,5],l5t=s(function(t,e){return t<<e&65535|(t&65535)>>16-e},"rol"),c5t=s(function(t,e){return(t&65535)>>e|t<<16-e&65535},"ror");A7e.exports=kd.rc2=kd.rc2||{};kd.rc2.expandKey=function(t,e){typeof t=="string"&&(t=kd.util.createBuffer(t)),e=e||128;var n=t,r=t.length(),i=e,o=Math.ceil(i/8),a=255>>(i&7),l;for(l=r;l<128;l++)n.putByte(Zle[n.at(l-1)+n.at(l-r)&255]);for(n.setAt(128-o,Zle[n.at(128-o)&a]),l=127-o;l>=0;l--)n.setAt(l,Zle[n.at(l+1)^n.at(l+o)]);return n};var g7e=s(function(t,e,n){var r=!1,i=null,o=null,a=null,l,c,u,d,p=[];for(t=kd.rc2.expandKey(t,e),u=0;u<64;u++)p.push(t.getInt16Le());n?(l=s(function(g){for(u=0;u<4;u++)g[u]+=p[d]+(g[(u+3)%4]&g[(u+2)%4])+(~g[(u+3)%4]&g[(u+1)%4]),g[u]=l5t(g[u],h7e[u]),d++},"mixRound"),c=s(function(g){for(u=0;u<4;u++)g[u]+=p[g[(u+3)%4]&63]},"mashRound")):(l=s(function(g){for(u=3;u>=0;u--)g[u]=c5t(g[u],h7e[u]),g[u]-=p[d]+(g[(u+3)%4]&g[(u+2)%4])+(~g[(u+3)%4]&g[(u+1)%4]),d--},"mixRound"),c=s(function(g){for(u=3;u>=0;u--)g[u]-=p[g[(u+3)%4]&63]},"mashRound"));var m=s(function(g){var y=[];for(u=0;u<4;u++){var v=i.getInt16Le();a!==null&&(n?v^=a.getInt16Le():a.putInt16Le(v)),y.push(v&65535)}d=n?0:63;for(var b=0;b<g.length;b++)for(var E=0;E<g[b][0];E++)g[b][1](y);for(u=0;u<4;u++)a!==null&&(n?a.putInt16Le(y[u]):y[u]^=a.getInt16Le()),o.putInt16Le(y[u])},"runPlan"),h=null;return h={start:s(function(g,y){g&&typeof g=="string"&&(g=kd.util.createBuffer(g)),r=!1,i=kd.util.createBuffer(),o=y||new kd.util.createBuffer,a=g,h.output=o},"start"),update:s(function(g){for(r||i.putBuffer(g);i.length()>=8;)m([[5,l],[1,c],[6,l],[1,c],[5,l]])},"update"),finish:s(function(g){var y=!0;if(n)if(g)y=g(8,i,!n);else{var v=i.length()===8?8:8-i.length();i.fillWithByte(v,v)}if(y&&(r=!0,h.update()),!n&&(y=i.length()===0,y))if(g)y=g(8,o,!n);else{var b=o.length(),E=o.at(b-1);E>b?y=!1:o.truncate(E)}return y},"finish")},h},"createCipher");kd.rc2.startEncrypting=function(t,e,n){var r=kd.rc2.createEncryptionCipher(t,128);return r.start(e,n),r};kd.rc2.createEncryptionCipher=function(t,e){return g7e(t,e,!0)};kd.rc2.startDecrypting=function(t,e,n){var r=kd.rc2.createDecryptionCipher(t,128);return r.start(e,n),r};kd.rc2.createDecryptionCipher=function(t,e){return g7e(t,e,!1)}});var PD=H((QJn,T7e)=>{f();var tce=ui();T7e.exports=tce.jsbn=tce.jsbn||{};var cy,u5t=0xdeadbeefcafe,y7e=(u5t&16777215)==15715070;function Ct(t,e,n){this.data=[],t!=null&&(typeof t=="number"?this.fromNumber(t,e,n):e==null&&typeof t!="string"?this.fromString(t,256):this.fromString(t,e))}s(Ct,"BigInteger");tce.jsbn.BigInteger=Ct;function fo(){return new Ct(null)}s(fo,"nbi");function d5t(t,e,n,r,i,o){for(;--o>=0;){var a=e*this.data[t++]+n.data[r]+i;i=Math.floor(a/67108864),n.data[r++]=a&67108863}return i}s(d5t,"am1");function f5t(t,e,n,r,i,o){for(var a=e&32767,l=e>>15;--o>=0;){var c=this.data[t]&32767,u=this.data[t++]>>15,d=l*c+u*a;c=a*c+((d&32767)<<15)+n.data[r]+(i&1073741823),i=(c>>>30)+(d>>>15)+l*u+(i>>>30),n.data[r++]=c&1073741823}return i}s(f5t,"am2");function C7e(t,e,n,r,i,o){for(var a=e&16383,l=e>>14;--o>=0;){var c=this.data[t]&16383,u=this.data[t++]>>14,d=l*c+u*a;c=a*c+((d&16383)<<14)+n.data[r]+i,i=(c>>28)+(d>>14)+l*u,n.data[r++]=c&268435455}return i}s(C7e,"am3");typeof navigator>"u"?(Ct.prototype.am=C7e,cy=28):y7e&&navigator.appName=="Microsoft Internet Explorer"?(Ct.prototype.am=f5t,cy=30):y7e&&navigator.appName!="Netscape"?(Ct.prototype.am=d5t,cy=26):(Ct.prototype.am=C7e,cy=28);Ct.prototype.DB=cy;Ct.prototype.DM=(1<<cy)-1;Ct.prototype.DV=1<<cy;var nce=52;Ct.prototype.FV=Math.pow(2,nce);Ct.prototype.F1=nce-cy;Ct.prototype.F2=2*cy-nce;var p5t="0123456789abcdefghijklmnopqrstuvwxyz",SH=new Array,O4,up;O4=48;for(up=0;up<=9;++up)SH[O4++]=up;O4=97;for(up=10;up<36;++up)SH[O4++]=up;O4=65;for(up=10;up<36;++up)SH[O4++]=up;function x7e(t){return p5t.charAt(t)}s(x7e,"int2char");function v7e(t,e){var n=SH[t.charCodeAt(e)];return n??-1}s(v7e,"intAt");function m5t(t){for(var e=this.t-1;e>=0;--e)t.data[e]=this.data[e];t.t=this.t,t.s=this.s}s(m5t,"bnpCopyTo");function h5t(t){this.t=1,this.s=t<0?-1:0,t>0?this.data[0]=t:t<-1?this.data[0]=t+this.DV:this.t=0}s(h5t,"bnpFromInt");function Hv(t){var e=fo();return e.fromInt(t),e}s(Hv,"nbv");function g5t(t,e){var n;if(e==16)n=4;else if(e==8)n=3;else if(e==256)n=8;else if(e==2)n=1;else if(e==32)n=5;else if(e==4)n=2;else{this.fromRadix(t,e);return}this.t=0,this.s=0;for(var r=t.length,i=!1,o=0;--r>=0;){var a=n==8?t[r]&255:v7e(t,r);if(a<0){t.charAt(r)=="-"&&(i=!0);continue}i=!1,o==0?this.data[this.t++]=a:o+n>this.DB?(this.data[this.t-1]|=(a&(1<<this.DB-o)-1)<<o,this.data[this.t++]=a>>this.DB-o):this.data[this.t-1]|=a<<o,o+=n,o>=this.DB&&(o-=this.DB)}n==8&&(t[0]&128)!=0&&(this.s=-1,o>0&&(this.data[this.t-1]|=(1<<this.DB-o)-1<<o)),this.clamp(),i&&Ct.ZERO.subTo(this,this)}s(g5t,"bnpFromString");function A5t(){for(var t=this.s&this.DM;this.t>0&&this.data[this.t-1]==t;)--this.t}s(A5t,"bnpClamp");function y5t(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(t==16)e=4;else if(t==8)e=3;else if(t==2)e=1;else if(t==32)e=5;else if(t==4)e=2;else return this.toRadix(t);var n=(1<<e)-1,r,i=!1,o="",a=this.t,l=this.DB-a*this.DB%e;if(a-- >0)for(l<this.DB&&(r=this.data[a]>>l)>0&&(i=!0,o=x7e(r));a>=0;)l<e?(r=(this.data[a]&(1<<l)-1)<<e-l,r|=this.data[--a]>>(l+=this.DB-e)):(r=this.data[a]>>(l-=e)&n,l<=0&&(l+=this.DB,--a)),r>0&&(i=!0),i&&(o+=x7e(r));return i?o:"0"}s(y5t,"bnToString");function C5t(){var t=fo();return Ct.ZERO.subTo(this,t),t}s(C5t,"bnNegate");function x5t(){return this.s<0?this.negate():this}s(x5t,"bnAbs");function v5t(t){var e=this.s-t.s;if(e!=0)return e;var n=this.t;if(e=n-t.t,e!=0)return this.s<0?-e:e;for(;--n>=0;)if((e=this.data[n]-t.data[n])!=0)return e;return 0}s(v5t,"bnCompareTo");function RH(t){var e=1,n;return(n=t>>>16)!=0&&(t=n,e+=16),(n=t>>8)!=0&&(t=n,e+=8),(n=t>>4)!=0&&(t=n,e+=4),(n=t>>2)!=0&&(t=n,e+=2),(n=t>>1)!=0&&(t=n,e+=1),e}s(RH,"nbits");function b5t(){return this.t<=0?0:this.DB*(this.t-1)+RH(this.data[this.t-1]^this.s&this.DM)}s(b5t,"bnBitLength");function E5t(t,e){var n;for(n=this.t-1;n>=0;--n)e.data[n+t]=this.data[n];for(n=t-1;n>=0;--n)e.data[n]=0;e.t=this.t+t,e.s=this.s}s(E5t,"bnpDLShiftTo");function I5t(t,e){for(var n=t;n<this.t;++n)e.data[n-t]=this.data[n];e.t=Math.max(this.t-t,0),e.s=this.s}s(I5t,"bnpDRShiftTo");function T5t(t,e){var n=t%this.DB,r=this.DB-n,i=(1<<r)-1,o=Math.floor(t/this.DB),a=this.s<<n&this.DM,l;for(l=this.t-1;l>=0;--l)e.data[l+o+1]=this.data[l]>>r|a,a=(this.data[l]&i)<<n;for(l=o-1;l>=0;--l)e.data[l]=0;e.data[o]=a,e.t=this.t+o+1,e.s=this.s,e.clamp()}s(T5t,"bnpLShiftTo");function w5t(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t){e.t=0;return}var r=t%this.DB,i=this.DB-r,o=(1<<r)-1;e.data[0]=this.data[n]>>r;for(var a=n+1;a<this.t;++a)e.data[a-n-1]|=(this.data[a]&o)<<i,e.data[a-n]=this.data[a]>>r;r>0&&(e.data[this.t-n-1]|=(this.s&o)<<i),e.t=this.t-n,e.clamp()}s(w5t,"bnpRShiftTo");function _5t(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this.data[n]-t.data[n],e.data[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r-=t.s;n<this.t;)r+=this.data[n],e.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r-=t.data[n],e.data[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e.data[n++]=this.DV+r:r>0&&(e.data[n++]=r),e.t=n,e.clamp()}s(_5t,"bnpSubTo");function S5t(t,e){var n=this.abs(),r=t.abs(),i=n.t;for(e.t=i+r.t;--i>=0;)e.data[i]=0;for(i=0;i<r.t;++i)e.data[i+n.t]=n.am(0,r.data[i],e,i,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&Ct.ZERO.subTo(e,e)}s(S5t,"bnpMultiplyTo");function R5t(t){for(var e=this.abs(),n=t.t=2*e.t;--n>=0;)t.data[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e.data[n],t,2*n,0,1);(t.data[n+e.t]+=e.am(n+1,2*e.data[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t.data[n+e.t]-=e.DV,t.data[n+e.t+1]=1)}t.t>0&&(t.data[t.t-1]+=e.am(n,e.data[n],t,2*n,0,1)),t.s=0,t.clamp()}s(R5t,"bnpSquareTo");function k5t(t,e,n){var r=t.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t){e?.fromInt(0),n!=null&&this.copyTo(n);return}n==null&&(n=fo());var o=fo(),a=this.s,l=t.s,c=this.DB-RH(r.data[r.t-1]);c>0?(r.lShiftTo(c,o),i.lShiftTo(c,n)):(r.copyTo(o),i.copyTo(n));var u=o.t,d=o.data[u-1];if(d!=0){var p=d*(1<<this.F1)+(u>1?o.data[u-2]>>this.F2:0),m=this.FV/p,h=(1<<this.F1)/p,g=1<<this.F2,y=n.t,v=y-u,b=e??fo();for(o.dlShiftTo(v,b),n.compareTo(b)>=0&&(n.data[n.t++]=1,n.subTo(b,n)),Ct.ONE.dlShiftTo(u,b),b.subTo(o,o);o.t<u;)o.data[o.t++]=0;for(;--v>=0;){var E=n.data[--y]==d?this.DM:Math.floor(n.data[y]*m+(n.data[y-1]+g)*h);if((n.data[y]+=o.am(0,E,n,v,0,u))<E)for(o.dlShiftTo(v,b),n.subTo(b,n);n.data[y]<--E;)n.subTo(b,n)}e!=null&&(n.drShiftTo(u,e),a!=l&&Ct.ZERO.subTo(e,e)),n.t=u,n.clamp(),c>0&&n.rShiftTo(c,n),a<0&&Ct.ZERO.subTo(n,n)}}}s(k5t,"bnpDivRemTo");function B5t(t){var e=fo();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(Ct.ZERO)>0&&t.subTo(e,e),e}s(B5t,"bnMod");function H2(t){this.m=t}s(H2,"Classic");function P5t(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}s(P5t,"cConvert");function D5t(t){return t}s(D5t,"cRevert");function N5t(t){t.divRemTo(this.m,null,t)}s(N5t,"cReduce");function L5t(t,e,n){t.multiplyTo(e,n),this.reduce(n)}s(L5t,"cMulTo");function F5t(t,e){t.squareTo(e),this.reduce(e)}s(F5t,"cSqrTo");H2.prototype.convert=P5t;H2.prototype.revert=D5t;H2.prototype.reduce=N5t;H2.prototype.mulTo=L5t;H2.prototype.sqrTo=F5t;function M5t(){if(this.t<1)return 0;var t=this.data[0];if((t&1)==0)return 0;var e=t&3;return e=e*(2-(t&15)*e)&15,e=e*(2-(t&255)*e)&255,e=e*(2-((t&65535)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}s(M5t,"bnpInvDigit");function G2(t){this.m=t,this.mp=t.invDigit(),this.mpl=this.mp&32767,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}s(G2,"Montgomery");function Q5t(t){var e=fo();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(Ct.ZERO)>0&&this.m.subTo(e,e),e}s(Q5t,"montConvert");function O5t(t){var e=fo();return t.copyTo(e),this.reduce(e),e}s(O5t,"montRevert");function U5t(t){for(;t.t<=this.mt2;)t.data[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=t.data[e]&32767,r=n*this.mpl+((n*this.mph+(t.data[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(n=e+this.m.t,t.data[n]+=this.m.am(0,r,t,e,0,this.m.t);t.data[n]>=t.DV;)t.data[n]-=t.DV,t.data[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}s(U5t,"montReduce");function q5t(t,e){t.squareTo(e),this.reduce(e)}s(q5t,"montSqrTo");function W5t(t,e,n){t.multiplyTo(e,n),this.reduce(n)}s(W5t,"montMulTo");G2.prototype.convert=Q5t;G2.prototype.revert=O5t;G2.prototype.reduce=U5t;G2.prototype.mulTo=W5t;G2.prototype.sqrTo=q5t;function H5t(){return(this.t>0?this.data[0]&1:this.s)==0}s(H5t,"bnpIsEven");function G5t(t,e){if(t>4294967295||t<1)return Ct.ONE;var n=fo(),r=fo(),i=e.convert(this),o=RH(t)-1;for(i.copyTo(n);--o>=0;)if(e.sqrTo(n,r),(t&1<<o)>0)e.mulTo(r,i,n);else{var a=n;n=r,r=a}return e.revert(n)}s(G5t,"bnpExp");function j5t(t,e){var n;return t<256||e.isEven()?n=new H2(e):n=new G2(e),this.exp(t,n)}s(j5t,"bnModPowInt");Ct.prototype.copyTo=m5t;Ct.prototype.fromInt=h5t;Ct.prototype.fromString=g5t;Ct.prototype.clamp=A5t;Ct.prototype.dlShiftTo=E5t;Ct.prototype.drShiftTo=I5t;Ct.prototype.lShiftTo=T5t;Ct.prototype.rShiftTo=w5t;Ct.prototype.subTo=_5t;Ct.prototype.multiplyTo=S5t;Ct.prototype.squareTo=R5t;Ct.prototype.divRemTo=k5t;Ct.prototype.invDigit=M5t;Ct.prototype.isEven=H5t;Ct.prototype.exp=G5t;Ct.prototype.toString=y5t;Ct.prototype.negate=C5t;Ct.prototype.abs=x5t;Ct.prototype.compareTo=v5t;Ct.prototype.bitLength=b5t;Ct.prototype.mod=B5t;Ct.prototype.modPowInt=j5t;Ct.ZERO=Hv(0);Ct.ONE=Hv(1);function V5t(){var t=fo();return this.copyTo(t),t}s(V5t,"bnClone");function $5t(){if(this.s<0){if(this.t==1)return this.data[0]-this.DV;if(this.t==0)return-1}else{if(this.t==1)return this.data[0];if(this.t==0)return 0}return(this.data[1]&(1<<32-this.DB)-1)<<this.DB|this.data[0]}s($5t,"bnIntValue");function z5t(){return this.t==0?this.s:this.data[0]<<24>>24}s(z5t,"bnByteValue");function Y5t(){return this.t==0?this.s:this.data[0]<<16>>16}s(Y5t,"bnShortValue");function K5t(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}s(K5t,"bnpChunkSize");function J5t(){return this.s<0?-1:this.t<=0||this.t==1&&this.data[0]<=0?0:1}s(J5t,"bnSigNum");function X5t(t){if(t==null&&(t=10),this.signum()==0||t<2||t>36)return"0";var e=this.chunkSize(t),n=Math.pow(t,e),r=Hv(n),i=fo(),o=fo(),a="";for(this.divRemTo(r,i,o);i.signum()>0;)a=(n+o.intValue()).toString(t).substr(1)+a,i.divRemTo(r,i,o);return o.intValue().toString(t)+a}s(X5t,"bnpToRadix");function Z5t(t,e){this.fromInt(0),e==null&&(e=10);for(var n=this.chunkSize(e),r=Math.pow(e,n),i=!1,o=0,a=0,l=0;l<t.length;++l){var c=v7e(t,l);if(c<0){t.charAt(l)=="-"&&this.signum()==0&&(i=!0);continue}a=e*a+c,++o>=n&&(this.dMultiply(r),this.dAddOffset(a,0),o=0,a=0)}o>0&&(this.dMultiply(Math.pow(e,o)),this.dAddOffset(a,0)),i&&Ct.ZERO.subTo(this,this)}s(Z5t,"bnpFromRadix");function e4t(t,e,n){if(typeof e=="number")if(t<2)this.fromInt(1);else for(this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo(Ct.ONE.shiftLeft(t-1),rce,this),this.isEven()&&this.dAddOffset(1,0);!this.isProbablePrime(e);)this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(Ct.ONE.shiftLeft(t-1),this);else{var r=new Array,i=t&7;r.length=(t>>3)+1,e.nextBytes(r),i>0?r[0]&=(1<<i)-1:r[0]=0,this.fromString(r,256)}}s(e4t,"bnpFromNumber");function t4t(){var t=this.t,e=new Array;e[0]=this.s;var n=this.DB-t*this.DB%8,r,i=0;if(t-- >0)for(n<this.DB&&(r=this.data[t]>>n)!=(this.s&this.DM)>>n&&(e[i++]=r|this.s<<this.DB-n);t>=0;)n<8?(r=(this.data[t]&(1<<n)-1)<<8-n,r|=this.data[--t]>>(n+=this.DB-8)):(r=this.data[t]>>(n-=8)&255,n<=0&&(n+=this.DB,--t)),(r&128)!=0&&(r|=-256),i==0&&(this.s&128)!=(r&128)&&++i,(i>0||r!=this.s)&&(e[i++]=r);return e}s(t4t,"bnToByteArray");function n4t(t){return this.compareTo(t)==0}s(n4t,"bnEquals");function r4t(t){return this.compareTo(t)<0?this:t}s(r4t,"bnMin");function i4t(t){return this.compareTo(t)>0?this:t}s(i4t,"bnMax");function o4t(t,e,n){var r,i,o=Math.min(t.t,this.t);for(r=0;r<o;++r)n.data[r]=e(this.data[r],t.data[r]);if(t.t<this.t){for(i=t.s&this.DM,r=o;r<this.t;++r)n.data[r]=e(this.data[r],i);n.t=this.t}else{for(i=this.s&this.DM,r=o;r<t.t;++r)n.data[r]=e(i,t.data[r]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()}s(o4t,"bnpBitwiseTo");function s4t(t,e){return t&e}s(s4t,"op_and");function a4t(t){var e=fo();return this.bitwiseTo(t,s4t,e),e}s(a4t,"bnAnd");function rce(t,e){return t|e}s(rce,"op_or");function l4t(t){var e=fo();return this.bitwiseTo(t,rce,e),e}s(l4t,"bnOr");function b7e(t,e){return t^e}s(b7e,"op_xor");function c4t(t){var e=fo();return this.bitwiseTo(t,b7e,e),e}s(c4t,"bnXor");function E7e(t,e){return t&~e}s(E7e,"op_andnot");function u4t(t){var e=fo();return this.bitwiseTo(t,E7e,e),e}s(u4t,"bnAndNot");function d4t(){for(var t=fo(),e=0;e<this.t;++e)t.data[e]=this.DM&~this.data[e];return t.t=this.t,t.s=~this.s,t}s(d4t,"bnNot");function f4t(t){var e=fo();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}s(f4t,"bnShiftLeft");function p4t(t){var e=fo();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}s(p4t,"bnShiftRight");function m4t(t){if(t==0)return-1;var e=0;return(t&65535)==0&&(t>>=16,e+=16),(t&255)==0&&(t>>=8,e+=8),(t&15)==0&&(t>>=4,e+=4),(t&3)==0&&(t>>=2,e+=2),(t&1)==0&&++e,e}s(m4t,"lbit");function h4t(){for(var t=0;t<this.t;++t)if(this.data[t]!=0)return t*this.DB+m4t(this.data[t]);return this.s<0?this.t*this.DB:-1}s(h4t,"bnGetLowestSetBit");function g4t(t){for(var e=0;t!=0;)t&=t-1,++e;return e}s(g4t,"cbit");function A4t(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=g4t(this.data[n]^e);return t}s(A4t,"bnBitCount");function y4t(t){var e=Math.floor(t/this.DB);return e>=this.t?this.s!=0:(this.data[e]&1<<t%this.DB)!=0}s(y4t,"bnTestBit");function C4t(t,e){var n=Ct.ONE.shiftLeft(t);return this.bitwiseTo(n,e,n),n}s(C4t,"bnpChangeBit");function x4t(t){return this.changeBit(t,rce)}s(x4t,"bnSetBit");function v4t(t){return this.changeBit(t,E7e)}s(v4t,"bnClearBit");function b4t(t){return this.changeBit(t,b7e)}s(b4t,"bnFlipBit");function E4t(t,e){for(var n=0,r=0,i=Math.min(t.t,this.t);n<i;)r+=this.data[n]+t.data[n],e.data[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){for(r+=t.s;n<this.t;)r+=this.data[n],e.data[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{for(r+=this.s;n<t.t;)r+=t.data[n],e.data[n++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e.data[n++]=r:r<-1&&(e.data[n++]=this.DV+r),e.t=n,e.clamp()}s(E4t,"bnpAddTo");function I4t(t){var e=fo();return this.addTo(t,e),e}s(I4t,"bnAdd");function T4t(t){var e=fo();return this.subTo(t,e),e}s(T4t,"bnSubtract");function w4t(t){var e=fo();return this.multiplyTo(t,e),e}s(w4t,"bnMultiply");function _4t(t){var e=fo();return this.divRemTo(t,e,null),e}s(_4t,"bnDivide");function S4t(t){var e=fo();return this.divRemTo(t,null,e),e}s(S4t,"bnRemainder");function R4t(t){var e=fo(),n=fo();return this.divRemTo(t,e,n),new Array(e,n)}s(R4t,"bnDivideAndRemainder");function k4t(t){this.data[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}s(k4t,"bnpDMultiply");function B4t(t,e){if(t!=0){for(;this.t<=e;)this.data[this.t++]=0;for(this.data[e]+=t;this.data[e]>=this.DV;)this.data[e]-=this.DV,++e>=this.t&&(this.data[this.t++]=0),++this.data[e]}}s(B4t,"bnpDAddOffset");function BD(){}s(BD,"NullExp");function I7e(t){return t}s(I7e,"nNop");function P4t(t,e,n){t.multiplyTo(e,n)}s(P4t,"nMulTo");function D4t(t,e){t.squareTo(e)}s(D4t,"nSqrTo");BD.prototype.convert=I7e;BD.prototype.revert=I7e;BD.prototype.mulTo=P4t;BD.prototype.sqrTo=D4t;function N4t(t){return this.exp(t,new BD)}s(N4t,"bnPow");function L4t(t,e,n){var r=Math.min(this.t+t.t,e);for(n.s=0,n.t=r;r>0;)n.data[--r]=0;var i;for(i=n.t-this.t;r<i;++r)n.data[r+this.t]=this.am(0,t.data[r],n,r,0,this.t);for(i=Math.min(t.t,e);r<i;++r)this.am(0,t.data[r],n,r,0,e-r);n.clamp()}s(L4t,"bnpMultiplyLowerTo");function F4t(t,e,n){--e;var r=n.t=this.t+t.t-e;for(n.s=0;--r>=0;)n.data[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)n.data[this.t+r-e]=this.am(e-r,t.data[r],n,0,0,this.t+r-e);n.clamp(),n.drShiftTo(1,n)}s(F4t,"bnpMultiplyUpperTo");function U4(t){this.r2=fo(),this.q3=fo(),Ct.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}s(U4,"Barrett");function M4t(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=fo();return t.copyTo(e),this.reduce(e),e}s(M4t,"barrettConvert");function Q4t(t){return t}s(Q4t,"barrettRevert");function O4t(t){for(t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);t.compareTo(this.r2)<0;)t.dAddOffset(1,this.m.t+1);for(t.subTo(this.r2,t);t.compareTo(this.m)>=0;)t.subTo(this.m,t)}s(O4t,"barrettReduce");function U4t(t,e){t.squareTo(e),this.reduce(e)}s(U4t,"barrettSqrTo");function q4t(t,e,n){t.multiplyTo(e,n),this.reduce(n)}s(q4t,"barrettMulTo");U4.prototype.convert=M4t;U4.prototype.revert=Q4t;U4.prototype.reduce=O4t;U4.prototype.mulTo=q4t;U4.prototype.sqrTo=U4t;function W4t(t,e){var n=t.bitLength(),r,i=Hv(1),o;if(n<=0)return i;n<18?r=1:n<48?r=3:n<144?r=4:n<768?r=5:r=6,n<8?o=new H2(e):e.isEven()?o=new U4(e):o=new G2(e);var a=new Array,l=3,c=r-1,u=(1<<r)-1;if(a[1]=o.convert(this),r>1){var d=fo();for(o.sqrTo(a[1],d);l<=u;)a[l]=fo(),o.mulTo(d,a[l-2],a[l]),l+=2}var p=t.t-1,m,h=!0,g=fo(),y;for(n=RH(t.data[p])-1;p>=0;){for(n>=c?m=t.data[p]>>n-c&u:(m=(t.data[p]&(1<<n+1)-1)<<c-n,p>0&&(m|=t.data[p-1]>>this.DB+n-c)),l=r;(m&1)==0;)m>>=1,--l;if((n-=l)<0&&(n+=this.DB,--p),h)a[m].copyTo(i),h=!1;else{for(;l>1;)o.sqrTo(i,g),o.sqrTo(g,i),l-=2;l>0?o.sqrTo(i,g):(y=i,i=g,g=y),o.mulTo(g,a[m],i)}for(;p>=0&&(t.data[p]&1<<n)==0;)o.sqrTo(i,g),y=i,i=g,g=y,--n<0&&(n=this.DB-1,--p)}return o.revert(i)}s(W4t,"bnModPow");function H4t(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var r=e;e=n,n=r}var i=e.getLowestSetBit(),o=n.getLowestSetBit();if(o<0)return e;for(i<o&&(o=i),o>0&&(e.rShiftTo(o,e),n.rShiftTo(o,n));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=n.getLowestSetBit())>0&&n.rShiftTo(i,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return o>0&&n.lShiftTo(o,n),n}s(H4t,"bnGCD");function G4t(t){if(t<=0)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(e==0)n=this.data[0]%t;else for(var r=this.t-1;r>=0;--r)n=(e*n+this.data[r])%t;return n}s(G4t,"bnpModInt");function j4t(t){var e=t.isEven();if(this.isEven()&&e||t.signum()==0)return Ct.ZERO;for(var n=t.clone(),r=this.clone(),i=Hv(1),o=Hv(0),a=Hv(0),l=Hv(1);n.signum()!=0;){for(;n.isEven();)n.rShiftTo(1,n),e?((!i.isEven()||!o.isEven())&&(i.addTo(this,i),o.subTo(t,o)),i.rShiftTo(1,i)):o.isEven()||o.subTo(t,o),o.rShiftTo(1,o);for(;r.isEven();)r.rShiftTo(1,r),e?((!a.isEven()||!l.isEven())&&(a.addTo(this,a),l.subTo(t,l)),a.rShiftTo(1,a)):l.isEven()||l.subTo(t,l),l.rShiftTo(1,l);n.compareTo(r)>=0?(n.subTo(r,n),e&&i.subTo(a,i),o.subTo(l,o)):(r.subTo(n,r),e&&a.subTo(i,a),l.subTo(o,l))}if(r.compareTo(Ct.ONE)!=0)return Ct.ZERO;if(l.compareTo(t)>=0)return l.subtract(t);if(l.signum()<0)l.addTo(t,l);else return l;return l.signum()<0?l.add(t):l}s(j4t,"bnModInverse");var Ym=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509],V4t=(1<<26)/Ym[Ym.length-1];function $4t(t){var e,n=this.abs();if(n.t==1&&n.data[0]<=Ym[Ym.length-1]){for(e=0;e<Ym.length;++e)if(n.data[0]==Ym[e])return!0;return!1}if(n.isEven())return!1;for(e=1;e<Ym.length;){for(var r=Ym[e],i=e+1;i<Ym.length&&r<V4t;)r*=Ym[i++];for(r=n.modInt(r);e<i;)if(r%Ym[e++]==0)return!1}return n.millerRabin(t)}s($4t,"bnIsProbablePrime");function z4t(t){var e=this.subtract(Ct.ONE),n=e.getLowestSetBit();if(n<=0)return!1;for(var r=e.shiftRight(n),i=Y4t(),o,a=0;a<t;++a){do o=new Ct(this.bitLength(),i);while(o.compareTo(Ct.ONE)<=0||o.compareTo(e)>=0);var l=o.modPow(r,this);if(l.compareTo(Ct.ONE)!=0&&l.compareTo(e)!=0){for(var c=1;c++<n&&l.compareTo(e)!=0;)if(l=l.modPowInt(2,this),l.compareTo(Ct.ONE)==0)return!1;if(l.compareTo(e)!=0)return!1}}return!0}s(z4t,"bnpMillerRabin");function Y4t(){return{nextBytes:s(function(t){for(var e=0;e<t.length;++e)t[e]=Math.floor(Math.random()*256)},"nextBytes")}}s(Y4t,"bnGetPrng");Ct.prototype.chunkSize=K5t;Ct.prototype.toRadix=X5t;Ct.prototype.fromRadix=Z5t;Ct.prototype.fromNumber=e4t;Ct.prototype.bitwiseTo=o4t;Ct.prototype.changeBit=C4t;Ct.prototype.addTo=E4t;Ct.prototype.dMultiply=k4t;Ct.prototype.dAddOffset=B4t;Ct.prototype.multiplyLowerTo=L4t;Ct.prototype.multiplyUpperTo=F4t;Ct.prototype.modInt=G4t;Ct.prototype.millerRabin=z4t;Ct.prototype.clone=V5t;Ct.prototype.intValue=$5t;Ct.prototype.byteValue=z5t;Ct.prototype.shortValue=Y5t;Ct.prototype.signum=J5t;Ct.prototype.toByteArray=t4t;Ct.prototype.equals=n4t;Ct.prototype.min=r4t;Ct.prototype.max=i4t;Ct.prototype.and=a4t;Ct.prototype.or=l4t;Ct.prototype.xor=c4t;Ct.prototype.andNot=u4t;Ct.prototype.not=d4t;Ct.prototype.shiftLeft=f4t;Ct.prototype.shiftRight=p4t;Ct.prototype.getLowestSetBit=h4t;Ct.prototype.bitCount=A4t;Ct.prototype.testBit=y4t;Ct.prototype.setBit=x4t;Ct.prototype.clearBit=v4t;Ct.prototype.flipBit=b4t;Ct.prototype.add=I4t;Ct.prototype.subtract=T4t;Ct.prototype.multiply=w4t;Ct.prototype.divide=_4t;Ct.prototype.remainder=S4t;Ct.prototype.divideAndRemainder=R4t;Ct.prototype.modPow=W4t;Ct.prototype.modInverse=j4t;Ct.prototype.pow=N4t;Ct.prototype.gcd=H4t;Ct.prototype.isProbablePrime=$4t});var q4=H((qJn,R7e)=>{f();var Yg=ui();Gg();uo();var _7e=R7e.exports=Yg.sha1=Yg.sha1||{};Yg.md.sha1=Yg.md.algorithms.sha1=_7e;_7e.create=function(){S7e||K4t();var t=null,e=Yg.util.createBuffer(),n=new Array(80),r={algorithm:"sha1",blockLength:64,digestLength:20,messageLength:0,fullMessageLength:null,messageLengthSize:8};return r.start=function(){r.messageLength=0,r.fullMessageLength=r.messageLength64=[];for(var i=r.messageLengthSize/4,o=0;o<i;++o)r.fullMessageLength.push(0);return e=Yg.util.createBuffer(),t={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520},r},r.start(),r.update=function(i,o){o==="utf8"&&(i=Yg.util.encodeUtf8(i));var a=i.length;r.messageLength+=a,a=[a/4294967296>>>0,a>>>0];for(var l=r.fullMessageLength.length-1;l>=0;--l)r.fullMessageLength[l]+=a[1],a[1]=a[0]+(r.fullMessageLength[l]/4294967296>>>0),r.fullMessageLength[l]=r.fullMessageLength[l]>>>0,a[0]=a[1]/4294967296>>>0;return e.putBytes(i),w7e(t,n,e),(e.read>2048||e.length()===0)&&e.compact(),r},r.digest=function(){var i=Yg.util.createBuffer();i.putBytes(e.bytes());var o=r.fullMessageLength[r.fullMessageLength.length-1]+r.messageLengthSize,a=o&r.blockLength-1;i.putBytes(ice.substr(0,r.blockLength-a));for(var l,c,u=r.fullMessageLength[0]*8,d=0;d<r.fullMessageLength.length-1;++d)l=r.fullMessageLength[d+1]*8,c=l/4294967296>>>0,u+=c,i.putInt32(u>>>0),u=l>>>0;i.putInt32(u);var p={h0:t.h0,h1:t.h1,h2:t.h2,h3:t.h3,h4:t.h4};w7e(p,n,i);var m=Yg.util.createBuffer();return m.putInt32(p.h0),m.putInt32(p.h1),m.putInt32(p.h2),m.putInt32(p.h3),m.putInt32(p.h4),m},r};var ice=null,S7e=!1;function K4t(){ice="\x80",ice+=Yg.util.fillString("\0",64),S7e=!0}s(K4t,"_init");function w7e(t,e,n){for(var r,i,o,a,l,c,u,d,p=n.length();p>=64;){for(i=t.h0,o=t.h1,a=t.h2,l=t.h3,c=t.h4,d=0;d<16;++d)r=n.getInt32(),e[d]=r,u=l^o&(a^l),r=(i<<5|i>>>27)+u+c+1518500249+r,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=r;for(;d<20;++d)r=e[d-3]^e[d-8]^e[d-14]^e[d-16],r=r<<1|r>>>31,e[d]=r,u=l^o&(a^l),r=(i<<5|i>>>27)+u+c+1518500249+r,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=r;for(;d<32;++d)r=e[d-3]^e[d-8]^e[d-14]^e[d-16],r=r<<1|r>>>31,e[d]=r,u=o^a^l,r=(i<<5|i>>>27)+u+c+1859775393+r,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=r;for(;d<40;++d)r=e[d-6]^e[d-16]^e[d-28]^e[d-32],r=r<<2|r>>>30,e[d]=r,u=o^a^l,r=(i<<5|i>>>27)+u+c+1859775393+r,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=r;for(;d<60;++d)r=e[d-6]^e[d-16]^e[d-28]^e[d-32],r=r<<2|r>>>30,e[d]=r,u=o&a|l&(o^a),r=(i<<5|i>>>27)+u+c+2400959708+r,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=r;for(;d<80;++d)r=e[d-6]^e[d-16]^e[d-28]^e[d-32],r=r<<2|r>>>30,e[d]=r,u=o^a^l,r=(i<<5|i>>>27)+u+c+3395469782+r,c=l,l=a,a=(o<<30|o>>>2)>>>0,o=i,i=r;t.h0=t.h0+i|0,t.h1=t.h1+o|0,t.h2=t.h2+a|0,t.h3=t.h3+l|0,t.h4=t.h4+c|0,p-=64}}s(w7e,"_update")});var oce=H((GJn,B7e)=>{f();var Kg=ui();uo();cp();q4();var k7e=B7e.exports=Kg.pkcs1=Kg.pkcs1||{};k7e.encode_rsa_oaep=function(t,e,n){var r,i,o,a;typeof n=="string"?(r=n,i=arguments[3]||void 0,o=arguments[4]||void 0):n&&(r=n.label||void 0,i=n.seed||void 0,o=n.md||void 0,n.mgf1&&n.mgf1.md&&(a=n.mgf1.md)),o?o.start():o=Kg.md.sha1.create(),a||(a=o);var l=Math.ceil(t.n.bitLength()/8),c=l-2*o.digestLength-2;if(e.length>c){var u=new Error("RSAES-OAEP input message length is too long.");throw u.length=e.length,u.maxLength=c,u}r||(r=""),o.update(r,"raw");for(var d=o.digest(),p="",m=c-e.length,h=0;h<m;h++)p+="\0";var g=d.getBytes()+p+""+e;if(!i)i=Kg.random.getBytes(o.digestLength);else if(i.length!==o.digestLength){var u=new Error("Invalid RSAES-OAEP seed. The seed length must match the digest length.");throw u.seedLength=i.length,u.digestLength=o.digestLength,u}var y=kH(i,l-o.digestLength-1,a),v=Kg.util.xorBytes(g,y,g.length),b=kH(v,o.digestLength,a),E=Kg.util.xorBytes(i,b,i.length);return"\0"+E+v};k7e.decode_rsa_oaep=function(t,e,n){var r,i,o;typeof n=="string"?(r=n,i=arguments[3]||void 0):n&&(r=n.label||void 0,i=n.md||void 0,n.mgf1&&n.mgf1.md&&(o=n.mgf1.md));var a=Math.ceil(t.n.bitLength()/8);if(e.length!==a){var v=new Error("RSAES-OAEP encoded message length is invalid.");throw v.length=e.length,v.expectedLength=a,v}if(i===void 0?i=Kg.md.sha1.create():i.start(),o||(o=i),a<2*i.digestLength+2)throw new Error("RSAES-OAEP key is too short for the hash function.");r||(r=""),i.update(r,"raw");for(var l=i.digest().getBytes(),c=e.charAt(0),u=e.substring(1,i.digestLength+1),d=e.substring(1+i.digestLength),p=kH(d,i.digestLength,o),m=Kg.util.xorBytes(u,p,u.length),h=kH(m,a-i.digestLength-1,o),g=Kg.util.xorBytes(d,h,d.length),y=g.substring(0,i.digestLength),v=c!=="\0",b=0;b<i.digestLength;++b)v|=l.charAt(b)!==y.charAt(b);for(var E=1,_=i.digestLength,k=i.digestLength;k<g.length;k++){var P=g.charCodeAt(k),N=P&1^1,U=E?65534:0;v|=P&U,E=E&N,_+=E}if(v||g.charCodeAt(_)!==1)throw new Error("Invalid RSAES-OAEP padding.");return g.substring(_+1)};function kH(t,e,n){n||(n=Kg.md.sha1.create());for(var r="",i=Math.ceil(e/n.digestLength),o=0;o<i;++o){var a=String.fromCharCode(o>>24&255,o>>16&255,o>>8&255,o&255);n.start(),n.update(t+a),r+=n.digest().getBytes()}return r.substring(0,e)}s(kH,"rsa_mgf1")});var ace=H(($Jn,sce)=>{f();var Gv=ui();uo();PD();cp();(function(){if(Gv.prime){sce.exports=Gv.prime;return}var t=sce.exports=Gv.prime=Gv.prime||{},e=Gv.jsbn.BigInteger,n=[6,4,2,4,2,4,6,2],r=new e(null);r.fromInt(30);var i=s(function(p,m){return p|m},"op_or");t.generateProbablePrime=function(p,m,h){typeof m=="function"&&(h=m,m={}),m=m||{};var g=m.algorithm||"PRIMEINC";typeof g=="string"&&(g={name:g}),g.options=g.options||{};var y=m.prng||Gv.random,v={nextBytes:s(function(b){for(var E=y.getBytesSync(b.length),_=0;_<b.length;++_)b[_]=E.charCodeAt(_)},"nextBytes")};if(g.name==="PRIMEINC")return o(p,v,g.options,h);throw new Error("Invalid prime generation algorithm: "+g.name)};function o(p,m,h,g){return"workers"in h?c(p,m,h,g):a(p,m,h,g)}s(o,"primeincFindPrime");function a(p,m,h,g){var y=u(p,m),v=0,b=d(y.bitLength());"millerRabinTests"in h&&(b=h.millerRabinTests);var E=10;"maxBlockTime"in h&&(E=h.maxBlockTime),l(y,p,m,v,b,E,g)}s(a,"primeincFindPrimeWithoutWorkers");function l(p,m,h,g,y,v,b){var E=+new Date;do{if(p.bitLength()>m&&(p=u(m,h)),p.isProbablePrime(y))return b(null,p);p.dAddOffset(n[g++%8],0)}while(v<0||+new Date-E<v);Gv.util.setImmediate(function(){l(p,m,h,g,y,v,b)})}s(l,"_primeinc");function c(p,m,h,g){if(typeof Worker>"u")return a(p,m,h,g);var y=u(p,m),v=h.workers,b=h.workLoad||100,E=b*30/8,_=h.workerScript||"forge/prime.worker.js";if(v===-1)return Gv.util.estimateCores(function(P,N){P&&(N=2),v=N-1,k()});k();function k(){v=Math.max(1,v);for(var P=[],N=0;N<v;++N)P[N]=new Worker(_);for(var U=v,N=0;N<v;++N)P[N].addEventListener("message",he);var ne=!1;function he(ae){if(!ne){--U;var G=ae.data;if(G.found){for(var W=0;W<P.length;++W)P[W].terminate();return ne=!0,g(null,new e(G.prime,16))}y.bitLength()>p&&(y=u(p,m));var ue=y.toString(16);ae.target.postMessage({hex:ue,workLoad:b}),y.dAddOffset(E,0)}}s(he,"workerMessage")}s(k,"generate")}s(c,"primeincFindPrimeWithWorkers");function u(p,m){var h=new e(p,m),g=p-1;return h.testBit(g)||h.bitwiseTo(e.ONE.shiftLeft(g),i,h),h.dAddOffset(31-h.mod(r).byteValue(),0),h}s(u,"generateRandom");function d(p){return p<=100?27:p<=150?18:p<=200?15:p<=250?12:p<=300?9:p<=350?8:p<=400?7:p<=500?6:p<=600?5:p<=800?4:p<=1250?3:2}s(d,"getMillerRabinTests")})()});var DD=H((KJn,Q7e)=>{f();var Xn=ui();zm();PD();Wv();oce();ace();cp();uo();typeof to>"u"&&(to=Xn.jsbn.BigInteger);var to,lce=Xn.util.isNodejs?require("crypto"):null,qe=Xn.asn1,dp=Xn.util;Xn.pki=Xn.pki||{};Q7e.exports=Xn.pki.rsa=Xn.rsa=Xn.rsa||{};var Xr=Xn.pki,J4t=[6,4,2,4,2,4,6,2],X4t={name:"PrivateKeyInfo",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]},Z4t={name:"RSAPrivateKey",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPrivateKey.version",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"RSAPrivateKey.modulus",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyModulus"},{name:"RSAPrivateKey.publicExponent",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyPublicExponent"},{name:"RSAPrivateKey.privateExponent",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyPrivateExponent"},{name:"RSAPrivateKey.prime1",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyPrime1"},{name:"RSAPrivateKey.prime2",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyPrime2"},{name:"RSAPrivateKey.exponent1",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyExponent1"},{name:"RSAPrivateKey.exponent2",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyExponent2"},{name:"RSAPrivateKey.coefficient",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"privateKeyCoefficient"}]},eRt={name:"RSAPublicKey",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"RSAPublicKey.modulus",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"publicKeyModulus"},{name:"RSAPublicKey.exponent",tagClass:qe.Class.UNIVERSAL,type:qe.Type.INTEGER,constructed:!1,capture:"publicKeyExponent"}]},tRt=Xn.pki.rsa.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{name:"SubjectPublicKeyInfo.subjectPublicKey",tagClass:qe.Class.UNIVERSAL,type:qe.Type.BITSTRING,constructed:!1,value:[{name:"SubjectPublicKeyInfo.subjectPublicKey.RSAPublicKey",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"rsaPublicKey"}]}]},nRt={name:"DigestInfo",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm",tagClass:qe.Class.UNIVERSAL,type:qe.Type.SEQUENCE,constructed:!0,value:[{name:"DigestInfo.DigestAlgorithm.algorithmIdentifier",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OID,constructed:!1,capture:"algorithmIdentifier"},{name:"DigestInfo.DigestAlgorithm.parameters",tagClass:qe.Class.UNIVERSAL,type:qe.Type.NULL,capture:"parameters",optional:!0,constructed:!1}]},{name:"DigestInfo.digest",tagClass:qe.Class.UNIVERSAL,type:qe.Type.OCTETSTRING,constructed:!1,capture:"digest"}]},rRt=s(function(t){var e;if(t.algorithm in Xr.oids)e=Xr.oids[t.algorithm];else{var n=new Error("Unknown message digest algorithm.");throw n.algorithm=t.algorithm,n}var r=qe.oidToDer(e).getBytes(),i=qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[]),o=qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[]);o.value.push(qe.create(qe.Class.UNIVERSAL,qe.Type.OID,!1,r)),o.value.push(qe.create(qe.Class.UNIVERSAL,qe.Type.NULL,!1,""));var a=qe.create(qe.Class.UNIVERSAL,qe.Type.OCTETSTRING,!1,t.digest().getBytes());return i.value.push(o),i.value.push(a),qe.toDer(i).getBytes()},"emsaPkcs1v15encode"),F7e=s(function(t,e,n){if(n)return t.modPow(e.e,e.n);if(!e.p||!e.q)return t.modPow(e.d,e.n);e.dP||(e.dP=e.d.mod(e.p.subtract(to.ONE))),e.dQ||(e.dQ=e.d.mod(e.q.subtract(to.ONE))),e.qInv||(e.qInv=e.q.modInverse(e.p));var r;do r=new to(Xn.util.bytesToHex(Xn.random.getBytes(e.n.bitLength()/8)),16);while(r.compareTo(e.n)>=0||!r.gcd(e.n).equals(to.ONE));t=t.multiply(r.modPow(e.e,e.n)).mod(e.n);for(var i=t.mod(e.p).modPow(e.dP,e.p),o=t.mod(e.q).modPow(e.dQ,e.q);i.compareTo(o)<0;)i=i.add(e.p);var a=i.subtract(o).multiply(e.qInv).mod(e.p).multiply(e.q).add(o);return a=a.multiply(r.modInverse(e.n)).mod(e.n),a},"_modPow");Xr.rsa.encrypt=function(t,e,n){var r=n,i,o=Math.ceil(e.n.bitLength()/8);n!==!1&&n!==!0?(r=n===2,i=M7e(t,e,n)):(i=Xn.util.createBuffer(),i.putBytes(t));for(var a=new to(i.toHex(),16),l=F7e(a,e,r),c=l.toString(16),u=Xn.util.createBuffer(),d=o-Math.ceil(c.length/2);d>0;)u.putByte(0),--d;return u.putBytes(Xn.util.hexToBytes(c)),u.getBytes()};Xr.rsa.decrypt=function(t,e,n,r){var i=Math.ceil(e.n.bitLength()/8);if(t.length!==i){var o=new Error("Encrypted message length is invalid.");throw o.length=t.length,o.expected=i,o}var a=new to(Xn.util.createBuffer(t).toHex(),16);if(a.compareTo(e.n)>=0)throw new Error("Encrypted message is invalid.");for(var l=F7e(a,e,n),c=l.toString(16),u=Xn.util.createBuffer(),d=i-Math.ceil(c.length/2);d>0;)u.putByte(0),--d;return u.putBytes(Xn.util.hexToBytes(c)),r!==!1?BH(u.getBytes(),e,n):u.getBytes()};Xr.rsa.createKeyPairGenerationState=function(t,e,n){typeof t=="string"&&(t=parseInt(t,10)),t=t||2048,n=n||{};var r=n.prng||Xn.random,i={nextBytes:s(function(l){for(var c=r.getBytesSync(l.length),u=0;u<l.length;++u)l[u]=c.charCodeAt(u)},"nextBytes")},o=n.algorithm||"PRIMEINC",a;if(o==="PRIMEINC")a={algorithm:o,state:0,bits:t,rng:i,eInt:e||65537,e:new to(null),p:null,q:null,qBits:t>>1,pBits:t-(t>>1),pqState:0,num:null,keys:null},a.e.fromInt(a.eInt);else throw new Error("Invalid key generation algorithm: "+o);return a};Xr.rsa.stepKeyPairGenerationState=function(t,e){"algorithm"in t||(t.algorithm="PRIMEINC");var n=new to(null);n.fromInt(30);for(var r=0,i=s(function(p,m){return p|m},"op_or"),o=+new Date,a,l=0;t.keys===null&&(e<=0||l<e);){if(t.state===0){var c=t.p===null?t.pBits:t.qBits,u=c-1;t.pqState===0?(t.num=new to(c,t.rng),t.num.testBit(u)||t.num.bitwiseTo(to.ONE.shiftLeft(u),i,t.num),t.num.dAddOffset(31-t.num.mod(n).byteValue(),0),r=0,++t.pqState):t.pqState===1?t.num.bitLength()>c?t.pqState=0:t.num.isProbablePrime(oRt(t.num.bitLength()))?++t.pqState:t.num.dAddOffset(J4t[r++%8],0):t.pqState===2?t.pqState=t.num.subtract(to.ONE).gcd(t.e).compareTo(to.ONE)===0?3:0:t.pqState===3&&(t.pqState=0,t.p===null?t.p=t.num:t.q=t.num,t.p!==null&&t.q!==null&&++t.state,t.num=null)}else if(t.state===1)t.p.compareTo(t.q)<0&&(t.num=t.p,t.p=t.q,t.q=t.num),++t.state;else if(t.state===2)t.p1=t.p.subtract(to.ONE),t.q1=t.q.subtract(to.ONE),t.phi=t.p1.multiply(t.q1),++t.state;else if(t.state===3)t.phi.gcd(t.e).compareTo(to.ONE)===0?++t.state:(t.p=null,t.q=null,t.state=0);else if(t.state===4)t.n=t.p.multiply(t.q),t.n.bitLength()===t.bits?++t.state:(t.q=null,t.state=0);else if(t.state===5){var d=t.e.modInverse(t.phi);t.keys={privateKey:Xr.rsa.setPrivateKey(t.n,t.e,d,t.p,t.q,d.mod(t.p1),d.mod(t.q1),t.q.modInverse(t.p)),publicKey:Xr.rsa.setPublicKey(t.n,t.e)}}a=+new Date,l+=a-o,o=a}return t.keys!==null};Xr.rsa.generateKeyPair=function(t,e,n,r){if(arguments.length===1?typeof t=="object"?(n=t,t=void 0):typeof t=="function"&&(r=t,t=void 0):arguments.length===2?typeof t=="number"?typeof e=="function"?(r=e,e=void 0):typeof e!="number"&&(n=e,e=void 0):(n=t,r=e,t=void 0,e=void 0):arguments.length===3&&(typeof e=="number"?typeof n=="function"&&(r=n,n=void 0):(r=n,n=e,e=void 0)),n=n||{},t===void 0&&(t=n.bits||2048),e===void 0&&(e=n.e||65537),!Xn.options.usePureJavaScript&&!n.prng&&t>=256&&t<=16384&&(e===65537||e===3)){if(r){if(P7e("generateKeyPair"))return lce.generateKeyPair("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}},function(l,c,u){if(l)return r(l);r(null,{privateKey:Xr.privateKeyFromPem(u),publicKey:Xr.publicKeyFromPem(c)})});if(D7e("generateKey")&&D7e("exportKey"))return dp.globalScope.crypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:L7e(e),hash:{name:"SHA-256"}},!0,["sign","verify"]).then(function(l){return dp.globalScope.crypto.subtle.exportKey("pkcs8",l.privateKey)}).then(void 0,function(l){r(l)}).then(function(l){if(l){var c=Xr.privateKeyFromAsn1(qe.fromDer(Xn.util.createBuffer(l)));r(null,{privateKey:c,publicKey:Xr.setRsaPublicKey(c.n,c.e)})}});if(N7e("generateKey")&&N7e("exportKey")){var i=dp.globalScope.msCrypto.subtle.generateKey({name:"RSASSA-PKCS1-v1_5",modulusLength:t,publicExponent:L7e(e),hash:{name:"SHA-256"}},!0,["sign","verify"]);i.oncomplete=function(l){var c=l.target.result,u=dp.globalScope.msCrypto.subtle.exportKey("pkcs8",c.privateKey);u.oncomplete=function(d){var p=d.target.result,m=Xr.privateKeyFromAsn1(qe.fromDer(Xn.util.createBuffer(p)));r(null,{privateKey:m,publicKey:Xr.setRsaPublicKey(m.n,m.e)})},u.onerror=function(d){r(d)}},i.onerror=function(l){r(l)};return}}else if(P7e("generateKeyPairSync")){var o=lce.generateKeyPairSync("rsa",{modulusLength:t,publicExponent:e,publicKeyEncoding:{type:"spki",format:"pem"},privateKeyEncoding:{type:"pkcs8",format:"pem"}});return{privateKey:Xr.privateKeyFromPem(o.privateKey),publicKey:Xr.publicKeyFromPem(o.publicKey)}}}var a=Xr.rsa.createKeyPairGenerationState(t,e,n);if(!r)return Xr.rsa.stepKeyPairGenerationState(a,0),a.keys;iRt(a,n,r)};Xr.setRsaPublicKey=Xr.rsa.setPublicKey=function(t,e){var n={n:t,e};return n.encrypt=function(r,i,o){if(typeof i=="string"?i=i.toUpperCase():i===void 0&&(i="RSAES-PKCS1-V1_5"),i==="RSAES-PKCS1-V1_5")i={encode:s(function(l,c,u){return M7e(l,c,2).getBytes()},"encode")};else if(i==="RSA-OAEP"||i==="RSAES-OAEP")i={encode:s(function(l,c){return Xn.pkcs1.encode_rsa_oaep(c,l,o)},"encode")};else if(["RAW","NONE","NULL",null].indexOf(i)!==-1)i={encode:s(function(l){return l},"encode")};else if(typeof i=="string")throw new Error('Unsupported encryption scheme: "'+i+'".');var a=i.encode(r,n,!0);return Xr.rsa.encrypt(a,n,!0)},n.verify=function(r,i,o,a){typeof o=="string"?o=o.toUpperCase():o===void 0&&(o="RSASSA-PKCS1-V1_5"),a===void 0&&(a={_parseAllDigestBytes:!0}),"_parseAllDigestBytes"in a||(a._parseAllDigestBytes=!0),o==="RSASSA-PKCS1-V1_5"?o={verify:s(function(c,u){u=BH(u,n,!0);var d=qe.fromDer(u,{parseAllBytes:a._parseAllDigestBytes}),p={},m=[];if(!qe.validate(d,nRt,p,m)){var h=new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value.");throw h.errors=m,h}var g=qe.derToOid(p.algorithmIdentifier);if(!(g===Xn.oids.md2||g===Xn.oids.md5||g===Xn.oids.sha1||g===Xn.oids.sha224||g===Xn.oids.sha256||g===Xn.oids.sha384||g===Xn.oids.sha512||g===Xn.oids["sha512-224"]||g===Xn.oids["sha512-256"])){var h=new Error("Unknown RSASSA-PKCS1-v1_5 DigestAlgorithm identifier.");throw h.oid=g,h}if((g===Xn.oids.md2||g===Xn.oids.md5)&&!("parameters"in p))throw new Error("ASN.1 object does not contain a valid RSASSA-PKCS1-v1_5 DigestInfo value. Missing algorithm identifer NULL parameters.");return c===p.digest},"verify")}:(o==="NONE"||o==="NULL"||o===null)&&(o={verify:s(function(c,u){return u=BH(u,n,!0),c===u},"verify")});var l=Xr.rsa.decrypt(i,n,!0,!1);return o.verify(r,l,n.n.bitLength())},n};Xr.setRsaPrivateKey=Xr.rsa.setPrivateKey=function(t,e,n,r,i,o,a,l){var c={n:t,e,d:n,p:r,q:i,dP:o,dQ:a,qInv:l};return c.decrypt=function(u,d,p){typeof d=="string"?d=d.toUpperCase():d===void 0&&(d="RSAES-PKCS1-V1_5");var m=Xr.rsa.decrypt(u,c,!1,!1);if(d==="RSAES-PKCS1-V1_5")d={decode:BH};else if(d==="RSA-OAEP"||d==="RSAES-OAEP")d={decode:s(function(h,g){return Xn.pkcs1.decode_rsa_oaep(g,h,p)},"decode")};else if(["RAW","NONE","NULL",null].indexOf(d)!==-1)d={decode:s(function(h){return h},"decode")};else throw new Error('Unsupported encryption scheme: "'+d+'".');return d.decode(m,c,!1)},c.sign=function(u,d){var p=!1;typeof d=="string"&&(d=d.toUpperCase()),d===void 0||d==="RSASSA-PKCS1-V1_5"?(d={encode:rRt},p=1):(d==="NONE"||d==="NULL"||d===null)&&(d={encode:s(function(){return u},"encode")},p=1);var m=d.encode(u,c.n.bitLength());return Xr.rsa.encrypt(m,c,p)},c};Xr.wrapRsaPrivateKey=function(t){return qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,qe.integerToDer(0).getBytes()),qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.OID,!1,qe.oidToDer(Xr.oids.rsaEncryption).getBytes()),qe.create(qe.Class.UNIVERSAL,qe.Type.NULL,!1,"")]),qe.create(qe.Class.UNIVERSAL,qe.Type.OCTETSTRING,!1,qe.toDer(t).getBytes())])};Xr.privateKeyFromAsn1=function(t){var e={},n=[];if(qe.validate(t,X4t,e,n)&&(t=qe.fromDer(Xn.util.createBuffer(e.privateKey))),e={},n=[],!qe.validate(t,Z4t,e,n)){var r=new Error("Cannot read private key. ASN.1 object does not contain an RSAPrivateKey.");throw r.errors=n,r}var i,o,a,l,c,u,d,p;return i=Xn.util.createBuffer(e.privateKeyModulus).toHex(),o=Xn.util.createBuffer(e.privateKeyPublicExponent).toHex(),a=Xn.util.createBuffer(e.privateKeyPrivateExponent).toHex(),l=Xn.util.createBuffer(e.privateKeyPrime1).toHex(),c=Xn.util.createBuffer(e.privateKeyPrime2).toHex(),u=Xn.util.createBuffer(e.privateKeyExponent1).toHex(),d=Xn.util.createBuffer(e.privateKeyExponent2).toHex(),p=Xn.util.createBuffer(e.privateKeyCoefficient).toHex(),Xr.setRsaPrivateKey(new to(i,16),new to(o,16),new to(a,16),new to(l,16),new to(c,16),new to(u,16),new to(d,16),new to(p,16))};Xr.privateKeyToAsn1=Xr.privateKeyToRSAPrivateKey=function(t){return qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,qe.integerToDer(0).getBytes()),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Jg(t.n)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Jg(t.e)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Jg(t.d)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Jg(t.p)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Jg(t.q)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Jg(t.dP)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Jg(t.dQ)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Jg(t.qInv))])};Xr.publicKeyFromAsn1=function(t){var e={},n=[];if(qe.validate(t,tRt,e,n)){var r=qe.derToOid(e.publicKeyOid);if(r!==Xr.oids.rsaEncryption){var i=new Error("Cannot read public key. Unknown OID.");throw i.oid=r,i}t=e.rsaPublicKey}if(n=[],!qe.validate(t,eRt,e,n)){var i=new Error("Cannot read public key. ASN.1 object does not contain an RSAPublicKey.");throw i.errors=n,i}var o=Xn.util.createBuffer(e.publicKeyModulus).toHex(),a=Xn.util.createBuffer(e.publicKeyExponent).toHex();return Xr.setRsaPublicKey(new to(o,16),new to(a,16))};Xr.publicKeyToAsn1=Xr.publicKeyToSubjectPublicKeyInfo=function(t){return qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.OID,!1,qe.oidToDer(Xr.oids.rsaEncryption).getBytes()),qe.create(qe.Class.UNIVERSAL,qe.Type.NULL,!1,"")]),qe.create(qe.Class.UNIVERSAL,qe.Type.BITSTRING,!1,[Xr.publicKeyToRSAPublicKey(t)])])};Xr.publicKeyToRSAPublicKey=function(t){return qe.create(qe.Class.UNIVERSAL,qe.Type.SEQUENCE,!0,[qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Jg(t.n)),qe.create(qe.Class.UNIVERSAL,qe.Type.INTEGER,!1,Jg(t.e))])};function M7e(t,e,n){var r=Xn.util.createBuffer(),i=Math.ceil(e.n.bitLength()/8);if(t.length>i-11){var o=new Error("Message is too long for PKCS#1 v1.5 padding.");throw o.length=t.length,o.max=i-11,o}r.putByte(0),r.putByte(n);var a=i-3-t.length,l;if(n===0||n===1){l=n===0?0:255;for(var c=0;c<a;++c)r.putByte(l)}else for(;a>0;){for(var u=0,d=Xn.random.getBytes(a),c=0;c<a;++c)l=d.charCodeAt(c),l===0?++u:r.putByte(l);a=u}return r.putByte(0),r.putBytes(t),r}s(M7e,"_encodePkcs1_v1_5");function BH(t,e,n,r){var i=Math.ceil(e.n.bitLength()/8),o=Xn.util.createBuffer(t),a=o.getByte(),l=o.getByte();if(a!==0||n&&l!==0&&l!==1||!n&&l!=2||n&&l===0&&typeof r>"u")throw new Error("Encryption block is invalid.");var c=0;if(l===0){c=i-3-r;for(var u=0;u<c;++u)if(o.getByte()!==0)throw new Error("Encryption block is invalid.")}else if(l===1)for(c=0;o.length()>1;){if(o.getByte()!==255){--o.read;break}++c}else if(l===2)for(c=0;o.length()>1;){if(o.getByte()===0){--o.read;break}++c}var d=o.getByte();if(d!==0||c!==i-3-o.length())throw new Error("Encryption block is invalid.");return o.getBytes()}s(BH,"_decodePkcs1_v1_5");function iRt(t,e,n){typeof e=="function"&&(n=e,e={}),e=e||{};var r={algorithm:{name:e.algorithm||"PRIMEINC",options:{workers:e.workers||2,workLoad:e.workLoad||100,workerScript:e.workerScript}}};"prng"in e&&(r.prng=e.prng),i();function i(){o(t.pBits,function(l,c){if(l)return n(l);if(t.p=c,t.q!==null)return a(l,t.q);o(t.qBits,a)})}s(i,"generate");function o(l,c){Xn.prime.generateProbablePrime(l,r,c)}s(o,"getPrime");function a(l,c){if(l)return n(l);if(t.q=c,t.p.compareTo(t.q)<0){var u=t.p;t.p=t.q,t.q=u}if(t.p.subtract(to.ONE).gcd(t.e).compareTo(to.ONE)!==0){t.p=null,i();return}if(t.q.subtract(to.ONE).gcd(t.e).compareTo(to.ONE)!==0){t.q=null,o(t.qBits,a);return}if(t.p1=t.p.subtract(to.ONE),t.q1=t.q.subtract(to.ONE),t.phi=t.p1.multiply(t.q1),t.phi.gcd(t.e).compareTo(to.ONE)!==0){t.p=t.q=null,i();return}if(t.n=t.p.multiply(t.q),t.n.bitLength()!==t.bits){t.q=null,o(t.qBits,a);return}var d=t.e.modInverse(t.phi);t.keys={privateKey:Xr.rsa.setPrivateKey(t.n,t.e,d,t.p,t.q,d.mod(t.p1),d.mod(t.q1),t.q.modInverse(t.p)),publicKey:Xr.rsa.setPublicKey(t.n,t.e)},n(null,t.keys)}s(a,"finish")}s(iRt,"_generateKeyPair");function Jg(t){var e=t.toString(16);e[0]>="8"&&(e="00"+e);var n=Xn.util.hexToBytes(e);return n.length>1&&(n.charCodeAt(0)===0&&(n.charCodeAt(1)&128)===0||n.charCodeAt(0)===255&&(n.charCodeAt(1)&128)===128)?n.substr(1):n}s(Jg,"_bnToBytes");function oRt(t){return t<=100?27:t<=150?18:t<=200?15:t<=250?12:t<=300?9:t<=350?8:t<=400?7:t<=500?6:t<=600?5:t<=800?4:t<=1250?3:2}s(oRt,"_getMillerRabinTests");function P7e(t){return Xn.util.isNodejs&&typeof lce[t]=="function"}s(P7e,"_detectNodeCrypto");function D7e(t){return typeof dp.globalScope<"u"&&typeof dp.globalScope.crypto=="object"&&typeof dp.globalScope.crypto.subtle=="object"&&typeof dp.globalScope.crypto.subtle[t]=="function"}s(D7e,"_detectSubtleCrypto");function N7e(t){return typeof dp.globalScope<"u"&&typeof dp.globalScope.msCrypto=="object"&&typeof dp.globalScope.msCrypto.subtle=="object"&&typeof dp.globalScope.msCrypto.subtle[t]=="function"}s(N7e,"_detectSubtleMsCrypto");function L7e(t){for(var e=Xn.util.hexToBytes(t.toString(16)),n=new Uint8Array(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}s(L7e,"_intToUint8Array")});var cce=H((ZJn,H7e)=>{f();var dn=ui();qv();zm();kD();Gg();Wv();wH();W2();cp();ece();DD();uo();typeof O7e>"u"&&(O7e=dn.jsbn.BigInteger);var O7e,at=dn.asn1,oi=dn.pki=dn.pki||{};H7e.exports=oi.pbe=dn.pbe=dn.pbe||{};var j2=oi.oids,sRt={name:"EncryptedPrivateKeyInfo",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedPrivateKeyInfo.encryptionAlgorithm",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:at.Class.UNIVERSAL,type:at.Type.OID,constructed:!1,capture:"encryptionOid"},{name:"AlgorithmIdentifier.parameters",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,captureAsn1:"encryptionParams"}]},{name:"EncryptedPrivateKeyInfo.encryptedData",tagClass:at.Class.UNIVERSAL,type:at.Type.OCTETSTRING,constructed:!1,capture:"encryptedData"}]},aRt={name:"PBES2Algorithms",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.keyDerivationFunc.oid",tagClass:at.Class.UNIVERSAL,type:at.Type.OID,constructed:!1,capture:"kdfOid"},{name:"PBES2Algorithms.params",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.params.salt",tagClass:at.Class.UNIVERSAL,type:at.Type.OCTETSTRING,constructed:!1,capture:"kdfSalt"},{name:"PBES2Algorithms.params.iterationCount",tagClass:at.Class.UNIVERSAL,type:at.Type.INTEGER,constructed:!1,capture:"kdfIterationCount"},{name:"PBES2Algorithms.params.keyLength",tagClass:at.Class.UNIVERSAL,type:at.Type.INTEGER,constructed:!1,optional:!0,capture:"keyLength"},{name:"PBES2Algorithms.params.prf",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,optional:!0,value:[{name:"PBES2Algorithms.params.prf.algorithm",tagClass:at.Class.UNIVERSAL,type:at.Type.OID,constructed:!1,capture:"prfOid"}]}]}]},{name:"PBES2Algorithms.encryptionScheme",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"PBES2Algorithms.encryptionScheme.oid",tagClass:at.Class.UNIVERSAL,type:at.Type.OID,constructed:!1,capture:"encOid"},{name:"PBES2Algorithms.encryptionScheme.iv",tagClass:at.Class.UNIVERSAL,type:at.Type.OCTETSTRING,constructed:!1,capture:"encIv"}]}]},lRt={name:"pkcs-12PbeParams",tagClass:at.Class.UNIVERSAL,type:at.Type.SEQUENCE,constructed:!0,value:[{name:"pkcs-12PbeParams.salt",tagClass:at.Class.UNIVERSAL,type:at.Type.OCTETSTRING,constructed:!1,capture:"salt"},{name:"pkcs-12PbeParams.iterations",tagClass:at.Class.UNIVERSAL,type:at.Type.INTEGER,constructed:!1,capture:"iterations"}]};oi.encryptPrivateKeyInfo=function(t,e,n){n=n||{},n.saltSize=n.saltSize||8,n.count=n.count||2048,n.algorithm=n.algorithm||"aes128",n.prfAlgorithm=n.prfAlgorithm||"sha1";var r=dn.random.getBytesSync(n.saltSize),i=n.count,o=at.integerToDer(i),a,l,c;if(n.algorithm.indexOf("aes")===0||n.algorithm==="des"){var u,d,p;switch(n.algorithm){case"aes128":a=16,u=16,d=j2["aes128-CBC"],p=dn.aes.createEncryptionCipher;break;case"aes192":a=24,u=16,d=j2["aes192-CBC"],p=dn.aes.createEncryptionCipher;break;case"aes256":a=32,u=16,d=j2["aes256-CBC"],p=dn.aes.createEncryptionCipher;break;case"des":a=8,u=8,d=j2.desCBC,p=dn.des.createEncryptionCipher;break;default:var m=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw m.algorithm=n.algorithm,m}var h="hmacWith"+n.prfAlgorithm.toUpperCase(),g=W7e(h),y=dn.pkcs5.pbkdf2(e,r,i,a,g),v=dn.random.getBytesSync(u),b=p(y);b.start(v),b.update(at.toDer(t)),b.finish(),c=b.output.getBytes();var E=cRt(r,o,a,h);l=at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OID,!1,at.oidToDer(j2.pkcs5PBES2).getBytes()),at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OID,!1,at.oidToDer(j2.pkcs5PBKDF2).getBytes()),E]),at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OID,!1,at.oidToDer(d).getBytes()),at.create(at.Class.UNIVERSAL,at.Type.OCTETSTRING,!1,v)])])])}else if(n.algorithm==="3des"){a=24;var _=new dn.util.ByteBuffer(r),y=oi.pbe.generatePkcs12Key(e,_,1,i,a),v=oi.pbe.generatePkcs12Key(e,_,2,i,a),b=dn.des.createEncryptionCipher(y);b.start(v),b.update(at.toDer(t)),b.finish(),c=b.output.getBytes(),l=at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OID,!1,at.oidToDer(j2["pbeWithSHAAnd3-KeyTripleDES-CBC"]).getBytes()),at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OCTETSTRING,!1,r),at.create(at.Class.UNIVERSAL,at.Type.INTEGER,!1,o.getBytes())])])}else{var m=new Error("Cannot encrypt private key. Unknown encryption algorithm.");throw m.algorithm=n.algorithm,m}var k=at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[l,at.create(at.Class.UNIVERSAL,at.Type.OCTETSTRING,!1,c)]);return k};oi.decryptPrivateKeyInfo=function(t,e){var n=null,r={},i=[];if(!at.validate(t,sRt,r,i)){var o=new Error("Cannot read encrypted private key. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var a=at.derToOid(r.encryptionOid),l=oi.pbe.getCipher(a,r.encryptionParams,e),c=dn.util.createBuffer(r.encryptedData);return l.update(c),l.finish()&&(n=at.fromDer(l.output)),n};oi.encryptedPrivateKeyToPem=function(t,e){var n={type:"ENCRYPTED PRIVATE KEY",body:at.toDer(t).getBytes()};return dn.pem.encode(n,{maxline:e})};oi.encryptedPrivateKeyFromPem=function(t){var e=dn.pem.decode(t)[0];if(e.type!=="ENCRYPTED PRIVATE KEY"){var n=new Error('Could not convert encrypted private key from PEM; PEM header type is "ENCRYPTED PRIVATE KEY".');throw n.headerType=e.type,n}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert encrypted private key from PEM; PEM is encrypted.");return at.fromDer(e.body)};oi.encryptRsaPrivateKey=function(t,e,n){if(n=n||{},!n.legacy){var r=oi.wrapRsaPrivateKey(oi.privateKeyToAsn1(t));return r=oi.encryptPrivateKeyInfo(r,e,n),oi.encryptedPrivateKeyToPem(r)}var i,o,a,l;switch(n.algorithm){case"aes128":i="AES-128-CBC",a=16,o=dn.random.getBytesSync(16),l=dn.aes.createEncryptionCipher;break;case"aes192":i="AES-192-CBC",a=24,o=dn.random.getBytesSync(16),l=dn.aes.createEncryptionCipher;break;case"aes256":i="AES-256-CBC",a=32,o=dn.random.getBytesSync(16),l=dn.aes.createEncryptionCipher;break;case"3des":i="DES-EDE3-CBC",a=24,o=dn.random.getBytesSync(8),l=dn.des.createEncryptionCipher;break;case"des":i="DES-CBC",a=8,o=dn.random.getBytesSync(8),l=dn.des.createEncryptionCipher;break;default:var c=new Error('Could not encrypt RSA private key; unsupported encryption algorithm "'+n.algorithm+'".');throw c.algorithm=n.algorithm,c}var u=dn.pbe.opensslDeriveBytes(e,o.substr(0,8),a),d=l(u);d.start(o),d.update(at.toDer(oi.privateKeyToAsn1(t))),d.finish();var p={type:"RSA PRIVATE KEY",procType:{version:"4",type:"ENCRYPTED"},dekInfo:{algorithm:i,parameters:dn.util.bytesToHex(o).toUpperCase()},body:d.output.getBytes()};return dn.pem.encode(p)};oi.decryptRsaPrivateKey=function(t,e){var n=null,r=dn.pem.decode(t)[0];if(r.type!=="ENCRYPTED PRIVATE KEY"&&r.type!=="PRIVATE KEY"&&r.type!=="RSA PRIVATE KEY"){var i=new Error('Could not convert private key from PEM; PEM header type is not "ENCRYPTED PRIVATE KEY", "PRIVATE KEY", or "RSA PRIVATE KEY".');throw i.headerType=i,i}if(r.procType&&r.procType.type==="ENCRYPTED"){var o,a;switch(r.dekInfo.algorithm){case"DES-CBC":o=8,a=dn.des.createDecryptionCipher;break;case"DES-EDE3-CBC":o=24,a=dn.des.createDecryptionCipher;break;case"AES-128-CBC":o=16,a=dn.aes.createDecryptionCipher;break;case"AES-192-CBC":o=24,a=dn.aes.createDecryptionCipher;break;case"AES-256-CBC":o=32,a=dn.aes.createDecryptionCipher;break;case"RC2-40-CBC":o=5,a=s(function(p){return dn.rc2.createDecryptionCipher(p,40)},"cipherFn");break;case"RC2-64-CBC":o=8,a=s(function(p){return dn.rc2.createDecryptionCipher(p,64)},"cipherFn");break;case"RC2-128-CBC":o=16,a=s(function(p){return dn.rc2.createDecryptionCipher(p,128)},"cipherFn");break;default:var i=new Error('Could not decrypt private key; unsupported encryption algorithm "'+r.dekInfo.algorithm+'".');throw i.algorithm=r.dekInfo.algorithm,i}var l=dn.util.hexToBytes(r.dekInfo.parameters),c=dn.pbe.opensslDeriveBytes(e,l.substr(0,8),o),u=a(c);if(u.start(l),u.update(dn.util.createBuffer(r.body)),u.finish())n=u.output.getBytes();else return n}else n=r.body;return r.type==="ENCRYPTED PRIVATE KEY"?n=oi.decryptPrivateKeyInfo(at.fromDer(n),e):n=at.fromDer(n),n!==null&&(n=oi.privateKeyFromAsn1(n)),n};oi.pbe.generatePkcs12Key=function(t,e,n,r,i,o){var a,l;if(typeof o>"u"||o===null){if(!("sha1"in dn.md))throw new Error('"sha1" hash algorithm unavailable.');o=dn.md.sha1.create()}var c=o.digestLength,u=o.blockLength,d=new dn.util.ByteBuffer,p=new dn.util.ByteBuffer;if(t!=null){for(l=0;l<t.length;l++)p.putInt16(t.charCodeAt(l));p.putInt16(0)}var m=p.length(),h=e.length(),g=new dn.util.ByteBuffer;g.fillWithByte(n,u);var y=u*Math.ceil(h/u),v=new dn.util.ByteBuffer;for(l=0;l<y;l++)v.putByte(e.at(l%h));var b=u*Math.ceil(m/u),E=new dn.util.ByteBuffer;for(l=0;l<b;l++)E.putByte(p.at(l%m));var _=v;_.putBuffer(E);for(var k=Math.ceil(i/c),P=1;P<=k;P++){var N=new dn.util.ByteBuffer;N.putBytes(g.bytes()),N.putBytes(_.bytes());for(var U=0;U<r;U++)o.start(),o.update(N.getBytes()),N=o.digest();var ne=new dn.util.ByteBuffer;for(l=0;l<u;l++)ne.putByte(N.at(l%c));var he=Math.ceil(h/u)+Math.ceil(m/u),ae=new dn.util.ByteBuffer;for(a=0;a<he;a++){var G=new dn.util.ByteBuffer(_.getBytes(u)),W=511;for(l=ne.length()-1;l>=0;l--)W=W>>8,W+=ne.at(l)+G.at(l),G.setAt(l,W&255);ae.putBuffer(G)}_=ae,d.putBuffer(N)}return d.truncate(d.length()-i),d};oi.pbe.getCipher=function(t,e,n){switch(t){case oi.oids.pkcs5PBES2:return oi.pbe.getCipherForPBES2(t,e,n);case oi.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:case oi.oids["pbewithSHAAnd40BitRC2-CBC"]:return oi.pbe.getCipherForPKCS12PBE(t,e,n);default:var r=new Error("Cannot read encrypted PBE data block. Unsupported OID.");throw r.oid=t,r.supportedOids=["pkcs5PBES2","pbeWithSHAAnd3-KeyTripleDES-CBC","pbewithSHAAnd40BitRC2-CBC"],r}};oi.pbe.getCipherForPBES2=function(t,e,n){var r={},i=[];if(!at.validate(e,aRt,r,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}if(t=at.derToOid(r.kdfOid),t!==oi.oids.pkcs5PBKDF2){var o=new Error("Cannot read encrypted private key. Unsupported key derivation function OID.");throw o.oid=t,o.supportedOids=["pkcs5PBKDF2"],o}if(t=at.derToOid(r.encOid),t!==oi.oids["aes128-CBC"]&&t!==oi.oids["aes192-CBC"]&&t!==oi.oids["aes256-CBC"]&&t!==oi.oids["des-EDE3-CBC"]&&t!==oi.oids.desCBC){var o=new Error("Cannot read encrypted private key. Unsupported encryption scheme OID.");throw o.oid=t,o.supportedOids=["aes128-CBC","aes192-CBC","aes256-CBC","des-EDE3-CBC","desCBC"],o}var a=r.kdfSalt,l=dn.util.createBuffer(r.kdfIterationCount);l=l.getInt(l.length()<<3);var c,u;switch(oi.oids[t]){case"aes128-CBC":c=16,u=dn.aes.createDecryptionCipher;break;case"aes192-CBC":c=24,u=dn.aes.createDecryptionCipher;break;case"aes256-CBC":c=32,u=dn.aes.createDecryptionCipher;break;case"des-EDE3-CBC":c=24,u=dn.des.createDecryptionCipher;break;case"desCBC":c=8,u=dn.des.createDecryptionCipher;break}var d=q7e(r.prfOid),p=dn.pkcs5.pbkdf2(n,a,l,c,d),m=r.encIv,h=u(p);return h.start(m),h};oi.pbe.getCipherForPKCS12PBE=function(t,e,n){var r={},i=[];if(!at.validate(e,lRt,r,i)){var o=new Error("Cannot read password-based-encryption algorithm parameters. ASN.1 object is not a supported EncryptedPrivateKeyInfo.");throw o.errors=i,o}var a=dn.util.createBuffer(r.salt),l=dn.util.createBuffer(r.iterations);l=l.getInt(l.length()<<3);var c,u,d;switch(t){case oi.oids["pbeWithSHAAnd3-KeyTripleDES-CBC"]:c=24,u=8,d=dn.des.startDecrypting;break;case oi.oids["pbewithSHAAnd40BitRC2-CBC"]:c=5,u=8,d=s(function(y,v){var b=dn.rc2.createDecryptionCipher(y,40);return b.start(v,null),b},"cipherFn");break;default:var o=new Error("Cannot read PKCS #12 PBE data block. Unsupported OID.");throw o.oid=t,o}var p=q7e(r.prfOid),m=oi.pbe.generatePkcs12Key(n,a,1,l,c,p);p.start();var h=oi.pbe.generatePkcs12Key(n,a,2,l,u,p);return d(m,h)};oi.pbe.opensslDeriveBytes=function(t,e,n,r){if(typeof r>"u"||r===null){if(!("md5"in dn.md))throw new Error('"md5" hash algorithm unavailable.');r=dn.md.md5.create()}e===null&&(e="");for(var i=[U7e(r,t+e)],o=16,a=1;o<n;++a,o+=16)i.push(U7e(r,i[a-1]+t+e));return i.join("").substr(0,n)};function U7e(t,e){return t.start().update(e).digest().getBytes()}s(U7e,"hash");function q7e(t){var e;if(!t)e="hmacWithSHA1";else if(e=oi.oids[at.derToOid(t)],!e){var n=new Error("Unsupported PRF OID.");throw n.oid=t,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}return W7e(e)}s(q7e,"prfOidToMessageDigest");function W7e(t){var e=dn.md;switch(t){case"hmacWithSHA224":e=dn.md.sha512;case"hmacWithSHA1":case"hmacWithSHA256":case"hmacWithSHA384":case"hmacWithSHA512":t=t.substr(8).toLowerCase();break;default:var n=new Error("Unsupported PRF algorithm.");throw n.algorithm=t,n.supported=["hmacWithSHA1","hmacWithSHA224","hmacWithSHA256","hmacWithSHA384","hmacWithSHA512"],n}if(!e||!(t in e))throw new Error("Unknown hash algorithm: "+t);return e[t].create()}s(W7e,"prfAlgorithmToMessageDigest");function cRt(t,e,n,r){var i=at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OCTETSTRING,!1,t),at.create(at.Class.UNIVERSAL,at.Type.INTEGER,!1,e.getBytes())]);return r!=="hmacWithSHA1"&&i.value.push(at.create(at.Class.UNIVERSAL,at.Type.INTEGER,!1,dn.util.hexToBytes(n.toString(16))),at.create(at.Class.UNIVERSAL,at.Type.SEQUENCE,!0,[at.create(at.Class.UNIVERSAL,at.Type.OID,!1,at.oidToDer(oi.oids[r]).getBytes()),at.create(at.Class.UNIVERSAL,at.Type.NULL,!1,"")])),i}s(cRt,"createPbkdf2Params")});var uce=H((nXn,V7e)=>{f();var W4=ui();zm();uo();var sn=W4.asn1,H4=V7e.exports=W4.pkcs7asn1=W4.pkcs7asn1||{};W4.pkcs7=W4.pkcs7||{};W4.pkcs7.asn1=H4;var G7e={name:"ContentInfo",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.ContentType",tagClass:sn.Class.UNIVERSAL,type:sn.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:sn.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,captureAsn1:"content"}]};H4.contentInfoValidator=G7e;var j7e={name:"EncryptedContentInfo",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentType",tagClass:sn.Class.UNIVERSAL,type:sn.Type.OID,constructed:!1,capture:"contentType"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedContentInfo.contentEncryptionAlgorithm.algorithm",tagClass:sn.Class.UNIVERSAL,type:sn.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"EncryptedContentInfo.contentEncryptionAlgorithm.parameter",tagClass:sn.Class.UNIVERSAL,captureAsn1:"encParameter"}]},{name:"EncryptedContentInfo.encryptedContent",tagClass:sn.Class.CONTEXT_SPECIFIC,type:0,capture:"encryptedContent",captureAsn1:"encryptedContentAsn1"}]};H4.envelopedDataValidator={name:"EnvelopedData",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"EnvelopedData.Version",tagClass:sn.Class.UNIVERSAL,type:sn.Type.INTEGER,constructed:!1,capture:"version"},{name:"EnvelopedData.RecipientInfos",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SET,constructed:!0,captureAsn1:"recipientInfos"}].concat(j7e)};H4.encryptedDataValidator={name:"EncryptedData",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"EncryptedData.Version",tagClass:sn.Class.UNIVERSAL,type:sn.Type.INTEGER,constructed:!1,capture:"version"}].concat(j7e)};var uRt={name:"SignerInfo",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.version",tagClass:sn.Class.UNIVERSAL,type:sn.Type.INTEGER,constructed:!1},{name:"SignerInfo.issuerAndSerialNumber",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.issuerAndSerialNumber.issuer",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"SignerInfo.issuerAndSerialNumber.serialNumber",tagClass:sn.Class.UNIVERSAL,type:sn.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"SignerInfo.digestAlgorithm",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"SignerInfo.digestAlgorithm.algorithm",tagClass:sn.Class.UNIVERSAL,type:sn.Type.OID,constructed:!1,capture:"digestAlgorithm"},{name:"SignerInfo.digestAlgorithm.parameter",tagClass:sn.Class.UNIVERSAL,constructed:!1,captureAsn1:"digestParameter",optional:!0}]},{name:"SignerInfo.authenticatedAttributes",tagClass:sn.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"authenticatedAttributes"},{name:"SignerInfo.digestEncryptionAlgorithm",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,capture:"signatureAlgorithm"},{name:"SignerInfo.encryptedDigest",tagClass:sn.Class.UNIVERSAL,type:sn.Type.OCTETSTRING,constructed:!1,capture:"signature"},{name:"SignerInfo.unauthenticatedAttributes",tagClass:sn.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,capture:"unauthenticatedAttributes"}]};H4.signedDataValidator={name:"SignedData",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"SignedData.Version",tagClass:sn.Class.UNIVERSAL,type:sn.Type.INTEGER,constructed:!1,capture:"version"},{name:"SignedData.DigestAlgorithms",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SET,constructed:!0,captureAsn1:"digestAlgorithms"},G7e,{name:"SignedData.Certificates",tagClass:sn.Class.CONTEXT_SPECIFIC,type:0,optional:!0,captureAsn1:"certificates"},{name:"SignedData.CertificateRevocationLists",tagClass:sn.Class.CONTEXT_SPECIFIC,type:1,optional:!0,captureAsn1:"crls"},{name:"SignedData.SignerInfos",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SET,capture:"signerInfos",optional:!0,value:[uRt]}]};H4.recipientInfoValidator={name:"RecipientInfo",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.version",tagClass:sn.Class.UNIVERSAL,type:sn.Type.INTEGER,constructed:!1,capture:"version"},{name:"RecipientInfo.issuerAndSerial",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.issuerAndSerial.issuer",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,captureAsn1:"issuer"},{name:"RecipientInfo.issuerAndSerial.serialNumber",tagClass:sn.Class.UNIVERSAL,type:sn.Type.INTEGER,constructed:!1,capture:"serial"}]},{name:"RecipientInfo.keyEncryptionAlgorithm",tagClass:sn.Class.UNIVERSAL,type:sn.Type.SEQUENCE,constructed:!0,value:[{name:"RecipientInfo.keyEncryptionAlgorithm.algorithm",tagClass:sn.Class.UNIVERSAL,type:sn.Type.OID,constructed:!1,capture:"encAlgorithm"},{name:"RecipientInfo.keyEncryptionAlgorithm.parameter",tagClass:sn.Class.UNIVERSAL,constructed:!1,captureAsn1:"encParameter",optional:!0}]},{name:"RecipientInfo.encryptedKey",tagClass:sn.Class.UNIVERSAL,type:sn.Type.OCTETSTRING,constructed:!1,capture:"encKey"}]}});var dce=H((iXn,$7e)=>{f();var V2=ui();uo();V2.mgf=V2.mgf||{};var dRt=$7e.exports=V2.mgf.mgf1=V2.mgf1=V2.mgf1||{};dRt.create=function(t){var e={generate:s(function(n,r){for(var i=new V2.util.ByteBuffer,o=Math.ceil(r/t.digestLength),a=0;a<o;a++){var l=new V2.util.ByteBuffer;l.putInt32(a),t.start(),t.update(n+l.getBytes()),i.putBuffer(t.digest())}return i.truncate(i.length()-r),i.getBytes()},"generate")};return e}});var Y7e=H((aXn,z7e)=>{f();var PH=ui();dce();z7e.exports=PH.mgf=PH.mgf||{};PH.mgf.mgf1=PH.mgf1});var DH=H((cXn,K7e)=>{f();var $2=ui();cp();uo();var fRt=K7e.exports=$2.pss=$2.pss||{};fRt.create=function(t){arguments.length===3&&(t={md:arguments[0],mgf:arguments[1],saltLength:arguments[2]});var e=t.md,n=t.mgf,r=e.digestLength,i=t.salt||null;typeof i=="string"&&(i=$2.util.createBuffer(i));var o;if("saltLength"in t)o=t.saltLength;else if(i!==null)o=i.length();else throw new Error("Salt length not specified or specific salt not given.");if(i!==null&&i.length()!==o)throw new Error("Given salt length does not match length of given salt.");var a=t.prng||$2.random,l={};return l.encode=function(c,u){var d,p=u-1,m=Math.ceil(p/8),h=c.digest().getBytes();if(m<r+o+2)throw new Error("Message is too long to encrypt.");var g;i===null?g=a.getBytesSync(o):g=i.bytes();var y=new $2.util.ByteBuffer;y.fillWithByte(0,8),y.putBytes(h),y.putBytes(g),e.start(),e.update(y.getBytes());var v=e.digest().getBytes(),b=new $2.util.ByteBuffer;b.fillWithByte(0,m-o-r-2),b.putByte(1),b.putBytes(g);var E=b.getBytes(),_=m-r-1,k=n.generate(v,_),P="";for(d=0;d<_;d++)P+=String.fromCharCode(E.charCodeAt(d)^k.charCodeAt(d));var N=65280>>8*m-p&255;return P=String.fromCharCode(P.charCodeAt(0)&~N)+P.substr(1),P+v+"\xBC"},l.verify=function(c,u,d){var p,m=d-1,h=Math.ceil(m/8);if(u=u.substr(-h),h<r+o+2)throw new Error("Inconsistent parameters to PSS signature verification.");if(u.charCodeAt(h-1)!==188)throw new Error("Encoded message does not end in 0xBC.");var g=h-r-1,y=u.substr(0,g),v=u.substr(g,r),b=65280>>8*h-m&255;if((y.charCodeAt(0)&b)!==0)throw new Error("Bits beyond keysize not zero as expected.");var E=n.generate(v,g),_="";for(p=0;p<g;p++)_+=String.fromCharCode(y.charCodeAt(p)^E.charCodeAt(p));_=String.fromCharCode(_.charCodeAt(0)&~b)+_.substr(1);var k=h-r-o-2;for(p=0;p<k;p++)if(_.charCodeAt(p)!==0)throw new Error("Leftmost octets not zero as expected");if(_.charCodeAt(k)!==1)throw new Error("Inconsistent PSS signature, 0x01 marker not found");var P=_.substr(-o),N=new $2.util.ByteBuffer;N.fillWithByte(0,8),N.putBytes(c),N.putBytes(P),e.start(),e.update(N.getBytes());var U=e.digest().getBytes();return v===U},l}});var FH=H((dXn,tLe)=>{f();var Zn=ui();qv();zm();kD();Gg();Y7e();Wv();W2();DH();DD();uo();var j=Zn.asn1,Wt=tLe.exports=Zn.pki=Zn.pki||{},no=Wt.oids,fa={};fa.CN=no.commonName;fa.commonName="CN";fa.C=no.countryName;fa.countryName="C";fa.L=no.localityName;fa.localityName="L";fa.ST=no.stateOrProvinceName;fa.stateOrProvinceName="ST";fa.O=no.organizationName;fa.organizationName="O";fa.OU=no.organizationalUnitName;fa.organizationalUnitName="OU";fa.E=no.emailAddress;fa.emailAddress="E";var X7e=Zn.pki.rsa.publicKeyValidator,pRt={name:"Certificate",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"tbsCertificate",value:[{name:"Certificate.TBSCertificate.version",tagClass:j.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.version.integer",tagClass:j.Class.UNIVERSAL,type:j.Type.INTEGER,constructed:!1,capture:"certVersion"}]},{name:"Certificate.TBSCertificate.serialNumber",tagClass:j.Class.UNIVERSAL,type:j.Type.INTEGER,constructed:!1,capture:"certSerialNumber"},{name:"Certificate.TBSCertificate.signature",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.signature.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"certinfoSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:j.Class.UNIVERSAL,optional:!0,captureAsn1:"certinfoSignatureParams"}]},{name:"Certificate.TBSCertificate.issuer",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"certIssuer"},{name:"Certificate.TBSCertificate.validity",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.TBSCertificate.validity.notBefore (utc)",tagClass:j.Class.UNIVERSAL,type:j.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity1UTCTime"},{name:"Certificate.TBSCertificate.validity.notBefore (generalized)",tagClass:j.Class.UNIVERSAL,type:j.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity2GeneralizedTime"},{name:"Certificate.TBSCertificate.validity.notAfter (utc)",tagClass:j.Class.UNIVERSAL,type:j.Type.UTCTIME,constructed:!1,optional:!0,capture:"certValidity3UTCTime"},{name:"Certificate.TBSCertificate.validity.notAfter (generalized)",tagClass:j.Class.UNIVERSAL,type:j.Type.GENERALIZEDTIME,constructed:!1,optional:!0,capture:"certValidity4GeneralizedTime"}]},{name:"Certificate.TBSCertificate.subject",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"certSubject"},X7e,{name:"Certificate.TBSCertificate.issuerUniqueID",tagClass:j.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.issuerUniqueID.id",tagClass:j.Class.UNIVERSAL,type:j.Type.BITSTRING,constructed:!1,captureBitStringValue:"certIssuerUniqueId"}]},{name:"Certificate.TBSCertificate.subjectUniqueID",tagClass:j.Class.CONTEXT_SPECIFIC,type:2,constructed:!0,optional:!0,value:[{name:"Certificate.TBSCertificate.subjectUniqueID.id",tagClass:j.Class.UNIVERSAL,type:j.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSubjectUniqueId"}]},{name:"Certificate.TBSCertificate.extensions",tagClass:j.Class.CONTEXT_SPECIFIC,type:3,constructed:!0,captureAsn1:"certExtensions",optional:!0}]},{name:"Certificate.signatureAlgorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"Certificate.signatureAlgorithm.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"certSignatureOid"},{name:"Certificate.TBSCertificate.signature.parameters",tagClass:j.Class.UNIVERSAL,optional:!0,captureAsn1:"certSignatureParams"}]},{name:"Certificate.signatureValue",tagClass:j.Class.UNIVERSAL,type:j.Type.BITSTRING,constructed:!1,captureBitStringValue:"certSignature"}]},mRt={name:"rsapss",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.hashAlgorithm",tagClass:j.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier",tagClass:j.Class.UNIVERSAL,type:j.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.hashAlgorithm.AlgorithmIdentifier.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"hashOid"}]}]},{name:"rsapss.maskGenAlgorithm",tagClass:j.Class.CONTEXT_SPECIFIC,type:1,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier",tagClass:j.Class.UNIVERSAL,type:j.Class.SEQUENCE,constructed:!0,optional:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"maskGenOid"},{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"rsapss.maskGenAlgorithm.AlgorithmIdentifier.params.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"maskGenHashOid"}]}]}]},{name:"rsapss.saltLength",tagClass:j.Class.CONTEXT_SPECIFIC,type:2,optional:!0,value:[{name:"rsapss.saltLength.saltLength",tagClass:j.Class.UNIVERSAL,type:j.Class.INTEGER,constructed:!1,capture:"saltLength"}]},{name:"rsapss.trailerField",tagClass:j.Class.CONTEXT_SPECIFIC,type:3,optional:!0,value:[{name:"rsapss.trailer.trailer",tagClass:j.Class.UNIVERSAL,type:j.Class.INTEGER,constructed:!1,capture:"trailer"}]}]},hRt={name:"CertificationRequestInfo",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfo",value:[{name:"CertificationRequestInfo.integer",tagClass:j.Class.UNIVERSAL,type:j.Type.INTEGER,constructed:!1,capture:"certificationRequestInfoVersion"},{name:"CertificationRequestInfo.subject",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"certificationRequestInfoSubject"},X7e,{name:"CertificationRequestInfo.attributes",tagClass:j.Class.CONTEXT_SPECIFIC,type:0,constructed:!0,optional:!0,capture:"certificationRequestInfoAttributes",value:[{name:"CertificationRequestInfo.attributes",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequestInfo.attributes.type",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1},{name:"CertificationRequestInfo.attributes.value",tagClass:j.Class.UNIVERSAL,type:j.Type.SET,constructed:!0}]}]}]},gRt={name:"CertificationRequest",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,captureAsn1:"csr",value:[hRt,{name:"CertificationRequest.signatureAlgorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.SEQUENCE,constructed:!0,value:[{name:"CertificationRequest.signatureAlgorithm.algorithm",tagClass:j.Class.UNIVERSAL,type:j.Type.OID,constructed:!1,capture:"csrSignatureOid"},{name:"CertificationRequest.signatureAlgorithm.parameters",tagClass:j.Class.UNIVERSAL,optional:!0,captureAsn1:"csrSignatureParams"}]},{name:"CertificationRequest.signature",tagClass:j.Class.UNIVERSAL,type:j.Type.BITSTRING,constructed:!1,captureBitStringValue:"csrSignature"}]};Wt.RDNAttributesAsArray=function(t,e){for(var n=[],r,i,o,a=0;a<t.value.length;++a){r=t.value[a];for(var l=0;l<r.value.length;++l)o={},i=r.value[l],o.type=j.derToOid(i.value[0].value),o.value=i.value[1].value,o.valueTagClass=i.value[1].type,o.type in no&&(o.name=no[o.type],o.name in fa&&(o.shortName=fa[o.name])),e&&(e.update(o.type),e.update(o.value)),n.push(o)}return n};Wt.CRIAttributesAsArray=function(t){for(var e=[],n=0;n<t.length;++n)for(var r=t[n],i=j.derToOid(r.value[0].value),o=r.value[1].value,a=0;a<o.length;++a){var l={};if(l.type=i,l.value=o[a].value,l.valueTagClass=o[a].type,l.type in no&&(l.name=no[l.type],l.name in fa&&(l.shortName=fa[l.name])),l.type===no.extensionRequest){l.extensions=[];for(var c=0;c<l.value.length;++c)l.extensions.push(Wt.certificateExtensionFromAsn1(l.value[c]))}e.push(l)}return e};function jv(t,e){typeof e=="string"&&(e={shortName:e});for(var n=null,r,i=0;n===null&&i<t.attributes.length;++i)r=t.attributes[i],(e.type&&e.type===r.type||e.name&&e.name===r.name||e.shortName&&e.shortName===r.shortName)&&(n=r);return n}s(jv,"_getAttribute");var NH=s(function(t,e,n){var r={};if(t!==no["RSASSA-PSS"])return r;n&&(r={hash:{algorithmOid:no.sha1},mgf:{algorithmOid:no.mgf1,hash:{algorithmOid:no.sha1}},saltLength:20});var i={},o=[];if(!j.validate(e,mRt,i,o)){var a=new Error("Cannot read RSASSA-PSS parameter block.");throw a.errors=o,a}return i.hashOid!==void 0&&(r.hash=r.hash||{},r.hash.algorithmOid=j.derToOid(i.hashOid)),i.maskGenOid!==void 0&&(r.mgf=r.mgf||{},r.mgf.algorithmOid=j.derToOid(i.maskGenOid),r.mgf.hash=r.mgf.hash||{},r.mgf.hash.algorithmOid=j.derToOid(i.maskGenHashOid)),i.saltLength!==void 0&&(r.saltLength=i.saltLength.charCodeAt(0)),r},"_readSignatureParameters"),LH=s(function(t){switch(no[t.signatureOid]){case"sha1WithRSAEncryption":case"sha1WithRSASignature":return Zn.md.sha1.create();case"md5WithRSAEncryption":return Zn.md.md5.create();case"sha256WithRSAEncryption":return Zn.md.sha256.create();case"sha384WithRSAEncryption":return Zn.md.sha384.create();case"sha512WithRSAEncryption":return Zn.md.sha512.create();case"RSASSA-PSS":return Zn.md.sha256.create();default:var e=new Error("Could not compute "+t.type+" digest. Unknown signature OID.");throw e.signatureOid=t.signatureOid,e}},"_createSignatureDigest"),Z7e=s(function(t){var e=t.certificate,n;switch(e.signatureOid){case no.sha1WithRSAEncryption:case no.sha1WithRSASignature:break;case no["RSASSA-PSS"]:var r,i;if(r=no[e.signatureParameters.mgf.hash.algorithmOid],r===void 0||Zn.md[r]===void 0){var o=new Error("Unsupported MGF hash function.");throw o.oid=e.signatureParameters.mgf.hash.algorithmOid,o.name=r,o}if(i=no[e.signatureParameters.mgf.algorithmOid],i===void 0||Zn.mgf[i]===void 0){var o=new Error("Unsupported MGF function.");throw o.oid=e.signatureParameters.mgf.algorithmOid,o.name=i,o}if(i=Zn.mgf[i].create(Zn.md[r].create()),r=no[e.signatureParameters.hash.algorithmOid],r===void 0||Zn.md[r]===void 0){var o=new Error("Unsupported RSASSA-PSS hash function.");throw o.oid=e.signatureParameters.hash.algorithmOid,o.name=r,o}n=Zn.pss.create(Zn.md[r].create(),i,e.signatureParameters.saltLength);break}return e.publicKey.verify(t.md.digest().getBytes(),t.signature,n)},"_verifySignature");Wt.certificateFromPem=function(t,e,n){var r=Zn.pem.decode(t)[0];if(r.type!=="CERTIFICATE"&&r.type!=="X509 CERTIFICATE"&&r.type!=="TRUSTED CERTIFICATE"){var i=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw i.headerType=r.type,i}if(r.procType&&r.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var o=j.fromDer(r.body,n);return Wt.certificateFromAsn1(o,e)};Wt.certificateToPem=function(t,e){var n={type:"CERTIFICATE",body:j.toDer(Wt.certificateToAsn1(t)).getBytes()};return Zn.pem.encode(n,{maxline:e})};Wt.publicKeyFromPem=function(t){var e=Zn.pem.decode(t)[0];if(e.type!=="PUBLIC KEY"&&e.type!=="RSA PUBLIC KEY"){var n=new Error('Could not convert public key from PEM; PEM header type is not "PUBLIC KEY" or "RSA PUBLIC KEY".');throw n.headerType=e.type,n}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert public key from PEM; PEM is encrypted.");var r=j.fromDer(e.body);return Wt.publicKeyFromAsn1(r)};Wt.publicKeyToPem=function(t,e){var n={type:"PUBLIC KEY",body:j.toDer(Wt.publicKeyToAsn1(t)).getBytes()};return Zn.pem.encode(n,{maxline:e})};Wt.publicKeyToRSAPublicKeyPem=function(t,e){var n={type:"RSA PUBLIC KEY",body:j.toDer(Wt.publicKeyToRSAPublicKey(t)).getBytes()};return Zn.pem.encode(n,{maxline:e})};Wt.getPublicKeyFingerprint=function(t,e){e=e||{};var n=e.md||Zn.md.sha1.create(),r=e.type||"RSAPublicKey",i;switch(r){case"RSAPublicKey":i=j.toDer(Wt.publicKeyToRSAPublicKey(t)).getBytes();break;case"SubjectPublicKeyInfo":i=j.toDer(Wt.publicKeyToAsn1(t)).getBytes();break;default:throw new Error('Unknown fingerprint type "'+e.type+'".')}n.start(),n.update(i);var o=n.digest();if(e.encoding==="hex"){var a=o.toHex();return e.delimiter?a.match(/.{2}/g).join(e.delimiter):a}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};Wt.certificationRequestFromPem=function(t,e,n){var r=Zn.pem.decode(t)[0];if(r.type!=="CERTIFICATE REQUEST"){var i=new Error('Could not convert certification request from PEM; PEM header type is not "CERTIFICATE REQUEST".');throw i.headerType=r.type,i}if(r.procType&&r.procType.type==="ENCRYPTED")throw new Error("Could not convert certification request from PEM; PEM is encrypted.");var o=j.fromDer(r.body,n);return Wt.certificationRequestFromAsn1(o,e)};Wt.certificationRequestToPem=function(t,e){var n={type:"CERTIFICATE REQUEST",body:j.toDer(Wt.certificationRequestToAsn1(t)).getBytes()};return Zn.pem.encode(n,{maxline:e})};Wt.createCertificate=function(){var t={};return t.version=2,t.serialNumber="00",t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.validity={},t.validity.notBefore=new Date,t.validity.notAfter=new Date,t.issuer={},t.issuer.getField=function(e){return jv(t.issuer,e)},t.issuer.addField=function(e){fp([e]),t.issuer.attributes.push(e)},t.issuer.attributes=[],t.issuer.hash=null,t.subject={},t.subject.getField=function(e){return jv(t.subject,e)},t.subject.addField=function(e){fp([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.extensions=[],t.publicKey=null,t.md=null,t.setSubject=function(e,n){fp(e),t.subject.attributes=e,delete t.subject.uniqueId,n&&(t.subject.uniqueId=n),t.subject.hash=null},t.setIssuer=function(e,n){fp(e),t.issuer.attributes=e,delete t.issuer.uniqueId,n&&(t.issuer.uniqueId=n),t.issuer.hash=null},t.setExtensions=function(e){for(var n=0;n<e.length;++n)eLe(e[n],{cert:t});t.extensions=e},t.getExtension=function(e){typeof e=="string"&&(e={name:e});for(var n=null,r,i=0;n===null&&i<t.extensions.length;++i)r=t.extensions[i],(e.id&&r.id===e.id||e.name&&r.name===e.name)&&(n=r);return n},t.sign=function(e,n){t.md=n||Zn.md.sha1.create();var r=no[t.md.algorithm+"WithRSAEncryption"];if(!r){var i=new Error("Could not compute certificate digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=r,t.tbsCertificate=Wt.getTBSCertificate(t);var o=j.toDer(t.tbsCertificate);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(e){var n=!1;if(!t.issued(e)){var r=e.issuer,i=t.subject,o=new Error("The parent certificate did not issue the given child certificate; the child certificate's issuer does not match the parent's subject.");throw o.expectedIssuer=i.attributes,o.actualIssuer=r.attributes,o}var a=e.md;if(a===null){a=LH({signatureOid:e.signatureOid,type:"certificate"});var l=e.tbsCertificate||Wt.getTBSCertificate(e),c=j.toDer(l);a.update(c.getBytes())}return a!==null&&(n=Z7e({certificate:t,md:a,signature:e.signature})),n},t.isIssuer=function(e){var n=!1,r=t.issuer,i=e.subject;if(r.hash&&i.hash)n=r.hash===i.hash;else if(r.attributes.length===i.attributes.length){n=!0;for(var o,a,l=0;n&&l<r.attributes.length;++l)o=r.attributes[l],a=i.attributes[l],(o.type!==a.type||o.value!==a.value)&&(n=!1)}return n},t.issued=function(e){return e.isIssuer(t)},t.generateSubjectKeyIdentifier=function(){return Wt.getPublicKeyFingerprint(t.publicKey,{type:"RSAPublicKey"})},t.verifySubjectKeyIdentifier=function(){for(var e=no.subjectKeyIdentifier,n=0;n<t.extensions.length;++n){var r=t.extensions[n];if(r.id===e){var i=t.generateSubjectKeyIdentifier().getBytes();return Zn.util.hexToBytes(r.subjectKeyIdentifier)===i}}return!1},t};Wt.certificateFromAsn1=function(t,e){var n={},r=[];if(!j.validate(t,pRt,n,r)){var i=new Error("Cannot read X.509 certificate. ASN.1 object is not an X509v3 Certificate.");throw i.errors=r,i}var o=j.derToOid(n.publicKeyOid);if(o!==Wt.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=Wt.createCertificate();a.version=n.certVersion?n.certVersion.charCodeAt(0):0;var l=Zn.util.createBuffer(n.certSerialNumber);a.serialNumber=l.toHex(),a.signatureOid=Zn.asn1.derToOid(n.certSignatureOid),a.signatureParameters=NH(a.signatureOid,n.certSignatureParams,!0),a.siginfo.algorithmOid=Zn.asn1.derToOid(n.certinfoSignatureOid),a.siginfo.parameters=NH(a.siginfo.algorithmOid,n.certinfoSignatureParams,!1),a.signature=n.certSignature;var c=[];if(n.certValidity1UTCTime!==void 0&&c.push(j.utcTimeToDate(n.certValidity1UTCTime)),n.certValidity2GeneralizedTime!==void 0&&c.push(j.generalizedTimeToDate(n.certValidity2GeneralizedTime)),n.certValidity3UTCTime!==void 0&&c.push(j.utcTimeToDate(n.certValidity3UTCTime)),n.certValidity4GeneralizedTime!==void 0&&c.push(j.generalizedTimeToDate(n.certValidity4GeneralizedTime)),c.length>2)throw new Error("Cannot read notBefore/notAfter validity times; more than two times were provided in the certificate.");if(c.length<2)throw new Error("Cannot read notBefore/notAfter validity times; they were not provided as either UTCTime or GeneralizedTime.");if(a.validity.notBefore=c[0],a.validity.notAfter=c[1],a.tbsCertificate=n.tbsCertificate,e){a.md=LH({signatureOid:a.signatureOid,type:"certificate"});var u=j.toDer(a.tbsCertificate);a.md.update(u.getBytes())}var d=Zn.md.sha1.create(),p=j.toDer(n.certIssuer);d.update(p.getBytes()),a.issuer.getField=function(g){return jv(a.issuer,g)},a.issuer.addField=function(g){fp([g]),a.issuer.attributes.push(g)},a.issuer.attributes=Wt.RDNAttributesAsArray(n.certIssuer),n.certIssuerUniqueId&&(a.issuer.uniqueId=n.certIssuerUniqueId),a.issuer.hash=d.digest().toHex();var m=Zn.md.sha1.create(),h=j.toDer(n.certSubject);return m.update(h.getBytes()),a.subject.getField=function(g){return jv(a.subject,g)},a.subject.addField=function(g){fp([g]),a.subject.attributes.push(g)},a.subject.attributes=Wt.RDNAttributesAsArray(n.certSubject),n.certSubjectUniqueId&&(a.subject.uniqueId=n.certSubjectUniqueId),a.subject.hash=m.digest().toHex(),n.certExtensions?a.extensions=Wt.certificateExtensionsFromAsn1(n.certExtensions):a.extensions=[],a.publicKey=Wt.publicKeyFromAsn1(n.subjectPublicKeyInfo),a};Wt.certificateExtensionsFromAsn1=function(t){for(var e=[],n=0;n<t.value.length;++n)for(var r=t.value[n],i=0;i<r.value.length;++i)e.push(Wt.certificateExtensionFromAsn1(r.value[i]));return e};Wt.certificateExtensionFromAsn1=function(t){var e={};if(e.id=j.derToOid(t.value[0].value),e.critical=!1,t.value[1].type===j.Type.BOOLEAN?(e.critical=t.value[1].value.charCodeAt(0)!==0,e.value=t.value[2].value):e.value=t.value[1].value,e.id in no){if(e.name=no[e.id],e.name==="keyUsage"){var n=j.fromDer(e.value),r=0,i=0;n.value.length>1&&(r=n.value.charCodeAt(1),i=n.value.length>2?n.value.charCodeAt(2):0),e.digitalSignature=(r&128)===128,e.nonRepudiation=(r&64)===64,e.keyEncipherment=(r&32)===32,e.dataEncipherment=(r&16)===16,e.keyAgreement=(r&8)===8,e.keyCertSign=(r&4)===4,e.cRLSign=(r&2)===2,e.encipherOnly=(r&1)===1,e.decipherOnly=(i&128)===128}else if(e.name==="basicConstraints"){var n=j.fromDer(e.value);n.value.length>0&&n.value[0].type===j.Type.BOOLEAN?e.cA=n.value[0].value.charCodeAt(0)!==0:e.cA=!1;var o=null;n.value.length>0&&n.value[0].type===j.Type.INTEGER?o=n.value[0].value:n.value.length>1&&(o=n.value[1].value),o!==null&&(e.pathLenConstraint=j.derToInteger(o))}else if(e.name==="extKeyUsage")for(var n=j.fromDer(e.value),a=0;a<n.value.length;++a){var l=j.derToOid(n.value[a].value);l in no?e[no[l]]=!0:e[l]=!0}else if(e.name==="nsCertType"){var n=j.fromDer(e.value),r=0;n.value.length>1&&(r=n.value.charCodeAt(1)),e.client=(r&128)===128,e.server=(r&64)===64,e.email=(r&32)===32,e.objsign=(r&16)===16,e.reserved=(r&8)===8,e.sslCA=(r&4)===4,e.emailCA=(r&2)===2,e.objCA=(r&1)===1}else if(e.name==="subjectAltName"||e.name==="issuerAltName"){e.altNames=[];for(var c,n=j.fromDer(e.value),u=0;u<n.value.length;++u){c=n.value[u];var d={type:c.type,value:c.value};switch(e.altNames.push(d),c.type){case 1:case 2:case 6:break;case 7:d.ip=Zn.util.bytesToIP(c.value);break;case 8:d.oid=j.derToOid(c.value);break;default:}}}else if(e.name==="subjectKeyIdentifier"){var n=j.fromDer(e.value);e.subjectKeyIdentifier=Zn.util.bytesToHex(n.value)}}return e};Wt.certificationRequestFromAsn1=function(t,e){var n={},r=[];if(!j.validate(t,gRt,n,r)){var i=new Error("Cannot read PKCS#10 certificate request. ASN.1 object is not a PKCS#10 CertificationRequest.");throw i.errors=r,i}var o=j.derToOid(n.publicKeyOid);if(o!==Wt.oids.rsaEncryption)throw new Error("Cannot read public key. OID is not RSA.");var a=Wt.createCertificationRequest();if(a.version=n.csrVersion?n.csrVersion.charCodeAt(0):0,a.signatureOid=Zn.asn1.derToOid(n.csrSignatureOid),a.signatureParameters=NH(a.signatureOid,n.csrSignatureParams,!0),a.siginfo.algorithmOid=Zn.asn1.derToOid(n.csrSignatureOid),a.siginfo.parameters=NH(a.siginfo.algorithmOid,n.csrSignatureParams,!1),a.signature=n.csrSignature,a.certificationRequestInfo=n.certificationRequestInfo,e){a.md=LH({signatureOid:a.signatureOid,type:"certification request"});var l=j.toDer(a.certificationRequestInfo);a.md.update(l.getBytes())}var c=Zn.md.sha1.create();return a.subject.getField=function(u){return jv(a.subject,u)},a.subject.addField=function(u){fp([u]),a.subject.attributes.push(u)},a.subject.attributes=Wt.RDNAttributesAsArray(n.certificationRequestInfoSubject,c),a.subject.hash=c.digest().toHex(),a.publicKey=Wt.publicKeyFromAsn1(n.subjectPublicKeyInfo),a.getAttribute=function(u){return jv(a,u)},a.addAttribute=function(u){fp([u]),a.attributes.push(u)},a.attributes=Wt.CRIAttributesAsArray(n.certificationRequestInfoAttributes||[]),a};Wt.createCertificationRequest=function(){var t={};return t.version=0,t.signatureOid=null,t.signature=null,t.siginfo={},t.siginfo.algorithmOid=null,t.subject={},t.subject.getField=function(e){return jv(t.subject,e)},t.subject.addField=function(e){fp([e]),t.subject.attributes.push(e)},t.subject.attributes=[],t.subject.hash=null,t.publicKey=null,t.attributes=[],t.getAttribute=function(e){return jv(t,e)},t.addAttribute=function(e){fp([e]),t.attributes.push(e)},t.md=null,t.setSubject=function(e){fp(e),t.subject.attributes=e,t.subject.hash=null},t.setAttributes=function(e){fp(e),t.attributes=e},t.sign=function(e,n){t.md=n||Zn.md.sha1.create();var r=no[t.md.algorithm+"WithRSAEncryption"];if(!r){var i=new Error("Could not compute certification request digest. Unknown message digest algorithm OID.");throw i.algorithm=t.md.algorithm,i}t.signatureOid=t.siginfo.algorithmOid=r,t.certificationRequestInfo=Wt.getCertificationRequestInfo(t);var o=j.toDer(t.certificationRequestInfo);t.md.update(o.getBytes()),t.signature=e.sign(t.md)},t.verify=function(){var e=!1,n=t.md;if(n===null){n=LH({signatureOid:t.signatureOid,type:"certification request"});var r=t.certificationRequestInfo||Wt.getCertificationRequestInfo(t),i=j.toDer(r);n.update(i.getBytes())}return n!==null&&(e=Z7e({certificate:t,md:n,signature:t.signature})),e},t};function G4(t){for(var e=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]),n,r,i=t.attributes,o=0;o<i.length;++o){n=i[o];var a=n.value,l=j.Type.PRINTABLESTRING;"valueTagClass"in n&&(l=n.valueTagClass,l===j.Type.UTF8&&(a=Zn.util.encodeUtf8(a))),r=j.create(j.Class.UNIVERSAL,j.Type.SET,!0,[j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(n.type).getBytes()),j.create(j.Class.UNIVERSAL,l,!1,a)])]),e.value.push(r)}return e}s(G4,"_dnToAsn1");function fp(t){for(var e,n=0;n<t.length;++n){if(e=t[n],typeof e.name>"u"&&(e.type&&e.type in Wt.oids?e.name=Wt.oids[e.type]:e.shortName&&e.shortName in fa&&(e.name=Wt.oids[fa[e.shortName]])),typeof e.type>"u")if(e.name&&e.name in Wt.oids)e.type=Wt.oids[e.name];else{var r=new Error("Attribute type not specified.");throw r.attribute=e,r}if(typeof e.shortName>"u"&&e.name&&e.name in fa&&(e.shortName=fa[e.name]),e.type===no.extensionRequest&&(e.valueConstructed=!0,e.valueTagClass=j.Type.SEQUENCE,!e.value&&e.extensions)){e.value=[];for(var i=0;i<e.extensions.length;++i)e.value.push(Wt.certificateExtensionToAsn1(eLe(e.extensions[i])))}if(typeof e.value>"u"){var r=new Error("Attribute value not specified.");throw r.attribute=e,r}}}s(fp,"_fillMissingFields");function eLe(t,e){if(e=e||{},typeof t.name>"u"&&t.id&&t.id in Wt.oids&&(t.name=Wt.oids[t.id]),typeof t.id>"u")if(t.name&&t.name in Wt.oids)t.id=Wt.oids[t.name];else{var n=new Error("Extension ID not specified.");throw n.extension=t,n}if(typeof t.value<"u")return t;if(t.name==="keyUsage"){var r=0,i=0,o=0;t.digitalSignature&&(i|=128,r=7),t.nonRepudiation&&(i|=64,r=6),t.keyEncipherment&&(i|=32,r=5),t.dataEncipherment&&(i|=16,r=4),t.keyAgreement&&(i|=8,r=3),t.keyCertSign&&(i|=4,r=2),t.cRLSign&&(i|=2,r=1),t.encipherOnly&&(i|=1,r=0),t.decipherOnly&&(o|=128,r=7);var a=String.fromCharCode(r);o!==0?a+=String.fromCharCode(i)+String.fromCharCode(o):i!==0&&(a+=String.fromCharCode(i)),t.value=j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,a)}else if(t.name==="basicConstraints")t.value=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]),t.cA&&t.value.value.push(j.create(j.Class.UNIVERSAL,j.Type.BOOLEAN,!1,"\xFF")),"pathLenConstraint"in t&&t.value.value.push(j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(t.pathLenConstraint).getBytes()));else if(t.name==="extKeyUsage"){t.value=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);var l=t.value.value;for(var c in t)t[c]===!0&&(c in no?l.push(j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(no[c]).getBytes())):c.indexOf(".")!==-1&&l.push(j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(c).getBytes())))}else if(t.name==="nsCertType"){var r=0,i=0;t.client&&(i|=128,r=7),t.server&&(i|=64,r=6),t.email&&(i|=32,r=5),t.objsign&&(i|=16,r=4),t.reserved&&(i|=8,r=3),t.sslCA&&(i|=4,r=2),t.emailCA&&(i|=2,r=1),t.objCA&&(i|=1,r=0);var a=String.fromCharCode(r);i!==0&&(a+=String.fromCharCode(i)),t.value=j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,a)}else if(t.name==="subjectAltName"||t.name==="issuerAltName"){t.value=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);for(var u,d=0;d<t.altNames.length;++d){u=t.altNames[d];var a=u.value;if(u.type===7&&u.ip){if(a=Zn.util.bytesFromIP(u.ip),a===null){var n=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw n.extension=t,n}}else u.type===8&&(u.oid?a=j.oidToDer(j.oidToDer(u.oid)):a=j.oidToDer(a));t.value.value.push(j.create(j.Class.CONTEXT_SPECIFIC,u.type,!1,a))}}else if(t.name==="nsComment"&&e.cert){if(!/^[\x00-\x7F]*$/.test(t.comment)||t.comment.length<1||t.comment.length>128)throw new Error('Invalid "nsComment" content.');t.value=j.create(j.Class.UNIVERSAL,j.Type.IA5STRING,!1,t.comment)}else if(t.name==="subjectKeyIdentifier"&&e.cert){var p=e.cert.generateSubjectKeyIdentifier();t.subjectKeyIdentifier=p.toHex(),t.value=j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,p.getBytes())}else if(t.name==="authorityKeyIdentifier"&&e.cert){t.value=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);var l=t.value.value;if(t.keyIdentifier){var m=t.keyIdentifier===!0?e.cert.generateSubjectKeyIdentifier().getBytes():t.keyIdentifier;l.push(j.create(j.Class.CONTEXT_SPECIFIC,0,!1,m))}if(t.authorityCertIssuer){var h=[j.create(j.Class.CONTEXT_SPECIFIC,4,!0,[G4(t.authorityCertIssuer===!0?e.cert.issuer:t.authorityCertIssuer)])];l.push(j.create(j.Class.CONTEXT_SPECIFIC,1,!0,h))}if(t.serialNumber){var g=Zn.util.hexToBytes(t.serialNumber===!0?e.cert.serialNumber:t.serialNumber);l.push(j.create(j.Class.CONTEXT_SPECIFIC,2,!1,g))}}else if(t.name==="cRLDistributionPoints"){t.value=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);for(var l=t.value.value,y=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]),v=j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[]),u,d=0;d<t.altNames.length;++d){u=t.altNames[d];var a=u.value;if(u.type===7&&u.ip){if(a=Zn.util.bytesFromIP(u.ip),a===null){var n=new Error('Extension "ip" value is not a valid IPv4 or IPv6 address.');throw n.extension=t,n}}else u.type===8&&(u.oid?a=j.oidToDer(j.oidToDer(u.oid)):a=j.oidToDer(a));v.value.push(j.create(j.Class.CONTEXT_SPECIFIC,u.type,!1,a))}y.value.push(j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[v])),l.push(y)}if(typeof t.value>"u"){var n=new Error("Extension value not specified.");throw n.extension=t,n}return t}s(eLe,"_fillMissingExtensionFields");function fce(t,e){switch(t){case no["RSASSA-PSS"]:var n=[];return e.hash.algorithmOid!==void 0&&n.push(j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(e.hash.algorithmOid).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.NULL,!1,"")])])),e.mgf.algorithmOid!==void 0&&n.push(j.create(j.Class.CONTEXT_SPECIFIC,1,!0,[j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(e.mgf.algorithmOid).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(e.mgf.hash.algorithmOid).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.NULL,!1,"")])])])),e.saltLength!==void 0&&n.push(j.create(j.Class.CONTEXT_SPECIFIC,2,!0,[j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(e.saltLength).getBytes())])),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,n);default:return j.create(j.Class.UNIVERSAL,j.Type.NULL,!1,"")}}s(fce,"_signatureParametersToAsn1");function ARt(t){var e=j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[]);if(t.attributes.length===0)return e;for(var n=t.attributes,r=0;r<n.length;++r){var i=n[r],o=i.value,a=j.Type.UTF8;"valueTagClass"in i&&(a=i.valueTagClass),a===j.Type.UTF8&&(o=Zn.util.encodeUtf8(o));var l=!1;"valueConstructed"in i&&(l=i.valueConstructed);var c=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(i.type).getBytes()),j.create(j.Class.UNIVERSAL,j.Type.SET,!0,[j.create(j.Class.UNIVERSAL,a,l,o)])]);e.value.push(c)}return e}s(ARt,"_CRIAttributesToAsn1");var yRt=new Date("1950-01-01T00:00:00Z"),CRt=new Date("2050-01-01T00:00:00Z");function J7e(t){return t>=yRt&&t<CRt?j.create(j.Class.UNIVERSAL,j.Type.UTCTIME,!1,j.dateToUtcTime(t)):j.create(j.Class.UNIVERSAL,j.Type.GENERALIZEDTIME,!1,j.dateToGeneralizedTime(t))}s(J7e,"_dateToAsn1");Wt.getTBSCertificate=function(t){var e=J7e(t.validity.notBefore),n=J7e(t.validity.notAfter),r=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.CONTEXT_SPECIFIC,0,!0,[j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(t.version).getBytes())]),j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,Zn.util.hexToBytes(t.serialNumber)),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.siginfo.algorithmOid).getBytes()),fce(t.siginfo.algorithmOid,t.siginfo.parameters)]),G4(t.issuer),j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[e,n]),G4(t.subject),Wt.publicKeyToAsn1(t.publicKey)]);return t.issuer.uniqueId&&r.value.push(j.create(j.Class.CONTEXT_SPECIFIC,1,!0,[j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,"\0"+t.issuer.uniqueId)])),t.subject.uniqueId&&r.value.push(j.create(j.Class.CONTEXT_SPECIFIC,2,!0,[j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,"\0"+t.subject.uniqueId)])),t.extensions.length>0&&r.value.push(Wt.certificateExtensionsToAsn1(t.extensions)),r};Wt.getCertificationRequestInfo=function(t){var e=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.INTEGER,!1,j.integerToDer(t.version).getBytes()),G4(t.subject),Wt.publicKeyToAsn1(t.publicKey),ARt(t)]);return e};Wt.distinguishedNameToAsn1=function(t){return G4(t)};Wt.certificateToAsn1=function(t){var e=t.tbsCertificate||Wt.getTBSCertificate(t);return j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[e,j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.signatureOid).getBytes()),fce(t.signatureOid,t.signatureParameters)]),j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,"\0"+t.signature)])};Wt.certificateExtensionsToAsn1=function(t){var e=j.create(j.Class.CONTEXT_SPECIFIC,3,!0,[]),n=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);e.value.push(n);for(var r=0;r<t.length;++r)n.value.push(Wt.certificateExtensionToAsn1(t[r]));return e};Wt.certificateExtensionToAsn1=function(t){var e=j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[]);e.value.push(j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.id).getBytes())),t.critical&&e.value.push(j.create(j.Class.UNIVERSAL,j.Type.BOOLEAN,!1,"\xFF"));var n=t.value;return typeof t.value!="string"&&(n=j.toDer(n).getBytes()),e.value.push(j.create(j.Class.UNIVERSAL,j.Type.OCTETSTRING,!1,n)),e};Wt.certificationRequestToAsn1=function(t){var e=t.certificationRequestInfo||Wt.getCertificationRequestInfo(t);return j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[e,j.create(j.Class.UNIVERSAL,j.Type.SEQUENCE,!0,[j.create(j.Class.UNIVERSAL,j.Type.OID,!1,j.oidToDer(t.signatureOid).getBytes()),fce(t.signatureOid,t.signatureParameters)]),j.create(j.Class.UNIVERSAL,j.Type.BITSTRING,!1,"\0"+t.signature)])};Wt.createCaStore=function(t){var e={certs:{}};e.getIssuer=function(a){var l=n(a.issuer);return l},e.addCertificate=function(a){if(typeof a=="string"&&(a=Zn.pki.certificateFromPem(a)),r(a.subject),!e.hasCertificate(a))if(a.subject.hash in e.certs){var l=e.certs[a.subject.hash];Zn.util.isArray(l)||(l=[l]),l.push(a),e.certs[a.subject.hash]=l}else e.certs[a.subject.hash]=a},e.hasCertificate=function(a){typeof a=="string"&&(a=Zn.pki.certificateFromPem(a));var l=n(a.subject);if(!l)return!1;Zn.util.isArray(l)||(l=[l]);for(var c=j.toDer(Wt.certificateToAsn1(a)).getBytes(),u=0;u<l.length;++u){var d=j.toDer(Wt.certificateToAsn1(l[u])).getBytes();if(c===d)return!0}return!1},e.listAllCertificates=function(){var a=[];for(var l in e.certs)if(e.certs.hasOwnProperty(l)){var c=e.certs[l];if(!Zn.util.isArray(c))a.push(c);else for(var u=0;u<c.length;++u)a.push(c[u])}return a},e.removeCertificate=function(a){var l;if(typeof a=="string"&&(a=Zn.pki.certificateFromPem(a)),r(a.subject),!e.hasCertificate(a))return null;var c=n(a.subject);if(!Zn.util.isArray(c))return l=e.certs[a.subject.hash],delete e.certs[a.subject.hash],l;for(var u=j.toDer(Wt.certificateToAsn1(a)).getBytes(),d=0;d<c.length;++d){var p=j.toDer(Wt.certificateToAsn1(c[d])).getBytes();u===p&&(l=c[d],c.splice(d,1))}return c.length===0&&delete e.certs[a.subject.hash],l};function n(a){return r(a),e.certs[a.hash]||null}s(n,"getBySubject");function r(a){if(!a.hash){var l=Zn.md.sha1.create();a.attributes=Wt.RDNAttributesAsArray(G4(a),l),a.hash=l.digest().toHex()}}if(s(r,"ensureSubjectHasHash"),t)for(var i=0;i<t.length;++i){var o=t[i];e.addCertificate(o)}return e};Wt.certificateError={bad_certificate:"forge.pki.BadCertificate",unsupported_certificate:"forge.pki.UnsupportedCertificate",certificate_revoked:"forge.pki.CertificateRevoked",certificate_expired:"forge.pki.CertificateExpired",certificate_unknown:"forge.pki.CertificateUnknown",unknown_ca:"forge.pki.UnknownCertificateAuthority"};Wt.verifyCertificateChain=function(t,e,n){typeof n=="function"&&(n={verify:n}),n=n||{},e=e.slice(0);var r=e.slice(0),i=n.validityCheckDate;typeof i>"u"&&(i=new Date);var o=!0,a=null,l=0;do{var c=e.shift(),u=null,d=!1;if(i&&(i<c.validity.notBefore||i>c.validity.notAfter)&&(a={message:"Certificate is not valid yet or has expired.",error:Wt.certificateError.certificate_expired,notBefore:c.validity.notBefore,notAfter:c.validity.notAfter,now:i}),a===null){if(u=e[0]||t.getIssuer(c),u===null&&c.isIssuer(c)&&(d=!0,u=c),u){var p=u;Zn.util.isArray(p)||(p=[p]);for(var m=!1;!m&&p.length>0;){u=p.shift();try{m=u.verify(c)}catch{}}m||(a={message:"Certificate signature is invalid.",error:Wt.certificateError.bad_certificate})}a===null&&(!u||d)&&!t.hasCertificate(c)&&(a={message:"Certificate is not trusted.",error:Wt.certificateError.unknown_ca})}if(a===null&&u&&!c.isIssuer(u)&&(a={message:"Certificate issuer is invalid.",error:Wt.certificateError.bad_certificate}),a===null)for(var h={keyUsage:!0,basicConstraints:!0},g=0;a===null&&g<c.extensions.length;++g){var y=c.extensions[g];y.critical&&!(y.name in h)&&(a={message:"Certificate has an unsupported critical extension.",error:Wt.certificateError.unsupported_certificate})}if(a===null&&(!o||e.length===0&&(!u||d))){var v=c.getExtension("basicConstraints"),b=c.getExtension("keyUsage");if(b!==null&&(!b.keyCertSign||v===null)&&(a={message:"Certificate keyUsage or basicConstraints conflict or indicate that the certificate is not a CA. If the certificate is the only one in the chain or isn't the first then the certificate must be a valid CA.",error:Wt.certificateError.bad_certificate}),a===null&&v!==null&&!v.cA&&(a={message:"Certificate basicConstraints indicates the certificate is not a CA.",error:Wt.certificateError.bad_certificate}),a===null&&b!==null&&"pathLenConstraint"in v){var E=l-1;E>v.pathLenConstraint&&(a={message:"Certificate basicConstraints pathLenConstraint violated.",error:Wt.certificateError.bad_certificate})}}var _=a===null?!0:a.error,k=n.verify?n.verify(_,l,r):_;if(k===!0)a=null;else throw _===!0&&(a={message:"The application rejected the certificate.",error:Wt.certificateError.bad_certificate}),(k||k===0)&&(typeof k=="object"&&!Zn.util.isArray(k)?(k.message&&(a.message=k.message),k.error&&(a.error=k.error)):typeof k=="string"&&(a.error=k)),a;o=!1,++l}while(e.length>0);return!0}});var mce=H((mXn,rLe)=>{f();var rs=ui();zm();M4();Wv();uce();cce();cp();DD();q4();uo();FH();var Ie=rs.asn1,_i=rs.pki,LD=rLe.exports=rs.pkcs12=rs.pkcs12||{},nLe={name:"ContentInfo",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"ContentInfo.contentType",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"contentType"},{name:"ContentInfo.content",tagClass:Ie.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"content"}]},xRt={name:"PFX",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.version",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,capture:"version"},nLe,{name:"PFX.macData",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,optional:!0,captureAsn1:"mac",value:[{name:"PFX.macData.mac",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"PFX.macData.mac.digestAlgorithm.algorithm",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"macAlgorithm"},{name:"PFX.macData.mac.digestAlgorithm.parameters",tagClass:Ie.Class.UNIVERSAL,captureAsn1:"macAlgorithmParameters"}]},{name:"PFX.macData.mac.digest",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OCTETSTRING,constructed:!1,capture:"macDigest"}]},{name:"PFX.macData.macSalt",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OCTETSTRING,constructed:!1,capture:"macSalt"},{name:"PFX.macData.iterations",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.INTEGER,constructed:!1,optional:!0,capture:"macIterations"}]}]},vRt={name:"SafeBag",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"SafeBag.bagId",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"bagId"},{name:"SafeBag.bagValue",tagClass:Ie.Class.CONTEXT_SPECIFIC,constructed:!0,captureAsn1:"bagValue"},{name:"SafeBag.bagAttributes",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SET,constructed:!0,optional:!0,capture:"bagAttributes"}]},bRt={name:"Attribute",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"Attribute.attrId",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"oid"},{name:"Attribute.attrValues",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SET,constructed:!0,capture:"values"}]},ERt={name:"CertBag",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.SEQUENCE,constructed:!0,value:[{name:"CertBag.certId",tagClass:Ie.Class.UNIVERSAL,type:Ie.Type.OID,constructed:!1,capture:"certId"},{name:"CertBag.certValue",tagClass:Ie.Class.CONTEXT_SPECIFIC,constructed:!0,value:[{name:"CertBag.certValue[0]",tagClass:Ie.Class.UNIVERSAL,type:Ie.Class.OCTETSTRING,constructed:!1,capture:"cert"}]}]};function ND(t,e,n,r){for(var i=[],o=0;o<t.length;o++)for(var a=0;a<t[o].safeBags.length;a++){var l=t[o].safeBags[a];if(!(r!==void 0&&l.type!==r)){if(e===null){i.push(l);continue}l.attributes[e]!==void 0&&l.attributes[e].indexOf(n)>=0&&i.push(l)}}return i}s(ND,"_getBagsByAttribute");LD.pkcs12FromAsn1=function(t,e,n){typeof e=="string"?(n=e,e=!0):e===void 0&&(e=!0);var r={},i=[];if(!Ie.validate(t,xRt,r,i)){var o=new Error("Cannot read PKCS#12 PFX. ASN.1 object is not an PKCS#12 PFX.");throw o.errors=o,o}var a={version:r.version.charCodeAt(0),safeContents:[],getBags:s(function(v){var b={},E;return"localKeyId"in v?E=v.localKeyId:"localKeyIdHex"in v&&(E=rs.util.hexToBytes(v.localKeyIdHex)),E===void 0&&!("friendlyName"in v)&&"bagType"in v&&(b[v.bagType]=ND(a.safeContents,null,null,v.bagType)),E!==void 0&&(b.localKeyId=ND(a.safeContents,"localKeyId",E,v.bagType)),"friendlyName"in v&&(b.friendlyName=ND(a.safeContents,"friendlyName",v.friendlyName,v.bagType)),b},"getBags"),getBagsByFriendlyName:s(function(v,b){return ND(a.safeContents,"friendlyName",v,b)},"getBagsByFriendlyName"),getBagsByLocalKeyId:s(function(v,b){return ND(a.safeContents,"localKeyId",v,b)},"getBagsByLocalKeyId")};if(r.version.charCodeAt(0)!==3){var o=new Error("PKCS#12 PFX of version other than 3 not supported.");throw o.version=r.version.charCodeAt(0),o}if(Ie.derToOid(r.contentType)!==_i.oids.data){var o=new Error("Only PKCS#12 PFX in password integrity mode supported.");throw o.oid=Ie.derToOid(r.contentType),o}var l=r.content.value[0];if(l.tagClass!==Ie.Class.UNIVERSAL||l.type!==Ie.Type.OCTETSTRING)throw new Error("PKCS#12 authSafe content data is not an OCTET STRING.");if(l=pce(l),r.mac){var c=null,u=0,d=Ie.derToOid(r.macAlgorithm);switch(d){case _i.oids.sha1:c=rs.md.sha1.create(),u=20;break;case _i.oids.sha256:c=rs.md.sha256.create(),u=32;break;case _i.oids.sha384:c=rs.md.sha384.create(),u=48;break;case _i.oids.sha512:c=rs.md.sha512.create(),u=64;break;case _i.oids.md5:c=rs.md.md5.create(),u=16;break}if(c===null)throw new Error("PKCS#12 uses unsupported MAC algorithm: "+d);var p=new rs.util.ByteBuffer(r.macSalt),m="macIterations"in r?parseInt(rs.util.bytesToHex(r.macIterations),16):1,h=LD.generateKey(n,p,3,m,u,c),g=rs.hmac.create();g.start(c,h),g.update(l.value);var y=g.getMac();if(y.getBytes()!==r.macDigest)throw new Error("PKCS#12 MAC could not be verified. Invalid password?")}return IRt(a,l.value,e,n),a};function pce(t){if(t.composed||t.constructed){for(var e=rs.util.createBuffer(),n=0;n<t.value.length;++n)e.putBytes(t.value[n].value);t.composed=t.constructed=!1,t.value=e.getBytes()}return t}s(pce,"_decodePkcs7Data");function IRt(t,e,n,r){if(e=Ie.fromDer(e,n),e.tagClass!==Ie.Class.UNIVERSAL||e.type!==Ie.Type.SEQUENCE||e.constructed!==!0)throw new Error("PKCS#12 AuthenticatedSafe expected to be a SEQUENCE OF ContentInfo");for(var i=0;i<e.value.length;i++){var o=e.value[i],a={},l=[];if(!Ie.validate(o,nLe,a,l)){var c=new Error("Cannot read ContentInfo.");throw c.errors=l,c}var u={encrypted:!1},d=null,p=a.content.value[0];switch(Ie.derToOid(a.contentType)){case _i.oids.data:if(p.tagClass!==Ie.Class.UNIVERSAL||p.type!==Ie.Type.OCTETSTRING)throw new Error("PKCS#12 SafeContents Data is not an OCTET STRING.");d=pce(p).value;break;case _i.oids.encryptedData:d=TRt(p,r),u.encrypted=!0;break;default:var c=new Error("Unsupported PKCS#12 contentType.");throw c.contentType=Ie.derToOid(a.contentType),c}u.safeBags=wRt(d,n,r),t.safeContents.push(u)}}s(IRt,"_decodeAuthenticatedSafe");function TRt(t,e){var n={},r=[];if(!Ie.validate(t,rs.pkcs7.asn1.encryptedDataValidator,n,r)){var i=new Error("Cannot read EncryptedContentInfo.");throw i.errors=r,i}var o=Ie.derToOid(n.contentType);if(o!==_i.oids.data){var i=new Error("PKCS#12 EncryptedContentInfo ContentType is not Data.");throw i.oid=o,i}o=Ie.derToOid(n.encAlgorithm);var a=_i.pbe.getCipher(o,n.encParameter,e),l=pce(n.encryptedContentAsn1),c=rs.util.createBuffer(l.value);if(a.update(c),!a.finish())throw new Error("Failed to decrypt PKCS#12 SafeContents.");return a.output.getBytes()}s(TRt,"_decryptSafeContents");function wRt(t,e,n){if(!e&&t.length===0)return[];if(t=Ie.fromDer(t,e),t.tagClass!==Ie.Class.UNIVERSAL||t.type!==Ie.Type.SEQUENCE||t.constructed!==!0)throw new Error("PKCS#12 SafeContents expected to be a SEQUENCE OF SafeBag.");for(var r=[],i=0;i<t.value.length;i++){var o=t.value[i],a={},l=[];if(!Ie.validate(o,vRt,a,l)){var c=new Error("Cannot read SafeBag.");throw c.errors=l,c}var u={type:Ie.derToOid(a.bagId),attributes:_Rt(a.bagAttributes)};r.push(u);var d,p,m=a.bagValue.value[0];switch(u.type){case _i.oids.pkcs8ShroudedKeyBag:if(m=_i.decryptPrivateKeyInfo(m,n),m===null)throw new Error("Unable to decrypt PKCS#8 ShroudedKeyBag, wrong password?");case _i.oids.keyBag:try{u.key=_i.privateKeyFromAsn1(m)}catch{u.key=null,u.asn1=m}continue;case _i.oids.certBag:d=ERt,p=s(function(){if(Ie.derToOid(a.certId)!==_i.oids.x509Certificate){var g=new Error("Unsupported certificate type, only X.509 supported.");throw g.oid=Ie.derToOid(a.certId),g}var y=Ie.fromDer(a.cert,e);try{u.cert=_i.certificateFromAsn1(y,!0)}catch{u.cert=null,u.asn1=y}},"decoder");break;default:var c=new Error("Unsupported PKCS#12 SafeBag type.");throw c.oid=u.type,c}if(d!==void 0&&!Ie.validate(m,d,a,l)){var c=new Error("Cannot read PKCS#12 "+d.name);throw c.errors=l,c}p()}return r}s(wRt,"_decodeSafeContents");function _Rt(t){var e={};if(t!==void 0)for(var n=0;n<t.length;++n){var r={},i=[];if(!Ie.validate(t[n],bRt,r,i)){var o=new Error("Cannot read PKCS#12 BagAttribute.");throw o.errors=i,o}var a=Ie.derToOid(r.oid);if(_i.oids[a]!==void 0){e[_i.oids[a]]=[];for(var l=0;l<r.values.length;++l)e[_i.oids[a]].push(r.values[l].value)}}return e}s(_Rt,"_decodeBagAttributes");LD.toPkcs12Asn1=function(t,e,n,r){r=r||{},r.saltSize=r.saltSize||8,r.count=r.count||2048,r.algorithm=r.algorithm||r.encAlgorithm||"aes128","useMac"in r||(r.useMac=!0),"localKeyId"in r||(r.localKeyId=null),"generateLocalKeyId"in r||(r.generateLocalKeyId=!0);var i=r.localKeyId,o;if(i!==null)i=rs.util.hexToBytes(i);else if(r.generateLocalKeyId)if(e){var a=rs.util.isArray(e)?e[0]:e;typeof a=="string"&&(a=_i.certificateFromPem(a));var l=rs.md.sha1.create();l.update(Ie.toDer(_i.certificateToAsn1(a)).getBytes()),i=l.digest().getBytes()}else i=rs.random.getBytes(20);var c=[];i!==null&&c.push(Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.localKeyId).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SET,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,i)])])),"friendlyName"in r&&c.push(Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.friendlyName).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SET,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.BMPSTRING,!1,r.friendlyName)])])),c.length>0&&(o=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SET,!0,c));var u=[],d=[];e!==null&&(rs.util.isArray(e)?d=e:d=[e]);for(var p=[],m=0;m<d.length;++m){e=d[m],typeof e=="string"&&(e=_i.certificateFromPem(e));var h=m===0?o:void 0,g=_i.certificateToAsn1(e),y=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.certBag).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.x509Certificate).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(g).getBytes())])])]),h]);p.push(y)}if(p.length>0){var v=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,p),b=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.data).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(v).getBytes())])]);u.push(b)}var E=null;if(t!==null){var _=_i.wrapRsaPrivateKey(_i.privateKeyToAsn1(t));n===null?E=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.keyBag).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[_]),o]):E=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.pkcs8ShroudedKeyBag).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[_i.encryptPrivateKeyInfo(_,n,r)]),o]);var k=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[E]),P=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.data).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(k).getBytes())])]);u.push(P)}var N=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,u),U;if(r.useMac){var l=rs.md.sha1.create(),ne=new rs.util.ByteBuffer(rs.random.getBytes(r.saltSize)),he=r.count,t=LD.generateKey(n,ne,3,he,20),ae=rs.hmac.create();ae.start(l,t),ae.update(Ie.toDer(N).getBytes());var G=ae.getMac();U=Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.sha1).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.NULL,!1,"")]),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,G.getBytes())]),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,ne.getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.INTEGER,!1,Ie.integerToDer(he).getBytes())])}return Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.INTEGER,!1,Ie.integerToDer(3).getBytes()),Ie.create(Ie.Class.UNIVERSAL,Ie.Type.SEQUENCE,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OID,!1,Ie.oidToDer(_i.oids.data).getBytes()),Ie.create(Ie.Class.CONTEXT_SPECIFIC,0,!0,[Ie.create(Ie.Class.UNIVERSAL,Ie.Type.OCTETSTRING,!1,Ie.toDer(N).getBytes())])]),U])};LD.generateKey=rs.pbe.generatePkcs12Key});var gce=H((AXn,iLe)=>{f();var Vv=ui();zm();Wv();cce();W2();wH();mce();DH();DD();uo();FH();var hce=Vv.asn1,j4=iLe.exports=Vv.pki=Vv.pki||{};j4.pemToDer=function(t){var e=Vv.pem.decode(t)[0];if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PEM to DER; PEM is encrypted.");return Vv.util.createBuffer(e.body)};j4.privateKeyFromPem=function(t){var e=Vv.pem.decode(t)[0];if(e.type!=="PRIVATE KEY"&&e.type!=="RSA PRIVATE KEY"){var n=new Error('Could not convert private key from PEM; PEM header type is not "PRIVATE KEY" or "RSA PRIVATE KEY".');throw n.headerType=e.type,n}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert private key from PEM; PEM is encrypted.");var r=hce.fromDer(e.body);return j4.privateKeyFromAsn1(r)};j4.privateKeyToPem=function(t,e){var n={type:"RSA PRIVATE KEY",body:hce.toDer(j4.privateKeyToAsn1(t)).getBytes()};return Vv.pem.encode(n,{maxline:e})};j4.privateKeyInfoToPem=function(t,e){var n={type:"PRIVATE KEY",body:hce.toDer(t).getBytes()};return Vv.pem.encode(n,{maxline:e})}});var bce=H((CXn,fLe)=>{f();var xt=ui();zm();M4();bH();W2();gce();cp();q4();uo();var UH=s(function(t,e,n,r){var i=xt.util.createBuffer(),o=t.length>>1,a=o+(t.length&1),l=t.substr(0,a),c=t.substr(o,a),u=xt.util.createBuffer(),d=xt.hmac.create();n=e+n;var p=Math.ceil(r/16),m=Math.ceil(r/20);d.start("MD5",l);var h=xt.util.createBuffer();u.putBytes(n);for(var g=0;g<p;++g)d.start(null,null),d.update(u.getBytes()),u.putBuffer(d.digest()),d.start(null,null),d.update(u.bytes()+n),h.putBuffer(d.digest());d.start("SHA1",c);var y=xt.util.createBuffer();u.clear(),u.putBytes(n);for(var g=0;g<m;++g)d.start(null,null),d.update(u.getBytes()),u.putBuffer(d.digest()),d.start(null,null),d.update(u.bytes()+n),y.putBuffer(d.digest());return i.putBytes(xt.util.xorBytes(h.getBytes(),y.getBytes(),r)),i},"prf_TLS1"),SRt=s(function(t,e,n){var r=xt.hmac.create();r.start("SHA1",t);var i=xt.util.createBuffer();return i.putInt32(e[0]),i.putInt32(e[1]),i.putByte(n.type),i.putByte(n.version.major),i.putByte(n.version.minor),i.putInt16(n.length),i.putBytes(n.fragment.bytes()),r.update(i.getBytes()),r.digest().getBytes()},"hmac_sha1"),RRt=s(function(t,e,n){var r=!1;try{var i=t.deflate(e.fragment.getBytes());e.fragment=xt.util.createBuffer(i),e.length=i.length,r=!0}catch{}return r},"deflate"),kRt=s(function(t,e,n){var r=!1;try{var i=t.inflate(e.fragment.getBytes());e.fragment=xt.util.createBuffer(i),e.length=i.length,r=!0}catch{}return r},"inflate"),M0=s(function(t,e){var n=0;switch(e){case 1:n=t.getByte();break;case 2:n=t.getInt16();break;case 3:n=t.getInt24();break;case 4:n=t.getInt32();break}return xt.util.createBuffer(t.getBytes(n))},"readVector"),pp=s(function(t,e,n){t.putInt(n.length(),e<<3),t.putBuffer(n)},"writeVector"),z={};z.Versions={TLS_1_0:{major:3,minor:1},TLS_1_1:{major:3,minor:2},TLS_1_2:{major:3,minor:3}};z.SupportedVersions=[z.Versions.TLS_1_1,z.Versions.TLS_1_0];z.Version=z.SupportedVersions[0];z.MaxFragment=15360;z.ConnectionEnd={server:0,client:1};z.PRFAlgorithm={tls_prf_sha256:0};z.BulkCipherAlgorithm={none:null,rc4:0,des3:1,aes:2};z.CipherType={stream:0,block:1,aead:2};z.MACAlgorithm={none:null,hmac_md5:0,hmac_sha1:1,hmac_sha256:2,hmac_sha384:3,hmac_sha512:4};z.CompressionMethod={none:0,deflate:1};z.ContentType={change_cipher_spec:20,alert:21,handshake:22,application_data:23,heartbeat:24};z.HandshakeType={hello_request:0,client_hello:1,server_hello:2,certificate:11,server_key_exchange:12,certificate_request:13,server_hello_done:14,certificate_verify:15,client_key_exchange:16,finished:20};z.Alert={};z.Alert.Level={warning:1,fatal:2};z.Alert.Description={close_notify:0,unexpected_message:10,bad_record_mac:20,decryption_failed:21,record_overflow:22,decompression_failure:30,handshake_failure:40,bad_certificate:42,unsupported_certificate:43,certificate_revoked:44,certificate_expired:45,certificate_unknown:46,illegal_parameter:47,unknown_ca:48,access_denied:49,decode_error:50,decrypt_error:51,export_restriction:60,protocol_version:70,insufficient_security:71,internal_error:80,user_canceled:90,no_renegotiation:100};z.HeartbeatMessageType={heartbeat_request:1,heartbeat_response:2};z.CipherSuites={};z.getCipherSuite=function(t){var e=null;for(var n in z.CipherSuites){var r=z.CipherSuites[n];if(r.id[0]===t.charCodeAt(0)&&r.id[1]===t.charCodeAt(1)){e=r;break}}return e};z.handleUnexpected=function(t,e){var n=!t.open&&t.entity===z.ConnectionEnd.client;n||t.error(t,{message:"Unexpected message. Received TLS record out of order.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.unexpected_message}})};z.handleHelloRequest=function(t,e,n){!t.handshaking&&t.handshakes>0&&(z.queue(t,z.createAlert(t,{level:z.Alert.Level.warning,description:z.Alert.Description.no_renegotiation})),z.flush(t)),t.process()};z.parseHelloMessage=function(t,e,n){var r=null,i=t.entity===z.ConnectionEnd.client;if(n<38)t.error(t,{message:i?"Invalid ServerHello message. Message too short.":"Invalid ClientHello message. Message too short.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}});else{var o=e.fragment,a=o.length();if(r={version:{major:o.getByte(),minor:o.getByte()},random:xt.util.createBuffer(o.getBytes(32)),session_id:M0(o,1),extensions:[]},i?(r.cipher_suite=o.getBytes(2),r.compression_method=o.getByte()):(r.cipher_suites=M0(o,2),r.compression_methods=M0(o,1)),a=n-(a-o.length()),a>0){for(var l=M0(o,2);l.length()>0;)r.extensions.push({type:[l.getByte(),l.getByte()],data:M0(l,2)});if(!i)for(var c=0;c<r.extensions.length;++c){var u=r.extensions[c];if(u.type[0]===0&&u.type[1]===0)for(var d=M0(u.data,2);d.length()>0;){var p=d.getByte();if(p!==0)break;t.session.extensions.server_name.serverNameList.push(M0(d,2).getBytes())}}}if(t.session.version&&(r.version.major!==t.session.version.major||r.version.minor!==t.session.version.minor))return t.error(t,{message:"TLS version change is disallowed during renegotiation.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.protocol_version}});if(i)t.session.cipherSuite=z.getCipherSuite(r.cipher_suite);else for(var m=xt.util.createBuffer(r.cipher_suites.bytes());m.length()>0&&(t.session.cipherSuite=z.getCipherSuite(m.getBytes(2)),t.session.cipherSuite===null););if(t.session.cipherSuite===null)return t.error(t,{message:"No cipher suites in common.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.handshake_failure},cipherSuite:xt.util.bytesToHex(r.cipher_suite)});i?t.session.compressionMethod=r.compression_method:t.session.compressionMethod=z.CompressionMethod.none}return r};z.createSecurityParameters=function(t,e){var n=t.entity===z.ConnectionEnd.client,r=e.random.bytes(),i=n?t.session.sp.client_random:r,o=n?r:z.createRandom().getBytes();t.session.sp={entity:t.entity,prf_algorithm:z.PRFAlgorithm.tls_prf_sha256,bulk_cipher_algorithm:null,cipher_type:null,enc_key_length:null,block_length:null,fixed_iv_length:null,record_iv_length:null,mac_algorithm:null,mac_length:null,mac_key_length:null,compression_algorithm:t.session.compressionMethod,pre_master_secret:null,master_secret:null,client_random:i,server_random:o}};z.handleServerHello=function(t,e,n){var r=z.parseHelloMessage(t,e,n);if(!t.fail){if(r.version.minor<=t.version.minor)t.version.minor=r.version.minor;else return t.error(t,{message:"Incompatible TLS version.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.protocol_version}});t.session.version=t.version;var i=r.session_id.bytes();i.length>0&&i===t.session.id?(t.expect=aLe,t.session.resuming=!0,t.session.sp.server_random=r.random.bytes()):(t.expect=PRt,t.session.resuming=!1,z.createSecurityParameters(t,r)),t.session.id=i,t.process()}};z.handleClientHello=function(t,e,n){var r=z.parseHelloMessage(t,e,n);if(!t.fail){var i=r.session_id.bytes(),o=null;if(t.sessionCache&&(o=t.sessionCache.getSession(i),o===null?i="":(o.version.major!==r.version.major||o.version.minor>r.version.minor)&&(o=null,i="")),i.length===0&&(i=xt.random.getBytes(32)),t.session.id=i,t.session.clientHelloVersion=r.version,t.session.sp={},o)t.version=t.session.version=o.version,t.session.sp=o.sp;else{for(var a,l=1;l<z.SupportedVersions.length&&(a=z.SupportedVersions[l],!(a.minor<=r.version.minor));++l);t.version={major:a.major,minor:a.minor},t.session.version=t.version}o!==null?(t.expect=xce,t.session.resuming=!0,t.session.sp.client_random=r.random.bytes()):(t.expect=t.verifyClient!==!1?ORt:Cce,t.session.resuming=!1,z.createSecurityParameters(t,r)),t.open=!0,z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createServerHello(t)})),t.session.resuming?(z.queue(t,z.createRecord(t,{type:z.ContentType.change_cipher_spec,data:z.createChangeCipherSpec()})),t.state.pending=z.createConnectionState(t),t.state.current.write=t.state.pending.write,z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createFinished(t)}))):(z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createCertificate(t)})),t.fail||(z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createServerKeyExchange(t)})),t.verifyClient!==!1&&z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createCertificateRequest(t)})),z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createServerHelloDone(t)})))),z.flush(t),t.process()}};z.handleCertificate=function(t,e,n){if(n<3)return t.error(t,{message:"Invalid Certificate message. Message too short.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}});var r=e.fragment,i={certificate_list:M0(r,3)},o,a,l=[];try{for(;i.certificate_list.length()>0;)o=M0(i.certificate_list,3),a=xt.asn1.fromDer(o),o=xt.pki.certificateFromAsn1(a,!0),l.push(o)}catch(u){return t.error(t,{message:"Could not parse certificate list.",cause:u,send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.bad_certificate}})}var c=t.entity===z.ConnectionEnd.client;(c||t.verifyClient===!0)&&l.length===0?t.error(t,{message:c?"No server certificate provided.":"No client certificate provided.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}}):l.length===0?t.expect=c?oLe:Cce:(c?t.session.serverCertificate=l[0]:t.session.clientCertificate=l[0],z.verifyCertificateChain(t,l)&&(t.expect=c?oLe:Cce)),t.process()};z.handleServerKeyExchange=function(t,e,n){if(n>0)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.unsupported_certificate}});t.expect=DRt,t.process()};z.handleClientKeyExchange=function(t,e,n){if(n<48)return t.error(t,{message:"Invalid key parameters. Only RSA is supported.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.unsupported_certificate}});var r=e.fragment,i={enc_pre_master_secret:M0(r,2).getBytes()},o=null;if(t.getPrivateKey)try{o=t.getPrivateKey(t,t.session.serverCertificate),o=xt.pki.privateKeyFromPem(o)}catch(c){t.error(t,{message:"Could not get private key.",cause:c,send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}})}if(o===null)return t.error(t,{message:"No private key set.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}});try{var a=t.session.sp;a.pre_master_secret=o.decrypt(i.enc_pre_master_secret);var l=t.session.clientHelloVersion;if(l.major!==a.pre_master_secret.charCodeAt(0)||l.minor!==a.pre_master_secret.charCodeAt(1))throw new Error("TLS version rollback attack detected.")}catch{a.pre_master_secret=xt.random.getBytes(48)}t.expect=xce,t.session.clientCertificate!==null&&(t.expect=URt),t.process()};z.handleCertificateRequest=function(t,e,n){if(n<3)return t.error(t,{message:"Invalid CertificateRequest. Message too short.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}});var r=e.fragment,i={certificate_types:M0(r,1),certificate_authorities:M0(r,2)};t.session.certificateRequest=i,t.expect=NRt,t.process()};z.handleCertificateVerify=function(t,e,n){if(n<2)return t.error(t,{message:"Invalid CertificateVerify. Message too short.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}});var r=e.fragment;r.read-=4;var i=r.bytes();r.read+=4;var o={signature:M0(r,2).getBytes()},a=xt.util.createBuffer();a.putBuffer(t.session.md5.digest()),a.putBuffer(t.session.sha1.digest()),a=a.getBytes();try{var l=t.session.clientCertificate;if(!l.publicKey.verify(a,o.signature,"NONE"))throw new Error("CertificateVerify signature does not match.");t.session.md5.update(i),t.session.sha1.update(i)}catch{return t.error(t,{message:"Bad signature in CertificateVerify.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.handshake_failure}})}t.expect=xce,t.process()};z.handleServerHelloDone=function(t,e,n){if(n>0)return t.error(t,{message:"Invalid ServerHelloDone message. Invalid length.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.record_overflow}});if(t.serverCertificate===null){var r={message:"No server certificate provided. Not enough security.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.insufficient_security}},i=0,o=t.verify(t,r.alert.description,i,[]);if(o!==!0)return(o||o===0)&&(typeof o=="object"&&!xt.util.isArray(o)?(o.message&&(r.message=o.message),o.alert&&(r.alert.description=o.alert)):typeof o=="number"&&(r.alert.description=o)),t.error(t,r)}t.session.certificateRequest!==null&&(e=z.createRecord(t,{type:z.ContentType.handshake,data:z.createCertificate(t)}),z.queue(t,e)),e=z.createRecord(t,{type:z.ContentType.handshake,data:z.createClientKeyExchange(t)}),z.queue(t,e),t.expect=MRt;var a=s(function(l,c){l.session.certificateRequest!==null&&l.session.clientCertificate!==null&&z.queue(l,z.createRecord(l,{type:z.ContentType.handshake,data:z.createCertificateVerify(l,c)})),z.queue(l,z.createRecord(l,{type:z.ContentType.change_cipher_spec,data:z.createChangeCipherSpec()})),l.state.pending=z.createConnectionState(l),l.state.current.write=l.state.pending.write,z.queue(l,z.createRecord(l,{type:z.ContentType.handshake,data:z.createFinished(l)})),l.expect=aLe,z.flush(l),l.process()},"callback");if(t.session.certificateRequest===null||t.session.clientCertificate===null)return a(t,null);z.getClientSignature(t,a)};z.handleChangeCipherSpec=function(t,e){if(e.fragment.getByte()!==1)return t.error(t,{message:"Invalid ChangeCipherSpec message received.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.illegal_parameter}});var n=t.entity===z.ConnectionEnd.client;(t.session.resuming&&n||!t.session.resuming&&!n)&&(t.state.pending=z.createConnectionState(t)),t.state.current.read=t.state.pending.read,(!t.session.resuming&&n||t.session.resuming&&!n)&&(t.state.pending=null),t.expect=n?LRt:qRt,t.process()};z.handleFinished=function(t,e,n){var r=e.fragment;r.read-=4;var i=r.bytes();r.read+=4;var o=e.fragment.getBytes();r=xt.util.createBuffer(),r.putBuffer(t.session.md5.digest()),r.putBuffer(t.session.sha1.digest());var a=t.entity===z.ConnectionEnd.client,l=a?"server finished":"client finished",c=t.session.sp,u=12,d=UH;if(r=d(c.master_secret,l,r.getBytes(),u),r.getBytes()!==o)return t.error(t,{message:"Invalid verify_data in Finished message.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.decrypt_error}});t.session.md5.update(i),t.session.sha1.update(i),(t.session.resuming&&a||!t.session.resuming&&!a)&&(z.queue(t,z.createRecord(t,{type:z.ContentType.change_cipher_spec,data:z.createChangeCipherSpec()})),t.state.current.write=t.state.pending.write,t.state.pending=null,z.queue(t,z.createRecord(t,{type:z.ContentType.handshake,data:z.createFinished(t)}))),t.expect=a?FRt:WRt,t.handshaking=!1,++t.handshakes,t.peerCertificate=a?t.session.serverCertificate:t.session.clientCertificate,z.flush(t),t.isConnected=!0,t.connected(t),t.process()};z.handleAlert=function(t,e){var n=e.fragment,r={level:n.getByte(),description:n.getByte()},i;switch(r.description){case z.Alert.Description.close_notify:i="Connection closed.";break;case z.Alert.Description.unexpected_message:i="Unexpected message.";break;case z.Alert.Description.bad_record_mac:i="Bad record MAC.";break;case z.Alert.Description.decryption_failed:i="Decryption failed.";break;case z.Alert.Description.record_overflow:i="Record overflow.";break;case z.Alert.Description.decompression_failure:i="Decompression failed.";break;case z.Alert.Description.handshake_failure:i="Handshake failure.";break;case z.Alert.Description.bad_certificate:i="Bad certificate.";break;case z.Alert.Description.unsupported_certificate:i="Unsupported certificate.";break;case z.Alert.Description.certificate_revoked:i="Certificate revoked.";break;case z.Alert.Description.certificate_expired:i="Certificate expired.";break;case z.Alert.Description.certificate_unknown:i="Certificate unknown.";break;case z.Alert.Description.illegal_parameter:i="Illegal parameter.";break;case z.Alert.Description.unknown_ca:i="Unknown certificate authority.";break;case z.Alert.Description.access_denied:i="Access denied.";break;case z.Alert.Description.decode_error:i="Decode error.";break;case z.Alert.Description.decrypt_error:i="Decrypt error.";break;case z.Alert.Description.export_restriction:i="Export restriction.";break;case z.Alert.Description.protocol_version:i="Unsupported protocol version.";break;case z.Alert.Description.insufficient_security:i="Insufficient security.";break;case z.Alert.Description.internal_error:i="Internal error.";break;case z.Alert.Description.user_canceled:i="User canceled.";break;case z.Alert.Description.no_renegotiation:i="Renegotiation not supported.";break;default:i="Unknown error.";break}if(r.description===z.Alert.Description.close_notify)return t.close();t.error(t,{message:i,send:!1,origin:t.entity===z.ConnectionEnd.client?"server":"client",alert:r}),t.process()};z.handleHandshake=function(t,e){var n=e.fragment,r=n.getByte(),i=n.getInt24();if(i>n.length())return t.fragmented=e,e.fragment=xt.util.createBuffer(),n.read-=4,t.process();t.fragmented=null,n.read-=4;var o=n.bytes(i+4);n.read+=4,r in OH[t.entity][t.expect]?(t.entity===z.ConnectionEnd.server&&!t.open&&!t.fail&&(t.handshaking=!0,t.session={version:null,extensions:{server_name:{serverNameList:[]}},cipherSuite:null,compressionMethod:null,serverCertificate:null,clientCertificate:null,md5:xt.md.md5.create(),sha1:xt.md.sha1.create()}),r!==z.HandshakeType.hello_request&&r!==z.HandshakeType.certificate_verify&&r!==z.HandshakeType.finished&&(t.session.md5.update(o),t.session.sha1.update(o)),OH[t.entity][t.expect][r](t,e,i)):z.handleUnexpected(t,e)};z.handleApplicationData=function(t,e){t.data.putBuffer(e.fragment),t.dataReady(t),t.process()};z.handleHeartbeat=function(t,e){var n=e.fragment,r=n.getByte(),i=n.getInt16(),o=n.getBytes(i);if(r===z.HeartbeatMessageType.heartbeat_request){if(t.handshaking||i>o.length)return t.process();z.queue(t,z.createRecord(t,{type:z.ContentType.heartbeat,data:z.createHeartbeat(z.HeartbeatMessageType.heartbeat_response,o)})),z.flush(t)}else if(r===z.HeartbeatMessageType.heartbeat_response){if(o!==t.expectedHeartbeatPayload)return t.process();t.heartbeatReceived&&t.heartbeatReceived(t,xt.util.createBuffer(o))}t.process()};var BRt=0,PRt=1,oLe=2,DRt=3,NRt=4,aLe=5,LRt=6,FRt=7,MRt=8,QRt=0,ORt=1,Cce=2,URt=3,xce=4,qRt=5,WRt=6,$=z.handleUnexpected,lLe=z.handleChangeCipherSpec,Cc=z.handleAlert,qu=z.handleHandshake,cLe=z.handleApplicationData,xc=z.handleHeartbeat,vce=[];vce[z.ConnectionEnd.client]=[[$,Cc,qu,$,xc],[$,Cc,qu,$,xc],[$,Cc,qu,$,xc],[$,Cc,qu,$,xc],[$,Cc,qu,$,xc],[lLe,Cc,$,$,xc],[$,Cc,qu,$,xc],[$,Cc,qu,cLe,xc],[$,Cc,qu,$,xc]];vce[z.ConnectionEnd.server]=[[$,Cc,qu,$,xc],[$,Cc,qu,$,xc],[$,Cc,qu,$,xc],[$,Cc,qu,$,xc],[lLe,Cc,$,$,xc],[$,Cc,qu,$,xc],[$,Cc,qu,cLe,xc],[$,Cc,qu,$,xc]];var $v=z.handleHelloRequest,HRt=z.handleServerHello,uLe=z.handleCertificate,sLe=z.handleServerKeyExchange,Ace=z.handleCertificateRequest,MH=z.handleServerHelloDone,dLe=z.handleFinished,OH=[];OH[z.ConnectionEnd.client]=[[$,$,HRt,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[$v,$,$,$,$,$,$,$,$,$,$,uLe,sLe,Ace,MH,$,$,$,$,$,$],[$v,$,$,$,$,$,$,$,$,$,$,$,sLe,Ace,MH,$,$,$,$,$,$],[$v,$,$,$,$,$,$,$,$,$,$,$,$,Ace,MH,$,$,$,$,$,$],[$v,$,$,$,$,$,$,$,$,$,$,$,$,$,MH,$,$,$,$,$,$],[$v,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[$v,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,dLe],[$v,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[$v,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$]];var GRt=z.handleClientHello,jRt=z.handleClientKeyExchange,VRt=z.handleCertificateVerify;OH[z.ConnectionEnd.server]=[[$,GRt,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,uLe,$,$,$,$,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,jRt,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,VRt,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,dLe],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$],[$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$,$]];z.generateKeys=function(t,e){var n=UH,r=e.client_random+e.server_random;t.session.resuming||(e.master_secret=n(e.pre_master_secret,"master secret",r,48).bytes(),e.pre_master_secret=null),r=e.server_random+e.client_random;var i=2*e.mac_key_length+2*e.enc_key_length,o=t.version.major===z.Versions.TLS_1_0.major&&t.version.minor===z.Versions.TLS_1_0.minor;o&&(i+=2*e.fixed_iv_length);var a=n(e.master_secret,"key expansion",r,i),l={client_write_MAC_key:a.getBytes(e.mac_key_length),server_write_MAC_key:a.getBytes(e.mac_key_length),client_write_key:a.getBytes(e.enc_key_length),server_write_key:a.getBytes(e.enc_key_length)};return o&&(l.client_write_IV=a.getBytes(e.fixed_iv_length),l.server_write_IV=a.getBytes(e.fixed_iv_length)),l};z.createConnectionState=function(t){var e=t.entity===z.ConnectionEnd.client,n=s(function(){var o={sequenceNumber:[0,0],macKey:null,macLength:0,macFunction:null,cipherState:null,cipherFunction:s(function(a){return!0},"cipherFunction"),compressionState:null,compressFunction:s(function(a){return!0},"compressFunction"),updateSequenceNumber:s(function(){o.sequenceNumber[1]===4294967295?(o.sequenceNumber[1]=0,++o.sequenceNumber[0]):++o.sequenceNumber[1]},"updateSequenceNumber")};return o},"createMode"),r={read:n(),write:n()};if(r.read.update=function(o,a){return r.read.cipherFunction(a,r.read)?r.read.compressFunction(o,a,r.read)||o.error(o,{message:"Could not decompress record.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.decompression_failure}}):o.error(o,{message:"Could not decrypt record or bad MAC.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.bad_record_mac}}),!o.fail},r.write.update=function(o,a){return r.write.compressFunction(o,a,r.write)?r.write.cipherFunction(a,r.write)||o.error(o,{message:"Could not encrypt record.",send:!1,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}}):o.error(o,{message:"Could not compress record.",send:!1,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}}),!o.fail},t.session){var i=t.session.sp;switch(t.session.cipherSuite.initSecurityParameters(i),i.keys=z.generateKeys(t,i),r.read.macKey=e?i.keys.server_write_MAC_key:i.keys.client_write_MAC_key,r.write.macKey=e?i.keys.client_write_MAC_key:i.keys.server_write_MAC_key,t.session.cipherSuite.initConnectionState(r,t,i),i.compression_algorithm){case z.CompressionMethod.none:break;case z.CompressionMethod.deflate:r.read.compressFunction=kRt,r.write.compressFunction=RRt;break;default:throw new Error("Unsupported compression algorithm.")}}return r};z.createRandom=function(){var t=new Date,e=+t+t.getTimezoneOffset()*6e4,n=xt.util.createBuffer();return n.putInt32(e),n.putBytes(xt.random.getBytes(28)),n};z.createRecord=function(t,e){if(!e.data)return null;var n={type:e.type,version:{major:t.version.major,minor:t.version.minor},length:e.data.length(),fragment:e.data};return n};z.createAlert=function(t,e){var n=xt.util.createBuffer();return n.putByte(e.level),n.putByte(e.description),z.createRecord(t,{type:z.ContentType.alert,data:n})};z.createClientHello=function(t){t.session.clientHelloVersion={major:t.version.major,minor:t.version.minor};for(var e=xt.util.createBuffer(),n=0;n<t.cipherSuites.length;++n){var r=t.cipherSuites[n];e.putByte(r.id[0]),e.putByte(r.id[1])}var i=e.length(),o=xt.util.createBuffer();o.putByte(z.CompressionMethod.none);var a=o.length(),l=xt.util.createBuffer();if(t.virtualHost){var c=xt.util.createBuffer();c.putByte(0),c.putByte(0);var u=xt.util.createBuffer();u.putByte(0),pp(u,2,xt.util.createBuffer(t.virtualHost));var d=xt.util.createBuffer();pp(d,2,u),pp(c,2,d),l.putBuffer(c)}var p=l.length();p>0&&(p+=2);var m=t.session.id,h=m.length+1+2+4+28+2+i+1+a+p,g=xt.util.createBuffer();return g.putByte(z.HandshakeType.client_hello),g.putInt24(h),g.putByte(t.version.major),g.putByte(t.version.minor),g.putBytes(t.session.sp.client_random),pp(g,1,xt.util.createBuffer(m)),pp(g,2,e),pp(g,1,o),p>0&&pp(g,2,l),g};z.createServerHello=function(t){var e=t.session.id,n=e.length+1+2+4+28+2+1,r=xt.util.createBuffer();return r.putByte(z.HandshakeType.server_hello),r.putInt24(n),r.putByte(t.version.major),r.putByte(t.version.minor),r.putBytes(t.session.sp.server_random),pp(r,1,xt.util.createBuffer(e)),r.putByte(t.session.cipherSuite.id[0]),r.putByte(t.session.cipherSuite.id[1]),r.putByte(t.session.compressionMethod),r};z.createCertificate=function(t){var e=t.entity===z.ConnectionEnd.client,n=null;if(t.getCertificate){var r;e?r=t.session.certificateRequest:r=t.session.extensions.server_name.serverNameList,n=t.getCertificate(t,r)}var i=xt.util.createBuffer();if(n!==null)try{xt.util.isArray(n)||(n=[n]);for(var o=null,a=0;a<n.length;++a){var l=xt.pem.decode(n[a])[0];if(l.type!=="CERTIFICATE"&&l.type!=="X509 CERTIFICATE"&&l.type!=="TRUSTED CERTIFICATE"){var c=new Error('Could not convert certificate from PEM; PEM header type is not "CERTIFICATE", "X509 CERTIFICATE", or "TRUSTED CERTIFICATE".');throw c.headerType=l.type,c}if(l.procType&&l.procType.type==="ENCRYPTED")throw new Error("Could not convert certificate from PEM; PEM is encrypted.");var u=xt.util.createBuffer(l.body);o===null&&(o=xt.asn1.fromDer(u.bytes(),!1));var d=xt.util.createBuffer();pp(d,3,u),i.putBuffer(d)}n=xt.pki.certificateFromAsn1(o),e?t.session.clientCertificate=n:t.session.serverCertificate=n}catch(h){return t.error(t,{message:"Could not send certificate list.",cause:h,send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.bad_certificate}})}var p=3+i.length(),m=xt.util.createBuffer();return m.putByte(z.HandshakeType.certificate),m.putInt24(p),pp(m,3,i),m};z.createClientKeyExchange=function(t){var e=xt.util.createBuffer();e.putByte(t.session.clientHelloVersion.major),e.putByte(t.session.clientHelloVersion.minor),e.putBytes(xt.random.getBytes(46));var n=t.session.sp;n.pre_master_secret=e.getBytes();var r=t.session.serverCertificate.publicKey;e=r.encrypt(n.pre_master_secret);var i=e.length+2,o=xt.util.createBuffer();return o.putByte(z.HandshakeType.client_key_exchange),o.putInt24(i),o.putInt16(e.length),o.putBytes(e),o};z.createServerKeyExchange=function(t){var e=0,n=xt.util.createBuffer();return e>0&&(n.putByte(z.HandshakeType.server_key_exchange),n.putInt24(e)),n};z.getClientSignature=function(t,e){var n=xt.util.createBuffer();n.putBuffer(t.session.md5.digest()),n.putBuffer(t.session.sha1.digest()),n=n.getBytes(),t.getSignature=t.getSignature||function(r,i,o){var a=null;if(r.getPrivateKey)try{a=r.getPrivateKey(r,r.session.clientCertificate),a=xt.pki.privateKeyFromPem(a)}catch(l){r.error(r,{message:"Could not get private key.",cause:l,send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}})}a===null?r.error(r,{message:"No private key set.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.internal_error}}):i=a.sign(i,null),o(r,i)},t.getSignature(t,n,e)};z.createCertificateVerify=function(t,e){var n=e.length+2,r=xt.util.createBuffer();return r.putByte(z.HandshakeType.certificate_verify),r.putInt24(n),r.putInt16(e.length),r.putBytes(e),r};z.createCertificateRequest=function(t){var e=xt.util.createBuffer();e.putByte(1);var n=xt.util.createBuffer();for(var r in t.caStore.certs){var i=t.caStore.certs[r],o=xt.pki.distinguishedNameToAsn1(i.subject),a=xt.asn1.toDer(o);n.putInt16(a.length()),n.putBuffer(a)}var l=1+e.length()+2+n.length(),c=xt.util.createBuffer();return c.putByte(z.HandshakeType.certificate_request),c.putInt24(l),pp(c,1,e),pp(c,2,n),c};z.createServerHelloDone=function(t){var e=xt.util.createBuffer();return e.putByte(z.HandshakeType.server_hello_done),e.putInt24(0),e};z.createChangeCipherSpec=function(){var t=xt.util.createBuffer();return t.putByte(1),t};z.createFinished=function(t){var e=xt.util.createBuffer();e.putBuffer(t.session.md5.digest()),e.putBuffer(t.session.sha1.digest());var n=t.entity===z.ConnectionEnd.client,r=t.session.sp,i=12,o=UH,a=n?"client finished":"server finished";e=o(r.master_secret,a,e.getBytes(),i);var l=xt.util.createBuffer();return l.putByte(z.HandshakeType.finished),l.putInt24(e.length()),l.putBuffer(e),l};z.createHeartbeat=function(t,e,n){typeof n>"u"&&(n=e.length);var r=xt.util.createBuffer();r.putByte(t),r.putInt16(n),r.putBytes(e);var i=r.length(),o=Math.max(16,i-n-3);return r.putBytes(xt.random.getBytes(o)),r};z.queue=function(t,e){if(e&&!(e.fragment.length()===0&&(e.type===z.ContentType.handshake||e.type===z.ContentType.alert||e.type===z.ContentType.change_cipher_spec))){if(e.type===z.ContentType.handshake){var n=e.fragment.bytes();t.session.md5.update(n),t.session.sha1.update(n),n=null}var r;if(e.fragment.length()<=z.MaxFragment)r=[e];else{r=[];for(var i=e.fragment.bytes();i.length>z.MaxFragment;)r.push(z.createRecord(t,{type:e.type,data:xt.util.createBuffer(i.slice(0,z.MaxFragment))})),i=i.slice(z.MaxFragment);i.length>0&&r.push(z.createRecord(t,{type:e.type,data:xt.util.createBuffer(i)}))}for(var o=0;o<r.length&&!t.fail;++o){var a=r[o],l=t.state.current.write;l.update(t,a)&&t.records.push(a)}}};z.flush=function(t){for(var e=0;e<t.records.length;++e){var n=t.records[e];t.tlsData.putByte(n.type),t.tlsData.putByte(n.version.major),t.tlsData.putByte(n.version.minor),t.tlsData.putInt16(n.fragment.length()),t.tlsData.putBuffer(t.records[e].fragment)}return t.records=[],t.tlsDataReady(t)};var yce=s(function(t){switch(t){case!0:return!0;case xt.pki.certificateError.bad_certificate:return z.Alert.Description.bad_certificate;case xt.pki.certificateError.unsupported_certificate:return z.Alert.Description.unsupported_certificate;case xt.pki.certificateError.certificate_revoked:return z.Alert.Description.certificate_revoked;case xt.pki.certificateError.certificate_expired:return z.Alert.Description.certificate_expired;case xt.pki.certificateError.certificate_unknown:return z.Alert.Description.certificate_unknown;case xt.pki.certificateError.unknown_ca:return z.Alert.Description.unknown_ca;default:return z.Alert.Description.bad_certificate}},"_certErrorToAlertDesc"),$Rt=s(function(t){switch(t){case!0:return!0;case z.Alert.Description.bad_certificate:return xt.pki.certificateError.bad_certificate;case z.Alert.Description.unsupported_certificate:return xt.pki.certificateError.unsupported_certificate;case z.Alert.Description.certificate_revoked:return xt.pki.certificateError.certificate_revoked;case z.Alert.Description.certificate_expired:return xt.pki.certificateError.certificate_expired;case z.Alert.Description.certificate_unknown:return xt.pki.certificateError.certificate_unknown;case z.Alert.Description.unknown_ca:return xt.pki.certificateError.unknown_ca;default:return xt.pki.certificateError.bad_certificate}},"_alertDescToCertError");z.verifyCertificateChain=function(t,e){try{var n={};for(var r in t.verifyOptions)n[r]=t.verifyOptions[r];n.verify=function(o,a,l){var c=yce(o),u=t.verify(t,o,a,l);if(u!==!0){if(typeof u=="object"&&!xt.util.isArray(u)){var d=new Error("The application rejected the certificate.");throw d.send=!0,d.alert={level:z.Alert.Level.fatal,description:z.Alert.Description.bad_certificate},u.message&&(d.message=u.message),u.alert&&(d.alert.description=u.alert),d}u!==o&&(u=$Rt(u))}return u},xt.pki.verifyCertificateChain(t.caStore,e,n)}catch(o){var i=o;(typeof i!="object"||xt.util.isArray(i))&&(i={send:!0,alert:{level:z.Alert.Level.fatal,description:yce(o)}}),"send"in i||(i.send=!0),"alert"in i||(i.alert={level:z.Alert.Level.fatal,description:yce(i.error)}),t.error(t,i)}return!t.fail};z.createSessionCache=function(t,e){var n=null;if(t&&t.getSession&&t.setSession&&t.order)n=t;else{n={},n.cache=t||{},n.capacity=Math.max(e||100,1),n.order=[];for(var r in t)n.order.length<=e?n.order.push(r):delete t[r];n.getSession=function(i){var o=null,a=null;if(i?a=xt.util.bytesToHex(i):n.order.length>0&&(a=n.order[0]),a!==null&&a in n.cache){o=n.cache[a],delete n.cache[a];for(var l in n.order)if(n.order[l]===a){n.order.splice(l,1);break}}return o},n.setSession=function(i,o){if(n.order.length===n.capacity){var a=n.order.shift();delete n.cache[a]}var a=xt.util.bytesToHex(i);n.order.push(a),n.cache[a]=o}}return n};z.createConnection=function(t){var e=null;t.caStore?xt.util.isArray(t.caStore)?e=xt.pki.createCaStore(t.caStore):e=t.caStore:e=xt.pki.createCaStore();var n=t.cipherSuites||null;if(n===null){n=[];for(var r in z.CipherSuites)n.push(z.CipherSuites[r])}var i=t.server?z.ConnectionEnd.server:z.ConnectionEnd.client,o=t.sessionCache?z.createSessionCache(t.sessionCache):null,a={version:{major:z.Version.major,minor:z.Version.minor},entity:i,sessionId:t.sessionId,caStore:e,sessionCache:o,cipherSuites:n,connected:t.connected,virtualHost:t.virtualHost||null,verifyClient:t.verifyClient||!1,verify:t.verify||function(d,p,m,h){return p},verifyOptions:t.verifyOptions||{},getCertificate:t.getCertificate||null,getPrivateKey:t.getPrivateKey||null,getSignature:t.getSignature||null,input:xt.util.createBuffer(),tlsData:xt.util.createBuffer(),data:xt.util.createBuffer(),tlsDataReady:t.tlsDataReady,dataReady:t.dataReady,heartbeatReceived:t.heartbeatReceived,closed:t.closed,error:s(function(d,p){p.origin=p.origin||(d.entity===z.ConnectionEnd.client?"client":"server"),p.send&&(z.queue(d,z.createAlert(d,p.alert)),z.flush(d));var m=p.fatal!==!1;m&&(d.fail=!0),t.error(d,p),m&&d.close(!1)},"error"),deflate:t.deflate||null,inflate:t.inflate||null};a.reset=function(d){a.version={major:z.Version.major,minor:z.Version.minor},a.record=null,a.session=null,a.peerCertificate=null,a.state={pending:null,current:null},a.expect=a.entity===z.ConnectionEnd.client?BRt:QRt,a.fragmented=null,a.records=[],a.open=!1,a.handshakes=0,a.handshaking=!1,a.isConnected=!1,a.fail=!(d||typeof d>"u"),a.input.clear(),a.tlsData.clear(),a.data.clear(),a.state.current=z.createConnectionState(a)},a.reset();var l=s(function(d,p){var m=p.type-z.ContentType.change_cipher_spec,h=vce[d.entity][d.expect];m in h?h[m](d,p):z.handleUnexpected(d,p)},"_update"),c=s(function(d){var p=0,m=d.input,h=m.length();if(h<5)p=5-h;else{d.record={type:m.getByte(),version:{major:m.getByte(),minor:m.getByte()},length:m.getInt16(),fragment:xt.util.createBuffer(),ready:!1};var g=d.record.version.major===d.version.major;g&&d.session&&d.session.version&&(g=d.record.version.minor===d.version.minor),g||d.error(d,{message:"Incompatible TLS version.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.protocol_version}})}return p},"_readRecordHeader"),u=s(function(d){var p=0,m=d.input,h=m.length();if(h<d.record.length)p=d.record.length-h;else{d.record.fragment.putBytes(m.getBytes(d.record.length)),m.compact();var g=d.state.current.read;g.update(d,d.record)&&(d.fragmented!==null&&(d.fragmented.type===d.record.type?(d.fragmented.fragment.putBuffer(d.record.fragment),d.record=d.fragmented):d.error(d,{message:"Invalid fragmented record.",send:!0,alert:{level:z.Alert.Level.fatal,description:z.Alert.Description.unexpected_message}})),d.record.ready=!0)}return p},"_readRecord");return a.handshake=function(d){if(a.entity!==z.ConnectionEnd.client)a.error(a,{message:"Cannot initiate handshake as a server.",fatal:!1});else if(a.handshaking)a.error(a,{message:"Handshake already in progress.",fatal:!1});else{a.fail&&!a.open&&a.handshakes===0&&(a.fail=!1),a.handshaking=!0,d=d||"";var p=null;d.length>0&&(a.sessionCache&&(p=a.sessionCache.getSession(d)),p===null&&(d="")),d.length===0&&a.sessionCache&&(p=a.sessionCache.getSession(),p!==null&&(d=p.id)),a.session={id:d,version:null,cipherSuite:null,compressionMethod:null,serverCertificate:null,certificateRequest:null,clientCertificate:null,sp:{},md5:xt.md.md5.create(),sha1:xt.md.sha1.create()},p&&(a.version=p.version,a.session.sp=p.sp),a.session.sp.client_random=z.createRandom().getBytes(),a.open=!0,z.queue(a,z.createRecord(a,{type:z.ContentType.handshake,data:z.createClientHello(a)})),z.flush(a)}},a.process=function(d){var p=0;return d&&a.input.putBytes(d),a.fail||(a.record!==null&&a.record.ready&&a.record.fragment.isEmpty()&&(a.record=null),a.record===null&&(p=c(a)),!a.fail&&a.record!==null&&!a.record.ready&&(p=u(a)),!a.fail&&a.record!==null&&a.record.ready&&l(a,a.record)),p},a.prepare=function(d){return z.queue(a,z.createRecord(a,{type:z.ContentType.application_data,data:xt.util.createBuffer(d)})),z.flush(a)},a.prepareHeartbeatRequest=function(d,p){return d instanceof xt.util.ByteBuffer&&(d=d.bytes()),typeof p>"u"&&(p=d.length),a.expectedHeartbeatPayload=d,z.queue(a,z.createRecord(a,{type:z.ContentType.heartbeat,data:z.createHeartbeat(z.HeartbeatMessageType.heartbeat_request,d,p)})),z.flush(a)},a.close=function(d){if(!a.fail&&a.sessionCache&&a.session){var p={id:a.session.id,version:a.session.version,sp:a.session.sp};p.sp.keys=null,a.sessionCache.setSession(p.id,p)}a.open&&(a.open=!1,a.input.clear(),(a.isConnected||a.handshaking)&&(a.isConnected=a.handshaking=!1,z.queue(a,z.createAlert(a,{level:z.Alert.Level.warning,description:z.Alert.Description.close_notify})),z.flush(a)),a.closed(a)),a.reset(d)},a};fLe.exports=xt.tls=xt.tls||{};for(QH in z)typeof z[QH]!="function"&&(xt.tls[QH]=z[QH]);var QH;xt.tls.prf_tls1=UH;xt.tls.hmac_sha1=SRt;xt.tls.createSessionCache=z.createSessionCache;xt.tls.createConnection=z.createConnection});var hLe=H((bXn,mLe)=>{f();var zv=ui();qv();bce();var mp=mLe.exports=zv.tls;mp.CipherSuites.TLS_RSA_WITH_AES_128_CBC_SHA={id:[0,47],name:"TLS_RSA_WITH_AES_128_CBC_SHA",initSecurityParameters:s(function(t){t.bulk_cipher_algorithm=mp.BulkCipherAlgorithm.aes,t.cipher_type=mp.CipherType.block,t.enc_key_length=16,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=mp.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},"initSecurityParameters"),initConnectionState:pLe};mp.CipherSuites.TLS_RSA_WITH_AES_256_CBC_SHA={id:[0,53],name:"TLS_RSA_WITH_AES_256_CBC_SHA",initSecurityParameters:s(function(t){t.bulk_cipher_algorithm=mp.BulkCipherAlgorithm.aes,t.cipher_type=mp.CipherType.block,t.enc_key_length=32,t.block_length=16,t.fixed_iv_length=16,t.record_iv_length=16,t.mac_algorithm=mp.MACAlgorithm.hmac_sha1,t.mac_length=20,t.mac_key_length=20},"initSecurityParameters"),initConnectionState:pLe};function pLe(t,e,n){var r=e.entity===zv.tls.ConnectionEnd.client;t.read.cipherState={init:!1,cipher:zv.cipher.createDecipher("AES-CBC",r?n.keys.server_write_key:n.keys.client_write_key),iv:r?n.keys.server_write_IV:n.keys.client_write_IV},t.write.cipherState={init:!1,cipher:zv.cipher.createCipher("AES-CBC",r?n.keys.client_write_key:n.keys.server_write_key),iv:r?n.keys.client_write_IV:n.keys.server_write_IV},t.read.cipherFunction=JRt,t.write.cipherFunction=zRt,t.read.macLength=t.write.macLength=n.mac_length,t.read.macFunction=t.write.macFunction=mp.hmac_sha1}s(pLe,"initConnectionState");function zRt(t,e){var n=!1,r=e.macFunction(e.macKey,e.sequenceNumber,t);t.fragment.putBytes(r),e.updateSequenceNumber();var i;t.version.minor===mp.Versions.TLS_1_0.minor?i=e.cipherState.init?null:e.cipherState.iv:i=zv.random.getBytesSync(16),e.cipherState.init=!0;var o=e.cipherState.cipher;return o.start({iv:i}),t.version.minor>=mp.Versions.TLS_1_1.minor&&o.output.putBytes(i),o.update(t.fragment),o.finish(YRt)&&(t.fragment=o.output,t.length=t.fragment.length(),n=!0),n}s(zRt,"encrypt_aes_cbc_sha1");function YRt(t,e,n){if(!n){var r=t-e.length()%t;e.fillWithByte(r-1,r)}return!0}s(YRt,"encrypt_aes_cbc_sha1_padding");function KRt(t,e,n){var r=!0;if(n){for(var i=e.length(),o=e.last(),a=i-1-o;a<i-1;++a)r=r&&e.at(a)==o;r&&e.truncate(o+1)}return r}s(KRt,"decrypt_aes_cbc_sha1_padding");function JRt(t,e){var n=!1,r;t.version.minor===mp.Versions.TLS_1_0.minor?r=e.cipherState.init?null:e.cipherState.iv:r=t.fragment.getBytes(16),e.cipherState.init=!0;var i=e.cipherState.cipher;i.start({iv:r}),i.update(t.fragment),n=i.finish(KRt);var o=e.macLength,a=zv.random.getBytesSync(o),l=i.output.length();l>=o?(t.fragment=i.output.getBytes(l-o),a=i.output.getBytes(o)):t.fragment=i.output.getBytes(),t.fragment=zv.util.createBuffer(t.fragment),t.length=t.fragment.length();var c=e.macFunction(e.macKey,e.sequenceNumber,t);return e.updateSequenceNumber(),n=XRt(e.macKey,a,c)&&n,n}s(JRt,"decrypt_aes_cbc_sha1");function XRt(t,e,n){var r=zv.hmac.create();return r.start("SHA1",t),r.update(e),e=r.digest().getBytes(),r.start(null,null),r.update(n),n=r.digest().getBytes(),e===n}s(XRt,"compareMacs")});var Tce=H((TXn,CLe)=>{f();var bs=ui();Gg();uo();var FD=CLe.exports=bs.sha512=bs.sha512||{};bs.md.sha512=bs.md.algorithms.sha512=FD;var ALe=bs.sha384=bs.sha512.sha384=bs.sha512.sha384||{};ALe.create=function(){return FD.create("SHA-384")};bs.md.sha384=bs.md.algorithms.sha384=ALe;bs.sha512.sha256=bs.sha512.sha256||{create:s(function(){return FD.create("SHA-512/256")},"create")};bs.md["sha512/256"]=bs.md.algorithms["sha512/256"]=bs.sha512.sha256;bs.sha512.sha224=bs.sha512.sha224||{create:s(function(){return FD.create("SHA-512/224")},"create")};bs.md["sha512/224"]=bs.md.algorithms["sha512/224"]=bs.sha512.sha224;FD.create=function(t){if(yLe||ZRt(),typeof t>"u"&&(t="SHA-512"),!(t in z2))throw new Error("Invalid SHA-512 algorithm: "+t);for(var e=z2[t],n=null,r=bs.util.createBuffer(),i=new Array(80),o=0;o<80;++o)i[o]=new Array(2);var a=64;switch(t){case"SHA-384":a=48;break;case"SHA-512/256":a=32;break;case"SHA-512/224":a=28;break}var l={algorithm:t.replace("-","").toLowerCase(),blockLength:128,digestLength:a,messageLength:0,fullMessageLength:null,messageLengthSize:16};return l.start=function(){l.messageLength=0,l.fullMessageLength=l.messageLength128=[];for(var c=l.messageLengthSize/4,u=0;u<c;++u)l.fullMessageLength.push(0);r=bs.util.createBuffer(),n=new Array(e.length);for(var u=0;u<e.length;++u)n[u]=e[u].slice(0);return l},l.start(),l.update=function(c,u){u==="utf8"&&(c=bs.util.encodeUtf8(c));var d=c.length;l.messageLength+=d,d=[d/4294967296>>>0,d>>>0];for(var p=l.fullMessageLength.length-1;p>=0;--p)l.fullMessageLength[p]+=d[1],d[1]=d[0]+(l.fullMessageLength[p]/4294967296>>>0),l.fullMessageLength[p]=l.fullMessageLength[p]>>>0,d[0]=d[1]/4294967296>>>0;return r.putBytes(c),gLe(n,i,r),(r.read>2048||r.length()===0)&&r.compact(),l},l.digest=function(){var c=bs.util.createBuffer();c.putBytes(r.bytes());var u=l.fullMessageLength[l.fullMessageLength.length-1]+l.messageLengthSize,d=u&l.blockLength-1;c.putBytes(Ece.substr(0,l.blockLength-d));for(var p,m,h=l.fullMessageLength[0]*8,g=0;g<l.fullMessageLength.length-1;++g)p=l.fullMessageLength[g+1]*8,m=p/4294967296>>>0,h+=m,c.putInt32(h>>>0),h=p>>>0;c.putInt32(h);for(var y=new Array(n.length),g=0;g<n.length;++g)y[g]=n[g].slice(0);gLe(y,i,c);var v=bs.util.createBuffer(),b;t==="SHA-512"?b=y.length:t==="SHA-384"?b=y.length-2:b=y.length-4;for(var g=0;g<b;++g)v.putInt32(y[g][0]),(g!==b-1||t!=="SHA-512/224")&&v.putInt32(y[g][1]);return v},l};var Ece=null,yLe=!1,Ice=null,z2=null;function ZRt(){Ece="\x80",Ece+=bs.util.fillString("\0",128),Ice=[[1116352408,3609767458],[1899447441,602891725],[3049323471,3964484399],[3921009573,2173295548],[961987163,4081628472],[1508970993,3053834265],[2453635748,2937671579],[2870763221,3664609560],[3624381080,2734883394],[310598401,1164996542],[607225278,1323610764],[1426881987,3590304994],[1925078388,4068182383],[2162078206,991336113],[2614888103,633803317],[3248222580,3479774868],[3835390401,2666613458],[4022224774,944711139],[264347078,2341262773],[604807628,2007800933],[770255983,1495990901],[1249150122,1856431235],[1555081692,3175218132],[1996064986,2198950837],[2554220882,3999719339],[2821834349,766784016],[2952996808,2566594879],[3210313671,3203337956],[3336571891,1034457026],[3584528711,2466948901],[113926993,3758326383],[338241895,168717936],[666307205,1188179964],[773529912,1546045734],[1294757372,1522805485],[1396182291,2643833823],[1695183700,2343527390],[1986661051,1014477480],[2177026350,1206759142],[2456956037,344077627],[2730485921,1290863460],[2820302411,3158454273],[3259730800,3505952657],[3345764771,106217008],[3516065817,3606008344],[3600352804,1432725776],[4094571909,1467031594],[275423344,851169720],[430227734,3100823752],[506948616,1363258195],[659060556,3750685593],[883997877,3785050280],[958139571,3318307427],[1322822218,3812723403],[1537002063,2003034995],[1747873779,3602036899],[1955562222,1575990012],[2024104815,1125592928],[2227730452,2716904306],[2361852424,442776044],[2428436474,593698344],[2756734187,3733110249],[3204031479,2999351573],[3329325298,3815920427],[3391569614,3928383900],[3515267271,566280711],[3940187606,3454069534],[4118630271,4000239992],[116418474,1914138554],[174292421,2731055270],[289380356,3203993006],[460393269,320620315],[685471733,587496836],[852142971,1086792851],[1017036298,365543100],[1126000580,2618297676],[1288033470,3409855158],[1501505948,4234509866],[1607167915,987167468],[1816402316,1246189591]],z2={},z2["SHA-512"]=[[1779033703,4089235720],[3144134277,2227873595],[1013904242,4271175723],[2773480762,1595750129],[1359893119,2917565137],[2600822924,725511199],[528734635,4215389547],[1541459225,327033209]],z2["SHA-384"]=[[3418070365,3238371032],[1654270250,914150663],[2438529370,812702999],[355462360,4144912697],[1731405415,4290775857],[2394180231,1750603025],[3675008525,1694076839],[1203062813,3204075428]],z2["SHA-512/256"]=[[573645204,4230739756],[2673172387,3360449730],[596883563,1867755857],[2520282905,1497426621],[2519219938,2827943907],[3193839141,1401305490],[721525244,746961066],[246885852,2177182882]],z2["SHA-512/224"]=[[2352822216,424955298],[1944164710,2312950998],[502970286,855612546],[1738396948,1479516111],[258812777,2077511080],[2011393907,79989058],[1067287976,1780299464],[286451373,2446758561]],yLe=!0}s(ZRt,"_init");function gLe(t,e,n){for(var r,i,o,a,l,c,u,d,p,m,h,g,y,v,b,E,_,k,P,N,U,ne,he,ae,G,W,ue,ie,V,O,Y,te,pe,ee,ce,me=n.length();me>=128;){for(V=0;V<16;++V)e[V][0]=n.getInt32()>>>0,e[V][1]=n.getInt32()>>>0;for(;V<80;++V)te=e[V-2],O=te[0],Y=te[1],r=((O>>>19|Y<<13)^(Y>>>29|O<<3)^O>>>6)>>>0,i=((O<<13|Y>>>19)^(Y<<3|O>>>29)^(O<<26|Y>>>6))>>>0,ee=e[V-15],O=ee[0],Y=ee[1],o=((O>>>1|Y<<31)^(O>>>8|Y<<24)^O>>>7)>>>0,a=((O<<31|Y>>>1)^(O<<24|Y>>>8)^(O<<25|Y>>>7))>>>0,pe=e[V-7],ce=e[V-16],Y=i+pe[1]+a+ce[1],e[V][0]=r+pe[0]+o+ce[0]+(Y/4294967296>>>0)>>>0,e[V][1]=Y>>>0;for(y=t[0][0],v=t[0][1],b=t[1][0],E=t[1][1],_=t[2][0],k=t[2][1],P=t[3][0],N=t[3][1],U=t[4][0],ne=t[4][1],he=t[5][0],ae=t[5][1],G=t[6][0],W=t[6][1],ue=t[7][0],ie=t[7][1],V=0;V<80;++V)u=((U>>>14|ne<<18)^(U>>>18|ne<<14)^(ne>>>9|U<<23))>>>0,d=((U<<18|ne>>>14)^(U<<14|ne>>>18)^(ne<<23|U>>>9))>>>0,p=(G^U&(he^G))>>>0,m=(W^ne&(ae^W))>>>0,l=((y>>>28|v<<4)^(v>>>2|y<<30)^(v>>>7|y<<25))>>>0,c=((y<<4|v>>>28)^(v<<30|y>>>2)^(v<<25|y>>>7))>>>0,h=(y&b|_&(y^b))>>>0,g=(v&E|k&(v^E))>>>0,Y=ie+d+m+Ice[V][1]+e[V][1],r=ue+u+p+Ice[V][0]+e[V][0]+(Y/4294967296>>>0)>>>0,i=Y>>>0,Y=c+g,o=l+h+(Y/4294967296>>>0)>>>0,a=Y>>>0,ue=G,ie=W,G=he,W=ae,he=U,ae=ne,Y=N+i,U=P+r+(Y/4294967296>>>0)>>>0,ne=Y>>>0,P=_,N=k,_=b,k=E,b=y,E=v,Y=i+a,y=r+o+(Y/4294967296>>>0)>>>0,v=Y>>>0;Y=t[0][1]+v,t[0][0]=t[0][0]+y+(Y/4294967296>>>0)>>>0,t[0][1]=Y>>>0,Y=t[1][1]+E,t[1][0]=t[1][0]+b+(Y/4294967296>>>0)>>>0,t[1][1]=Y>>>0,Y=t[2][1]+k,t[2][0]=t[2][0]+_+(Y/4294967296>>>0)>>>0,t[2][1]=Y>>>0,Y=t[3][1]+N,t[3][0]=t[3][0]+P+(Y/4294967296>>>0)>>>0,t[3][1]=Y>>>0,Y=t[4][1]+ne,t[4][0]=t[4][0]+U+(Y/4294967296>>>0)>>>0,t[4][1]=Y>>>0,Y=t[5][1]+ae,t[5][0]=t[5][0]+he+(Y/4294967296>>>0)>>>0,t[5][1]=Y>>>0,Y=t[6][1]+W,t[6][0]=t[6][0]+G+(Y/4294967296>>>0)>>>0,t[6][1]=Y>>>0,Y=t[7][1]+ie,t[7][0]=t[7][0]+ue+(Y/4294967296>>>0)>>>0,t[7][1]=Y>>>0,me-=128}}s(gLe,"_update")});var xLe=H(wce=>{f();var e3t=ui();zm();var $l=e3t.asn1;wce.privateKeyValidator={name:"PrivateKeyInfo",tagClass:$l.Class.UNIVERSAL,type:$l.Type.SEQUENCE,constructed:!0,value:[{name:"PrivateKeyInfo.version",tagClass:$l.Class.UNIVERSAL,type:$l.Type.INTEGER,constructed:!1,capture:"privateKeyVersion"},{name:"PrivateKeyInfo.privateKeyAlgorithm",tagClass:$l.Class.UNIVERSAL,type:$l.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:$l.Class.UNIVERSAL,type:$l.Type.OID,constructed:!1,capture:"privateKeyOid"}]},{name:"PrivateKeyInfo",tagClass:$l.Class.UNIVERSAL,type:$l.Type.OCTETSTRING,constructed:!1,capture:"privateKey"}]};wce.publicKeyValidator={name:"SubjectPublicKeyInfo",tagClass:$l.Class.UNIVERSAL,type:$l.Type.SEQUENCE,constructed:!0,captureAsn1:"subjectPublicKeyInfo",value:[{name:"SubjectPublicKeyInfo.AlgorithmIdentifier",tagClass:$l.Class.UNIVERSAL,type:$l.Type.SEQUENCE,constructed:!0,value:[{name:"AlgorithmIdentifier.algorithm",tagClass:$l.Class.UNIVERSAL,type:$l.Type.OID,constructed:!1,capture:"publicKeyOid"}]},{tagClass:$l.Class.UNIVERSAL,type:$l.Type.BITSTRING,constructed:!1,composed:!0,captureBitStringValue:"ed25519PublicKey"}]}});var DLe=H((kXn,PLe)=>{f();var vc=ui();PD();cp();Tce();uo();var wLe=xLe(),t3t=wLe.publicKeyValidator,n3t=wLe.privateKeyValidator;typeof vLe>"u"&&(vLe=vc.jsbn.BigInteger);var vLe,Rce=vc.util.ByteBuffer,Bd=typeof Buffer>"u"?Uint8Array:Buffer;vc.pki=vc.pki||{};PLe.exports=vc.pki.ed25519=vc.ed25519=vc.ed25519||{};var Si=vc.ed25519;Si.constants={};Si.constants.PUBLIC_KEY_BYTE_LENGTH=32;Si.constants.PRIVATE_KEY_BYTE_LENGTH=64;Si.constants.SEED_BYTE_LENGTH=32;Si.constants.SIGN_BYTE_LENGTH=64;Si.constants.HASH_BYTE_LENGTH=64;Si.generateKeyPair=function(t){t=t||{};var e=t.seed;if(e===void 0)e=vc.random.getBytesSync(Si.constants.SEED_BYTE_LENGTH);else if(typeof e=="string"){if(e.length!==Si.constants.SEED_BYTE_LENGTH)throw new TypeError('"seed" must be '+Si.constants.SEED_BYTE_LENGTH+" bytes in length.")}else if(!(e instanceof Uint8Array))throw new TypeError('"seed" must be a node.js Buffer, Uint8Array, or a binary string.');e=uy({message:e,encoding:"binary"});for(var n=new Bd(Si.constants.PUBLIC_KEY_BYTE_LENGTH),r=new Bd(Si.constants.PRIVATE_KEY_BYTE_LENGTH),i=0;i<32;++i)r[i]=e[i];return s3t(n,r),{publicKey:n,privateKey:r}};Si.privateKeyFromAsn1=function(t){var e={},n=[],r=vc.asn1.validate(t,n3t,e,n);if(!r){var i=new Error("Invalid Key.");throw i.errors=n,i}var o=vc.asn1.derToOid(e.privateKeyOid),a=vc.oids.EdDSA25519;if(o!==a)throw new Error('Invalid OID "'+o+'"; OID must be "'+a+'".');var l=e.privateKey,c=uy({message:vc.asn1.fromDer(l).value,encoding:"binary"});return{privateKeyBytes:c}};Si.publicKeyFromAsn1=function(t){var e={},n=[],r=vc.asn1.validate(t,t3t,e,n);if(!r){var i=new Error("Invalid Key.");throw i.errors=n,i}var o=vc.asn1.derToOid(e.publicKeyOid),a=vc.oids.EdDSA25519;if(o!==a)throw new Error('Invalid OID "'+o+'"; OID must be "'+a+'".');var l=e.ed25519PublicKey;if(l.length!==Si.constants.PUBLIC_KEY_BYTE_LENGTH)throw new Error("Key length is invalid.");return uy({message:l,encoding:"binary"})};Si.publicKeyFromPrivateKey=function(t){t=t||{};var e=uy({message:t.privateKey,encoding:"binary"});if(e.length!==Si.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Si.constants.PRIVATE_KEY_BYTE_LENGTH);for(var n=new Bd(Si.constants.PUBLIC_KEY_BYTE_LENGTH),r=0;r<n.length;++r)n[r]=e[32+r];return n};Si.sign=function(t){t=t||{};var e=uy(t),n=uy({message:t.privateKey,encoding:"binary"});if(n.length===Si.constants.SEED_BYTE_LENGTH){var r=Si.generateKeyPair({seed:n});n=r.privateKey}else if(n.length!==Si.constants.PRIVATE_KEY_BYTE_LENGTH)throw new TypeError('"options.privateKey" must have a byte length of '+Si.constants.SEED_BYTE_LENGTH+" or "+Si.constants.PRIVATE_KEY_BYTE_LENGTH);var i=new Bd(Si.constants.SIGN_BYTE_LENGTH+e.length);a3t(i,e,e.length,n);for(var o=new Bd(Si.constants.SIGN_BYTE_LENGTH),a=0;a<o.length;++a)o[a]=i[a];return o};Si.verify=function(t){t=t||{};var e=uy(t);if(t.signature===void 0)throw new TypeError('"options.signature" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a binary string.');var n=uy({message:t.signature,encoding:"binary"});if(n.length!==Si.constants.SIGN_BYTE_LENGTH)throw new TypeError('"options.signature" must have a byte length of '+Si.constants.SIGN_BYTE_LENGTH);var r=uy({message:t.publicKey,encoding:"binary"});if(r.length!==Si.constants.PUBLIC_KEY_BYTE_LENGTH)throw new TypeError('"options.publicKey" must have a byte length of '+Si.constants.PUBLIC_KEY_BYTE_LENGTH);var i=new Bd(Si.constants.SIGN_BYTE_LENGTH+e.length),o=new Bd(Si.constants.SIGN_BYTE_LENGTH+e.length),a;for(a=0;a<Si.constants.SIGN_BYTE_LENGTH;++a)i[a]=n[a];for(a=0;a<e.length;++a)i[a+Si.constants.SIGN_BYTE_LENGTH]=e[a];return l3t(o,i,i.length,r)>=0};function uy(t){var e=t.message;if(e instanceof Uint8Array||e instanceof Bd)return e;var n=t.encoding;if(e===void 0)if(t.md)e=t.md.digest().getBytes(),n="binary";else throw new TypeError('"options.message" or "options.md" not specified.');if(typeof e=="string"&&!n)throw new TypeError('"options.encoding" must be "binary" or "utf8".');if(typeof e=="string"){if(typeof Buffer<"u")return Buffer.from(e,n);e=new Rce(e,n)}else if(!(e instanceof Rce))throw new TypeError('"options.message" must be a node.js Buffer, a Uint8Array, a forge ByteBuffer, or a string with "options.encoding" specifying its encoding.');for(var r=new Bd(e.length()),i=0;i<r.length;++i)r[i]=e.at(i);return r}s(uy,"messageToNativeBuffer");var kce=xr(),qH=xr([1]),r3t=xr([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),i3t=xr([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),bLe=xr([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),ELe=xr([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),_ce=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),o3t=xr([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function MD(t,e){var n=vc.md.sha512.create(),r=new Rce(t);n.update(r.getBytes(e),"binary");var i=n.digest().getBytes();if(typeof Buffer<"u")return Buffer.from(i,"binary");for(var o=new Bd(Si.constants.HASH_BYTE_LENGTH),a=0;a<64;++a)o[a]=i.charCodeAt(a);return o}s(MD,"sha512");function s3t(t,e){var n=[xr(),xr(),xr(),xr()],r,i=MD(e,32);for(i[0]&=248,i[31]&=127,i[31]|=64,Nce(n,i),Dce(t,n),r=0;r<32;++r)e[r+32]=t[r];return 0}s(s3t,"crypto_sign_keypair");function a3t(t,e,n,r){var i,o,a=new Float64Array(64),l=[xr(),xr(),xr(),xr()],c=MD(r,32);c[0]&=248,c[31]&=127,c[31]|=64;var u=n+64;for(i=0;i<n;++i)t[64+i]=e[i];for(i=0;i<32;++i)t[32+i]=c[32+i];var d=MD(t.subarray(32),n+32);for(Bce(d),Nce(l,d),Dce(t,l),i=32;i<64;++i)t[i]=r[i];var p=MD(t,n+64);for(Bce(p),i=32;i<64;++i)a[i]=0;for(i=0;i<32;++i)a[i]=d[i];for(i=0;i<32;++i)for(o=0;o<32;o++)a[i+o]+=p[i]*c[o];return _Le(t.subarray(32),a),u}s(a3t,"crypto_sign");function l3t(t,e,n,r){var i,o,a=new Bd(32),l=[xr(),xr(),xr(),xr()],c=[xr(),xr(),xr(),xr()];if(o=-1,n<64||c3t(c,r))return-1;for(i=0;i<n;++i)t[i]=e[i];for(i=0;i<32;++i)t[i+32]=r[i];var u=MD(t,n);if(Bce(u),kLe(l,c,u),Nce(c,e.subarray(32)),Pce(l,c),Dce(a,l),n-=64,SLe(e,0,a,0)){for(i=0;i<n;++i)t[i]=0;return-1}for(i=0;i<n;++i)t[i]=e[i+64];return o=n,o}s(l3t,"crypto_sign_open");function _Le(t,e){var n,r,i,o;for(r=63;r>=32;--r){for(n=0,i=r-32,o=r-12;i<o;++i)e[i]+=n-16*e[r]*_ce[i-(r-32)],n=e[i]+128>>8,e[i]-=n*256;e[i]+=n,e[r]=0}for(n=0,i=0;i<32;++i)e[i]+=n-(e[31]>>4)*_ce[i],n=e[i]>>8,e[i]&=255;for(i=0;i<32;++i)e[i]-=n*_ce[i];for(r=0;r<32;++r)e[r+1]+=e[r]>>8,t[r]=e[r]&255}s(_Le,"modL");function Bce(t){for(var e=new Float64Array(64),n=0;n<64;++n)e[n]=t[n],t[n]=0;_Le(t,e)}s(Bce,"reduce");function Pce(t,e){var n=xr(),r=xr(),i=xr(),o=xr(),a=xr(),l=xr(),c=xr(),u=xr(),d=xr();$4(n,t[1],t[0]),$4(d,e[1],e[0]),Vo(n,n,d),V4(r,t[0],t[1]),V4(d,e[0],e[1]),Vo(r,r,d),Vo(i,t[3],e[3]),Vo(i,i,i3t),Vo(o,t[2],e[2]),V4(o,o,o),$4(a,r,n),$4(l,o,i),V4(c,o,i),V4(u,r,n),Vo(t[0],a,l),Vo(t[1],u,c),Vo(t[2],c,l),Vo(t[3],a,u)}s(Pce,"add");function ILe(t,e,n){for(var r=0;r<4;++r)BLe(t[r],e[r],n)}s(ILe,"cswap");function Dce(t,e){var n=xr(),r=xr(),i=xr();p3t(i,e[2]),Vo(n,e[0],i),Vo(r,e[1],i),WH(t,r),t[31]^=RLe(n)<<7}s(Dce,"pack");function WH(t,e){var n,r,i,o=xr(),a=xr();for(n=0;n<16;++n)a[n]=e[n];for(Sce(a),Sce(a),Sce(a),r=0;r<2;++r){for(o[0]=a[0]-65517,n=1;n<15;++n)o[n]=a[n]-65535-(o[n-1]>>16&1),o[n-1]&=65535;o[15]=a[15]-32767-(o[14]>>16&1),i=o[15]>>16&1,o[14]&=65535,BLe(a,o,1-i)}for(n=0;n<16;n++)t[2*n]=a[n]&255,t[2*n+1]=a[n]>>8}s(WH,"pack25519");function c3t(t,e){var n=xr(),r=xr(),i=xr(),o=xr(),a=xr(),l=xr(),c=xr();return Yv(t[2],qH),u3t(t[1],e),Y2(i,t[1]),Vo(o,i,r3t),$4(i,i,t[2]),V4(o,t[2],o),Y2(a,o),Y2(l,a),Vo(c,l,a),Vo(n,c,i),Vo(n,n,o),d3t(n,n),Vo(n,n,i),Vo(n,n,o),Vo(n,n,o),Vo(t[0],n,o),Y2(r,t[0]),Vo(r,r,o),TLe(r,i)&&Vo(t[0],t[0],o3t),Y2(r,t[0]),Vo(r,r,o),TLe(r,i)?-1:(RLe(t[0])===e[31]>>7&&$4(t[0],kce,t[0]),Vo(t[3],t[0],t[1]),0)}s(c3t,"unpackneg");function u3t(t,e){var n;for(n=0;n<16;++n)t[n]=e[2*n]+(e[2*n+1]<<8);t[15]&=32767}s(u3t,"unpack25519");function d3t(t,e){var n=xr(),r;for(r=0;r<16;++r)n[r]=e[r];for(r=250;r>=0;--r)Y2(n,n),r!==1&&Vo(n,n,e);for(r=0;r<16;++r)t[r]=n[r]}s(d3t,"pow2523");function TLe(t,e){var n=new Bd(32),r=new Bd(32);return WH(n,t),WH(r,e),SLe(n,0,r,0)}s(TLe,"neq25519");function SLe(t,e,n,r){return f3t(t,e,n,r,32)}s(SLe,"crypto_verify_32");function f3t(t,e,n,r,i){var o,a=0;for(o=0;o<i;++o)a|=t[e+o]^n[r+o];return(1&a-1>>>8)-1}s(f3t,"vn");function RLe(t){var e=new Bd(32);return WH(e,t),e[0]&1}s(RLe,"par25519");function kLe(t,e,n){var r,i;for(Yv(t[0],kce),Yv(t[1],qH),Yv(t[2],qH),Yv(t[3],kce),i=255;i>=0;--i)r=n[i/8|0]>>(i&7)&1,ILe(t,e,r),Pce(e,t),Pce(t,t),ILe(t,e,r)}s(kLe,"scalarmult");function Nce(t,e){var n=[xr(),xr(),xr(),xr()];Yv(n[0],bLe),Yv(n[1],ELe),Yv(n[2],qH),Vo(n[3],bLe,ELe),kLe(t,n,e)}s(Nce,"scalarbase");function Yv(t,e){var n;for(n=0;n<16;n++)t[n]=e[n]|0}s(Yv,"set25519");function p3t(t,e){var n=xr(),r;for(r=0;r<16;++r)n[r]=e[r];for(r=253;r>=0;--r)Y2(n,n),r!==2&&r!==4&&Vo(n,n,e);for(r=0;r<16;++r)t[r]=n[r]}s(p3t,"inv25519");function Sce(t){var e,n,r=1;for(e=0;e<16;++e)n=t[e]+r+65535,r=Math.floor(n/65536),t[e]=n-r*65536;t[0]+=r-1+37*(r-1)}s(Sce,"car25519");function BLe(t,e,n){for(var r,i=~(n-1),o=0;o<16;++o)r=i&(t[o]^e[o]),t[o]^=r,e[o]^=r}s(BLe,"sel25519");function xr(t){var e,n=new Float64Array(16);if(t)for(e=0;e<t.length;++e)n[e]=t[e];return n}s(xr,"gf");function V4(t,e,n){for(var r=0;r<16;++r)t[r]=e[r]+n[r]}s(V4,"A");function $4(t,e,n){for(var r=0;r<16;++r)t[r]=e[r]-n[r]}s($4,"Z");function Y2(t,e){Vo(t,e,e)}s(Y2,"S");function Vo(t,e,n){var r,i,o=0,a=0,l=0,c=0,u=0,d=0,p=0,m=0,h=0,g=0,y=0,v=0,b=0,E=0,_=0,k=0,P=0,N=0,U=0,ne=0,he=0,ae=0,G=0,W=0,ue=0,ie=0,V=0,O=0,Y=0,te=0,pe=0,ee=n[0],ce=n[1],me=n[2],Ne=n[3],Se=n[4],Je=n[5],Me=n[6],ft=n[7],It=n[8],yt=n[9],vt=n[10],le=n[11],Oe=n[12],ye=n[13],tt=n[14],X=n[15];r=e[0],o+=r*ee,a+=r*ce,l+=r*me,c+=r*Ne,u+=r*Se,d+=r*Je,p+=r*Me,m+=r*ft,h+=r*It,g+=r*yt,y+=r*vt,v+=r*le,b+=r*Oe,E+=r*ye,_+=r*tt,k+=r*X,r=e[1],a+=r*ee,l+=r*ce,c+=r*me,u+=r*Ne,d+=r*Se,p+=r*Je,m+=r*Me,h+=r*ft,g+=r*It,y+=r*yt,v+=r*vt,b+=r*le,E+=r*Oe,_+=r*ye,k+=r*tt,P+=r*X,r=e[2],l+=r*ee,c+=r*ce,u+=r*me,d+=r*Ne,p+=r*Se,m+=r*Je,h+=r*Me,g+=r*ft,y+=r*It,v+=r*yt,b+=r*vt,E+=r*le,_+=r*Oe,k+=r*ye,P+=r*tt,N+=r*X,r=e[3],c+=r*ee,u+=r*ce,d+=r*me,p+=r*Ne,m+=r*Se,h+=r*Je,g+=r*Me,y+=r*ft,v+=r*It,b+=r*yt,E+=r*vt,_+=r*le,k+=r*Oe,P+=r*ye,N+=r*tt,U+=r*X,r=e[4],u+=r*ee,d+=r*ce,p+=r*me,m+=r*Ne,h+=r*Se,g+=r*Je,y+=r*Me,v+=r*ft,b+=r*It,E+=r*yt,_+=r*vt,k+=r*le,P+=r*Oe,N+=r*ye,U+=r*tt,ne+=r*X,r=e[5],d+=r*ee,p+=r*ce,m+=r*me,h+=r*Ne,g+=r*Se,y+=r*Je,v+=r*Me,b+=r*ft,E+=r*It,_+=r*yt,k+=r*vt,P+=r*le,N+=r*Oe,U+=r*ye,ne+=r*tt,he+=r*X,r=e[6],p+=r*ee,m+=r*ce,h+=r*me,g+=r*Ne,y+=r*Se,v+=r*Je,b+=r*Me,E+=r*ft,_+=r*It,k+=r*yt,P+=r*vt,N+=r*le,U+=r*Oe,ne+=r*ye,he+=r*tt,ae+=r*X,r=e[7],m+=r*ee,h+=r*ce,g+=r*me,y+=r*Ne,v+=r*Se,b+=r*Je,E+=r*Me,_+=r*ft,k+=r*It,P+=r*yt,N+=r*vt,U+=r*le,ne+=r*Oe,he+=r*ye,ae+=r*tt,G+=r*X,r=e[8],h+=r*ee,g+=r*ce,y+=r*me,v+=r*Ne,b+=r*Se,E+=r*Je,_+=r*Me,k+=r*ft,P+=r*It,N+=r*yt,U+=r*vt,ne+=r*le,he+=r*Oe,ae+=r*ye,G+=r*tt,W+=r*X,r=e[9],g+=r*ee,y+=r*ce,v+=r*me,b+=r*Ne,E+=r*Se,_+=r*Je,k+=r*Me,P+=r*ft,N+=r*It,U+=r*yt,ne+=r*vt,he+=r*le,ae+=r*Oe,G+=r*ye,W+=r*tt,ue+=r*X,r=e[10],y+=r*ee,v+=r*ce,b+=r*me,E+=r*Ne,_+=r*Se,k+=r*Je,P+=r*Me,N+=r*ft,U+=r*It,ne+=r*yt,he+=r*vt,ae+=r*le,G+=r*Oe,W+=r*ye,ue+=r*tt,ie+=r*X,r=e[11],v+=r*ee,b+=r*ce,E+=r*me,_+=r*Ne,k+=r*Se,P+=r*Je,N+=r*Me,U+=r*ft,ne+=r*It,he+=r*yt,ae+=r*vt,G+=r*le,W+=r*Oe,ue+=r*ye,ie+=r*tt,V+=r*X,r=e[12],b+=r*ee,E+=r*ce,_+=r*me,k+=r*Ne,P+=r*Se,N+=r*Je,U+=r*Me,ne+=r*ft,he+=r*It,ae+=r*yt,G+=r*vt,W+=r*le,ue+=r*Oe,ie+=r*ye,V+=r*tt,O+=r*X,r=e[13],E+=r*ee,_+=r*ce,k+=r*me,P+=r*Ne,N+=r*Se,U+=r*Je,ne+=r*Me,he+=r*ft,ae+=r*It,G+=r*yt,W+=r*vt,ue+=r*le,ie+=r*Oe,V+=r*ye,O+=r*tt,Y+=r*X,r=e[14],_+=r*ee,k+=r*ce,P+=r*me,N+=r*Ne,U+=r*Se,ne+=r*Je,he+=r*Me,ae+=r*ft,G+=r*It,W+=r*yt,ue+=r*vt,ie+=r*le,V+=r*Oe,O+=r*ye,Y+=r*tt,te+=r*X,r=e[15],k+=r*ee,P+=r*ce,N+=r*me,U+=r*Ne,ne+=r*Se,he+=r*Je,ae+=r*Me,G+=r*ft,W+=r*It,ue+=r*yt,ie+=r*vt,V+=r*le,O+=r*Oe,Y+=r*ye,te+=r*tt,pe+=r*X,o+=38*P,a+=38*N,l+=38*U,c+=38*ne,u+=38*he,d+=38*ae,p+=38*G,m+=38*W,h+=38*ue,g+=38*ie,y+=38*V,v+=38*O,b+=38*Y,E+=38*te,_+=38*pe,i=1,r=o+i+65535,i=Math.floor(r/65536),o=r-i*65536,r=a+i+65535,i=Math.floor(r/65536),a=r-i*65536,r=l+i+65535,i=Math.floor(r/65536),l=r-i*65536,r=c+i+65535,i=Math.floor(r/65536),c=r-i*65536,r=u+i+65535,i=Math.floor(r/65536),u=r-i*65536,r=d+i+65535,i=Math.floor(r/65536),d=r-i*65536,r=p+i+65535,i=Math.floor(r/65536),p=r-i*65536,r=m+i+65535,i=Math.floor(r/65536),m=r-i*65536,r=h+i+65535,i=Math.floor(r/65536),h=r-i*65536,r=g+i+65535,i=Math.floor(r/65536),g=r-i*65536,r=y+i+65535,i=Math.floor(r/65536),y=r-i*65536,r=v+i+65535,i=Math.floor(r/65536),v=r-i*65536,r=b+i+65535,i=Math.floor(r/65536),b=r-i*65536,r=E+i+65535,i=Math.floor(r/65536),E=r-i*65536,r=_+i+65535,i=Math.floor(r/65536),_=r-i*65536,r=k+i+65535,i=Math.floor(r/65536),k=r-i*65536,o+=i-1+37*(i-1),i=1,r=o+i+65535,i=Math.floor(r/65536),o=r-i*65536,r=a+i+65535,i=Math.floor(r/65536),a=r-i*65536,r=l+i+65535,i=Math.floor(r/65536),l=r-i*65536,r=c+i+65535,i=Math.floor(r/65536),c=r-i*65536,r=u+i+65535,i=Math.floor(r/65536),u=r-i*65536,r=d+i+65535,i=Math.floor(r/65536),d=r-i*65536,r=p+i+65535,i=Math.floor(r/65536),p=r-i*65536,r=m+i+65535,i=Math.floor(r/65536),m=r-i*65536,r=h+i+65535,i=Math.floor(r/65536),h=r-i*65536,r=g+i+65535,i=Math.floor(r/65536),g=r-i*65536,r=y+i+65535,i=Math.floor(r/65536),y=r-i*65536,r=v+i+65535,i=Math.floor(r/65536),v=r-i*65536,r=b+i+65535,i=Math.floor(r/65536),b=r-i*65536,r=E+i+65535,i=Math.floor(r/65536),E=r-i*65536,r=_+i+65535,i=Math.floor(r/65536),_=r-i*65536,r=k+i+65535,i=Math.floor(r/65536),k=r-i*65536,o+=i-1+37*(i-1),t[0]=o,t[1]=a,t[2]=l,t[3]=c,t[4]=u,t[5]=d,t[6]=p,t[7]=m,t[8]=h,t[9]=g,t[10]=y,t[11]=v,t[12]=b,t[13]=E,t[14]=_,t[15]=k}s(Vo,"M")});var MLe=H((DXn,FLe)=>{f();var Q0=ui();uo();cp();PD();FLe.exports=Q0.kem=Q0.kem||{};var NLe=Q0.jsbn.BigInteger;Q0.kem.rsa={};Q0.kem.rsa.create=function(t,e){e=e||{};var n=e.prng||Q0.random,r={};return r.encrypt=function(i,o){var a=Math.ceil(i.n.bitLength()/8),l;do l=new NLe(Q0.util.bytesToHex(n.getBytesSync(a)),16).mod(i.n);while(l.compareTo(NLe.ONE)<=0);l=Q0.util.hexToBytes(l.toString(16));var c=a-l.length;c>0&&(l=Q0.util.fillString("\0",c)+l);var u=i.encrypt(l,"NONE"),d=t.generate(l,o);return{encapsulation:u,key:d}},r.decrypt=function(i,o,a){var l=i.decrypt(o,"NONE");return t.generate(l,a)},r};Q0.kem.kdf1=function(t,e){LLe(this,t,0,e||t.digestLength)};Q0.kem.kdf2=function(t,e){LLe(this,t,1,e||t.digestLength)};function LLe(t,e,n,r){t.generate=function(i,o){for(var a=new Q0.util.ByteBuffer,l=Math.ceil(o/r)+n,c=new Q0.util.ByteBuffer,u=n;u<l;++u){c.putInt32(u),e.start(),e.update(i+c.getBytes());var d=e.digest();a.putBytes(d.getBytes(r))}return a.truncate(a.length()-o),a.getBytes()}}s(LLe,"_createKDF")});var qLe=H((FXn,ULe)=>{f();var Oi=ui();uo();ULe.exports=Oi.log=Oi.log||{};Oi.log.levels=["none","error","warning","info","debug","verbose","max"];var HH={},Mce=[],OD=null;Oi.log.LEVEL_LOCKED=2;Oi.log.NO_LEVEL_CHECK=4;Oi.log.INTERPOLATE=8;for(Xg=0;Xg<Oi.log.levels.length;++Xg)Lce=Oi.log.levels[Xg],HH[Lce]={index:Xg,name:Lce.toUpperCase()};var Lce,Xg;Oi.log.logMessage=function(t){for(var e=HH[t.level].index,n=0;n<Mce.length;++n){var r=Mce[n];if(r.flags&Oi.log.NO_LEVEL_CHECK)r.f(t);else{var i=HH[r.level].index;e<=i&&r.f(r,t)}}};Oi.log.prepareStandard=function(t){"standard"in t||(t.standard=HH[t.level].name+" ["+t.category+"] "+t.message)};Oi.log.prepareFull=function(t){if(!("full"in t)){var e=[t.message];e=e.concat([]),t.full=Oi.util.format.apply(this,e)}};Oi.log.prepareStandardFull=function(t){"standardFull"in t||(Oi.log.prepareStandard(t),t.standardFull=t.standard)};for(Fce=["error","warning","info","debug","verbose"],Xg=0;Xg<Fce.length;++Xg)(function(e){Oi.log[e]=function(n,r){var i=Array.prototype.slice.call(arguments).slice(2),o={timestamp:new Date,level:e,category:n,message:r,arguments:i};Oi.log.logMessage(o)}})(Fce[Xg]);var Fce,Xg;Oi.log.makeLogger=function(t){var e={flags:0,f:t};return Oi.log.setLevel(e,"none"),e};Oi.log.setLevel=function(t,e){var n=!1;if(t&&!(t.flags&Oi.log.LEVEL_LOCKED))for(var r=0;r<Oi.log.levels.length;++r){var i=Oi.log.levels[r];if(e==i){t.level=e,n=!0;break}}return n};Oi.log.lock=function(t,e){typeof e>"u"||e?t.flags|=Oi.log.LEVEL_LOCKED:t.flags&=~Oi.log.LEVEL_LOCKED};Oi.log.addLogger=function(t){Mce.push(t)};typeof console<"u"&&"log"in console?(console.error&&console.warn&&console.info&&console.debug?(QLe={error:console.error,warning:console.warn,info:console.info,debug:console.debug,verbose:console.debug},UD=s(function(t,e){Oi.log.prepareStandard(e);var n=QLe[e.level],r=[e.standard];r=r.concat(e.arguments.slice()),n.apply(console,r)},"f"),z4=Oi.log.makeLogger(UD)):(UD=s(function(e,n){Oi.log.prepareStandardFull(n),console.log(n.standardFull)},"f"),z4=Oi.log.makeLogger(UD)),Oi.log.setLevel(z4,"debug"),Oi.log.addLogger(z4),OD=z4):console={log:s(function(){},"log")};var z4,QLe,UD;OD!==null&&typeof window<"u"&&window.location&&(QD=new URL(window.location.href).searchParams,QD.has("console.level")&&Oi.log.setLevel(OD,QD.get("console.level").slice(-1)[0]),QD.has("console.lock")&&(OLe=QD.get("console.lock").slice(-1)[0],OLe=="true"&&Oi.log.lock(OD)));var QD,OLe;Oi.log.consoleLogger=OD});var HLe=H((OXn,WLe)=>{f();WLe.exports=Gg();bH();q4();Kle();Tce()});var VLe=H((qXn,jLe)=>{f();var Kt=ui();qv();zm();kD();Wv();W2();uce();cp();uo();FH();var Re=Kt.asn1,Wu=jLe.exports=Kt.pkcs7=Kt.pkcs7||{};Wu.messageFromPem=function(t){var e=Kt.pem.decode(t)[0];if(e.type!=="PKCS7"){var n=new Error('Could not convert PKCS#7 message from PEM; PEM header type is not "PKCS#7".');throw n.headerType=e.type,n}if(e.procType&&e.procType.type==="ENCRYPTED")throw new Error("Could not convert PKCS#7 message from PEM; PEM is encrypted.");var r=Re.fromDer(e.body);return Wu.messageFromAsn1(r)};Wu.messageToPem=function(t,e){var n={type:"PKCS7",body:Re.toDer(t.toAsn1()).getBytes()};return Kt.pem.encode(n,{maxline:e})};Wu.messageFromAsn1=function(t){var e={},n=[];if(!Re.validate(t,Wu.asn1.contentInfoValidator,e,n)){var r=new Error("Cannot read PKCS#7 message. ASN.1 object is not an PKCS#7 ContentInfo.");throw r.errors=n,r}var i=Re.derToOid(e.contentType),o;switch(i){case Kt.pki.oids.envelopedData:o=Wu.createEnvelopedData();break;case Kt.pki.oids.encryptedData:o=Wu.createEncryptedData();break;case Kt.pki.oids.signedData:o=Wu.createSignedData();break;default:throw new Error("Cannot read PKCS#7 message. ContentType with OID "+i+" is not (yet) supported.")}return o.fromAsn1(e.content.value[0]),o};Wu.createSignedData=function(){var t=null;return t={type:Kt.pki.oids.signedData,version:1,certificates:[],crls:[],signers:[],digestAlgorithmIdentifiers:[],contentInfo:null,signerInfos:[],fromAsn1:s(function(r){if(Oce(t,r,Wu.asn1.signedDataValidator),t.certificates=[],t.crls=[],t.digestAlgorithmIdentifiers=[],t.contentInfo=null,t.signerInfos=[],t.rawCapture.certificates)for(var i=t.rawCapture.certificates.value,o=0;o<i.length;++o)t.certificates.push(Kt.pki.certificateFromAsn1(i[o]))},"fromAsn1"),toAsn1:s(function(){t.contentInfo||t.sign();for(var r=[],i=0;i<t.certificates.length;++i)r.push(Kt.pki.certificateToAsn1(t.certificates[i]));var o=[],a=Re.create(Re.Class.CONTEXT_SPECIFIC,0,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.INTEGER,!1,Re.integerToDer(t.version).getBytes()),Re.create(Re.Class.UNIVERSAL,Re.Type.SET,!0,t.digestAlgorithmIdentifiers),t.contentInfo])]);return r.length>0&&a.value[0].value.push(Re.create(Re.Class.CONTEXT_SPECIFIC,0,!0,r)),o.length>0&&a.value[0].value.push(Re.create(Re.Class.CONTEXT_SPECIFIC,1,!0,o)),a.value[0].value.push(Re.create(Re.Class.UNIVERSAL,Re.Type.SET,!0,t.signerInfos)),Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.OID,!1,Re.oidToDer(t.type).getBytes()),a])},"toAsn1"),addSigner:s(function(r){var i=r.issuer,o=r.serialNumber;if(r.certificate){var a=r.certificate;typeof a=="string"&&(a=Kt.pki.certificateFromPem(a)),i=a.issuer.attributes,o=a.serialNumber}var l=r.key;if(!l)throw new Error("Could not add PKCS#7 signer; no private key specified.");typeof l=="string"&&(l=Kt.pki.privateKeyFromPem(l));var c=r.digestAlgorithm||Kt.pki.oids.sha1;switch(c){case Kt.pki.oids.sha1:case Kt.pki.oids.sha256:case Kt.pki.oids.sha384:case Kt.pki.oids.sha512:case Kt.pki.oids.md5:break;default:throw new Error("Could not add PKCS#7 signer; unknown message digest algorithm: "+c)}var u=r.authenticatedAttributes||[];if(u.length>0){for(var d=!1,p=!1,m=0;m<u.length;++m){var h=u[m];if(!d&&h.type===Kt.pki.oids.contentType){if(d=!0,p)break;continue}if(!p&&h.type===Kt.pki.oids.messageDigest){if(p=!0,d)break;continue}}if(!d||!p)throw new Error("Invalid signer.authenticatedAttributes. If signer.authenticatedAttributes is specified, then it must contain at least two attributes, PKCS #9 content-type and PKCS #9 message-digest.")}t.signers.push({key:l,version:1,issuer:i,serialNumber:o,digestAlgorithm:c,signatureAlgorithm:Kt.pki.oids.rsaEncryption,signature:null,authenticatedAttributes:u,unauthenticatedAttributes:[]})},"addSigner"),sign:s(function(r){if(r=r||{},(typeof t.content!="object"||t.contentInfo===null)&&(t.contentInfo=Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.OID,!1,Re.oidToDer(Kt.pki.oids.data).getBytes())]),"content"in t)){var i;t.content instanceof Kt.util.ByteBuffer?i=t.content.bytes():typeof t.content=="string"&&(i=Kt.util.encodeUtf8(t.content)),r.detached?t.detachedContent=Re.create(Re.Class.UNIVERSAL,Re.Type.OCTETSTRING,!1,i):t.contentInfo.value.push(Re.create(Re.Class.CONTEXT_SPECIFIC,0,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.OCTETSTRING,!1,i)]))}if(t.signers.length!==0){var o=e();n(o)}},"sign"),verify:s(function(){throw new Error("PKCS#7 signature verification not yet implemented.")},"verify"),addCertificate:s(function(r){typeof r=="string"&&(r=Kt.pki.certificateFromPem(r)),t.certificates.push(r)},"addCertificate"),addCertificateRevokationList:s(function(r){throw new Error("PKCS#7 CRL support not yet implemented.")},"addCertificateRevokationList")},t;function e(){for(var r={},i=0;i<t.signers.length;++i){var o=t.signers[i],a=o.digestAlgorithm;a in r||(r[a]=Kt.md[Kt.pki.oids[a]].create()),o.authenticatedAttributes.length===0?o.md=r[a]:o.md=Kt.md[Kt.pki.oids[a]].create()}t.digestAlgorithmIdentifiers=[];for(var a in r)t.digestAlgorithmIdentifiers.push(Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.OID,!1,Re.oidToDer(a).getBytes()),Re.create(Re.Class.UNIVERSAL,Re.Type.NULL,!1,"")]));return r}s(e,"addDigestAlgorithmIds");function n(r){var i;if(t.detachedContent?i=t.detachedContent:(i=t.contentInfo.value[1],i=i.value[0]),!i)throw new Error("Could not sign PKCS#7 message; there is no content to sign.");var o=Re.derToOid(t.contentInfo.value[0].value),a=Re.toDer(i);a.getByte(),Re.getBerValueLength(a),a=a.getBytes();for(var l in r)r[l].start().update(a);for(var c=new Date,u=0;u<t.signers.length;++u){var d=t.signers[u];if(d.authenticatedAttributes.length===0){if(o!==Kt.pki.oids.data)throw new Error("Invalid signer; authenticatedAttributes must be present when the ContentInfo content type is not PKCS#7 Data.")}else{d.authenticatedAttributesAsn1=Re.create(Re.Class.CONTEXT_SPECIFIC,0,!0,[]);for(var p=Re.create(Re.Class.UNIVERSAL,Re.Type.SET,!0,[]),m=0;m<d.authenticatedAttributes.length;++m){var h=d.authenticatedAttributes[m];h.type===Kt.pki.oids.messageDigest?h.value=r[d.digestAlgorithm].digest():h.type===Kt.pki.oids.signingTime&&(h.value||(h.value=c)),p.value.push(Qce(h)),d.authenticatedAttributesAsn1.value.push(Qce(h))}a=Re.toDer(p).getBytes(),d.md.start().update(a)}d.signature=d.key.sign(d.md,"RSASSA-PKCS1-V1_5")}t.signerInfos=C3t(t.signers)}s(n,"addSignerInfos")};Wu.createEncryptedData=function(){var t=null;return t={type:Kt.pki.oids.encryptedData,version:0,encryptedContent:{algorithm:Kt.pki.oids["aes256-CBC"]},fromAsn1:s(function(e){Oce(t,e,Wu.asn1.encryptedDataValidator)},"fromAsn1"),decrypt:s(function(e){e!==void 0&&(t.encryptedContent.key=e),GLe(t)},"decrypt")},t};Wu.createEnvelopedData=function(){var t=null;return t={type:Kt.pki.oids.envelopedData,version:0,recipients:[],encryptedContent:{algorithm:Kt.pki.oids["aes256-CBC"]},fromAsn1:s(function(e){var n=Oce(t,e,Wu.asn1.envelopedDataValidator);t.recipients=g3t(n.recipientInfos.value)},"fromAsn1"),toAsn1:s(function(){return Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.OID,!1,Re.oidToDer(t.type).getBytes()),Re.create(Re.Class.CONTEXT_SPECIFIC,0,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.INTEGER,!1,Re.integerToDer(t.version).getBytes()),Re.create(Re.Class.UNIVERSAL,Re.Type.SET,!0,A3t(t.recipients)),Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,x3t(t.encryptedContent))])])])},"toAsn1"),findRecipient:s(function(e){for(var n=e.issuer.attributes,r=0;r<t.recipients.length;++r){var i=t.recipients[r],o=i.issuer;if(i.serialNumber===e.serialNumber&&o.length===n.length){for(var a=!0,l=0;l<n.length;++l)if(o[l].type!==n[l].type||o[l].value!==n[l].value){a=!1;break}if(a)return i}}return null},"findRecipient"),decrypt:s(function(e,n){if(t.encryptedContent.key===void 0&&e!==void 0&&n!==void 0)switch(e.encryptedContent.algorithm){case Kt.pki.oids.rsaEncryption:case Kt.pki.oids.desCBC:var r=n.decrypt(e.encryptedContent.content);t.encryptedContent.key=Kt.util.createBuffer(r);break;default:throw new Error("Unsupported asymmetric cipher, OID "+e.encryptedContent.algorithm)}GLe(t)},"decrypt"),addRecipient:s(function(e){t.recipients.push({version:0,issuer:e.issuer.attributes,serialNumber:e.serialNumber,encryptedContent:{algorithm:Kt.pki.oids.rsaEncryption,key:e.publicKey}})},"addRecipient"),encrypt:s(function(e,n){if(t.encryptedContent.content===void 0){n=n||t.encryptedContent.algorithm,e=e||t.encryptedContent.key;var r,i,o;switch(n){case Kt.pki.oids["aes128-CBC"]:r=16,i=16,o=Kt.aes.createEncryptionCipher;break;case Kt.pki.oids["aes192-CBC"]:r=24,i=16,o=Kt.aes.createEncryptionCipher;break;case Kt.pki.oids["aes256-CBC"]:r=32,i=16,o=Kt.aes.createEncryptionCipher;break;case Kt.pki.oids["des-EDE3-CBC"]:r=24,i=8,o=Kt.des.createEncryptionCipher;break;default:throw new Error("Unsupported symmetric cipher, OID "+n)}if(e===void 0)e=Kt.util.createBuffer(Kt.random.getBytes(r));else if(e.length()!=r)throw new Error("Symmetric key has wrong length; got "+e.length()+" bytes, expected "+r+".");t.encryptedContent.algorithm=n,t.encryptedContent.key=e,t.encryptedContent.parameter=Kt.util.createBuffer(Kt.random.getBytes(i));var a=o(e);if(a.start(t.encryptedContent.parameter.copy()),a.update(t.content),!a.finish())throw new Error("Symmetric encryption failed.");t.encryptedContent.content=a.output}for(var l=0;l<t.recipients.length;++l){var c=t.recipients[l];if(c.encryptedContent.content===void 0)switch(c.encryptedContent.algorithm){case Kt.pki.oids.rsaEncryption:c.encryptedContent.content=c.encryptedContent.key.encrypt(t.encryptedContent.key.data);break;default:throw new Error("Unsupported asymmetric cipher, OID "+c.encryptedContent.algorithm)}}},"encrypt")},t};function m3t(t){var e={},n=[];if(!Re.validate(t,Wu.asn1.recipientInfoValidator,e,n)){var r=new Error("Cannot read PKCS#7 RecipientInfo. ASN.1 object is not an PKCS#7 RecipientInfo.");throw r.errors=n,r}return{version:e.version.charCodeAt(0),issuer:Kt.pki.RDNAttributesAsArray(e.issuer),serialNumber:Kt.util.createBuffer(e.serial).toHex(),encryptedContent:{algorithm:Re.derToOid(e.encAlgorithm),parameter:e.encParameter?e.encParameter.value:void 0,content:e.encKey}}}s(m3t,"_recipientFromAsn1");function h3t(t){return Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.INTEGER,!1,Re.integerToDer(t.version).getBytes()),Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Kt.pki.distinguishedNameToAsn1({attributes:t.issuer}),Re.create(Re.Class.UNIVERSAL,Re.Type.INTEGER,!1,Kt.util.hexToBytes(t.serialNumber))]),Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.OID,!1,Re.oidToDer(t.encryptedContent.algorithm).getBytes()),Re.create(Re.Class.UNIVERSAL,Re.Type.NULL,!1,"")]),Re.create(Re.Class.UNIVERSAL,Re.Type.OCTETSTRING,!1,t.encryptedContent.content)])}s(h3t,"_recipientToAsn1");function g3t(t){for(var e=[],n=0;n<t.length;++n)e.push(m3t(t[n]));return e}s(g3t,"_recipientsFromAsn1");function A3t(t){for(var e=[],n=0;n<t.length;++n)e.push(h3t(t[n]));return e}s(A3t,"_recipientsToAsn1");function y3t(t){var e=Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.INTEGER,!1,Re.integerToDer(t.version).getBytes()),Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Kt.pki.distinguishedNameToAsn1({attributes:t.issuer}),Re.create(Re.Class.UNIVERSAL,Re.Type.INTEGER,!1,Kt.util.hexToBytes(t.serialNumber))]),Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.OID,!1,Re.oidToDer(t.digestAlgorithm).getBytes()),Re.create(Re.Class.UNIVERSAL,Re.Type.NULL,!1,"")])]);if(t.authenticatedAttributesAsn1&&e.value.push(t.authenticatedAttributesAsn1),e.value.push(Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.OID,!1,Re.oidToDer(t.signatureAlgorithm).getBytes()),Re.create(Re.Class.UNIVERSAL,Re.Type.NULL,!1,"")])),e.value.push(Re.create(Re.Class.UNIVERSAL,Re.Type.OCTETSTRING,!1,t.signature)),t.unauthenticatedAttributes.length>0){for(var n=Re.create(Re.Class.CONTEXT_SPECIFIC,1,!0,[]),r=0;r<t.unauthenticatedAttributes.length;++r){var i=t.unauthenticatedAttributes[r];n.values.push(Qce(i))}e.value.push(n)}return e}s(y3t,"_signerToAsn1");function C3t(t){for(var e=[],n=0;n<t.length;++n)e.push(y3t(t[n]));return e}s(C3t,"_signersToAsn1");function Qce(t){var e;if(t.type===Kt.pki.oids.contentType)e=Re.create(Re.Class.UNIVERSAL,Re.Type.OID,!1,Re.oidToDer(t.value).getBytes());else if(t.type===Kt.pki.oids.messageDigest)e=Re.create(Re.Class.UNIVERSAL,Re.Type.OCTETSTRING,!1,t.value.bytes());else if(t.type===Kt.pki.oids.signingTime){var n=new Date("1950-01-01T00:00:00Z"),r=new Date("2050-01-01T00:00:00Z"),i=t.value;if(typeof i=="string"){var o=Date.parse(i);isNaN(o)?i.length===13?i=Re.utcTimeToDate(i):i=Re.generalizedTimeToDate(i):i=new Date(o)}i>=n&&i<r?e=Re.create(Re.Class.UNIVERSAL,Re.Type.UTCTIME,!1,Re.dateToUtcTime(i)):e=Re.create(Re.Class.UNIVERSAL,Re.Type.GENERALIZEDTIME,!1,Re.dateToGeneralizedTime(i))}return Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.OID,!1,Re.oidToDer(t.type).getBytes()),Re.create(Re.Class.UNIVERSAL,Re.Type.SET,!0,[e])])}s(Qce,"_attributeToAsn1");function x3t(t){return[Re.create(Re.Class.UNIVERSAL,Re.Type.OID,!1,Re.oidToDer(Kt.pki.oids.data).getBytes()),Re.create(Re.Class.UNIVERSAL,Re.Type.SEQUENCE,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.OID,!1,Re.oidToDer(t.algorithm).getBytes()),t.parameter?Re.create(Re.Class.UNIVERSAL,Re.Type.OCTETSTRING,!1,t.parameter.getBytes()):void 0]),Re.create(Re.Class.CONTEXT_SPECIFIC,0,!0,[Re.create(Re.Class.UNIVERSAL,Re.Type.OCTETSTRING,!1,t.content.getBytes())])]}s(x3t,"_encryptedContentToAsn1");function Oce(t,e,n){var r={},i=[];if(!Re.validate(e,n,r,i)){var o=new Error("Cannot read PKCS#7 message. ASN.1 object is not a supported PKCS#7 message.");throw o.errors=o,o}var a=Re.derToOid(r.contentType);if(a!==Kt.pki.oids.data)throw new Error("Unsupported PKCS#7 message. Only wrapped ContentType Data supported.");if(r.encryptedContent){var l="";if(Kt.util.isArray(r.encryptedContent))for(var c=0;c<r.encryptedContent.length;++c){if(r.encryptedContent[c].type!==Re.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting encrypted content constructed of only OCTET STRING objects.");l+=r.encryptedContent[c].value}else l=r.encryptedContent;t.encryptedContent={algorithm:Re.derToOid(r.encAlgorithm),parameter:Kt.util.createBuffer(r.encParameter.value),content:Kt.util.createBuffer(l)}}if(r.content){var l="";if(Kt.util.isArray(r.content))for(var c=0;c<r.content.length;++c){if(r.content[c].type!==Re.Type.OCTETSTRING)throw new Error("Malformed PKCS#7 message, expecting content constructed of only OCTET STRING objects.");l+=r.content[c].value}else l=r.content;t.content=Kt.util.createBuffer(l)}return t.version=r.version.charCodeAt(0),t.rawCapture=r,r}s(Oce,"_fromAsn1");function GLe(t){if(t.encryptedContent.key===void 0)throw new Error("Symmetric key not available.");if(t.content===void 0){var e;switch(t.encryptedContent.algorithm){case Kt.pki.oids["aes128-CBC"]:case Kt.pki.oids["aes192-CBC"]:case Kt.pki.oids["aes256-CBC"]:e=Kt.aes.createDecryptionCipher(t.encryptedContent.key);break;case Kt.pki.oids.desCBC:case Kt.pki.oids["des-EDE3-CBC"]:e=Kt.des.createDecryptionCipher(t.encryptedContent.key);break;default:throw new Error("Unsupported symmetric cipher, OID "+t.encryptedContent.algorithm)}if(e.start(t.encryptedContent.parameter),e.update(t.encryptedContent.content),!e.finish())throw new Error("Symmetric decryption failed.");t.content=e.output}}s(GLe,"_decryptContent")});var zLe=H((GXn,$Le)=>{f();var nl=ui();qv();M4();bH();q4();uo();var jH=$Le.exports=nl.ssh=nl.ssh||{};jH.privateKeyToPutty=function(t,e,n){n=n||"",e=e||"";var r="ssh-rsa",i=e===""?"none":"aes256-cbc",o="PuTTY-User-Key-File-2: "+r+`\r
`;o+="Encryption: "+i+`\r
`,o+="Comment: "+n+`\r
`;var a=nl.util.createBuffer();Y4(a,r),Zg(a,t.e),Zg(a,t.n);var l=nl.util.encode64(a.bytes(),64),c=Math.floor(l.length/66)+1;o+="Public-Lines: "+c+`\r
`,o+=l;var u=nl.util.createBuffer();Zg(u,t.d),Zg(u,t.p),Zg(u,t.q),Zg(u,t.qInv);var d;if(!e)d=nl.util.encode64(u.bytes(),64);else{var p=u.length()+16-1;p-=p%16;var m=GH(u.bytes());m.truncate(m.length()-p+u.length()),u.putBuffer(m);var h=nl.util.createBuffer();h.putBuffer(GH("\0\0\0\0",e)),h.putBuffer(GH("\0\0\0",e));var g=nl.aes.createEncryptionCipher(h.truncate(8),"CBC");g.start(nl.util.createBuffer().fillWithByte(0,16)),g.update(u.copy()),g.finish();var y=g.output;y.truncate(16),d=nl.util.encode64(y.bytes(),64)}c=Math.floor(d.length/66)+1,o+=`\r
Private-Lines: `+c+`\r
`,o+=d;var v=GH("putty-private-key-file-mac-key",e),b=nl.util.createBuffer();Y4(b,r),Y4(b,i),Y4(b,n),b.putInt32(a.length()),b.putBuffer(a),b.putInt32(u.length()),b.putBuffer(u);var E=nl.hmac.create();return E.start("sha1",v),E.update(b.bytes()),o+=`\r
Private-MAC: `+E.digest().toHex()+`\r
`,o};jH.publicKeyToOpenSSH=function(t,e){var n="ssh-rsa";e=e||"";var r=nl.util.createBuffer();return Y4(r,n),Zg(r,t.e),Zg(r,t.n),n+" "+nl.util.encode64(r.bytes())+" "+e};jH.privateKeyToOpenSSH=function(t,e){return e?nl.pki.encryptRsaPrivateKey(t,e,{legacy:!0,algorithm:"aes128"}):nl.pki.privateKeyToPem(t)};jH.getPublicKeyFingerprint=function(t,e){e=e||{};var n=e.md||nl.md.md5.create(),r="ssh-rsa",i=nl.util.createBuffer();Y4(i,r),Zg(i,t.e),Zg(i,t.n),n.start(),n.update(i.getBytes());var o=n.digest();if(e.encoding==="hex"){var a=o.toHex();return e.delimiter?a.match(/.{2}/g).join(e.delimiter):a}else{if(e.encoding==="binary")return o.getBytes();if(e.encoding)throw new Error('Unknown encoding "'+e.encoding+'".')}return o};function Zg(t,e){var n=e.toString(16);n[0]>="8"&&(n="00"+n);var r=nl.util.hexToBytes(n);t.putInt32(r.length),t.putBytes(r)}s(Zg,"_addBigIntegerToBuffer");function Y4(t,e){t.putInt32(e.length),t.putString(e)}s(Y4,"_addStringToBuffer");function GH(){for(var t=nl.md.sha1.create(),e=arguments.length,n=0;n<e;++n)t.update(arguments[n]);return t.digest()}s(GH,"_sha1")});var KLe=H(($Xn,YLe)=>{f();YLe.exports=ui();qv();hLe();zm();hH();kD();DLe();M4();MLe();qLe();HLe();dce();wH();W2();oce();mce();VLe();gce();ace();Jle();DH();cp();ece();zLe();bce();uo()});var ZLe=H(K2=>{"use strict";f();Object.defineProperty(K2,"__esModule",{value:!0});K2.convert=K2.Format=void 0;var qD=KLe(),Kv;(function(t){t.der="der",t.pem="pem",t.txt="txt",t.asn1="asn1",t.x509="x509",t.fingerprint="fingerprint"})(Kv=K2.Format||(K2.Format={}));function JLe(t){var e=qD.pki.pemToDer(t),n=qD.asn1,r=n.fromDer(e.data.toString("binary")).value[0].value,i=r[0],o=i.tagClass===n.Class.CONTEXT_SPECIFIC&&i.type===0&&i.constructed,a=r.slice(o);return{serial:a[0],issuer:a[2],valid:a[3],subject:a[4]}}s(JLe,"myASN");function v3t(t){var e=JLe(t),n=e.subject.value.map(function(i){return i.value[0].value[1].value}).join("/"),r=e.valid.value.map(function(i){return i.value}).join(" - ");return["Subject	".concat(n),"Valid	".concat(r),String(t)].join(`
`)}s(v3t,"txtFormat");function XLe(t,e){switch(e){case Kv.der:return qD.pki.pemToDer(t);case Kv.pem:return t;case Kv.txt:return v3t(t);case Kv.asn1:return JLe(t);case Kv.fingerprint:var n=qD.md.sha1.create(),r=XLe(t,Kv.der);return n.update(r.getBytes()),n.digest().toHex();case Kv.x509:return qD.pki.certificateFromPem(t);default:throw new Error("unknown format ".concat(e))}}s(XLe,"convert");K2.convert=XLe});var oFe=H(Pd=>{"use strict";f();var Jv=Pd&&Pd.__assign||function(){return Jv=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Jv.apply(this,arguments)},VH=Pd&&Pd.__spreadArray||function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))};Object.defineProperty(Pd,"__esModule",{value:!0});Pd.convert=Pd.Format=Pd.addToGlobalAgent=Pd.get=void 0;var Uce=require("https"),b3t=require("tls"),eFe=require("child_process"),tFe=NNe(),dy=ZLe();Object.defineProperty(Pd,"Format",{enumerable:!0,get:s(function(){return dy.Format},"get")});Object.defineProperty(Pd,"convert",{enumerable:!0,get:s(function(){return dy.convert},"get")});var nFe=process.platform==="darwin",rFe=Uce.globalAgent,zH={keychain:"all",unique:!0,excludeBundled:!0,format:dy.Format.pem};function iFe(t){if(t===void 0&&(t=zH),!nFe)return[];t=Jv(Jv({},zH),t);var e=/(?=-----BEGIN\sCERTIFICATE-----)/g,n=["find-certificate","-a","-p"],r=[];if(t.keychain==="all"||t.keychain==="SystemRootCertificates"){var i="/System/Library/Keychains/SystemRootCertificates.keychain",o=(0,eFe.spawnSync)("/usr/bin/security",n.concat(i)).stdout.toString().split(e).map(function(u){return u.trim()});r=VH(VH([],r,!0),o,!0)}if(t.keychain==="all"||t.keychain==="current"){var a=(0,eFe.spawnSync)("/usr/bin/security",n).stdout.toString().split(e).map(function(u){return u.trim()});r=VH(VH([],r,!0),a,!0)}if(t.unique||t.excludeBundled){var l=r.map(function(u){return(0,dy.convert)(u,dy.Format.fingerprint)}),c=t.excludeBundled?b3t.rootCertificates.map(function(u){return(0,dy.convert)(u,dy.Format.fingerprint)}):[];r=r.filter(function(u,d){var p=l[d];return!(t.unique&&d!==l.indexOf(p)||t.excludeBundled&&c.includes(p))})}return r.map(function(u){return(0,dy.convert)(u,t.format)})}s(iFe,"get");Pd.get=iFe;var $H=rFe.options.ca,E3t=s(function(t){if(t===void 0&&(t=zH),!!nFe){var e;Array.isArray($H)?e=Array.from($H):e=typeof $H<"u"?[$H]:[],iFe(Jv(Jv(Jv({},zH),t),{format:dy.Format.pem,excludeBundled:!1})).forEach(function(n){return e.push(n)}),rFe.options.ca=e,Uce.Agent=function(n){return function(r){var i=typeof r<"u"?Jv({},r):{};return typeof i.ca>"u"&&(i.ca=e),n.call(this,i)}}(Uce.Agent),(0,tFe.setGlobalDispatcher)(new tFe.Agent({connect:{ca:e}}))}},"addToGlobalAgent");Pd.addToGlobalAgent=E3t});var sFe=H((tZn,qce)=>{f();function I3t(){let{X509Certificate:t}=require("crypto"),{join:e}=require("path");var n=typeof __webpack_require__=="function"?__non_webpack_require__:require;let r=n(e(__dirname,"crypt32.node")),i=[],o=new r.Crypt32;try{let a;for(;a=o.next();){let l=new t(a);i.push(l.toString())}}finally{o.done()}return Array.from(new Set(i))}s(I3t,"all");process.platform!=="win32"?qce.exports.all=()=>[]:qce.exports.all=I3t});var mFe=H((lZn,pFe)=>{"use strict";f();function fFe(t,e,n){let r=e[n];if(t==null&&r.required===!1)return;if(t==null)throw new TypeError(`Required parameter \`${r.name}\` missing`);let i=typeof t;if(r.type&&i!==r.type){if(r.required===!1&&e.slice(n).some(o=>o.type===i))return!1;throw new TypeError(`Invalid type for parameter \`${r.name}\`, expected \`${r.type}\` but found \`${typeof t}\``)}return!0}s(fFe,"validateParameter");function w3t(t,e){return Object.prototype.hasOwnProperty.call(t,e)}s(w3t,"hasOwnProperty");function _3t(t,e){return function(){let n=Array.prototype.slice.call(arguments),r=[];for(let o=0,a=0;o<e.length;++o,++a){let l=e[o],c=n[a];w3t(l,"default")&&c==null&&(c=l.default),l.type==="object"&&l.default!=null&&(c=Object.assign({},l.default,c)),l.name==="options"&&(typeof c=="function"||c==null)&&(c={}),fFe(c,e,o)?r.push(c):a--}if(typeof arguments[arguments.length-1]!="function")return new Promise((o,a)=>{r.push((l,c)=>{if(l)return a(l);o(c)}),t.apply(this,r)});t.apply(this,r)}}s(_3t,"defineOperation");pFe.exports={defineOperation:_3t,validateParameter:fFe}});var Kce=H((dZn,AFe)=>{"use strict";f();var X4=Cne()("kerberos"),J4=X4.KerberosClient,hFe=X4.KerberosServer,Xv=mFe().defineOperation,S3t=1,R3t=2,k3t=4,B3t=8,P3t=16,D3t=32,N3t=64,L3t=128,F3t=256,gFe=0,M3t=9,Q3t=6;J4.prototype.step=Xv(J4.prototype.step,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);J4.prototype.wrap=Xv(J4.prototype.wrap,[{name:"challenge",type:"string"},{name:"options",type:"object"},{name:"callback",type:"function",required:!1}]);J4.prototype.unwrap=Xv(J4.prototype.unwrap,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);hFe.prototype.step=Xv(hFe.prototype.step,[{name:"challenge",type:"string"},{name:"callback",type:"function",required:!1}]);var O3t=Xv(X4.checkPassword,[{name:"username",type:"string"},{name:"password",type:"string"},{name:"service",type:"string"},{name:"defaultRealm",type:"string",required:!1},{name:"callback",type:"function",required:!1}]),U3t=Xv(X4.principalDetails,[{name:"service",type:"string"},{name:"hostname",type:"string"},{name:"callback",type:"function",required:!1}]),q3t=Xv(X4.initializeClient,[{name:"service",type:"string"},{name:"options",type:"object",default:{mechOID:gFe}},{name:"callback",type:"function",required:!1}]),W3t=Xv(X4.initializeServer,[{name:"service",type:"string"},{name:"callback",type:"function",required:!1}]);AFe.exports={initializeClient:q3t,initializeServer:W3t,principalDetails:U3t,checkPassword:O3t,GSS_C_DELEG_FLAG:S3t,GSS_C_MUTUAL_FLAG:R3t,GSS_C_REPLAY_FLAG:k3t,GSS_C_SEQUENCE_FLAG:B3t,GSS_C_CONF_FLAG:P3t,GSS_C_INTEG_FLAG:D3t,GSS_C_ANON_FLAG:N3t,GSS_C_PROT_READY_FLAG:L3t,GSS_C_TRANS_FLAG:F3t,GSS_C_NO_OID:gFe,GSS_MECH_OID_KRB5:M3t,GSS_MECH_OID_SPNEGO:Q3t}});var yFe=H((pZn,H3t)=>{H3t.exports={name:"kerberos",version:"2.2.0",description:"Kerberos library for Node.js",main:"lib/index.js",files:["lib","src","binding.gyp","HISTORY.md","README.md"],repository:{type:"git",url:"https://github.com/mongodb-js/kerberos.git"},keywords:["kerberos","security","authentication"],author:{name:"The MongoDB NodeJS Team",email:"dbx-node@mongodb.com"},bugs:{url:"https://jira.mongodb.org/projects/NODE/issues/"},dependencies:{bindings:"^1.5.0","node-addon-api":"^6.1.0","prebuild-install":"^7.1.2"},devDependencies:{"@types/node":"^22.2.0",chai:"^4.4.1","chai-string":"^1.5.0",chalk:"^4.1.2","clang-format":"^1.8.0","dmd-clear":"^0.1.2",eslint:"^9.9.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.2.1","jsdoc-to-markdown":"^8.0.3",mocha:"^10.7.3",mongodb:"^6.8.0","node-gyp":"^10.1.0",prebuild:"^13.0.0",prettier:"^3.3.3",request:"^2.88.2"},overrides:{prebuild:{"node-gyp":"$node-gyp"}},scripts:{install:"prebuild-install --runtime napi || node-gyp rebuild","format-cxx":"clang-format -i 'src/**/*'","format-js":"ESLINT_USE_FLAT_CONFIG=false eslint lib test --fix","check:lint":"ESLINT_USE_FLAT_CONFIG=false eslint lib test",precommit:"check-clang-format",docs:"jsdoc2md --template etc/README.hbs --plugin dmd-clear --files lib/kerberos.js > README.md",test:"mocha test",prebuild:"prebuild --runtime napi --strip --verbose --all"},engines:{node:">=12.9.0"},binary:{napi_versions:[4]},license:"Apache-2.0",readmeFilename:"README.md"}});var xFe=H((mZn,CFe)=>{"use strict";f();var G3t=require("dns"),j3t=Kce(),Jce=class{static{s(this,"MongoAuthProcess")}constructor(e,n,r,i){i=i||{},this.host=e,this.port=n,this.serviceName=r||i.gssapiServiceName||"mongodb",this.canonicalizeHostName=typeof i.gssapiCanonicalizeHostName=="boolean"?i.gssapiCanonicalizeHostName:!1,this._transition=V3t(this),this.retries=10}init(e,n,r){let i=this;this.username=e,this.password=n;function o(a,l,c){if(!a)return c();G3t.resolveCname(l,(u,d)=>{if(u)return c(u);Array.isArray(d)&&d.length>0&&(i.host=d[0]),c()})}s(o,"performGssapiCanonicalizeHostName"),o(this.canonicalizeHostName,this.host,a=>{if(a)return r(a);let l={};n!=null&&Object.assign(l,{user:e,password:n});let c=process.platform==="win32"?`${this.serviceName}/${this.host}`:`${this.serviceName}@${this.host}`;j3t.initializeClient(c,l,(u,d)=>{if(u)return r(u,null);i.client=d,r(null,d)})})}transition(e,n){if(this._transition==null)return n(new Error("Transition finished"));this._transition(e,n)}};function V3t(t){return(e,n)=>{t.client.step("",(r,i)=>{if(r)return n(r);t._transition=$3t(t),n(null,i)})}}s(V3t,"firstTransition");function $3t(t){return(e,n)=>{t.client.step(e,(r,i)=>{if(r&&t.retries===0)return n(r);if(r)return t.retries=t.retries-1,t.transition(e,n);t._transition=z3t(t),n(null,i||"")})}}s($3t,"secondTransition");function z3t(t){return(e,n)=>{t.client.unwrap(e,(r,i)=>{if(r)return n(r,!1);t.client.wrap(i,{user:t.username},(o,a)=>{if(o)return n(o,!1);t._transition=Y3t(t),n(null,a)})})}}s(z3t,"thirdTransition");function Y3t(t){return(e,n)=>{t._transition=null,n(null,!0)}}s(Y3t,"fourthTransition");CFe.exports={MongoAuthProcess:Jce}});var bFe=H((AZn,WD)=>{"use strict";f();var vFe=Kce();WD.exports=vFe;WD.exports.Kerberos=vFe;WD.exports.version=yFe().version;WD.exports.processes={MongoAuthProcess:xFe().MongoAuthProcess}});var YFe=H(pue=>{"use strict";f();Object.defineProperty(pue,"__esModule",{value:!0});pue.assertNever=Pkt;function Pkt(t,e=`unexpected value ${t}`){throw new Error(`Unreachable: ${e}`)}s(Pkt,"assertNever")});var XD=H(Ay=>{"use strict";f();Object.defineProperty(Ay,"__esModule",{value:!0});Ay.ChatCompletionContentPartOpaque=Ay.ChatCompletionContentPartKind=Ay.ChatRole=void 0;var Dkt=YFe(),hG;(function(t){t[t.System=0]="System",t[t.User=1]="User",t[t.Assistant=2]="Assistant",t[t.Tool=3]="Tool"})(hG||(Ay.ChatRole=hG={}));(function(t){function e(n){switch(n){case t.System:return"system";case t.User:return"user";case t.Assistant:return"assistant";case t.Tool:return"tool";default:(0,Dkt.assertNever)(n,`unknown chat role ${n}}`)}}s(e,"display"),t.display=e})(hG||(Ay.ChatRole=hG={}));var KFe;(function(t){t[t.Image=0]="Image",t[t.Text=1]="Text",t[t.Opaque=2]="Opaque",t[t.CacheBreakpoint=3]="CacheBreakpoint"})(KFe||(Ay.ChatCompletionContentPartKind=KFe={}));var JFe;(function(t){function e(n,r){return!n.scope||(n.scope&r)!==0}s(e,"usableIn"),t.usableIn=e})(JFe||(Ay.ChatCompletionContentPartOpaque=JFe={}))});var mue=H(aA=>{"use strict";f();Object.defineProperty(aA,"__esModule",{value:!0});aA.BaseTokensPerName=aA.BaseTokensPerMessage=aA.BaseTokensPerCompletion=aA.ChatRole=void 0;var XFe;(function(t){t.System="system",t.User="user",t.Assistant="assistant",t.Function="function",t.Tool="tool"})(XFe||(aA.ChatRole=XFe={}));aA.BaseTokensPerCompletion=3;aA.BaseTokensPerMessage=3;aA.BaseTokensPerName=1});var eMe=H(AG=>{"use strict";f();Object.defineProperty(AG,"__esModule",{value:!0});AG.toOpenAiChatMessage=ZFe;AG.toOpenAIChatMessages=Fkt;var yy=XD(),gG=mue(),Nkt=ib();function hue(t){return t.filter(e=>e.type===yy.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}s(hue,"onlyStringContent");function Lkt(t){let e=t.map(n=>{if(n.type===yy.ChatCompletionContentPartKind.Text)return{type:"text",text:n.text};if(n.type===yy.ChatCompletionContentPartKind.Image)return{image_url:n.imageUrl,type:"image_url"};if(n.type===yy.ChatCompletionContentPartKind.Opaque&&yy.ChatCompletionContentPartOpaque.usableIn(n,Nkt.OutputMode.OpenAI))return n}).filter(n=>!!n);return e.every(n=>n.type==="text")?e.map(n=>n.text).join(""):e}s(Lkt,"stringAndImageContent");function ZFe(t){switch(t.role){case yy.ChatRole.System:return{role:gG.ChatRole.System,content:hue(t.content),name:t.name};case yy.ChatRole.User:return{role:gG.ChatRole.User,content:Lkt(t.content),name:t.name};case yy.ChatRole.Assistant:return{role:gG.ChatRole.Assistant,content:hue(t.content),name:t.name,tool_calls:t.toolCalls?.map(e=>({id:e.id,function:e.function,type:"function"}))};case yy.ChatRole.Tool:return{role:gG.ChatRole.Tool,content:hue(t.content),tool_call_id:t.toolCallId};default:return}}s(ZFe,"toOpenAiChatMessage");function Fkt(t){return t.map(ZFe).filter(e=>!!e)}s(Fkt,"toOpenAIChatMessages")});var nMe=H(xG=>{"use strict";f();Object.defineProperty(xG,"__esModule",{value:!0});xG.toVsCodeChatMessage=tMe;xG.toVsCodeChatMessages=Mkt;var CG=XD();function yG(t){return t.filter(e=>e.type===CG.ChatCompletionContentPartKind.Text).map(e=>e.text).join("")}s(yG,"onlyStringContent");var ob;function tMe(t){switch(ob??=require("vscode"),t.role){case CG.ChatRole.Assistant:let e=ob.LanguageModelChatMessage.Assistant(yG(t.content),t.name);return t.toolCalls&&(e.content=[new ob.LanguageModelTextPart(yG(t.content)),...t.toolCalls.map(n=>{let r;try{r=JSON.parse(n.function.arguments)}catch{throw new Error("Invalid JSON in tool call arguments for tool call: "+n.id)}return new ob.LanguageModelToolCallPart(n.id,n.function.name,r)})]),e;case CG.ChatRole.User:return ob.LanguageModelChatMessage.User(yG(t.content),t.name);case CG.ChatRole.Tool:{let n=ob.LanguageModelChatMessage.User("");return n.content=[new ob.LanguageModelToolResultPart(t.toolCallId,[new ob.LanguageModelTextPart(yG(t.content))])],n}default:return}}s(tMe,"toVsCodeChatMessage");function Mkt(t){return t.map(tMe).filter(e=>!!e)}s(Mkt,"toVsCodeChatMessages")});var ib=H(Xm=>{"use strict";f();Object.defineProperty(Xm,"__esModule",{value:!0});Xm.OutputMode=Xm.Raw=Xm.OpenAI=void 0;Xm.toMode=gue;Xm.toVSCode=Qkt;Xm.toOpenAI=Okt;var rMe=eMe(),iMe=nMe();Xm.OpenAI=mue();Xm.Raw=XD();var Z2;(function(t){t[t.Raw=1]="Raw",t[t.OpenAI=2]="OpenAI",t[t.VSCode=4]="VSCode"})(Z2||(Xm.OutputMode=Z2={}));function gue(t,e){switch(t){case Z2.Raw:return e;case Z2.VSCode:return e instanceof Array?(0,iMe.toVsCodeChatMessages)(e):(0,iMe.toVsCodeChatMessage)(e);case Z2.OpenAI:return e instanceof Array?(0,rMe.toOpenAIChatMessages)(e):(0,rMe.toOpenAiChatMessage)(e);default:throw new Error(`Unknown output mode: ${t}`)}}s(gue,"toMode");function Qkt(t){return gue(Z2.VSCode,t)}s(Qkt,"toVSCode");function Okt(t){return gue(Z2.OpenAI,t)}s(Okt,"toOpenAI")});var Aue=H(ZD=>{"use strict";f();Object.defineProperty(ZD,"__esModule",{value:!0});ZD.jsonRetainedProps=void 0;ZD.forEachNode=oMe;ZD.jsonRetainedProps=Object.keys({flexBasis:1,flexGrow:1,flexReserve:1,passPriority:1,priority:1});function oMe(t,e){if(e(t),t.type===1)for(let n of t.children)oMe(n,e)}s(oMe,"forEachNode")});var sMe=H(yue=>{"use strict";f();Object.defineProperty(yue,"__esModule",{value:!0});yue.once=Ukt;function Ukt(t){let e,n=!1,r=s((...i)=>(n||(e=t(...i),n=!0),e),"wrappedFunction");return r.clear=()=>{n=!1},r}s(Ukt,"once")});var bue=H(ru=>{"use strict";f();Object.defineProperty(ru,"__esModule",{value:!0});ru.BudgetExceededError=ru.MaterializedChatMessageImage=ru.MaterializedChatMessageBreakpoint=ru.MaterializedChatMessageOpaque=ru.MaterializedChatMessage=ru.MaterializedChatMessageTextChunk=ru.GenericMaterializedContainer=void 0;var sR=sMe(),W0=ib(),Cy=class t{static{s(this,"GenericMaterializedContainer")}parent;id;name;priority;metadata;flags;children;keepWithId;constructor(e,n,r,i,o,a,l){if(this.parent=e,this.id=n,this.name=r,this.priority=i,this.metadata=a,this.flags=l,this.children=o(this),l&8){if(this.children.length!==2)throw new Error("Invalid number of children for EmptyAlternate flag");let[c,u]=this.children;u.isEmpty?this.children=[c]:this.children=[u]}}has(e){return!!(this.flags&e)}async tokenCount(e){let n=0;return await Promise.all(this.children.map(async r=>{let i=ab(r)?await r.tokenCount(e):await r.upperBoundTokenCount(e);n+=i})),n}async upperBoundTokenCount(e){let n=0;return await Promise.all(this.children.map(async r=>{let i=await r.upperBoundTokenCount(e);n+=i})),n}replaceNode(e,n){return hMe(e,this.children,n)}allMetadata(){return mMe(this)}findById(e){return vue(e,this)}get isEmpty(){return!this.children.some(e=>!e.isEmpty)}onChunksChange(){this.parent?.onChunksChange()}*toChatMessages(){for(let e of this.children)qkt(e),e instanceof t?yield*e.toChatMessages():!e.isEmpty&&e instanceof eh&&(yield e.toChatMessage())}async baseMessageTokenCount(e){let n=0;return await Promise.all(this.children.map(async r=>{if(r instanceof eh||r instanceof t){let i=await r.baseMessageTokenCount(e);n+=i}})),n}removeLowestPriorityChild(){let e=[];return xue(this,e),e}};ru.GenericMaterializedContainer=Cy;var e9=class{static{s(this,"MaterializedChatMessageTextChunk")}parent;text;priority;metadata;lineBreakBefore;constructor(e,n,r,i=[],o){this.parent=e,this.text=n,this.priority=r,this.metadata=i,this.lineBreakBefore=o}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,sR.once)(async e=>await e.tokenLength({type:W0.Raw.ChatCompletionContentPartKind.Text,text:this.text})+(this.lineBreakBefore!==0?1:0));get isEmpty(){return!/\S/.test(this.text)}};ru.MaterializedChatMessageTextChunk=e9;var eh=class{static{s(this,"MaterializedChatMessage")}parent;id;role;name;toolCalls;toolCallId;priority;metadata;children;constructor(e,n,r,i,o,a,l,c,u){this.parent=e,this.id=n,this.role=r,this.name=i,this.toolCalls=o,this.toolCallId=a,this.priority=l,this.metadata=c,this.children=u(this)}async tokenCount(e){return this._tokenCount(e)}async upperBoundTokenCount(e){return this._upperBound(e)}get text(){return this._text()}get isEmpty(){return!this.toolCalls?.length&&!this.children.some(e=>!e.isEmpty)}replaceNode(e,n){let r=hMe(e,this.children,n);return r&&this.onChunksChange(),r}removeLowestPriorityChild(){let e=[];return xue(this,e),e}onChunksChange(){this._tokenCount.clear(),this._upperBound.clear(),this._text.clear(),this.parent?.onChunksChange()}findById(e){return vue(e,this)}_tokenCount=(0,sR.once)(async e=>{let n=this.toChatMessage();return e.countMessageTokens((0,W0.toMode)(e.mode,n))});_upperBound=(0,sR.once)(async e=>{let n=await this.baseMessageTokenCount(e);return await Promise.all(this.children.map(async r=>{let i=await r.upperBoundTokenCount(e);n+=i})),n});baseMessageTokenCount=(0,sR.once)(e=>{let n=this.toChatMessage();return n.content=n.content.map(r=>r.type===W0.Raw.ChatCompletionContentPartKind.Text?{...r,text:""}:r.type===W0.Raw.ChatCompletionContentPartKind.Image?void 0:r).filter(r=>!!r),e.countMessageTokens((0,W0.toMode)(e.mode,n))});_text=(0,sR.once)(()=>{let e=[];for(let{content:n,isTextSibling:r}of fMe(this)){if(n instanceof eT||n instanceof sb){e.push(n);continue}if(n instanceof Zm){e.at(-1)instanceof Zm?e[e.length-1]=n:e.push(n);continue}if(n.lineBreakBefore===1||n.lineBreakBefore===2&&!r){let i=e[e.length-1];typeof i=="string"&&i&&!i.endsWith(`
`)&&(e[e.length-1]=i+`
`)}typeof e[e.length-1]=="string"?e[e.length-1]+=n.text:e.push(n.text)}return e});toChatMessage(){let e=this.text.map(n=>{if(typeof n=="string")return{type:W0.Raw.ChatCompletionContentPartKind.Text,text:n};if(n instanceof eT)return{type:W0.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:gMe(n.src),detail:n.detail}};if(n instanceof sb)return n.value;if(n instanceof Zm)return n.part;throw new Error("Unexpected element type")});if(this.role===W0.Raw.ChatRole.System)return{role:this.role,content:e,...this.name?{name:this.name}:{}};if(this.role===W0.Raw.ChatRole.Assistant){let n={role:this.role,content:e};return this.name&&(n.name=this.name),this.toolCalls?.length&&(n.toolCalls=this.toolCalls.map(r=>({function:r.function,id:r.id,type:r.type}))),n}else return this.role===W0.Raw.ChatRole.User?{role:this.role,content:e,...this.name?{name:this.name}:{}}:this.role===W0.Raw.ChatRole.Tool?{role:this.role,content:e,toolCallId:this.toolCallId}:{role:this.role,content:e,name:this.name}}};ru.MaterializedChatMessage=eh;var sb=class{static{s(this,"MaterializedChatMessageOpaque")}parent;part;metadata=[];priority=Number.MAX_SAFE_INTEGER;get value(){return this.part.value}constructor(e,n){this.parent=e,this.part=n}upperBoundTokenCount(e){return this.part.tokenUsage&&W0.Raw.ChatCompletionContentPartOpaque.usableIn(this.part,e.mode)?this.part.tokenUsage:0}isEmpty=!1};ru.MaterializedChatMessageOpaque=sb;var Zm=class{static{s(this,"MaterializedChatMessageBreakpoint")}parent;part;metadata=[];priority=Number.MAX_SAFE_INTEGER;constructor(e,n){this.parent=e,this.part=n}upperBoundTokenCount(e){return 0}isEmpty=!1};ru.MaterializedChatMessageBreakpoint=Zm;var eT=class{static{s(this,"MaterializedChatMessageImage")}parent;id;src;priority;metadata;lineBreakBefore;detail;constructor(e,n,r,i,o=[],a,l){this.parent=e,this.id=n,this.src=r,this.priority=i,this.metadata=o,this.lineBreakBefore=a,this.detail=l}upperBoundTokenCount(e){return this._upperBound(e)}_upperBound=(0,sR.once)(async e=>e.tokenLength({type:W0.Raw.ChatCompletionContentPartKind.Image,imageUrl:{url:gMe(this.src),detail:this.detail}}));isEmpty=!1};ru.MaterializedChatMessageImage=eT;function ab(t){return t instanceof Cy||t instanceof eh}s(ab,"isContainerType");function dMe(t){return t instanceof e9||t instanceof eT||t instanceof sb||t instanceof Zm}s(dMe,"isContentType");function qkt(t){if(!ab(t))throw new Error(`Cannot have a text node outside a ChatMessage. Text: "${t.text}"`)}s(qkt,"assertContainerOrChatMessage");function*fMe(t,e=!1){for(let n of t.children)n instanceof e9?(yield{content:n,isTextSibling:e},e=!0):n instanceof eT||n instanceof sb||n instanceof Zm?yield{content:n,isTextSibling:!1}:n instanceof sb?yield{content:n,isTextSibling:!0}:(n&&(yield*fMe(n,e)),e=!1)}s(fMe,"contentChunks");function Wkt(t,e){let n;function r(i,o){if(dMe(i))(!n||i.priority<n.node.priority)&&(n={chain:o.slice(),node:i});else{o.push(i);for(let a of i.children)r(a,o);o.pop()}}if(s(r,"findLowestInTree"),r(t,[]),!n)throw new Error("No lowest priority node found");t9(n.node,e)}s(Wkt,"removeLowestPriorityLegacy");var aMe=new WeakMap;function pMe(t){let e=aMe.get(t);if(e!==void 0)return e;let n=!1;return t instanceof Zm?n=!0:t instanceof eh?n=t.children.some(r=>r instanceof Zm):t instanceof Cy&&(n=t.children.some(pMe)),aMe.set(t,n),n}s(pMe,"hasCachePoint");function Hkt(t){if(t instanceof eh)return!0;for(let e=t.parent;e;e=e.parent)if(e instanceof eh)return!1;return!0}s(Hkt,"shouldLookForCachePointInNode");function xue(t,e){let n;if(t instanceof Cy&&t.has(1)){Wkt(t,e);return}let r=Hkt(t),i=t.children.map((o,a)=>({chain:[t],index:a}));for(let o=0;o<i.length;o++){let{chain:a,index:l}=i[o],c=a[a.length-1].children[l];if(!(r&&pMe(c)&&(n=void 0,c instanceof Zm))){if(c instanceof Cy&&c.has(4)){let u=[...a,c];i.splice(o+1,0,...c.children.map((d,p)=>({chain:u,index:p})))}else if(!n||c.priority<n.value.priority)n={chain:a,index:l,value:c};else if(c.priority===n.value.priority){n.lowestNested??=lMe(n.value);let u=lMe(c);u<n.lowestNested&&(n={chain:a,index:l,value:c,lowestNested:u})}}}if(!n)throw new vG(t);dMe(n.value)||n.value instanceof Cy&&n.value.has(2)||ab(n.value)&&!n.value.children.length?t9(n.value,e):xue(n.value,e)}s(xue,"removeLowestPriorityChild");var vG=class extends Error{static{s(this,"BudgetExceededError")}constructor(e){let n=[e];for(;n[0].parent;)n.unshift(n[0].parent);let r=n.map(i=>i instanceof eh?i.role:i.name||"(anonymous)");super(`No lowest priority node found (path: ${r.join(" -> ")})`)}};ru.BudgetExceededError=vG;function lMe(t){if(!ab(t))return-1;let e=Number.MAX_SAFE_INTEGER;for(let n of t.children)e=Math.min(e,n.priority);return e}s(lMe,"getLowestPriorityAmongChildren");function*mMe(t){yield*t.metadata;for(let e of t.children)ab(e)?yield*mMe(e):yield*e.metadata}s(mMe,"allMetadata");function hMe(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];if(ab(i)){if(i.id===t){let a=e[r];return n.parent=i.parent,e[r]=n,a}let o=i.replaceNode(t,n);if(o)return o}}}s(hMe,"replaceNode");function*cMe(t){let e=[t];for(;e.length>0;){let n=e.pop();yield n,ab(n)&&e.push(...n.children)}}s(cMe,"forEachNode");function Gkt(t){let e=t;for(;e.parent;)e=e.parent;return e}s(Gkt,"getRoot");function uMe(t){return t instanceof Cy&&t.keepWithId!==void 0}s(uMe,"isKeepWith");var Cue=new Set;function jkt(t,e){let n=new Set;for(let r of cMe(t))uMe(r)&&!Cue.has(r.keepWithId)&&n.add(r.keepWithId);if(n.size===0)return!1;for(let r of n)Cue.add(r);try{let r=Gkt(t);for(let i of cMe(r))uMe(i)&&n.has(i.keepWithId)?t9(i,e):i instanceof eh&&i.toolCalls&&(i.toolCalls=Vkt(i.toolCalls,o=>!(o.keepWith&&n.has(o.keepWith.id))),i.isEmpty&&t9(i,e))}finally{for(let r of n)Cue.delete(r)}}s(jkt,"removeOtherKeepWiths");function vue(t,e){if(e.id===t)return e;for(let n of e.children)if(ab(n)){let r=vue(t,n);if(r)return r}}s(vue,"findNodeById");function t9(t,e){let n=t.parent;if(!n)return;let r=n.children.indexOf(t);r!==-1&&(n.children.splice(r,1),e.push(t),jkt(t,e),n.isEmpty?t9(n,e):n.onChunksChange())}s(t9,"removeNode");function gMe(t){let e={"/9j/":"image/jpeg",iVBOR:"image/png",R0lGOD:"image/gif",UklGR:"image/webp"};for(let n of Object.keys(e))if(t.startsWith(n))return`data:${e[n]};base64,${t}`;return t}s(gMe,"getEncodedBase64");function Vkt(t,e){for(let n=0;n<t.length;n++){if(e(t[n]))continue;let r=t.slice(0,n);for(let i=n+1;i<t.length;i++)e(t[i])&&r.push(t[i]);return r}return t}s(Vkt,"filterIfDifferent")});var yMe=H(()=>{"use strict";f();function $kt(t,e,...n){return{ctor:t,props:e,children:n.flat()}}s($kt,"_vscpp");function AMe(){throw new Error("This should not be invoked!")}s(AMe,"_vscppf");AMe.isFragment=!0;globalThis.vscpp=$kt;globalThis.vscppf=AMe});var Iue=H(bG=>{"use strict";f();Object.defineProperty(bG,"__esModule",{value:!0});bG.PromptElement=void 0;yMe();var Eue=class{static{s(this,"PromptElement")}props;get priority(){return this.props.priority??Number.MAX_SAFE_INTEGER}get insertLineBreakBefore(){return!0}constructor(e){this.props=e}};bG.PromptElement=Eue});var Nue=H(Ui=>{"use strict";f();Object.defineProperty(Ui,"__esModule",{value:!0});Ui.LogicalWrapper=Ui.IfEmpty=Ui.AbstractKeepWith=Ui.TokenLimit=Ui.Expandable=Ui.Chunk=Ui.LegacyPrioritization=Ui.ToolResult=Ui.PrioritizedList=Ui.Image=Ui.TextChunk=Ui.ToolMessage=Ui.AssistantMessage=Ui.UserMessage=Ui.SystemMessage=Ui.BaseChatMessage=void 0;Ui.isChatMessagePromptElement=zkt;Ui.useKeepWith=Xkt;var r9=th(),yp=Iue();function zkt(t){return t instanceof EG||t instanceof IG||t instanceof TG}s(zkt,"isChatMessagePromptElement");var tT=class extends yp.PromptElement{static{s(this,"BaseChatMessage")}render(){return vscpp(vscppf,null,this.props.children)}};Ui.BaseChatMessage=tT;var EG=class extends tT{static{s(this,"SystemMessage")}constructor(e){e.role=r9.Raw.ChatRole.System,super(e)}};Ui.SystemMessage=EG;var IG=class extends tT{static{s(this,"UserMessage")}constructor(e){e.role=r9.Raw.ChatRole.User,super(e)}};Ui.UserMessage=IG;var TG=class extends tT{static{s(this,"AssistantMessage")}constructor(e){e.role=r9.Raw.ChatRole.Assistant,super(e)}};Ui.AssistantMessage=TG;var Ykt=/\s+/g,Tue=class extends tT{static{s(this,"ToolMessage")}constructor(e){e.role=r9.Raw.ChatRole.Tool,super(e)}};Ui.ToolMessage=Tue;var wG=class extends yp.PromptElement{static{s(this,"TextChunk")}async prepare(e,n,r){let i=this.props.breakOnWhitespace?Ykt:this.props.breakOn;if(!i)return vscpp(vscppf,null,this.props.children);let o="",a=[];for(let c of this.props.children||[])if(c&&typeof c=="object"){if(typeof c.ctor!="string")throw new Error("TextChunk children must be text literals or intrinsic attributes.");c.ctor==="br"?o+=`
`:a.push(c)}else c!=null&&(o+=c);let l=await Kkt(e,i,o,r);return vscpp(vscppf,null,a,l)}render(e){return e}};Ui.TextChunk=wG;async function Kkt(t,e,n,r){if(e instanceof RegExp){if(!e.global)throw new Error(`\`breakOn\` expression must have the global flag set (got ${e})`);e.lastIndex=0}let i="",o=-1;for(;o<n.length;){let a;typeof e=="string"?a=n.indexOf(e,o===-1?0:o+e.length):a=e.exec(n)?.index??-1,a===-1&&(a=n.length);let l=i+n.slice(Math.max(0,o),a);if(await t.countTokens({type:r9.Raw.ChatCompletionContentPartKind.Text,text:l},r)>t.tokenBudget)return i;i=l,o=a}return i}s(Kkt,"getTextContentBelowBudget");var wue=class extends yp.PromptElement{static{s(this,"Image")}constructor(e){super(e)}render(){return vscpp(vscppf,null,this.props.children)}};Ui.Image=wue;var _ue=class extends yp.PromptElement{static{s(this,"PrioritizedList")}render(){let{children:e,priority:n=0,descending:r}=this.props;if(e)return vscpp(vscppf,null,e.map((i,o)=>{if(!i)return;let a=r?n-o:n-e.length+o;return typeof i!="object"?vscpp(wG,{priority:a},i):(i.props??={},i.props.priority=a,i)}))}};Ui.PrioritizedList=_ue;var Sue=class extends yp.PromptElement{static{s(this,"ToolResult")}render(){return vscpp(vscppf,null,this.props.data.content.map(e=>{if(e&&typeof e.value=="string")return e.value;if(e&&e.value&&typeof e.value.node=="object")return vscpp("elementJSON",{data:e.value})}))}};Ui.ToolResult=Sue;var Rue=class extends yp.PromptElement{static{s(this,"LegacyPrioritization")}render(){return vscpp(vscppf,null,this.props.children)}};Ui.LegacyPrioritization=Rue;var kue=class extends yp.PromptElement{static{s(this,"Chunk")}render(){return vscpp(vscppf,null,this.props.children)}};Ui.Chunk=kue;var Bue=class extends yp.PromptElement{static{s(this,"Expandable")}async render(e,n){return vscpp(vscppf,null,await this.props.value(n))}};Ui.Expandable=Bue;var Pue=class extends yp.PromptElement{static{s(this,"TokenLimit")}render(){return vscpp(vscppf,null,this.props.children)}};Ui.TokenLimit=Pue;var _G=class extends yp.PromptElement{static{s(this,"AbstractKeepWith")}};Ui.AbstractKeepWith=_G;var Jkt=0;function Xkt(){let t=Jkt++;return class extends _G{static{s(this,"KeepWith")}static id=t;id=t;render(){return vscpp(vscppf,null,this.props.children)}}}s(Xkt,"useKeepWith");var Due=class extends yp.PromptElement{static{s(this,"IfEmpty")}render(){return vscpp(vscppf,null,vscpp(n9,null,this.props.alt),vscpp(n9,{flexGrow:1},this.props.children))}};Ui.IfEmpty=Due;var n9=class extends yp.PromptElement{static{s(this,"LogicalWrapper")}render(){return vscpp(vscppf,null,this.props.children)}};Ui.LogicalWrapper=n9});var xMe=H(i9=>{"use strict";f();Object.defineProperty(i9,"__esModule",{value:!0});i9.localize=Zkt;i9.localize2=eBt;i9.getConfiguredDefaultLocale=tBt;function CMe(t,e){let n;return e.length===0?n=t:n=t.replace(/\{(\d+)\}/g,function(r,i){let o=i[0];return typeof e[o]<"u"?e[o]:r}),n}s(CMe,"_format");function Zkt(t,e,...n){return CMe(e,n)}s(Zkt,"localize");function eBt(t,e,...n){let r=CMe(e,n);return{original:r,value:r}}s(eBt,"localize2");function tBt(t){}s(tBt,"getConfiguredDefaultLocale")});var Que=H(Qt=>{"use strict";f();Object.defineProperty(Qt,"__esModule",{value:!0});Qt.isAndroid=Qt.isEdge=Qt.isSafari=Qt.isFirefox=Qt.isChrome=Qt.OS=Qt.setTimeout0=Qt.setTimeout0IsFaster=Qt.translationsConfigFile=Qt.platformLocale=Qt.locale=Qt.Language=Qt.language=Qt.userAgent=Qt.platform=Qt.isCI=Qt.isMobile=Qt.isIOS=Qt.webWorkerOrigin=Qt.isWebWorker=Qt.isWeb=Qt.isElectron=Qt.isNative=Qt.isLinuxSnap=Qt.isLinux=Qt.isMacintosh=Qt.isWindows=Qt.LANGUAGE_DEFAULT=void 0;Qt.PlatformToString=rBt;Qt.isLittleEndian=iBt;Qt.isBigSurOrNewer=oBt;var vMe=xMe();Qt.LANGUAGE_DEFAULT="en";var a9=!1,l9=!1,s9=!1,TMe=!1,wMe=!1,Fue=!1,_Me=!1,Mue=!1,SMe=!1,RMe=!1,o9,SG=Qt.LANGUAGE_DEFAULT,Lue=Qt.LANGUAGE_DEFAULT,kMe,xy,vy=globalThis,H0;typeof vy.vscode<"u"&&typeof vy.vscode.process<"u"?H0=vy.vscode.process:typeof process<"u"&&(H0=process);var BMe=typeof H0?.versions?.electron=="string",nBt=BMe&&H0?.type==="renderer";if(typeof H0=="object"){a9=H0.platform==="win32",l9=H0.platform==="darwin",s9=H0.platform==="linux",TMe=s9&&!!H0.env.SNAP&&!!H0.env.SNAP_REVISION,_Me=BMe,SMe=!!H0.env.CI||!!H0.env.BUILD_ARTIFACTSTAGINGDIRECTORY,o9=Qt.LANGUAGE_DEFAULT,SG=Qt.LANGUAGE_DEFAULT;let t=H0.env.VSCODE_NLS_CONFIG;if(t)try{let e=JSON.parse(t),n=e.availableLanguages["*"];o9=e.locale,Lue=e.osLocale,SG=n||Qt.LANGUAGE_DEFAULT,kMe=e._translationsConfigFile}catch{}wMe=!0}else typeof navigator=="object"&&!nBt?(xy=navigator.userAgent,a9=xy.indexOf("Windows")>=0,l9=xy.indexOf("Macintosh")>=0,Mue=(xy.indexOf("Macintosh")>=0||xy.indexOf("iPad")>=0||xy.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,s9=xy.indexOf("Linux")>=0,RMe=xy?.indexOf("Mobi")>=0,Fue=!0,o9=vMe.getConfiguredDefaultLocale(vMe.localize({key:"ensureLoaderPluginIsLoaded",comment:["{Locked}"]},"_"))||Qt.LANGUAGE_DEFAULT,SG=o9,Lue=navigator.language):console.error("Unable to resolve platform.");function rBt(t){switch(t){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}s(rBt,"PlatformToString");var RG=0;l9?RG=1:a9?RG=3:s9&&(RG=2);Qt.isWindows=a9;Qt.isMacintosh=l9;Qt.isLinux=s9;Qt.isLinuxSnap=TMe;Qt.isNative=wMe;Qt.isElectron=_Me;Qt.isWeb=Fue;Qt.isWebWorker=Fue&&typeof vy.importScripts=="function";Qt.webWorkerOrigin=Qt.isWebWorker?vy.origin:void 0;Qt.isIOS=Mue;Qt.isMobile=RMe;Qt.isCI=SMe;Qt.platform=RG;Qt.userAgent=xy;Qt.language=SG;var bMe;(function(t){function e(){return Qt.language}s(e,"value"),t.value=e;function n(){return Qt.language.length===2?Qt.language==="en":Qt.language.length>=3?Qt.language[0]==="e"&&Qt.language[1]==="n"&&Qt.language[2]==="-":!1}s(n,"isDefaultVariant"),t.isDefaultVariant=n;function r(){return Qt.language==="en"}s(r,"isDefault"),t.isDefault=r})(bMe||(Qt.Language=bMe={}));Qt.locale=o9;Qt.platformLocale=Lue;Qt.translationsConfigFile=kMe;Qt.setTimeout0IsFaster=typeof vy.postMessage=="function"&&!vy.importScripts;Qt.setTimeout0=(()=>{if(Qt.setTimeout0IsFaster){let t=[];vy.addEventListener("message",n=>{if(n.data&&n.data.vscodeScheduleAsyncWork)for(let r=0,i=t.length;r<i;r++){let o=t[r];if(o.id===n.data.vscodeScheduleAsyncWork){t.splice(r,1),o.callback();return}}});let e=0;return n=>{let r=++e;t.push({id:r,callback:n}),vy.postMessage({vscodeScheduleAsyncWork:r},"*")}}return t=>setTimeout(t)})();Qt.OS=l9||Mue?2:a9?1:3;var EMe=!0,IMe=!1;function iBt(){if(!IMe){IMe=!0;let t=new Uint8Array(2);t[0]=1,t[1]=2,EMe=new Uint16Array(t.buffer)[0]===513}return EMe}s(iBt,"isLittleEndian");Qt.isChrome=!!(Qt.userAgent&&Qt.userAgent.indexOf("Chrome")>=0);Qt.isFirefox=!!(Qt.userAgent&&Qt.userAgent.indexOf("Firefox")>=0);Qt.isSafari=!!(!Qt.isChrome&&Qt.userAgent&&Qt.userAgent.indexOf("Safari")>=0);Qt.isEdge=!!(Qt.userAgent&&Qt.userAgent.indexOf("Edg/")>=0);Qt.isAndroid=!!(Qt.userAgent&&Qt.userAgent.indexOf("Android")>=0);function oBt(t){return parseFloat(t)>=20}s(oBt,"isBigSurOrNewer")});var DMe=H(lA=>{"use strict";f();Object.defineProperty(lA,"__esModule",{value:!0});lA.arch=lA.platform=lA.env=lA.cwd=void 0;var PMe=Que(),nT,Oue=globalThis.vscode;if(typeof Oue<"u"&&typeof Oue.process<"u"){let t=Oue.process;nT={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"?nT={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:nT={get platform(){return PMe.isWindows?"win32":PMe.isMacintosh?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};lA.cwd=nT.cwd;lA.env=nT.env;lA.platform=nT.platform;lA.arch=nT.arch});var LMe=H(ln=>{"use strict";f();Object.defineProperty(ln,"__esModule",{value:!0});ln.delimiter=ln.sep=ln.toNamespacedPath=ln.parse=ln.format=ln.extname=ln.basename=ln.dirname=ln.relative=ln.resolve=ln.join=ln.isAbsolute=ln.normalize=ln.posix=ln.win32=void 0;var aR=DMe(),sBt=65,aBt=97,lBt=90,cBt=122,ub=46,zl=47,Dd=92,lb=58,uBt=63,kG=class extends Error{static{s(this,"ErrorInvalidArgType")}code;constructor(e,n,r){let i;typeof n=="string"&&n.indexOf("not ")===0?(i="must not be",n=n.replace(/^not /,"")):i="must be";let o=e.indexOf(".")!==-1?"property":"argument",a=`The "${e}" ${o} ${i} of type ${n}`;a+=`. Received type ${typeof r}`,super(a),this.code="ERR_INVALID_ARG_TYPE"}};function dBt(t,e){if(t===null||typeof t!="object")throw new kG(e,"Object",t)}s(dBt,"validateObject");function pa(t,e){if(typeof t!="string")throw new kG(e,"string",t)}s(pa,"validateString");var Nd=aR.platform==="win32";function si(t){return t===zl||t===Dd}s(si,"isPathSeparator");function Uue(t){return t===zl}s(Uue,"isPosixPathSeparator");function cb(t){return t>=sBt&&t<=lBt||t>=aBt&&t<=cBt}s(cb,"isWindowsDeviceRoot");function BG(t,e,n,r){let i="",o=0,a=-1,l=0,c=0;for(let u=0;u<=t.length;++u){if(u<t.length)c=t.charCodeAt(u);else{if(r(c))break;c=zl}if(r(c)){if(!(a===u-1||l===1))if(l===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==ub||i.charCodeAt(i.length-2)!==ub){if(i.length>2){let d=i.lastIndexOf(n);d===-1?(i="",o=0):(i=i.slice(0,d),o=i.length-1-i.lastIndexOf(n)),a=u,l=0;continue}else if(i.length!==0){i="",o=0,a=u,l=0;continue}}e&&(i+=i.length>0?`${n}..`:"..",o=2)}else i.length>0?i+=`${n}${t.slice(a+1,u)}`:i=t.slice(a+1,u),o=u-a-1;a=u,l=0}else c===ub&&l!==-1?++l:l=-1}return i}s(BG,"normalizeString");function NMe(t,e){dBt(e,"pathObject");let n=e.dir||e.root,r=e.base||`${e.name||""}${e.ext||""}`;return n?n===e.root?`${n}${r}`:`${n}${t}${r}`:r}s(NMe,"_format");ln.win32={resolve(...t){let e="",n="",r=!1;for(let i=t.length-1;i>=-1;i--){let o;if(i>=0){if(o=t[i],pa(o,"path"),o.length===0)continue}else e.length===0?o=aR.cwd():(o=aR.env[`=${e}`]||aR.cwd(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===Dd)&&(o=`${e}\\`));let a=o.length,l=0,c="",u=!1,d=o.charCodeAt(0);if(a===1)si(d)&&(l=1,u=!0);else if(si(d))if(u=!0,si(o.charCodeAt(1))){let p=2,m=p;for(;p<a&&!si(o.charCodeAt(p));)p++;if(p<a&&p!==m){let h=o.slice(m,p);for(m=p;p<a&&si(o.charCodeAt(p));)p++;if(p<a&&p!==m){for(m=p;p<a&&!si(o.charCodeAt(p));)p++;(p===a||p!==m)&&(c=`\\\\${h}\\${o.slice(m,p)}`,l=p)}}}else l=1;else cb(d)&&o.charCodeAt(1)===lb&&(c=o.slice(0,2),l=2,a>2&&si(o.charCodeAt(2))&&(u=!0,l=3));if(c.length>0)if(e.length>0){if(c.toLowerCase()!==e.toLowerCase())continue}else e=c;if(r){if(e.length>0)break}else if(n=`${o.slice(l)}\\${n}`,r=u,u&&e.length>0)break}return n=BG(n,!r,"\\",si),r?`${e}\\${n}`:`${e}${n}`||"."},normalize(t){pa(t,"path");let e=t.length;if(e===0)return".";let n=0,r,i=!1,o=t.charCodeAt(0);if(e===1)return Uue(o)?"\\":t;if(si(o))if(i=!0,si(t.charCodeAt(1))){let l=2,c=l;for(;l<e&&!si(t.charCodeAt(l));)l++;if(l<e&&l!==c){let u=t.slice(c,l);for(c=l;l<e&&si(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&!si(t.charCodeAt(l));)l++;if(l===e)return`\\\\${u}\\${t.slice(c)}\\`;l!==c&&(r=`\\\\${u}\\${t.slice(c,l)}`,n=l)}}}else n=1;else cb(o)&&t.charCodeAt(1)===lb&&(r=t.slice(0,2),n=2,e>2&&si(t.charCodeAt(2))&&(i=!0,n=3));let a=n<e?BG(t.slice(n),!i,"\\",si):"";return a.length===0&&!i&&(a="."),a.length>0&&si(t.charCodeAt(e-1))&&(a+="\\"),r===void 0?i?`\\${a}`:a:i?`${r}\\${a}`:`${r}${a}`},isAbsolute(t){pa(t,"path");let e=t.length;if(e===0)return!1;let n=t.charCodeAt(0);return si(n)||e>2&&cb(n)&&t.charCodeAt(1)===lb&&si(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,n;for(let o=0;o<t.length;++o){let a=t[o];pa(a,"path"),a.length>0&&(e===void 0?e=n=a:e+=`\\${a}`)}if(e===void 0)return".";let r=!0,i=0;if(typeof n=="string"&&si(n.charCodeAt(0))){++i;let o=n.length;o>1&&si(n.charCodeAt(1))&&(++i,o>2&&(si(n.charCodeAt(2))?++i:r=!1))}if(r){for(;i<e.length&&si(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return ln.win32.normalize(e)},relative(t,e){if(pa(t,"from"),pa(e,"to"),t===e)return"";let n=ln.win32.resolve(t),r=ln.win32.resolve(e);if(n===r||(t=n.toLowerCase(),e=r.toLowerCase(),t===e))return"";let i=0;for(;i<t.length&&t.charCodeAt(i)===Dd;)i++;let o=t.length;for(;o-1>i&&t.charCodeAt(o-1)===Dd;)o--;let a=o-i,l=0;for(;l<e.length&&e.charCodeAt(l)===Dd;)l++;let c=e.length;for(;c-1>l&&e.charCodeAt(c-1)===Dd;)c--;let u=c-l,d=a<u?a:u,p=-1,m=0;for(;m<d;m++){let g=t.charCodeAt(i+m);if(g!==e.charCodeAt(l+m))break;g===Dd&&(p=m)}if(m!==d){if(p===-1)return r}else{if(u>d){if(e.charCodeAt(l+m)===Dd)return r.slice(l+m+1);if(m===2)return r.slice(l+m)}a>d&&(t.charCodeAt(i+m)===Dd?p=m:m===2&&(p=3)),p===-1&&(p=0)}let h="";for(m=i+p+1;m<=o;++m)(m===o||t.charCodeAt(m)===Dd)&&(h+=h.length===0?"..":"\\..");return l+=p,h.length>0?`${h}${r.slice(l,c)}`:(r.charCodeAt(l)===Dd&&++l,r.slice(l,c))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=ln.win32.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===Dd){if(e.charCodeAt(1)===Dd){let n=e.charCodeAt(2);if(n!==uBt&&n!==ub)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(cb(e.charCodeAt(0))&&e.charCodeAt(1)===lb&&e.charCodeAt(2)===Dd)return`\\\\?\\${e}`;return t},dirname(t){pa(t,"path");let e=t.length;if(e===0)return".";let n=-1,r=0,i=t.charCodeAt(0);if(e===1)return si(i)?t:".";if(si(i)){if(n=r=1,si(t.charCodeAt(1))){let l=2,c=l;for(;l<e&&!si(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&si(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&!si(t.charCodeAt(l));)l++;if(l===e)return t;l!==c&&(n=r=l+1)}}}}else cb(i)&&t.charCodeAt(1)===lb&&(n=e>2&&si(t.charCodeAt(2))?3:2,r=n);let o=-1,a=!0;for(let l=e-1;l>=r;--l)if(si(t.charCodeAt(l))){if(!a){o=l;break}}else a=!1;if(o===-1){if(n===-1)return".";o=n}return t.slice(0,o)},basename(t,e){e!==void 0&&pa(e,"ext"),pa(t,"path");let n=0,r=-1,i=!0,o;if(t.length>=2&&cb(t.charCodeAt(0))&&t.charCodeAt(1)===lb&&(n=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,l=-1;for(o=t.length-1;o>=n;--o){let c=t.charCodeAt(o);if(si(c)){if(!i){n=o+1;break}}else l===-1&&(i=!1,l=o+1),a>=0&&(c===e.charCodeAt(a)?--a===-1&&(r=o):(a=-1,r=l))}return n===r?r=l:r===-1&&(r=t.length),t.slice(n,r)}for(o=t.length-1;o>=n;--o)if(si(t.charCodeAt(o))){if(!i){n=o+1;break}}else r===-1&&(i=!1,r=o+1);return r===-1?"":t.slice(n,r)},extname(t){pa(t,"path");let e=0,n=-1,r=0,i=-1,o=!0,a=0;t.length>=2&&t.charCodeAt(1)===lb&&cb(t.charCodeAt(0))&&(e=r=2);for(let l=t.length-1;l>=e;--l){let c=t.charCodeAt(l);if(si(c)){if(!o){r=l+1;break}continue}i===-1&&(o=!1,i=l+1),c===ub?n===-1?n=l:a!==1&&(a=1):n!==-1&&(a=-1)}return n===-1||i===-1||a===0||a===1&&n===i-1&&n===r+1?"":t.slice(n,i)},format:NMe.bind(null,"\\"),parse(t){pa(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let n=t.length,r=0,i=t.charCodeAt(0);if(n===1)return si(i)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(si(i)){if(r=1,si(t.charCodeAt(1))){let p=2,m=p;for(;p<n&&!si(t.charCodeAt(p));)p++;if(p<n&&p!==m){for(m=p;p<n&&si(t.charCodeAt(p));)p++;if(p<n&&p!==m){for(m=p;p<n&&!si(t.charCodeAt(p));)p++;p===n?r=p:p!==m&&(r=p+1)}}}}else if(cb(i)&&t.charCodeAt(1)===lb){if(n<=2)return e.root=e.dir=t,e;if(r=2,si(t.charCodeAt(2))){if(n===3)return e.root=e.dir=t,e;r=3}}r>0&&(e.root=t.slice(0,r));let o=-1,a=r,l=-1,c=!0,u=t.length-1,d=0;for(;u>=r;--u){if(i=t.charCodeAt(u),si(i)){if(!c){a=u+1;break}continue}l===-1&&(c=!1,l=u+1),i===ub?o===-1?o=u:d!==1&&(d=1):o!==-1&&(d=-1)}return l!==-1&&(o===-1||d===0||d===1&&o===l-1&&o===a+1?e.base=e.name=t.slice(a,l):(e.name=t.slice(a,o),e.base=t.slice(a,l),e.ext=t.slice(o,l))),a>0&&a!==r?e.dir=t.slice(0,a-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null};var fBt=(()=>{if(Nd){let t=/\\/g;return()=>{let e=aR.cwd().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>aR.cwd()})();ln.posix={resolve(...t){let e="",n=!1;for(let r=t.length-1;r>=-1&&!n;r--){let i=r>=0?t[r]:fBt();pa(i,"path"),i.length!==0&&(e=`${i}/${e}`,n=i.charCodeAt(0)===zl)}return e=BG(e,!n,"/",Uue),n?`/${e}`:e.length>0?e:"."},normalize(t){if(pa(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===zl,n=t.charCodeAt(t.length-1)===zl;return t=BG(t,!e,"/",Uue),t.length===0?e?"/":n?"./":".":(n&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return pa(t,"path"),t.length>0&&t.charCodeAt(0)===zl},join(...t){if(t.length===0)return".";let e;for(let n=0;n<t.length;++n){let r=t[n];pa(r,"path"),r.length>0&&(e===void 0?e=r:e+=`/${r}`)}return e===void 0?".":ln.posix.normalize(e)},relative(t,e){if(pa(t,"from"),pa(e,"to"),t===e||(t=ln.posix.resolve(t),e=ln.posix.resolve(e),t===e))return"";let n=1,r=t.length,i=r-n,o=1,a=e.length-o,l=i<a?i:a,c=-1,u=0;for(;u<l;u++){let p=t.charCodeAt(n+u);if(p!==e.charCodeAt(o+u))break;p===zl&&(c=u)}if(u===l)if(a>l){if(e.charCodeAt(o+u)===zl)return e.slice(o+u+1);if(u===0)return e.slice(o+u)}else i>l&&(t.charCodeAt(n+u)===zl?c=u:u===0&&(c=0));let d="";for(u=n+c+1;u<=r;++u)(u===r||t.charCodeAt(u)===zl)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(o+c)}`},toNamespacedPath(t){return t},dirname(t){if(pa(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===zl,n=-1,r=!0;for(let i=t.length-1;i>=1;--i)if(t.charCodeAt(i)===zl){if(!r){n=i;break}}else r=!1;return n===-1?e?"/":".":e&&n===1?"//":t.slice(0,n)},basename(t,e){e!==void 0&&pa(e,"ext"),pa(t,"path");let n=0,r=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,l=-1;for(o=t.length-1;o>=0;--o){let c=t.charCodeAt(o);if(c===zl){if(!i){n=o+1;break}}else l===-1&&(i=!1,l=o+1),a>=0&&(c===e.charCodeAt(a)?--a===-1&&(r=o):(a=-1,r=l))}return n===r?r=l:r===-1&&(r=t.length),t.slice(n,r)}for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===zl){if(!i){n=o+1;break}}else r===-1&&(i=!1,r=o+1);return r===-1?"":t.slice(n,r)},extname(t){pa(t,"path");let e=-1,n=0,r=-1,i=!0,o=0;for(let a=t.length-1;a>=0;--a){let l=t.charCodeAt(a);if(l===zl){if(!i){n=a+1;break}continue}r===-1&&(i=!1,r=a+1),l===ub?e===-1?e=a:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||r===-1||o===0||o===1&&e===r-1&&e===n+1?"":t.slice(e,r)},format:NMe.bind(null,"/"),parse(t){pa(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let n=t.charCodeAt(0)===zl,r;n?(e.root="/",r=1):r=0;let i=-1,o=0,a=-1,l=!0,c=t.length-1,u=0;for(;c>=r;--c){let d=t.charCodeAt(c);if(d===zl){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),d===ub?i===-1?i=c:u!==1&&(u=1):i!==-1&&(u=-1)}if(a!==-1){let d=o===0&&n?1:o;i===-1||u===0||u===1&&i===a-1&&i===o+1?e.base=e.name=t.slice(d,a):(e.name=t.slice(d,i),e.base=t.slice(d,a),e.ext=t.slice(i,a))}return o>0?e.dir=t.slice(0,o-1):n&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};ln.posix.win32=ln.win32.win32=ln.win32;ln.posix.posix=ln.win32.posix=ln.posix;ln.normalize=Nd?ln.win32.normalize:ln.posix.normalize;ln.isAbsolute=Nd?ln.win32.isAbsolute:ln.posix.isAbsolute;ln.join=Nd?ln.win32.join:ln.posix.join;ln.resolve=Nd?ln.win32.resolve:ln.posix.resolve;ln.relative=Nd?ln.win32.relative:ln.posix.relative;ln.dirname=Nd?ln.win32.dirname:ln.posix.dirname;ln.basename=Nd?ln.win32.basename:ln.posix.basename;ln.extname=Nd?ln.win32.extname:ln.posix.extname;ln.format=Nd?ln.win32.format:ln.posix.format;ln.parse=Nd?ln.win32.parse:ln.posix.parse;ln.toNamespacedPath=Nd?ln.win32.toNamespacedPath:ln.posix.toNamespacedPath;ln.sep=Nd?ln.win32.sep:ln.posix.sep;ln.delimiter=Nd?ln.win32.delimiter:ln.posix.delimiter});var WMe=H(lR=>{"use strict";f();Object.defineProperty(lR,"__esModule",{value:!0});lR.URI=void 0;lR.isUriComponents=xBt;lR.uriToFsPath=LG;var FMe=LMe(),DG=Que(),pBt=/^\w[\w\d+.-]*$/,mBt=/^\//,hBt=/^\/\//;function gBt(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!pBt.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!mBt.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(hBt.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(gBt,"_validateUri");function ABt(t,e){return!t&&!e?"file":t}s(ABt,"_schemeFix");function yBt(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==nh&&(e=nh+e):e=nh;break}return e}s(yBt,"_referenceResolution");var $o="",nh="/",CBt=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,NG=class t{static{s(this,"URI")}static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}scheme;authority;path;query;fragment;constructor(e,n,r,i,o,a=!1){typeof e=="object"?(this.scheme=e.scheme||$o,this.authority=e.authority||$o,this.path=e.path||$o,this.query=e.query||$o,this.fragment=e.fragment||$o):(this.scheme=ABt(e,a),this.authority=n||$o,this.path=yBt(this.scheme,r||$o),this.query=i||$o,this.fragment=o||$o,gBt(this,a))}get fsPath(){return LG(this,!1)}with(e){if(!e)return this;let{scheme:n,authority:r,path:i,query:o,fragment:a}=e;return n===void 0?n=this.scheme:n===null&&(n=$o),r===void 0?r=this.authority:r===null&&(r=$o),i===void 0?i=this.path:i===null&&(i=$o),o===void 0?o=this.query:o===null&&(o=$o),a===void 0?a=this.fragment:a===null&&(a=$o),n===this.scheme&&r===this.authority&&i===this.path&&o===this.query&&a===this.fragment?this:new db(n,r,i,o,a)}static parse(e,n=!1){let r=CBt.exec(e);return r?new db(r[2]||$o,PG(r[4]||$o),PG(r[5]||$o),PG(r[7]||$o),PG(r[9]||$o),n):new db($o,$o,$o,$o,$o)}static file(e){let n=$o;if(DG.isWindows&&(e=e.replace(/\\/g,nh)),e[0]===nh&&e[1]===nh){let r=e.indexOf(nh,2);r===-1?(n=e.substring(2),e=nh):(n=e.substring(2,r),e=e.substring(r)||nh)}return new db("file",n,e,$o,$o)}static from(e,n){return new db(e.scheme,e.authority,e.path,e.query,e.fragment,n)}static joinPath(e,...n){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let r;return DG.isWindows&&e.scheme==="file"?r=t.file(FMe.win32.join(LG(e,!0),...n)).path:r=FMe.posix.join(e.path,...n),e.with({path:r})}toString(e=!1){return que(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let n=new db(e);return n._formatted=e.external??null,n._fsPath=e._sep===OMe?e.fsPath??null:null,n}}else return e}};lR.URI=NG;function xBt(t){return!t||typeof t!="object"?!1:typeof t.scheme=="string"&&(typeof t.authority=="string"||typeof t.authority>"u")&&(typeof t.path=="string"||typeof t.path>"u")&&(typeof t.query=="string"||typeof t.query>"u")&&(typeof t.fragment=="string"||typeof t.fragment>"u")}s(xBt,"isUriComponents");var OMe=DG.isWindows?1:void 0,db=class extends NG{static{s(this,"Uri")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=LG(this,!1)),this._fsPath}toString(e=!1){return e?que(this,!0):(this._formatted||(this._formatted=que(this,!1)),this._formatted)}toJSON(){let e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=OMe),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},UMe={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function MMe(t,e,n){let r,i=-1;for(let o=0;o<t.length;o++){let a=t.charCodeAt(o);if(a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||a===45||a===46||a===95||a===126||e&&a===47||n&&a===91||n&&a===93||n&&a===58)i!==-1&&(r+=encodeURIComponent(t.substring(i,o)),i=-1),r!==void 0&&(r+=t.charAt(o));else{r===void 0&&(r=t.substr(0,o));let l=UMe[a];l!==void 0?(i!==-1&&(r+=encodeURIComponent(t.substring(i,o)),i=-1),r+=l):i===-1&&(i=o)}}return i!==-1&&(r+=encodeURIComponent(t.substring(i))),r!==void 0?r:t}s(MMe,"encodeURIComponentFast");function vBt(t){let e;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r===35||r===63?(e===void 0&&(e=t.substr(0,n)),e+=UMe[r]):e!==void 0&&(e+=t[n])}return e!==void 0?e:t}s(vBt,"encodeURIComponentMinimal");function LG(t,e){let n;return t.authority&&t.path.length>1&&t.scheme==="file"?n=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?n=t.path.substr(1):n=t.path[1].toLowerCase()+t.path.substr(2):n=t.path,DG.isWindows&&(n=n.replace(/\//g,"\\")),n}s(LG,"uriToFsPath");function que(t,e){let n=e?vBt:MMe,r="",{scheme:i,authority:o,path:a,query:l,fragment:c}=t;if(i&&(r+=i,r+=":"),(o||i==="file")&&(r+=nh,r+=nh),o){let u=o.indexOf("@");if(u!==-1){let d=o.substr(0,u);o=o.substr(u+1),u=d.lastIndexOf(":"),u===-1?r+=n(d,!1,!1):(r+=n(d.substr(0,u),!1,!1),r+=":",r+=n(d.substr(u+1),!1,!0)),r+="@"}o=o.toLowerCase(),u=o.lastIndexOf(":"),u===-1?r+=n(o,!1,!0):(r+=n(o.substr(0,u),!1,!0),r+=o.substr(u))}if(a){if(a.length>=3&&a.charCodeAt(0)===47&&a.charCodeAt(2)===58){let u=a.charCodeAt(1);u>=65&&u<=90&&(a=`/${String.fromCharCode(u+32)}:${a.substr(3)}`)}else if(a.length>=2&&a.charCodeAt(1)===58){let u=a.charCodeAt(0);u>=65&&u<=90&&(a=`${String.fromCharCode(u+32)}:${a.substr(2)}`)}r+=n(a,!0,!1)}return l&&(r+="?",r+=n(l,!1,!1)),c&&(r+="#",r+=e?c:MMe(c,!1,!1)),r}s(que,"_asFormatted");function qMe(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+qMe(t.substr(3)):t}}s(qMe,"decodeURIComponentGraceful");var QMe=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function PG(t){return t.match(QMe)?t.replace(QMe,e=>qMe(e)):t}s(PG,"percentDecode")});var Gue=H(fb=>{"use strict";f();Object.defineProperty(fb,"__esModule",{value:!0});fb.PromptReference=fb.ChatResponseReferencePartStatusKind=fb.PromptMetadata=void 0;var c9=WMe(),Wue=class{static{s(this,"PromptMetadata")}_marker;toString(){return Object.getPrototypeOf(this).constructor.name}};fb.PromptMetadata=Wue;var HMe;(function(t){t[t.Complete=1]="Complete",t[t.Partial=2]="Partial",t[t.Omitted=3]="Omitted"})(HMe||(fb.ChatResponseReferencePartStatusKind=HMe={}));var Hue=class t{static{s(this,"PromptReference")}anchor;iconPath;options;static fromJSON(e){let n=s(r=>"scheme"in r?c9.URI.from(r):{uri:c9.URI.from(r.uri),range:r.range},"uriOrLocation");return new t("variableName"in e.anchor?{variableName:e.anchor.variableName,value:e.anchor.value&&n(e.anchor.value)}:n(e.anchor),e.iconPath&&("scheme"in e.iconPath?c9.URI.from(e.iconPath):"light"in e.iconPath?{light:c9.URI.from(e.iconPath.light),dark:c9.URI.from(e.iconPath.dark)}:e.iconPath),e.options)}constructor(e,n,r){this.anchor=e,this.iconPath=n,this.options=r}toJSON(){return{anchor:this.anchor,iconPath:this.iconPath,options:this.options}}};fb.PromptReference=Hue});var Zue=H(uR=>{"use strict";f();Object.defineProperty(uR,"__esModule",{value:!0});uR.PromptRenderer=uR.MetadataMap=void 0;var bBt=Aue(),u9=bue(),cR=ib(),La=Nue(),Xue=Gue(),GMe;(function(t){t.empty={get:s(()=>{},"get"),getAll:s(()=>[],"getAll")}})(GMe||(uR.MetadataMap=GMe={}));var Vue=class{static{s(this,"PromptRenderer")}_endpoint;_ctor;_props;_tokenizer;_usedContext=[];_ignoredFiles=[];_growables=[];_root=new MG(null,0);_tokenLimits=[];tracer=void 0;constructor(e,n,r,i){this._endpoint=e,this._ctor=n,this._props=r,this._tokenizer=i}getIgnoredFiles(){return Array.from(new Set(this._ignoredFiles))}getUsedContext(){return this._usedContext}createElement(e){return new e.ctor(e.props)}async _processPromptPieces(e,n,r,i){let o=new Map;for(let[c,u]of n.entries()){if(Array.isArray(u.children)&&(u.props=u.props??{},u.props.children=u.children),!u.ctor){let g=zMe(u.path);throw new Error(`Invalid ChatMessage child! Child must be a TSX component that extends PromptElement at ${g}`)}let d=this.createElement(u),p;d instanceof La.TokenLimit&&(p=u.props.max,this._tokenLimits.push({limit:p,id:u.node.id})),u.node.setObj(d);let m=u.props.flexGrow??1/0,h=o.get(m);h||(h=[],o.set(m,h)),h.push({element:u,promptElementInstance:d,tokenLimit:p})}if(o.size===0)return;let a=[...o.entries()].sort(([c],[u])=>u-c).map(([c,u])=>u),l=s(c=>{let u=0;for(let d=c+1;d<a.length;d++)for(let{element:p}of a[d]){if(!p.props.flexReserve)continue;let m=typeof p.props.flexReserve=="string"?Math.floor(e.remainingTokenBudget/Number(p.props.flexReserve.slice(1))):p.props.flexReserve;u+=m}return e.consume(u),u},"setReserved");for(let[c,u]of a.entries()){let d=l(c),p=0;for(let{element:v}of u)p+=v.props.flexBasis??1;let m=0,h=u.map(v=>{if(v.tokenLimit===void 0)return!1;let b=v.element.props.flexBasis??1,E=b/p;return Math.floor(e.remainingTokenBudget*E)<v.tokenLimit?!1:(p-=b,m+=v.tokenLimit,!0)}),g=u.map((v,b)=>{let E=(v.element.props.flexBasis??1)/p;return{tokenBudget:h[b]?v.tokenLimit:Math.floor((e.remainingTokenBudget-m)*E),endpoint:e.endpoint,countTokens:s((_,k)=>this._tokenizer.tokenLength(typeof _=="string"?{type:cR.Raw.ChatCompletionContentPartKind.Text,text:_}:_,k),"countTokens")}});e.consume(-d),this.tracer?.addRenderEpoch?.({inNode:u[0].element.node.parent?.id,flexValue:u[0].element.props.flexGrow??0,tokenBudget:e.remainingTokenBudget,reservedTokens:d,elements:u.map((v,b)=>({id:v.element.node.id,tokenBudget:g[b].tokenBudget}))}),await Promise.all(u.map(async({element:v,promptElementInstance:b},E)=>{let _=await VMe(v,()=>b.prepare?.(g[E],r,i));v.node.setState(_)}));let y=await Promise.all(u.map(async({element:v,promptElementInstance:b},E)=>{let _=g[E];return await VMe(v,()=>b.render(v.node.getState(),_,r,i))}));for(let[v,{element:b,promptElementInstance:E}]of u.entries()){let _=g[v],k=y[v];if(!k)continue;let P=await this._processPromptRenderPiece(new rT(_.tokenBudget,this._endpoint),b,E,k,r,i);E instanceof La.Expandable&&this._growables.push({initialConsume:P,elem:b.node}),e.consume(P)}}}async _processPromptRenderPiece(e,n,r,i,o,a){let l=$Me(i),c=new rT(e.tokenBudget,this._endpoint),{tokensConsumed:u}=await EBt(this._tokenizer,n,r,l);return c.consume(u),await this._handlePromptChildren(n,l,c,o,a),c.consumed}async renderElementJSON(e){return await this._processPromptPieces(new rT(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],void 0,e),{node:this._root.toJSON()}}async render(e,n){let r=await this.renderRaw(e,n);return{...r,messages:(0,cR.toMode)(this._tokenizer.mode,r.messages)}}async renderRaw(e,n){await this._processPromptPieces(new rT(this._endpoint.modelMaxPromptTokens,this._endpoint),[{node:this._root,ctor:this._ctor,props:this._props,children:[],path:[this._ctor]}],e,n);let{container:r,allMetadata:i,removed:o}=await this._getFinalElementTree(this._endpoint.modelMaxPromptTokens,n);this.tracer?.didMaterializeTree?.({budget:this._endpoint.modelMaxPromptTokens,renderedTree:{container:r,removed:o,budget:this._endpoint.modelMaxPromptTokens},tokenizer:this._tokenizer,renderTree:s(m=>this._getFinalElementTree(m,void 0).then(h=>({...h,budget:m})),"renderTree")});let a=[...r.toChatMessages()],l=await r.tokenCount(this._tokenizer),c=[...r.allMetadata()],u=new Set,d=c.map(m=>{if(!(m instanceof cA))return;let h=m.reference,g="variableName"in h.anchor;if(g&&!u.has(h.anchor.variableName))return u.add(h.anchor.variableName),h;if(!g)return h}).filter(QG),p=i.map(m=>{if(!(m instanceof cA)||c.includes(m))return;let h=m.reference,g="variableName"in h.anchor;if(g&&!u.has(h.anchor.variableName))return u.add(h.anchor.variableName),h;if(!g)return h}).filter(QG);return{metadata:{get:s(m=>c.find(h=>h instanceof m),"get"),getAll:s(m=>c.filter(h=>h instanceof m),"getAll")},messages:a,hasIgnoredFiles:this._ignoredFiles.length>0,tokenCount:l,references:d,omittedReferences:p}}async _getFinalElementTree(e,n){let r=this._root.materialize(),i=[...r.allMetadata()],o=[{limit:e,id:this._root.id},...this._tokenLimits],a=0;for(let l=o.length-1;l>=0;l--){let c=o[l];if(c.limit>e)continue;let u=r.findById(c.id);if(!u)continue;let d=await u.tokenCount(this._tokenizer);if(d<c.limit&&!await this._grow(u,d,c.limit,n))continue;let p=await u.tokenCount(this._tokenizer);for(;p>c.limit;){let m=await u.baseMessageTokenCount(this._tokenizer);do for(let h of u.removeLowestPriorityChild()){a++;let g=h.upperBoundTokenCount(this._tokenizer);p-=typeof g=="number"?g:await g}while(p-m>c.limit);p=await u.tokenCount(this._tokenizer)}}return{container:r,allMetadata:i,removed:a}}async _grow(e,n,r,i){if(!this._growables.length)return!1;for(let o of this._growables){if(!e.findById(o.elem.id))continue;let a=o.elem.getObj();if(!(a instanceof La.Expandable))throw new Error("unreachable: expected growable");let l=new MG(null,0,o.elem.id),c=new rT(r-n+o.initialConsume,this._endpoint),u=await this._processPromptRenderPiece(c,{node:l,ctor:this._ctor,props:{},children:[],path:[this._ctor]},a,await a.render(void 0,{tokenBudget:c.tokenBudget,endpoint:this._endpoint,countTokens:s((m,h)=>this._tokenizer.tokenLength(typeof m=="string"?{type:cR.Raw.ChatCompletionContentPartKind.Text,text:m}:m,h),"countTokens")}),void 0,i),d=l.materialize();if(!e.replaceNode(o.elem.id,d))throw new Error("unreachable: could not find old element to replace");if(n-=o.initialConsume,n+=u,n>=r)break}return!0}_handlePromptChildren(e,n,r,i,o){if(e.ctor===La.TextChunk){this._handleExtrinsicTextChunkChildren(e.node,e.node,e.props,n);return}let a=[];for(let l of n){if(l.kind==="literal"){e.node.appendStringChild(l.value,e.props.priority??Number.MAX_SAFE_INTEGER);continue}if(l.kind==="intrinsic"){this._handleIntrinsic(e.node,l.name,{priority:e.props.priority??Number.MAX_SAFE_INTEGER,...l.props},FG(l.children));continue}let c=e.node.createChild();a.push({node:c,ctor:l.ctor,props:l.props,children:l.children,path:[...e.path,l.ctor]})}return this._processPromptPieces(r,a,i,o)}_handleIntrinsic(e,n,r,i,o){switch(n){case"meta":return this._handleIntrinsicMeta(e,r,i);case"br":return this._handleIntrinsicLineBreak(e,r,i,r.priority,o);case"usedContext":return this._handleIntrinsicUsedContext(e,r,i);case"references":return this._handleIntrinsicReferences(e,r,i);case"ignoredFiles":return this._handleIntrinsicIgnoredFiles(e,r,i);case"elementJSON":return this._handleIntrinsicElementJSON(e,r.data);case"cacheBreakpoint":return this._handleIntrinsicCacheBreakpoint(e,r,i,o)}throw new Error(`Unknown intrinsic element ${n}!`)}_handleIntrinsicCacheBreakpoint(e,n,r,i){if(r.length>0)throw new Error("<cacheBreakpoint /> must not have children!");e.addCacheBreakpoint(n,i)}_handleIntrinsicMeta(e,n,r){if(r.length>0)throw new Error("<meta /> must not have children!");n.local?e.addMetadata(n.value):this._root.addMetadata(n.value)}_handleIntrinsicLineBreak(e,n,r,i,o){if(r.length>0)throw new Error("<br /> must not have children!");e.appendLineBreak(i??Number.MAX_SAFE_INTEGER,o)}_handleIntrinsicElementJSON(e,n){let r=e.appendPieceJSON(n.node);if(this.tracer?.includeInEpoch)for(let i of r.elements())this.tracer.includeInEpoch({id:i.id,tokenBudget:0})}_handleIntrinsicUsedContext(e,n,r){if(r.length>0)throw new Error("<usedContext /> must not have children!");this._usedContext.push(...n.value)}_handleIntrinsicReferences(e,n,r){if(r.length>0)throw new Error("<reference /> must not have children!");for(let i of n.value)e.addMetadata(new cA(i))}_handleIntrinsicIgnoredFiles(e,n,r){if(r.length>0)throw new Error("<ignoredFiles /> must not have children!");this._ignoredFiles.push(...n.value)}_handleExtrinsicTextChunkChildren(e,n,r,i){let o=[],a=[];for(let l of i){if(l.kind==="extrinsic")throw new Error("TextChunk cannot have extrinsic children!");if(l.kind==="literal"&&o.push(l.value),l.kind==="intrinsic")if(l.name==="br")o.push(`
`);else if(l.name==="references")for(let c of l.props.value)a.push(new cA(c));else this._handleIntrinsic(e,l.name,l.props,FG(l.children),n.childIndex)}e.appendStringChild(o.join(""),r?.priority??Number.MAX_SAFE_INTEGER,a,n.childIndex,!0)}};uR.PromptRenderer=Vue;async function EBt(t,e,n,r){let i=0;if((0,La.isChatMessagePromptElement)(n)){let o={role:e.props.role,content:[],...e.props.name?{name:e.props.name}:void 0,...e.props.toolCalls?{toolCalls:e.props.toolCalls}:void 0,...e.props.toolCallId?{toolCallId:e.props.toolCallId}:void 0};i+=await t.countMessageTokens((0,cR.toMode)(t.mode,o))}for(let o of r)o.kind==="literal"&&(i+=await t.tokenLength({type:cR.Raw.ChatCompletionContentPartKind.Text,text:o.value}));return{tokensConsumed:i}}s(EBt,"computeTokensConsumedByLiterals");function $Me(t,e=[]){return typeof t>"u"||typeof t=="boolean"?[]:(typeof t=="string"||typeof t=="number"?e.push(new Yue(String(t))):IBt(t)?FG(t.children,e):TBt(t)?FG(t,e):typeof t.ctor=="string"?e.push(new $ue(t.ctor,t.props,t.children)):e.push(new zue(t.ctor,t.props,t.children)),e)}s($Me,"flattenAndReduce");function FG(t,e=[]){for(let n of t)$Me(n,e);return e}s(FG,"flattenAndReduceArr");var $ue=class{static{s(this,"IntrinsicPromptPiece")}name;props;children;kind="intrinsic";constructor(e,n,r){this.name=e,this.props=n,this.children=r}},zue=class{static{s(this,"ExtrinsicPromptPiece")}ctor;props;children;kind="extrinsic";constructor(e,n,r){this.ctor=e,this.props=n,this.children=r}},Yue=class{static{s(this,"LiteralPromptPiece")}value;priority;kind="literal";constructor(e,n){this.value=e,this.priority=n}},rT=class{static{s(this,"PromptSizingContext")}tokenBudget;endpoint;_consumed=0;constructor(e,n){this.tokenBudget=e,this.endpoint=n}get consumed(){return this._consumed>this.tokenBudget?this.tokenBudget:this._consumed}get remainingTokenBudget(){return Math.max(0,this.tokenBudget-this._consumed)}consume(e){this._consumed+=e}},MG=class t{static{s(this,"PromptTreeElement")}parent;childIndex;id;static _nextId=0;static fromJSON(e,n,r){let i=new t(null,e);switch(i._metadata=n.references?.map(o=>new cA(Xue.PromptReference.fromJSON(o)))??[],i._children=n.children.map((o,a)=>{switch(o.type){case 1:return t.fromJSON(a,o,r);case 2:return d9.fromJSON(i,a,o);default:}}).filter(QG),n.ctor){case 1:i._objFlags=n.flags??0,i._obj=new La.BaseChatMessage(n.props);break;case 2:{if(n.keepWithId!==void 0){let o=r.get(n.keepWithId);o||(o=(0,La.useKeepWith)(),r.set(n.keepWithId,o)),i._obj=new o(n.props||{})}else i._obj=new La.LogicalWrapper(n.props||{});i._objFlags=n.flags??0;break}case 3:i._obj=new La.Image(n.props);break;default:}return i}kind=1;_obj=null;_state=void 0;_children=[];_metadata=[];_objFlags=0;constructor(e=null,n,r=t._nextId++){this.parent=e,this.childIndex=n,this.id=r}setObj(e){this._obj=e,this._obj instanceof La.LegacyPrioritization&&(this._objFlags|=1),this._obj instanceof La.Chunk&&(this._objFlags|=2),this._obj instanceof La.IfEmpty&&(this._objFlags|=8),this._obj.props.passPriority&&(this._objFlags|=4)}getObj(){return this._obj}setState(e){this._state=e}getState(){return this._state}createChild(){let e=new t(this,this._children.length);return this._children.push(e),e}appendPieceJSON(e){let n=t.fromJSON(this._children.length,e,new Map);return this._children.push(n),n}appendStringChild(e,n,r,i=this._children.length,o=!1){this._children.push(new d9(this,i,e,n,r,o))}appendLineBreak(e,n=this._children.length){this._children.push(new d9(this,n,`
`,e))}toJSON(){let e={type:1,ctor:2,ctorName:this._obj?.constructor.name,children:this._children.slice().sort((n,r)=>n.childIndex-r.childIndex).map(n=>n.toJSON()).filter(QG),props:{},references:this._metadata.filter(n=>n instanceof cA).map(n=>n.reference.toJSON())};if(this._obj&&(e.props=jue(this._obj.props,bBt.jsonRetainedProps)),this._obj instanceof La.BaseChatMessage)e.ctor=1,Object.assign(e.props,jue(this._obj.props,["role","name","toolCalls","toolCallId"]));else{if(this._obj instanceof La.Image)return{...e,ctor:3,props:{...e.props,...jue(this._obj.props,["src","detail"])}};this._obj instanceof La.AbstractKeepWith&&(e.keepWithId=this._obj.id)}return this._objFlags!==0&&(e.flags=this._objFlags),e}materialize(e){if(this._children.sort((n,r)=>n.childIndex-r.childIndex),this._obj instanceof La.Image)return new u9.MaterializedChatMessageImage(e,this.id,this._obj.props.src,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,0,this._obj.props.detail??void 0);if(this._obj instanceof La.BaseChatMessage){if(this._obj.props.role===void 0||typeof this._obj.props.role!="number")throw new Error("Invalid ChatMessage!");return new u9.MaterializedChatMessage(e,this.id,this._obj.props.role,this._obj.props.name,this._obj instanceof La.AssistantMessage?this._obj.props.toolCalls:void 0,this._obj instanceof La.ToolMessage?this._obj.props.toolCallId:void 0,this._obj.props.priority??Number.MAX_SAFE_INTEGER,this._metadata,n=>this._children.map(r=>r.materialize(n)))}else{let n=new u9.GenericMaterializedContainer(e,this.id,this._obj?.constructor.name,this._obj?.props.priority??(this._obj?.props.passPriority?0:Number.MAX_SAFE_INTEGER),r=>this._children.map(i=>i.materialize(r)),this._metadata,this._objFlags);return this._obj instanceof La.AbstractKeepWith&&(n.keepWithId=this._obj.id),n}}addMetadata(e){this._metadata.push(e)}addCacheBreakpoint(e,n=this._children.length){if(!(this._obj instanceof La.BaseChatMessage))throw new Error("Cache breakpoints may only be direct children of chat messages");this._children.push(new Kue({type:cR.Raw.ChatCompletionContentPartKind.CacheBreakpoint,cacheType:e.type},n))}*elements(){yield this;for(let e of this._children)e instanceof t&&(yield*e.elements())}},Kue=class{static{s(this,"PromptCacheBreakpoint")}part;childIndex;constructor(e,n){this.part=e,this.childIndex=n}toJSON(){}materialize(e){return new u9.MaterializedChatMessageBreakpoint(e,this.part)}},d9=class t{static{s(this,"PromptText")}parent;childIndex;text;priority;metadata;lineBreakBefore;static fromJSON(e,n,r){return new t(e,n,r.text,r.priority,r.references?.map(i=>new cA(Xue.PromptReference.fromJSON(i))),r.lineBreakBefore)}kind=2;constructor(e,n,r,i,o,a=!1){this.parent=e,this.childIndex=n,this.text=r,this.priority=i,this.metadata=o,this.lineBreakBefore=a}collectLeafs(e){e.push(this)}materialize(e){let n=this.lineBreakBefore?1:this.childIndex===0?2:0;return new u9.MaterializedChatMessageTextChunk(e,this.text,this.priority??Number.MAX_SAFE_INTEGER,this.metadata||[],n)}toJSON(){return{type:2,priority:this.priority,text:this.text,references:this.metadata?.filter(e=>e instanceof cA).map(e=>e.reference.toJSON()),lineBreakBefore:this.lineBreakBefore}}};function IBt(t){return(typeof t.ctor=="function"&&t.ctor.isFragment)??!1}s(IBt,"isFragmentCtor");function QG(t){return t!==void 0}s(QG,"isDefined");var Jue=class extends Xue.PromptMetadata{static{s(this,"InternalMetadata")}},cA=class extends Jue{static{s(this,"ReferenceMetadata")}reference;constructor(e){super(),this.reference=e}};function TBt(t){return!!t&&typeof t[Symbol.iterator]=="function"}s(TBt,"isIterable");function jue(t,e){let n={};for(let r of e)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}s(jue,"pickProps");function zMe(t){return t.map(e=>typeof e=="string"?e:e?e.name||"<anonymous>":String(e)).join(" > ")}s(zMe,"atPath");var jMe=new WeakSet;async function VMe(t,e){try{return await e()}catch(n){throw n instanceof Error&&!jMe.has(n)&&n.constructor.name!=="CancellationError"&&(jMe.add(n),n.message+=` (at tsx element ${zMe(t.path)})`),n}}s(VMe,"annotateError")});var YMe=H(OG=>{"use strict";f();Object.defineProperty(OG,"__esModule",{value:!0});OG.VSCodeTokenizer=void 0;var ede=ib(),tde=class{static{s(this,"VSCodeTokenizer")}countTokens;mode=ede.OutputMode.VSCode;constructor(e,n){if(this.countTokens=e,n!==ede.OutputMode.VSCode)throw new Error("`mode` must be set to vscode when using vscode.LanguageModelChat as the tokenizer")}async tokenLength(e,n){return e.type===ede.Raw.ChatCompletionContentPartKind.Text?this.countTokens(e.text,n):Promise.resolve(0)}async countMessageTokens(e){return this.countTokens(e)}};OG.VSCodeTokenizer=tde});var KMe=H(dR=>{"use strict";f();Object.defineProperty(dR,"__esModule",{value:!0});dR.tracerCss=dR.tracerSrc=void 0;dR.tracerSrc='"use strict";(()=>{var $,m,se,Ue,w,re,le,q,X,G,K,Ae,D={},ce=[],Re=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,J=Array.isArray;function E(t,e){for(var n in e)t[n]=e[n];return t}function ue(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function l(t,e,n){var o,r,_,c={};for(_ in e)_=="key"?o=e[_]:_=="ref"?r=e[_]:c[_]=e[_];if(arguments.length>2&&(c.children=arguments.length>3?$.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(_ in t.defaultProps)c[_]===void 0&&(c[_]=t.defaultProps[_]);return R(t,c,o,r,null)}function R(t,e,n,o,r){var _={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:r??++se,__i:-1,__u:0};return r==null&&m.vnode!=null&&m.vnode(_),_}function N(t){return t.children}function B(t,e){this.props=t,this.context=e}function I(t,e){if(e==null)return t.__?I(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?I(t):null}function de(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return de(t)}}function ie(t){(!t.__d&&(t.__d=!0)&&w.push(t)&&!O.__r++||re!==m.debounceRendering)&&((re=m.debounceRendering)||le)(O)}function O(){var t,e,n,o,r,_,c,a;for(w.sort(q);t=w.shift();)t.__d&&(e=w.length,o=void 0,_=(r=(n=t).__v).__e,c=[],a=[],n.__P&&((o=E({},r)).__v=r.__v+1,m.vnode&&m.vnode(o),Q(n.__P,o,r,n.__n,n.__P.namespaceURI,32&r.__u?[_]:null,c,_??I(r),!!(32&r.__u),a),o.__v=r.__v,o.__.__k[o.__i]=o,me(c,o,a),o.__e!=_&&de(o)),w.length>e&&w.sort(q));O.__r=0}function pe(t,e,n,o,r,_,c,a,u,s,p){var i,f,d,b,x,C=o&&o.__k||ce,h=e.length;for(n.__d=u,Be(n,e,C),u=n.__d,i=0;i<h;i++)(d=n.__k[i])!=null&&(f=d.__i===-1?D:C[d.__i]||D,d.__i=i,Q(t,d,f,r,_,c,a,u,s,p),b=d.__e,d.ref&&f.ref!=d.ref&&(f.ref&&Y(f.ref,null,d),p.push(d.ref,d.__c||b,d)),x==null&&b!=null&&(x=b),65536&d.__u||f.__k===d.__k?u=fe(d,u,t):typeof d.type=="function"&&d.__d!==void 0?u=d.__d:b&&(u=b.nextSibling),d.__d=void 0,d.__u&=-196609);n.__d=u,n.__e=x}function Be(t,e,n){var o,r,_,c,a,u=e.length,s=n.length,p=s,i=0;for(t.__k=[],o=0;o<u;o++)(r=e[o])!=null&&typeof r!="boolean"&&typeof r!="function"?(c=o+i,(r=t.__k[o]=typeof r=="string"||typeof r=="number"||typeof r=="bigint"||r.constructor==String?R(null,r,null,null,null):J(r)?R(N,{children:r},null,null,null):r.constructor===void 0&&r.__b>0?R(r.type,r.props,r.key,r.ref?r.ref:null,r.__v):r).__=t,r.__b=t.__b+1,_=null,(a=r.__i=Oe(r,n,c,p))!==-1&&(p--,(_=n[a])&&(_.__u|=131072)),_==null||_.__v===null?(a==-1&&i--,typeof r.type!="function"&&(r.__u|=65536)):a!==c&&(a==c-1?i--:a==c+1?i++:(a>c?i--:i++,r.__u|=65536))):r=t.__k[o]=null;if(p)for(o=0;o<s;o++)(_=n[o])!=null&&!(131072&_.__u)&&(_.__e==t.__d&&(t.__d=I(_)),he(_,_))}function fe(t,e,n){var o,r;if(typeof t.type=="function"){for(o=t.__k,r=0;o&&r<o.length;r++)o[r]&&(o[r].__=t,e=fe(o[r],e,n));return e}t.__e!=e&&(e&&t.type&&!n.contains(e)&&(e=I(t)),n.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType===8);return e}function Oe(t,e,n,o){var r=t.key,_=t.type,c=n-1,a=n+1,u=e[n];if(u===null||u&&r==u.key&&_===u.type&&!(131072&u.__u))return n;if(o>(u!=null&&!(131072&u.__u)?1:0))for(;c>=0||a<e.length;){if(c>=0){if((u=e[c])&&!(131072&u.__u)&&r==u.key&&_===u.type)return c;c--}if(a<e.length){if((u=e[a])&&!(131072&u.__u)&&r==u.key&&_===u.type)return a;a++}}return-1}function _e(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Re.test(e)?n:n+"px"}function A(t,e,n,o,r){var _;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||_e(t.style,e,"");if(n)for(e in n)o&&n[e]===o[e]||_e(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")_=e!==(e=e.replace(/(PointerCapture)$|Capture$/i,"$1")),e=e.toLowerCase()in t||e==="onFocusOut"||e==="onFocusIn"?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+_]=n,n?o?n.u=o.u:(n.u=X,t.addEventListener(e,_?K:G,_)):t.removeEventListener(e,_?K:G,_);else{if(r=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!=="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function ae(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=X++;else if(e.t<n.u)return;return n(m.event?m.event(e):e)}}}function Q(t,e,n,o,r,_,c,a,u,s){var p,i,f,d,b,x,C,h,v,H,M,P,F,oe,z,j,k=e.type;if(e.constructor!==void 0)return null;128&n.__u&&(u=!!(32&n.__u),_=[a=e.__e=n.__e]),(p=m.__b)&&p(e);e:if(typeof k=="function")try{if(h=e.props,v="prototype"in k&&k.prototype.render,H=(p=k.contextType)&&o[p.__c],M=p?H?H.props.value:p.__:o,n.__c?C=(i=e.__c=n.__c).__=i.__E:(v?e.__c=i=new k(h,M):(e.__c=i=new B(h,M),i.constructor=k,i.render=We),H&&H.sub(i),i.props=h,i.state||(i.state={}),i.context=M,i.__n=o,f=i.__d=!0,i.__h=[],i._sb=[]),v&&i.__s==null&&(i.__s=i.state),v&&k.getDerivedStateFromProps!=null&&(i.__s==i.state&&(i.__s=E({},i.__s)),E(i.__s,k.getDerivedStateFromProps(h,i.__s))),d=i.props,b=i.state,i.__v=e,f)v&&k.getDerivedStateFromProps==null&&i.componentWillMount!=null&&i.componentWillMount(),v&&i.componentDidMount!=null&&i.__h.push(i.componentDidMount);else{if(v&&k.getDerivedStateFromProps==null&&h!==d&&i.componentWillReceiveProps!=null&&i.componentWillReceiveProps(h,M),!i.__e&&(i.shouldComponentUpdate!=null&&i.shouldComponentUpdate(h,i.__s,M)===!1||e.__v===n.__v)){for(e.__v!==n.__v&&(i.props=h,i.state=i.__s,i.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(U){U&&(U.__=e)}),P=0;P<i._sb.length;P++)i.__h.push(i._sb[P]);i._sb=[],i.__h.length&&c.push(i);break e}i.componentWillUpdate!=null&&i.componentWillUpdate(h,i.__s,M),v&&i.componentDidUpdate!=null&&i.__h.push(function(){i.componentDidUpdate(d,b,x)})}if(i.context=M,i.props=h,i.__P=t,i.__e=!1,F=m.__r,oe=0,v){for(i.state=i.__s,i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),z=0;z<i._sb.length;z++)i.__h.push(i._sb[z]);i._sb=[]}else do i.__d=!1,F&&F(e),p=i.render(i.props,i.state,i.context),i.state=i.__s;while(i.__d&&++oe<25);i.state=i.__s,i.getChildContext!=null&&(o=E(E({},o),i.getChildContext())),v&&!f&&i.getSnapshotBeforeUpdate!=null&&(x=i.getSnapshotBeforeUpdate(d,b)),pe(t,J(j=p!=null&&p.type===N&&p.key==null?p.props.children:p)?j:[j],e,n,o,r,_,c,a,u,s),i.base=e.__e,e.__u&=-161,i.__h.length&&c.push(i),C&&(i.__E=i.__=null)}catch(U){if(e.__v=null,u||_!=null){for(e.__u|=u?160:32;a&&a.nodeType===8&&a.nextSibling;)a=a.nextSibling;_[_.indexOf(a)]=null,e.__e=a}else e.__e=n.__e,e.__k=n.__k;m.__e(U,e,n)}else _==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=$e(n.__e,e,n,o,r,_,c,u,s);(p=m.diffed)&&p(e)}function me(t,e,n){e.__d=void 0;for(var o=0;o<n.length;o++)Y(n[o],n[++o],n[++o]);m.__c&&m.__c(e,t),t.some(function(r){try{t=r.__h,r.__h=[],t.some(function(_){_.call(r)})}catch(_){m.__e(_,r.__v)}})}function $e(t,e,n,o,r,_,c,a,u){var s,p,i,f,d,b,x,C=n.props,h=e.props,v=e.type;if(v==="svg"?r="http://www.w3.org/2000/svg":v==="math"?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),_!=null){for(s=0;s<_.length;s++)if((d=_[s])&&"setAttribute"in d==!!v&&(v?d.localName===v:d.nodeType===3)){t=d,_[s]=null;break}}if(t==null){if(v===null)return document.createTextNode(h);t=document.createElementNS(r,v,h.is&&h),a&&(m.__m&&m.__m(e,_),a=!1),_=null}if(v===null)C===h||a&&t.data===h||(t.data=h);else{if(_=_&&$.call(t.childNodes),C=n.props||D,!a&&_!=null)for(C={},s=0;s<t.attributes.length;s++)C[(d=t.attributes[s]).name]=d.value;for(s in C)if(d=C[s],s!="children"){if(s=="dangerouslySetInnerHTML")i=d;else if(!(s in h)){if(s=="value"&&"defaultValue"in h||s=="checked"&&"defaultChecked"in h)continue;A(t,s,null,d,r)}}for(s in h)d=h[s],s=="children"?f=d:s=="dangerouslySetInnerHTML"?p=d:s=="value"?b=d:s=="checked"?x=d:a&&typeof d!="function"||C[s]===d||A(t,s,d,C[s],r);if(p)a||i&&(p.__html===i.__html||p.__html===t.innerHTML)||(t.innerHTML=p.__html),e.__k=[];else if(i&&(t.innerHTML=""),pe(t,J(f)?f:[f],e,n,o,v==="foreignObject"?"http://www.w3.org/1999/xhtml":r,_,c,_?_[0]:n.__k&&I(n,0),a,u),_!=null)for(s=_.length;s--;)ue(_[s]);a||(s="value",v==="progress"&&b==null?t.removeAttribute("value"):b!==void 0&&(b!==t[s]||v==="progress"&&!b||v==="option"&&b!==C[s])&&A(t,s,b,C[s],r),s="checked",x!==void 0&&x!==t[s]&&A(t,s,x,C[s],r))}return t}function Y(t,e,n){try{if(typeof t=="function"){var o=typeof t.__u=="function";o&&t.__u(),o&&e==null||(t.__u=t(e))}else t.current=e}catch(r){m.__e(r,n)}}function he(t,e,n){var o,r;if(m.unmount&&m.unmount(t),(o=t.ref)&&(o.current&&o.current!==t.__e||Y(o,null,e)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(_){m.__e(_,e)}o.base=o.__P=null}if(o=t.__k)for(r=0;r<o.length;r++)o[r]&&he(o[r],e,n||typeof t.type!="function");n||ue(t.__e),t.__c=t.__=t.__e=t.__d=void 0}function We(t,e,n){return this.constructor(t,n)}function ve(t,e,n){var o,r,_,c;m.__&&m.__(t,e),r=(o=typeof n=="function")?null:n&&n.__k||e.__k,_=[],c=[],Q(e,t=(!o&&n||e).__k=l(N,null,[t]),r||D,D,e.namespaceURI,!o&&n?[n]:r?null:e.firstChild?$.call(e.childNodes):null,_,!o&&n?n:r?r.__e:e.firstChild,o,c),me(_,t,c)}$=ce.slice,m={__e:function(t,e,n,o){for(var r,_,c;e=e.__;)if((r=e.__c)&&!r.__)try{if((_=r.constructor)&&_.getDerivedStateFromError!=null&&(r.setState(_.getDerivedStateFromError(t)),c=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,o||{}),c=r.__d),c)return r.__E=r}catch(a){t=a}throw t}},se=0,Ue=function(t){return t!=null&&t.constructor==null},B.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=E({},this.state),typeof t=="function"&&(t=t(E({},n),this.props)),t&&E(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),ie(this))},B.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),ie(this))},B.prototype.render=N,w=[],le=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,q=function(t,e){return t.__v.__b-e.__v.__b},O.__r=0,X=0,G=ae(!1),K=ae(!0),Ae=0;var L,g,Z,ge,V=0,Ee=[],y=m,be=y.__b,ye=y.__r,Ce=y.diffed,xe=y.__c,ke=y.unmount,Te=y.__;function te(t,e){y.__h&&y.__h(g,t,V||e),V=0;var n=g.__H||(g.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function S(t){return V=1,Ve(Ne,t)}function Ve(t,e,n){var o=te(L++,2);if(o.t=t,!o.__c&&(o.__=[n?n(e):Ne(void 0,e),function(a){var u=o.__N?o.__N[0]:o.__[0],s=o.t(u,a);u!==s&&(o.__N=[s,o.__[1]],o.__c.setState({}))}],o.__c=g,!g.u)){var r=function(a,u,s){if(!o.__c.__H)return!0;var p=o.__c.__H.__.filter(function(f){return!!f.__c});if(p.every(function(f){return!f.__N}))return!_||_.call(this,a,u,s);var i=!1;return p.forEach(function(f){if(f.__N){var d=f.__[0];f.__=f.__N,f.__N=void 0,d!==f.__[0]&&(i=!0)}}),!(!i&&o.__c.props===a)&&(!_||_.call(this,a,u,s))};g.u=!0;var _=g.shouldComponentUpdate,c=g.componentWillUpdate;g.componentWillUpdate=function(a,u,s){if(this.__e){var p=_;_=void 0,r(a,u,s),_=p}c&&c.call(this,a,u,s)},g.shouldComponentUpdate=r}return o.__N||o.__}function Se(t,e){var n=te(L++,3);!y.__s&&Ie(n.__H,e)&&(n.__=t,n.i=e,g.__H.__h.push(n))}function we(t){return V=5,je(function(){return{current:t}},[])}function je(t,e){var n=te(L++,7);return Ie(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function qe(){for(var t;t=Ee.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(W),t.__H.__h.forEach(ee),t.__H.__h=[]}catch(e){t.__H.__h=[],y.__e(e,t.__v)}}y.__b=function(t){g=null,be&&be(t)},y.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Te&&Te(t,e)},y.__r=function(t){ye&&ye(t),L=0;var e=(g=t.__c).__H;e&&(Z===g?(e.__h=[],g.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.i=n.__N=void 0})):(e.__h.forEach(W),e.__h.forEach(ee),e.__h=[],L=0)),Z=g},y.diffed=function(t){Ce&&Ce(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Ee.push(e)!==1&&ge===y.requestAnimationFrame||((ge=y.requestAnimationFrame)||Ge)(qe)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.i=void 0})),Z=g=null},y.__c=function(t,e){e.some(function(n){try{n.__h.forEach(W),n.__h=n.__h.filter(function(o){return!o.__||ee(o)})}catch(o){e.some(function(r){r.__h&&(r.__h=[])}),e=[],y.__e(o,n.__v)}}),xe&&xe(t,e)},y.unmount=function(t){ke&&ke(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{W(o)}catch(r){e=r}}),n.__H=void 0,e&&y.__e(e,n.__v))};var Me=typeof requestAnimationFrame=="function";function Ge(t){var e,n=function(){clearTimeout(o),Me&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,100);Me&&(e=requestAnimationFrame(n))}function W(t){var e=g,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),g=e}function ee(t){var e=g;t.__c=t.__(),g=e}function Ie(t,e){return!t||t.length!==e.length||e.some(function(n,o){return n!==t[o]})}function Ne(t,e){return typeof e=="function"?e(t):e}function He(t,e){let n=we(void 0),o=(...r)=>{n.current&&clearTimeout(n.current),n.current=window.setTimeout(()=>{t(...r)},e)};return Se(()=>()=>{n.current&&clearTimeout(n.current)},[]),o}var Ke=new Intl.NumberFormat("en-US"),T=({value:t})=>l(N,null,Ke.format(t));var ne=[{bg:"#c1e7ff",fg:"#000"},{bg:"#abd2ec",fg:"#000"},{bg:"#94bed9",fg:"#000"},{bg:"#7faac6",fg:"#000"},{bg:"#6996b3",fg:"#fff"},{bg:"#5383a1",fg:"#fff"},{bg:"#3d708f",fg:"#fff"},{bg:"#255e7e",fg:"#fff"}],Xe=({scoreBy:t,nodes:e,epoch:n})=>{if(e.length===0)return null;let o=t;if(t.field!=="tokens"){let r=e[0][t.field],_=e[0][t.field];for(let c=1;c<e.length;c++)r=Math.max(r,e[c][t.field]),_=Math.max(_,e[c][t.field]);o={field:t.field,max:r,min:_}}return l("div",{className:"node-children"},e.map((r,_)=>r.type===2?l(Je,{scoreBy:o,key:_,node:r}):l(Le,{scoreBy:o,key:_,node:r,epoch:n})))},Fe=({node:t})=>l("div",{className:"node-stats"},"Used Tokens: ",l(T,{value:t.tokens})," / ","Priority:"," ",t.priority===Number.MAX_SAFE_INTEGER?"MAX":l(T,{value:t.priority})),De=({scoreBy:t,node:e,children:n,...o})=>{let r=0;if(t.max!==t.min){let _=(e[t.field]-t.min)/(t.max-t.min);r=Math.round((ne.length-1)*_)}return l("div",{...o,className:`node ${o.className||""}`,style:{backgroundColor:ne[r].bg,color:ne[r].fg}},n)},Je=({scoreBy:t,node:e})=>l(De,{node:e,scoreBy:t,tabIndex:0,className:"node-text"},l(Fe,{node:e}),l("div",{className:"node-content"},e.value)),Le=({scoreBy:t,node:e,epoch:n})=>{let[o,r]=S(!1),_=EPOCHS.findIndex(i=>i.elements.some(f=>f.id===e.id));if(_===void 0)throw new Error(`epoch not found for ${e.id}`);let c=EPOCHS[_],a=EPOCHS.at(n),u=c.elements.find(i=>i.id===e.id).tokenBudget,s=e.type===1?e.name||e.role.slice(0,1).toUpperCase()+e.role.slice(1)+"Message":e.name,p=_===n?"new-in-epoch":n<_?"before-epoch":"";return l(De,{node:e,scoreBy:t,className:p},l(Fe,{node:e}),l("div",{className:"node-content node-toggler",onClick:()=>r(i=>!i)},l("span",null,a?.inNode===e.id?"\\u{1F3C3} ":"",`<${s}>`),l("span",{className:"indicator"},o?"[+]":"[-]")),n===_&&l("div",{className:"node-stats"},"Token Budget: ",l(T,{value:u})),a?.inNode===e.id&&l("div",{className:"node-stats"},"Rendering flexGrow=",a.flexValue,l("br",null),l("br",null),"Splitting"," ",a.reservedTokens?`${a.tokenBudget} - ${a.reservedTokens} (reserved) = `:"",l(T,{value:a.tokenBudget})," tokens among ",a.elements.length," ","elements"),!o&&l(Xe,{nodes:e.children,scoreBy:t,epoch:n}))},Pe=({scoreBy:t,node:e,epoch:n})=>{let o;return t==="tokens"?o={field:"tokens",max:e.tokens,min:0}:o={field:"priority",max:e.priority,min:e.priority},l(Le,{scoreBy:o,node:e,epoch:n})};var ze=({label:t,value:e,onChange:n,min:o,max:r})=>{let _=a=>{n(a.target.valueAsNumber)},c=`number-slider-${Math.random()}`;return l("div",{className:"controls-slider"},l("label",{htmlFor:c},t),l("input",{id:c,type:"range",min:o,max:r,value:e,onInput:_}),l("input",{type:"number",min:o,value:e,onInput:_,onChange:_}))},Qe=({scoreBy:t,onScoreByChange:e})=>{let n=o=>{let r=o.target.value;e(r)};return l("div",{className:"controls-scoreby"},"Visualize by",l("label",null,l("input",{type:"radio",name:"scoreBy",value:"tokens",checked:t==="tokens",onChange:n}),"Tokens"),l("label",null,l("input",{type:"radio",name:"scoreBy",value:"priority",checked:t==="priority",onChange:n}),"Priority"))},Ye=()=>{let[t,e]=S(DEFAULT_TOKENS),[n,o]=S(EPOCHS.length),[r,_]=S(DEFAULT_MODEL),[c,a]=S("tokens"),[u,s]=S("epoch"),p=He(async f=>{if(f===DEFAULT_TOKENS)return DEFAULT_MODEL;let b=await(await fetch(`${SERVER_ADDRESS}regen?n=${f}`)).json();_(b)},100),i=f=>{e(f),p(f),o(EPOCHS.length)};return l("div",{className:"app"},l("div",{className:"controls"},l("div",{className:"tabs"},l("div",{className:`tab ${u==="epoch"?"active":""}`,onClick:()=>s("epoch")},"View Order"),l("div",{className:`tab ${u==="tokens"?"active":""}`,onClick:()=>s("tokens")},"Change Token Budget")),l("div",{className:`tab-content ${u==="epoch"?"active":""}`},l(ze,{label:"Render Epoch",value:n,onChange:o,min:0,max:EPOCHS.length})),l("div",{className:`tab-content ${u==="tokens"?"active":""}`},l(ze,{label:"Token Budget",value:t,onChange:i,min:0,max:DEFAULT_TOKENS*2}))),l("div",{className:"control-description"},u==="tokens"?l("p",null,"Token changes here will prune elements and re-render Expandable ones, but the entire prompt is not being re-rendered"):l("p",null,"Changing the render epoch lets you see the order in which elements are rendered and how the token budget is allocated."),l("div",{className:"controls-stats"},l("span",null,"Used ",l(T,{value:r.container.tokens}),"/",l(T,{value:r.budget})," tokens"),l("span",null,"Removed ",l(T,{value:r.removed})," nodes"),l(Qe,{scoreBy:c,onScoreByChange:a}))),l(Pe,{node:r.container,scoreBy:c,epoch:n}))};ve(l(Ye,null),document.body);})();\n';dR.tracerCss=`body{font-family:-apple-system,BlinkMacSystemFont,Segoe WPC,Segoe UI,system-ui,Ubuntu,Droid Sans,sans-serif;background:#fff;margin:0}.render-pass{border-left:2px solid #ccc;&:hover{border-left-color:#000}}.literals li{white-space:pre;font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace}.render-flex,.render-element{padding-left:10px}.node{border:1px solid rgba(255,255,255,.5);margin:3px 10px;padding:3px 10px;border-radius:4px;width:fit-content;&.new-in-epoch{box-shadow:0 0 3px 2px red}&.before-epoch{pointer-events:none;filter:grayscale(1);color:#777!important;.node{color:#777!important}}&:last-child{margin-bottom:0}}.node-content{font-weight:700}.node-children{margin-left:20px;border-left:2px dashed rgba(255,255,255,.5);padding-left:10px}.node-toggler{cursor:pointer;display:flex;align-items:center;justify-content:space-between;.indicator{font-size:.7em}}.node-text{width:400px;&:focus,&:focus-within{outline:1px solid orange;.node-content{white-space:normal}}.node-content{font-weight:400;font-size:.8em;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}}.node-stats{font-family:SF Mono,Monaco,Menlo,Consolas,Ubuntu Mono,Liberation Mono,DejaVu Sans Mono,Courier New,monospace;font-size:.8em}.control-description{padding:10px;p{font-size:.9em;max-width:500px;margin-top:0}}.controls{display:flex;flex-direction:column;gap:10px;position:sticky;top:0;padding:10px;background:#fff;border-bottom:1px solid #ccc;z-index:1}.controls-slider{display:flex;align-items:center;gap:10px}.controls-stats{display:flex;gap:20px;list-style:none;padding:0;margin-top:0}.controls-scoreby{display:flex;gap:10px}.tabs{display:flex;border-bottom:1px solid #ccc;margin-bottom:10px}.tab{padding:10px;cursor:pointer;border:1px solid transparent;border-bottom:none}.tab.active{border-color:#ccc;border-bottom:1px solid #fff;background-color:#f9f9f9}.tab-content{display:none}.tab-content.active{display:block}
`});var tQe=H(qG=>{"use strict";f();Object.defineProperty(qG,"__esModule",{value:!0});qG.HTMLTracer=void 0;var JMe=KMe(),iT=bue(),wBt=ib(),nde=class{static{s(this,"HTMLTracer")}traceData;epochs=[];addRenderEpoch(e){this.epochs.push(e)}includeInEpoch(e){this.epochs[this.epochs.length-1].elements.push(e)}didMaterializeTree(e){this.traceData=e}async serveHTML(){return rde.create({epochs:this.epochs,traceData:ZMe(this.traceData)})}serveRouter(e){return new UG({baseAddress:e,epochs:this.epochs,traceData:ZMe(this.traceData)})}};qG.HTMLTracer=nde;var UG=class{static{s(this,"RequestRouter")}opts;serverToken=crypto.randomUUID();constructor(e){this.opts=e}route(e,n){let r=e,i=n,o=new URL(r.url||"/","http://localhost"),a=`/${this.serverToken}`;switch(o.pathname){case a:case`${a}/`:this.onRoot(o,r,i);break;case`${a}/regen`:this.onRegen(o,r,i);break;default:return!1}return!0}get address(){return this.opts.baseAddress+"/"+this.serverToken}async getHTML(){let{traceData:e,epochs:n}=this.opts;return`<body>
			<style>${JMe.tracerCss}</style>
			<script>
				const DEFAULT_TOKENS = ${JSON.stringify(e.budget)};
				const EPOCHS = ${JSON.stringify(n)};
				const DEFAULT_MODEL = ${JSON.stringify(await XMe(e.tokenizer,e.renderedTree))};
				const SERVER_ADDRESS = ${JSON.stringify(this.opts.baseAddress+"/"+this.serverToken+"/")};
				${JMe.tracerSrc}
			</script>
		</body>`}async onRegen(e,n,r){let{traceData:i}=this.opts,o=Number(e.searchParams.get("n")||i.budget),a=await i.renderTree(o),l=await XMe(i.tokenizer,a),c=JSON.stringify(l);r.setHeader("Content-Type","application/json"),r.setHeader("Content-Length",Buffer.byteLength(c)),r.end(c)}onRoot(e,n,r){this.getHTML().then(i=>{r.setHeader("Content-Type","text/html"),r.setHeader("Content-Length",Buffer.byteLength(i)),r.end(i)})}},rde=class t extends UG{static{s(this,"RequestServer")}server;static async create(e){let{createServer:n}=await Promise.resolve().then(()=>require("http")),r=n((a,l)=>{try{o.route(a,l)||(l.statusCode=404,l.end("Not Found"))}catch(c){l.statusCode=500,l.end(String(c))}}),i=await new Promise((a,l)=>{r.listen(0,"127.0.0.1",()=>a(r.address().port)).on("error",l)}),o=new t({...e,baseAddress:`http://127.0.0.1:${i}`},r);return o}constructor(e,n){super(e),this.server=n}dispose(){this.server.closeAllConnections(),this.server.close()}};async function XMe(t,e){return{container:await eQe(t,e.container,!1),removed:e.removed,budget:e.budget}}s(XMe,"serializeRenderData");async function eQe(t,e,n){let r={metadata:e.metadata.map(SBt),priority:e.priority};if(e instanceof iT.MaterializedChatMessageTextChunk)return{...r,type:2,value:e.text,tokens:await e.upperBoundTokenCount(t)};if(e instanceof iT.MaterializedChatMessageImage)return{...r,name:e.id.toString(),id:e.id,type:3,value:e.src,tokens:await e.upperBoundTokenCount(t)};if(e instanceof iT.MaterializedChatMessageOpaque||e instanceof iT.MaterializedChatMessageBreakpoint)return;{let i={...r,id:e.id,name:e.name,children:(await Promise.all(e.children.map(o=>eQe(t,o,n||e instanceof iT.MaterializedChatMessage)))).filter(o=>!!o),tokens:n?await e.upperBoundTokenCount(t):await e.tokenCount(t)};if(e instanceof iT.GenericMaterializedContainer)return{...i,type:0};if(e instanceof iT.MaterializedChatMessage){let o=e.text.filter(a=>typeof a=="string").join("").trim();return{...i,type:1,role:wBt.Raw.ChatRole.display(e.role),text:o}}}_Bt(e)}s(eQe,"serializeMaterialized");function _Bt(t){throw new Error("unreachable")}s(_Bt,"assertNever");function SBt(t){return{name:t.constructor.name,value:JSON.stringify(t)}}s(SBt,"serializeMetadata");var ZMe=s(t=>{if(t===void 0)throw new Error("Prompt must be rendered before calling HTMLTRacer.serveHTML");return t},"mustGet")});var rQe=H(nQe=>{"use strict";f();Object.defineProperty(nQe,"__esModule",{value:!0})});var oQe=H(iQe=>{"use strict";f();Object.defineProperty(iQe,"__esModule",{value:!0})});var aQe=H(sQe=>{"use strict";f();Object.defineProperty(sQe,"__esModule",{value:!0})});var th=H(Is=>{"use strict";f();var RBt=Is&&Is.__createBinding||(Object.create?function(t,e,n,r){r===void 0&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:s(function(){return e[n]},"get")}),Object.defineProperty(t,r,i)}:function(t,e,n,r){r===void 0&&(r=n),t[r]=e[n]}),oT=Is&&Is.__exportStar||function(t,e){for(var n in t)n!=="default"&&!Object.prototype.hasOwnProperty.call(e,n)&&RBt(e,t,n)};Object.defineProperty(Is,"__esModule",{value:!0});Is.contentType=Is.PromptRenderer=Is.MetadataMap=Is.PromptElement=Is.JSONTree=void 0;Is.renderPrompt=PBt;Is.renderElementJSON=DBt;var ide=ib(),lQe=Zue(),kBt=YMe();oT(tQe(),Is);Is.JSONTree=Aue();oT(ib(),Is);oT(Nue(),Is);oT(Gue(),Is);oT(rQe(),Is);oT(oQe(),Is);oT(aQe(),Is);var BBt=Iue();Object.defineProperty(Is,"PromptElement",{enumerable:!0,get:s(function(){return BBt.PromptElement},"get")});var cQe=Zue();Object.defineProperty(Is,"MetadataMap",{enumerable:!0,get:s(function(){return cQe.MetadataMap},"get")});Object.defineProperty(Is,"PromptRenderer",{enumerable:!0,get:s(function(){return cQe.PromptRenderer},"get")});async function PBt(t,e,n,r,i,o,a=ide.OutputMode.VSCode){let l="countTokens"in r?new kBt.VSCodeTokenizer((p,m)=>r.countTokens(p,m),a):r,c=new lQe.PromptRenderer(n,t,e,l),u=await c.render(i,o),d=c.getUsedContext();return{...u,usedContext:d}}s(PBt,"renderPrompt");Is.contentType="application/vnd.codechat.prompt+json.1";function DBt(t,e,n,r){return new lQe.PromptRenderer({modelMaxPromptTokens:n?.tokenBudget??Number.MAX_SAFE_INTEGER},t,e,{mode:ide.OutputMode.Raw,countMessageTokens(o){throw new Error("Tools may only return text, not messages.")},tokenLength(o,a){return o.type===ide.Raw.ChatCompletionContentPartKind.Text?Promise.resolve(n?.countTokens(o.text,a)??Promise.resolve(1)):Promise.resolve(1)}}).renderElementJSON(r)}s(DBt,"renderElementJSON")});var H9=H((gEr,aUe)=>{f();var qPt="2.0.0",WPt=Number.MAX_SAFE_INTEGER||9007199254740991,HPt=16,GPt=250,jPt=["major","premajor","minor","preminor","patch","prepatch","prerelease"];aUe.exports={MAX_LENGTH:256,MAX_SAFE_COMPONENT_LENGTH:HPt,MAX_SAFE_BUILD_LENGTH:GPt,MAX_SAFE_INTEGER:WPt,RELEASE_TYPES:jPt,SEMVER_SPEC_VERSION:qPt,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2}});var G9=H((yEr,lUe)=>{f();var VPt=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{};lUe.exports=VPt});var OR=H((xA,cUe)=>{f();var{MAX_SAFE_COMPONENT_LENGTH:I0e,MAX_SAFE_BUILD_LENGTH:$Pt,MAX_LENGTH:zPt}=H9(),YPt=G9();xA=cUe.exports={};var KPt=xA.re=[],JPt=xA.safeRe=[],gn=xA.src=[],XPt=xA.safeSrc=[],An=xA.t={},ZPt=0,T0e="[a-zA-Z0-9-]",eDt=[["\\s",1],["\\d",zPt],[T0e,$Pt]],tDt=s(t=>{for(let[e,n]of eDt)t=t.split(`${e}*`).join(`${e}{0,${n}}`).split(`${e}+`).join(`${e}{1,${n}}`);return t},"makeSafeRegex"),Zr=s((t,e,n)=>{let r=tDt(e),i=ZPt++;YPt(t,i,e),An[t]=i,gn[i]=e,XPt[i]=r,KPt[i]=new RegExp(e,n?"g":void 0),JPt[i]=new RegExp(r,n?"g":void 0)},"createToken");Zr("NUMERICIDENTIFIER","0|[1-9]\\d*");Zr("NUMERICIDENTIFIERLOOSE","\\d+");Zr("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${T0e}*`);Zr("MAINVERSION",`(${gn[An.NUMERICIDENTIFIER]})\\.(${gn[An.NUMERICIDENTIFIER]})\\.(${gn[An.NUMERICIDENTIFIER]})`);Zr("MAINVERSIONLOOSE",`(${gn[An.NUMERICIDENTIFIERLOOSE]})\\.(${gn[An.NUMERICIDENTIFIERLOOSE]})\\.(${gn[An.NUMERICIDENTIFIERLOOSE]})`);Zr("PRERELEASEIDENTIFIER",`(?:${gn[An.NUMERICIDENTIFIER]}|${gn[An.NONNUMERICIDENTIFIER]})`);Zr("PRERELEASEIDENTIFIERLOOSE",`(?:${gn[An.NUMERICIDENTIFIERLOOSE]}|${gn[An.NONNUMERICIDENTIFIER]})`);Zr("PRERELEASE",`(?:-(${gn[An.PRERELEASEIDENTIFIER]}(?:\\.${gn[An.PRERELEASEIDENTIFIER]})*))`);Zr("PRERELEASELOOSE",`(?:-?(${gn[An.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${gn[An.PRERELEASEIDENTIFIERLOOSE]})*))`);Zr("BUILDIDENTIFIER",`${T0e}+`);Zr("BUILD",`(?:\\+(${gn[An.BUILDIDENTIFIER]}(?:\\.${gn[An.BUILDIDENTIFIER]})*))`);Zr("FULLPLAIN",`v?${gn[An.MAINVERSION]}${gn[An.PRERELEASE]}?${gn[An.BUILD]}?`);Zr("FULL",`^${gn[An.FULLPLAIN]}$`);Zr("LOOSEPLAIN",`[v=\\s]*${gn[An.MAINVERSIONLOOSE]}${gn[An.PRERELEASELOOSE]}?${gn[An.BUILD]}?`);Zr("LOOSE",`^${gn[An.LOOSEPLAIN]}$`);Zr("GTLT","((?:<|>)?=?)");Zr("XRANGEIDENTIFIERLOOSE",`${gn[An.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`);Zr("XRANGEIDENTIFIER",`${gn[An.NUMERICIDENTIFIER]}|x|X|\\*`);Zr("XRANGEPLAIN",`[v=\\s]*(${gn[An.XRANGEIDENTIFIER]})(?:\\.(${gn[An.XRANGEIDENTIFIER]})(?:\\.(${gn[An.XRANGEIDENTIFIER]})(?:${gn[An.PRERELEASE]})?${gn[An.BUILD]}?)?)?`);Zr("XRANGEPLAINLOOSE",`[v=\\s]*(${gn[An.XRANGEIDENTIFIERLOOSE]})(?:\\.(${gn[An.XRANGEIDENTIFIERLOOSE]})(?:\\.(${gn[An.XRANGEIDENTIFIERLOOSE]})(?:${gn[An.PRERELEASELOOSE]})?${gn[An.BUILD]}?)?)?`);Zr("XRANGE",`^${gn[An.GTLT]}\\s*${gn[An.XRANGEPLAIN]}$`);Zr("XRANGELOOSE",`^${gn[An.GTLT]}\\s*${gn[An.XRANGEPLAINLOOSE]}$`);Zr("COERCEPLAIN",`(^|[^\\d])(\\d{1,${I0e}})(?:\\.(\\d{1,${I0e}}))?(?:\\.(\\d{1,${I0e}}))?`);Zr("COERCE",`${gn[An.COERCEPLAIN]}(?:$|[^\\d])`);Zr("COERCEFULL",gn[An.COERCEPLAIN]+`(?:${gn[An.PRERELEASE]})?(?:${gn[An.BUILD]})?(?:$|[^\\d])`);Zr("COERCERTL",gn[An.COERCE],!0);Zr("COERCERTLFULL",gn[An.COERCEFULL],!0);Zr("LONETILDE","(?:~>?)");Zr("TILDETRIM",`(\\s*)${gn[An.LONETILDE]}\\s+`,!0);xA.tildeTrimReplace="$1~";Zr("TILDE",`^${gn[An.LONETILDE]}${gn[An.XRANGEPLAIN]}$`);Zr("TILDELOOSE",`^${gn[An.LONETILDE]}${gn[An.XRANGEPLAINLOOSE]}$`);Zr("LONECARET","(?:\\^)");Zr("CARETTRIM",`(\\s*)${gn[An.LONECARET]}\\s+`,!0);xA.caretTrimReplace="$1^";Zr("CARET",`^${gn[An.LONECARET]}${gn[An.XRANGEPLAIN]}$`);Zr("CARETLOOSE",`^${gn[An.LONECARET]}${gn[An.XRANGEPLAINLOOSE]}$`);Zr("COMPARATORLOOSE",`^${gn[An.GTLT]}\\s*(${gn[An.LOOSEPLAIN]})$|^$`);Zr("COMPARATOR",`^${gn[An.GTLT]}\\s*(${gn[An.FULLPLAIN]})$|^$`);Zr("COMPARATORTRIM",`(\\s*)${gn[An.GTLT]}\\s*(${gn[An.LOOSEPLAIN]}|${gn[An.XRANGEPLAIN]})`,!0);xA.comparatorTrimReplace="$1$2$3";Zr("HYPHENRANGE",`^\\s*(${gn[An.XRANGEPLAIN]})\\s+-\\s+(${gn[An.XRANGEPLAIN]})\\s*$`);Zr("HYPHENRANGELOOSE",`^\\s*(${gn[An.XRANGEPLAINLOOSE]})\\s+-\\s+(${gn[An.XRANGEPLAINLOOSE]})\\s*$`);Zr("STAR","(<|>)?=?\\s*\\*");Zr("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$");Zr("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")});var mV=H((bEr,uUe)=>{f();var nDt=Object.freeze({loose:!0}),rDt=Object.freeze({}),iDt=s(t=>t?typeof t!="object"?nDt:t:rDt,"parseOptions");uUe.exports=iDt});var w0e=H((TEr,pUe)=>{f();var dUe=/^[0-9]+$/,fUe=s((t,e)=>{let n=dUe.test(t),r=dUe.test(e);return n&&r&&(t=+t,e=+e),t===e?0:n&&!r?-1:r&&!n?1:t<e?-1:1},"compareIdentifiers"),oDt=s((t,e)=>fUe(e,t),"rcompareIdentifiers");pUe.exports={compareIdentifiers:fUe,rcompareIdentifiers:oDt}});var au=H((SEr,AUe)=>{f();var hV=G9(),{MAX_LENGTH:mUe,MAX_SAFE_INTEGER:gV}=H9(),{safeRe:hUe,safeSrc:gUe,t:AV}=OR(),sDt=mV(),{compareIdentifiers:UR}=w0e(),_0e=class t{static{s(this,"SemVer")}constructor(e,n){if(n=sDt(n),e instanceof t){if(e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease)return e;e=e.version}else if(typeof e!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof e}".`);if(e.length>mUe)throw new TypeError(`version is longer than ${mUe} characters`);hV("SemVer",e,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;let r=e.trim().match(n.loose?hUe[AV.LOOSE]:hUe[AV.FULL]);if(!r)throw new TypeError(`Invalid Version: ${e}`);if(this.raw=e,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>gV||this.major<0)throw new TypeError("Invalid major version");if(this.minor>gV||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>gV||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){let o=+i;if(o>=0&&o<gV)return o}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(e){if(hV("SemVer.compare",this.version,this.options,e),!(e instanceof t)){if(typeof e=="string"&&e===this.version)return 0;e=new t(e,this.options)}return e.version===this.version?0:this.compareMain(e)||this.comparePre(e)}compareMain(e){return e instanceof t||(e=new t(e,this.options)),UR(this.major,e.major)||UR(this.minor,e.minor)||UR(this.patch,e.patch)}comparePre(e){if(e instanceof t||(e=new t(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;let n=0;do{let r=this.prerelease[n],i=e.prerelease[n];if(hV("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return UR(r,i)}while(++n)}compareBuild(e){e instanceof t||(e=new t(e,this.options));let n=0;do{let r=this.build[n],i=e.build[n];if(hV("build compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return UR(r,i)}while(++n)}inc(e,n,r){if(e.startsWith("pre")){if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(n){let i=new RegExp(`^${this.options.loose?gUe[AV.PRERELEASELOOSE]:gUe[AV.PRERELEASE]}$`),o=`-${n}`.match(i);if(!o||o[1]!==n)throw new Error(`invalid identifier: ${n}`)}}switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{let i=Number(r)?1:0;if(this.prerelease.length===0)this.prerelease=[i];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);if(o===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let o=[n,i];r===!1&&(o=[n]),UR(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=o):this.prerelease=o}break}default:throw new Error(`invalid increment argument: ${e}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};AUe.exports=_0e});var TT=H((BEr,CUe)=>{f();var yUe=au(),aDt=s((t,e,n=!1)=>{if(t instanceof yUe)return t;try{return new yUe(t,e)}catch(r){if(!n)return null;throw r}},"parse");CUe.exports=aDt});var vUe=H((NEr,xUe)=>{f();var lDt=TT(),cDt=s((t,e)=>{let n=lDt(t,e);return n?n.version:null},"valid");xUe.exports=cDt});var EUe=H((MEr,bUe)=>{f();var uDt=TT(),dDt=s((t,e)=>{let n=uDt(t.trim().replace(/^[=v]+/,""),e);return n?n.version:null},"clean");bUe.exports=dDt});var wUe=H((UEr,TUe)=>{f();var IUe=au(),fDt=s((t,e,n,r,i)=>{typeof n=="string"&&(i=r,r=n,n=void 0);try{return new IUe(t instanceof IUe?t.version:t,n).inc(e,r,i).version}catch{return null}},"inc");TUe.exports=fDt});var RUe=H((HEr,SUe)=>{f();var _Ue=TT(),pDt=s((t,e)=>{let n=_Ue(t,null,!0),r=_Ue(e,null,!0),i=n.compare(r);if(i===0)return null;let o=i>0,a=o?n:r,l=o?r:n,c=!!a.prerelease.length;if(!!l.prerelease.length&&!c){if(!l.patch&&!l.minor)return"major";if(l.compareMain(a)===0)return l.minor&&!l.patch?"minor":"patch"}let d=c?"pre":"";return n.major!==r.major?d+"major":n.minor!==r.minor?d+"minor":n.patch!==r.patch?d+"patch":"prerelease"},"diff");SUe.exports=pDt});var BUe=H((VEr,kUe)=>{f();var mDt=au(),hDt=s((t,e)=>new mDt(t,e).major,"major");kUe.exports=hDt});var DUe=H((YEr,PUe)=>{f();var gDt=au(),ADt=s((t,e)=>new gDt(t,e).minor,"minor");PUe.exports=ADt});var LUe=H((XEr,NUe)=>{f();var yDt=au(),CDt=s((t,e)=>new yDt(t,e).patch,"patch");NUe.exports=CDt});var MUe=H((tIr,FUe)=>{f();var xDt=TT(),vDt=s((t,e)=>{let n=xDt(t,e);return n&&n.prerelease.length?n.prerelease:null},"prerelease");FUe.exports=vDt});var Ep=H((iIr,OUe)=>{f();var QUe=au(),bDt=s((t,e,n)=>new QUe(t,n).compare(new QUe(e,n)),"compare");OUe.exports=bDt});var qUe=H((aIr,UUe)=>{f();var EDt=Ep(),IDt=s((t,e,n)=>EDt(e,t,n),"rcompare");UUe.exports=IDt});var HUe=H((uIr,WUe)=>{f();var TDt=Ep(),wDt=s((t,e)=>TDt(t,e,!0),"compareLoose");WUe.exports=wDt});var yV=H((pIr,jUe)=>{f();var GUe=au(),_Dt=s((t,e,n)=>{let r=new GUe(t,n),i=new GUe(e,n);return r.compare(i)||r.compareBuild(i)},"compareBuild");jUe.exports=_Dt});var $Ue=H((gIr,VUe)=>{f();var SDt=yV(),RDt=s((t,e)=>t.sort((n,r)=>SDt(n,r,e)),"sort");VUe.exports=RDt});var YUe=H((CIr,zUe)=>{f();var kDt=yV(),BDt=s((t,e)=>t.sort((n,r)=>kDt(r,n,e)),"rsort");zUe.exports=BDt});var j9=H((bIr,KUe)=>{f();var PDt=Ep(),DDt=s((t,e,n)=>PDt(t,e,n)>0,"gt");KUe.exports=DDt});var CV=H((TIr,JUe)=>{f();var NDt=Ep(),LDt=s((t,e,n)=>NDt(t,e,n)<0,"lt");JUe.exports=LDt});var S0e=H((SIr,XUe)=>{f();var FDt=Ep(),MDt=s((t,e,n)=>FDt(t,e,n)===0,"eq");XUe.exports=MDt});var R0e=H((BIr,ZUe)=>{f();var QDt=Ep(),ODt=s((t,e,n)=>QDt(t,e,n)!==0,"neq");ZUe.exports=ODt});var xV=H((NIr,eqe)=>{f();var UDt=Ep(),qDt=s((t,e,n)=>UDt(t,e,n)>=0,"gte");eqe.exports=qDt});var vV=H((MIr,tqe)=>{f();var WDt=Ep(),HDt=s((t,e,n)=>WDt(t,e,n)<=0,"lte");tqe.exports=HDt});var k0e=H((UIr,nqe)=>{f();var GDt=S0e(),jDt=R0e(),VDt=j9(),$Dt=xV(),zDt=CV(),YDt=vV(),KDt=s((t,e,n,r)=>{switch(e){case"===":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t===n;case"!==":return typeof t=="object"&&(t=t.version),typeof n=="object"&&(n=n.version),t!==n;case"":case"=":case"==":return GDt(t,n,r);case"!=":return jDt(t,n,r);case">":return VDt(t,n,r);case">=":return $Dt(t,n,r);case"<":return zDt(t,n,r);case"<=":return YDt(t,n,r);default:throw new TypeError(`Invalid operator: ${e}`)}},"cmp");nqe.exports=KDt});var iqe=H((HIr,rqe)=>{f();var JDt=au(),XDt=TT(),{safeRe:bV,t:EV}=OR(),ZDt=s((t,e)=>{if(t instanceof JDt)return t;if(typeof t=="number"&&(t=String(t)),typeof t!="string")return null;e=e||{};let n=null;if(!e.rtl)n=t.match(e.includePrerelease?bV[EV.COERCEFULL]:bV[EV.COERCE]);else{let c=e.includePrerelease?bV[EV.COERCERTLFULL]:bV[EV.COERCERTL],u;for(;(u=c.exec(t))&&(!n||n.index+n[0].length!==t.length);)(!n||u.index+u[0].length!==n.index+n[0].length)&&(n=u),c.lastIndex=u.index+u[1].length+u[2].length;c.lastIndex=-1}if(n===null)return null;let r=n[2],i=n[3]||"0",o=n[4]||"0",a=e.includePrerelease&&n[5]?`-${n[5]}`:"",l=e.includePrerelease&&n[6]?`+${n[6]}`:"";return XDt(`${r}.${i}.${o}${a}${l}`,e)},"coerce");rqe.exports=ZDt});var sqe=H((VIr,oqe)=>{f();var B0e=class{static{s(this,"LRUCache")}constructor(){this.max=1e3,this.map=new Map}get(e){let n=this.map.get(e);if(n!==void 0)return this.map.delete(e),this.map.set(e,n),n}delete(e){return this.map.delete(e)}set(e,n){if(!this.delete(e)&&n!==void 0){if(this.map.size>=this.max){let i=this.map.keys().next().value;this.delete(i)}this.map.set(e,n)}return this}};oqe.exports=B0e});var Ip=H((YIr,uqe)=>{f();var e9t=/\s+/g,P0e=class t{static{s(this,"Range")}constructor(e,n){if(n=n9t(n),e instanceof t)return e.loose===!!n.loose&&e.includePrerelease===!!n.includePrerelease?e:new t(e.raw,n);if(e instanceof D0e)return this.raw=e.value,this.set=[[e]],this.formatted=void 0,this;if(this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease,this.raw=e.trim().replace(e9t," "),this.set=this.raw.split("||").map(r=>this.parseRange(r.trim())).filter(r=>r.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){let r=this.set[0];if(this.set=this.set.filter(i=>!lqe(i[0])),this.set.length===0)this.set=[r];else if(this.set.length>1){for(let i of this.set)if(i.length===1&&c9t(i[0])){this.set=[i];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let e=0;e<this.set.length;e++){e>0&&(this.formatted+="||");let n=this.set[e];for(let r=0;r<n.length;r++)r>0&&(this.formatted+=" "),this.formatted+=n[r].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(e){let r=((this.options.includePrerelease&&a9t)|(this.options.loose&&l9t))+":"+e,i=aqe.get(r);if(i)return i;let o=this.options.loose,a=o?Ud[Hu.HYPHENRANGELOOSE]:Ud[Hu.HYPHENRANGE];e=e.replace(a,C9t(this.options.includePrerelease)),Ts("hyphen replace",e),e=e.replace(Ud[Hu.COMPARATORTRIM],i9t),Ts("comparator trim",e),e=e.replace(Ud[Hu.TILDETRIM],o9t),Ts("tilde trim",e),e=e.replace(Ud[Hu.CARETTRIM],s9t),Ts("caret trim",e);let l=e.split(" ").map(p=>u9t(p,this.options)).join(" ").split(/\s+/).map(p=>y9t(p,this.options));o&&(l=l.filter(p=>(Ts("loose invalid filter",p,this.options),!!p.match(Ud[Hu.COMPARATORLOOSE])))),Ts("range list",l);let c=new Map,u=l.map(p=>new D0e(p,this.options));for(let p of u){if(lqe(p))return[p];c.set(p.value,p)}c.size>1&&c.has("")&&c.delete("");let d=[...c.values()];return aqe.set(r,d),d}intersects(e,n){if(!(e instanceof t))throw new TypeError("a Range is required");return this.set.some(r=>cqe(r,n)&&e.set.some(i=>cqe(i,n)&&r.every(o=>i.every(a=>o.intersects(a,n)))))}test(e){if(!e)return!1;if(typeof e=="string")try{e=new r9t(e,this.options)}catch{return!1}for(let n=0;n<this.set.length;n++)if(x9t(this.set[n],e,this.options))return!0;return!1}};uqe.exports=P0e;var t9t=sqe(),aqe=new t9t,n9t=mV(),D0e=V9(),Ts=G9(),r9t=au(),{safeRe:Ud,t:Hu,comparatorTrimReplace:i9t,tildeTrimReplace:o9t,caretTrimReplace:s9t}=OR(),{FLAG_INCLUDE_PRERELEASE:a9t,FLAG_LOOSE:l9t}=H9(),lqe=s(t=>t.value==="<0.0.0-0","isNullSet"),c9t=s(t=>t.value==="","isAny"),cqe=s((t,e)=>{let n=!0,r=t.slice(),i=r.pop();for(;n&&r.length;)n=r.every(o=>i.intersects(o,e)),i=r.pop();return n},"isSatisfiable"),u9t=s((t,e)=>(Ts("comp",t,e),t=p9t(t,e),Ts("caret",t),t=d9t(t,e),Ts("tildes",t),t=h9t(t,e),Ts("xrange",t),t=A9t(t,e),Ts("stars",t),t),"parseComparator"),Gu=s(t=>!t||t.toLowerCase()==="x"||t==="*","isX"),d9t=s((t,e)=>t.trim().split(/\s+/).map(n=>f9t(n,e)).join(" "),"replaceTildes"),f9t=s((t,e)=>{let n=e.loose?Ud[Hu.TILDELOOSE]:Ud[Hu.TILDE];return t.replace(n,(r,i,o,a,l)=>{Ts("tilde",t,r,i,o,a,l);let c;return Gu(i)?c="":Gu(o)?c=`>=${i}.0.0 <${+i+1}.0.0-0`:Gu(a)?c=`>=${i}.${o}.0 <${i}.${+o+1}.0-0`:l?(Ts("replaceTilde pr",l),c=`>=${i}.${o}.${a}-${l} <${i}.${+o+1}.0-0`):c=`>=${i}.${o}.${a} <${i}.${+o+1}.0-0`,Ts("tilde return",c),c})},"replaceTilde"),p9t=s((t,e)=>t.trim().split(/\s+/).map(n=>m9t(n,e)).join(" "),"replaceCarets"),m9t=s((t,e)=>{Ts("caret",t,e);let n=e.loose?Ud[Hu.CARETLOOSE]:Ud[Hu.CARET],r=e.includePrerelease?"-0":"";return t.replace(n,(i,o,a,l,c)=>{Ts("caret",t,i,o,a,l,c);let u;return Gu(o)?u="":Gu(a)?u=`>=${o}.0.0${r} <${+o+1}.0.0-0`:Gu(l)?o==="0"?u=`>=${o}.${a}.0${r} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.0${r} <${+o+1}.0.0-0`:c?(Ts("replaceCaret pr",c),o==="0"?a==="0"?u=`>=${o}.${a}.${l}-${c} <${o}.${a}.${+l+1}-0`:u=`>=${o}.${a}.${l}-${c} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.${l}-${c} <${+o+1}.0.0-0`):(Ts("no pr"),o==="0"?a==="0"?u=`>=${o}.${a}.${l}${r} <${o}.${a}.${+l+1}-0`:u=`>=${o}.${a}.${l}${r} <${o}.${+a+1}.0-0`:u=`>=${o}.${a}.${l} <${+o+1}.0.0-0`),Ts("caret return",u),u})},"replaceCaret"),h9t=s((t,e)=>(Ts("replaceXRanges",t,e),t.split(/\s+/).map(n=>g9t(n,e)).join(" ")),"replaceXRanges"),g9t=s((t,e)=>{t=t.trim();let n=e.loose?Ud[Hu.XRANGELOOSE]:Ud[Hu.XRANGE];return t.replace(n,(r,i,o,a,l,c)=>{Ts("xRange",t,r,i,o,a,l,c);let u=Gu(o),d=u||Gu(a),p=d||Gu(l),m=p;return i==="="&&m&&(i=""),c=e.includePrerelease?"-0":"",u?i===">"||i==="<"?r="<0.0.0-0":r="*":i&&m?(d&&(a=0),l=0,i===">"?(i=">=",d?(o=+o+1,a=0,l=0):(a=+a+1,l=0)):i==="<="&&(i="<",d?o=+o+1:a=+a+1),i==="<"&&(c="-0"),r=`${i+o}.${a}.${l}${c}`):d?r=`>=${o}.0.0${c} <${+o+1}.0.0-0`:p&&(r=`>=${o}.${a}.0${c} <${o}.${+a+1}.0-0`),Ts("xRange return",r),r})},"replaceXRange"),A9t=s((t,e)=>(Ts("replaceStars",t,e),t.trim().replace(Ud[Hu.STAR],"")),"replaceStars"),y9t=s((t,e)=>(Ts("replaceGTE0",t,e),t.trim().replace(Ud[e.includePrerelease?Hu.GTE0PRE:Hu.GTE0],"")),"replaceGTE0"),C9t=s(t=>(e,n,r,i,o,a,l,c,u,d,p,m)=>(Gu(r)?n="":Gu(i)?n=`>=${r}.0.0${t?"-0":""}`:Gu(o)?n=`>=${r}.${i}.0${t?"-0":""}`:a?n=`>=${n}`:n=`>=${n}${t?"-0":""}`,Gu(u)?c="":Gu(d)?c=`<${+u+1}.0.0-0`:Gu(p)?c=`<${u}.${+d+1}.0-0`:m?c=`<=${u}.${d}.${p}-${m}`:t?c=`<${u}.${d}.${+p+1}-0`:c=`<=${c}`,`${n} ${c}`.trim()),"hyphenReplace"),x9t=s((t,e,n)=>{for(let r=0;r<t.length;r++)if(!t[r].test(e))return!1;if(e.prerelease.length&&!n.includePrerelease){for(let r=0;r<t.length;r++)if(Ts(t[r].semver),t[r].semver!==D0e.ANY&&t[r].semver.prerelease.length>0){let i=t[r].semver;if(i.major===e.major&&i.minor===e.minor&&i.patch===e.patch)return!0}return!1}return!0},"testSet")});var V9=H((XIr,gqe)=>{f();var $9=Symbol("SemVer ANY"),F0e=class t{static{s(this,"Comparator")}static get ANY(){return $9}constructor(e,n){if(n=dqe(n),e instanceof t){if(e.loose===!!n.loose)return e;e=e.value}e=e.trim().split(/\s+/).join(" "),L0e("comparator",e,n),this.options=n,this.loose=!!n.loose,this.parse(e),this.semver===$9?this.value="":this.value=this.operator+this.semver.version,L0e("comp",this)}parse(e){let n=this.options.loose?fqe[pqe.COMPARATORLOOSE]:fqe[pqe.COMPARATOR],r=e.match(n);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new mqe(r[2],this.options.loose):this.semver=$9}toString(){return this.value}test(e){if(L0e("Comparator.test",e,this.options.loose),this.semver===$9||e===$9)return!0;if(typeof e=="string")try{e=new mqe(e,this.options)}catch{return!1}return N0e(e,this.operator,this.semver,this.options)}intersects(e,n){if(!(e instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new hqe(e.value,n).test(this.value):e.operator===""?e.value===""?!0:new hqe(this.value,n).test(e.semver):(n=dqe(n),n.includePrerelease&&(this.value==="<0.0.0-0"||e.value==="<0.0.0-0")||!n.includePrerelease&&(this.value.startsWith("<0.0.0")||e.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&e.operator.startsWith(">")||this.operator.startsWith("<")&&e.operator.startsWith("<")||this.semver.version===e.semver.version&&this.operator.includes("=")&&e.operator.includes("=")||N0e(this.semver,"<",e.semver,n)&&this.operator.startsWith(">")&&e.operator.startsWith("<")||N0e(this.semver,">",e.semver,n)&&this.operator.startsWith("<")&&e.operator.startsWith(">")))}};gqe.exports=F0e;var dqe=mV(),{safeRe:fqe,t:pqe}=OR(),N0e=k0e(),L0e=G9(),mqe=au(),hqe=Ip()});var z9=H((t2r,Aqe)=>{f();var v9t=Ip(),b9t=s((t,e,n)=>{try{e=new v9t(e,n)}catch{return!1}return e.test(t)},"satisfies");Aqe.exports=b9t});var Cqe=H((i2r,yqe)=>{f();var E9t=Ip(),I9t=s((t,e)=>new E9t(t,e).set.map(n=>n.map(r=>r.value).join(" ").trim().split(" ")),"toComparators");yqe.exports=I9t});var vqe=H((a2r,xqe)=>{f();var T9t=au(),w9t=Ip(),_9t=s((t,e,n)=>{let r=null,i=null,o=null;try{o=new w9t(e,n)}catch{return null}return t.forEach(a=>{o.test(a)&&(!r||i.compare(a)===-1)&&(r=a,i=new T9t(r,n))}),r},"maxSatisfying");xqe.exports=_9t});var Eqe=H((u2r,bqe)=>{f();var S9t=au(),R9t=Ip(),k9t=s((t,e,n)=>{let r=null,i=null,o=null;try{o=new R9t(e,n)}catch{return null}return t.forEach(a=>{o.test(a)&&(!r||i.compare(a)===1)&&(r=a,i=new S9t(r,n))}),r},"minSatisfying");bqe.exports=k9t});var wqe=H((p2r,Tqe)=>{f();var M0e=au(),B9t=Ip(),Iqe=j9(),P9t=s((t,e)=>{t=new B9t(t,e);let n=new M0e("0.0.0");if(t.test(n)||(n=new M0e("0.0.0-0"),t.test(n)))return n;n=null;for(let r=0;r<t.set.length;++r){let i=t.set[r],o=null;i.forEach(a=>{let l=new M0e(a.semver.version);switch(a.operator){case">":l.prerelease.length===0?l.patch++:l.prerelease.push(0),l.raw=l.format();case"":case">=":(!o||Iqe(l,o))&&(o=l);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${a.operator}`)}}),o&&(!n||Iqe(n,o))&&(n=o)}return n&&t.test(n)?n:null},"minVersion");Tqe.exports=P9t});var Sqe=H((g2r,_qe)=>{f();var D9t=Ip(),N9t=s((t,e)=>{try{return new D9t(t,e).range||"*"}catch{return null}},"validRange");_qe.exports=N9t});var IV=H((C2r,Pqe)=>{f();var L9t=au(),Bqe=V9(),{ANY:F9t}=Bqe,M9t=Ip(),Q9t=z9(),Rqe=j9(),kqe=CV(),O9t=vV(),U9t=xV(),q9t=s((t,e,n,r)=>{t=new L9t(t,r),e=new M9t(e,r);let i,o,a,l,c;switch(n){case">":i=Rqe,o=O9t,a=kqe,l=">",c=">=";break;case"<":i=kqe,o=U9t,a=Rqe,l="<",c="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(Q9t(t,e,r))return!1;for(let u=0;u<e.set.length;++u){let d=e.set[u],p=null,m=null;if(d.forEach(h=>{h.semver===F9t&&(h=new Bqe(">=0.0.0")),p=p||h,m=m||h,i(h.semver,p.semver,r)?p=h:a(h.semver,m.semver,r)&&(m=h)}),p.operator===l||p.operator===c||(!m.operator||m.operator===l)&&o(t,m.semver))return!1;if(m.operator===c&&a(t,m.semver))return!1}return!0},"outside");Pqe.exports=q9t});var Nqe=H((b2r,Dqe)=>{f();var W9t=IV(),H9t=s((t,e,n)=>W9t(t,e,">",n),"gtr");Dqe.exports=H9t});var Fqe=H((T2r,Lqe)=>{f();var G9t=IV(),j9t=s((t,e,n)=>G9t(t,e,"<",n),"ltr");Lqe.exports=j9t});var Oqe=H((S2r,Qqe)=>{f();var Mqe=Ip(),V9t=s((t,e,n)=>(t=new Mqe(t,n),e=new Mqe(e,n),t.intersects(e,n)),"intersects");Qqe.exports=V9t});var qqe=H((B2r,Uqe)=>{f();var $9t=z9(),z9t=Ep();Uqe.exports=(t,e,n)=>{let r=[],i=null,o=null,a=t.sort((d,p)=>z9t(d,p,n));for(let d of a)$9t(d,e,n)?(o=d,i||(i=d)):(o&&r.push([i,o]),o=null,i=null);i&&r.push([i,null]);let l=[];for(let[d,p]of r)d===p?l.push(d):!p&&d===a[0]?l.push("*"):p?d===a[0]?l.push(`<=${p}`):l.push(`${d} - ${p}`):l.push(`>=${d}`);let c=l.join(" || "),u=typeof e.raw=="string"?e.raw:String(e);return c.length<u.length?c:e}});var $qe=H((D2r,Vqe)=>{f();var Wqe=Ip(),O0e=V9(),{ANY:Q0e}=O0e,Y9=z9(),U0e=Ep(),Y9t=s((t,e,n={})=>{if(t===e)return!0;t=new Wqe(t,n),e=new Wqe(e,n);let r=!1;e:for(let i of t.set){for(let o of e.set){let a=J9t(i,o,n);if(r=r||a!==null,a)continue e}if(r)return!1}return!0},"subset"),K9t=[new O0e(">=0.0.0-0")],Hqe=[new O0e(">=0.0.0")],J9t=s((t,e,n)=>{if(t===e)return!0;if(t.length===1&&t[0].semver===Q0e){if(e.length===1&&e[0].semver===Q0e)return!0;n.includePrerelease?t=K9t:t=Hqe}if(e.length===1&&e[0].semver===Q0e){if(n.includePrerelease)return!0;e=Hqe}let r=new Set,i,o;for(let h of t)h.operator===">"||h.operator===">="?i=Gqe(i,h,n):h.operator==="<"||h.operator==="<="?o=jqe(o,h,n):r.add(h.semver);if(r.size>1)return null;let a;if(i&&o){if(a=U0e(i.semver,o.semver,n),a>0)return null;if(a===0&&(i.operator!==">="||o.operator!=="<="))return null}for(let h of r){if(i&&!Y9(h,String(i),n)||o&&!Y9(h,String(o),n))return null;for(let g of e)if(!Y9(h,String(g),n))return!1;return!0}let l,c,u,d,p=o&&!n.includePrerelease&&o.semver.prerelease.length?o.semver:!1,m=i&&!n.includePrerelease&&i.semver.prerelease.length?i.semver:!1;p&&p.prerelease.length===1&&o.operator==="<"&&p.prerelease[0]===0&&(p=!1);for(let h of e){if(d=d||h.operator===">"||h.operator===">=",u=u||h.operator==="<"||h.operator==="<=",i){if(m&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===m.major&&h.semver.minor===m.minor&&h.semver.patch===m.patch&&(m=!1),h.operator===">"||h.operator===">="){if(l=Gqe(i,h,n),l===h&&l!==i)return!1}else if(i.operator===">="&&!Y9(i.semver,String(h),n))return!1}if(o){if(p&&h.semver.prerelease&&h.semver.prerelease.length&&h.semver.major===p.major&&h.semver.minor===p.minor&&h.semver.patch===p.patch&&(p=!1),h.operator==="<"||h.operator==="<="){if(c=jqe(o,h,n),c===h&&c!==o)return!1}else if(o.operator==="<="&&!Y9(o.semver,String(h),n))return!1}if(!h.operator&&(o||i)&&a!==0)return!1}return!(i&&u&&!o&&a!==0||o&&d&&!i&&a!==0||m||p)},"simpleSubset"),Gqe=s((t,e,n)=>{if(!t)return e;let r=U0e(t.semver,e.semver,n);return r>0?t:r<0||e.operator===">"&&t.operator===">="?e:t},"higherGT"),jqe=s((t,e,n)=>{if(!t)return e;let r=U0e(t.semver,e.semver,n);return r<0?t:r>0||e.operator==="<"&&t.operator==="<="?e:t},"lowerLT");Vqe.exports=Y9t});var W0e=H((F2r,Kqe)=>{f();var q0e=OR(),zqe=H9(),X9t=au(),Yqe=w0e(),Z9t=TT(),e6t=vUe(),t6t=EUe(),n6t=wUe(),r6t=RUe(),i6t=BUe(),o6t=DUe(),s6t=LUe(),a6t=MUe(),l6t=Ep(),c6t=qUe(),u6t=HUe(),d6t=yV(),f6t=$Ue(),p6t=YUe(),m6t=j9(),h6t=CV(),g6t=S0e(),A6t=R0e(),y6t=xV(),C6t=vV(),x6t=k0e(),v6t=iqe(),b6t=V9(),E6t=Ip(),I6t=z9(),T6t=Cqe(),w6t=vqe(),_6t=Eqe(),S6t=wqe(),R6t=Sqe(),k6t=IV(),B6t=Nqe(),P6t=Fqe(),D6t=Oqe(),N6t=qqe(),L6t=$qe();Kqe.exports={parse:Z9t,valid:e6t,clean:t6t,inc:n6t,diff:r6t,major:i6t,minor:o6t,patch:s6t,prerelease:a6t,compare:l6t,rcompare:c6t,compareLoose:u6t,compareBuild:d6t,sort:f6t,rsort:p6t,gt:m6t,lt:h6t,eq:g6t,neq:A6t,gte:y6t,lte:C6t,cmp:x6t,coerce:v6t,Comparator:b6t,Range:E6t,satisfies:I6t,toComparators:T6t,maxSatisfying:w6t,minSatisfying:_6t,minVersion:S6t,validRange:R6t,outside:k6t,gtr:B6t,ltr:P6t,intersects:D6t,simplifyRange:N6t,subset:L6t,SemVer:X9t,re:q0e.re,src:q0e.src,tokens:q0e.t,SEMVER_SPEC_VERSION:zqe.SEMVER_SPEC_VERSION,RELEASE_TYPES:zqe.RELEASE_TYPES,compareIdentifiers:Yqe.compareIdentifiers,rcompareIdentifiers:Yqe.rcompareIdentifiers}});var z0=H(X9=>{"use strict";f();Object.defineProperty(X9,"__esModule",{value:!0});X9.dedent=void 0;function yWe(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=Array.from(typeof t=="string"?[t]:t);r[r.length-1]=r[r.length-1].replace(/\r?\n([\t ]*)$/,"");var i=r.reduce(function(l,c){var u=c.match(/\n([\t ]+|(?!\s).)/g);return u?l.concat(u.map(function(d){var p,m;return(m=(p=d.match(/[\t ]/g))===null||p===void 0?void 0:p.length)!==null&&m!==void 0?m:0})):l},[]);if(i.length){var o=new RegExp(`
[	 ]{`+Math.min.apply(Math,i)+"}","g");r=r.map(function(l){return l.replace(o,`
`)})}r[0]=r[0].replace(/^\r?\n/,"");var a=r[0];return e.forEach(function(l,c){var u=a.match(/(?:^|\n)( *)$/),d=u?u[1]:"",p=l;typeof l=="string"&&l.includes(`
`)&&(p=String(l).split(`
`).map(function(m,h){return h===0?m:""+d+m}).join(`
`)),a+=p+r[c+1]}),a}s(yWe,"dedent");X9.dedent=yWe;X9.default=yWe});var wWe=H(nfe=>{"use strict";f();Object.defineProperty(nfe,"__esModule",{value:!0});nfe.workerFile=`
const { parentPort } = require('worker_threads')

parentPort.on('message', async worker => {
  const response = {
    error: null,
    data: null
  }

  try {
    eval(worker)
    // __executor__ is defined in worker
    response.data = await __executor__()
    parentPort.postMessage(response)
  } catch (err) {
    response.data = null
    response.error = {
      message: err.message,
      stack: err.stack
    }

    try {
      parentPort.postMessage(response)
    } catch (err) {
      console.error(err)
    }
  }
})
`});var PWe=H(ife=>{"use strict";f();Object.defineProperty(ife,"__esModule",{value:!0});var _We=require("worker_threads"),nNt=require("v8"),rNt=require("os"),SWe=wWe(),DV="ready",RWe="spawning",iNt="busy",NV="off",kWe=rNt.cpus().length,BWe=process.version.replace("v","").split("."),oNt=parseInt(BWe[0]),sNt=parseInt(BWe[1]),rfe=class{static{s(this,"WorkerPool")}constructor(){this.maxWorkers=kWe,this.taskQueue=[],this.workers=[]}resurrect(e){let n=new _We.Worker(SWe.workerFile,{eval:!0});e.status=RWe,e.worker=n,n.once("online",()=>process.nextTick(()=>{e.status=DV,n.removeAllListeners(),this.tick()})),n.once("error",r=>{console.error(r),e.status=NV,n.removeAllListeners(),this.tick()})}tick(){if(this.workers.filter(({status:c})=>c===NV).forEach(c=>this.resurrect(c)),this.taskQueue.length===0)return;let e;for(let c=0;c<this.workers.length;c++)if(this.workers[c].status===DV){e=this.workers[c];break}if(typeof e>"u")return;let n=this.taskQueue.shift();e.status=iNt;let{worker:r}=e,{handler:i,config:o,resolve:a,reject:l}=n;try{let c="";for(let m in o.ctx){if(!o.ctx.hasOwnProperty(m))continue;let h;switch(typeof o.ctx[m]){case"string":h=`'${o.ctx[m]}'`;break;case"object":h=JSON.stringify(o.ctx[m]);break;default:h=o.ctx[m]}c+=`let ${m} = ${h}
`}let u=nNt.serialize(o.data),d=JSON.stringify(u),p=`
      async function __executor__() {
        const v8 = require('v8')
        ${c}
        const dataParsed = JSON.parse('${d}')
        const dataBuffer = Buffer.from(dataParsed.data)
        const dataDeserialized = v8.deserialize(dataBuffer)
        return await (${i.toString()})(dataDeserialized)
      }
      `;r.once("message",m=>{if(this.free(r),typeof m.error>"u"||m.error===null)return a(m.data);let h=new Error(m.error.message);h.stack=m.error.stack,l(h)}),r.once("error",m=>{e.status=NV,l(m),this.tick()}),r.postMessage(p)}catch(c){this.free(r),l(c)}}enqueue({handler:e,config:n,resolve:r,reject:i}){this.taskQueue.push({handler:e,config:n,resolve:r,reject:i}),this.tick()}free(e){for(let n=0;n<this.workers.length;n++)if(e.threadId===this.workers[n].worker.threadId){this.workers[n].status=DV,this.workers[n].worker.removeAllListeners(),this.tick();break}}setup(e={}){return this.maxWorkers=e.maxWorkers>0?e.maxWorkers:kWe,this.maxWorkers>10&&console.warn(`Worker pool has more than 10 workers.
You should also increase the Max Listeners of Node.js (https://nodejs.org/docs/latest/api/events.html#events_emitter_setmaxlisteners_n)
Otherwise, limit them with start({maxWorkers: 10})`),new Promise((n,r)=>{let i=0,o=0;for(let a=0;a<this.maxWorkers;a++){let l=new _We.Worker(SWe.workerFile,{eval:!0});this.workers.push({status:RWe,worker:l}),l.once("online",(c=>()=>{process.nextTick(()=>{this.workers[c].status=DV,this.workers[c].worker.removeAllListeners(),i++,i>0&&i+o===this.maxWorkers&&n()})})(a)),l.once("error",(c=>u=>{this.workers[c].status=NV,this.workers[c].worker.removeAllListeners(),o++,o===this.maxWorkers&&r(u)})(a))}})}async teardown(){if(oNt>=12&&sNt>=5){let e=[];for(let{worker:n}of this.workers)e.push(n.terminate());await Promise.all(e),this.workers=[]}else await new Promise(n=>{let r=0;for(let i=0;i<this.workers.length;i++)this.workers[i].worker.terminate(()=>{r++,r===this.workers.length&&(this.workers=[],n())})})}};ife.default=new rfe});var LV=H(wT=>{"use strict";f();var aNt=wT&&wT.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wT,"__esModule",{value:!0});var Z9=aNt(PWe()),lNt=`job needs a function.
Try with:
> job(() => {...}, config)`,cNt=`job needs an object as ctx.
Try with:
> job(() => {...}, {ctx: {...}})`;function uNt(t,e={ctx:{},data:{}}){return new Promise((n,r)=>{if(typeof t!="function")return r(new Error(lNt));if(e.ctx=e.ctx||{},e.data=e.data||{},typeof e.ctx!="object")return r(new Error(cNt));Z9.default.enqueue({handler:t,config:e,resolve:n,reject:r})})}s(uNt,"job");wT.job=uNt;wT.stop=Z9.default.teardown.bind(Z9.default);wT.start=Z9.default.setup.bind(Z9.default)});var YWe=H(_T=>{"use strict";f();var wA=_T&&_T.__classPrivateFieldGet||function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},mfe=_T&&_T.__classPrivateFieldSet||function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},My,Pb;Object.defineProperty(_T,"__esModule",{value:!0});var hfe=class{static{s(this,"AwaitLock")}constructor(){My.set(this,!1),Pb.set(this,new Set)}get acquired(){return wA(this,My,"f")}acquireAsync({timeout:e}={}){if(!wA(this,My,"f"))return mfe(this,My,!0,"f"),Promise.resolve();if(e==null)return new Promise(i=>{wA(this,Pb,"f").add(i)});let n,r;return Promise.race([new Promise(i=>{n=s(()=>{clearTimeout(r),i()},"resolver"),wA(this,Pb,"f").add(n)}),new Promise((i,o)=>{r=setTimeout(()=>{wA(this,Pb,"f").delete(n),o(new Error("Timed out waiting for lock"))},e)})])}tryAcquire(){return wA(this,My,"f")?!1:(mfe(this,My,!0,"f"),!0)}release(){if(!wA(this,My,"f"))throw new Error("Cannot release an unacquired lock");if(wA(this,Pb,"f").size>0){let[e]=wA(this,Pb,"f");wA(this,Pb,"f").delete(e),e()}else mfe(this,My,!1,"f")}};_T.default=hfe;My=new WeakMap,Pb=new WeakMap});var rVe=H((T$r,nVe)=>{f();var f3=1e3,p3=f3*60,m3=p3*60,FT=m3*24,FOt=FT*7,MOt=FT*365.25;nVe.exports=function(t,e){e=e||{};var n=typeof t;if(n==="string"&&t.length>0)return QOt(t);if(n==="number"&&isFinite(t))return e.long?UOt(t):OOt(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function QOt(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var n=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*MOt;case"weeks":case"week":case"w":return n*FOt;case"days":case"day":case"d":return n*FT;case"hours":case"hour":case"hrs":case"hr":case"h":return n*m3;case"minutes":case"minute":case"mins":case"min":case"m":return n*p3;case"seconds":case"second":case"secs":case"sec":case"s":return n*f3;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:return}}}}s(QOt,"parse");function OOt(t){var e=Math.abs(t);return e>=FT?Math.round(t/FT)+"d":e>=m3?Math.round(t/m3)+"h":e>=p3?Math.round(t/p3)+"m":e>=f3?Math.round(t/f3)+"s":t+"ms"}s(OOt,"fmtShort");function UOt(t){var e=Math.abs(t);return e>=FT?pz(t,e,FT,"day"):e>=m3?pz(t,e,m3,"hour"):e>=p3?pz(t,e,p3,"minute"):e>=f3?pz(t,e,f3,"second"):t+" ms"}s(UOt,"fmtLong");function pz(t,e,n,r){var i=e>=n*1.5;return Math.round(t/n)+" "+r+(i?"s":"")}s(pz,"plural")});var Vpe=H((S$r,iVe)=>{f();function qOt(t){n.debug=n,n.default=n,n.coerce=c,n.disable=o,n.enable=i,n.enabled=a,n.humanize=rVe(),n.destroy=u,Object.keys(t).forEach(d=>{n[d]=t[d]}),n.names=[],n.skips=[],n.formatters={};function e(d){let p=0;for(let m=0;m<d.length;m++)p=(p<<5)-p+d.charCodeAt(m),p|=0;return n.colors[Math.abs(p)%n.colors.length]}s(e,"selectColor"),n.selectColor=e;function n(d){let p,m=null,h,g;function y(...v){if(!y.enabled)return;let b=y,E=Number(new Date),_=E-(p||E);b.diff=_,b.prev=p,b.curr=E,p=E,v[0]=n.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");let k=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,(N,U)=>{if(N==="%%")return"%";k++;let ne=n.formatters[U];if(typeof ne=="function"){let he=v[k];N=ne.call(b,he),v.splice(k,1),k--}return N}),n.formatArgs.call(b,v),(b.log||n.log).apply(b,v)}return s(y,"debug"),y.namespace=d,y.useColors=n.useColors(),y.color=n.selectColor(d),y.extend=r,y.destroy=n.destroy,Object.defineProperty(y,"enabled",{enumerable:!0,configurable:!1,get:s(()=>m!==null?m:(h!==n.namespaces&&(h=n.namespaces,g=n.enabled(d)),g),"get"),set:s(v=>{m=v},"set")}),typeof n.init=="function"&&n.init(y),y}s(n,"createDebug");function r(d,p){let m=n(this.namespace+(typeof p>"u"?":":p)+d);return m.log=this.log,m}s(r,"extend");function i(d){n.save(d),n.namespaces=d,n.names=[],n.skips=[];let p,m=(typeof d=="string"?d:"").split(/[\s,]+/),h=m.length;for(p=0;p<h;p++)m[p]&&(d=m[p].replace(/\*/g,".*?"),d[0]==="-"?n.skips.push(new RegExp("^"+d.slice(1)+"$")):n.names.push(new RegExp("^"+d+"$")))}s(i,"enable");function o(){let d=[...n.names.map(l),...n.skips.map(l).map(p=>"-"+p)].join(",");return n.enable(""),d}s(o,"disable");function a(d){if(d[d.length-1]==="*")return!0;let p,m;for(p=0,m=n.skips.length;p<m;p++)if(n.skips[p].test(d))return!1;for(p=0,m=n.names.length;p<m;p++)if(n.names[p].test(d))return!0;return!1}s(a,"enabled");function l(d){return d.toString().substring(2,d.toString().length-2).replace(/\.\*\?$/,"*")}s(l,"toNamespace");function c(d){return d instanceof Error?d.stack||d.message:d}s(c,"coerce");function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return s(u,"destroy"),n.enable(n.load()),n}s(qOt,"setup");iVe.exports=qOt});var oVe=H((K0,mz)=>{f();K0.formatArgs=HOt;K0.save=GOt;K0.load=jOt;K0.useColors=WOt;K0.storage=VOt();K0.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();K0.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function WOt(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}s(WOt,"useColors");function HOt(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+mz.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let n=0,r=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(n++,i==="%c"&&(r=n))}),t.splice(r,0,e)}s(HOt,"formatArgs");K0.log=console.debug||console.log||(()=>{});function GOt(t){try{t?K0.storage.setItem("debug",t):K0.storage.removeItem("debug")}catch{}}s(GOt,"save");function jOt(){let t;try{t=K0.storage.getItem("debug")}catch{}return!t&&typeof process<"u"&&"env"in process&&(t=process.env.DEBUG),t}s(jOt,"load");function VOt(){try{return localStorage}catch{}}s(VOt,"localstorage");mz.exports=Vpe()(K0);var{formatters:$Ot}=mz.exports;$Ot.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var aVe=H((D$r,sVe)=>{"use strict";f();sVe.exports=(t,e=process.argv)=>{let n=t.startsWith("-")?"":t.length===1?"-":"--",r=e.indexOf(n+t),i=e.indexOf("--");return r!==-1&&(i===-1||r<i)}});var uVe=H((L$r,cVe)=>{"use strict";f();var zOt=require("os"),lVe=require("tty"),kp=aVe(),{env:Zl}=process,qb;kp("no-color")||kp("no-colors")||kp("color=false")||kp("color=never")?qb=0:(kp("color")||kp("colors")||kp("color=true")||kp("color=always"))&&(qb=1);"FORCE_COLOR"in Zl&&(Zl.FORCE_COLOR==="true"?qb=1:Zl.FORCE_COLOR==="false"?qb=0:qb=Zl.FORCE_COLOR.length===0?1:Math.min(parseInt(Zl.FORCE_COLOR,10),3));function $pe(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}s($pe,"translateLevel");function zpe(t,e){if(qb===0)return 0;if(kp("color=16m")||kp("color=full")||kp("color=truecolor"))return 3;if(kp("color=256"))return 2;if(t&&!e&&qb===void 0)return 0;let n=qb||0;if(Zl.TERM==="dumb")return n;if(process.platform==="win32"){let r=zOt.release().split(".");return Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in Zl)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(r=>r in Zl)||Zl.CI_NAME==="codeship"?1:n;if("TEAMCITY_VERSION"in Zl)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Zl.TEAMCITY_VERSION)?1:0;if(Zl.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Zl){let r=parseInt((Zl.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Zl.TERM_PROGRAM){case"iTerm.app":return r>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Zl.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Zl.TERM)||"COLORTERM"in Zl?1:n}s(zpe,"supportsColor");function YOt(t){let e=zpe(t,t&&t.isTTY);return $pe(e)}s(YOt,"getSupportLevel");cVe.exports={supportsColor:YOt,stdout:$pe(zpe(!0,lVe.isatty(1))),stderr:$pe(zpe(!0,lVe.isatty(2)))}});var fVe=H((Rc,gz)=>{f();var KOt=require("tty"),hz=require("util");Rc.init=rUt;Rc.log=eUt;Rc.formatArgs=XOt;Rc.save=tUt;Rc.load=nUt;Rc.useColors=JOt;Rc.destroy=hz.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");Rc.colors=[6,2,3,4,5,1];try{let t=uVe();t&&(t.stderr||t).level>=2&&(Rc.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}Rc.inspectOpts=Object.keys(process.env).filter(t=>/^debug_/i.test(t)).reduce((t,e)=>{let n=e.substring(6).toLowerCase().replace(/_([a-z])/g,(i,o)=>o.toUpperCase()),r=process.env[e];return/^(yes|on|true|enabled)$/i.test(r)?r=!0:/^(no|off|false|disabled)$/i.test(r)?r=!1:r==="null"?r=null:r=Number(r),t[n]=r,t},{});function JOt(){return"colors"in Rc.inspectOpts?!!Rc.inspectOpts.colors:KOt.isatty(process.stderr.fd)}s(JOt,"useColors");function XOt(t){let{namespace:e,useColors:n}=this;if(n){let r=this.color,i="\x1B[3"+(r<8?r:"8;5;"+r),o=`  ${i};1m${e} \x1B[0m`;t[0]=o+t[0].split(`
`).join(`
`+o),t.push(i+"m+"+gz.exports.humanize(this.diff)+"\x1B[0m")}else t[0]=ZOt()+e+" "+t[0]}s(XOt,"formatArgs");function ZOt(){return Rc.inspectOpts.hideDate?"":new Date().toISOString()+" "}s(ZOt,"getDate");function eUt(...t){return process.stderr.write(hz.format(...t)+`
`)}s(eUt,"log");function tUt(t){t?process.env.DEBUG=t:delete process.env.DEBUG}s(tUt,"save");function nUt(){return process.env.DEBUG}s(nUt,"load");function rUt(t){t.inspectOpts={};let e=Object.keys(Rc.inspectOpts);for(let n=0;n<e.length;n++)t.inspectOpts[e[n]]=Rc.inspectOpts[e[n]]}s(rUt,"init");gz.exports=Vpe()(Rc);var{formatters:dVe}=gz.exports;dVe.o=function(t){return this.inspectOpts.colors=this.useColors,hz.inspect(t,this.inspectOpts).split(`
`).map(e=>e.trim()).join(" ")};dVe.O=function(t){return this.inspectOpts.colors=this.useColors,hz.inspect(t,this.inspectOpts)}});var MT=H((U$r,Ype)=>{f();typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?Ype.exports=oVe():Ype.exports=fVe()});var tme=H((G$r,gVe)=>{f();var T6=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,iUt=typeof AbortController=="function",Az=iUt?AbortController:class{static{s(this,"AbortController")}constructor(){this.signal=new pVe}abort(){this.signal.dispatchEvent("abort")}},oUt=typeof AbortSignal=="function",sUt=typeof Az.AbortSignal=="function",pVe=oUt?AbortSignal:sUt?Az.AbortController:class{static{s(this,"AbortSignal")}constructor(){this.aborted=!1,this._listeners=[]}dispatchEvent(e){if(e==="abort"){this.aborted=!0;let n={type:e,target:this};this.onabort(n),this._listeners.forEach(r=>r(n),this)}}onabort(){}addEventListener(e,n){e==="abort"&&this._listeners.push(n)}removeEventListener(e,n){e==="abort"&&(this._listeners=this._listeners.filter(r=>r!==n))}},Zpe=new Set,Kpe=s((t,e)=>{let n=`LRU_CACHE_OPTION_${t}`;yz(n)&&eme(n,`${t} option`,`options.${e}`,g3)},"deprecatedOption"),Jpe=s((t,e)=>{let n=`LRU_CACHE_METHOD_${t}`;if(yz(n)){let{prototype:r}=g3,{get:i}=Object.getOwnPropertyDescriptor(r,t);eme(n,`${t} method`,`cache.${e}()`,i)}},"deprecatedMethod"),aUt=s((t,e)=>{let n=`LRU_CACHE_PROPERTY_${t}`;if(yz(n)){let{prototype:r}=g3,{get:i}=Object.getOwnPropertyDescriptor(r,t);eme(n,`${t} property`,`cache.${e}`,i)}},"deprecatedProperty"),mVe=s((...t)=>{typeof process=="object"&&process&&typeof process.emitWarning=="function"?process.emitWarning(...t):console.error(...t)},"emitWarning"),yz=s(t=>!Zpe.has(t),"shouldWarn"),eme=s((t,e,n,r)=>{Zpe.add(t);let i=`The ${e} is deprecated. Please use ${n} instead.`;mVe(i,"DeprecationWarning",t,r)},"warn"),QT=s(t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),"isPosInt"),hVe=s(t=>QT(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?h3:null:null,"getUintArray"),h3=class extends Array{static{s(this,"ZeroArray")}constructor(e){super(e),this.fill(0)}},Xpe=class{static{s(this,"Stack")}constructor(e){if(e===0)return[];let n=hVe(e);this.heap=new n(e),this.length=0}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}},g3=class t{static{s(this,"LRUCache")}constructor(e={}){let{max:n=0,ttl:r,ttlResolution:i=1,ttlAutopurge:o,updateAgeOnGet:a,updateAgeOnHas:l,allowStale:c,dispose:u,disposeAfter:d,noDisposeOnSet:p,noUpdateTTL:m,maxSize:h=0,sizeCalculation:g,fetchMethod:y,fetchContext:v,noDeleteOnFetchRejection:b,noDeleteOnStaleGet:E}=e,{length:_,maxAge:k,stale:P}=e instanceof t?{}:e;if(n!==0&&!QT(n))throw new TypeError("max option must be a nonnegative integer");let N=n?hVe(n):Array;if(!N)throw new Error("invalid max value: "+n);if(this.max=n,this.maxSize=h,this.sizeCalculation=g||_,this.sizeCalculation){if(!this.maxSize)throw new TypeError("cannot set sizeCalculation without setting maxSize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(this.fetchMethod=y||null,this.fetchMethod&&typeof this.fetchMethod!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.fetchContext=v,!this.fetchMethod&&v!==void 0)throw new TypeError("cannot set fetchContext without fetchMethod");if(this.keyMap=new Map,this.keyList=new Array(n).fill(null),this.valList=new Array(n).fill(null),this.next=new N(n),this.prev=new N(n),this.head=0,this.tail=0,this.free=new Xpe(n),this.initialFill=1,this.size=0,typeof u=="function"&&(this.dispose=u),typeof d=="function"?(this.disposeAfter=d,this.disposed=[]):(this.disposeAfter=null,this.disposed=null),this.noDisposeOnSet=!!p,this.noUpdateTTL=!!m,this.noDeleteOnFetchRejection=!!b,this.maxSize!==0){if(!QT(this.maxSize))throw new TypeError("maxSize must be a positive integer if specified");this.initializeSizeTracking()}if(this.allowStale=!!c||!!P,this.noDeleteOnStaleGet=!!E,this.updateAgeOnGet=!!a,this.updateAgeOnHas=!!l,this.ttlResolution=QT(i)||i===0?i:1,this.ttlAutopurge=!!o,this.ttl=r||k||0,this.ttl){if(!QT(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.initializeTTLTracking()}if(this.max===0&&this.ttl===0&&this.maxSize===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.max&&!this.maxSize){let U="LRU_CACHE_UNBOUNDED";yz(U)&&(Zpe.add(U),mVe("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",U,t))}P&&Kpe("stale","allowStale"),k&&Kpe("maxAge","ttl"),_&&Kpe("length","sizeCalculation")}getRemainingTTL(e){return this.has(e,{updateAgeOnHas:!1})?1/0:0}initializeTTLTracking(){this.ttls=new h3(this.max),this.starts=new h3(this.max),this.setItemTTL=(r,i,o=T6.now())=>{if(this.starts[r]=i!==0?o:0,this.ttls[r]=i,i!==0&&this.ttlAutopurge){let a=setTimeout(()=>{this.isStale(r)&&this.delete(this.keyList[r])},i+1);a.unref&&a.unref()}},this.updateItemAge=r=>{this.starts[r]=this.ttls[r]!==0?T6.now():0};let e=0,n=s(()=>{let r=T6.now();if(this.ttlResolution>0){e=r;let i=setTimeout(()=>e=0,this.ttlResolution);i.unref&&i.unref()}return r},"getNow");this.getRemainingTTL=r=>{let i=this.keyMap.get(r);return i===void 0?0:this.ttls[i]===0||this.starts[i]===0?1/0:this.starts[i]+this.ttls[i]-(e||n())},this.isStale=r=>this.ttls[r]!==0&&this.starts[r]!==0&&(e||n())-this.starts[r]>this.ttls[r]}updateItemAge(e){}setItemTTL(e,n,r){}isStale(e){return!1}initializeSizeTracking(){this.calculatedSize=0,this.sizes=new h3(this.max),this.removeItemSize=e=>{this.calculatedSize-=this.sizes[e],this.sizes[e]=0},this.requireSize=(e,n,r,i)=>{if(!QT(r))if(i){if(typeof i!="function")throw new TypeError("sizeCalculation must be a function");if(r=i(n,e),!QT(r))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer)");return r},this.addItemSize=(e,n)=>{this.sizes[e]=n;let r=this.maxSize-this.sizes[e];for(;this.calculatedSize>r;)this.evict(!0);this.calculatedSize+=this.sizes[e]}}removeItemSize(e){}addItemSize(e,n){}requireSize(e,n,r,i){if(r||i)throw new TypeError("cannot set size without setting maxSize on cache")}*indexes({allowStale:e=this.allowStale}={}){if(this.size)for(let n=this.tail;!(!this.isValidIndex(n)||((e||!this.isStale(n))&&(yield n),n===this.head));)n=this.prev[n]}*rindexes({allowStale:e=this.allowStale}={}){if(this.size)for(let n=this.head;!(!this.isValidIndex(n)||((e||!this.isStale(n))&&(yield n),n===this.tail));)n=this.next[n]}isValidIndex(e){return this.keyMap.get(this.keyList[e])===e}*entries(){for(let e of this.indexes())yield[this.keyList[e],this.valList[e]]}*rentries(){for(let e of this.rindexes())yield[this.keyList[e],this.valList[e]]}*keys(){for(let e of this.indexes())yield this.keyList[e]}*rkeys(){for(let e of this.rindexes())yield this.keyList[e]}*values(){for(let e of this.indexes())yield this.valList[e]}*rvalues(){for(let e of this.rindexes())yield this.valList[e]}[Symbol.iterator](){return this.entries()}find(e,n={}){for(let r of this.indexes())if(e(this.valList[r],this.keyList[r],this))return this.get(this.keyList[r],n)}forEach(e,n=this){for(let r of this.indexes())e.call(n,this.valList[r],this.keyList[r],this)}rforEach(e,n=this){for(let r of this.rindexes())e.call(n,this.valList[r],this.keyList[r],this)}get prune(){return Jpe("prune","purgeStale"),this.purgeStale}purgeStale(){let e=!1;for(let n of this.rindexes({allowStale:!0}))this.isStale(n)&&(this.delete(this.keyList[n]),e=!0);return e}dump(){let e=[];for(let n of this.indexes({allowStale:!0})){let r=this.keyList[n],i=this.valList[n],a={value:this.isBackgroundFetch(i)?i.__staleWhileFetching:i};if(this.ttls){a.ttl=this.ttls[n];let l=T6.now()-this.starts[n];a.start=Math.floor(Date.now()-l)}this.sizes&&(a.size=this.sizes[n]),e.unshift([r,a])}return e}load(e){this.clear();for(let[n,r]of e){if(r.start){let i=Date.now()-r.start;r.start=T6.now()-i}this.set(n,r.value,r)}}dispose(e,n,r){}set(e,n,{ttl:r=this.ttl,start:i,noDisposeOnSet:o=this.noDisposeOnSet,size:a=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:c=this.noUpdateTTL}={}){if(a=this.requireSize(e,n,a,l),this.maxSize&&a>this.maxSize)return this;let u=this.size===0?void 0:this.keyMap.get(e);if(u===void 0)u=this.newIndex(),this.keyList[u]=e,this.valList[u]=n,this.keyMap.set(e,u),this.next[this.tail]=u,this.prev[u]=this.tail,this.tail=u,this.size++,this.addItemSize(u,a),c=!1;else{let d=this.valList[u];n!==d&&(this.isBackgroundFetch(d)?d.__abortController.abort():o||(this.dispose(d,e,"set"),this.disposeAfter&&this.disposed.push([d,e,"set"])),this.removeItemSize(u),this.valList[u]=n,this.addItemSize(u,a)),this.moveToTail(u)}if(r!==0&&this.ttl===0&&!this.ttls&&this.initializeTTLTracking(),c||this.setItemTTL(u,r,i),this.disposeAfter)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return this}newIndex(){return this.size===0?this.tail:this.size===this.max&&this.max!==0?this.evict(!1):this.free.length!==0?this.free.pop():this.initialFill++}pop(){if(this.size){let e=this.valList[this.head];return this.evict(!0),e}}evict(e){let n=this.head,r=this.keyList[n],i=this.valList[n];return this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,r,"evict"),this.disposeAfter&&this.disposed.push([i,r,"evict"])),this.removeItemSize(n),e&&(this.keyList[n]=null,this.valList[n]=null,this.free.push(n)),this.head=this.next[n],this.keyMap.delete(r),this.size--,n}has(e,{updateAgeOnHas:n=this.updateAgeOnHas}={}){let r=this.keyMap.get(e);return r!==void 0&&!this.isStale(r)?(n&&this.updateItemAge(r),!0):!1}peek(e,{allowStale:n=this.allowStale}={}){let r=this.keyMap.get(e);if(r!==void 0&&(n||!this.isStale(r))){let i=this.valList[r];return this.isBackgroundFetch(i)?i.__staleWhileFetching:i}}backgroundFetch(e,n,r,i){let o=n===void 0?void 0:this.valList[n];if(this.isBackgroundFetch(o))return o;let a=new Az,l={signal:a.signal,options:r,context:i},c=s(m=>(a.signal.aborted||this.set(e,m,l.options),m),"cb"),u=s(m=>{if(this.valList[n]===p&&(!r.noDeleteOnFetchRejection||p.__staleWhileFetching===void 0?this.delete(e):this.valList[n]=p.__staleWhileFetching),p.__returned===p)throw m},"eb"),d=s(m=>m(this.fetchMethod(e,o,l)),"pcall"),p=new Promise(d).then(c,u);return p.__abortController=a,p.__staleWhileFetching=o,p.__returned=null,n===void 0?(this.set(e,p,l.options),n=this.keyMap.get(e)):this.valList[n]=p,p}isBackgroundFetch(e){return e&&typeof e=="object"&&typeof e.then=="function"&&Object.prototype.hasOwnProperty.call(e,"__staleWhileFetching")&&Object.prototype.hasOwnProperty.call(e,"__returned")&&(e.__returned===e||e.__returned===null)}async fetch(e,{allowStale:n=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:l=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:u=this.noUpdateTTL,noDeleteOnFetchRejection:d=this.noDeleteOnFetchRejection,fetchContext:p=this.fetchContext,forceRefresh:m=!1}={}){if(!this.fetchMethod)return this.get(e,{allowStale:n,updateAgeOnGet:r,noDeleteOnStaleGet:i});let h={allowStale:n,updateAgeOnGet:r,noDeleteOnStaleGet:i,ttl:o,noDisposeOnSet:a,size:l,sizeCalculation:c,noUpdateTTL:u,noDeleteOnFetchRejection:d},g=this.keyMap.get(e);if(g===void 0){let y=this.backgroundFetch(e,g,h,p);return y.__returned=y}else{let y=this.valList[g];if(this.isBackgroundFetch(y))return n&&y.__staleWhileFetching!==void 0?y.__staleWhileFetching:y.__returned=y;if(!m&&!this.isStale(g))return this.moveToTail(g),r&&this.updateItemAge(g),y;let v=this.backgroundFetch(e,g,h,p);return n&&v.__staleWhileFetching!==void 0?v.__staleWhileFetching:v.__returned=v}}get(e,{allowStale:n=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:i=this.noDeleteOnStaleGet}={}){let o=this.keyMap.get(e);if(o!==void 0){let a=this.valList[o],l=this.isBackgroundFetch(a);return this.isStale(o)?l?n?a.__staleWhileFetching:void 0:(i||this.delete(e),n?a:void 0):l?void 0:(this.moveToTail(o),r&&this.updateItemAge(o),a)}}connect(e,n){this.prev[n]=e,this.next[e]=n}moveToTail(e){e!==this.tail&&(e===this.head?this.head=this.next[e]:this.connect(this.prev[e],this.next[e]),this.connect(this.tail,e),this.tail=e)}get del(){return Jpe("del","delete"),this.delete}delete(e){let n=!1;if(this.size!==0){let r=this.keyMap.get(e);if(r!==void 0)if(n=!0,this.size===1)this.clear();else{this.removeItemSize(r);let i=this.valList[r];this.isBackgroundFetch(i)?i.__abortController.abort():(this.dispose(i,e,"delete"),this.disposeAfter&&this.disposed.push([i,e,"delete"])),this.keyMap.delete(e),this.keyList[r]=null,this.valList[r]=null,r===this.tail?this.tail=this.prev[r]:r===this.head?this.head=this.next[r]:(this.next[this.prev[r]]=this.next[r],this.prev[this.next[r]]=this.prev[r]),this.size--,this.free.push(r)}}if(this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift());return n}clear(){for(let e of this.rindexes({allowStale:!0})){let n=this.valList[e];if(this.isBackgroundFetch(n))n.__abortController.abort();else{let r=this.keyList[e];this.dispose(n,r,"delete"),this.disposeAfter&&this.disposed.push([n,r,"delete"])}}if(this.keyMap.clear(),this.valList.fill(null),this.keyList.fill(null),this.ttls&&(this.ttls.fill(0),this.starts.fill(0)),this.sizes&&this.sizes.fill(0),this.head=0,this.tail=0,this.initialFill=1,this.free.length=0,this.calculatedSize=0,this.size=0,this.disposed)for(;this.disposed.length;)this.disposeAfter(...this.disposed.shift())}get reset(){return Jpe("reset","clear"),this.clear}get length(){return aUt("length","size"),this.size}static get AbortController(){return Az}static get AbortSignal(){return pVe}};gVe.exports=g3});var ime=H(($$r,AVe)=>{"use strict";f();var w6=class extends Error{static{s(this,"FetchBaseError")}constructor(e,n,r){super(e),this.type=n,this._name=r}get name(){return this._name}get[Symbol.toStringTag](){return this._name}},nme=class extends w6{static{s(this,"FetchError")}constructor(e,n,r){super(e,n,"FetchError"),r&&(this.code=r.code,this.errno=r.errno,this.erroredSysCall=r.syscall)}},rme=class extends w6{static{s(this,"AbortError")}constructor(e,n="aborted"){super(e,n,"AbortError")}};AVe.exports={FetchBaseError:w6,FetchError:nme,AbortError:rme}});var Gy=H((K$r,CVe)=>{"use strict";f();var{constants:{MAX_LENGTH:lUt}}=require("buffer"),{pipeline:Cz,PassThrough:cUt}=require("stream"),{promisify:uUt}=require("util"),{createGunzip:dUt,createInflate:fUt,createBrotliDecompress:pUt,constants:{Z_SYNC_FLUSH:yVe}}=require("zlib"),mUt=MT()("helix-fetch:utils"),hUt=uUt(Cz),gUt=s((t,e)=>t===204||t===304||+e["content-length"]==0?!1:/^\s*(?:(x-)?deflate|(x-)?gzip|br)\s*$/.test(e["content-encoding"]),"canDecode"),AUt=s((t,e,n,r)=>{if(!gUt(t,e))return n;let i=s(o=>{o&&(mUt(`encountered error while decoding stream: ${o}`),r(o))},"cb");switch(e["content-encoding"].trim()){case"gzip":case"x-gzip":return Cz(n,dUt({flush:yVe,finishFlush:yVe}),i);case"deflate":case"x-deflate":return Cz(n,fUt(),i);case"br":return Cz(n,pUt(),i);default:return n}},"decodeStream"),yUt=s(t=>{if(!t||typeof t!="object"||Object.prototype.toString.call(t)!=="[object Object]")return!1;if(Object.getPrototypeOf(t)===null)return!0;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e},"isPlainObject"),xz=s((t,e)=>{if(Buffer.isBuffer(t))return t.length;switch(typeof t){case"string":return t.length*2;case"boolean":return 4;case"number":return 8;case"symbol":return Symbol.keyFor(t)?Symbol.keyFor(t).length*2:(t.toString().length-8)*2;case"object":return Array.isArray(t)?CUt(t,e):xUt(t,e);default:return 0}},"calcSize"),CUt=s((t,e)=>(e.add(t),t.map(n=>e.has(n)?0:xz(n,e)).reduce((n,r)=>n+r,0)),"calcArraySize"),xUt=s((t,e)=>{if(t==null)return 0;e.add(t);let n=0,r=[];for(let i in t)r.push(i);return r.push(...Object.getOwnPropertySymbols(t)),r.forEach(i=>{if(n+=xz(i,e),typeof t[i]=="object"&&t[i]!==null){if(e.has(t[i]))return;e.add(t[i])}n+=xz(t[i],e)}),n},"calcObjectSize"),vUt=s(t=>xz(t,new WeakSet),"sizeof"),bUt=s(async t=>{let e=new cUt,n=0,r=[];return e.on("data",i=>{if(n+i.length>lUt)throw new Error("Buffer.constants.MAX_SIZE exceeded");r.push(i),n+=i.length}),await hUt(t,e),Buffer.concat(r,n)},"streamToBuffer");CVe.exports={decodeStream:AUt,isPlainObject:yUt,sizeof:vUt,streamToBuffer:bUt}});var bz=H((Z$r,EVe)=>{"use strict";f();var{PassThrough:xVe,Readable:jy}=require("stream"),{types:{isAnyArrayBuffer:bVe}}=require("util"),{FetchError:EUt,FetchBaseError:IUt}=ime(),{streamToBuffer:TUt}=Gy(),wUt=Buffer.alloc(0),Bp=Symbol("Body internals"),_Ut=s(t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),"toArrayBuffer"),vVe=s(async t=>{if(t[Bp].disturbed)throw new TypeError("Already read");if(t[Bp].error)throw new TypeError(`Stream had error: ${t[Bp].error.message}`);t[Bp].disturbed=!0;let{stream:e}=t[Bp];return e===null?wUt:TUt(e)},"consume"),vz=class{static{s(this,"Body")}constructor(e){let n;e==null?n=null:e instanceof URLSearchParams?n=jy.from(e.toString()):e instanceof jy?n=e:Buffer.isBuffer(e)?n=jy.from(e):bVe(e)?n=jy.from(Buffer.from(e)):typeof e=="string"||e instanceof String?n=jy.from(e):n=jy.from(String(e)),this[Bp]={stream:n,disturbed:!1,error:null},e instanceof jy&&n.on("error",r=>{let i=r instanceof IUt?r:new EUt(`Invalid response body while trying to fetch ${this.url}: ${r.message}`,"system",r);this[Bp].error=i})}get body(){return this[Bp].stream}get bodyUsed(){return this[Bp].disturbed}async buffer(){return vVe(this)}async arrayBuffer(){return _Ut(await this.buffer())}async text(){return(await vVe(this)).toString()}async json(){return JSON.parse(await this.text())}};Object.defineProperties(vz.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0}});var SUt=s(t=>{if(t[Bp].disturbed)throw new TypeError("Cannot clone: already read");let{stream:e}=t[Bp],n=e;if(e instanceof jy){n=new xVe;let r=new xVe;e.pipe(n),e.pipe(r),t[Bp].stream=r}return n},"cloneStream"),RUt=s(t=>t===null?null:typeof t=="string"?"text/plain; charset=utf-8":t instanceof URLSearchParams?"application/x-www-form-urlencoded; charset=utf-8":Buffer.isBuffer(t)||bVe(t)||t instanceof jy?null:"text/plain; charset=utf-8","guessContentType");EVe.exports={Body:vz,cloneStream:SUt,guessContentType:RUt}});var A3=H((nzr,_Ve)=>{"use strict";f();var{validateHeaderName:IVe,validateHeaderValue:TVe}=require("http"),{isPlainObject:kUt}=Gy(),Vy=Symbol("Headers internals"),_6=s(t=>{let e=typeof t!="string"?String(t):t;if(typeof IVe=="function")IVe(e);else if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(e)){let n=new TypeError(`Header name must be a valid HTTP token [${e}]`);throw Object.defineProperty(n,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),n}return e.toLowerCase()},"normalizeName"),wVe=s((t,e)=>{let n=typeof t!="string"?String(t):t;if(typeof TVe=="function")TVe(e,n);else if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(n)){let r=new TypeError(`Invalid character in header content ["${e}"]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_CHAR"}),r}return n},"normalizeValue"),Ez=class t{static{s(this,"Headers")}constructor(e={}){if(this[Vy]={map:new Map},e instanceof t)e.forEach((n,r)=>{this.append(r,n)});else if(Array.isArray(e))e.forEach(([n,r])=>{this.append(n,r)});else if(kUt(e))for(let[n,r]of Object.entries(e))this.append(n,r)}set(e,n){this[Vy].map.set(_6(e),wVe(n,e))}has(e){return this[Vy].map.has(_6(e))}get(e){let n=this[Vy].map.get(_6(e));return n===void 0?null:n}append(e,n){let r=_6(e),i=wVe(n,e),o=this[Vy].map.get(r);this[Vy].map.set(r,o?`${o}, ${i}`:i)}delete(e){this[Vy].map.delete(_6(e))}forEach(e,n){for(let r of this.keys())e.call(n,this.get(r),r)}keys(){return Array.from(this[Vy].map.keys()).sort()}*values(){for(let e of this.keys())yield this.get(e)}*entries(){for(let e of this.keys())yield[e,this.get(e)]}[Symbol.iterator](){return this.entries()}get[Symbol.toStringTag](){return this.constructor.name}plain(){return Object.fromEntries(this[Vy].map)}};Object.defineProperties(Ez.prototype,["append","delete","entries","forEach","get","has","keys","set","values"].reduce((t,e)=>(t[e]={enumerable:!0},t),{}));_Ve.exports={Headers:Ez}});var ome=H((ozr,SVe)=>{"use strict";f();var{EventEmitter:BUt}=require("events"),Ah=Symbol("AbortSignal internals"),y3=class{static{s(this,"AbortSignal")}constructor(){this[Ah]={eventEmitter:new BUt,onabort:null,aborted:!1}}get aborted(){return this[Ah].aborted}get onabort(){return this[Ah].onabort}set onabort(e){this[Ah].onabort=e}get[Symbol.toStringTag](){return this.constructor.name}removeEventListener(e,n){this[Ah].eventEmitter.removeListener(e,n)}addEventListener(e,n){this[Ah].eventEmitter.on(e,n)}dispatchEvent(e){let n={type:e,target:this},r=`on${e}`;typeof this[Ah][r]=="function"&&this[r](n),this[Ah].eventEmitter.emit(e,n)}fire(){this[Ah].aborted=!0,this.dispatchEvent("abort")}};Object.defineProperties(y3.prototype,{addEventListener:{enumerable:!0},removeEventListener:{enumerable:!0},dispatchEvent:{enumerable:!0},aborted:{enumerable:!0},onabort:{enumerable:!0}});var Tz=class extends y3{static{s(this,"TimeoutSignal")}constructor(e){if(!Number.isInteger(e))throw new TypeError(`Expected an integer, got ${typeof e}`);super(),this[Ah].timerId=setTimeout(()=>{this.fire()},e)}clear(){clearTimeout(this[Ah].timerId)}};Object.defineProperties(Tz.prototype,{clear:{enumerable:!0}});var Iz=Symbol("AbortController internals"),wz=class{static{s(this,"AbortController")}constructor(){this[Iz]={signal:new y3}}get signal(){return this[Iz].signal}get[Symbol.toStringTag](){return this.constructor.name}abort(){this[Iz].signal.aborted||this[Iz].signal.fire()}};Object.defineProperties(wz.prototype,{signal:{enumerable:!0},abort:{enumerable:!0}});SVe.exports={AbortController:wz,AbortSignal:y3,TimeoutSignal:Tz}});var S6=H((lzr,BVe)=>{"use strict";f();var{randomBytes:PUt}=require("crypto"),{Readable:DUt}=require("stream"),ame=s(t=>typeof t=="object"&&["arrayBuffer","stream","text","slice","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&typeof t.type=="string"&&typeof t.size=="number"&&/^(Blob|File)$/.test(t[Symbol.toStringTag]),"isBlob"),NUt=s(t=>t!=null&&typeof t=="object"&&["append","delete","get","getAll","has","set","keys","values","entries","constructor"].map(e=>typeof t[e]).filter(e=>e!=="function").length===0&&t[Symbol.toStringTag]==="FormData","isFormData"),RVe=s(t=>`--${t}--\r
\r
`,"getFooter"),kVe=s((t,e,n)=>{let r="";return r+=`--${t}\r
`,r+=`Content-Disposition: form-data; name="${e}"`,ame(n)&&(r+=`; filename="${n.name}"\r
`,r+=`Content-Type: ${n.type||"application/octet-stream"}`),`${r}\r
\r
`},"getHeader");async function*LUt(t,e){for(let[n,r]of t)yield kVe(e,n,r),ame(r)?yield*r.stream():yield r,yield`\r
`;yield RVe(e)}s(LUt,"formDataIterator");var FUt=s((t,e)=>{let n=0;for(let[r,i]of t)n+=Buffer.byteLength(kVe(e,r,i)),n+=ame(i)?i.size:Buffer.byteLength(String(i)),n+=Buffer.byteLength(`\r
`);return n+=Buffer.byteLength(RVe(e)),n},"getFormDataLength"),sme=class{static{s(this,"FormDataSerializer")}constructor(e){this.fd=e,this.boundary=PUt(8).toString("hex")}length(){return typeof this._length>"u"&&(this._length=FUt(this.fd,this.boundary)),this._length}contentType(){return`multipart/form-data; boundary=${this.boundary}`}stream(){return DUt.from(LUt(this.fd,this.boundary))}};BVe.exports={isFormData:NUt,FormDataSerializer:sme}});var DVe=H((fzr,PVe)=>{"use strict";f();var{AbortSignal:dzr}=ome(),{Body:MUt,cloneStream:QUt,guessContentType:OUt}=bz(),{Headers:UUt}=A3(),{isPlainObject:qUt}=Gy(),{isFormData:WUt,FormDataSerializer:HUt}=S6(),GUt=20,Wb=Symbol("Request internals"),_z=class t extends MUt{static{s(this,"Request")}constructor(e,n={}){let r=e instanceof t?e:null,i=r?new URL(r.url):new URL(e),o=n.method||r&&r.method||"GET";if(o=o.toUpperCase(),(n.body!=null||r&&r.body!==null)&&["GET","HEAD"].includes(o))throw new TypeError("Request with GET/HEAD method cannot have body");let a=n.body||(r&&r.body?QUt(r):null),l=new UUt(n.headers||r&&r.headers||{});if(WUt(a)&&!l.has("content-type")){let p=new HUt(a);a=p.stream(),l.set("content-type",p.contentType()),!l.has("transfer-encoding")&&!l.has("content-length")&&l.set("content-length",p.length())}if(!l.has("content-type"))if(qUt(a))a=JSON.stringify(a),l.set("content-type","application/json");else{let p=OUt(a);p&&l.set("content-type",p)}super(a);let c=r?r.signal:null;"signal"in n&&(c=n.signal);let u=n.redirect||r&&r.redirect||"follow";if(!["follow","error","manual"].includes(u))throw new TypeError(`'${u}' is not a valid redirect option`);let d=n.cache||r&&r.cache||"default";if(!["default","no-store","reload","no-cache","force-cache","only-if-cached"].includes(d))throw new TypeError(`'${d}' is not a valid cache option`);this[Wb]={init:{...n},method:o,redirect:u,cache:d,headers:l,parsedURL:i,signal:c},n.follow===void 0?!r||r.follow===void 0?this.follow=GUt:this.follow=r.follow:this.follow=n.follow,this.counter=n.counter||r&&r.counter||0,n.compress===void 0?!r||r.compress===void 0?this.compress=!0:this.compress=r.compress:this.compress=n.compress,n.decode===void 0?!r||r.decode===void 0?this.decode=!0:this.decode=r.decode:this.decode=n.decode}get method(){return this[Wb].method}get url(){return this[Wb].parsedURL.toString()}get headers(){return this[Wb].headers}get redirect(){return this[Wb].redirect}get cache(){return this[Wb].cache}get signal(){return this[Wb].signal}clone(){return new t(this)}get init(){return this[Wb].init}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(_z.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},cache:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0}});PVe.exports={Request:_z}});var lme=H((hzr,NVe)=>{"use strict";f();var{Body:jUt,cloneStream:VUt,guessContentType:$Ut}=bz(),{Headers:zUt}=A3(),{isPlainObject:YUt}=Gy(),{isFormData:KUt,FormDataSerializer:JUt}=S6(),yh=Symbol("Response internals"),Sz=class t extends jUt{static{s(this,"Response")}constructor(e=null,n={}){let r=new zUt(n.headers),i=e;if(KUt(i)&&!r.has("content-type")){let o=new JUt(i);i=o.stream(),r.set("content-type",o.contentType()),!r.has("transfer-encoding")&&!r.has("content-length")&&r.set("content-length",o.length())}if(i!==null&&!r.has("content-type"))if(YUt(i))i=JSON.stringify(i),r.set("content-type","application/json");else{let o=$Ut(i);o&&r.set("content-type",o)}super(i),this[yh]={url:n.url,status:n.status||200,statusText:n.statusText||"",headers:r,httpVersion:n.httpVersion,decoded:n.decoded,counter:n.counter}}get url(){return this[yh].url||""}get status(){return this[yh].status}get statusText(){return this[yh].statusText}get ok(){return this[yh].status>=200&&this[yh].status<300}get redirected(){return this[yh].counter>0}get headers(){return this[yh].headers}get httpVersion(){return this[yh].httpVersion}get decoded(){return this[yh].decoded}static redirect(e,n=302){if(![301,302,303,307,308].includes(n))throw new RangeError("Invalid status code");return new t(null,{headers:{location:new URL(e).toString()},status:n})}clone(){if(this.bodyUsed)throw new TypeError("Cannot clone: already read");return new t(VUt(this),{...this[yh]})}get[Symbol.toStringTag](){return this.constructor.name}};Object.defineProperties(Sz.prototype,{url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});NVe.exports={Response:Sz}});var FVe=H((Czr,LVe)=>{"use strict";f();var XUt=new Set([200,203,204,206,300,301,308,404,405,410,414,501]),ZUt=new Set([200,203,204,300,301,302,303,307,308,404,405,410,414,501]),eqt=new Set([500,502,503,504]),tqt={date:!0,connection:!0,"keep-alive":!0,"proxy-authenticate":!0,"proxy-authorization":!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0},nqt={"content-length":!0,"content-encoding":!0,"transfer-encoding":!0,"content-range":!0};function OT(t){let e=parseInt(t,10);return isFinite(e)?e:0}s(OT,"toNumberOrZero");function rqt(t){return t?eqt.has(t.status):!0}s(rqt,"isErrorResponse");function cme(t){let e={};if(!t)return e;let n=t.trim().split(/,/);for(let r of n){let[i,o]=r.split(/=/,2);e[i.trim()]=o===void 0?!0:o.trim().replace(/^"|"$/g,"")}return e}s(cme,"parseCacheControl");function iqt(t){let e=[];for(let n in t){let r=t[n];e.push(r===!0?n:n+"="+r)}if(e.length)return e.join(", ")}s(iqt,"formatCacheControl");LVe.exports=class{static{s(this,"CachePolicy")}constructor(e,n,{shared:r,cacheHeuristic:i,immutableMinTimeToLive:o,ignoreCargoCult:a,_fromObject:l}={}){if(l){this._fromObject(l);return}if(!n||!n.headers)throw Error("Response headers missing");this._assertRequestHasHeaders(e),this._responseTime=this.now(),this._isShared=r!==!1,this._cacheHeuristic=i!==void 0?i:.1,this._immutableMinTtl=o!==void 0?o:24*3600*1e3,this._status="status"in n?n.status:200,this._resHeaders=n.headers,this._rescc=cme(n.headers["cache-control"]),this._method="method"in e?e.method:"GET",this._url=e.url,this._host=e.headers.host,this._noAuthorization=!e.headers.authorization,this._reqHeaders=n.headers.vary?e.headers:null,this._reqcc=cme(e.headers["cache-control"]),a&&"pre-check"in this._rescc&&"post-check"in this._rescc&&(delete this._rescc["pre-check"],delete this._rescc["post-check"],delete this._rescc["no-cache"],delete this._rescc["no-store"],delete this._rescc["must-revalidate"],this._resHeaders=Object.assign({},this._resHeaders,{"cache-control":iqt(this._rescc)}),delete this._resHeaders.expires,delete this._resHeaders.pragma),n.headers["cache-control"]==null&&/no-cache/.test(n.headers.pragma)&&(this._rescc["no-cache"]=!0)}now(){return Date.now()}storable(){return!!(!this._reqcc["no-store"]&&(this._method==="GET"||this._method==="HEAD"||this._method==="POST"&&this._hasExplicitExpiration())&&ZUt.has(this._status)&&!this._rescc["no-store"]&&(!this._isShared||!this._rescc.private)&&(!this._isShared||this._noAuthorization||this._allowsStoringAuthenticated())&&(this._resHeaders.expires||this._rescc["max-age"]||this._isShared&&this._rescc["s-maxage"]||this._rescc.public||XUt.has(this._status)))}_hasExplicitExpiration(){return this._isShared&&this._rescc["s-maxage"]||this._rescc["max-age"]||this._resHeaders.expires}_assertRequestHasHeaders(e){if(!e||!e.headers)throw Error("Request headers missing")}satisfiesWithoutRevalidation(e){this._assertRequestHasHeaders(e);let n=cme(e.headers["cache-control"]);return n["no-cache"]||/no-cache/.test(e.headers.pragma)||n["max-age"]&&this.age()>n["max-age"]||n["min-fresh"]&&this.timeToLive()<1e3*n["min-fresh"]||this.stale()&&!(n["max-stale"]&&!this._rescc["must-revalidate"]&&(n["max-stale"]===!0||n["max-stale"]>this.age()-this.maxAge()))?!1:this._requestMatches(e,!1)}_requestMatches(e,n){return(!this._url||this._url===e.url)&&this._host===e.headers.host&&(!e.method||this._method===e.method||n&&e.method==="HEAD")&&this._varyMatches(e)}_allowsStoringAuthenticated(){return this._rescc["must-revalidate"]||this._rescc.public||this._rescc["s-maxage"]}_varyMatches(e){if(!this._resHeaders.vary)return!0;if(this._resHeaders.vary==="*")return!1;let n=this._resHeaders.vary.trim().toLowerCase().split(/\s*,\s*/);for(let r of n)if(e.headers[r]!==this._reqHeaders[r])return!1;return!0}_copyWithoutHopByHopHeaders(e){let n={};for(let r in e)tqt[r]||(n[r]=e[r]);if(e.connection){let r=e.connection.trim().split(/\s*,\s*/);for(let i of r)delete n[i]}if(n.warning){let r=n.warning.split(/,/).filter(i=>!/^\s*1[0-9][0-9]/.test(i));r.length?n.warning=r.join(",").trim():delete n.warning}return n}responseHeaders(){let e=this._copyWithoutHopByHopHeaders(this._resHeaders),n=this.age();return n>3600*24&&!this._hasExplicitExpiration()&&this.maxAge()>3600*24&&(e.warning=(e.warning?`${e.warning}, `:"")+'113 - "rfc7234 5.5.4"'),e.age=`${Math.round(n)}`,e.date=new Date(this.now()).toUTCString(),e}date(){let e=Date.parse(this._resHeaders.date);return isFinite(e)?e:this._responseTime}age(){let e=this._ageValue(),n=(this.now()-this._responseTime)/1e3;return e+n}_ageValue(){return OT(this._resHeaders.age)}maxAge(){if(!this.storable()||this._rescc["no-cache"]||this._isShared&&this._resHeaders["set-cookie"]&&!this._rescc.public&&!this._rescc.immutable||this._resHeaders.vary==="*")return 0;if(this._isShared){if(this._rescc["proxy-revalidate"])return 0;if(this._rescc["s-maxage"])return OT(this._rescc["s-maxage"])}if(this._rescc["max-age"])return OT(this._rescc["max-age"]);let e=this._rescc.immutable?this._immutableMinTtl:0,n=this.date();if(this._resHeaders.expires){let r=Date.parse(this._resHeaders.expires);return Number.isNaN(r)||r<n?0:Math.max(e,(r-n)/1e3)}if(this._resHeaders["last-modified"]){let r=Date.parse(this._resHeaders["last-modified"]);if(isFinite(r)&&n>r)return Math.max(e,(n-r)/1e3*this._cacheHeuristic)}return e}timeToLive(){let e=this.maxAge()-this.age(),n=e+OT(this._rescc["stale-if-error"]),r=e+OT(this._rescc["stale-while-revalidate"]);return Math.max(0,e,n,r)*1e3}stale(){return this.maxAge()<=this.age()}_useStaleIfError(){return this.maxAge()+OT(this._rescc["stale-if-error"])>this.age()}useStaleWhileRevalidate(){return this.maxAge()+OT(this._rescc["stale-while-revalidate"])>this.age()}static fromObject(e){return new this(void 0,void 0,{_fromObject:e})}_fromObject(e){if(this._responseTime)throw Error("Reinitialized");if(!e||e.v!==1)throw Error("Invalid serialization");this._responseTime=e.t,this._isShared=e.sh,this._cacheHeuristic=e.ch,this._immutableMinTtl=e.imm!==void 0?e.imm:24*3600*1e3,this._status=e.st,this._resHeaders=e.resh,this._rescc=e.rescc,this._method=e.m,this._url=e.u,this._host=e.h,this._noAuthorization=e.a,this._reqHeaders=e.reqh,this._reqcc=e.reqcc}toObject(){return{v:1,t:this._responseTime,sh:this._isShared,ch:this._cacheHeuristic,imm:this._immutableMinTtl,st:this._status,resh:this._resHeaders,rescc:this._rescc,m:this._method,u:this._url,h:this._host,a:this._noAuthorization,reqh:this._reqHeaders,reqcc:this._reqcc}}revalidationHeaders(e){this._assertRequestHasHeaders(e);let n=this._copyWithoutHopByHopHeaders(e.headers);if(delete n["if-range"],!this._requestMatches(e,!0)||!this.storable())return delete n["if-none-match"],delete n["if-modified-since"],n;if(this._resHeaders.etag&&(n["if-none-match"]=n["if-none-match"]?`${n["if-none-match"]}, ${this._resHeaders.etag}`:this._resHeaders.etag),n["accept-ranges"]||n["if-match"]||n["if-unmodified-since"]||this._method&&this._method!="GET"){if(delete n["if-modified-since"],n["if-none-match"]){let i=n["if-none-match"].split(/,/).filter(o=>!/^\s*W\//.test(o));i.length?n["if-none-match"]=i.join(",").trim():delete n["if-none-match"]}}else this._resHeaders["last-modified"]&&!n["if-modified-since"]&&(n["if-modified-since"]=this._resHeaders["last-modified"]);return n}revalidatedPolicy(e,n){if(this._assertRequestHasHeaders(e),this._useStaleIfError()&&rqt(n))return{modified:!1,matches:!1,policy:this};if(!n||!n.headers)throw Error("Response headers missing");let r=!1;if(n.status!==void 0&&n.status!=304?r=!1:n.headers.etag&&!/^\s*W\//.test(n.headers.etag)?r=this._resHeaders.etag&&this._resHeaders.etag.replace(/^\s*W\//,"")===n.headers.etag:this._resHeaders.etag&&n.headers.etag?r=this._resHeaders.etag.replace(/^\s*W\//,"")===n.headers.etag.replace(/^\s*W\//,""):this._resHeaders["last-modified"]?r=this._resHeaders["last-modified"]===n.headers["last-modified"]:!this._resHeaders.etag&&!this._resHeaders["last-modified"]&&!n.headers.etag&&!n.headers["last-modified"]&&(r=!0),!r)return{policy:new this.constructor(e,n),modified:n.status!=304,matches:!1};let i={};for(let a in this._resHeaders)i[a]=a in n.headers&&!nqt[a]?n.headers[a]:this._resHeaders[a];let o=Object.assign({},n,{status:this._status,method:this._method,headers:i});return{policy:new this.constructor(e,o,{shared:this._isShared,cacheHeuristic:this._cacheHeuristic,immutableMinTimeToLive:this._immutableMinTtl}),modified:!1,matches:!0}}}});var UVe=H((bzr,OVe)=>{"use strict";f();var oqt=FVe(),{Headers:sqt}=A3(),MVe=s(t=>({url:t.url,method:t.method,headers:t.headers.plain()}),"convertRequest"),QVe=s(t=>({status:t.status,headers:t.headers.plain()}),"convertResponse"),ume=class{static{s(this,"CachePolicyWrapper")}constructor(e,n,r){this.policy=new oqt(MVe(e),QVe(n),r)}storable(){return this.policy.storable()}satisfiesWithoutRevalidation(e){return this.policy.satisfiesWithoutRevalidation(MVe(e))}responseHeaders(e){return new sqt(this.policy.responseHeaders(QVe(e)))}timeToLive(){return this.policy.timeToLive()}};OVe.exports=ume});var HVe=H((Tzr,WVe)=>{"use strict";f();var{Readable:aqt}=require("stream"),{Headers:qVe}=A3(),{Response:lqt}=lme(),Hb=Symbol("CacheableResponse internals"),cqt=s(t=>t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength),"toArrayBuffer"),dme=class t extends lqt{static{s(this,"CacheableResponse")}constructor(e,n){super(e,n);let r=new qVe(n.headers);this[Hb]={headers:r,bufferedBody:e}}get headers(){return this[Hb].headers}set headers(e){if(e instanceof qVe)this[Hb].headers=e;else throw new TypeError("instance of Headers expected")}get body(){return aqt.from(this[Hb].bufferedBody)}get bodyUsed(){return!1}async buffer(){return this[Hb].bufferedBody}async arrayBuffer(){return cqt(this[Hb].bufferedBody)}async text(){return this[Hb].bufferedBody.toString()}async json(){return JSON.parse(await this.text())}clone(){let{url:e,status:n,statusText:r,headers:i,httpVersion:o,decoded:a,counter:l}=this;return new t(this[Hb].bufferedBody,{url:e,status:n,statusText:r,headers:i,httpVersion:o,decoded:a,counter:l})}get[Symbol.toStringTag](){return this.constructor.name}},uqt=s(async t=>{let e=await t.buffer(),{url:n,status:r,statusText:i,headers:o,httpVersion:a,decoded:l,counter:c}=t;return new dme(e,{url:n,status:r,statusText:i,headers:o,httpVersion:a,decoded:l,counter:c})},"cacheableResponse");WVe.exports={cacheableResponse:uqt}});var Rz=H((Szr,GVe)=>{"use strict";f();var fme=class extends Error{static{s(this,"RequestAbortedError")}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};GVe.exports={RequestAbortedError:fme}});var YVe=H((Bzr,zVe)=>{"use strict";f();var VVe=require("http"),$Ve=require("https"),{Readable:dqt}=require("stream"),$y=MT()("helix-fetch:h1"),{RequestAbortedError:jVe}=Rz(),{decodeStream:fqt}=Gy(),pqt=s((t,e)=>{let{h1:n,options:{h1:r,rejectUnauthorized:i}}=t;return e==="https:"?n.httpsAgent?n.httpsAgent:r||typeof i=="boolean"?(n.httpsAgent=new $Ve.Agent(typeof i=="boolean"?{...r||{},rejectUnauthorized:i}:r),n.httpsAgent):void 0:n.httpAgent?n.httpAgent:r?(n.httpAgent=new VVe.Agent(r),n.httpAgent):void 0},"getAgent"),mqt=s(t=>{t.h1={}},"setupContext"),hqt=s(async({h1:t})=>{t.httpAgent&&($y("resetContext: destroying httpAgent"),t.httpAgent.destroy(),delete t.httpAgent),t.httpsAgent&&($y("resetContext: destroying httpsAgent"),t.httpsAgent.destroy(),delete t.httpsAgent)},"resetContext"),gqt=s((t,e,n)=>{let{statusCode:r,statusMessage:i,httpVersion:o,httpVersionMajor:a,httpVersionMinor:l,headers:c}=t,u=e?fqt(r,c,t,n):t;return{statusCode:r,statusText:i,httpVersion:o,httpVersionMajor:a,httpVersionMinor:l,headers:c,readable:u,decoded:!!(e&&u!==t)}},"createResponse"),Aqt=s(async(t,e,n)=>{let{request:r}=e.protocol==="https:"?$Ve:VVe,i=pqt(t,e.protocol),o={...n,agent:i},{socket:a,body:l}=o;return a&&(delete o.socket,a.assigned||(a.assigned=!0,i?o.agent=new Proxy(i,{get:s((c,u)=>u==="createConnection"&&!a.inUse?(d,p)=>{$y(`agent reusing socket #${a.id} (${a.servername})`),a.inUse=!0,p(null,a)}:c[u],"get")}):o.createConnection=(c,u)=>{$y(`reusing socket #${a.id} (${a.servername})`),a.inUse=!0,u(null,a)})),new Promise((c,u)=>{$y(`${o.method} ${e.href}`);let d,{signal:p}=o,m=s(()=>{p.removeEventListener("abort",m),a&&!a.inUse&&($y(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),u(new jVe),d&&d.abort()},"onAbortSignal");if(p){if(p.aborted){u(new jVe);return}p.addEventListener("abort",m)}d=r(e,o),d.once("response",h=>{p&&p.removeEventListener("abort",m),a&&!a.inUse&&($y(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),c(gqt(h,o.decode,u))}),d.once("error",h=>{p&&p.removeEventListener("abort",m),a&&!a.inUse&&($y(`discarding redundant socket used for ALPN: #${a.id} ${a.servername}`),a.destroy()),d.aborted||($y(`${o.method} ${e.href} failed with: ${h.message}`),d.abort(),u(h))}),l instanceof dqt?l.pipe(d):(l&&d.write(l),d.end())})},"h1Request");zVe.exports={request:Aqt,setupContext:mqt,resetContext:hqt}});var ZVe=H((Nzr,XVe)=>{"use strict";f();var{connect:yqt,constants:Cqt}=require("http2"),{Readable:xqt}=require("stream"),_s=MT()("helix-fetch:h2"),{RequestAbortedError:KVe}=Rz(),{decodeStream:vqt}=Gy(),{NGHTTP2_CANCEL:R6}=Cqt,bqt=5*60*1e3,Eqt=5e3,Iqt=s(t=>{t.h2={sessionCache:{}}},"setupContext"),Tqt=s(async({h2:t})=>Promise.all(Object.values(t.sessionCache).map(e=>new Promise(n=>{e.on("close",n),_s(`resetContext: destroying session (socket #${e.socket&&e.socket.id}, ${e.socket&&e.socket.servername})`),e.destroy()}))),"resetContext"),JVe=s((t,e,n,r=()=>{})=>{let i={...t},o=i[":status"];delete i[":status"];let a=n?vqt(o,t,e,r):e;return{statusCode:o,statusText:"",httpVersion:"2.0",httpVersionMajor:2,httpVersionMinor:0,headers:i,readable:a,decoded:!!(n&&a!==e)}},"createResponse"),wqt=s((t,e,n,r,i,o)=>{let{options:{h2:{pushPromiseHandler:a,pushHandler:l,pushedStreamIdleTimeout:c=Eqt}}}=t,u=i[":path"],d=`${e}${u}`;_s(`received PUSH_PROMISE: ${d}, stream #${r.id}, headers: ${JSON.stringify(i)}, flags: ${o}`),a&&a(d,i,s(()=>{r.close(R6)},"rejectPush")),r.on("push",(p,m)=>{_s(`received push headers for ${e}${u}, stream #${r.id}, headers: ${JSON.stringify(p)}, flags: ${m}`),r.setTimeout(c,()=>{_s(`closing pushed stream #${r.id} after ${c} ms of inactivity`),r.close(R6)}),l&&l(d,i,JVe(p,r,n))}),r.on("aborted",()=>{_s(`pushed stream #${r.id} aborted`)}),r.on("error",p=>{_s(`pushed stream #${r.id} encountered error: ${p}`)}),r.on("frameError",(p,m,h)=>{_s(`pushed stream #${r.id} encountered frameError: type: ${p}, code: ${m}, id: ${h}`)})},"handlePush"),_qt=s(async(t,e,n)=>{let{origin:r,pathname:i,search:o,hash:a}=e,l=`${i}${o}${a}`,{options:{h2:c={}},h2:{sessionCache:u}}=t,{idleSessionTimeout:d=bqt,pushPromiseHandler:p,pushHandler:m}=c,h={...n},{method:g,headers:y,socket:v,body:b,decode:E}=h;return v&&delete h.socket,y.host&&(y[":authority"]=y.host,delete y.host),new Promise((_,k)=>{let P=u[r];if(!P||P.closed||P.destroyed){let ae=!(t.options.rejectUnauthorized===!1||c.rejectUnauthorized===!1),G={...c,rejectUnauthorized:ae};v&&!v.inUse&&(G.createConnection=()=>(_s(`reusing socket #${v.id} (${v.servername})`),v.inUse=!0,v)),P=yqt(r,{...G,settings:{enablePush:!!(p||m)}}),P.setMaxListeners(1e3),P.setTimeout(d,()=>{_s(`closing session ${r} after ${d} ms of inactivity`),P.close()}),P.once("connect",()=>{_s(`session ${r} established`),_s(`caching session ${r}`),u[r]=P}),P.on("localSettings",ue=>{_s(`session ${r} localSettings: ${JSON.stringify(ue)}`)}),P.on("remoteSettings",ue=>{_s(`session ${r} remoteSettings: ${JSON.stringify(ue)}`)}),P.once("close",()=>{_s(`session ${r} closed`),u[r]===P&&(_s(`discarding cached session ${r}`),delete u[r])}),P.once("error",ue=>{_s(`session ${r} encountered error: ${ue}`),u[r]===P&&(_s(`discarding cached session ${r}`),delete u[r])}),P.on("frameError",(ue,ie,V)=>{_s(`session ${r} encountered frameError: type: ${ue}, code: ${ie}, id: ${V}`)}),P.once("goaway",(ue,ie,V)=>{_s(`session ${r} received GOAWAY frame: errorCode: ${ue}, lastStreamID: ${ie}, opaqueData: ${V?V.toString():void 0}`)}),P.on("stream",(ue,ie,V)=>{wqt(t,r,E,ue,ie,V)})}else v&&v.id!==P.socket.id&&!v.inUse&&(_s(`discarding redundant socket used for ALPN: #${v.id} ${v.servername}`),v.destroy());_s(`${g} ${e.host}${l}`);let N,{signal:U}=h,ne=s(()=>{U.removeEventListener("abort",ne),k(new KVe),N&&N.close(R6)},"onAbortSignal");if(U){if(U.aborted){k(new KVe);return}U.addEventListener("abort",ne)}let he=s(ae=>{_s(`session ${r} encountered error during ${h.method} ${e.href}: ${ae}`),k(ae)},"onSessionError");P.once("error",he),N=P.request({":method":g,":path":l,...y}),N.once("response",ae=>{P.off("error",he),U&&U.removeEventListener("abort",ne),_(JVe(ae,N,h.decode,k))}),N.once("error",ae=>{P.off("error",he),U&&U.removeEventListener("abort",ne),N.rstCode!==R6&&(_s(`${h.method} ${e.href} failed with: ${ae.message}`),N.close(R6),k(ae))}),N.once("frameError",(ae,G,W)=>{P.off("error",he),_s(`encountered frameError during ${h.method} ${e.href}: type: ${ae}, code: ${G}, id: ${W}`)}),N.on("push",(ae,G)=>{_s(`received 'push' event: headers: ${JSON.stringify(ae)}, flags: ${G}`)}),b instanceof xqt?b.pipe(N):(b&&N.write(b),N.end())})},"request");XVe.exports={request:_qt,setupContext:Iqt,resetContext:Tqt}});var t$e=H((Mzr,e$e)=>{"use strict";f();var{EventEmitter:Sqt}=require("events"),Rqt=s(()=>{let t={},e=new Sqt;return e.setMaxListeners(0),{acquire:s(n=>new Promise(r=>{if(!t[n]){t[n]=!0,r();return}let i=s(o=>{t[n]||(t[n]=!0,e.removeListener(n,i),r(o))},"tryAcquire");e.on(n,i)}),"acquire"),release:s((n,r)=>{Reflect.deleteProperty(t,n),setImmediate(()=>e.emit(n,r))},"release")}},"lock");e$e.exports=Rqt});var n$e=H((Uzr,kqt)=>{kqt.exports={name:"@adobe/helix-fetch",version:"3.1.1",description:"Light-weight Fetch implementation transparently supporting both HTTP/1(.1) and HTTP/2",main:"src/index.js",scripts:{test:"nyc mocha",lint:"./node_modules/.bin/eslint .","semantic-release":"semantic-release"},mocha:{timeout:"5000",recursive:"true",reporter:"mocha-multi-reporters","reporter-options":"configFile=.mocha-multi.json"},engines:{node:">=12.0"},types:"src/index.d.ts",exports:{import:"./src/index.mjs",require:"./src/index.js"},repository:{type:"git",url:"https://github.com/adobe/helix-fetch"},author:"",license:"Apache-2.0",bugs:{url:"https://github.com/adobe/helix-fetch/issues"},homepage:"https://github.com/adobe/helix-fetch#readme",keywords:["fetch","whatwg","Fetch API","http","https","http2","h2","promise","async","request","RFC 7234","7234","caching","cache"],dependencies:{debug:"4.3.4","http-cache-semantics":"^4.1.1","lru-cache":"7.13.1"},devDependencies:{"@adobe/eslint-config-helix":"1.3.2","@semantic-release/changelog":"6.0.1","@semantic-release/git":"10.0.1",chai:"4.3.6","chai-as-promised":"7.1.1","chai-bytes":"0.1.2","chai-iterator":"3.0.2",eslint:"8.21.0","eslint-plugin-header":"3.1.1","eslint-plugin-import":"2.26.0","formdata-node":"4.3.3","lint-staged":"13.0.3",mocha:"10.0.0","mocha-multi-reporters":"1.5.1",nock:"13.2.9",nyc:"15.1.0","parse-cache-control":"1.0.1",pem:"1.14.6",proxy:"^1.0.2","semantic-release":"19.0.3",sinon:"14.0.0","stream-buffers":"3.0.2",tunnel:"^0.0.6"},"lint-staged":{"*.js":"eslint"},config:{commitizen:{path:"node_modules/cz-conventional-changelog"},ghooks:{"pre-commit":"npx lint-staged"}}}});var a$e=H((qzr,s$e)=>{"use strict";f();var{Readable:Bqt}=require("stream"),Pqt=require("tls"),{types:{isAnyArrayBuffer:Dqt}}=require("util"),Nqt=tme(),pme=MT()("helix-fetch:core"),{RequestAbortedError:kz}=Rz(),mme=YVe(),Bz=ZVe(),Lqt=t$e(),{isPlainObject:Fqt}=Gy(),{isFormData:Mqt,FormDataSerializer:Qqt}=S6(),{version:Oqt}=n$e(),hme="h2",gme="h2c",Ame="http/1.0",UT="http/1.1",Uqt=100,qqt=60*60*1e3,Wqt=[hme,UT,Ame],Hqt=`helix-fetch/${Oqt}`,Gqt={method:"GET",compress:!0,decode:!0},r$e=0,i$e=Lqt(),o$e=s((t,e)=>new Promise((n,r)=>{let{signal:i}=e,o,a=s(()=>{i.removeEventListener("abort",a);let u=new kz;r(u),o&&o.destroy(u)},"onAbortSignal");if(i){if(i.aborted){r(new kz);return}i.addEventListener("abort",a)}let l=+t.port||443,c=s(u=>{i&&i.removeEventListener("abort",a),u instanceof kz||(pme(`connecting to ${t.hostname}:${l} failed with: ${u.message}`),r(u))},"onError");o=Pqt.connect(l,t.hostname,e),o.once("secureConnect",()=>{i&&i.removeEventListener("abort",a),o.off("error",c),r$e+=1,o.id=r$e,o.secureConnecting=!1,pme(`established TLS connection: #${o.id} (${o.servername})`),n(o)}),o.once("error",c)}),"connectTLS"),jqt=s(async(t,e)=>{let n=await i$e.acquire(t.origin);try{return n||(n=await o$e(t,e)),n}finally{i$e.release(t.origin,n)}},"connect"),Vqt=s(async(t,e,n)=>{let r=`${e.protocol}//${e.host}`,i=t.alpnCache.get(r);if(i)return{protocol:i};switch(e.protocol){case"http:":return i=UT,t.alpnCache.set(r,i),{protocol:i};case"http2:":return i=gme,t.alpnCache.set(r,i),{protocol:i};case"https:":break;default:throw new TypeError(`unsupported protocol: ${e.protocol}`)}let{options:{rejectUnauthorized:o,h1:a={},h2:l={}}}=t,c=!(o===!1||a.rejectUnauthorized===!1||l.rejectUnauthorized===!1),u={servername:e.hostname,ALPNProtocols:t.alpnProtocols,signal:n,rejectUnauthorized:c};t.options.ca&&(u.ca=t.options.ca);let d=await jqt(e,u);return i=d.alpnProtocol,i||(i=UT),t.alpnCache.set(r,i),{protocol:i,socket:d}},"determineProtocol"),$qt=s(t=>{let e={};return Object.keys(t).forEach(n=>{e[n.toLowerCase()]=t[n]}),e},"sanitizeHeaders"),zqt=s(async(t,e,n,r)=>{let i=e.protocol==="https:",o;e.port?o=e.port:i?o=443:o=80;let a={...n,host:e.host,hostname:e.hostname,port:o},l=await t(a);if(i){let u={...a,ALPNProtocols:r};u.socket=l,u.servername=a.host;let d=await o$e(e,u);return{protocol:d.alpnProtocol||UT,socket:d}}return{protocol:l.alpnProtocol||UT,socket:l}},"getProtocolAndSocketFromFactory"),Yqt=s(async(t,e,n)=>{let r=new URL(e),i={...Gqt,...n||{}};typeof i.method=="string"&&(i.method=i.method.toUpperCase()),i.headers=$qt(i.headers||{}),i.headers.host===void 0&&(i.headers.host=r.host),t.userAgent&&i.headers["user-agent"]===void 0&&(i.headers["user-agent"]=t.userAgent);let o;if(i.body instanceof URLSearchParams)o="application/x-www-form-urlencoded; charset=utf-8",i.body=i.body.toString();else if(Mqt(i.body)){let u=new Qqt(i.body);o=u.contentType(),i.body=u.stream(),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(u.length()))}else typeof i.body=="string"||i.body instanceof String?o="text/plain; charset=utf-8":Fqt(i.body)?(i.body=JSON.stringify(i.body),o="application/json"):Dqt(i.body)&&(i.body=Buffer.from(i.body));i.headers["content-type"]===void 0&&o!==void 0&&(i.headers["content-type"]=o),i.body!=null&&(i.body instanceof Bqt||(!(typeof i.body=="string"||i.body instanceof String)&&!Buffer.isBuffer(i.body)&&(i.body=String(i.body)),i.headers["transfer-encoding"]===void 0&&i.headers["content-length"]===void 0&&(i.headers["content-length"]=String(Buffer.isBuffer(i.body)?i.body.length:Buffer.byteLength(i.body,"utf-8"))))),i.headers.accept===void 0&&(i.headers.accept="*/*"),i.body==null&&["POST","PUT"].includes(i.method)&&(i.headers["content-length"]="0"),i.compress&&i.headers["accept-encoding"]===void 0&&(i.headers["accept-encoding"]="gzip,deflate,br");let{signal:a}=i,{protocol:l,socket:c=null}=t.socketFactory?await zqt(t.socketFactory,r,i,t.alpnProtocols):await Vqt(t,r,a);switch(pme(`${r.host} -> ${l}`),l){case hme:try{return await Bz.request(t,r,c?{...i,socket:c}:i)}catch(u){let{code:d,message:p}=u;throw d==="ERR_HTTP2_ERROR"&&p==="Protocol error"&&t.alpnCache.delete(`${r.protocol}//${r.host}`),u}case gme:return Bz.request(t,new URL(`http://${r.host}${r.pathname}${r.hash}${r.search}`),c?{...i,socket:c}:i);case Ame:case UT:return mme.request(t,r,c?{...i,socket:c}:i);default:throw new TypeError(`unsupported protocol: ${l}`)}},"request"),Kqt=s(async t=>(t.alpnCache.clear(),Promise.all([mme.resetContext(t),Bz.resetContext(t)])),"resetContext"),Jqt=s(t=>{let{options:{alpnProtocols:e=Wqt,alpnCacheTTL:n=qqt,alpnCacheSize:r=Uqt,userAgent:i=Hqt,socketFactory:o}}=t;t.alpnProtocols=e,t.alpnCache=new Nqt({max:r,ttl:n}),t.userAgent=i,t.socketFactory=o,mme.setupContext(t),Bz.setupContext(t)},"setupContext");s$e.exports={request:Yqt,setupContext:Jqt,resetContext:Kqt,RequestAbortedError:kz,ALPN_HTTP2:hme,ALPN_HTTP2C:gme,ALPN_HTTP1_1:UT,ALPN_HTTP1_0:Ame}});var c$e=H((Gzr,l$e)=>{"use strict";f();var Xqt=MT()("helix-fetch:core"),{request:Zqt,setupContext:eWt,resetContext:tWt,RequestAbortedError:nWt,ALPN_HTTP2:rWt,ALPN_HTTP2C:iWt,ALPN_HTTP1_1:oWt,ALPN_HTTP1_0:sWt}=a$e(),yme=class t{static{s(this,"RequestContext")}constructor(e){this.options={...e||{}},eWt(this)}api(){return{request:s(async(e,n)=>this.request(e,n),"request"),context:s((e={})=>new t(e).api(),"context"),setCA:s(e=>this.setCA(e),"setCA"),reset:s(async()=>this.reset(),"reset"),RequestAbortedError:nWt,ALPN_HTTP2:rWt,ALPN_HTTP2C:iWt,ALPN_HTTP1_1:oWt,ALPN_HTTP1_0:sWt}}async request(e,n){return Zqt(this,e,n)}setCA(e){this.options.ca=e}async reset(){return Xqt("resetting context"),tWt(this)}};l$e.exports=new yme().api()});var m$e=H(($zr,p$e)=>{"use strict";f();var{EventEmitter:aWt}=require("events"),{Readable:k6}=require("stream"),Cme=MT()("helix-fetch"),lWt=tme(),{Body:cWt}=bz(),{Headers:Eme}=A3(),{Request:qT}=DVe(),{Response:vme}=lme(),{FetchBaseError:uWt,FetchError:B6,AbortError:Pz}=ime(),{AbortController:dWt,AbortSignal:fWt,TimeoutSignal:pWt}=ome(),mWt=UVe(),{cacheableResponse:hWt}=HVe(),{sizeof:gWt}=Gy(),{isFormData:AWt}=S6(),{context:yWt,RequestAbortedError:CWt}=c$e(),u$e=["GET","HEAD"],xWt=500,vWt=100*1024*1024,xme="push",d$e=s(async(t,e,n)=>{let{request:r}=t.context,i=e instanceof qT&&typeof n>"u"?e:new qT(e,n),{method:o,body:a,signal:l,compress:c,decode:u,follow:d,redirect:p,init:{body:m}}=i,h;if(l&&l.aborted){let P=new Pz("The operation was aborted.");throw i.init.body instanceof k6&&i.init.body.destroy(P),P}try{h=await r(i.url,{...n,method:o,headers:i.headers.plain(),body:m&&!(m instanceof k6)&&!AWt(m)?m:a,compress:c,decode:u,follow:d,redirect:p,signal:l})}catch(P){throw m instanceof k6&&m.destroy(P),P instanceof TypeError?P:P instanceof CWt?new Pz("The operation was aborted."):new B6(P.message,"system",P)}let g=s(()=>{l.removeEventListener("abort",g);let P=new Pz("The operation was aborted.");i.init.body instanceof k6&&i.init.body.destroy(P),h.readable.emit("error",P)},"abortHandler");l&&l.addEventListener("abort",g);let{statusCode:y,statusText:v,httpVersion:b,headers:E,readable:_,decoded:k}=h;if([301,302,303,307,308].includes(y)){let{location:P}=E,N=P==null?null:new URL(P,i.url);switch(i.redirect){case"manual":break;case"error":throw l&&l.removeEventListener("abort",g),new B6(`uri requested responds with a redirect, redirect mode is set to 'error': ${i.url}`,"no-redirect");case"follow":{if(N===null)break;if(i.counter>=i.follow)throw l&&l.removeEventListener("abort",g),new B6(`maximum redirect reached at: ${i.url}`,"max-redirect");let U={headers:new Eme(i.headers),follow:i.follow,compress:i.compress,decode:i.decode,counter:i.counter+1,method:i.method,body:i.body,signal:i.signal};if(y!==303&&i.body&&i.init.body instanceof k6)throw l&&l.removeEventListener("abort",g),new B6("Cannot follow redirect with body being a readable stream","unsupported-redirect");return(y===303||(y===301||y===302)&&i.method==="POST")&&(U.method="GET",U.body=void 0,U.headers.delete("content-length")),l&&l.removeEventListener("abort",g),d$e(t,new qT(N,U))}default:}}return l&&(_.once("end",()=>{l.removeEventListener("abort",g)}),_.once("error",()=>{l.removeEventListener("abort",g)})),new vme(_,{url:i.url,status:y,statusText:v,headers:E,httpVersion:b,decoded:k,counter:i.counter})},"fetch"),f$e=s(async(t,e,n)=>{if(t.options.maxCacheSize===0||!u$e.includes(e.method))return n;let r=new mWt(e,n,{shared:!1});if(r.storable()){let i=await hWt(n);return t.cache.set(e.url,{policy:r,response:i},r.timeToLive()),i}else return n},"cacheResponse"),bWt=s(async(t,e,n)=>{let r=new qT(e,n);if(t.options.maxCacheSize!==0&&u$e.includes(r.method)&&!["no-store","reload"].includes(r.cache)){let{policy:a,response:l}=t.cache.get(r.url)||{};if(a&&a.satisfiesWithoutRevalidation(r)){l.headers=new Eme(a.responseHeaders(l));let c=l.clone();return c.fromCache=!0,c}}let o=await d$e(t,r);return r.cache!=="no-store"?f$e(t,r,o):o},"cachingFetch"),EWt=s((t,e={})=>{let n=new URL(t);if(typeof e!="object"||Array.isArray(e))throw new TypeError("qs: object expected");return Object.entries(e).forEach(([r,i])=>{Array.isArray(i)?i.forEach(o=>n.searchParams.append(r,o)):n.searchParams.append(r,i)}),n.href},"createUrl"),IWt=s(t=>new pWt(t),"timeoutSignal"),bme=class t{static{s(this,"FetchContext")}constructor(e){this.options={...e};let{maxCacheSize:n}=this.options,r=typeof n=="number"&&n>=0?n:vWt,i=xWt;r===0&&(r=1,i=1);let o=s(({response:l},c)=>gWt(l),"sizeCalculation");this.cache=new lWt({max:i,maxSize:r,sizeCalculation:o}),this.eventEmitter=new aWt,this.options.h2=this.options.h2||{},typeof this.options.h2.enablePush>"u"&&(this.options.h2.enablePush=!0);let{enablePush:a}=this.options.h2;a&&(this.options.h2.pushPromiseHandler=(l,c,u)=>{let d={...c};Object.keys(d).filter(p=>p.startsWith(":")).forEach(p=>delete d[p]),this.pushPromiseHandler(l,d,u)},this.options.h2.pushHandler=(l,c,u)=>{let d={...c};Object.keys(d).filter(b=>b.startsWith(":")).forEach(b=>delete d[b]);let{statusCode:p,statusText:m,httpVersion:h,headers:g,readable:y,decoded:v}=u;this.pushHandler(l,d,new vme(y,{url:l,status:p,statusText:m,headers:g,httpVersion:h,decoded:v}))}),this.context=yWt(this.options)}api(){return{fetch:s(async(e,n)=>this.fetch(e,n),"fetch"),Body:cWt,Headers:Eme,Request:qT,Response:vme,AbortController:dWt,AbortSignal:fWt,FetchBaseError:uWt,FetchError:B6,AbortError:Pz,context:s((e={})=>new t(e).api(),"context"),setCA:s(e=>this.setCA(e),"setCA"),noCache:s((e={})=>new t({...e,maxCacheSize:0}).api(),"noCache"),h1:s((e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),"h1"),keepAlive:s((e={})=>new t({...e,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),"keepAlive"),h1NoCache:s((e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1]}).api(),"h1NoCache"),keepAliveNoCache:s((e={})=>new t({...e,maxCacheSize:0,alpnProtocols:[this.context.ALPN_HTTP1_1],h1:{keepAlive:!0}}).api(),"keepAliveNoCache"),reset:s(async()=>this.context.reset(),"reset"),onPush:s(e=>this.onPush(e),"onPush"),offPush:s(e=>this.offPush(e),"offPush"),createUrl:EWt,timeoutSignal:IWt,clearCache:s(()=>this.clearCache(),"clearCache"),cacheStats:s(()=>this.cacheStats(),"cacheStats"),ALPN_HTTP2:this.context.ALPN_HTTP2,ALPN_HTTP2C:this.context.ALPN_HTTP2C,ALPN_HTTP1_1:this.context.ALPN_HTTP1_1,ALPN_HTTP1_0:this.context.ALPN_HTTP1_0}}async fetch(e,n){return bWt(this,e,n)}setCA(e){this.options.ca=e,this.context.setCA(e)}onPush(e){return this.eventEmitter.on(xme,e)}offPush(e){return this.eventEmitter.off(xme,e)}clearCache(){this.cache.clear()}cacheStats(){return{size:this.cache.calculatedSize,count:this.cache.size}}pushPromiseHandler(e,n,r){Cme(`received server push promise: ${e}, headers: ${JSON.stringify(n)}`);let i=new qT(e,{headers:n}),{policy:o}=this.cache.get(e)||{};o&&o.satisfiesWithoutRevalidation(i)&&(Cme(`already cached, reject push promise: ${e}, headers: ${JSON.stringify(n)}`),r())}async pushHandler(e,n,r){Cme(`caching resource pushed by server: ${e}, reqHeaders: ${JSON.stringify(n)}, status: ${r.status}, respHeaders: ${JSON.stringify(r.headers)}`);let i=await f$e(this,new qT(e,{headers:n}),r);this.eventEmitter.emit(xme,e,i)}};p$e.exports=new bme().api()});var g$e=H((Kzr,h$e)=>{"use strict";f();h$e.exports=m$e()});var aYe=H((Wli,sYe)=>{f();sYe.exports=oYe;oYe.sync=Djt;var rYe=require("fs");function Pjt(t,e){var n=e.pathExt!==void 0?e.pathExt:process.env.PATHEXT;if(!n||(n=n.split(";"),n.indexOf("")!==-1))return!0;for(var r=0;r<n.length;r++){var i=n[r].toLowerCase();if(i&&t.substr(-i.length).toLowerCase()===i)return!0}return!1}s(Pjt,"checkPathExt");function iYe(t,e,n){return!t.isSymbolicLink()&&!t.isFile()?!1:Pjt(e,n)}s(iYe,"checkStat");function oYe(t,e,n){rYe.stat(t,function(r,i){n(r,r?!1:iYe(i,t,e))})}s(oYe,"isexe");function Djt(t,e){return iYe(rYe.statSync(t),t,e)}s(Djt,"sync")});var fYe=H((jli,dYe)=>{f();dYe.exports=cYe;cYe.sync=Njt;var lYe=require("fs");function cYe(t,e,n){lYe.stat(t,function(r,i){n(r,r?!1:uYe(i,e))})}s(cYe,"isexe");function Njt(t,e){return uYe(lYe.statSync(t),e)}s(Njt,"sync");function uYe(t,e){return t.isFile()&&Ljt(t,e)}s(uYe,"checkStat");function Ljt(t,e){var n=t.mode,r=t.uid,i=t.gid,o=e.uid!==void 0?e.uid:process.getuid&&process.getuid(),a=e.gid!==void 0?e.gid:process.getgid&&process.getgid(),l=parseInt("100",8),c=parseInt("010",8),u=parseInt("001",8),d=l|c,p=n&u||n&c&&i===a||n&l&&r===o||n&d&&o===0;return p}s(Ljt,"checkMode")});var mYe=H((Yli,pYe)=>{f();var zli=require("fs"),MY;process.platform==="win32"||global.TESTING_WINDOWS?MY=aYe():MY=fYe();pYe.exports=xhe;xhe.sync=Fjt;function xhe(t,e,n){if(typeof e=="function"&&(n=e,e={}),!n){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(r,i){xhe(t,e||{},function(o,a){o?i(o):r(a)})})}MY(t,e||{},function(r,i){r&&(r.code==="EACCES"||e&&e.ignoreErrors)&&(r=null,i=!1),n(r,i)})}s(xhe,"isexe");function Fjt(t,e){try{return MY.sync(t,e||{})}catch(n){if(e&&e.ignoreErrors||n.code==="EACCES")return!1;throw n}}s(Fjt,"sync")});var vYe=H((Xli,xYe)=>{f();var M3=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",hYe=require("path"),Mjt=M3?";":":",gYe=mYe(),AYe=s(t=>Object.assign(new Error(`not found: ${t}`),{code:"ENOENT"}),"getNotFoundError"),yYe=s((t,e)=>{let n=e.colon||Mjt,r=t.match(/\//)||M3&&t.match(/\\/)?[""]:[...M3?[process.cwd()]:[],...(e.path||process.env.PATH||"").split(n)],i=M3?e.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",o=M3?i.split(n):[""];return M3&&t.indexOf(".")!==-1&&o[0]!==""&&o.unshift(""),{pathEnv:r,pathExt:o,pathExtExe:i}},"getPathInfo"),CYe=s((t,e,n)=>{typeof e=="function"&&(n=e,e={}),e||(e={});let{pathEnv:r,pathExt:i,pathExtExe:o}=yYe(t,e),a=[],l=s(u=>new Promise((d,p)=>{if(u===r.length)return e.all&&a.length?d(a):p(AYe(t));let m=r[u],h=/^".*"$/.test(m)?m.slice(1,-1):m,g=hYe.join(h,t),y=!h&&/^\.[\\\/]/.test(t)?t.slice(0,2)+g:g;d(c(y,u,0))}),"step"),c=s((u,d,p)=>new Promise((m,h)=>{if(p===i.length)return m(l(d+1));let g=i[p];gYe(u+g,{pathExt:o},(y,v)=>{if(!y&&v)if(e.all)a.push(u+g);else return m(u+g);return m(c(u,d,p+1))})}),"subStep");return n?l(0).then(u=>n(null,u),n):l(0)},"which"),Qjt=s((t,e)=>{e=e||{};let{pathEnv:n,pathExt:r,pathExtExe:i}=yYe(t,e),o=[];for(let a=0;a<n.length;a++){let l=n[a],c=/^".*"$/.test(l)?l.slice(1,-1):l,u=hYe.join(c,t),d=!c&&/^\.[\\\/]/.test(t)?t.slice(0,2)+u:u;for(let p=0;p<r.length;p++){let m=d+r[p];try{if(gYe.sync(m,{pathExt:i}))if(e.all)o.push(m);else return m}catch{}}}if(e.all&&o.length)return o;if(e.nothrow)return null;throw AYe(t)},"whichSync");xYe.exports=CYe;CYe.sync=Qjt});var EYe=H((tci,vhe)=>{"use strict";f();var bYe=s((t={})=>{let e=t.env||process.env;return(t.platform||process.platform)!=="win32"?"PATH":Object.keys(e).reverse().find(r=>r.toUpperCase()==="PATH")||"Path"},"pathKey");vhe.exports=bYe;vhe.exports.default=bYe});var _Ye=H((ici,wYe)=>{"use strict";f();var IYe=require("path"),Ojt=vYe(),Ujt=EYe();function TYe(t,e){let n=t.options.env||process.env,r=process.cwd(),i=t.options.cwd!=null,o=i&&process.chdir!==void 0&&!process.chdir.disabled;if(o)try{process.chdir(t.options.cwd)}catch{}let a;try{a=Ojt.sync(t.command,{path:n[Ujt({env:n})],pathExt:e?IYe.delimiter:void 0})}catch{}finally{o&&process.chdir(r)}return a&&(a=IYe.resolve(i?t.options.cwd:"",a)),a}s(TYe,"resolveCommandAttempt");function qjt(t){return TYe(t)||TYe(t,!0)}s(qjt,"resolveCommand");wYe.exports=qjt});var SYe=H((aci,Ehe)=>{"use strict";f();var bhe=/([()\][%!^"`<>&|;, *?])/g;function Wjt(t){return t=t.replace(bhe,"^$1"),t}s(Wjt,"escapeCommand");function Hjt(t,e){return t=`${t}`,t=t.replace(/(?=(\\+?)?)\1"/g,'$1$1\\"'),t=t.replace(/(?=(\\+?)?)\1$/,"$1$1"),t=`"${t}"`,t=t.replace(bhe,"^$1"),e&&(t=t.replace(bhe,"^$1")),t}s(Hjt,"escapeArgument");Ehe.exports.command=Wjt;Ehe.exports.argument=Hjt});var kYe=H((uci,RYe)=>{"use strict";f();RYe.exports=/^#!(.*)/});var PYe=H((fci,BYe)=>{"use strict";f();var Gjt=kYe();BYe.exports=(t="")=>{let e=t.match(Gjt);if(!e)return null;let[n,r]=e[0].replace(/#! ?/,"").split(" "),i=n.split("/").pop();return i==="env"?r:r?`${i} ${r}`:i}});var NYe=H((mci,DYe)=>{"use strict";f();var Ihe=require("fs"),jjt=PYe();function Vjt(t){let n=Buffer.alloc(150),r;try{r=Ihe.openSync(t,"r"),Ihe.readSync(r,n,0,150,0),Ihe.closeSync(r)}catch{}return jjt(n.toString())}s(Vjt,"readShebang");DYe.exports=Vjt});var QYe=H((Aci,MYe)=>{"use strict";f();var $jt=require("path"),LYe=_Ye(),FYe=SYe(),zjt=NYe(),Yjt=process.platform==="win32",Kjt=/\.(?:com|exe)$/i,Jjt=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function Xjt(t){t.file=LYe(t);let e=t.file&&zjt(t.file);return e?(t.args.unshift(t.file),t.command=e,LYe(t)):t.file}s(Xjt,"detectShebang");function Zjt(t){if(!Yjt)return t;let e=Xjt(t),n=!Kjt.test(e);if(t.options.forceShell||n){let r=Jjt.test(e);t.command=$jt.normalize(t.command),t.command=FYe.command(t.command),t.args=t.args.map(o=>FYe.argument(o,r));let i=[t.command].concat(t.args).join(" ");t.args=["/d","/s","/c",`"${i}"`],t.command=process.env.comspec||"cmd.exe",t.options.windowsVerbatimArguments=!0}return t}s(Zjt,"parseNonShell");function eVt(t,e,n){e&&!Array.isArray(e)&&(n=e,e=null),e=e?e.slice(0):[],n=Object.assign({},n);let r={command:t,args:e,options:n,file:void 0,original:{command:t,args:e}};return n.shell?r:Zjt(r)}s(eVt,"parse");MYe.exports=eVt});var qYe=H((xci,UYe)=>{"use strict";f();var The=process.platform==="win32";function whe(t,e){return Object.assign(new Error(`${e} ${t.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${e} ${t.command}`,path:t.command,spawnargs:t.args})}s(whe,"notFoundError");function tVt(t,e){if(!The)return;let n=t.emit;t.emit=function(r,i){if(r==="exit"){let o=OYe(i,e);if(o)return n.call(t,"error",o)}return n.apply(t,arguments)}}s(tVt,"hookChildProcess");function OYe(t,e){return The&&t===1&&!e.file?whe(e.original,"spawn"):null}s(OYe,"verifyENOENT");function nVt(t,e){return The&&t===1&&!e.file?whe(e.original,"spawnSync"):null}s(nVt,"verifyENOENTSync");UYe.exports={hookChildProcess:tVt,verifyENOENT:OYe,verifyENOENTSync:nVt,notFoundError:whe}});var GYe=H((Eci,Q3)=>{"use strict";f();var WYe=require("child_process"),_he=QYe(),She=qYe();function HYe(t,e,n){let r=_he(t,e,n),i=WYe.spawn(r.command,r.args,r.options);return She.hookChildProcess(i,r),i}s(HYe,"spawn");function rVt(t,e,n){let r=_he(t,e,n),i=WYe.spawnSync(r.command,r.args,r.options);return i.error=i.error||She.verifyENOENTSync(i.status,r),i}s(rVt,"spawnSync");Q3.exports=HYe;Q3.exports.spawn=HYe;Q3.exports.sync=rVt;Q3.exports._parse=_he;Q3.exports._enoent=She});var BVt={};d1(BVt,{getTokenizer:()=>Bo,getTokenizerAsync:()=>m2e,main:()=>RKe});module.exports=eXe(BVt);f();f();BAe().install();f();f();var yB="github.copilot",PAe="github-enterprise";f();f();f();f();f();f();var ls=class extends Error{static{s(this,"CopilotAuthError")}constructor(e,n){super(e,{cause:n}),this.name="CopilotAuthError"}};f();f();var Af=class t{static{s(this,"ExpConfig")}constructor(e,n,r){this.variables=e,this.assignmentContext=n,this.features=r}static createFallbackConfig(e,n){return W7(e,{reason:n}),this.createEmptyConfig()}static createEmptyConfig(){return new t({},"","")}addToTelemetry(e){e.properties["VSCode.ABExp.Features"]=this.features,e.properties["abexp.assignmentcontext"]=this.assignmentContext}};f();var yf="X-Copilot-RelatedPluginVersion-",CB=(O=>(O.Market="X-MSEdge-Market",O.CorpNet="X-FD-Corpnet",O.Build="X-VSCode-Build",O.ApplicationVersion="X-VSCode-AppVersion",O.TargetPopulation="X-VSCode-TargetPopulation",O.ClientId="X-MSEdge-ClientId",O.ExtensionName="X-VSCode-ExtensionName",O.ExtensionVersion="X-VSCode-ExtensionVersion",O.ExtensionRelease="X-VSCode-ExtensionRelease",O.Language="X-VSCode-Language",O.CopilotClientTimeBucket="X-Copilot-ClientTimeBucket",O.CopilotEngine="X-Copilot-Engine",O.CopilotOverrideEngine="X-Copilot-OverrideEngine",O.CopilotRepository="X-Copilot-Repository",O.CopilotFileType="X-Copilot-FileType",O.CopilotUserKind="X-Copilot-UserKind",O.CopilotDogfood="X-Copilot-Dogfood",O.CopilotCustomModel="X-Copilot-CustomModel",O.CopilotOrgs="X-Copilot-Orgs",O.CopilotCustomModelNames="X-Copilot-CustomModelNames",O.CopilotTrackingId="X-Copilot-CopilotTrackingId",O.CopilotClientVersion="X-Copilot-ClientVersion",O.CopilotRelatedPluginVersionCppTools=yf+"msvscodecpptools",O.CopilotRelatedPluginVersionCMakeTools=yf+"msvscodecmaketools",O.CopilotRelatedPluginVersionMakefileTools=yf+"msvscodemakefiletools",O.CopilotRelatedPluginVersionCSharpDevKit=yf+"msdotnettoolscsdevkit",O.CopilotRelatedPluginVersionPython=yf+"mspythonpython",O.CopilotRelatedPluginVersionPylance=yf+"mspythonvscodepylance",O.CopilotRelatedPluginVersionJavaPack=yf+"vscjavavscodejavapack",O.CopilotRelatedPluginVersionTypescript=yf+"vscodetypescriptlanguagefeatures",O.CopilotRelatedPluginVersionTypescriptNext=yf+"msvscodevscodetypescriptnext",O.CopilotRelatedPluginVersionCSharp=yf+"msdotnettoolscsharp",O))(CB||{});var OXe={"X-Copilot-ClientTimeBucket":"timeBucket","X-Copilot-OverrideEngine":"engine","X-Copilot-Repository":"repo","X-Copilot-FileType":"fileType","X-Copilot-UserKind":"userKind"},tI=class t{constructor(e){this.filters=e;for(let[n,r]of Object.entries(this.filters))r===""&&delete this.filters[n]}static{s(this,"FilterSettings")}extends(e){for(let[n,r]of Object.entries(e.filters))if(this.filters[n]!==r)return!1;return!0}addToTelemetry(e){for(let[n,r]of Object.entries(this.filters)){let i=OXe[n];i!==void 0&&(e.properties[i]=r)}}stringify(){let e=Object.keys(this.filters);return e.sort(),e.map(n=>`${n}:${this.filters[n]}`).join(";")}toHeaders(){return{...this.filters}}withChange(e,n){return new t({...this.filters,[e]:n})}};f();var Kr=class{static{s(this,"Fetcher")}getImplementation(){return this}},xB=class extends Error{static{s(this,"HttpTimeoutError")}constructor(e,n){super(e,{cause:n}),this.name="HttpTimeoutError"}};function Fc(t){return!t||typeof t!="object"?!1:t instanceof xB||"name"in t&&t.name==="AbortError"||"code"in t&&t.code==="ABORT_ERR"}s(Fc,"isAbortError");var N_=class extends SyntaxError{constructor(n,r){super(n);this.code=r;this.name="JsonParseError"}static{s(this,"JsonParseError")}},rg=class extends Error{static{s(this,"FetchResponseError")}constructor(e,n=`HTTP ${e.status} ${e.statusText}`){super(n),this.name="FetchResponseError",this.code=`HTTP${e.status}`}},UXe=new Set(["ECONNABORTED","ECONNRESET","EHOSTUNREACH","ENETUNREACH","ENOTCONN","ENOTFOUND","ETIMEDOUT","ERR_HTTP2_STREAM_ERROR","ERR_SSL_BAD_DECRYPT","ERR_SSL_DECRYPTION_FAILED_OR_BAD_RECORD_MAC","ERR_SSL_INVALID_LIBRARY_(0)","ERR_SSL_SSLV3_ALERT_BAD_RECORD_MAC","ERR_SSL_WRONG_VERSION_NUMBER","ERR_STREAM_PREMATURE_CLOSE","ERR_TLS_CERT_ALTNAME_INVALID"]);function vB(t,e=!0){return t instanceof Error?e&&"cause"in t&&vB(t.cause,!1)?!0:t.name==="EditorFetcherError"||t.name==="FetchError"||t instanceof N_||t instanceof rg||t?.message?.startsWith("net::")||UXe.has(t.code??""):!1}s(vB,"isNetworkError");var yx=class{constructor(e,n,r,i,o){this.status=e;this.statusText=n;this.headers=r;this.getText=i;this.getBody=o;this.ok=this.status>=200&&this.status<300;this.clientError=this.status>=400&&this.status<500}static{s(this,"Response")}async text(){return this.getText()}async json(){let e=await this.text(),n=this.headers.get("content-type");if(!n||!n.includes("json"))throw new N_(`Response content-type is ${n??"missing"} (status=${this.status})`,`ContentType=${n}`);try{return JSON.parse(e)}catch(r){if(r instanceof SyntaxError){let i=r.message.match(/^(.*?) in JSON at position (\d+)(?: \(line \d+ column \d+\))?$/);if(i&&parseInt(i[2],10)==e.length||r.message==="Unexpected end of JSON input"){let o=new TextEncoder().encode(e).length,a=this.headers.get("content-length");throw a===null?new N_(`Response body truncated: actualLength=${o}`,"Truncated"):new N_(`Response body truncated: actualLength=${o}, headerLength=${a}`,"Truncated")}}throw r}}body(){return this.getBody()}};function nI(t,e,n,r,i,o,a,l,c){let u={...l,Authorization:`Bearer ${n}`,"X-Request-Id":i,"Openai-Organization":"github-copilot","VScode-SessionId":t.get(Ps).sessionId,"VScode-MachineId":t.get(Ps).machineId,...n0(t),"X-GitHub-Api-Version":ig};r&&(u["OpenAI-Intent"]=r);let d={method:"POST",headers:u,json:o,timeout:c},p=t.get(Kr);if(a){let h=new AbortController;a.onCancellationRequested(()=>{kt(t,"networking.cancelRequest",ir.createAndMarkAsIssued({headerRequestId:i})),h.abort()}),d.signal=h.signal}return p.fetch(e,d).catch(h=>{if(qXe(h))return kt(t,"networking.disconnectAll"),p.disconnectAll().then(()=>p.fetch(e,d));throw h})}s(nI,"postRequest");function qXe(t){return t instanceof Error?t.message=="ERR_HTTP2_GOAWAY_SESSION"?!0:"code"in t?t.code=="ECONNRESET"||t.code=="ETIMEDOUT"||t.code=="ERR_HTTP2_INVALID_SESSION":!1:!1}s(qXe,"isInterruptedNetworkError");f();f();var sc=class{static{s(this,"TelemetryUserConfig")}constructor(e,n,r,i){this.trackingId=n,this.optedIn=r??!1,this.ftFlag=i??"",this.setupUpdateOnToken(e)}setupUpdateOnToken(e){ia(e,n=>{let r=n.getTokenValue("rt")==="1",i=n.getTokenValue("ft")??"",o=n.getTokenValue("tid"),a=n.organization_list,l=n.enterprise_list,c=n.getTokenValue("sku");o!==void 0&&(this.trackingId=o,this.organizationsList=a?.toString(),this.enterpriseList=l?.toString(),this.sku=c,this.optedIn=r,this.ftFlag=i)})}};var _L=je(vx()),SL=je(require("os"));var WXe=/^(\s+at)?(.*?)(@|\s\(|\s)([^(\n]+?)(:\d+)?(:\d+)?(\)?)$/;function HXe(t){let e={type:t.name,value:t.message},n=t.stack?.replace(/^.*?:\d+\n.*\n *\^?\n\n/,"");if(n?.startsWith(t.toString()+`
`)){e.stacktrace=[];for(let r of n.slice(t.toString().length+1).split(/\n/).reverse()){let i=r.match(WXe),o={filename:"",function:""};i&&(o.function=i[2]?.trim()?.replace(/^[^.]{1,2}(\.|$)/,"_$1")??o.function,o.filename=(i[4]?.trim()??o.filename).replace(/^\.\/dist\//,"/github-copilot/dist/"),i[5]&&i[5]!==":0"&&(o.lineno=i[5].slice(1)),i[6]&&i[5]!==":0"&&(o.colno=i[6].slice(1)),o.in_app=!/[[<:]|(?:^|\/)node_modules\//.test(o.filename)),e.stacktrace.push(o)}}return e}s(HXe,"buildExceptionDetail");function mX(t,e){let n=t.get(ur),r=n.getEditorInfo(),i=t.get(sc),o={"#editor":r.devName??r.name,"#editor_version":og({name:r.devName??r.name,version:r.version}),"#plugin":n.getEditorPluginInfo().name,"#plugin_version":og(n.getEditorPluginInfo()),"#session_id":t.get(Ps).sessionId,"#machine_id":t.get(Ps).machineId,"#architecture":SL.arch(),"#os_platform":SL.platform(),...e};return i.trackingId&&(o.user=i.trackingId,o["#tracking_id"]=i.trackingId),o}s(mX,"buildContext");function q1e(t,e){let n=t.get(zi),r=t.get(ur).getEditorInfo(),i=typeof process<"u"?process.versions.node:"web",o={app:"copilot-client",rollup_id:"auto",platform:"node",release:n.getBuildType()!=="dev"?`copilot-client@${n.getVersion()}`:void 0,deployed_to:n.getBuildType(),catalog_service:r.name==="vscode"?"CopilotCompletionsVSCode":"CopilotLanguageServer",context:mX(t,{"#node_version":i}),sensitive_context:{}},a=[];o.exception_detail=[];let l=0,c=e;for(;c instanceof Error&&l<10;){let d=HXe(c);o.exception_detail.unshift(d),a.unshift([c,d]),l+=1,c=c.cause}let u=[];for(let[d,p]of a)if(p.stacktrace&&p.stacktrace.length>0){u.push(`${p.type}: ${d.code??""}`);let m=[...p.stacktrace].reverse();for(let h of m)if(h.filename?.startsWith("/github-copilot/"))return o;for(let h of m)if(h.in_app){u.push(`${h.filename?.replace(/^\.\//,"")}:${h.lineno}:${h.colno}`);break}u.push(`${m[0].filename?.replace(/^\.\//,"")}`)}else return o;return o.exception_detail.length>0&&(o.rollup_id=(0,_L.SHA256)(_L.enc.Utf16.parse(u.join(`
`))).toString()),o}s(q1e,"buildPayload");f();var EB=class{static{s(this,"FailingTelemetryReporter")}sendTelemetryEvent(e,n,r){throw new Error("Telemetry disabled")}sendTelemetryErrorEvent(e,n,r,i){throw new Error("Telemetry disabled")}dispose(){return Promise.resolve()}hackOptOutListener(){}};f();f();var H1e=je(vx());var Kn=class{constructor(e=10){this.valueMap=new Map;if(e<1)throw new Error("Size limit must be at least 1");this.sizeLimit=e}static{s(this,"LRUCacheMap")}set(e,n){if(this.has(e))this.valueMap.delete(e);else if(this.valueMap.size>=this.sizeLimit){let r=this.valueMap.keys().next().value;this.delete(r)}return this.valueMap.set(e,n),this}get(e){if(this.valueMap.has(e)){let n=this.valueMap.get(e);return this.valueMap.delete(e),this.valueMap.set(e,n),n}}delete(e){return this.valueMap.delete(e)}clear(){this.valueMap.clear()}get size(){return this.valueMap.size}keys(){return new Map(this.valueMap).keys()}values(){return new Map(this.valueMap).values()}entries(){return new Map(this.valueMap).entries()}[Symbol.iterator](){return this.entries()}has(e){return this.valueMap.has(e)}forEach(e,n){new Map(this.valueMap).forEach(e,n)}get[Symbol.toStringTag](){return"LRUCacheMap"}peek(e){return this.valueMap.get(e)}},IB=class extends Kn{constructor(n,r=2*60*1e3){super(n);this.defaultTtl=r;this.expiration=new Map}static{s(this,"LRUExpirationCacheMap")}has(n){let r=!1,i=this.expiration.get(n);return i!==void 0&&(i>performance.now()&&(r=super.has(n)),r||this.delete(n)),r}get(n){let r=this.expiration.get(n);if(r!==void 0){if(r>performance.now())return super.get(n);this.delete(n)}}peek(n){let r=this.expiration.get(n);if(r!==void 0){if(r>performance.now())return super.peek(n);this.delete(n)}}set(n,r,i=this.defaultTtl){if(i<=0)throw new Error("TTL must be greater than 0");let o=super.set(n,r);return this.expiration.set(n,performance.now()+i),o}clear(){super.clear(),this.expiration.clear()}delete(n){return this.expiration.delete(n),super.delete(n)}get[Symbol.toStringTag](){return"LRUExpirationCacheMap"}};var sg=class{constructor(e=5){this.perTenMinutes=e;this.cache=new Kn}static{s(this,"ExceptionRateLimiter")}isThrottled(e){let n=Date.now(),r=this.cache.get(e)||new Array(this.perTenMinutes).fill(0);return n-r[0]<6e5?!0:(r.push(n),r.shift(),this.cache.set(e,r),!1)}};f();var Cf=class t{constructor(e){this.flags=e}static{s(this,"RuntimeMode")}static fromEnvironment(e,n=process.argv,r=process.env){return new t({debug:j1e(n,r),verboseLogging:jXe(n,r),testMode:e,simulation:GXe(r)})}};function tm(t){return t.get(Cf).flags.testMode}s(tm,"isRunningInTest");function L_(t){return tm(t)}s(L_,"shouldFailForDebugPurposes");function TB(t){return t.get(Cf).flags.debug}s(TB,"isDebugEnabled");function G1e(t){return t.get(Cf).flags.verboseLogging}s(G1e,"isVerboseLoggingEnabled");function j1e(t,e){return t.includes("--debug")||hX(e,"DEBUG")}s(j1e,"determineDebugFlag");function GXe(t){return hX(t,"SIMULATION")}s(GXe,"determineSimulationFlag");function kL(t){return t.get(Cf).flags.simulation}s(kL,"isRunningInSimulation");function jXe(t,e){return e.COPILOT_AGENT_VERBOSE==="1"||e.COPILOT_AGENT_VERBOSE?.toLowerCase()==="true"||hX(e,"VERBOSE")||j1e(t,e)}s(jXe,"determineVerboseLoggingEnabled");function hX(t,e){for(let n of["GH_COPILOT_","GITHUB_COPILOT_"]){let r=t[`${n}${e}`];if(r)return r==="1"||r?.toLowerCase()==="true"}return!1}s(hX,"determineEnvFlagEnabled");f();var ba=class{constructor(){this.promises=new Set}static{s(this,"PromiseQueue")}register(e){this.promises.add(e),e.finally(()=>this.promises.delete(e))}async flush(){await Promise.allSettled(this.promises)}};f();var z1e=require("os"),Y1e=je(require("path"));function wB(t){return t.replace(/(file:\/\/)([^\s<>]+)/gi,"$1[redacted]").replace(/(^|[\s|:=(<'"`])((?:\/(?=[^/])|\\|[a-zA-Z]:[\\/])[^\s:)>'"`]+)/g,"$1[redacted]")}s(wB,"redactPaths");var VXe=new Set(["Maximum call stack size exceeded","Set maximum size exceeded","Invalid arguments"]),$Xe=[/^[\p{L}\p{Nl}$\p{Mn}\p{Mc}\p{Nd}\p{Pc}.]+ is not a function[ \w]*$/u,/^Cannot read properties of undefined \(reading '[\p{L}\p{Nl}$\p{Mn}\p{Mc}\p{Nd}\p{Pc}]+'\)$/u];function AX(t){if(VXe.has(t))return t;for(let e of $Xe)if(e.test(t))return t;return wB(t).replace(/\bDNS:(?:\*\.)?[\w.-]+/gi,"DNS:[redacted]")}s(AX,"redactMessage");function BL(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(BL,"escapeForRegExp");var zXe=new RegExp("(?<=^|[\\s|(\"'`]|file://)"+BL((0,z1e.homedir)())+"(?=$|[\\\\/:\"'`])","gi");function gX(t){return t.replace(zXe,"~")}s(gX,"redactHomeDir");var K1e="[\\\\/]?([^:)]*)(?=:\\d)",V1e=new RegExp(BL(Y1e.sep),"g"),$1e=new RegExp(BL(__dirname.replace(/[\\/]lib[\\/]src[\\/]util$|[\\/]dist$/,""))+K1e,"gi");function yX(t,e,n=!1,r=[]){let i=new Error(e(t));i.name=t.name,typeof t.syscall=="string"&&(i.syscall=t.syscall),typeof t.code=="string"&&(i.code=t.code),typeof t.errno=="number"&&(i.errno=t.errno),i.stack=void 0;let o=t.stack?.replace(/^.*?:\d+\n.*\n *\^?\n\n/,""),a;for(let l of[t.toString(),`${t.name}: ${t.message}`])if(o?.startsWith(l+`
`)){a=o.slice(l.length+1).split(/\n/);break}if(a){i.stack=i.toString();for(let l of a)if($1e.test(l))i.stack+=`
${wB(l.replace($1e,(c,u)=>"./"+u.replace(V1e,"/")))}`;else if(/[ (]node:|[ (]wasm:\/\/wasm\/| \(<anonymous>\)$/.test(l))i.stack+=`
${wB(l)}`;else{let c=!1;for(let{prefix:u,path:d}of r){let p=new RegExp(BL(d.replace(/[\\/]$/,""))+K1e,"gi");if(p.test(l)){i.stack+=`
${wB(l.replace(p,(m,h)=>u+h.replace(V1e,"/")))}`,c=!0;break}}if(c)continue;n?i.stack+=`
${gX(l)}`:i.stack+=`
    at [redacted]:0:0`}}else n&&o&&(i.stack=gX(o));return t.cause instanceof Error&&(i.cause=yX(t.cause,e,n,r)),i}s(yX,"cloneError");function J1e(t){let e=t.message;return typeof t.path=="string"&&t.path.length>0&&(e=e.replaceAll(t.path,"<path>")),e}s(J1e,"errorMessageWithoutPath");function X1e(t,e){return yX(t,s(function(r){return gX(J1e(r))},"prepareMessage"),!0,e)}s(X1e,"prepareErrorForRestrictedTelemetry");function Z1e(t,e,n=!1){return yX(t,s(function(i){if(n)return AX(J1e(i));let o="[redacted]";return typeof i.code=="string"&&(o=i.code+" "+o),typeof i.syscall=="string"?o=wB(i.syscall)+" "+o:"erroredSysCall"in i&&typeof i.erroredSysCall=="string"&&(o=i.erroredSysCall+" "+o),o},"prepareMessage"),!1,e)}s(Z1e,"redactError");f();f();var Mc={};d1(Mc,{HasPropertyKey:()=>PL,IsArray:()=>Ea,IsAsyncIterator:()=>CX,IsBigInt:()=>_B,IsBoolean:()=>m1,IsDate:()=>rI,IsFunction:()=>xX,IsIterator:()=>vX,IsNull:()=>bX,IsNumber:()=>r0,IsObject:()=>wo,IsRegExp:()=>SB,IsString:()=>qo,IsSymbol:()=>EX,IsUint8Array:()=>h1,IsUndefined:()=>Ia});f();function PL(t,e){return e in t}s(PL,"HasPropertyKey");function CX(t){return wo(t)&&!Ea(t)&&!h1(t)&&Symbol.asyncIterator in t}s(CX,"IsAsyncIterator");function Ea(t){return Array.isArray(t)}s(Ea,"IsArray");function _B(t){return typeof t=="bigint"}s(_B,"IsBigInt");function m1(t){return typeof t=="boolean"}s(m1,"IsBoolean");function rI(t){return t instanceof globalThis.Date}s(rI,"IsDate");function xX(t){return typeof t=="function"}s(xX,"IsFunction");function vX(t){return wo(t)&&!Ea(t)&&!h1(t)&&Symbol.iterator in t}s(vX,"IsIterator");function bX(t){return t===null}s(bX,"IsNull");function r0(t){return typeof t=="number"}s(r0,"IsNumber");function wo(t){return typeof t=="object"&&t!==null}s(wo,"IsObject");function SB(t){return t instanceof globalThis.RegExp}s(SB,"IsRegExp");function qo(t){return typeof t=="string"}s(qo,"IsString");function EX(t){return typeof t=="symbol"}s(EX,"IsSymbol");function h1(t){return t instanceof globalThis.Uint8Array}s(h1,"IsUint8Array");function Ia(t){return t===void 0}s(Ia,"IsUndefined");function YXe(t){return t.map(e=>DL(e))}s(YXe,"ArrayType");function KXe(t){return new Date(t.getTime())}s(KXe,"DateType");function JXe(t){return new Uint8Array(t)}s(JXe,"Uint8ArrayType");function XXe(t){return new RegExp(t.source,t.flags)}s(XXe,"RegExpType");function ZXe(t){let e={};for(let n of Object.getOwnPropertyNames(t))e[n]=DL(t[n]);for(let n of Object.getOwnPropertySymbols(t))e[n]=DL(t[n]);return e}s(ZXe,"ObjectType");function DL(t){return Ea(t)?YXe(t):rI(t)?KXe(t):h1(t)?JXe(t):SB(t)?XXe(t):wo(t)?ZXe(t):t}s(DL,"Visit");function cs(t){return DL(t)}s(cs,"Clone");function F_(t,e){return e===void 0?cs(t):cs({...e,...t})}s(F_,"CloneType");f();f();f();function NL(t){return ci(t)&&globalThis.Symbol.asyncIterator in t}s(NL,"IsAsyncIterator");function LL(t){return ci(t)&&globalThis.Symbol.iterator in t}s(LL,"IsIterator");function IX(t){return ci(t)&&(globalThis.Object.getPrototypeOf(t)===Object.prototype||globalThis.Object.getPrototypeOf(t)===null)}s(IX,"IsStandardObject");function FL(t){return t instanceof globalThis.Promise}s(FL,"IsPromise");function xu(t){return t instanceof Date&&globalThis.Number.isFinite(t.getTime())}s(xu,"IsDate");function eye(t){return t instanceof globalThis.Map}s(eye,"IsMap");function tye(t){return t instanceof globalThis.Set}s(tye,"IsSet");function xf(t){return globalThis.ArrayBuffer.isView(t)}s(xf,"IsTypedArray");function M_(t){return t instanceof globalThis.Uint8Array}s(M_,"IsUint8Array");function hr(t,e){return e in t}s(hr,"HasPropertyKey");function ci(t){return t!==null&&typeof t=="object"}s(ci,"IsObject");function gr(t){return globalThis.Array.isArray(t)&&!globalThis.ArrayBuffer.isView(t)}s(gr,"IsArray");function us(t){return t===void 0}s(us,"IsUndefined");function g1(t){return t===null}s(g1,"IsNull");function ag(t){return typeof t=="boolean"}s(ag,"IsBoolean");function qn(t){return typeof t=="number"}s(qn,"IsNumber");function ML(t){return globalThis.Number.isInteger(t)}s(ML,"IsInteger");function ac(t){return typeof t=="bigint"}s(ac,"IsBigInt");function qi(t){return typeof t=="string"}s(qi,"IsString");function bx(t){return typeof t=="function"}s(bx,"IsFunction");function A1(t){return typeof t=="symbol"}s(A1,"IsSymbol");function i0(t){return ac(t)||ag(t)||g1(t)||qn(t)||qi(t)||A1(t)||us(t)}s(i0,"IsValueType");var Ko;(function(t){t.InstanceMode="default",t.ExactOptionalPropertyTypes=!1,t.AllowArrayObject=!1,t.AllowNaN=!1,t.AllowNullVoid=!1;function e(a,l){return t.ExactOptionalPropertyTypes?l in a:a[l]!==void 0}s(e,"IsExactOptionalProperty"),t.IsExactOptionalProperty=e;function n(a){let l=ci(a);return t.AllowArrayObject?l:l&&!gr(a)}s(n,"IsObjectLike"),t.IsObjectLike=n;function r(a){return n(a)&&!(a instanceof Date)&&!(a instanceof Uint8Array)}s(r,"IsRecordLike"),t.IsRecordLike=r;function i(a){return t.AllowNaN?qn(a):Number.isFinite(a)}s(i,"IsNumberLike"),t.IsNumberLike=i;function o(a){let l=us(a);return t.AllowNullVoid?l||a===null:l}s(o,"IsVoidLike"),t.IsVoidLike=o})(Ko||(Ko={}));f();function eZe(t){return globalThis.Object.freeze(t).map(e=>RB(e))}s(eZe,"ImmutableArray");function tZe(t){let e={};for(let n of Object.getOwnPropertyNames(t))e[n]=RB(t[n]);for(let n of Object.getOwnPropertySymbols(t))e[n]=RB(t[n]);return globalThis.Object.freeze(e)}s(tZe,"ImmutableObject");function RB(t){return Ea(t)?eZe(t):rI(t)?t:h1(t)?t:SB(t)?t:wo(t)?tZe(t):t}s(RB,"Immutable");function nt(t,e){let n=e!==void 0?{...e,...t}:t;switch(Ko.InstanceMode){case"freeze":return RB(n);case"clone":return cs(n);default:return n}}s(nt,"CreateType");f();var Ar=class extends Error{static{s(this,"TypeBoxError")}constructor(e){super(e)}};f();f();f();var Ds=Symbol.for("TypeBox.Transform"),nm=Symbol.for("TypeBox.Readonly"),lc=Symbol.for("TypeBox.Optional"),vf=Symbol.for("TypeBox.Hint"),Ze=Symbol.for("TypeBox.Kind");function Q_(t){return wo(t)&&t[nm]==="Readonly"}s(Q_,"IsReadonly");function id(t){return wo(t)&&t[lc]==="Optional"}s(id,"IsOptional");function TX(t){return Ni(t,"Any")}s(TX,"IsAny");function wX(t){return Ni(t,"Argument")}s(wX,"IsArgument");function rm(t){return Ni(t,"Array")}s(rm,"IsArray");function iI(t){return Ni(t,"AsyncIterator")}s(iI,"IsAsyncIterator");function oI(t){return Ni(t,"BigInt")}s(oI,"IsBigInt");function y1(t){return Ni(t,"Boolean")}s(y1,"IsBoolean");function im(t){return Ni(t,"Computed")}s(im,"IsComputed");function om(t){return Ni(t,"Constructor")}s(om,"IsConstructor");function nZe(t){return Ni(t,"Date")}s(nZe,"IsDate");function sm(t){return Ni(t,"Function")}s(sm,"IsFunction");function am(t){return Ni(t,"Integer")}s(am,"IsInteger");function $s(t){return Ni(t,"Intersect")}s($s,"IsIntersect");function sI(t){return Ni(t,"Iterator")}s(sI,"IsIterator");function Ni(t,e){return wo(t)&&Ze in t&&t[Ze]===e}s(Ni,"IsKindOf");function QL(t){return m1(t)||r0(t)||qo(t)}s(QL,"IsLiteralValue");function o0(t){return Ni(t,"Literal")}s(o0,"IsLiteral");function s0(t){return Ni(t,"MappedKey")}s(s0,"IsMappedKey");function ds(t){return Ni(t,"MappedResult")}s(ds,"IsMappedResult");function Ex(t){return Ni(t,"Never")}s(Ex,"IsNever");function rZe(t){return Ni(t,"Not")}s(rZe,"IsNot");function kB(t){return Ni(t,"Null")}s(kB,"IsNull");function lm(t){return Ni(t,"Number")}s(lm,"IsNumber");function Ta(t){return Ni(t,"Object")}s(Ta,"IsObject");function aI(t){return Ni(t,"Promise")}s(aI,"IsPromise");function lI(t){return Ni(t,"Record")}s(lI,"IsRecord");function oa(t){return Ni(t,"Ref")}s(oa,"IsRef");function _X(t){return Ni(t,"RegExp")}s(_X,"IsRegExp");function C1(t){return Ni(t,"String")}s(C1,"IsString");function BB(t){return Ni(t,"Symbol")}s(BB,"IsSymbol");function a0(t){return Ni(t,"TemplateLiteral")}s(a0,"IsTemplateLiteral");function iZe(t){return Ni(t,"This")}s(iZe,"IsThis");function so(t){return wo(t)&&Ds in t}s(so,"IsTransform");function l0(t){return Ni(t,"Tuple")}s(l0,"IsTuple");function x1(t){return Ni(t,"Undefined")}s(x1,"IsUndefined");function Wi(t){return Ni(t,"Union")}s(Wi,"IsUnion");function oZe(t){return Ni(t,"Uint8Array")}s(oZe,"IsUint8Array");function sZe(t){return Ni(t,"Unknown")}s(sZe,"IsUnknown");function aZe(t){return Ni(t,"Unsafe")}s(aZe,"IsUnsafe");function lZe(t){return Ni(t,"Void")}s(lZe,"IsVoid");function Ix(t){return wo(t)&&Ze in t&&qo(t[Ze])}s(Ix,"IsKind");function Ns(t){return TX(t)||wX(t)||rm(t)||y1(t)||oI(t)||iI(t)||im(t)||om(t)||nZe(t)||sm(t)||am(t)||$s(t)||sI(t)||o0(t)||s0(t)||ds(t)||Ex(t)||rZe(t)||kB(t)||lm(t)||Ta(t)||aI(t)||lI(t)||oa(t)||_X(t)||C1(t)||BB(t)||a0(t)||iZe(t)||l0(t)||x1(t)||Wi(t)||oZe(t)||sZe(t)||aZe(t)||lZe(t)||Ix(t)}s(Ns,"IsSchema");var Pe={};d1(Pe,{IsAny:()=>oye,IsArgument:()=>sye,IsArray:()=>aye,IsAsyncIterator:()=>lye,IsBigInt:()=>cye,IsBoolean:()=>uye,IsComputed:()=>dye,IsConstructor:()=>fye,IsDate:()=>pye,IsFunction:()=>mye,IsImport:()=>mZe,IsInteger:()=>hye,IsIntersect:()=>gye,IsIterator:()=>Aye,IsKind:()=>Hye,IsKindOf:()=>gi,IsLiteral:()=>DB,IsLiteralBoolean:()=>hZe,IsLiteralNumber:()=>Cye,IsLiteralString:()=>yye,IsLiteralValue:()=>xye,IsMappedKey:()=>vye,IsMappedResult:()=>bye,IsNever:()=>Eye,IsNot:()=>Iye,IsNull:()=>Tye,IsNumber:()=>wye,IsObject:()=>_ye,IsOptional:()=>pZe,IsPromise:()=>Sye,IsProperties:()=>OL,IsReadonly:()=>fZe,IsRecord:()=>Rye,IsRecursive:()=>gZe,IsRef:()=>kye,IsRegExp:()=>Bye,IsSchema:()=>ps,IsString:()=>Pye,IsSymbol:()=>Dye,IsTemplateLiteral:()=>Nye,IsThis:()=>Lye,IsTransform:()=>Fye,IsTuple:()=>Mye,IsUint8Array:()=>Oye,IsUndefined:()=>Qye,IsUnion:()=>BX,IsUnionLiteral:()=>AZe,IsUnknown:()=>Uye,IsUnsafe:()=>qye,IsVoid:()=>Wye,TypeGuardUnknownTypeError:()=>SX});f();var SX=class extends Ar{static{s(this,"TypeGuardUnknownTypeError")}},cZe=["Argument","Any","Array","AsyncIterator","BigInt","Boolean","Computed","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"];function nye(t){try{return new RegExp(t),!0}catch{return!1}}s(nye,"IsPattern");function RX(t){if(!qo(t))return!1;for(let e=0;e<t.length;e++){let n=t.charCodeAt(e);if(n>=7&&n<=13||n===27||n===127)return!1}return!0}s(RX,"IsControlCharacterFree");function rye(t){return kX(t)||ps(t)}s(rye,"IsAdditionalProperties");function PB(t){return Ia(t)||_B(t)}s(PB,"IsOptionalBigInt");function Wo(t){return Ia(t)||r0(t)}s(Wo,"IsOptionalNumber");function kX(t){return Ia(t)||m1(t)}s(kX,"IsOptionalBoolean");function _o(t){return Ia(t)||qo(t)}s(_o,"IsOptionalString");function uZe(t){return Ia(t)||qo(t)&&RX(t)&&nye(t)}s(uZe,"IsOptionalPattern");function dZe(t){return Ia(t)||qo(t)&&RX(t)}s(dZe,"IsOptionalFormat");function iye(t){return Ia(t)||ps(t)}s(iye,"IsOptionalSchema");function fZe(t){return wo(t)&&t[nm]==="Readonly"}s(fZe,"IsReadonly");function pZe(t){return wo(t)&&t[lc]==="Optional"}s(pZe,"IsOptional");function oye(t){return gi(t,"Any")&&_o(t.$id)}s(oye,"IsAny");function sye(t){return gi(t,"Argument")&&r0(t.index)}s(sye,"IsArgument");function aye(t){return gi(t,"Array")&&t.type==="array"&&_o(t.$id)&&ps(t.items)&&Wo(t.minItems)&&Wo(t.maxItems)&&kX(t.uniqueItems)&&iye(t.contains)&&Wo(t.minContains)&&Wo(t.maxContains)}s(aye,"IsArray");function lye(t){return gi(t,"AsyncIterator")&&t.type==="AsyncIterator"&&_o(t.$id)&&ps(t.items)}s(lye,"IsAsyncIterator");function cye(t){return gi(t,"BigInt")&&t.type==="bigint"&&_o(t.$id)&&PB(t.exclusiveMaximum)&&PB(t.exclusiveMinimum)&&PB(t.maximum)&&PB(t.minimum)&&PB(t.multipleOf)}s(cye,"IsBigInt");function uye(t){return gi(t,"Boolean")&&t.type==="boolean"&&_o(t.$id)}s(uye,"IsBoolean");function dye(t){return gi(t,"Computed")&&qo(t.target)&&Ea(t.parameters)&&t.parameters.every(e=>ps(e))}s(dye,"IsComputed");function fye(t){return gi(t,"Constructor")&&t.type==="Constructor"&&_o(t.$id)&&Ea(t.parameters)&&t.parameters.every(e=>ps(e))&&ps(t.returns)}s(fye,"IsConstructor");function pye(t){return gi(t,"Date")&&t.type==="Date"&&_o(t.$id)&&Wo(t.exclusiveMaximumTimestamp)&&Wo(t.exclusiveMinimumTimestamp)&&Wo(t.maximumTimestamp)&&Wo(t.minimumTimestamp)&&Wo(t.multipleOfTimestamp)}s(pye,"IsDate");function mye(t){return gi(t,"Function")&&t.type==="Function"&&_o(t.$id)&&Ea(t.parameters)&&t.parameters.every(e=>ps(e))&&ps(t.returns)}s(mye,"IsFunction");function mZe(t){return gi(t,"Import")&&PL(t,"$defs")&&wo(t.$defs)&&OL(t.$defs)&&PL(t,"$ref")&&qo(t.$ref)&&t.$ref in t.$defs}s(mZe,"IsImport");function hye(t){return gi(t,"Integer")&&t.type==="integer"&&_o(t.$id)&&Wo(t.exclusiveMaximum)&&Wo(t.exclusiveMinimum)&&Wo(t.maximum)&&Wo(t.minimum)&&Wo(t.multipleOf)}s(hye,"IsInteger");function OL(t){return wo(t)&&Object.entries(t).every(([e,n])=>RX(e)&&ps(n))}s(OL,"IsProperties");function gye(t){return gi(t,"Intersect")&&!(qo(t.type)&&t.type!=="object")&&Ea(t.allOf)&&t.allOf.every(e=>ps(e)&&!Fye(e))&&_o(t.type)&&(kX(t.unevaluatedProperties)||iye(t.unevaluatedProperties))&&_o(t.$id)}s(gye,"IsIntersect");function Aye(t){return gi(t,"Iterator")&&t.type==="Iterator"&&_o(t.$id)&&ps(t.items)}s(Aye,"IsIterator");function gi(t,e){return wo(t)&&Ze in t&&t[Ze]===e}s(gi,"IsKindOf");function yye(t){return DB(t)&&qo(t.const)}s(yye,"IsLiteralString");function Cye(t){return DB(t)&&r0(t.const)}s(Cye,"IsLiteralNumber");function hZe(t){return DB(t)&&m1(t.const)}s(hZe,"IsLiteralBoolean");function DB(t){return gi(t,"Literal")&&_o(t.$id)&&xye(t.const)}s(DB,"IsLiteral");function xye(t){return m1(t)||r0(t)||qo(t)}s(xye,"IsLiteralValue");function vye(t){return gi(t,"MappedKey")&&Ea(t.keys)&&t.keys.every(e=>r0(e)||qo(e))}s(vye,"IsMappedKey");function bye(t){return gi(t,"MappedResult")&&OL(t.properties)}s(bye,"IsMappedResult");function Eye(t){return gi(t,"Never")&&wo(t.not)&&Object.getOwnPropertyNames(t.not).length===0}s(Eye,"IsNever");function Iye(t){return gi(t,"Not")&&ps(t.not)}s(Iye,"IsNot");function Tye(t){return gi(t,"Null")&&t.type==="null"&&_o(t.$id)}s(Tye,"IsNull");function wye(t){return gi(t,"Number")&&t.type==="number"&&_o(t.$id)&&Wo(t.exclusiveMaximum)&&Wo(t.exclusiveMinimum)&&Wo(t.maximum)&&Wo(t.minimum)&&Wo(t.multipleOf)}s(wye,"IsNumber");function _ye(t){return gi(t,"Object")&&t.type==="object"&&_o(t.$id)&&OL(t.properties)&&rye(t.additionalProperties)&&Wo(t.minProperties)&&Wo(t.maxProperties)}s(_ye,"IsObject");function Sye(t){return gi(t,"Promise")&&t.type==="Promise"&&_o(t.$id)&&ps(t.item)}s(Sye,"IsPromise");function Rye(t){return gi(t,"Record")&&t.type==="object"&&_o(t.$id)&&rye(t.additionalProperties)&&wo(t.patternProperties)&&(e=>{let n=Object.getOwnPropertyNames(e.patternProperties);return n.length===1&&nye(n[0])&&wo(e.patternProperties)&&ps(e.patternProperties[n[0]])})(t)}s(Rye,"IsRecord");function gZe(t){return wo(t)&&vf in t&&t[vf]==="Recursive"}s(gZe,"IsRecursive");function kye(t){return gi(t,"Ref")&&_o(t.$id)&&qo(t.$ref)}s(kye,"IsRef");function Bye(t){return gi(t,"RegExp")&&_o(t.$id)&&qo(t.source)&&qo(t.flags)&&Wo(t.maxLength)&&Wo(t.minLength)}s(Bye,"IsRegExp");function Pye(t){return gi(t,"String")&&t.type==="string"&&_o(t.$id)&&Wo(t.minLength)&&Wo(t.maxLength)&&uZe(t.pattern)&&dZe(t.format)}s(Pye,"IsString");function Dye(t){return gi(t,"Symbol")&&t.type==="symbol"&&_o(t.$id)}s(Dye,"IsSymbol");function Nye(t){return gi(t,"TemplateLiteral")&&t.type==="string"&&qo(t.pattern)&&t.pattern[0]==="^"&&t.pattern[t.pattern.length-1]==="$"}s(Nye,"IsTemplateLiteral");function Lye(t){return gi(t,"This")&&_o(t.$id)&&qo(t.$ref)}s(Lye,"IsThis");function Fye(t){return wo(t)&&Ds in t}s(Fye,"IsTransform");function Mye(t){return gi(t,"Tuple")&&t.type==="array"&&_o(t.$id)&&r0(t.minItems)&&r0(t.maxItems)&&t.minItems===t.maxItems&&(Ia(t.items)&&Ia(t.additionalItems)&&t.minItems===0||Ea(t.items)&&t.items.every(e=>ps(e)))}s(Mye,"IsTuple");function Qye(t){return gi(t,"Undefined")&&t.type==="undefined"&&_o(t.$id)}s(Qye,"IsUndefined");function AZe(t){return BX(t)&&t.anyOf.every(e=>yye(e)||Cye(e))}s(AZe,"IsUnionLiteral");function BX(t){return gi(t,"Union")&&_o(t.$id)&&wo(t)&&Ea(t.anyOf)&&t.anyOf.every(e=>ps(e))}s(BX,"IsUnion");function Oye(t){return gi(t,"Uint8Array")&&t.type==="Uint8Array"&&_o(t.$id)&&Wo(t.minByteLength)&&Wo(t.maxByteLength)}s(Oye,"IsUint8Array");function Uye(t){return gi(t,"Unknown")&&_o(t.$id)}s(Uye,"IsUnknown");function qye(t){return gi(t,"Unsafe")}s(qye,"IsUnsafe");function Wye(t){return gi(t,"Void")&&t.type==="void"&&_o(t.$id)}s(Wye,"IsVoid");function Hye(t){return wo(t)&&Ze in t&&qo(t[Ze])&&!cZe.includes(t[Ze])}s(Hye,"IsKind");function ps(t){return wo(t)&&(oye(t)||sye(t)||aye(t)||uye(t)||cye(t)||lye(t)||dye(t)||fye(t)||pye(t)||mye(t)||hye(t)||gye(t)||Aye(t)||DB(t)||vye(t)||bye(t)||Eye(t)||Iye(t)||Tye(t)||wye(t)||_ye(t)||Sye(t)||Rye(t)||kye(t)||Bye(t)||Pye(t)||Dye(t)||Nye(t)||Lye(t)||Mye(t)||Qye(t)||BX(t)||Oye(t)||Uye(t)||qye(t)||Wye(t)||Hye(t))}s(ps,"IsSchema");f();var PX="(true|false)",NB="(0|[1-9][0-9]*)",DX="(.*)",yZe="(?!.*)",fKt=`^${PX}$`,lg=`^${NB}$`,cg=`^${DX}$`,Gye=`^${yZe}$`;f();var cm={};d1(cm,{Clear:()=>xZe,Delete:()=>vZe,Entries:()=>CZe,Get:()=>IZe,Has:()=>bZe,Set:()=>EZe});f();var O_=new Map;function CZe(){return new Map(O_)}s(CZe,"Entries");function xZe(){return O_.clear()}s(xZe,"Clear");function vZe(t){return O_.delete(t)}s(vZe,"Delete");function bZe(t){return O_.has(t)}s(bZe,"Has");function EZe(t,e){O_.set(t,e)}s(EZe,"Set");function IZe(t){return O_.get(t)}s(IZe,"Get");var vu={};d1(vu,{Clear:()=>wZe,Delete:()=>_Ze,Entries:()=>TZe,Get:()=>kZe,Has:()=>SZe,Set:()=>RZe});f();var U_=new Map;function TZe(){return new Map(U_)}s(TZe,"Entries");function wZe(){return U_.clear()}s(wZe,"Clear");function _Ze(t){return U_.delete(t)}s(_Ze,"Delete");function SZe(t){return U_.has(t)}s(SZe,"Has");function RZe(t,e){U_.set(t,e)}s(RZe,"Set");function kZe(t){return U_.get(t)}s(kZe,"Get");f();function jye(t,e){return t.includes(e)}s(jye,"SetIncludes");function Vye(t){return[...new Set(t)]}s(Vye,"SetDistinct");function BZe(t,e){return t.filter(n=>e.includes(n))}s(BZe,"SetIntersect");function PZe(t,e){return t.reduce((n,r)=>BZe(n,r),e)}s(PZe,"SetIntersectManyResolve");function $ye(t){return t.length===1?t[0]:t.length>1?PZe(t.slice(1),t[0]):[]}s($ye,"SetIntersectMany");function zye(t){let e=[];for(let n of t)e.push(...n);return e}s(zye,"SetUnionMany");f();function Tx(t){return nt({[Ze]:"Any"},t)}s(Tx,"Any");f();function q_(t,e){return nt({[Ze]:"Array",type:"array",items:t},e)}s(q_,"Array");f();function Yye(t){return nt({[Ze]:"Argument",index:t})}s(Yye,"Argument");f();function W_(t,e){return nt({[Ze]:"AsyncIterator",type:"AsyncIterator",items:t},e)}s(W_,"AsyncIterator");f();f();function Jo(t,e,n){return nt({[Ze]:"Computed",target:t,parameters:e},n)}s(Jo,"Computed");f();f();function DZe(t,e){let{[e]:n,...r}=t;return r}s(DZe,"DiscardKey");function zs(t,e){return e.reduce((n,r)=>DZe(n,r),t)}s(zs,"Discard");f();function ni(t){return nt({[Ze]:"Never",not:{}},t)}s(ni,"Never");f();f();function Yi(t){return nt({[Ze]:"MappedResult",properties:t})}s(Yi,"MappedResult");f();f();function H_(t,e,n){return nt({[Ze]:"Constructor",type:"Constructor",parameters:t,returns:e},n)}s(H_,"Constructor");f();function ug(t,e,n){return nt({[Ze]:"Function",type:"Function",parameters:t,returns:e},n)}s(ug,"Function");f();f();f();f();function LB(t,e){return nt({[Ze]:"Union",anyOf:t},e)}s(LB,"UnionCreate");function NZe(t){return t.some(e=>id(e))}s(NZe,"IsUnionOptional");function Kye(t){return t.map(e=>id(e)?LZe(e):e)}s(Kye,"RemoveOptionalFromRest");function LZe(t){return zs(t,[lc])}s(LZe,"RemoveOptionalFromType");function FZe(t,e){return NZe(t)?Qc(LB(Kye(t),e)):LB(Kye(t),e)}s(FZe,"ResolveUnion");function dg(t,e){return t.length===1?nt(t[0],e):t.length===0?ni(e):FZe(t,e)}s(dg,"UnionEvaluated");f();function ao(t,e){return t.length===0?ni(e):t.length===1?nt(t[0],e):LB(t,e)}s(ao,"Union");f();f();f();var UL=class extends Ar{static{s(this,"TemplateLiteralParserError")}};function MZe(t){return t.replace(/\\\$/g,"$").replace(/\\\*/g,"*").replace(/\\\^/g,"^").replace(/\\\|/g,"|").replace(/\\\(/g,"(").replace(/\\\)/g,")")}s(MZe,"Unescape");function NX(t,e,n){return t[e]===n&&t.charCodeAt(e-1)!==92}s(NX,"IsNonEscaped");function b1(t,e){return NX(t,e,"(")}s(b1,"IsOpenParen");function FB(t,e){return NX(t,e,")")}s(FB,"IsCloseParen");function Jye(t,e){return NX(t,e,"|")}s(Jye,"IsSeparator");function QZe(t){if(!(b1(t,0)&&FB(t,t.length-1)))return!1;let e=0;for(let n=0;n<t.length;n++)if(b1(t,n)&&(e+=1),FB(t,n)&&(e-=1),e===0&&n!==t.length-1)return!1;return!0}s(QZe,"IsGroup");function OZe(t){return t.slice(1,t.length-1)}s(OZe,"InGroup");function UZe(t){let e=0;for(let n=0;n<t.length;n++)if(b1(t,n)&&(e+=1),FB(t,n)&&(e-=1),Jye(t,n)&&e===0)return!0;return!1}s(UZe,"IsPrecedenceOr");function qZe(t){for(let e=0;e<t.length;e++)if(b1(t,e))return!0;return!1}s(qZe,"IsPrecedenceAnd");function WZe(t){let[e,n]=[0,0],r=[];for(let o=0;o<t.length;o++)if(b1(t,o)&&(e+=1),FB(t,o)&&(e-=1),Jye(t,o)&&e===0){let a=t.slice(n,o);a.length>0&&r.push(G_(a)),n=o+1}let i=t.slice(n);return i.length>0&&r.push(G_(i)),r.length===0?{type:"const",const:""}:r.length===1?r[0]:{type:"or",expr:r}}s(WZe,"Or");function HZe(t){function e(i,o){if(!b1(i,o))throw new UL("TemplateLiteralParser: Index must point to open parens");let a=0;for(let l=o;l<i.length;l++)if(b1(i,l)&&(a+=1),FB(i,l)&&(a-=1),a===0)return[o,l];throw new UL("TemplateLiteralParser: Unclosed group parens in expression")}s(e,"Group");function n(i,o){for(let a=o;a<i.length;a++)if(b1(i,a))return[o,a];return[o,i.length]}s(n,"Range");let r=[];for(let i=0;i<t.length;i++)if(b1(t,i)){let[o,a]=e(t,i),l=t.slice(o,a+1);r.push(G_(l)),i=a}else{let[o,a]=n(t,i),l=t.slice(o,a);l.length>0&&r.push(G_(l)),i=a-1}return r.length===0?{type:"const",const:""}:r.length===1?r[0]:{type:"and",expr:r}}s(HZe,"And");function G_(t){return QZe(t)?G_(OZe(t)):UZe(t)?WZe(t):qZe(t)?HZe(t):{type:"const",const:MZe(t)}}s(G_,"TemplateLiteralParse");function j_(t){return G_(t.slice(1,t.length-1))}s(j_,"TemplateLiteralParseExact");var LX=class extends Ar{static{s(this,"TemplateLiteralFiniteError")}};function GZe(t){return t.type==="or"&&t.expr.length===2&&t.expr[0].type==="const"&&t.expr[0].const==="0"&&t.expr[1].type==="const"&&t.expr[1].const==="[1-9][0-9]*"}s(GZe,"IsNumberExpression");function jZe(t){return t.type==="or"&&t.expr.length===2&&t.expr[0].type==="const"&&t.expr[0].const==="true"&&t.expr[1].type==="const"&&t.expr[1].const==="false"}s(jZe,"IsBooleanExpression");function VZe(t){return t.type==="const"&&t.const===".*"}s(VZe,"IsStringExpression");function cI(t){return GZe(t)||VZe(t)?!1:jZe(t)?!0:t.type==="and"?t.expr.every(e=>cI(e)):t.type==="or"?t.expr.every(e=>cI(e)):t.type==="const"?!0:(()=>{throw new LX("Unknown expression type")})()}s(cI,"IsTemplateLiteralExpressionFinite");function qL(t){let e=j_(t.pattern);return cI(e)}s(qL,"IsTemplateLiteralFinite");f();var FX=class extends Ar{static{s(this,"TemplateLiteralGenerateError")}};function*Xye(t){if(t.length===1)return yield*t[0];for(let e of t[0])for(let n of Xye(t.slice(1)))yield`${e}${n}`}s(Xye,"GenerateReduce");function*$Ze(t){return yield*Xye(t.expr.map(e=>[...MB(e)]))}s($Ze,"GenerateAnd");function*zZe(t){for(let e of t.expr)yield*MB(e)}s(zZe,"GenerateOr");function*YZe(t){return yield t.const}s(YZe,"GenerateConst");function*MB(t){return t.type==="and"?yield*$Ze(t):t.type==="or"?yield*zZe(t):t.type==="const"?yield*YZe(t):(()=>{throw new FX("Unknown expression")})()}s(MB,"TemplateLiteralExpressionGenerate");function V_(t){let e=j_(t.pattern);return cI(e)?[...MB(e)]:[]}s(V_,"TemplateLiteralGenerate");f();f();function Li(t,e){return nt({[Ze]:"Literal",const:t,type:typeof t},e)}s(Li,"Literal");f();function WL(t){return nt({[Ze]:"Boolean",type:"boolean"},t)}s(WL,"Boolean");f();function $_(t){return nt({[Ze]:"BigInt",type:"bigint"},t)}s($_,"BigInt");f();function bf(t){return nt({[Ze]:"Number",type:"number"},t)}s(bf,"Number");f();function bu(t){return nt({[Ze]:"String",type:"string"},t)}s(bu,"String");function*KZe(t){let e=t.trim().replace(/"|'/g,"");return e==="boolean"?yield WL():e==="number"?yield bf():e==="bigint"?yield $_():e==="string"?yield bu():yield(()=>{let n=e.split("|").map(r=>Li(r.trim()));return n.length===0?ni():n.length===1?n[0]:dg(n)})()}s(KZe,"FromUnion");function*JZe(t){if(t[1]!=="{"){let e=Li("$"),n=MX(t.slice(1));return yield*[e,...n]}for(let e=2;e<t.length;e++)if(t[e]==="}"){let n=KZe(t.slice(2,e)),r=MX(t.slice(e+1));return yield*[...n,...r]}yield Li(t)}s(JZe,"FromTerminal");function*MX(t){for(let e=0;e<t.length;e++)if(t[e]==="$"){let n=Li(t.slice(0,e)),r=JZe(t.slice(e));return yield*[n,...r]}yield Li(t)}s(MX,"FromSyntax");function Zye(t){return[...MX(t)]}s(Zye,"TemplateLiteralSyntax");f();var QX=class extends Ar{static{s(this,"TemplateLiteralPatternError")}};function XZe(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}s(XZe,"Escape");function eCe(t,e){return a0(t)?t.pattern.slice(1,t.pattern.length-1):Wi(t)?`(${t.anyOf.map(n=>eCe(n,e)).join("|")})`:lm(t)?`${e}${NB}`:am(t)?`${e}${NB}`:oI(t)?`${e}${NB}`:C1(t)?`${e}${DX}`:o0(t)?`${e}${XZe(t.const.toString())}`:y1(t)?`${e}${PX}`:(()=>{throw new QX(`Unexpected Kind '${t[Ze]}'`)})()}s(eCe,"Visit");function OX(t){return`^${t.map(e=>eCe(e,"")).join("")}$`}s(OX,"TemplateLiteralPattern");f();function uI(t){let n=V_(t).map(r=>Li(r));return dg(n)}s(uI,"TemplateLiteralToUnion");f();function HL(t,e){let n=qo(t)?OX(Zye(t)):OX(t);return nt({[Ze]:"TemplateLiteral",type:"string",pattern:n},e)}s(HL,"TemplateLiteral");function ZZe(t){return V_(t).map(n=>n.toString())}s(ZZe,"FromTemplateLiteral");function eet(t){let e=[];for(let n of t)e.push(...od(n));return e}s(eet,"FromUnion");function tet(t){return[t.toString()]}s(tet,"FromLiteral");function od(t){return[...new Set(a0(t)?ZZe(t):Wi(t)?eet(t.anyOf):o0(t)?tet(t.const):lm(t)?["[number]"]:am(t)?["[number]"]:[])]}s(od,"IndexPropertyKeys");f();function net(t,e,n){let r={};for(let i of Object.getOwnPropertyNames(e))r[i]=wx(t,od(e[i]),n);return r}s(net,"FromProperties");function ret(t,e,n){return net(t,e.properties,n)}s(ret,"FromMappedResult");function tCe(t,e,n){let r=ret(t,e,n);return Yi(r)}s(tCe,"IndexFromMappedResult");function rCe(t,e){return t.map(n=>iCe(n,e))}s(rCe,"FromRest");function iet(t){return t.filter(e=>!Ex(e))}s(iet,"FromIntersectRest");function oet(t,e){return GL(iet(rCe(t,e)))}s(oet,"FromIntersect");function set(t){return t.some(e=>Ex(e))?[]:t}s(set,"FromUnionRest");function aet(t,e){return dg(set(rCe(t,e)))}s(aet,"FromUnion");function cet(t,e){return e in t?t[e]:e==="[number]"?dg(t):ni()}s(cet,"FromTuple");function uet(t,e){return e==="[number]"?t:ni()}s(uet,"FromArray");function det(t,e){return e in t?t[e]:ni()}s(det,"FromProperty");function iCe(t,e){return $s(t)?oet(t.allOf,e):Wi(t)?aet(t.anyOf,e):l0(t)?cet(t.items??[],e):rm(t)?uet(t.items,e):Ta(t)?det(t.properties,e):ni()}s(iCe,"IndexFromPropertyKey");function QB(t,e){return e.map(n=>iCe(t,n))}s(QB,"IndexFromPropertyKeys");function nCe(t,e){return dg(QB(t,e))}s(nCe,"FromSchema");function wx(t,e,n){if(oa(t)||oa(e)){let r="Index types using Ref parameters require both Type and Key to be of TSchema";if(!Ns(t)||!Ns(e))throw new Ar(r);return Jo("Index",[t,e])}return ds(e)?tCe(t,e,n):s0(e)?oCe(t,e,n):nt(Ns(e)?nCe(t,od(e)):nCe(t,e),n)}s(wx,"Index");function fet(t,e,n){return{[e]:wx(t,[e],cs(n))}}s(fet,"MappedIndexPropertyKey");function pet(t,e,n){return e.reduce((r,i)=>({...r,...fet(t,i,n)}),{})}s(pet,"MappedIndexPropertyKeys");function met(t,e,n){return pet(t,e.keys,n)}s(met,"MappedIndexProperties");function oCe(t,e,n){let r=met(t,e,n);return Yi(r)}s(oCe,"IndexFromMappedKey");f();function z_(t,e){return nt({[Ze]:"Iterator",type:"Iterator",items:t},e)}s(z_,"Iterator");f();function het(t){let e=[];for(let n in t)id(t[n])||e.push(n);return e}s(het,"RequiredKeys");function get(t,e){let n=het(t),r=n.length>0?{[Ze]:"Object",type:"object",properties:t,required:n}:{[Ze]:"Object",type:"object",properties:t};return nt(r,e)}s(get,"_Object");var lo=get;f();function jL(t,e){return nt({[Ze]:"Promise",type:"Promise",item:t},e)}s(jL,"Promise");f();f();function Aet(t){return nt(zs(t,[nm]))}s(Aet,"RemoveReadonly");function yet(t){return nt({...t,[nm]:"Readonly"})}s(yet,"AddReadonly");function Cet(t,e){return e===!1?Aet(t):yet(t)}s(Cet,"ReadonlyWithFlag");function sd(t,e){let n=e??!0;return ds(t)?sCe(t,n):Cet(t,n)}s(sd,"Readonly");function xet(t,e){let n={};for(let r of globalThis.Object.getOwnPropertyNames(t))n[r]=sd(t[r],e);return n}s(xet,"FromProperties");function vet(t,e){return xet(t.properties,e)}s(vet,"FromMappedResult");function sCe(t,e){let n=vet(t,e);return Yi(n)}s(sCe,"ReadonlyFromMappedResult");f();function Ef(t,e){return nt(t.length>0?{[Ze]:"Tuple",type:"array",items:t,additionalItems:!1,minItems:t.length,maxItems:t.length}:{[Ze]:"Tuple",type:"array",minItems:t.length,maxItems:t.length},e)}s(Ef,"Tuple");function aCe(t,e){return t in e?If(t,e[t]):Yi(e)}s(aCe,"FromMappedResult");function bet(t){return{[t]:Li(t)}}s(bet,"MappedKeyToKnownMappedResultProperties");function Eet(t){let e={};for(let n of t)e[n]=Li(n);return e}s(Eet,"MappedKeyToUnknownMappedResultProperties");function Iet(t,e){return jye(e,t)?bet(t):Eet(e)}s(Iet,"MappedKeyToMappedResultProperties");function Tet(t,e){let n=Iet(t,e);return aCe(t,n)}s(Tet,"FromMappedKey");function OB(t,e){return e.map(n=>If(t,n))}s(OB,"FromRest");function wet(t,e){let n={};for(let r of globalThis.Object.getOwnPropertyNames(e))n[r]=If(t,e[r]);return n}s(wet,"FromProperties");function If(t,e){let n={...e};return id(e)?Qc(If(t,zs(e,[lc]))):Q_(e)?sd(If(t,zs(e,[nm]))):ds(e)?aCe(t,e.properties):s0(e)?Tet(t,e.keys):om(e)?H_(OB(t,e.parameters),If(t,e.returns),n):sm(e)?ug(OB(t,e.parameters),If(t,e.returns),n):iI(e)?W_(If(t,e.items),n):sI(e)?z_(If(t,e.items),n):$s(e)?Oc(OB(t,e.allOf),n):Wi(e)?ao(OB(t,e.anyOf),n):l0(e)?Ef(OB(t,e.items??[]),n):Ta(e)?lo(wet(t,e.properties),n):rm(e)?q_(If(t,e.items),n):aI(e)?jL(If(t,e.item),n):e}s(If,"FromSchemaType");function _et(t,e){let n={};for(let r of t)n[r]=If(r,e);return n}s(_et,"MappedFunctionReturnType");function lCe(t,e,n){let r=Ns(t)?od(t):t,i=e({[Ze]:"MappedKey",keys:r}),o=_et(r,i);return lo(o,n)}s(lCe,"Mapped");f();function Ret(t){return nt(zs(t,[lc]))}s(Ret,"RemoveOptional");function ket(t){return nt({...t,[lc]:"Optional"})}s(ket,"AddOptional");function Bet(t,e){return e===!1?Ret(t):ket(t)}s(Bet,"OptionalWithFlag");function Qc(t,e){let n=e??!0;return ds(t)?cCe(t,n):Bet(t,n)}s(Qc,"Optional");function Pet(t,e){let n={};for(let r of globalThis.Object.getOwnPropertyNames(t))n[r]=Qc(t[r],e);return n}s(Pet,"FromProperties");function Det(t,e){return Pet(t.properties,e)}s(Det,"FromMappedResult");function cCe(t,e){let n=Det(t,e);return Yi(n)}s(cCe,"OptionalFromMappedResult");f();function UB(t,e={}){let n=t.every(i=>Ta(i)),r=Ns(e.unevaluatedProperties)?{unevaluatedProperties:e.unevaluatedProperties}:{};return nt(e.unevaluatedProperties===!1||Ns(e.unevaluatedProperties)||n?{...r,[Ze]:"Intersect",type:"object",allOf:t}:{...r,[Ze]:"Intersect",allOf:t},e)}s(UB,"IntersectCreate");function Net(t){return t.every(e=>id(e))}s(Net,"IsIntersectOptional");function Let(t){return zs(t,[lc])}s(Let,"RemoveOptionalFromType");function uCe(t){return t.map(e=>id(e)?Let(e):e)}s(uCe,"RemoveOptionalFromRest");function Fet(t,e){return Net(t)?Qc(UB(uCe(t),e)):UB(uCe(t),e)}s(Fet,"ResolveIntersect");function GL(t,e={}){if(t.length===1)return nt(t[0],e);if(t.length===0)return ni(e);if(t.some(n=>so(n)))throw new Error("Cannot intersect transform types");return Fet(t,e)}s(GL,"IntersectEvaluated");f();function Oc(t,e){if(t.length===1)return nt(t[0],e);if(t.length===0)return ni(e);if(t.some(n=>so(n)))throw new Error("Cannot intersect transform types");return UB(t,e)}s(Oc,"Intersect");f();function Tf(...t){let[e,n]=typeof t[0]=="string"?[t[0],t[1]]:[t[0].$id,t[1]];if(typeof e!="string")throw new Ar("Ref: $ref must be a string");return nt({[Ze]:"Ref",$ref:e},n)}s(Tf,"Ref");function Met(t,e){return Jo("Awaited",[Jo(t,e)])}s(Met,"FromComputed");function Qet(t){return Jo("Awaited",[Tf(t)])}s(Qet,"FromRef");function Oet(t){return Oc(dCe(t))}s(Oet,"FromIntersect");function Uet(t){return ao(dCe(t))}s(Uet,"FromUnion");function qet(t){return Y_(t)}s(qet,"FromPromise");function dCe(t){return t.map(e=>Y_(e))}s(dCe,"FromRest");function Y_(t,e){return nt(im(t)?Met(t.target,t.parameters):$s(t)?Oet(t.allOf):Wi(t)?Uet(t.anyOf):aI(t)?qet(t.item):oa(t)?Qet(t.$ref):t,e)}s(Y_,"Awaited");f();f();f();f();function fCe(t){let e=[];for(let n of t)e.push(ad(n));return e}s(fCe,"FromRest");function Wet(t){let e=fCe(t);return zye(e)}s(Wet,"FromIntersect");function Het(t){let e=fCe(t);return $ye(e)}s(Het,"FromUnion");function Get(t){return t.map((e,n)=>n.toString())}s(Get,"FromTuple");function jet(t){return["[number]"]}s(jet,"FromArray");function Vet(t){return globalThis.Object.getOwnPropertyNames(t)}s(Vet,"FromProperties");function $et(t){return UX?globalThis.Object.getOwnPropertyNames(t).map(n=>n[0]==="^"&&n[n.length-1]==="$"?n.slice(1,n.length-1):n):[]}s($et,"FromPatternProperties");function ad(t){return $s(t)?Wet(t.allOf):Wi(t)?Het(t.anyOf):l0(t)?Get(t.items??[]):rm(t)?jet(t.items):Ta(t)?Vet(t.properties):lI(t)?$et(t.patternProperties):[]}s(ad,"KeyOfPropertyKeys");var UX=!1;function E1(t){UX=!0;let e=ad(t);return UX=!1,`^(${e.map(r=>`(${r})`).join("|")})$`}s(E1,"KeyOfPattern");function zet(t,e){return Jo("KeyOf",[Jo(t,e)])}s(zet,"FromComputed");function Yet(t){return Jo("KeyOf",[Tf(t)])}s(Yet,"FromRef");function Ket(t,e){let n=ad(t),r=Jet(n),i=dg(r);return nt(i,e)}s(Ket,"KeyOfFromType");function Jet(t){return t.map(e=>e==="[number]"?bf():Li(e))}s(Jet,"KeyOfPropertyKeysToRest");function K_(t,e){return im(t)?zet(t.target,t.parameters):oa(t)?Yet(t.$ref):ds(t)?pCe(t,e):Ket(t,e)}s(K_,"KeyOf");function Xet(t,e){let n={};for(let r of globalThis.Object.getOwnPropertyNames(t))n[r]=K_(t[r],cs(e));return n}s(Xet,"FromProperties");function Zet(t,e){return Xet(t.properties,e)}s(Zet,"FromMappedResult");function pCe(t,e){let n=Zet(t,e);return Yi(n)}s(pCe,"KeyOfFromMappedResult");f();function VL(t){let e=ad(t),n=QB(t,e);return e.map((r,i)=>[e[i],n[i]])}s(VL,"KeyOfPropertyEntries");function ett(t){let e=[];for(let n of t)e.push(...ad(n));return Vye(e)}s(ett,"CompositeKeys");function ttt(t){return t.filter(e=>!Ex(e))}s(ttt,"FilterNever");function ntt(t,e){let n=[];for(let r of t)n.push(...QB(r,[e]));return ttt(n)}s(ntt,"CompositeProperty");function rtt(t,e){let n={};for(let r of e)n[r]=GL(ntt(t,r));return n}s(rtt,"CompositeProperties");function mCe(t,e){let n=ett(t),r=rtt(t,n);return lo(r,e)}s(mCe,"Composite");f();f();function $L(t){return nt({[Ze]:"Date",type:"Date"},t)}s($L,"Date");f();function zL(t){return nt({[Ze]:"Null",type:"null"},t)}s(zL,"Null");f();function YL(t){return nt({[Ze]:"Symbol",type:"symbol"},t)}s(YL,"Symbol");f();function KL(t){return nt({[Ze]:"Undefined",type:"undefined"},t)}s(KL,"Undefined");f();function JL(t){return nt({[Ze]:"Uint8Array",type:"Uint8Array"},t)}s(JL,"Uint8Array");f();function um(t){return nt({[Ze]:"Unknown"},t)}s(um,"Unknown");function itt(t){return t.map(e=>qX(e,!1))}s(itt,"FromArray");function ott(t){let e={};for(let n of globalThis.Object.getOwnPropertyNames(t))e[n]=sd(qX(t[n],!1));return e}s(ott,"FromProperties");function XL(t,e){return e===!0?t:sd(t)}s(XL,"ConditionalReadonly");function qX(t,e){return CX(t)?XL(Tx(),e):vX(t)?XL(Tx(),e):Ea(t)?sd(Ef(itt(t))):h1(t)?JL():rI(t)?$L():wo(t)?XL(lo(ott(t)),e):xX(t)?XL(ug([],um()),e):Ia(t)?KL():bX(t)?zL():EX(t)?YL():_B(t)?$_():r0(t)?Li(t):m1(t)?Li(t):qo(t)?Li(t):lo({})}s(qX,"FromValue");function hCe(t,e){return nt(qX(t,!0),e)}s(hCe,"Const");f();function gCe(t,e){return om(t)?Ef(t.parameters,e):ni(e)}s(gCe,"ConstructorParameters");f();function ACe(t,e){if(Ia(t))throw new Error("Enum undefined or empty");let n=globalThis.Object.getOwnPropertyNames(t).filter(o=>isNaN(o)).map(o=>t[o]),i=[...new Set(n)].map(o=>Li(o));return ao(i,{...e,[vf]:"Enum"})}s(ACe,"Enum");f();f();f();var HX=class extends Ar{static{s(this,"ExtendsResolverError")}},rt;(function(t){t[t.Union=0]="Union",t[t.True=1]="True",t[t.False=2]="False"})(rt||(rt={}));function wf(t){return t===rt.False?t:rt.True}s(wf,"IntoBooleanResult");function J_(t){throw new HX(t)}s(J_,"Throw");function Ha(t){return Pe.IsNever(t)||Pe.IsIntersect(t)||Pe.IsUnion(t)||Pe.IsUnknown(t)||Pe.IsAny(t)}s(Ha,"IsStructuralRight");function Ga(t,e){return Pe.IsNever(e)?ICe(t,e):Pe.IsIntersect(e)?ZL(t,e):Pe.IsUnion(e)?$X(t,e):Pe.IsUnknown(e)?SCe(t,e):Pe.IsAny(e)?VX(t,e):J_("StructuralRight")}s(Ga,"StructuralRight");function VX(t,e){return rt.True}s(VX,"FromAnyRight");function stt(t,e){return Pe.IsIntersect(e)?ZL(t,e):Pe.IsUnion(e)&&e.anyOf.some(n=>Pe.IsAny(n)||Pe.IsUnknown(n))?rt.True:Pe.IsUnion(e)?rt.Union:Pe.IsUnknown(e)||Pe.IsAny(e)?rt.True:rt.Union}s(stt,"FromAny");function att(t,e){return Pe.IsUnknown(t)?rt.False:Pe.IsAny(t)?rt.Union:Pe.IsNever(t)?rt.True:rt.False}s(att,"FromArrayRight");function ltt(t,e){return Pe.IsObject(e)&&eF(e)?rt.True:Ha(e)?Ga(t,e):Pe.IsArray(e)?wf(So(t.items,e.items)):rt.False}s(ltt,"FromArray");function ctt(t,e){return Ha(e)?Ga(t,e):Pe.IsAsyncIterator(e)?wf(So(t.items,e.items)):rt.False}s(ctt,"FromAsyncIterator");function utt(t,e){return Ha(e)?Ga(t,e):Pe.IsObject(e)?Uc(t,e):Pe.IsRecord(e)?_f(t,e):Pe.IsBigInt(e)?rt.True:rt.False}s(utt,"FromBigInt");function bCe(t,e){return Pe.IsLiteralBoolean(t)||Pe.IsBoolean(t)?rt.True:rt.False}s(bCe,"FromBooleanRight");function dtt(t,e){return Ha(e)?Ga(t,e):Pe.IsObject(e)?Uc(t,e):Pe.IsRecord(e)?_f(t,e):Pe.IsBoolean(e)?rt.True:rt.False}s(dtt,"FromBoolean");function ftt(t,e){return Ha(e)?Ga(t,e):Pe.IsObject(e)?Uc(t,e):Pe.IsConstructor(e)?t.parameters.length>e.parameters.length?rt.False:t.parameters.every((n,r)=>wf(So(e.parameters[r],n))===rt.True)?wf(So(t.returns,e.returns)):rt.False:rt.False}s(ftt,"FromConstructor");function ptt(t,e){return Ha(e)?Ga(t,e):Pe.IsObject(e)?Uc(t,e):Pe.IsRecord(e)?_f(t,e):Pe.IsDate(e)?rt.True:rt.False}s(ptt,"FromDate");function mtt(t,e){return Ha(e)?Ga(t,e):Pe.IsObject(e)?Uc(t,e):Pe.IsFunction(e)?t.parameters.length>e.parameters.length?rt.False:t.parameters.every((n,r)=>wf(So(e.parameters[r],n))===rt.True)?wf(So(t.returns,e.returns)):rt.False:rt.False}s(mtt,"FromFunction");function ECe(t,e){return Pe.IsLiteral(t)&&Mc.IsNumber(t.const)||Pe.IsNumber(t)||Pe.IsInteger(t)?rt.True:rt.False}s(ECe,"FromIntegerRight");function htt(t,e){return Pe.IsInteger(e)||Pe.IsNumber(e)?rt.True:Ha(e)?Ga(t,e):Pe.IsObject(e)?Uc(t,e):Pe.IsRecord(e)?_f(t,e):rt.False}s(htt,"FromInteger");function ZL(t,e){return e.allOf.every(n=>So(t,n)===rt.True)?rt.True:rt.False}s(ZL,"FromIntersectRight");function gtt(t,e){return t.allOf.some(n=>So(n,e)===rt.True)?rt.True:rt.False}s(gtt,"FromIntersect");function Att(t,e){return Ha(e)?Ga(t,e):Pe.IsIterator(e)?wf(So(t.items,e.items)):rt.False}s(Att,"FromIterator");function ytt(t,e){return Pe.IsLiteral(e)&&e.const===t.const?rt.True:Ha(e)?Ga(t,e):Pe.IsObject(e)?Uc(t,e):Pe.IsRecord(e)?_f(t,e):Pe.IsString(e)?_Ce(t,e):Pe.IsNumber(e)?TCe(t,e):Pe.IsInteger(e)?ECe(t,e):Pe.IsBoolean(e)?bCe(t,e):rt.False}s(ytt,"FromLiteral");function ICe(t,e){return rt.False}s(ICe,"FromNeverRight");function Ctt(t,e){return rt.True}s(Ctt,"FromNever");function yCe(t){let[e,n]=[t,0];for(;Pe.IsNot(e);)e=e.not,n+=1;return n%2===0?e:um()}s(yCe,"UnwrapTNot");function xtt(t,e){return Pe.IsNot(t)?So(yCe(t),e):Pe.IsNot(e)?So(t,yCe(e)):J_("Invalid fallthrough for Not")}s(xtt,"FromNot");function vtt(t,e){return Ha(e)?Ga(t,e):Pe.IsObject(e)?Uc(t,e):Pe.IsRecord(e)?_f(t,e):Pe.IsNull(e)?rt.True:rt.False}s(vtt,"FromNull");function TCe(t,e){return Pe.IsLiteralNumber(t)||Pe.IsNumber(t)||Pe.IsInteger(t)?rt.True:rt.False}s(TCe,"FromNumberRight");function btt(t,e){return Ha(e)?Ga(t,e):Pe.IsObject(e)?Uc(t,e):Pe.IsRecord(e)?_f(t,e):Pe.IsInteger(e)||Pe.IsNumber(e)?rt.True:rt.False}s(btt,"FromNumber");function ld(t,e){return Object.getOwnPropertyNames(t.properties).length===e}s(ld,"IsObjectPropertyCount");function CCe(t){return eF(t)}s(CCe,"IsObjectStringLike");function xCe(t){return ld(t,0)||ld(t,1)&&"description"in t.properties&&Pe.IsUnion(t.properties.description)&&t.properties.description.anyOf.length===2&&(Pe.IsString(t.properties.description.anyOf[0])&&Pe.IsUndefined(t.properties.description.anyOf[1])||Pe.IsString(t.properties.description.anyOf[1])&&Pe.IsUndefined(t.properties.description.anyOf[0]))}s(xCe,"IsObjectSymbolLike");function WX(t){return ld(t,0)}s(WX,"IsObjectNumberLike");function vCe(t){return ld(t,0)}s(vCe,"IsObjectBooleanLike");function Ett(t){return ld(t,0)}s(Ett,"IsObjectBigIntLike");function Itt(t){return ld(t,0)}s(Itt,"IsObjectDateLike");function Ttt(t){return eF(t)}s(Ttt,"IsObjectUint8ArrayLike");function wtt(t){let e=bf();return ld(t,0)||ld(t,1)&&"length"in t.properties&&wf(So(t.properties.length,e))===rt.True}s(wtt,"IsObjectFunctionLike");function _tt(t){return ld(t,0)}s(_tt,"IsObjectConstructorLike");function eF(t){let e=bf();return ld(t,0)||ld(t,1)&&"length"in t.properties&&wf(So(t.properties.length,e))===rt.True}s(eF,"IsObjectArrayLike");function Stt(t){let e=ug([Tx()],Tx());return ld(t,0)||ld(t,1)&&"then"in t.properties&&wf(So(t.properties.then,e))===rt.True}s(Stt,"IsObjectPromiseLike");function wCe(t,e){return So(t,e)===rt.False||Pe.IsOptional(t)&&!Pe.IsOptional(e)?rt.False:rt.True}s(wCe,"Property");function Uc(t,e){return Pe.IsUnknown(t)?rt.False:Pe.IsAny(t)?rt.Union:Pe.IsNever(t)||Pe.IsLiteralString(t)&&CCe(e)||Pe.IsLiteralNumber(t)&&WX(e)||Pe.IsLiteralBoolean(t)&&vCe(e)||Pe.IsSymbol(t)&&xCe(e)||Pe.IsBigInt(t)&&Ett(e)||Pe.IsString(t)&&CCe(e)||Pe.IsSymbol(t)&&xCe(e)||Pe.IsNumber(t)&&WX(e)||Pe.IsInteger(t)&&WX(e)||Pe.IsBoolean(t)&&vCe(e)||Pe.IsUint8Array(t)&&Ttt(e)||Pe.IsDate(t)&&Itt(e)||Pe.IsConstructor(t)&&_tt(e)||Pe.IsFunction(t)&&wtt(e)?rt.True:Pe.IsRecord(t)&&Pe.IsString(GX(t))?e[vf]==="Record"?rt.True:rt.False:Pe.IsRecord(t)&&Pe.IsNumber(GX(t))?ld(e,0)?rt.True:rt.False:rt.False}s(Uc,"FromObjectRight");function Rtt(t,e){return Ha(e)?Ga(t,e):Pe.IsRecord(e)?_f(t,e):Pe.IsObject(e)?(()=>{for(let n of Object.getOwnPropertyNames(e.properties)){if(!(n in t.properties)&&!Pe.IsOptional(e.properties[n]))return rt.False;if(Pe.IsOptional(e.properties[n]))return rt.True;if(wCe(t.properties[n],e.properties[n])===rt.False)return rt.False}return rt.True})():rt.False}s(Rtt,"FromObject");function ktt(t,e){return Ha(e)?Ga(t,e):Pe.IsObject(e)&&Stt(e)?rt.True:Pe.IsPromise(e)?wf(So(t.item,e.item)):rt.False}s(ktt,"FromPromise");function GX(t){return lg in t.patternProperties?bf():cg in t.patternProperties?bu():J_("Unknown record key pattern")}s(GX,"RecordKey");function jX(t){return lg in t.patternProperties?t.patternProperties[lg]:cg in t.patternProperties?t.patternProperties[cg]:J_("Unable to get record value schema")}s(jX,"RecordValue");function _f(t,e){let[n,r]=[GX(e),jX(e)];return Pe.IsLiteralString(t)&&Pe.IsNumber(n)&&wf(So(t,r))===rt.True?rt.True:Pe.IsUint8Array(t)&&Pe.IsNumber(n)||Pe.IsString(t)&&Pe.IsNumber(n)||Pe.IsArray(t)&&Pe.IsNumber(n)?So(t,r):Pe.IsObject(t)?(()=>{for(let i of Object.getOwnPropertyNames(t.properties))if(wCe(r,t.properties[i])===rt.False)return rt.False;return rt.True})():rt.False}s(_f,"FromRecordRight");function Btt(t,e){return Ha(e)?Ga(t,e):Pe.IsObject(e)?Uc(t,e):Pe.IsRecord(e)?So(jX(t),jX(e)):rt.False}s(Btt,"FromRecord");function Ptt(t,e){let n=Pe.IsRegExp(t)?bu():t,r=Pe.IsRegExp(e)?bu():e;return So(n,r)}s(Ptt,"FromRegExp");function _Ce(t,e){return Pe.IsLiteral(t)&&Mc.IsString(t.const)||Pe.IsString(t)?rt.True:rt.False}s(_Ce,"FromStringRight");function Dtt(t,e){return Ha(e)?Ga(t,e):Pe.IsObject(e)?Uc(t,e):Pe.IsRecord(e)?_f(t,e):Pe.IsString(e)?rt.True:rt.False}s(Dtt,"FromString");function Ntt(t,e){return Ha(e)?Ga(t,e):Pe.IsObject(e)?Uc(t,e):Pe.IsRecord(e)?_f(t,e):Pe.IsSymbol(e)?rt.True:rt.False}s(Ntt,"FromSymbol");function Ltt(t,e){return Pe.IsTemplateLiteral(t)?So(uI(t),e):Pe.IsTemplateLiteral(e)?So(t,uI(e)):J_("Invalid fallthrough for TemplateLiteral")}s(Ltt,"FromTemplateLiteral");function Ftt(t,e){return Pe.IsArray(e)&&t.items!==void 0&&t.items.every(n=>So(n,e.items)===rt.True)}s(Ftt,"IsArrayOfTuple");function Mtt(t,e){return Pe.IsNever(t)?rt.True:Pe.IsUnknown(t)?rt.False:Pe.IsAny(t)?rt.Union:rt.False}s(Mtt,"FromTupleRight");function Qtt(t,e){return Ha(e)?Ga(t,e):Pe.IsObject(e)&&eF(e)||Pe.IsArray(e)&&Ftt(t,e)?rt.True:Pe.IsTuple(e)?Mc.IsUndefined(t.items)&&!Mc.IsUndefined(e.items)||!Mc.IsUndefined(t.items)&&Mc.IsUndefined(e.items)?rt.False:Mc.IsUndefined(t.items)&&!Mc.IsUndefined(e.items)||t.items.every((n,r)=>So(n,e.items[r])===rt.True)?rt.True:rt.False:rt.False}s(Qtt,"FromTuple");function Ott(t,e){return Ha(e)?Ga(t,e):Pe.IsObject(e)?Uc(t,e):Pe.IsRecord(e)?_f(t,e):Pe.IsUint8Array(e)?rt.True:rt.False}s(Ott,"FromUint8Array");function Utt(t,e){return Ha(e)?Ga(t,e):Pe.IsObject(e)?Uc(t,e):Pe.IsRecord(e)?_f(t,e):Pe.IsVoid(e)?Htt(t,e):Pe.IsUndefined(e)?rt.True:rt.False}s(Utt,"FromUndefined");function $X(t,e){return e.anyOf.some(n=>So(t,n)===rt.True)?rt.True:rt.False}s($X,"FromUnionRight");function qtt(t,e){return t.anyOf.every(n=>So(n,e)===rt.True)?rt.True:rt.False}s(qtt,"FromUnion");function SCe(t,e){return rt.True}s(SCe,"FromUnknownRight");function Wtt(t,e){return Pe.IsNever(e)?ICe(t,e):Pe.IsIntersect(e)?ZL(t,e):Pe.IsUnion(e)?$X(t,e):Pe.IsAny(e)?VX(t,e):Pe.IsString(e)?_Ce(t,e):Pe.IsNumber(e)?TCe(t,e):Pe.IsInteger(e)?ECe(t,e):Pe.IsBoolean(e)?bCe(t,e):Pe.IsArray(e)?att(t,e):Pe.IsTuple(e)?Mtt(t,e):Pe.IsObject(e)?Uc(t,e):Pe.IsUnknown(e)?rt.True:rt.False}s(Wtt,"FromUnknown");function Htt(t,e){return Pe.IsUndefined(t)||Pe.IsUndefined(t)?rt.True:rt.False}s(Htt,"FromVoidRight");function Gtt(t,e){return Pe.IsIntersect(e)?ZL(t,e):Pe.IsUnion(e)?$X(t,e):Pe.IsUnknown(e)?SCe(t,e):Pe.IsAny(e)?VX(t,e):Pe.IsObject(e)?Uc(t,e):Pe.IsVoid(e)?rt.True:rt.False}s(Gtt,"FromVoid");function So(t,e){return Pe.IsTemplateLiteral(t)||Pe.IsTemplateLiteral(e)?Ltt(t,e):Pe.IsRegExp(t)||Pe.IsRegExp(e)?Ptt(t,e):Pe.IsNot(t)||Pe.IsNot(e)?xtt(t,e):Pe.IsAny(t)?stt(t,e):Pe.IsArray(t)?ltt(t,e):Pe.IsBigInt(t)?utt(t,e):Pe.IsBoolean(t)?dtt(t,e):Pe.IsAsyncIterator(t)?ctt(t,e):Pe.IsConstructor(t)?ftt(t,e):Pe.IsDate(t)?ptt(t,e):Pe.IsFunction(t)?mtt(t,e):Pe.IsInteger(t)?htt(t,e):Pe.IsIntersect(t)?gtt(t,e):Pe.IsIterator(t)?Att(t,e):Pe.IsLiteral(t)?ytt(t,e):Pe.IsNever(t)?Ctt(t,e):Pe.IsNull(t)?vtt(t,e):Pe.IsNumber(t)?btt(t,e):Pe.IsObject(t)?Rtt(t,e):Pe.IsRecord(t)?Btt(t,e):Pe.IsString(t)?Dtt(t,e):Pe.IsSymbol(t)?Ntt(t,e):Pe.IsTuple(t)?Qtt(t,e):Pe.IsPromise(t)?ktt(t,e):Pe.IsUint8Array(t)?Ott(t,e):Pe.IsUndefined(t)?Utt(t,e):Pe.IsUnion(t)?qtt(t,e):Pe.IsUnknown(t)?Wtt(t,e):Pe.IsVoid(t)?Gtt(t,e):J_(`Unknown left type operand '${t[Ze]}'`)}s(So,"Visit");function _x(t,e){return So(t,e)}s(_x,"ExtendsCheck");f();f();f();function jtt(t,e,n,r,i){let o={};for(let a of globalThis.Object.getOwnPropertyNames(t))o[a]=X_(t[a],e,n,r,cs(i));return o}s(jtt,"FromProperties");function Vtt(t,e,n,r,i){return jtt(t.properties,e,n,r,i)}s(Vtt,"FromMappedResult");function RCe(t,e,n,r,i){let o=Vtt(t,e,n,r,i);return Yi(o)}s(RCe,"ExtendsFromMappedResult");function $tt(t,e,n,r){let i=_x(t,e);return i===rt.Union?ao([n,r]):i===rt.True?n:r}s($tt,"ExtendsResolve");function X_(t,e,n,r,i){return ds(t)?RCe(t,e,n,r,i):s0(t)?nt(kCe(t,e,n,r,i)):nt($tt(t,e,n,r),i)}s(X_,"Extends");function ztt(t,e,n,r,i){return{[t]:X_(Li(t),e,n,r,cs(i))}}s(ztt,"FromPropertyKey");function Ytt(t,e,n,r,i){return t.reduce((o,a)=>({...o,...ztt(a,e,n,r,i)}),{})}s(Ytt,"FromPropertyKeys");function Ktt(t,e,n,r,i){return Ytt(t.keys,e,n,r,i)}s(Ktt,"FromMappedKey");function kCe(t,e,n,r,i){let o=Ktt(t,e,n,r,i);return Yi(o)}s(kCe,"ExtendsFromMappedKey");f();function Jtt(t){return t.allOf.every(e=>I1(e))}s(Jtt,"Intersect");function Xtt(t){return t.anyOf.some(e=>I1(e))}s(Xtt,"Union");function Ztt(t){return!I1(t.not)}s(Ztt,"Not");function I1(t){return t[Ze]==="Intersect"?Jtt(t):t[Ze]==="Union"?Xtt(t):t[Ze]==="Not"?Ztt(t):t[Ze]==="Undefined"}s(I1,"ExtendsUndefinedCheck");f();function BCe(t,e){return Z_(uI(t),e)}s(BCe,"ExcludeFromTemplateLiteral");function ent(t,e){let n=t.filter(r=>_x(r,e)===rt.False);return n.length===1?n[0]:ao(n)}s(ent,"ExcludeRest");function Z_(t,e,n={}){return a0(t)?nt(BCe(t,e),n):ds(t)?nt(PCe(t,e),n):nt(Wi(t)?ent(t.anyOf,e):_x(t,e)!==rt.False?ni():t,n)}s(Z_,"Exclude");function tnt(t,e){let n={};for(let r of globalThis.Object.getOwnPropertyNames(t))n[r]=Z_(t[r],e);return n}s(tnt,"FromProperties");function nnt(t,e){return tnt(t.properties,e)}s(nnt,"FromMappedResult");function PCe(t,e){let n=nnt(t,e);return Yi(n)}s(PCe,"ExcludeFromMappedResult");f();f();f();function DCe(t,e){return eS(uI(t),e)}s(DCe,"ExtractFromTemplateLiteral");function rnt(t,e){let n=t.filter(r=>_x(r,e)!==rt.False);return n.length===1?n[0]:ao(n)}s(rnt,"ExtractRest");function eS(t,e,n){return a0(t)?nt(DCe(t,e),n):ds(t)?nt(NCe(t,e),n):nt(Wi(t)?rnt(t.anyOf,e):_x(t,e)!==rt.False?t:ni(),n)}s(eS,"Extract");function int(t,e){let n={};for(let r of globalThis.Object.getOwnPropertyNames(t))n[r]=eS(t[r],e);return n}s(int,"FromProperties");function ont(t,e){return int(t.properties,e)}s(ont,"FromMappedResult");function NCe(t,e){let n=ont(t,e);return Yi(n)}s(NCe,"ExtractFromMappedResult");f();function LCe(t,e){return om(t)?nt(t.returns,e):ni(e)}s(LCe,"InstanceType");f();f();function tF(t){return sd(Qc(t))}s(tF,"ReadonlyOptional");f();function dI(t,e,n){return nt({[Ze]:"Record",type:"object",patternProperties:{[t]:e}},n)}s(dI,"RecordCreateFromPattern");function zX(t,e,n){let r={};for(let i of t)r[i]=e;return lo(r,{...n,[vf]:"Record"})}s(zX,"RecordCreateFromKeys");function snt(t,e,n){return qL(t)?zX(od(t),e,n):dI(t.pattern,e,n)}s(snt,"FromTemplateLiteralKey");function ant(t,e,n){return zX(od(ao(t)),e,n)}s(ant,"FromUnionKey");function lnt(t,e,n){return zX([t.toString()],e,n)}s(lnt,"FromLiteralKey");function cnt(t,e,n){return dI(t.source,e,n)}s(cnt,"FromRegExpKey");function unt(t,e,n){let r=Ia(t.pattern)?cg:t.pattern;return dI(r,e,n)}s(unt,"FromStringKey");function dnt(t,e,n){return dI(cg,e,n)}s(dnt,"FromAnyKey");function fnt(t,e,n){return dI(Gye,e,n)}s(fnt,"FromNeverKey");function pnt(t,e,n){return lo({true:e,false:e},n)}s(pnt,"FromBooleanKey");function mnt(t,e,n){return dI(lg,e,n)}s(mnt,"FromIntegerKey");function hnt(t,e,n){return dI(lg,e,n)}s(hnt,"FromNumberKey");function nF(t,e,n={}){return Wi(t)?ant(t.anyOf,e,n):a0(t)?snt(t,e,n):o0(t)?lnt(t.const,e,n):y1(t)?pnt(t,e,n):am(t)?mnt(t,e,n):lm(t)?hnt(t,e,n):_X(t)?cnt(t,e,n):C1(t)?unt(t,e,n):TX(t)?dnt(t,e,n):Ex(t)?fnt(t,e,n):ni(n)}s(nF,"Record");function rF(t){return globalThis.Object.getOwnPropertyNames(t.patternProperties)[0]}s(rF,"RecordPattern");function FCe(t){let e=rF(t);return e===cg?bu():e===lg?bf():bu({pattern:e})}s(FCe,"RecordKey");function iF(t){return t.patternProperties[rF(t)]}s(iF,"RecordValue");function gnt(t,e){return e.parameters=qB(t,e.parameters),e.returns=dm(t,e.returns),e}s(gnt,"FromConstructor");function Ant(t,e){return e.parameters=qB(t,e.parameters),e.returns=dm(t,e.returns),e}s(Ant,"FromFunction");function ynt(t,e){return e.allOf=qB(t,e.allOf),e}s(ynt,"FromIntersect");function Cnt(t,e){return e.anyOf=qB(t,e.anyOf),e}s(Cnt,"FromUnion");function xnt(t,e){return Ia(e.items)||(e.items=qB(t,e.items)),e}s(xnt,"FromTuple");function vnt(t,e){return e.items=dm(t,e.items),e}s(vnt,"FromArray");function bnt(t,e){return e.items=dm(t,e.items),e}s(bnt,"FromAsyncIterator");function Ent(t,e){return e.items=dm(t,e.items),e}s(Ent,"FromIterator");function Int(t,e){return e.item=dm(t,e.item),e}s(Int,"FromPromise");function Tnt(t,e){let n=Rnt(t,e.properties);return{...e,...lo(n)}}s(Tnt,"FromObject");function wnt(t,e){let n=dm(t,FCe(e)),r=dm(t,iF(e)),i=nF(n,r);return{...e,...i}}s(wnt,"FromRecord");function _nt(t,e){return e.index in t?t[e.index]:um()}s(_nt,"FromArgument");function Snt(t,e){let n=Q_(e),r=id(e),i=dm(t,e);return n&&r?tF(i):n&&!r?sd(i):!n&&r?Qc(i):i}s(Snt,"FromProperty");function Rnt(t,e){return globalThis.Object.getOwnPropertyNames(e).reduce((n,r)=>({...n,[r]:Snt(t,e[r])}),{})}s(Rnt,"FromProperties");function qB(t,e){return e.map(n=>dm(t,n))}s(qB,"FromTypes");function dm(t,e){return om(e)?gnt(t,e):sm(e)?Ant(t,e):$s(e)?ynt(t,e):Wi(e)?Cnt(t,e):l0(e)?xnt(t,e):rm(e)?vnt(t,e):iI(e)?bnt(t,e):sI(e)?Ent(t,e):aI(e)?Int(t,e):Ta(e)?Tnt(t,e):lI(e)?wnt(t,e):wX(e)?_nt(t,e):e}s(dm,"FromType");function MCe(t,e){return dm(e,F_(t))}s(MCe,"Instantiate");f();function QCe(t){return nt({[Ze]:"Integer",type:"integer"},t)}s(QCe,"Integer");f();f();f();function knt(t,e,n){return{[t]:fm(Li(t),e,cs(n))}}s(knt,"MappedIntrinsicPropertyKey");function Bnt(t,e,n){return t.reduce((i,o)=>({...i,...knt(o,e,n)}),{})}s(Bnt,"MappedIntrinsicPropertyKeys");function Pnt(t,e,n){return Bnt(t.keys,e,n)}s(Pnt,"MappedIntrinsicProperties");function OCe(t,e,n){let r=Pnt(t,e,n);return Yi(r)}s(OCe,"IntrinsicFromMappedKey");function Dnt(t){let[e,n]=[t.slice(0,1),t.slice(1)];return[e.toLowerCase(),n].join("")}s(Dnt,"ApplyUncapitalize");function Nnt(t){let[e,n]=[t.slice(0,1),t.slice(1)];return[e.toUpperCase(),n].join("")}s(Nnt,"ApplyCapitalize");function Lnt(t){return t.toUpperCase()}s(Lnt,"ApplyUppercase");function Fnt(t){return t.toLowerCase()}s(Fnt,"ApplyLowercase");function Mnt(t,e,n){let r=j_(t.pattern);if(!cI(r))return{...t,pattern:UCe(t.pattern,e)};let a=[...MB(r)].map(u=>Li(u)),l=qCe(a,e),c=ao(l);return HL([c],n)}s(Mnt,"FromTemplateLiteral");function UCe(t,e){return typeof t=="string"?e==="Uncapitalize"?Dnt(t):e==="Capitalize"?Nnt(t):e==="Uppercase"?Lnt(t):e==="Lowercase"?Fnt(t):t:t.toString()}s(UCe,"FromLiteralValue");function qCe(t,e){return t.map(n=>fm(n,e))}s(qCe,"FromRest");function fm(t,e,n={}){return s0(t)?OCe(t,e,n):a0(t)?Mnt(t,e,n):Wi(t)?ao(qCe(t.anyOf,e),n):o0(t)?Li(UCe(t.const,e),n):nt(t,n)}s(fm,"Intrinsic");function WCe(t,e={}){return fm(t,"Capitalize",e)}s(WCe,"Capitalize");f();function HCe(t,e={}){return fm(t,"Lowercase",e)}s(HCe,"Lowercase");f();function GCe(t,e={}){return fm(t,"Uncapitalize",e)}s(GCe,"Uncapitalize");f();function jCe(t,e={}){return fm(t,"Uppercase",e)}s(jCe,"Uppercase");f();f();f();f();f();function Qnt(t,e,n){let r={};for(let i of globalThis.Object.getOwnPropertyNames(t))r[i]=Sx(t[i],e,cs(n));return r}s(Qnt,"FromProperties");function Ont(t,e,n){return Qnt(t.properties,e,n)}s(Ont,"FromMappedResult");function VCe(t,e,n){let r=Ont(t,e,n);return Yi(r)}s(VCe,"OmitFromMappedResult");function Unt(t,e){return t.map(n=>YX(n,e))}s(Unt,"FromIntersect");function qnt(t,e){return t.map(n=>YX(n,e))}s(qnt,"FromUnion");function Wnt(t,e){let{[e]:n,...r}=t;return r}s(Wnt,"FromProperty");function Hnt(t,e){return e.reduce((n,r)=>Wnt(n,r),t)}s(Hnt,"FromProperties");function Gnt(t,e){let n=zs(t,[Ds,"$id","required","properties"]),r=Hnt(t.properties,e);return lo(r,n)}s(Gnt,"FromObject");function jnt(t){let e=t.reduce((n,r)=>QL(r)?[...n,Li(r)]:n,[]);return ao(e)}s(jnt,"UnionFromPropertyKeys");function YX(t,e){return $s(t)?Oc(Unt(t.allOf,e)):Wi(t)?ao(qnt(t.anyOf,e)):Ta(t)?Gnt(t,e):lo({})}s(YX,"OmitResolve");function Sx(t,e,n){let r=Ea(e)?jnt(e):e,i=Ns(e)?od(e):e,o=oa(t),a=oa(e);return ds(t)?VCe(t,i,n):s0(e)?$Ce(t,e,n):o&&a?Jo("Omit",[t,r],n):!o&&a?Jo("Omit",[t,r],n):o&&!a?Jo("Omit",[t,r],n):nt({...YX(t,i),...n})}s(Sx,"Omit");function Vnt(t,e,n){return{[e]:Sx(t,[e],cs(n))}}s(Vnt,"FromPropertyKey");function $nt(t,e,n){return e.reduce((r,i)=>({...r,...Vnt(t,i,n)}),{})}s($nt,"FromPropertyKeys");function znt(t,e,n){return $nt(t,e.keys,n)}s(znt,"FromMappedKey");function $Ce(t,e,n){let r=znt(t,e,n);return Yi(r)}s($Ce,"OmitFromMappedKey");f();f();f();function Ynt(t,e,n){let r={};for(let i of globalThis.Object.getOwnPropertyNames(t))r[i]=Rx(t[i],e,cs(n));return r}s(Ynt,"FromProperties");function Knt(t,e,n){return Ynt(t.properties,e,n)}s(Knt,"FromMappedResult");function zCe(t,e,n){let r=Knt(t,e,n);return Yi(r)}s(zCe,"PickFromMappedResult");function Jnt(t,e){return t.map(n=>KX(n,e))}s(Jnt,"FromIntersect");function Xnt(t,e){return t.map(n=>KX(n,e))}s(Xnt,"FromUnion");function Znt(t,e){let n={};for(let r of e)r in t&&(n[r]=t[r]);return n}s(Znt,"FromProperties");function ert(t,e){let n=zs(t,[Ds,"$id","required","properties"]),r=Znt(t.properties,e);return lo(r,n)}s(ert,"FromObject");function trt(t){let e=t.reduce((n,r)=>QL(r)?[...n,Li(r)]:n,[]);return ao(e)}s(trt,"UnionFromPropertyKeys");function KX(t,e){return $s(t)?Oc(Jnt(t.allOf,e)):Wi(t)?ao(Xnt(t.anyOf,e)):Ta(t)?ert(t,e):lo({})}s(KX,"PickResolve");function Rx(t,e,n){let r=Ea(e)?trt(e):e,i=Ns(e)?od(e):e,o=oa(t),a=oa(e);return ds(t)?zCe(t,i,n):s0(e)?YCe(t,e,n):o&&a?Jo("Pick",[t,r],n):!o&&a?Jo("Pick",[t,r],n):o&&!a?Jo("Pick",[t,r],n):nt({...KX(t,i),...n})}s(Rx,"Pick");function nrt(t,e,n){return{[e]:Rx(t,[e],cs(n))}}s(nrt,"FromPropertyKey");function rrt(t,e,n){return e.reduce((r,i)=>({...r,...nrt(t,i,n)}),{})}s(rrt,"FromPropertyKeys");function irt(t,e,n){return rrt(t,e.keys,n)}s(irt,"FromMappedKey");function YCe(t,e,n){let r=irt(t,e,n);return Yi(r)}s(YCe,"PickFromMappedKey");f();f();function ort(t,e){return Jo("Partial",[Jo(t,e)])}s(ort,"FromComputed");function srt(t){return Jo("Partial",[Tf(t)])}s(srt,"FromRef");function art(t){let e={};for(let n of globalThis.Object.getOwnPropertyNames(t))e[n]=Qc(t[n]);return e}s(art,"FromProperties");function lrt(t){let e=zs(t,[Ds,"$id","required","properties"]),n=art(t.properties);return lo(n,e)}s(lrt,"FromObject");function KCe(t){return t.map(e=>JCe(e))}s(KCe,"FromRest");function JCe(t){return im(t)?ort(t.target,t.parameters):oa(t)?srt(t.$ref):$s(t)?Oc(KCe(t.allOf)):Wi(t)?ao(KCe(t.anyOf)):Ta(t)?lrt(t):oI(t)||y1(t)||am(t)||o0(t)||kB(t)||lm(t)||C1(t)||BB(t)||x1(t)?t:lo({})}s(JCe,"PartialResolve");function tS(t,e){return ds(t)?XCe(t,e):nt({...JCe(t),...e})}s(tS,"Partial");function crt(t,e){let n={};for(let r of globalThis.Object.getOwnPropertyNames(t))n[r]=tS(t[r],cs(e));return n}s(crt,"FromProperties");function urt(t,e){return crt(t.properties,e)}s(urt,"FromMappedResult");function XCe(t,e){let n=urt(t,e);return Yi(n)}s(XCe,"PartialFromMappedResult");f();f();function drt(t,e){return Jo("Required",[Jo(t,e)])}s(drt,"FromComputed");function frt(t){return Jo("Required",[Tf(t)])}s(frt,"FromRef");function prt(t){let e={};for(let n of globalThis.Object.getOwnPropertyNames(t))e[n]=zs(t[n],[lc]);return e}s(prt,"FromProperties");function mrt(t){let e=zs(t,[Ds,"$id","required","properties"]),n=prt(t.properties);return lo(n,e)}s(mrt,"FromObject");function ZCe(t){return t.map(e=>exe(e))}s(ZCe,"FromRest");function exe(t){return im(t)?drt(t.target,t.parameters):oa(t)?frt(t.$ref):$s(t)?Oc(ZCe(t.allOf)):Wi(t)?ao(ZCe(t.anyOf)):Ta(t)?mrt(t):oI(t)||y1(t)||am(t)||o0(t)||kB(t)||lm(t)||C1(t)||BB(t)||x1(t)?t:lo({})}s(exe,"RequiredResolve");function nS(t,e){return ds(t)?txe(t,e):nt({...exe(t),...e})}s(nS,"Required");function hrt(t,e){let n={};for(let r of globalThis.Object.getOwnPropertyNames(t))n[r]=nS(t[r],e);return n}s(hrt,"FromProperties");function grt(t,e){return hrt(t.properties,e)}s(grt,"FromMappedResult");function txe(t,e){let n=grt(t,e);return Yi(n)}s(txe,"RequiredFromMappedResult");function Art(t,e){return e.map(n=>oa(n)?JX(t,n.$ref):c0(t,n))}s(Art,"DereferenceParameters");function JX(t,e){return e in t?oa(t[e])?JX(t,t[e].$ref):c0(t,t[e]):ni()}s(JX,"Dereference");function yrt(t){return Y_(t[0])}s(yrt,"FromAwaited");function Crt(t){return wx(t[0],t[1])}s(Crt,"FromIndex");function xrt(t){return K_(t[0])}s(xrt,"FromKeyOf");function vrt(t){return tS(t[0])}s(vrt,"FromPartial");function brt(t){return Sx(t[0],t[1])}s(brt,"FromOmit");function Ert(t){return Rx(t[0],t[1])}s(Ert,"FromPick");function Irt(t){return nS(t[0])}s(Irt,"FromRequired");function Trt(t,e,n){let r=Art(t,n);return e==="Awaited"?yrt(r):e==="Index"?Crt(r):e==="KeyOf"?xrt(r):e==="Partial"?vrt(r):e==="Omit"?brt(r):e==="Pick"?Ert(r):e==="Required"?Irt(r):ni()}s(Trt,"FromComputed");function wrt(t,e){return q_(c0(t,e))}s(wrt,"FromArray");function _rt(t,e){return W_(c0(t,e))}s(_rt,"FromAsyncIterator");function Srt(t,e,n){return H_(WB(t,e),c0(t,n))}s(Srt,"FromConstructor");function Rrt(t,e,n){return ug(WB(t,e),c0(t,n))}s(Rrt,"FromFunction");function krt(t,e){return Oc(WB(t,e))}s(krt,"FromIntersect");function Brt(t,e){return z_(c0(t,e))}s(Brt,"FromIterator");function Prt(t,e){return lo(globalThis.Object.keys(e).reduce((n,r)=>({...n,[r]:c0(t,e[r])}),{}))}s(Prt,"FromObject");function Drt(t,e){let[n,r]=[c0(t,iF(e)),rF(e)],i=F_(e);return i.patternProperties[r]=n,i}s(Drt,"FromRecord");function Nrt(t,e){return oa(e)?{...JX(t,e.$ref),[Ds]:e[Ds]}:e}s(Nrt,"FromTransform");function Lrt(t,e){return Ef(WB(t,e))}s(Lrt,"FromTuple");function Frt(t,e){return ao(WB(t,e))}s(Frt,"FromUnion");function WB(t,e){return e.map(n=>c0(t,n))}s(WB,"FromTypes");function c0(t,e){return id(e)?nt(c0(t,zs(e,[lc])),e):Q_(e)?nt(c0(t,zs(e,[nm])),e):so(e)?nt(Nrt(t,e),e):rm(e)?nt(wrt(t,e.items),e):iI(e)?nt(_rt(t,e.items),e):im(e)?nt(Trt(t,e.target,e.parameters)):om(e)?nt(Srt(t,e.parameters,e.returns),e):sm(e)?nt(Rrt(t,e.parameters,e.returns),e):$s(e)?nt(krt(t,e.allOf),e):sI(e)?nt(Brt(t,e.items),e):Ta(e)?nt(Prt(t,e.properties),e):lI(e)?nt(Drt(t,e)):l0(e)?nt(Lrt(t,e.items||[]),e):Wi(e)?nt(Frt(t,e.anyOf),e):e}s(c0,"FromType");function Mrt(t,e){return e in t?c0(t,t[e]):ni()}s(Mrt,"ComputeType");function nxe(t){return globalThis.Object.getOwnPropertyNames(t).reduce((e,n)=>({...e,[n]:Mrt(t,n)}),{})}s(nxe,"ComputeModuleProperties");var XX=class{static{s(this,"TModule")}constructor(e){let n=nxe(e),r=this.WithIdentifiers(n);this.$defs=r}Import(e,n){let r={...this.$defs,[e]:nt(this.$defs[e],n)};return nt({[Ze]:"Import",$defs:r,$ref:e})}WithIdentifiers(e){return globalThis.Object.getOwnPropertyNames(e).reduce((n,r)=>({...n,[r]:{...e[r],$id:r}}),{})}};function rxe(t){return new XX(t)}s(rxe,"Module");f();function ixe(t,e){return nt({[Ze]:"Not",not:t},e)}s(ixe,"Not");f();function oxe(t,e){return sm(t)?Ef(t.parameters,e):ni()}s(oxe,"Parameters");f();var Qrt=0;function sxe(t,e={}){Ia(e.$id)&&(e.$id=`T${Qrt++}`);let n=F_(t({[Ze]:"This",$ref:`${e.$id}`}));return n.$id=e.$id,nt({[vf]:"Recursive",...n},e)}s(sxe,"Recursive");f();function axe(t,e){let n=qo(t)?new globalThis.RegExp(t):t;return nt({[Ze]:"RegExp",type:"RegExp",source:n.source,flags:n.flags},e)}s(axe,"RegExp");f();function Ort(t){return $s(t)?t.allOf:Wi(t)?t.anyOf:l0(t)?t.items??[]:[]}s(Ort,"RestResolve");function lxe(t){return Ort(t)}s(lxe,"Rest");f();function cxe(t,e){return sm(t)?nt(t.returns,e):ni(e)}s(cxe,"ReturnType");f();var ZX=class{static{s(this,"TransformDecodeBuilder")}constructor(e){this.schema=e}Decode(e){return new eZ(this.schema,e)}},eZ=class{static{s(this,"TransformEncodeBuilder")}constructor(e,n){this.schema=e,this.decode=n}EncodeTransform(e,n){let o={Encode:s(a=>n[Ds].Encode(e(a)),"Encode"),Decode:s(a=>this.decode(n[Ds].Decode(a)),"Decode")};return{...n,[Ds]:o}}EncodeSchema(e,n){let r={Decode:this.decode,Encode:e};return{...n,[Ds]:r}}Encode(e){return so(this.schema)?this.EncodeTransform(e,this.schema):this.EncodeSchema(e,this.schema)}};function uxe(t){return new ZX(t)}s(uxe,"Transform");f();function dxe(t={}){return nt({[Ze]:t[Ze]??"Unsafe"},t)}s(dxe,"Unsafe");f();function fxe(t){return nt({[Ze]:"Void",type:"void"},t)}s(fxe,"Void");f();var tZ={};d1(tZ,{Any:()=>Tx,Argument:()=>Yye,Array:()=>q_,AsyncIterator:()=>W_,Awaited:()=>Y_,BigInt:()=>$_,Boolean:()=>WL,Capitalize:()=>WCe,Composite:()=>mCe,Const:()=>hCe,Constructor:()=>H_,ConstructorParameters:()=>gCe,Date:()=>$L,Enum:()=>ACe,Exclude:()=>Z_,Extends:()=>X_,Extract:()=>eS,Function:()=>ug,Index:()=>wx,InstanceType:()=>LCe,Instantiate:()=>MCe,Integer:()=>QCe,Intersect:()=>Oc,Iterator:()=>z_,KeyOf:()=>K_,Literal:()=>Li,Lowercase:()=>HCe,Mapped:()=>lCe,Module:()=>rxe,Never:()=>ni,Not:()=>ixe,Null:()=>zL,Number:()=>bf,Object:()=>lo,Omit:()=>Sx,Optional:()=>Qc,Parameters:()=>oxe,Partial:()=>tS,Pick:()=>Rx,Promise:()=>jL,Readonly:()=>sd,ReadonlyOptional:()=>tF,Record:()=>nF,Recursive:()=>sxe,Ref:()=>Tf,RegExp:()=>axe,Required:()=>nS,Rest:()=>lxe,ReturnType:()=>cxe,String:()=>bu,Symbol:()=>YL,TemplateLiteral:()=>HL,Transform:()=>uxe,Tuple:()=>Ef,Uint8Array:()=>JL,Uncapitalize:()=>GCe,Undefined:()=>KL,Union:()=>ao,Unknown:()=>um,Unsafe:()=>dxe,Uppercase:()=>jCe,Void:()=>fxe});f();var I=tZ;f();f();function Urt(t){switch(t.errorType){case Ke.ArrayContains:return"Expected array to contain at least one matching value";case Ke.ArrayMaxContains:return`Expected array to contain no more than ${t.schema.maxContains} matching values`;case Ke.ArrayMinContains:return`Expected array to contain at least ${t.schema.minContains} matching values`;case Ke.ArrayMaxItems:return`Expected array length to be less or equal to ${t.schema.maxItems}`;case Ke.ArrayMinItems:return`Expected array length to be greater or equal to ${t.schema.minItems}`;case Ke.ArrayUniqueItems:return"Expected array elements to be unique";case Ke.Array:return"Expected array";case Ke.AsyncIterator:return"Expected AsyncIterator";case Ke.BigIntExclusiveMaximum:return`Expected bigint to be less than ${t.schema.exclusiveMaximum}`;case Ke.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${t.schema.exclusiveMinimum}`;case Ke.BigIntMaximum:return`Expected bigint to be less or equal to ${t.schema.maximum}`;case Ke.BigIntMinimum:return`Expected bigint to be greater or equal to ${t.schema.minimum}`;case Ke.BigIntMultipleOf:return`Expected bigint to be a multiple of ${t.schema.multipleOf}`;case Ke.BigInt:return"Expected bigint";case Ke.Boolean:return"Expected boolean";case Ke.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${t.schema.exclusiveMinimumTimestamp}`;case Ke.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${t.schema.exclusiveMaximumTimestamp}`;case Ke.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${t.schema.minimumTimestamp}`;case Ke.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${t.schema.maximumTimestamp}`;case Ke.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${t.schema.multipleOfTimestamp}`;case Ke.Date:return"Expected Date";case Ke.Function:return"Expected function";case Ke.IntegerExclusiveMaximum:return`Expected integer to be less than ${t.schema.exclusiveMaximum}`;case Ke.IntegerExclusiveMinimum:return`Expected integer to be greater than ${t.schema.exclusiveMinimum}`;case Ke.IntegerMaximum:return`Expected integer to be less or equal to ${t.schema.maximum}`;case Ke.IntegerMinimum:return`Expected integer to be greater or equal to ${t.schema.minimum}`;case Ke.IntegerMultipleOf:return`Expected integer to be a multiple of ${t.schema.multipleOf}`;case Ke.Integer:return"Expected integer";case Ke.IntersectUnevaluatedProperties:return"Unexpected property";case Ke.Intersect:return"Expected all values to match";case Ke.Iterator:return"Expected Iterator";case Ke.Literal:return`Expected ${typeof t.schema.const=="string"?`'${t.schema.const}'`:t.schema.const}`;case Ke.Never:return"Never";case Ke.Not:return"Value should not match";case Ke.Null:return"Expected null";case Ke.NumberExclusiveMaximum:return`Expected number to be less than ${t.schema.exclusiveMaximum}`;case Ke.NumberExclusiveMinimum:return`Expected number to be greater than ${t.schema.exclusiveMinimum}`;case Ke.NumberMaximum:return`Expected number to be less or equal to ${t.schema.maximum}`;case Ke.NumberMinimum:return`Expected number to be greater or equal to ${t.schema.minimum}`;case Ke.NumberMultipleOf:return`Expected number to be a multiple of ${t.schema.multipleOf}`;case Ke.Number:return"Expected number";case Ke.Object:return"Expected object";case Ke.ObjectAdditionalProperties:return"Unexpected property";case Ke.ObjectMaxProperties:return`Expected object to have no more than ${t.schema.maxProperties} properties`;case Ke.ObjectMinProperties:return`Expected object to have at least ${t.schema.minProperties} properties`;case Ke.ObjectRequiredProperty:return"Expected required property";case Ke.Promise:return"Expected Promise";case Ke.RegExp:return"Expected string to match regular expression";case Ke.StringFormatUnknown:return`Unknown format '${t.schema.format}'`;case Ke.StringFormat:return`Expected string to match '${t.schema.format}' format`;case Ke.StringMaxLength:return`Expected string length less or equal to ${t.schema.maxLength}`;case Ke.StringMinLength:return`Expected string length greater or equal to ${t.schema.minLength}`;case Ke.StringPattern:return`Expected string to match '${t.schema.pattern}'`;case Ke.String:return"Expected string";case Ke.Symbol:return"Expected symbol";case Ke.TupleLength:return`Expected tuple to have ${t.schema.maxItems||0} elements`;case Ke.Tuple:return"Expected tuple";case Ke.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${t.schema.maxByteLength}`;case Ke.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${t.schema.minByteLength}`;case Ke.Uint8Array:return"Expected Uint8Array";case Ke.Undefined:return"Expected undefined";case Ke.Union:return"Expected union value";case Ke.Void:return"Expected void";case Ke.Kind:return`Expected kind '${t.schema[Ze]}'`;default:return"Unknown error type"}}s(Urt,"DefaultErrorFunction");var qrt=Urt;function pxe(){return qrt}s(pxe,"GetErrorFunction");f();var nZ=class extends Ar{static{s(this,"TypeDereferenceError")}constructor(e){super(`Unable to dereference schema with $id '${e.$ref}'`),this.schema=e}};function Wrt(t,e){let n=e.find(r=>r.$id===t.$ref);if(n===void 0)throw new nZ(t);return Ki(n,e)}s(Wrt,"Resolve");function kl(t,e){return!qi(t.$id)||e.some(n=>n.$id===t.$id)||e.push(t),e}s(kl,"Pushref");function Ki(t,e){return t[Ze]==="This"||t[Ze]==="Ref"?Wrt(t,e):t}s(Ki,"Deref");f();var rZ=class extends Ar{static{s(this,"ValueHashError")}constructor(e){super("Unable to hash value"),this.value=e}},u0;(function(t){t[t.Undefined=0]="Undefined",t[t.Null=1]="Null",t[t.Boolean=2]="Boolean",t[t.Number=3]="Number",t[t.String=4]="String",t[t.Object=5]="Object",t[t.Array=6]="Array",t[t.Date=7]="Date",t[t.Uint8Array=8]="Uint8Array",t[t.Symbol=9]="Symbol",t[t.BigInt=10]="BigInt"})(u0||(u0={}));var rS=BigInt("14695981039346656037"),[Hrt,Grt]=[BigInt("1099511628211"),BigInt("18446744073709551616")],jrt=Array.from({length:256}).map((t,e)=>BigInt(e)),mxe=new Float64Array(1),hxe=new DataView(mxe.buffer),gxe=new Uint8Array(mxe.buffer);function*Vrt(t){let e=t===0?1:Math.ceil(Math.floor(Math.log2(t)+1)/8);for(let n=0;n<e;n++)yield t>>8*(e-1-n)&255}s(Vrt,"NumberToBytes");function $rt(t){qc(u0.Array);for(let e of t)iS(e)}s($rt,"ArrayType");function zrt(t){qc(u0.Boolean),qc(t?1:0)}s(zrt,"BooleanType");function Yrt(t){qc(u0.BigInt),hxe.setBigInt64(0,t);for(let e of gxe)qc(e)}s(Yrt,"BigIntType");function Krt(t){qc(u0.Date),iS(t.getTime())}s(Krt,"DateType");function Jrt(t){qc(u0.Null)}s(Jrt,"NullType");function Xrt(t){qc(u0.Number),hxe.setFloat64(0,t);for(let e of gxe)qc(e)}s(Xrt,"NumberType");function Zrt(t){qc(u0.Object);for(let e of globalThis.Object.getOwnPropertyNames(t).sort())iS(e),iS(t[e])}s(Zrt,"ObjectType");function eit(t){qc(u0.String);for(let e=0;e<t.length;e++)for(let n of Vrt(t.charCodeAt(e)))qc(n)}s(eit,"StringType");function tit(t){qc(u0.Symbol),iS(t.description)}s(tit,"SymbolType");function nit(t){qc(u0.Uint8Array);for(let e=0;e<t.length;e++)qc(t[e])}s(nit,"Uint8ArrayType");function rit(t){return qc(u0.Undefined)}s(rit,"UndefinedType");function iS(t){if(gr(t))return $rt(t);if(ag(t))return zrt(t);if(ac(t))return Yrt(t);if(xu(t))return Krt(t);if(g1(t))return Jrt(t);if(qn(t))return Xrt(t);if(ci(t))return Zrt(t);if(qi(t))return eit(t);if(A1(t))return tit(t);if(M_(t))return nit(t);if(us(t))return rit(t);throw new rZ(t)}s(iS,"Visit");function qc(t){rS=rS^jrt[t],rS=rS*Hrt%Grt}s(qc,"FNV1A64");function kx(t){return rS=BigInt("14695981039346656037"),iS(t),rS}s(kx,"Hash");f();var iZ=class extends Ar{static{s(this,"ValueCheckUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}};function iit(t){return t[Ze]==="Any"||t[Ze]==="Unknown"}s(iit,"IsAnyOrUnknown");function Ei(t){return t!==void 0}s(Ei,"IsDefined");function oit(t,e,n){return!0}s(oit,"FromAny");function sit(t,e,n){return!0}s(sit,"FromArgument");function ait(t,e,n){if(!gr(n)||Ei(t.minItems)&&!(n.length>=t.minItems)||Ei(t.maxItems)&&!(n.length<=t.maxItems)||!n.every(o=>Bl(t.items,e,o))||t.uniqueItems===!0&&!function(){let o=new Set;for(let a of n){let l=kx(a);if(o.has(l))return!1;o.add(l)}return!0}())return!1;if(!(Ei(t.contains)||qn(t.minContains)||qn(t.maxContains)))return!0;let r=Ei(t.contains)?t.contains:ni(),i=n.reduce((o,a)=>Bl(r,e,a)?o+1:o,0);return!(i===0||qn(t.minContains)&&i<t.minContains||qn(t.maxContains)&&i>t.maxContains)}s(ait,"FromArray");function lit(t,e,n){return NL(n)}s(lit,"FromAsyncIterator");function cit(t,e,n){return!(!ac(n)||Ei(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)||Ei(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)||Ei(t.maximum)&&!(n<=t.maximum)||Ei(t.minimum)&&!(n>=t.minimum)||Ei(t.multipleOf)&&n%t.multipleOf!==BigInt(0))}s(cit,"FromBigInt");function uit(t,e,n){return ag(n)}s(uit,"FromBoolean");function dit(t,e,n){return Bl(t.returns,e,n.prototype)}s(dit,"FromConstructor");function fit(t,e,n){return!(!xu(n)||Ei(t.exclusiveMaximumTimestamp)&&!(n.getTime()<t.exclusiveMaximumTimestamp)||Ei(t.exclusiveMinimumTimestamp)&&!(n.getTime()>t.exclusiveMinimumTimestamp)||Ei(t.maximumTimestamp)&&!(n.getTime()<=t.maximumTimestamp)||Ei(t.minimumTimestamp)&&!(n.getTime()>=t.minimumTimestamp)||Ei(t.multipleOfTimestamp)&&n.getTime()%t.multipleOfTimestamp!==0)}s(fit,"FromDate");function pit(t,e,n){return bx(n)}s(pit,"FromFunction");function mit(t,e,n){let r=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return Bl(i,[...e,...r],n)}s(mit,"FromImport");function hit(t,e,n){return!(!ML(n)||Ei(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)||Ei(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)||Ei(t.maximum)&&!(n<=t.maximum)||Ei(t.minimum)&&!(n>=t.minimum)||Ei(t.multipleOf)&&n%t.multipleOf!==0)}s(hit,"FromInteger");function git(t,e,n){let r=t.allOf.every(i=>Bl(i,e,n));if(t.unevaluatedProperties===!1){let i=new RegExp(E1(t)),o=Object.getOwnPropertyNames(n).every(a=>i.test(a));return r&&o}else if(Ns(t.unevaluatedProperties)){let i=new RegExp(E1(t)),o=Object.getOwnPropertyNames(n).every(a=>i.test(a)||Bl(t.unevaluatedProperties,e,n[a]));return r&&o}else return r}s(git,"FromIntersect");function Ait(t,e,n){return LL(n)}s(Ait,"FromIterator");function yit(t,e,n){return n===t.const}s(yit,"FromLiteral");function Cit(t,e,n){return!1}s(Cit,"FromNever");function xit(t,e,n){return!Bl(t.not,e,n)}s(xit,"FromNot");function vit(t,e,n){return g1(n)}s(vit,"FromNull");function bit(t,e,n){return!(!Ko.IsNumberLike(n)||Ei(t.exclusiveMaximum)&&!(n<t.exclusiveMaximum)||Ei(t.exclusiveMinimum)&&!(n>t.exclusiveMinimum)||Ei(t.minimum)&&!(n>=t.minimum)||Ei(t.maximum)&&!(n<=t.maximum)||Ei(t.multipleOf)&&n%t.multipleOf!==0)}s(bit,"FromNumber");function Eit(t,e,n){if(!Ko.IsObjectLike(n)||Ei(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)||Ei(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties))return!1;let r=Object.getOwnPropertyNames(t.properties);for(let i of r){let o=t.properties[i];if(t.required&&t.required.includes(i)){if(!Bl(o,e,n[i])||(I1(o)||iit(o))&&!(i in n))return!1}else if(Ko.IsExactOptionalProperty(n,i)&&!Bl(o,e,n[i]))return!1}if(t.additionalProperties===!1){let i=Object.getOwnPropertyNames(n);return t.required&&t.required.length===r.length&&i.length===r.length?!0:i.every(o=>r.includes(o))}else return typeof t.additionalProperties=="object"?Object.getOwnPropertyNames(n).every(o=>r.includes(o)||Bl(t.additionalProperties,e,n[o])):!0}s(Eit,"FromObject");function Iit(t,e,n){return FL(n)}s(Iit,"FromPromise");function Tit(t,e,n){if(!Ko.IsRecordLike(n)||Ei(t.minProperties)&&!(Object.getOwnPropertyNames(n).length>=t.minProperties)||Ei(t.maxProperties)&&!(Object.getOwnPropertyNames(n).length<=t.maxProperties))return!1;let[r,i]=Object.entries(t.patternProperties)[0],o=new RegExp(r),a=Object.entries(n).every(([u,d])=>o.test(u)?Bl(i,e,d):!0),l=typeof t.additionalProperties=="object"?Object.entries(n).every(([u,d])=>o.test(u)?!0:Bl(t.additionalProperties,e,d)):!0,c=t.additionalProperties===!1?Object.getOwnPropertyNames(n).every(u=>o.test(u)):!0;return a&&l&&c}s(Tit,"FromRecord");function wit(t,e,n){return Bl(Ki(t,e),e,n)}s(wit,"FromRef");function _it(t,e,n){let r=new RegExp(t.source,t.flags);return Ei(t.minLength)&&!(n.length>=t.minLength)||Ei(t.maxLength)&&!(n.length<=t.maxLength)?!1:r.test(n)}s(_it,"FromRegExp");function Sit(t,e,n){return!qi(n)||Ei(t.minLength)&&!(n.length>=t.minLength)||Ei(t.maxLength)&&!(n.length<=t.maxLength)||Ei(t.pattern)&&!new RegExp(t.pattern).test(n)?!1:Ei(t.format)?cm.Has(t.format)?cm.Get(t.format)(n):!1:!0}s(Sit,"FromString");function Rit(t,e,n){return A1(n)}s(Rit,"FromSymbol");function kit(t,e,n){return qi(n)&&new RegExp(t.pattern).test(n)}s(kit,"FromTemplateLiteral");function Bit(t,e,n){return Bl(Ki(t,e),e,n)}s(Bit,"FromThis");function Pit(t,e,n){if(!gr(n)||t.items===void 0&&n.length!==0||n.length!==t.maxItems)return!1;if(!t.items)return!0;for(let r=0;r<t.items.length;r++)if(!Bl(t.items[r],e,n[r]))return!1;return!0}s(Pit,"FromTuple");function Dit(t,e,n){return us(n)}s(Dit,"FromUndefined");function Nit(t,e,n){return t.anyOf.some(r=>Bl(r,e,n))}s(Nit,"FromUnion");function Lit(t,e,n){return!(!M_(n)||Ei(t.maxByteLength)&&!(n.length<=t.maxByteLength)||Ei(t.minByteLength)&&!(n.length>=t.minByteLength))}s(Lit,"FromUint8Array");function Fit(t,e,n){return!0}s(Fit,"FromUnknown");function Mit(t,e,n){return Ko.IsVoidLike(n)}s(Mit,"FromVoid");function Qit(t,e,n){return vu.Has(t[Ze])?vu.Get(t[Ze])(t,n):!1}s(Qit,"FromKind");function Bl(t,e,n){let r=Ei(t.$id)?kl(t,e):e,i=t;switch(i[Ze]){case"Any":return oit(i,r,n);case"Argument":return sit(i,r,n);case"Array":return ait(i,r,n);case"AsyncIterator":return lit(i,r,n);case"BigInt":return cit(i,r,n);case"Boolean":return uit(i,r,n);case"Constructor":return dit(i,r,n);case"Date":return fit(i,r,n);case"Function":return pit(i,r,n);case"Import":return mit(i,r,n);case"Integer":return hit(i,r,n);case"Intersect":return git(i,r,n);case"Iterator":return Ait(i,r,n);case"Literal":return yit(i,r,n);case"Never":return Cit(i,r,n);case"Not":return xit(i,r,n);case"Null":return vit(i,r,n);case"Number":return bit(i,r,n);case"Object":return Eit(i,r,n);case"Promise":return Iit(i,r,n);case"Record":return Tit(i,r,n);case"Ref":return wit(i,r,n);case"RegExp":return _it(i,r,n);case"String":return Sit(i,r,n);case"Symbol":return Rit(i,r,n);case"TemplateLiteral":return kit(i,r,n);case"This":return Bit(i,r,n);case"Tuple":return Pit(i,r,n);case"Undefined":return Dit(i,r,n);case"Union":return Nit(i,r,n);case"Uint8Array":return Lit(i,r,n);case"Unknown":return Fit(i,r,n);case"Void":return Mit(i,r,n);default:if(!vu.Has(i[Ze]))throw new iZ(i);return Qit(i,r,n)}}s(Bl,"Visit");function fi(...t){return t.length===3?Bl(t[0],t[1],t[2]):Bl(t[0],[],t[1])}s(fi,"Check");var Ke;(function(t){t[t.ArrayContains=0]="ArrayContains",t[t.ArrayMaxContains=1]="ArrayMaxContains",t[t.ArrayMaxItems=2]="ArrayMaxItems",t[t.ArrayMinContains=3]="ArrayMinContains",t[t.ArrayMinItems=4]="ArrayMinItems",t[t.ArrayUniqueItems=5]="ArrayUniqueItems",t[t.Array=6]="Array",t[t.AsyncIterator=7]="AsyncIterator",t[t.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",t[t.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",t[t.BigIntMaximum=10]="BigIntMaximum",t[t.BigIntMinimum=11]="BigIntMinimum",t[t.BigIntMultipleOf=12]="BigIntMultipleOf",t[t.BigInt=13]="BigInt",t[t.Boolean=14]="Boolean",t[t.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",t[t.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",t[t.DateMaximumTimestamp=17]="DateMaximumTimestamp",t[t.DateMinimumTimestamp=18]="DateMinimumTimestamp",t[t.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",t[t.Date=20]="Date",t[t.Function=21]="Function",t[t.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",t[t.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",t[t.IntegerMaximum=24]="IntegerMaximum",t[t.IntegerMinimum=25]="IntegerMinimum",t[t.IntegerMultipleOf=26]="IntegerMultipleOf",t[t.Integer=27]="Integer",t[t.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",t[t.Intersect=29]="Intersect",t[t.Iterator=30]="Iterator",t[t.Kind=31]="Kind",t[t.Literal=32]="Literal",t[t.Never=33]="Never",t[t.Not=34]="Not",t[t.Null=35]="Null",t[t.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",t[t.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",t[t.NumberMaximum=38]="NumberMaximum",t[t.NumberMinimum=39]="NumberMinimum",t[t.NumberMultipleOf=40]="NumberMultipleOf",t[t.Number=41]="Number",t[t.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",t[t.ObjectMaxProperties=43]="ObjectMaxProperties",t[t.ObjectMinProperties=44]="ObjectMinProperties",t[t.ObjectRequiredProperty=45]="ObjectRequiredProperty",t[t.Object=46]="Object",t[t.Promise=47]="Promise",t[t.RegExp=48]="RegExp",t[t.StringFormatUnknown=49]="StringFormatUnknown",t[t.StringFormat=50]="StringFormat",t[t.StringMaxLength=51]="StringMaxLength",t[t.StringMinLength=52]="StringMinLength",t[t.StringPattern=53]="StringPattern",t[t.String=54]="String",t[t.Symbol=55]="Symbol",t[t.TupleLength=56]="TupleLength",t[t.Tuple=57]="Tuple",t[t.Uint8ArrayMaxByteLength=58]="Uint8ArrayMaxByteLength",t[t.Uint8ArrayMinByteLength=59]="Uint8ArrayMinByteLength",t[t.Uint8Array=60]="Uint8Array",t[t.Undefined=61]="Undefined",t[t.Union=62]="Union",t[t.Void=63]="Void"})(Ke||(Ke={}));var oZ=class extends Ar{static{s(this,"ValueErrorsUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}};function T1(t){return t.replace(/~/g,"~0").replace(/\//g,"~1")}s(T1,"EscapeKey");function Ii(t){return t!==void 0}s(Ii,"IsDefined");var Bx=class{static{s(this,"ValueErrorIterator")}constructor(e){this.iterator=e}[Symbol.iterator](){return this.iterator}First(){let e=this.iterator.next();return e.done?void 0:e.value}};function en(t,e,n,r,i=[]){return{type:t,schema:e,path:n,value:r,message:pxe()({errorType:t,path:n,schema:e,value:r,errors:i}),errors:i}}s(en,"Create");function*Oit(t,e,n,r){}s(Oit,"FromAny");function*Uit(t,e,n,r){}s(Uit,"FromArgument");function*qit(t,e,n,r){if(!gr(r))return yield en(Ke.Array,t,n,r);Ii(t.minItems)&&!(r.length>=t.minItems)&&(yield en(Ke.ArrayMinItems,t,n,r)),Ii(t.maxItems)&&!(r.length<=t.maxItems)&&(yield en(Ke.ArrayMaxItems,t,n,r));for(let a=0;a<r.length;a++)yield*Pl(t.items,e,`${n}/${a}`,r[a]);if(t.uniqueItems===!0&&!function(){let a=new Set;for(let l of r){let c=kx(l);if(a.has(c))return!1;a.add(c)}return!0}()&&(yield en(Ke.ArrayUniqueItems,t,n,r)),!(Ii(t.contains)||Ii(t.minContains)||Ii(t.maxContains)))return;let i=Ii(t.contains)?t.contains:ni(),o=r.reduce((a,l,c)=>Pl(i,e,`${n}${c}`,l).next().done===!0?a+1:a,0);o===0&&(yield en(Ke.ArrayContains,t,n,r)),qn(t.minContains)&&o<t.minContains&&(yield en(Ke.ArrayMinContains,t,n,r)),qn(t.maxContains)&&o>t.maxContains&&(yield en(Ke.ArrayMaxContains,t,n,r))}s(qit,"FromArray");function*Wit(t,e,n,r){NL(r)||(yield en(Ke.AsyncIterator,t,n,r))}s(Wit,"FromAsyncIterator");function*Hit(t,e,n,r){if(!ac(r))return yield en(Ke.BigInt,t,n,r);Ii(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)&&(yield en(Ke.BigIntExclusiveMaximum,t,n,r)),Ii(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)&&(yield en(Ke.BigIntExclusiveMinimum,t,n,r)),Ii(t.maximum)&&!(r<=t.maximum)&&(yield en(Ke.BigIntMaximum,t,n,r)),Ii(t.minimum)&&!(r>=t.minimum)&&(yield en(Ke.BigIntMinimum,t,n,r)),Ii(t.multipleOf)&&r%t.multipleOf!==BigInt(0)&&(yield en(Ke.BigIntMultipleOf,t,n,r))}s(Hit,"FromBigInt");function*Git(t,e,n,r){ag(r)||(yield en(Ke.Boolean,t,n,r))}s(Git,"FromBoolean");function*jit(t,e,n,r){yield*Pl(t.returns,e,n,r.prototype)}s(jit,"FromConstructor");function*Vit(t,e,n,r){if(!xu(r))return yield en(Ke.Date,t,n,r);Ii(t.exclusiveMaximumTimestamp)&&!(r.getTime()<t.exclusiveMaximumTimestamp)&&(yield en(Ke.DateExclusiveMaximumTimestamp,t,n,r)),Ii(t.exclusiveMinimumTimestamp)&&!(r.getTime()>t.exclusiveMinimumTimestamp)&&(yield en(Ke.DateExclusiveMinimumTimestamp,t,n,r)),Ii(t.maximumTimestamp)&&!(r.getTime()<=t.maximumTimestamp)&&(yield en(Ke.DateMaximumTimestamp,t,n,r)),Ii(t.minimumTimestamp)&&!(r.getTime()>=t.minimumTimestamp)&&(yield en(Ke.DateMinimumTimestamp,t,n,r)),Ii(t.multipleOfTimestamp)&&r.getTime()%t.multipleOfTimestamp!==0&&(yield en(Ke.DateMultipleOfTimestamp,t,n,r))}s(Vit,"FromDate");function*$it(t,e,n,r){bx(r)||(yield en(Ke.Function,t,n,r))}s($it,"FromFunction");function*zit(t,e,n,r){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref];yield*Pl(o,[...e,...i],n,r)}s(zit,"FromImport");function*Yit(t,e,n,r){if(!ML(r))return yield en(Ke.Integer,t,n,r);Ii(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)&&(yield en(Ke.IntegerExclusiveMaximum,t,n,r)),Ii(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)&&(yield en(Ke.IntegerExclusiveMinimum,t,n,r)),Ii(t.maximum)&&!(r<=t.maximum)&&(yield en(Ke.IntegerMaximum,t,n,r)),Ii(t.minimum)&&!(r>=t.minimum)&&(yield en(Ke.IntegerMinimum,t,n,r)),Ii(t.multipleOf)&&r%t.multipleOf!==0&&(yield en(Ke.IntegerMultipleOf,t,n,r))}s(Yit,"FromInteger");function*Kit(t,e,n,r){let i=!1;for(let o of t.allOf)for(let a of Pl(o,e,n,r))i=!0,yield a;if(i)return yield en(Ke.Intersect,t,n,r);if(t.unevaluatedProperties===!1){let o=new RegExp(E1(t));for(let a of Object.getOwnPropertyNames(r))o.test(a)||(yield en(Ke.IntersectUnevaluatedProperties,t,`${n}/${a}`,r))}if(typeof t.unevaluatedProperties=="object"){let o=new RegExp(E1(t));for(let a of Object.getOwnPropertyNames(r))if(!o.test(a)){let l=Pl(t.unevaluatedProperties,e,`${n}/${a}`,r[a]).next();l.done||(yield l.value)}}}s(Kit,"FromIntersect");function*Jit(t,e,n,r){LL(r)||(yield en(Ke.Iterator,t,n,r))}s(Jit,"FromIterator");function*Xit(t,e,n,r){r!==t.const&&(yield en(Ke.Literal,t,n,r))}s(Xit,"FromLiteral");function*Zit(t,e,n,r){yield en(Ke.Never,t,n,r)}s(Zit,"FromNever");function*eot(t,e,n,r){Pl(t.not,e,n,r).next().done===!0&&(yield en(Ke.Not,t,n,r))}s(eot,"FromNot");function*tot(t,e,n,r){g1(r)||(yield en(Ke.Null,t,n,r))}s(tot,"FromNull");function*not(t,e,n,r){if(!Ko.IsNumberLike(r))return yield en(Ke.Number,t,n,r);Ii(t.exclusiveMaximum)&&!(r<t.exclusiveMaximum)&&(yield en(Ke.NumberExclusiveMaximum,t,n,r)),Ii(t.exclusiveMinimum)&&!(r>t.exclusiveMinimum)&&(yield en(Ke.NumberExclusiveMinimum,t,n,r)),Ii(t.maximum)&&!(r<=t.maximum)&&(yield en(Ke.NumberMaximum,t,n,r)),Ii(t.minimum)&&!(r>=t.minimum)&&(yield en(Ke.NumberMinimum,t,n,r)),Ii(t.multipleOf)&&r%t.multipleOf!==0&&(yield en(Ke.NumberMultipleOf,t,n,r))}s(not,"FromNumber");function*rot(t,e,n,r){if(!Ko.IsObjectLike(r))return yield en(Ke.Object,t,n,r);Ii(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)&&(yield en(Ke.ObjectMinProperties,t,n,r)),Ii(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties)&&(yield en(Ke.ObjectMaxProperties,t,n,r));let i=Array.isArray(t.required)?t.required:[],o=Object.getOwnPropertyNames(t.properties),a=Object.getOwnPropertyNames(r);for(let l of i)a.includes(l)||(yield en(Ke.ObjectRequiredProperty,t.properties[l],`${n}/${T1(l)}`,void 0));if(t.additionalProperties===!1)for(let l of a)o.includes(l)||(yield en(Ke.ObjectAdditionalProperties,t,`${n}/${T1(l)}`,r[l]));if(typeof t.additionalProperties=="object")for(let l of a)o.includes(l)||(yield*Pl(t.additionalProperties,e,`${n}/${T1(l)}`,r[l]));for(let l of o){let c=t.properties[l];t.required&&t.required.includes(l)?(yield*Pl(c,e,`${n}/${T1(l)}`,r[l]),I1(t)&&!(l in r)&&(yield en(Ke.ObjectRequiredProperty,c,`${n}/${T1(l)}`,void 0))):Ko.IsExactOptionalProperty(r,l)&&(yield*Pl(c,e,`${n}/${T1(l)}`,r[l]))}}s(rot,"FromObject");function*iot(t,e,n,r){FL(r)||(yield en(Ke.Promise,t,n,r))}s(iot,"FromPromise");function*oot(t,e,n,r){if(!Ko.IsRecordLike(r))return yield en(Ke.Object,t,n,r);Ii(t.minProperties)&&!(Object.getOwnPropertyNames(r).length>=t.minProperties)&&(yield en(Ke.ObjectMinProperties,t,n,r)),Ii(t.maxProperties)&&!(Object.getOwnPropertyNames(r).length<=t.maxProperties)&&(yield en(Ke.ObjectMaxProperties,t,n,r));let[i,o]=Object.entries(t.patternProperties)[0],a=new RegExp(i);for(let[l,c]of Object.entries(r))a.test(l)&&(yield*Pl(o,e,`${n}/${T1(l)}`,c));if(typeof t.additionalProperties=="object")for(let[l,c]of Object.entries(r))a.test(l)||(yield*Pl(t.additionalProperties,e,`${n}/${T1(l)}`,c));if(t.additionalProperties===!1){for(let[l,c]of Object.entries(r))if(!a.test(l))return yield en(Ke.ObjectAdditionalProperties,t,`${n}/${T1(l)}`,c)}}s(oot,"FromRecord");function*sot(t,e,n,r){yield*Pl(Ki(t,e),e,n,r)}s(sot,"FromRef");function*aot(t,e,n,r){if(!qi(r))return yield en(Ke.String,t,n,r);if(Ii(t.minLength)&&!(r.length>=t.minLength)&&(yield en(Ke.StringMinLength,t,n,r)),Ii(t.maxLength)&&!(r.length<=t.maxLength)&&(yield en(Ke.StringMaxLength,t,n,r)),!new RegExp(t.source,t.flags).test(r))return yield en(Ke.RegExp,t,n,r)}s(aot,"FromRegExp");function*lot(t,e,n,r){if(!qi(r))return yield en(Ke.String,t,n,r);Ii(t.minLength)&&!(r.length>=t.minLength)&&(yield en(Ke.StringMinLength,t,n,r)),Ii(t.maxLength)&&!(r.length<=t.maxLength)&&(yield en(Ke.StringMaxLength,t,n,r)),qi(t.pattern)&&(new RegExp(t.pattern).test(r)||(yield en(Ke.StringPattern,t,n,r))),qi(t.format)&&(cm.Has(t.format)?cm.Get(t.format)(r)||(yield en(Ke.StringFormat,t,n,r)):yield en(Ke.StringFormatUnknown,t,n,r))}s(lot,"FromString");function*cot(t,e,n,r){A1(r)||(yield en(Ke.Symbol,t,n,r))}s(cot,"FromSymbol");function*uot(t,e,n,r){if(!qi(r))return yield en(Ke.String,t,n,r);new RegExp(t.pattern).test(r)||(yield en(Ke.StringPattern,t,n,r))}s(uot,"FromTemplateLiteral");function*dot(t,e,n,r){yield*Pl(Ki(t,e),e,n,r)}s(dot,"FromThis");function*fot(t,e,n,r){if(!gr(r))return yield en(Ke.Tuple,t,n,r);if(t.items===void 0&&r.length!==0)return yield en(Ke.TupleLength,t,n,r);if(r.length!==t.maxItems)return yield en(Ke.TupleLength,t,n,r);if(t.items)for(let i=0;i<t.items.length;i++)yield*Pl(t.items[i],e,`${n}/${i}`,r[i])}s(fot,"FromTuple");function*pot(t,e,n,r){us(r)||(yield en(Ke.Undefined,t,n,r))}s(pot,"FromUndefined");function*mot(t,e,n,r){if(fi(t,e,r))return;let i=t.anyOf.map(o=>new Bx(Pl(o,e,n,r)));yield en(Ke.Union,t,n,r,i)}s(mot,"FromUnion");function*hot(t,e,n,r){if(!M_(r))return yield en(Ke.Uint8Array,t,n,r);Ii(t.maxByteLength)&&!(r.length<=t.maxByteLength)&&(yield en(Ke.Uint8ArrayMaxByteLength,t,n,r)),Ii(t.minByteLength)&&!(r.length>=t.minByteLength)&&(yield en(Ke.Uint8ArrayMinByteLength,t,n,r))}s(hot,"FromUint8Array");function*got(t,e,n,r){}s(got,"FromUnknown");function*Aot(t,e,n,r){Ko.IsVoidLike(r)||(yield en(Ke.Void,t,n,r))}s(Aot,"FromVoid");function*yot(t,e,n,r){vu.Get(t[Ze])(t,r)||(yield en(Ke.Kind,t,n,r))}s(yot,"FromKind");function*Pl(t,e,n,r){let i=Ii(t.$id)?[...e,t]:e,o=t;switch(o[Ze]){case"Any":return yield*Oit(o,i,n,r);case"Argument":return yield*Uit(o,i,n,r);case"Array":return yield*qit(o,i,n,r);case"AsyncIterator":return yield*Wit(o,i,n,r);case"BigInt":return yield*Hit(o,i,n,r);case"Boolean":return yield*Git(o,i,n,r);case"Constructor":return yield*jit(o,i,n,r);case"Date":return yield*Vit(o,i,n,r);case"Function":return yield*$it(o,i,n,r);case"Import":return yield*zit(o,i,n,r);case"Integer":return yield*Yit(o,i,n,r);case"Intersect":return yield*Kit(o,i,n,r);case"Iterator":return yield*Jit(o,i,n,r);case"Literal":return yield*Xit(o,i,n,r);case"Never":return yield*Zit(o,i,n,r);case"Not":return yield*eot(o,i,n,r);case"Null":return yield*tot(o,i,n,r);case"Number":return yield*not(o,i,n,r);case"Object":return yield*rot(o,i,n,r);case"Promise":return yield*iot(o,i,n,r);case"Record":return yield*oot(o,i,n,r);case"Ref":return yield*sot(o,i,n,r);case"RegExp":return yield*aot(o,i,n,r);case"String":return yield*lot(o,i,n,r);case"Symbol":return yield*cot(o,i,n,r);case"TemplateLiteral":return yield*uot(o,i,n,r);case"This":return yield*dot(o,i,n,r);case"Tuple":return yield*fot(o,i,n,r);case"Undefined":return yield*pot(o,i,n,r);case"Union":return yield*mot(o,i,n,r);case"Uint8Array":return yield*hot(o,i,n,r);case"Unknown":return yield*got(o,i,n,r);case"Void":return yield*Aot(o,i,n,r);default:if(!vu.Has(o[Ze]))throw new oZ(t);return yield*yot(o,i,n,r)}}s(Pl,"Visit");function fg(...t){let e=t.length===3?Pl(t[0],t[1],"",t[2]):Pl(t[0],[],"",t[1]);return new Bx(e)}s(fg,"Errors");f();f();var oS=class extends Ar{static{s(this,"TransformDecodeCheckError")}constructor(e,n,r){super("Unable to decode value as it does not match the expected schema"),this.schema=e,this.value=n,this.error=r}},sZ=class extends Ar{static{s(this,"TransformDecodeError")}constructor(e,n,r,i){super(i instanceof Error?i.message:"Unknown error"),this.schema=e,this.path=n,this.value=r,this.error=i}};function Ls(t,e,n){try{return so(t)?t[Ds].Decode(n):n}catch(r){throw new sZ(t,e,n,r)}}s(Ls,"Default");function Cot(t,e,n,r){return gr(r)?Ls(t,n,r.map((i,o)=>pm(t.items,e,`${n}/${o}`,i))):Ls(t,n,r)}s(Cot,"FromArray");function xot(t,e,n,r){if(!ci(r)||i0(r))return Ls(t,n,r);let i=VL(t),o=i.map(d=>d[0]),a={...r};for(let[d,p]of i)d in a&&(a[d]=pm(p,e,`${n}/${d}`,a[d]));if(!so(t.unevaluatedProperties))return Ls(t,n,a);let l=Object.getOwnPropertyNames(a),c=t.unevaluatedProperties,u={...a};for(let d of l)o.includes(d)||(u[d]=Ls(c,`${n}/${d}`,u[d]));return Ls(t,n,u)}s(xot,"FromIntersect");function vot(t,e,n,r){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref],a=pm(o,[...e,...i],n,r);return Ls(t,n,a)}s(vot,"FromImport");function bot(t,e,n,r){return Ls(t,n,pm(t.not,e,n,r))}s(bot,"FromNot");function Eot(t,e,n,r){if(!ci(r))return Ls(t,n,r);let i=ad(t),o={...r};for(let u of i)hr(o,u)&&(us(o[u])&&(!x1(t.properties[u])||Ko.IsExactOptionalProperty(o,u))||(o[u]=pm(t.properties[u],e,`${n}/${u}`,o[u])));if(!Ns(t.additionalProperties))return Ls(t,n,o);let a=Object.getOwnPropertyNames(o),l=t.additionalProperties,c={...o};for(let u of a)i.includes(u)||(c[u]=Ls(l,`${n}/${u}`,c[u]));return Ls(t,n,c)}s(Eot,"FromObject");function Iot(t,e,n,r){if(!ci(r))return Ls(t,n,r);let i=Object.getOwnPropertyNames(t.patternProperties)[0],o=new RegExp(i),a={...r};for(let d of Object.getOwnPropertyNames(r))o.test(d)&&(a[d]=pm(t.patternProperties[i],e,`${n}/${d}`,a[d]));if(!Ns(t.additionalProperties))return Ls(t,n,a);let l=Object.getOwnPropertyNames(a),c=t.additionalProperties,u={...a};for(let d of l)o.test(d)||(u[d]=Ls(c,`${n}/${d}`,u[d]));return Ls(t,n,u)}s(Iot,"FromRecord");function Tot(t,e,n,r){let i=Ki(t,e);return Ls(t,n,pm(i,e,n,r))}s(Tot,"FromRef");function wot(t,e,n,r){let i=Ki(t,e);return Ls(t,n,pm(i,e,n,r))}s(wot,"FromThis");function _ot(t,e,n,r){return gr(r)&&gr(t.items)?Ls(t,n,t.items.map((i,o)=>pm(i,e,`${n}/${o}`,r[o]))):Ls(t,n,r)}s(_ot,"FromTuple");function Sot(t,e,n,r){for(let i of t.anyOf){if(!fi(i,e,r))continue;let o=pm(i,e,n,r);return Ls(t,n,o)}return Ls(t,n,r)}s(Sot,"FromUnion");function pm(t,e,n,r){let i=kl(t,e),o=t;switch(t[Ze]){case"Array":return Cot(o,i,n,r);case"Import":return vot(o,i,n,r);case"Intersect":return xot(o,i,n,r);case"Not":return bot(o,i,n,r);case"Object":return Eot(o,i,n,r);case"Record":return Iot(o,i,n,r);case"Ref":return Tot(o,i,n,r);case"Symbol":return Ls(o,n,r);case"This":return wot(o,i,n,r);case"Tuple":return _ot(o,i,n,r);case"Union":return Sot(o,i,n,r);default:return Ls(o,n,r)}}s(pm,"Visit");function sS(t,e,n){return pm(t,e,"",n)}s(sS,"TransformDecode");f();var aS=class extends Ar{static{s(this,"TransformEncodeCheckError")}constructor(e,n,r){super("The encoded value does not match the expected schema"),this.schema=e,this.value=n,this.error=r}},aZ=class extends Ar{static{s(this,"TransformEncodeError")}constructor(e,n,r,i){super(`${i instanceof Error?i.message:"Unknown error"}`),this.schema=e,this.path=n,this.value=r,this.error=i}};function cc(t,e,n){try{return so(t)?t[Ds].Encode(n):n}catch(r){throw new aZ(t,e,n,r)}}s(cc,"Default");function Rot(t,e,n,r){let i=cc(t,n,r);return gr(i)?i.map((o,a)=>mm(t.items,e,`${n}/${a}`,o)):i}s(Rot,"FromArray");function kot(t,e,n,r){let i=globalThis.Object.values(t.$defs),o=t.$defs[t.$ref],a=cc(t,n,r);return mm(o,[...e,...i],n,a)}s(kot,"FromImport");function Bot(t,e,n,r){let i=cc(t,n,r);if(!ci(r)||i0(r))return i;let o=VL(t),a=o.map(p=>p[0]),l={...i};for(let[p,m]of o)p in l&&(l[p]=mm(m,e,`${n}/${p}`,l[p]));if(!so(t.unevaluatedProperties))return l;let c=Object.getOwnPropertyNames(l),u=t.unevaluatedProperties,d={...l};for(let p of c)a.includes(p)||(d[p]=cc(u,`${n}/${p}`,d[p]));return d}s(Bot,"FromIntersect");function Pot(t,e,n,r){return cc(t.not,n,cc(t,n,r))}s(Pot,"FromNot");function Dot(t,e,n,r){let i=cc(t,n,r);if(!ci(i))return i;let o=ad(t),a={...i};for(let d of o)hr(a,d)&&(us(a[d])&&(!x1(t.properties[d])||Ko.IsExactOptionalProperty(a,d))||(a[d]=mm(t.properties[d],e,`${n}/${d}`,a[d])));if(!Ns(t.additionalProperties))return a;let l=Object.getOwnPropertyNames(a),c=t.additionalProperties,u={...a};for(let d of l)o.includes(d)||(u[d]=cc(c,`${n}/${d}`,u[d]));return u}s(Dot,"FromObject");function Not(t,e,n,r){let i=cc(t,n,r);if(!ci(r))return i;let o=Object.getOwnPropertyNames(t.patternProperties)[0],a=new RegExp(o),l={...i};for(let p of Object.getOwnPropertyNames(r))a.test(p)&&(l[p]=mm(t.patternProperties[o],e,`${n}/${p}`,l[p]));if(!Ns(t.additionalProperties))return l;let c=Object.getOwnPropertyNames(l),u=t.additionalProperties,d={...l};for(let p of c)a.test(p)||(d[p]=cc(u,`${n}/${p}`,d[p]));return d}s(Not,"FromRecord");function Lot(t,e,n,r){let i=Ki(t,e),o=mm(i,e,n,r);return cc(t,n,o)}s(Lot,"FromRef");function Fot(t,e,n,r){let i=Ki(t,e),o=mm(i,e,n,r);return cc(t,n,o)}s(Fot,"FromThis");function Mot(t,e,n,r){let i=cc(t,n,r);return gr(t.items)?t.items.map((o,a)=>mm(o,e,`${n}/${a}`,i[a])):[]}s(Mot,"FromTuple");function Qot(t,e,n,r){for(let i of t.anyOf){if(!fi(i,e,r))continue;let o=mm(i,e,n,r);return cc(t,n,o)}for(let i of t.anyOf){let o=mm(i,e,n,r);if(fi(t,e,o))return cc(t,n,o)}return cc(t,n,r)}s(Qot,"FromUnion");function mm(t,e,n,r){let i=kl(t,e),o=t;switch(t[Ze]){case"Array":return Rot(o,i,n,r);case"Import":return kot(o,i,n,r);case"Intersect":return Bot(o,i,n,r);case"Not":return Pot(o,i,n,r);case"Object":return Dot(o,i,n,r);case"Record":return Not(o,i,n,r);case"Ref":return Lot(o,i,n,r);case"This":return Fot(o,i,n,r);case"Tuple":return Mot(o,i,n,r);case"Union":return Qot(o,i,n,r);default:return cc(o,n,r)}}s(mm,"Visit");function lS(t,e,n){return mm(t,e,"",n)}s(lS,"TransformEncode");f();function Oot(t,e){return so(t)||fl(t.items,e)}s(Oot,"FromArray");function Uot(t,e){return so(t)||fl(t.items,e)}s(Uot,"FromAsyncIterator");function qot(t,e){return so(t)||fl(t.returns,e)||t.parameters.some(n=>fl(n,e))}s(qot,"FromConstructor");function Wot(t,e){return so(t)||fl(t.returns,e)||t.parameters.some(n=>fl(n,e))}s(Wot,"FromFunction");function Hot(t,e){return so(t)||so(t.unevaluatedProperties)||t.allOf.some(n=>fl(n,e))}s(Hot,"FromIntersect");function Got(t,e){let n=globalThis.Object.getOwnPropertyNames(t.$defs).reduce((i,o)=>[...i,t.$defs[o]],[]),r=t.$defs[t.$ref];return so(t)||fl(r,[...n,...e])}s(Got,"FromImport");function jot(t,e){return so(t)||fl(t.items,e)}s(jot,"FromIterator");function Vot(t,e){return so(t)||fl(t.not,e)}s(Vot,"FromNot");function $ot(t,e){return so(t)||Object.values(t.properties).some(n=>fl(n,e))||Ns(t.additionalProperties)&&fl(t.additionalProperties,e)}s($ot,"FromObject");function zot(t,e){return so(t)||fl(t.item,e)}s(zot,"FromPromise");function Yot(t,e){let n=Object.getOwnPropertyNames(t.patternProperties)[0],r=t.patternProperties[n];return so(t)||fl(r,e)||Ns(t.additionalProperties)&&so(t.additionalProperties)}s(Yot,"FromRecord");function Kot(t,e){return so(t)?!0:fl(Ki(t,e),e)}s(Kot,"FromRef");function Jot(t,e){return so(t)?!0:fl(Ki(t,e),e)}s(Jot,"FromThis");function Xot(t,e){return so(t)||!us(t.items)&&t.items.some(n=>fl(n,e))}s(Xot,"FromTuple");function Zot(t,e){return so(t)||t.anyOf.some(n=>fl(n,e))}s(Zot,"FromUnion");function fl(t,e){let n=kl(t,e),r=t;if(t.$id&&lZ.has(t.$id))return!1;switch(t.$id&&lZ.add(t.$id),t[Ze]){case"Array":return Oot(r,n);case"AsyncIterator":return Uot(r,n);case"Constructor":return qot(r,n);case"Function":return Wot(r,n);case"Import":return Got(r,n);case"Intersect":return Hot(r,n);case"Iterator":return jot(r,n);case"Not":return Vot(r,n);case"Object":return $ot(r,n);case"Promise":return zot(r,n);case"Record":return Yot(r,n);case"Ref":return Kot(r,n);case"This":return Jot(r,n);case"Tuple":return Xot(r,n);case"Union":return Zot(r,n);default:return so(t)}}s(fl,"Visit");var lZ=new Set;function w1(t,e){return lZ.clear(),fl(t,e)}s(w1,"HasTransform");var cZ=class{static{s(this,"TypeCheck")}constructor(e,n,r,i){this.schema=e,this.references=n,this.checkFunc=r,this.code=i,this.hasTransform=w1(e,n)}Code(){return this.code}Schema(){return this.schema}References(){return this.references}Errors(e){return fg(this.schema,this.references,e)}Check(e){return this.checkFunc(e)}Decode(e){if(!this.checkFunc(e))throw new oS(this.schema,e,this.Errors(e).First());return this.hasTransform?sS(this.schema,this.references,e):e}Encode(e){let n=this.hasTransform?lS(this.schema,this.references,e):e;if(!this.checkFunc(n))throw new aS(this.schema,e,this.Errors(e).First());return n}},_1;(function(t){function e(o){return o===36}s(e,"DollarSign"),t.DollarSign=e;function n(o){return o===95}s(n,"IsUnderscore"),t.IsUnderscore=n;function r(o){return o>=65&&o<=90||o>=97&&o<=122}s(r,"IsAlpha"),t.IsAlpha=r;function i(o){return o>=48&&o<=57}s(i,"IsNumeric"),t.IsNumeric=i})(_1||(_1={}));var oF;(function(t){function e(o){return o.length===0?!1:_1.IsNumeric(o.charCodeAt(0))}s(e,"IsFirstCharacterNumeric");function n(o){if(e(o))return!1;for(let a=0;a<o.length;a++){let l=o.charCodeAt(a);if(!(_1.IsAlpha(l)||_1.IsNumeric(l)||_1.DollarSign(l)||_1.IsUnderscore(l)))return!1}return!0}s(n,"IsAccessor");function r(o){return o.replace(/'/g,"\\'")}s(r,"EscapeHyphen");function i(o,a){return n(a)?`${o}.${a}`:`${o}['${r(a)}']`}s(i,"Encode"),t.Encode=i})(oF||(oF={}));var uZ;(function(t){function e(n){let r=[];for(let i=0;i<n.length;i++){let o=n.charCodeAt(i);_1.IsNumeric(o)||_1.IsAlpha(o)?r.push(n.charAt(i)):r.push(`_${o}_`)}return r.join("").replace(/__/g,"_")}s(e,"Encode"),t.Encode=e})(uZ||(uZ={}));var dZ;(function(t){function e(n){return n.replace(/'/g,"\\'")}s(e,"Escape"),t.Escape=e})(dZ||(dZ={}));var fZ=class extends Ar{static{s(this,"TypeCompilerUnknownTypeError")}constructor(e){super("Unknown type"),this.schema=e}},sF=class extends Ar{static{s(this,"TypeCompilerTypeGuardError")}constructor(e){super("Preflight validation check failed to guard for the given schema"),this.schema=e}},fI;(function(t){function e(a,l,c){return Ko.ExactOptionalPropertyTypes?`('${l}' in ${a} ? ${c} : true)`:`(${oF.Encode(a,l)} !== undefined ? ${c} : true)`}s(e,"IsExactOptionalProperty"),t.IsExactOptionalProperty=e;function n(a){return Ko.AllowArrayObject?`(typeof ${a} === 'object' && ${a} !== null)`:`(typeof ${a} === 'object' && ${a} !== null && !Array.isArray(${a}))`}s(n,"IsObjectLike"),t.IsObjectLike=n;function r(a){return Ko.AllowArrayObject?`(typeof ${a} === 'object' && ${a} !== null && !(${a} instanceof Date) && !(${a} instanceof Uint8Array))`:`(typeof ${a} === 'object' && ${a} !== null && !Array.isArray(${a}) && !(${a} instanceof Date) && !(${a} instanceof Uint8Array))`}s(r,"IsRecordLike"),t.IsRecordLike=r;function i(a){return Ko.AllowNaN?`typeof ${a} === 'number'`:`Number.isFinite(${a})`}s(i,"IsNumberLike"),t.IsNumberLike=i;function o(a){return Ko.AllowNullVoid?`(${a} === undefined || ${a} === null)`:`${a} === undefined`}s(o,"IsVoidLike"),t.IsVoidLike=o})(fI||(fI={}));var ms;(function(t){function e(le){return le[Ze]==="Any"||le[Ze]==="Unknown"}s(e,"IsAnyOrUnknown");function*n(le,Oe,ye){yield"true"}s(n,"FromAny");function*r(le,Oe,ye){yield"true"}s(r,"FromArgument");function*i(le,Oe,ye){yield`Array.isArray(${ye})`;let[tt,X]=[Me("value","any"),Me("acc","number")];qn(le.maxItems)&&(yield`${ye}.length <= ${le.maxItems}`),qn(le.minItems)&&(yield`${ye}.length >= ${le.minItems}`);let re=me(le.items,Oe,"value");if(yield`${ye}.every((${tt}) => ${re})`,ps(le.contains)||qn(le.minContains)||qn(le.maxContains)){let We=ps(le.contains)?le.contains:ni(),De=me(We,Oe,"value"),be=qn(le.minContains)?[`(count >= ${le.minContains})`]:[],ze=qn(le.maxContains)?[`(count <= ${le.maxContains})`]:[],it=`const count = value.reduce((${X}, ${tt}) => ${De} ? acc + 1 : acc, 0)`,ht=["(count > 0)",...be,...ze].join(" && ");yield`((${tt}) => { ${it}; return ${ht}})(${ye})`}le.uniqueItems===!0&&(yield`((${tt}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${ye})`)}s(i,"FromArray");function*o(le,Oe,ye){yield`(typeof value === 'object' && Symbol.asyncIterator in ${ye})`}s(o,"FromAsyncIterator");function*a(le,Oe,ye){yield`(typeof ${ye} === 'bigint')`,ac(le.exclusiveMaximum)&&(yield`${ye} < BigInt(${le.exclusiveMaximum})`),ac(le.exclusiveMinimum)&&(yield`${ye} > BigInt(${le.exclusiveMinimum})`),ac(le.maximum)&&(yield`${ye} <= BigInt(${le.maximum})`),ac(le.minimum)&&(yield`${ye} >= BigInt(${le.minimum})`),ac(le.multipleOf)&&(yield`(${ye} % BigInt(${le.multipleOf})) === 0`)}s(a,"FromBigInt");function*l(le,Oe,ye){yield`(typeof ${ye} === 'boolean')`}s(l,"FromBoolean");function*c(le,Oe,ye){yield*ee(le.returns,Oe,`${ye}.prototype`)}s(c,"FromConstructor");function*u(le,Oe,ye){yield`(${ye} instanceof Date) && Number.isFinite(${ye}.getTime())`,qn(le.exclusiveMaximumTimestamp)&&(yield`${ye}.getTime() < ${le.exclusiveMaximumTimestamp}`),qn(le.exclusiveMinimumTimestamp)&&(yield`${ye}.getTime() > ${le.exclusiveMinimumTimestamp}`),qn(le.maximumTimestamp)&&(yield`${ye}.getTime() <= ${le.maximumTimestamp}`),qn(le.minimumTimestamp)&&(yield`${ye}.getTime() >= ${le.minimumTimestamp}`),qn(le.multipleOfTimestamp)&&(yield`(${ye}.getTime() % ${le.multipleOfTimestamp}) === 0`)}s(u,"FromDate");function*d(le,Oe,ye){yield`(typeof ${ye} === 'function')`}s(d,"FromFunction");function*p(le,Oe,ye){let tt=globalThis.Object.getOwnPropertyNames(le.$defs).reduce((X,re)=>[...X,le.$defs[re]],[]);yield*ee(Tf(le.$ref),[...Oe,...tt],ye)}s(p,"FromImport");function*m(le,Oe,ye){yield`Number.isInteger(${ye})`,qn(le.exclusiveMaximum)&&(yield`${ye} < ${le.exclusiveMaximum}`),qn(le.exclusiveMinimum)&&(yield`${ye} > ${le.exclusiveMinimum}`),qn(le.maximum)&&(yield`${ye} <= ${le.maximum}`),qn(le.minimum)&&(yield`${ye} >= ${le.minimum}`),qn(le.multipleOf)&&(yield`(${ye} % ${le.multipleOf}) === 0`)}s(m,"FromInteger");function*h(le,Oe,ye){let tt=le.allOf.map(X=>me(X,Oe,ye)).join(" && ");if(le.unevaluatedProperties===!1){let X=Se(`${new RegExp(E1(le))};`),re=`Object.getOwnPropertyNames(${ye}).every(key => ${X}.test(key))`;yield`(${tt} && ${re})`}else if(ps(le.unevaluatedProperties)){let X=Se(`${new RegExp(E1(le))};`),re=`Object.getOwnPropertyNames(${ye}).every(key => ${X}.test(key) || ${me(le.unevaluatedProperties,Oe,`${ye}[key]`)})`;yield`(${tt} && ${re})`}else yield`(${tt})`}s(h,"FromIntersect");function*g(le,Oe,ye){yield`(typeof value === 'object' && Symbol.iterator in ${ye})`}s(g,"FromIterator");function*y(le,Oe,ye){typeof le.const=="number"||typeof le.const=="boolean"?yield`(${ye} === ${le.const})`:yield`(${ye} === '${dZ.Escape(le.const)}')`}s(y,"FromLiteral");function*v(le,Oe,ye){yield"false"}s(v,"FromNever");function*b(le,Oe,ye){yield`(!${me(le.not,Oe,ye)})`}s(b,"FromNot");function*E(le,Oe,ye){yield`(${ye} === null)`}s(E,"FromNull");function*_(le,Oe,ye){yield fI.IsNumberLike(ye),qn(le.exclusiveMaximum)&&(yield`${ye} < ${le.exclusiveMaximum}`),qn(le.exclusiveMinimum)&&(yield`${ye} > ${le.exclusiveMinimum}`),qn(le.maximum)&&(yield`${ye} <= ${le.maximum}`),qn(le.minimum)&&(yield`${ye} >= ${le.minimum}`),qn(le.multipleOf)&&(yield`(${ye} % ${le.multipleOf}) === 0`)}s(_,"FromNumber");function*k(le,Oe,ye){yield fI.IsObjectLike(ye),qn(le.minProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length >= ${le.minProperties}`),qn(le.maxProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length <= ${le.maxProperties}`);let tt=Object.getOwnPropertyNames(le.properties);for(let X of tt){let re=oF.Encode(ye,X),We=le.properties[X];if(le.required&&le.required.includes(X))yield*ee(We,Oe,re),(I1(We)||e(We))&&(yield`('${X}' in ${ye})`);else{let De=me(We,Oe,re);yield fI.IsExactOptionalProperty(ye,X,De)}}if(le.additionalProperties===!1)if(le.required&&le.required.length===tt.length)yield`Object.getOwnPropertyNames(${ye}).length === ${tt.length}`;else{let X=`[${tt.map(re=>`'${re}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${ye}).every(key => ${X}.includes(key))`}if(typeof le.additionalProperties=="object"){let X=me(le.additionalProperties,Oe,`${ye}[key]`),re=`[${tt.map(We=>`'${We}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${ye}).every(key => ${re}.includes(key) || ${X}))`}}s(k,"FromObject");function*P(le,Oe,ye){yield`${ye} instanceof Promise`}s(P,"FromPromise");function*N(le,Oe,ye){yield fI.IsRecordLike(ye),qn(le.minProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length >= ${le.minProperties}`),qn(le.maxProperties)&&(yield`Object.getOwnPropertyNames(${ye}).length <= ${le.maxProperties}`);let[tt,X]=Object.entries(le.patternProperties)[0],re=Se(`${new RegExp(tt)}`),We=me(X,Oe,"value"),De=ps(le.additionalProperties)?me(le.additionalProperties,Oe,ye):le.additionalProperties===!1?"false":"true",be=`(${re}.test(key) ? ${We} : ${De})`;yield`(Object.entries(${ye}).every(([key, value]) => ${be}))`}s(N,"FromRecord");function*U(le,Oe,ye){let tt=Ki(le,Oe);if(ce.functions.has(le.$ref))return yield`${Ne(le.$ref)}(${ye})`;yield*ee(tt,Oe,ye)}s(U,"FromRef");function*ne(le,Oe,ye){let tt=Se(`${new RegExp(le.source,le.flags)};`);yield`(typeof ${ye} === 'string')`,qn(le.maxLength)&&(yield`${ye}.length <= ${le.maxLength}`),qn(le.minLength)&&(yield`${ye}.length >= ${le.minLength}`),yield`${tt}.test(${ye})`}s(ne,"FromRegExp");function*he(le,Oe,ye){yield`(typeof ${ye} === 'string')`,qn(le.maxLength)&&(yield`${ye}.length <= ${le.maxLength}`),qn(le.minLength)&&(yield`${ye}.length >= ${le.minLength}`),le.pattern!==void 0&&(yield`${Se(`${new RegExp(le.pattern)};`)}.test(${ye})`),le.format!==void 0&&(yield`format('${le.format}', ${ye})`)}s(he,"FromString");function*ae(le,Oe,ye){yield`(typeof ${ye} === 'symbol')`}s(ae,"FromSymbol");function*G(le,Oe,ye){yield`(typeof ${ye} === 'string')`,yield`${Se(`${new RegExp(le.pattern)};`)}.test(${ye})`}s(G,"FromTemplateLiteral");function*W(le,Oe,ye){yield`${Ne(le.$ref)}(${ye})`}s(W,"FromThis");function*ue(le,Oe,ye){if(yield`Array.isArray(${ye})`,le.items===void 0)return yield`${ye}.length === 0`;yield`(${ye}.length === ${le.maxItems})`;for(let tt=0;tt<le.items.length;tt++)yield`${me(le.items[tt],Oe,`${ye}[${tt}]`)}`}s(ue,"FromTuple");function*ie(le,Oe,ye){yield`${ye} === undefined`}s(ie,"FromUndefined");function*V(le,Oe,ye){yield`(${le.anyOf.map(X=>me(X,Oe,ye)).join(" || ")})`}s(V,"FromUnion");function*O(le,Oe,ye){yield`${ye} instanceof Uint8Array`,qn(le.maxByteLength)&&(yield`(${ye}.length <= ${le.maxByteLength})`),qn(le.minByteLength)&&(yield`(${ye}.length >= ${le.minByteLength})`)}s(O,"FromUint8Array");function*Y(le,Oe,ye){yield"true"}s(Y,"FromUnknown");function*te(le,Oe,ye){yield fI.IsVoidLike(ye)}s(te,"FromVoid");function*pe(le,Oe,ye){let tt=ce.instances.size;ce.instances.set(tt,le),yield`kind('${le[Ze]}', ${tt}, ${ye})`}s(pe,"FromKind");function*ee(le,Oe,ye,tt=!0){let X=qi(le.$id)?[...Oe,le]:Oe,re=le;if(tt&&qi(le.$id)){let We=Ne(le.$id);if(ce.functions.has(We))return yield`${We}(${ye})`;{ce.functions.set(We,"<deferred>");let De=Je(We,le,Oe,"value",!1);return ce.functions.set(We,De),yield`${We}(${ye})`}}switch(re[Ze]){case"Any":return yield*n(re,X,ye);case"Argument":return yield*r(re,X,ye);case"Array":return yield*i(re,X,ye);case"AsyncIterator":return yield*o(re,X,ye);case"BigInt":return yield*a(re,X,ye);case"Boolean":return yield*l(re,X,ye);case"Constructor":return yield*c(re,X,ye);case"Date":return yield*u(re,X,ye);case"Function":return yield*d(re,X,ye);case"Import":return yield*p(re,X,ye);case"Integer":return yield*m(re,X,ye);case"Intersect":return yield*h(re,X,ye);case"Iterator":return yield*g(re,X,ye);case"Literal":return yield*y(re,X,ye);case"Never":return yield*v(re,X,ye);case"Not":return yield*b(re,X,ye);case"Null":return yield*E(re,X,ye);case"Number":return yield*_(re,X,ye);case"Object":return yield*k(re,X,ye);case"Promise":return yield*P(re,X,ye);case"Record":return yield*N(re,X,ye);case"Ref":return yield*U(re,X,ye);case"RegExp":return yield*ne(re,X,ye);case"String":return yield*he(re,X,ye);case"Symbol":return yield*ae(re,X,ye);case"TemplateLiteral":return yield*G(re,X,ye);case"This":return yield*W(re,X,ye);case"Tuple":return yield*ue(re,X,ye);case"Undefined":return yield*ie(re,X,ye);case"Union":return yield*V(re,X,ye);case"Uint8Array":return yield*O(re,X,ye);case"Unknown":return yield*Y(re,X,ye);case"Void":return yield*te(re,X,ye);default:if(!vu.Has(re[Ze]))throw new fZ(le);return yield*pe(re,X,ye)}}s(ee,"Visit");let ce={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function me(le,Oe,ye,tt=!0){return`(${[...ee(le,Oe,ye,tt)].join(" && ")})`}s(me,"CreateExpression");function Ne(le){return`check_${uZ.Encode(le)}`}s(Ne,"CreateFunctionName");function Se(le){let Oe=`local_${ce.variables.size}`;return ce.variables.set(Oe,`const ${Oe} = ${le}`),Oe}s(Se,"CreateVariable");function Je(le,Oe,ye,tt,X=!0){let[re,We]=[`
`,it=>"".padStart(it," ")],De=Me("value","any"),be=ft("boolean"),ze=[...ee(Oe,ye,tt,X)].map(it=>`${We(4)}${it}`).join(` &&${re}`);return`function ${le}(${De})${be} {${re}${We(2)}return (${re}${ze}${re}${We(2)})
}`}s(Je,"CreateFunction");function Me(le,Oe){let ye=ce.language==="typescript"?`: ${Oe}`:"";return`${le}${ye}`}s(Me,"CreateParameter");function ft(le){return ce.language==="typescript"?`: ${le}`:""}s(ft,"CreateReturns");function It(le,Oe,ye){let tt=Je("check",le,Oe,"value"),X=Me("value","any"),re=ft("boolean"),We=[...ce.functions.values()],De=[...ce.variables.values()],be=qi(le.$id)?`return function check(${X})${re} {
  return ${Ne(le.$id)}(value)
}`:`return ${tt}`;return[...De,...We,be].join(`
`)}s(It,"Build");function yt(...le){let Oe={language:"javascript"},[ye,tt,X]=le.length===2&&gr(le[1])?[le[0],le[1],Oe]:le.length===2&&!gr(le[1])?[le[0],[],le[1]]:le.length===3?[le[0],le[1],le[2]]:le.length===1?[le[0],[],Oe]:[null,[],Oe];if(ce.language=X.language,ce.variables.clear(),ce.functions.clear(),ce.instances.clear(),!ps(ye))throw new sF(ye);for(let re of tt)if(!ps(re))throw new sF(re);return It(ye,tt,X)}s(yt,"Code"),t.Code=yt;function vt(le,Oe=[]){let ye=yt(le,Oe,{language:"javascript"}),tt=globalThis.Function("kind","format","hash",ye),X=new Map(ce.instances);function re(ze,it,ht){if(!vu.Has(ze)||!X.has(it))return!1;let Ot=vu.Get(ze),cn=X.get(it);return Ot(cn,ht)}s(re,"typeRegistryFunction");function We(ze,it){return cm.Has(ze)?cm.Get(ze)(it):!1}s(We,"formatRegistryFunction");function De(ze){return kx(ze)}s(De,"hashFunction");let be=tt(re,We,De);return new cZ(le,Oe,be,ye)}s(vt,"Compile"),t.Compile=vt})(ms||(ms={}));var YF=je(vx());f();f();var uc=[];for(let t=0;t<256;++t)uc.push((t+256).toString(16).slice(1));function Axe(t,e=0){return(uc[t[e+0]]+uc[t[e+1]]+uc[t[e+2]]+uc[t[e+3]]+"-"+uc[t[e+4]]+uc[t[e+5]]+"-"+uc[t[e+6]]+uc[t[e+7]]+"-"+uc[t[e+8]]+uc[t[e+9]]+"-"+uc[t[e+10]]+uc[t[e+11]]+uc[t[e+12]]+uc[t[e+13]]+uc[t[e+14]]+uc[t[e+15]]).toLowerCase()}s(Axe,"unsafeStringify");f();var yxe=require("crypto");var lF=new Uint8Array(256),aF=lF.length;function pZ(){return aF>lF.length-16&&((0,yxe.randomFillSync)(lF),aF=0),lF.slice(aF,aF+=16)}s(pZ,"rng");f();f();var Cxe=require("crypto"),mZ={randomUUID:Cxe.randomUUID};function est(t,e,n){if(mZ.randomUUID&&!e&&!t)return mZ.randomUUID();t=t||{};let r=t.random??t.rng?.()??pZ();if(r.length<16)throw new Error("Random bytes length must be >= 16");if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,e){if(n=n||0,n<0||n+16>e.length)throw new RangeError(`UUID byte range ${n}:${n+15} is out of buffer bounds`);for(let i=0;i<16;++i)e[n+i]=r[i];return e}return Axe(r)}s(est,"v4");var an=est;var KF=je(ri());function SS(t){return t===1}s(SS,"isRestricted");var iat=["engine.prompt","engine.completion","ghostText.capturedAfterAccepted","ghostText.capturedAfterRejected"],XB=8192,oat=21;var Nl=class{static{s(this,"TelemetryReporters")}getReporter(e,n=0){return SS(n)?this.getRestrictedReporter(e):this.reporter}getRestrictedReporter(e){if(JF(e))return this.reporterRestricted;if(L_(e))return new EB}getFTReporter(e){if(YEe(e))return this.reporterFT;if(L_(e))return new EB}setReporter(e){this.reporter=e}setRestrictedReporter(e){this.reporterRestricted=e}setFTReporter(e){this.reporterFT=e}async deactivate(){let e=[this.reporter,this.reporterRestricted,this.reporterFT];this.reporter=this.reporterRestricted=this.reporterFT=void 0,await Promise.all(e.map(n=>n?.dispose()))}},sat=I.Object({},{additionalProperties:I.String()}),aat=I.Object({meanLogProb:I.Optional(I.Number()),meanAlternativeLogProb:I.Optional(I.Number())},{additionalProperties:I.Number()}),lat=new Set(["ERR_WORKER_OUT_OF_MEMORY","ENOMEM"]);function cat(t){return lat.has(t.code??"")||t.name==="RangeError"&&t.message==="WebAssembly.Memory(): could not allocate memory"}s(cat,"isOomError");function uat(t){return vB(t)?"network":cat(t)||t.code==="EMFILE"||t.code==="ENFILE"||t.syscall==="uv_cwd"&&(t.code==="ENOENT"||t.code=="EIO")||t.code==="CopilotPromptLoadFailure"||`${t.code}`.startsWith("CopilotPromptWorkerExit")?"local":"exception"}s(uat,"getErrorType");var ir=class t{static{s(this,"TelemetryData")}static{this.validateTelemetryProperties=ms.Compile(sat)}static{this.validateTelemetryMeasurements=ms.Compile(aat)}static{this.keysExemptedFromSanitization=["abexp.assignmentcontext","VSCode.ABExp.Features"]}constructor(e,n,r){this.properties=e,this.measurements=n,this.issuedTime=r}static createAndMarkAsIssued(e,n){return new t(e||{},n||{},Ks())}extendedBy(e,n){let r={...this.properties,...e},i={...this.measurements,...n},o=new t(r,i,this.issuedTime);return o.displayedTime=this.displayedTime,o}markAsDisplayed(){this.displayedTime===void 0&&(this.displayedTime=Ks())}async extendWithExpTelemetry(e){let{filters:n,exp:r}=await e.get(Dt).getFallbackExpAndFilters();r.addToTelemetry(this),n.addToTelemetry(this)}extendWithEditorAgnosticFields(e){this.properties.editor_version=og(e.get(ur).getEditorInfo()),this.properties.editor_plugin_version=og(e.get(ur).getEditorPluginInfo());let n=e.get(Ps);this.properties.client_machineid=n.machineId,this.properties.client_sessionid=n.sessionId,this.properties.copilot_version=`copilot/${CI(e)}`,typeof process<"u"&&(this.properties.runtime_version=`node/${process.versions.node}`);let r=e.get(ur);this.properties.common_extname=r.getEditorPluginInfo().name,this.properties.common_extversion=r.getEditorPluginInfo().version,this.properties.common_vscodeversion=og(r.getEditorInfo());let i=e.get(Kr);this.properties.fetcher=i.name;let o=e.get(fc).getHttpSettings();this.properties.proxy_enabled=o.proxy?"true":"false",this.properties.proxy_auth=o.proxyAuthorization?"true":"false",this.properties.proxy_kerberos_spn=o.proxyKerberosServicePrincipal?"true":"false",this.properties.reject_unauthorized=o.proxyStrictSSL!==!1?"true":"false"}extendWithConfigProperties(e){let n=eIe(e);n["copilot.build"]=tIe(e),n["copilot.buildType"]=kf(e),this.properties={...this.properties,...n}}extendWithRequestId(e){let n={completionId:e.completionId,created:e.created.toString(),headerRequestId:e.headerRequestId,serverExperiments:e.serverExperiments,deploymentId:e.deploymentId};this.properties={...this.properties,...n}}static{this.keysToRemoveFromStandardTelemetryHack=["gitRepoHost","gitRepoName","gitRepoOwner","gitRepoUrl","gitRepoPath","repo","request_option_nwo","userKind"]}static maybeRemoveRepoInfoFromPropertiesHack(e,n){if(SS(e))return n;let r={};for(let i in n)t.keysToRemoveFromStandardTelemetryHack.includes(i)||(r[i]=n[i]);return r}sanitizeKeys(){this.properties=t.sanitizeKeys(this.properties),this.measurements=t.sanitizeKeys(this.measurements);for(let e in this.measurements)isNaN(this.measurements[e])&&delete this.measurements[e]}multiplexProperties(){this.properties=t.multiplexProperties(this.properties)}static sanitizeKeys(e){e=e||{};let n={};for(let r in e){let i=t.keysExemptedFromSanitization.includes(r)?r:r.replace(/\./g,"_");n[i]=e[r]}return n}static multiplexProperties(e){let n={...e};for(let r in e){let i=e[r],o=i?.length??0;if(o>XB){let a=0,l=0;for(;o>0&&l<oat;){l+=1;let c=r;l>1&&(c=r+"_"+(l<10?"0":"")+l);let u=a+XB;o<XB&&(u=a+o),n[c]=i.slice(a,u),o-=XB,a+=XB}}}return n}updateMeasurements(e){let n=e-this.issuedTime;if(this.measurements.timeSinceIssuedMs=n,this.displayedTime!==void 0){let r=e-this.displayedTime;this.measurements.timeSinceDisplayedMs=r}this.measurements.current_time===void 0&&(this.measurements.current_time=pat(e))}validateData(e,n){let r;if(t.validateTelemetryProperties.Check(this.properties)||(r={problem:"properties",error:JSON.stringify([...t.validateTelemetryProperties.Errors(this.properties)])}),!t.validateTelemetryMeasurements.Check(this.measurements)){let i=JSON.stringify([...t.validateTelemetryMeasurements.Errors(this.measurements)]);r===void 0?r={problem:"measurements",error:i}:(r.problem="both",r.error+=`; ${i}`)}if(r===void 0)return!0;if(L_(e))throw new Error(`Invalid telemetry data: ${r.problem} ${r.error} properties=${JSON.stringify(this.properties)} measurements=${JSON.stringify(this.measurements)}`);return yI(e,"invalidTelemetryData",t.createAndMarkAsIssued({properties:JSON.stringify(this.properties),measurements:JSON.stringify(this.measurements),problem:r.problem,validationError:r.error}),n),SS(n)&&yI(e,"invalidTelemetryData_in_secure",t.createAndMarkAsIssued({problem:r.problem,requestId:this.properties.requestId??"unknown"}),0),!1}async makeReadyForSending(e,n,r,i){this.extendWithConfigProperties(e),this.extendWithEditorAgnosticFields(e),this.sanitizeKeys(),this.multiplexProperties(),r==="IncludeExp"&&await this.extendWithExpTelemetry(e),this.updateMeasurements(i),this.validateData(e,n)||(this.properties.telemetry_failed_validation="true"),Object.assign(this.properties,KEe(e))}},gg=class t extends ir{static{s(this,"TelemetryWithExp")}constructor(e,n,r,i){super(e,n,r),this.filtersAndExp=i}extendedBy(e,n){let r={...this.properties,...e},i={...this.measurements,...n},o=new t(r,i,this.issuedTime,this.filtersAndExp);return o.displayedTime=this.displayedTime,o}async extendWithExpTelemetry(e){this.filtersAndExp.exp.addToTelemetry(this),this.filtersAndExp.filters.addToTelemetry(this)}static createEmptyConfigForTesting(){return new t({},{},0,{filters:new tI({}),exp:Af.createEmptyConfig()})}};function ZB(t,e,n,r){t.get(Nl).getReporter(t,e)?.sendTelemetryEvent(n,ir.maybeRemoveRepoInfoFromPropertiesHack(e,r.properties),r.measurements)}s(ZB,"sendTelemetryEvent");function dat(t,e,n,r){t.get(Nl).getReporter(t,e)?.sendTelemetryErrorEvent(n,ir.maybeRemoveRepoInfoFromPropertiesHack(e,r.properties),r.measurements)}s(dat,"sendTelemetryErrorEvent");function fat(t,e,n,r){t.get(Nl).getFTReporter(t)?.sendTelemetryEvent(n,ir.maybeRemoveRepoInfoFromPropertiesHack(e,r.properties),r.measurements)}s(fat,"sendFTTelemetryEvent");function RS(t){return{promptCharLen:t.prefix.length+(t.context?.reduce((e,n)=>e+n.length,0)??0),promptSuffixCharLen:t.suffix.length}}s(RS,"telemetrizePromptLength");function Ks(){return performance.now()}s(Ks,"now");function pat(t){return Math.floor(t/1e3)}s(pat,"nowSeconds");function JF(t){return t.get(sc).optedIn}s(JF,"shouldSendRestricted");function YEe(t){return t.get(sc).ftFlag!==""}s(YEe,"shouldSendFinetuningTelemetry");function kt(t,e,n,r){return t.get(ba).register(mat(t,e,Ks(),n?.extendedBy(),r))}s(kt,"telemetry");async function mat(t,e,n,r,i=0){let o=r||ir.createAndMarkAsIssued({},{});await o.makeReadyForSending(t,i??!1,"IncludeExp",n),(!SS(i)||JF(t))&&ZB(t,i,e,o),SS(i)&&iat.includes(e)&&YEe(t)&&fat(t,i,e,o)}s(mat,"_telemetry");function W7(t,e){return t.get(ba).register(hat(t,e,Ks()))}s(W7,"telemetryExpProblem");async function hat(t,e,n){let r="expProblem",i=ir.createAndMarkAsIssued(e,{});await i.makeReadyForSending(t,0,"SkipExp",n),ZB(t,0,r,i)}s(hat,"_telemetryExpProblem");function Hee(t,e,n,r){return t.get(ba).register(gat(t,e,n,r))}s(Hee,"telemetryRaw");async function gat(t,e,n,r){let i={...n,...KEe(t)};ZB(t,0,e,{properties:i,measurements:r})}s(gat,"_telemetryRaw");function KEe(t){let e=t.get(ur),n={unique_id:an(),common_extname:e.getEditorPluginInfo().name,common_extversion:e.getEditorPluginInfo().version,common_vscodeversion:og(e.getEditorInfo())},r=t.get(sc);return r.trackingId&&(n.copilot_trackingId=r.trackingId),r.organizationsList&&(n.organizations_list=r.organizationsList),r.enterpriseList&&(n.enterprise_list=r.enterpriseList),r.sku&&(n.sku=r.sku),n}s(KEe,"createRequiredProperties");var Wee=class extends Error{static{s(this,"CopilotNonError")}constructor(e){let n;try{n=JSON.stringify(e)}catch{n=String(e)}super(n),this.name="CopilotNonError",this.code=(0,YF.SHA256)(YF.enc.Utf16.parse(this.message)).toString().slice(0,16)}};function wa(t,e,n,r,i){return t.get(ba).register(JEe(t,e,Ks(),n,{...r},i))}s(wa,"telemetryException");async function JEe(t,e,n,r,i,o){let a;if(e instanceof Error){if(a=e,a.name==="Canceled"&&a.message==="Canceled"||a.name==="CodeExpectedError"||Fc(a)||a instanceof ls||a instanceof KF.ConnectionError||a instanceof KF.ResponseError)return}else{if(a=new Wee(e),e&&typeof e=="object"&&e.name==="ExitStatus")return;if(a.stack?.startsWith(`${a}
`)){let y=a.stack.slice(`${a}
`.length).split(`
`);/^\s*(?:at )?(?:\w+\.)*_telemetryException\b/.test(y[0]??"")&&y.shift(),/^\s*(?:at )?(?:\w+\.)*telemetryException\b/.test(y[0]??"")&&y.shift(),a.stack=`${a}
${y.join(`
`)}`}}let l=t.get(ur).getEditorInfo(),c;l.root&&(c=[{prefix:`${l.name}:`,path:l.root}]);let u=JF(t),d=Z1e(a,c,u),p=uat(a),m=p==="exception",h=ir.createAndMarkAsIssued({origin:r??"",type:a.name,code:`${a.code??""}`,reason:d.stack||d.toString(),message:d.message,...i});if(await h.makeReadyForSending(t,0,"IncludeExp",n),o?.exception_detail)for(let y of o.exception_detail)y.value&&(u?y.value=AX(y.value):y.value="[redacted]");if(o??=q1e(t,d),o.context={...o.context,"copilot_event.unique_id":h.properties.unique_id,"#restricted_telemetry":u?"true":"false"},r&&(o.context["#origin"]=r,o.transaction=r),o.rollup_id!=="auto"&&(h.properties.errno=o.rollup_id),o.created_at=new Date(h.issuedTime).toISOString(),u){let y=X1e(a,c),v=ir.createAndMarkAsIssued({origin:r??"",type:a.name,code:`${a.code??""}`,reason:y.stack||y.toString(),message:y.message,...i});o.rollup_id!=="auto"&&(v.properties.errno=o.rollup_id),await v.makeReadyForSending(t,1,"IncludeExp",n),v.properties.unique_id=h.properties.unique_id,h.properties.restricted_unique_id=v.properties.unique_id,ZB(t,1,`error.${p}`,v)}let g=o.rollup_id==="auto"?a.stack??"":o.rollup_id;m&&!t.get(sg).isThrottled(g)&&(h.properties.failbot_payload=JSON.stringify(o)),ZB(t,0,`error.${p}`,h)}s(JEe,"_telemetryException");function Eu(t,e,n,r){let i=s(async(...o)=>{try{await e(...o)}catch(a){await JEe(t,a,Ks(),n,r)}},"wrapped");return(...o)=>t.get(ba).register(i(...o))}s(Eu,"telemetryCatch");function yI(t,e,n,r){return t.get(ba).register(Aat(t,e,Ks(),n?.extendedBy(),r))}s(yI,"telemetryError");async function Aat(t,e,n,r,i=0){if(SS(i)&&!JF(t))return;let o=r||ir.createAndMarkAsIssued({},{});await o.makeReadyForSending(t,i,"IncludeExp",n),dat(t,i,e,o)}s(Aat,"_telemetryError");function XEe(t,e,n,r,i){let o=ir.createAndMarkAsIssued({completionTextJson:JSON.stringify(e),choiceIndex:i.toString()});if(n.logprobs)for(let[a,l]of Object.entries(n.logprobs))o.properties["logprobs_"+a]=JSON.stringify(l)??"unset";return o.extendWithRequestId(r),kt(t,"engine.completion",o,1)}s(XEe,"logEngineCompletion");function ZEe(t,e,n){let r={promptJson:JSON.stringify({prefix:e.prefix,context:e.context}),promptSuffixJson:JSON.stringify(e.suffix)};if(e.context){let o=n.properties["request.option.extra"]?JSON.parse(n.properties["request.option.extra"]):{};o.context=e.context,r["request.option.extra"]=JSON.stringify(o)}let i=n.extendedBy(r);return kt(t,"engine.prompt",i,1)}s(ZEe,"logEnginePrompt");f();f();var nIe=je(ri()),rIe=I.Object({accessToken:I.Optional(I.String({minLength:1})),handle:I.Optional(I.String({minLength:1})),githubAppId:I.Optional(I.String({minLength:1}))}),Gee;(n=>(n.method="github/didChangeAuth",n.type=new nIe.ProtocolNotificationType(n.method)))(Gee||={});f();var iIe=je(ri()),jee;(n=>(n.method="copilot/ipCodeCitation",n.type=new iIe.NotificationType(n.method)))(jee||={});f();var oIe=je(ri()),XF;(n=>(n.method="context/update",n.type=new oIe.ProtocolRequestType(n.method)))(XF||={});f();f();var qx="Cancelled";f();var wr=je(ri()),e8=I.String(),pd=I.Object({uri:e8}),xI=I.Intersect([pd,I.Object({version:I.Optional(I.Integer())})]),fmn=I.Required(xI),Ll=I.Object({line:I.Integer({minimum:0}),character:I.Integer({minimum:0})}),_a=I.Object({start:Ll,end:Ll}),Vee=I.Union([I.Integer(),I.String()]),pmn=I.Object({isCancellationRequested:I.Boolean(),onCancellationRequested:I.Any()});f();var sIe=je(ri()),$ee;(n=>(n.method="textDocument/didFocus",n.type=new sIe.ProtocolNotificationType(n.method)))($ee||={});f();var yat=I.Object({didChangeFeatureFlags:I.Boolean(),fetch:I.Boolean(),ipCodeCitation:I.Boolean(),redirectedTelemetry:I.Boolean(),related:I.Boolean(),token:I.Boolean(),watchedFiles:I.Boolean(),showPanelMessage:I.Boolean()}),Cat=I.Object({name:I.String(),version:I.String(),readableName:I.Optional(I.String())}),aIe=I.Object({name:I.String(),version:I.Optional(I.String()),readableName:I.Optional(I.String())}),lIe=I.Object({editorInfo:I.Optional(aIe),editorPluginInfo:I.Optional(aIe),relatedPluginInfo:I.Optional(I.Array(Cat)),copilotIntegrationId:I.Optional(I.String()),copilotCapabilities:I.Optional(I.Partial(yat)),githubAppId:I.Optional(I.String())});f();var t8=je(ri());var ZF=(n=>(n[n.Invoked=1]="Invoked",n[n.Automatic=2]="Automatic",n))(ZF||{}),xat=I.Enum(ZF),vat=I.Object({triggerKind:xat,selectedCompletionInfo:I.Optional(I.Object({text:I.String(),range:_a,tooltipSignature:I.Optional(I.String())}))}),cIe=I.Object({textDocument:xI,position:Ll,formattingOptions:I.Optional(I.Object({tabSize:I.Optional(I.Union([I.Integer({minimum:1}),I.String()])),insertSpaces:I.Optional(I.Union([I.Boolean(),I.String()]))})),context:vat,data:I.Optional(I.Unknown())}),zee;(n=>(n.method="textDocument/inlineCompletion",n.type=new t8.ProtocolRequestType(n.method)))(zee||={});var uIe=I.Object({command:I.Object({arguments:I.Tuple([I.String({minLength:1})])})}),dIe=I.Object({item:uIe}),Yee;(n=>(n.method="textDocument/didShowCompletion",n.type=new t8.ProtocolNotificationType(n.method)))(Yee||={});var fIe=I.Object({item:uIe,acceptedLength:I.Integer({minimum:1})}),Kee;(n=>(n.method="textDocument/didPartiallyAcceptCompletion",n.type=new t8.ProtocolNotificationType(n.method)))(Kee||={});f();var pIe=je(ri()),Jee;(n=>(n.method="textDocument/inlineCompletionPrompt",n.type=new pIe.ProtocolRequestType(n.method)))(Jee||={});f();var mIe=je(ri()),hIe=I.Object({textDocument:xI,position:Ll}),bat=I.Object({command:I.Object({arguments:I.Tuple([I.String({minLength:1})])})}),gIe=I.Object({item:bat}),Xee;(n=>(n.method="textDocument/didShowInlineEdit",n.type=new mIe.ProtocolNotificationType(n.method)))(Xee||={});f();var eM=je(ri());var AIe=I.Object({textDocument:xI,position:Ll,partialResultToken:I.Optional(Vee),workDoneToken:I.Optional(Vee)}),tM;(r=>(r.method="textDocument/copilotPanelCompletion",r.type=new eM.ProtocolRequestType(r.method),r.partialResult=new eM.ProgressType))(tM||={});f();var yIe=je(ri()),Zee;(n=>(n.method="copilot/related",n.type=new yIe.ProtocolRequestType(n.method)))(Zee||={});f();var CIe=je(ri()),ete;(n=>(n.method="statusNotification",n.type=new CIe.ProtocolNotificationType(n.method)))(ete||={});var xIe=je(require("events"));var Am=class{static{s(this,"CopilotTokenNotifier")}#e=new xIe.default;#t;constructor(){this.#e.setMaxListeners(20)}get lastToken(){return this.#t}emitToken(e){if(e.token!==this.#t?.token)return this.#t=e,this.emit("CopilotToken",e)}emit(e,...n){return this.#e.emit(e,...n)}on(e,n,r){let i=Eu(e,r,`event.${n}`);return this.#e.on(n,i),wr.Disposable.create(()=>this.#e.off(n,i))}};function ia(t,e){return t.get(Am).on(t,"CopilotToken",e)}s(ia,"onCopilotToken");function n8(t,e){return t.get(Am).emitToken(e)}s(n8,"emitCopilotToken");function vIe(t){return t.get(Am).lastToken}s(vIe,"getLastCopilotToken");f();var nM=class{constructor(e){this.userInfo=e}static{s(this,"CopilotUserInfoWrapper")}get sku(){return this.userInfo?.access_type_sku}get isFreeUser(){return this.sku==="free_limited_copilot"}get copilotPlan(){if(this.isFreeUser)return"free";let e=this.userInfo?.copilot_plan;switch(e){case"individual":case"individual_pro":case"business":case"enterprise":return e;default:return"individual"}}get quotaInfo(){return{quota_snapshots:this.userInfo?.quota_snapshots,quota_reset_date:this.userInfo?.quota_reset_date}}get raw(){return this.userInfo}};f();function tte(t){return["a5db0bcaae94032fe715fb34a5e4bce2","7184f66dfcee98cb5f08a1cb936d5225","faef89d9169d5eacf1d8c8dde3412e37","4535c7beffc844b46bb1ed4aa04d759a"].find(n=>t.includes(n))}s(tte,"findKnownOrg");function bIe(t){let e=t.organization_list??[];return tte(e)??""}s(bIe,"getUserKind");f();f();var vI=(i=>(i[i.DEBUG=4]="DEBUG",i[i.INFO=3]="INFO",i[i.WARN=2]="WARN",i[i.ERROR=1]="ERROR",i))(vI||{}),Va=class{static{s(this,"LogTarget")}},Ag=class{static{s(this,"TelemetryLogSender")}},Tt=class{constructor(e){this.category=e}static{s(this,"Logger")}log(e,n,...r){e.get(Va).logIt(e,n,this.category,...r)}debug(e,...n){this.log(e,4,...n)}info(e,...n){this.log(e,3,...n)}warn(e,...n){this.log(e,2,...n)}error(e,...n){e.get(Ag).sendError(e,this.category,...n),this.log(e,1,...n)}exception(e,n,r){if(n instanceof Error&&n.name==="Canceled"&&n.message==="Canceled")return;let i=r;r.startsWith(".")&&(i=r.substring(1),r=`${this.category}${r}`),e.get(Ag).sendException(e,n,r);let o=n instanceof Error?n:new Error(`Non-error thrown: ${String(n)}`);this.log(e,1,`${i}:`,o)}},or=new Tt("default");f();var $a=class{static{s(this,"NotificationSender")}async showWarningMessageOnlyOnce(e,n,...r){return this.showWarningMessage(n,...r)}};f();var pc=class{static{s(this,"UrlOpener")}};var Eat=["UNABLE_TO_VERIFY_LEAF_SIGNATURE","CERT_SIGNATURE_FAILURE"],EIe="Your proxy connection requires a trusted certificate. Please make sure the proxy certificate and any issuers are configured correctly and trusted by your operating system.",IIe="https://gh.io/copilot-network-errors",Iu=class{constructor(){this.notifiedErrorCodes=[]}static{s(this,"UserErrorNotifier")}notifyUser(e,n){if(!(n instanceof Error))return;let r=n;r.code&&Eat.includes(r.code)&&!this.didNotifyBefore(r.code)&&(this.notifiedErrorCodes.push(r.code),this.displayCertificateErrorNotification(e,r))}async displayCertificateErrorNotification(e,n){new Tt("certificates").error(e,`${EIe} Please visit ${IIe} to learn more. Original cause:`,n);let r={title:"Learn more"};return e.get($a).showWarningMessage(EIe,r).then(i=>{if(i?.title===r.title)return e.get(pc).open(IIe)})}didNotifyBefore(e){return this.notifiedErrorCodes.indexOf(e)!==-1}};f();f();function rM(){return typeof process>"u"}s(rM,"isWeb");var nte=class extends rg{static{s(this,"ProxiedResponseError")}constructor(e){super(e,`HTTP ${e.status} response does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`)}};async function Bf(t,e,n,r={}){r={...r,headers:{Authorization:`Bearer ${e.accessToken}`,...rM()?{}:n0(t),...r.headers}};let i=await t.get(Kr).fetch(new URL(n,e.apiUrl).href,r);if(i.status>=500)throw new rg(i);if(!i.headers.get("x-github-request-id"))throw new nte(i);return i}s(Bf,"apiFetch");f();f();var _Ie=require("os"),oM=require("path");f();var TIe;(()=>{"use strict";var t={975:G=>{function W(V){if(typeof V!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(V))}s(W,"e");function ue(V,O){for(var Y,te="",pe=0,ee=-1,ce=0,me=0;me<=V.length;++me){if(me<V.length)Y=V.charCodeAt(me);else{if(Y===47)break;Y=47}if(Y===47){if(!(ee===me-1||ce===1))if(ee!==me-1&&ce===2){if(te.length<2||pe!==2||te.charCodeAt(te.length-1)!==46||te.charCodeAt(te.length-2)!==46){if(te.length>2){var Ne=te.lastIndexOf("/");if(Ne!==te.length-1){Ne===-1?(te="",pe=0):pe=(te=te.slice(0,Ne)).length-1-te.lastIndexOf("/"),ee=me,ce=0;continue}}else if(te.length===2||te.length===1){te="",pe=0,ee=me,ce=0;continue}}O&&(te.length>0?te+="/..":te="..",pe=2)}else te.length>0?te+="/"+V.slice(ee+1,me):te=V.slice(ee+1,me),pe=me-ee-1;ee=me,ce=0}else Y===46&&ce!==-1?++ce:ce=-1}return te}s(ue,"r");var ie={resolve:s(function(){for(var V,O="",Y=!1,te=arguments.length-1;te>=-1&&!Y;te--){var pe;te>=0?pe=arguments[te]:(V===void 0&&(V=process.cwd()),pe=V),W(pe),pe.length!==0&&(O=pe+"/"+O,Y=pe.charCodeAt(0)===47)}return O=ue(O,!Y),Y?O.length>0?"/"+O:"/":O.length>0?O:"."},"resolve"),normalize:s(function(V){if(W(V),V.length===0)return".";var O=V.charCodeAt(0)===47,Y=V.charCodeAt(V.length-1)===47;return(V=ue(V,!O)).length!==0||O||(V="."),V.length>0&&Y&&(V+="/"),O?"/"+V:V},"normalize"),isAbsolute:s(function(V){return W(V),V.length>0&&V.charCodeAt(0)===47},"isAbsolute"),join:s(function(){if(arguments.length===0)return".";for(var V,O=0;O<arguments.length;++O){var Y=arguments[O];W(Y),Y.length>0&&(V===void 0?V=Y:V+="/"+Y)}return V===void 0?".":ie.normalize(V)},"join"),relative:s(function(V,O){if(W(V),W(O),V===O||(V=ie.resolve(V))===(O=ie.resolve(O)))return"";for(var Y=1;Y<V.length&&V.charCodeAt(Y)===47;++Y);for(var te=V.length,pe=te-Y,ee=1;ee<O.length&&O.charCodeAt(ee)===47;++ee);for(var ce=O.length-ee,me=pe<ce?pe:ce,Ne=-1,Se=0;Se<=me;++Se){if(Se===me){if(ce>me){if(O.charCodeAt(ee+Se)===47)return O.slice(ee+Se+1);if(Se===0)return O.slice(ee+Se)}else pe>me&&(V.charCodeAt(Y+Se)===47?Ne=Se:Se===0&&(Ne=0));break}var Je=V.charCodeAt(Y+Se);if(Je!==O.charCodeAt(ee+Se))break;Je===47&&(Ne=Se)}var Me="";for(Se=Y+Ne+1;Se<=te;++Se)Se!==te&&V.charCodeAt(Se)!==47||(Me.length===0?Me+="..":Me+="/..");return Me.length>0?Me+O.slice(ee+Ne):(ee+=Ne,O.charCodeAt(ee)===47&&++ee,O.slice(ee))},"relative"),_makeLong:s(function(V){return V},"_makeLong"),dirname:s(function(V){if(W(V),V.length===0)return".";for(var O=V.charCodeAt(0),Y=O===47,te=-1,pe=!0,ee=V.length-1;ee>=1;--ee)if((O=V.charCodeAt(ee))===47){if(!pe){te=ee;break}}else pe=!1;return te===-1?Y?"/":".":Y&&te===1?"//":V.slice(0,te)},"dirname"),basename:s(function(V,O){if(O!==void 0&&typeof O!="string")throw new TypeError('"ext" argument must be a string');W(V);var Y,te=0,pe=-1,ee=!0;if(O!==void 0&&O.length>0&&O.length<=V.length){if(O.length===V.length&&O===V)return"";var ce=O.length-1,me=-1;for(Y=V.length-1;Y>=0;--Y){var Ne=V.charCodeAt(Y);if(Ne===47){if(!ee){te=Y+1;break}}else me===-1&&(ee=!1,me=Y+1),ce>=0&&(Ne===O.charCodeAt(ce)?--ce==-1&&(pe=Y):(ce=-1,pe=me))}return te===pe?pe=me:pe===-1&&(pe=V.length),V.slice(te,pe)}for(Y=V.length-1;Y>=0;--Y)if(V.charCodeAt(Y)===47){if(!ee){te=Y+1;break}}else pe===-1&&(ee=!1,pe=Y+1);return pe===-1?"":V.slice(te,pe)},"basename"),extname:s(function(V){W(V);for(var O=-1,Y=0,te=-1,pe=!0,ee=0,ce=V.length-1;ce>=0;--ce){var me=V.charCodeAt(ce);if(me!==47)te===-1&&(pe=!1,te=ce+1),me===46?O===-1?O=ce:ee!==1&&(ee=1):O!==-1&&(ee=-1);else if(!pe){Y=ce+1;break}}return O===-1||te===-1||ee===0||ee===1&&O===te-1&&O===Y+1?"":V.slice(O,te)},"extname"),format:s(function(V){if(V===null||typeof V!="object")throw new TypeError('The "pathObject" argument must be of type Object. Received type '+typeof V);return function(O,Y){var te=Y.dir||Y.root,pe=Y.base||(Y.name||"")+(Y.ext||"");return te?te===Y.root?te+pe:te+"/"+pe:pe}(0,V)},"format"),parse:s(function(V){W(V);var O={root:"",dir:"",base:"",ext:"",name:""};if(V.length===0)return O;var Y,te=V.charCodeAt(0),pe=te===47;pe?(O.root="/",Y=1):Y=0;for(var ee=-1,ce=0,me=-1,Ne=!0,Se=V.length-1,Je=0;Se>=Y;--Se)if((te=V.charCodeAt(Se))!==47)me===-1&&(Ne=!1,me=Se+1),te===46?ee===-1?ee=Se:Je!==1&&(Je=1):ee!==-1&&(Je=-1);else if(!Ne){ce=Se+1;break}return ee===-1||me===-1||Je===0||Je===1&&ee===me-1&&ee===ce+1?me!==-1&&(O.base=O.name=ce===0&&pe?V.slice(1,me):V.slice(ce,me)):(ce===0&&pe?(O.name=V.slice(1,ee),O.base=V.slice(1,me)):(O.name=V.slice(ce,ee),O.base=V.slice(ce,me)),O.ext=V.slice(ee,me)),ce>0?O.dir=V.slice(0,ce-1):pe&&(O.dir="/"),O},"parse"),sep:"/",delimiter:":",win32:null,posix:null};ie.posix=ie,G.exports=ie}},e={};function n(G){var W=e[G];if(W!==void 0)return W.exports;var ue=e[G]={exports:{}};return t[G](ue,ue.exports,n),ue.exports}s(n,"r"),n.d=(G,W)=>{for(var ue in W)n.o(W,ue)&&!n.o(G,ue)&&Object.defineProperty(G,ue,{enumerable:!0,get:W[ue]})},n.o=(G,W)=>Object.prototype.hasOwnProperty.call(G,W),n.r=G=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(G,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(G,"__esModule",{value:!0})};var r={};let i;n.r(r),n.d(r,{URI:s(()=>m,"URI"),Utils:s(()=>ae,"Utils")}),typeof process=="object"?i=process.platform==="win32":typeof navigator=="object"&&(i=navigator.userAgent.indexOf("Windows")>=0);let o=/^\w[\w\d+.-]*$/,a=/^\//,l=/^\/\//;function c(G,W){if(!G.scheme&&W)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${G.authority}", path: "${G.path}", query: "${G.query}", fragment: "${G.fragment}"}`);if(G.scheme&&!o.test(G.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(G.path){if(G.authority){if(!a.test(G.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(l.test(G.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(c,"a");let u="",d="/",p=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/;class m{static{s(this,"l")}static isUri(W){return W instanceof m||!!W&&typeof W.authority=="string"&&typeof W.fragment=="string"&&typeof W.path=="string"&&typeof W.query=="string"&&typeof W.scheme=="string"&&typeof W.fsPath=="string"&&typeof W.with=="function"&&typeof W.toString=="function"}scheme;authority;path;query;fragment;constructor(W,ue,ie,V,O,Y=!1){typeof W=="object"?(this.scheme=W.scheme||u,this.authority=W.authority||u,this.path=W.path||u,this.query=W.query||u,this.fragment=W.fragment||u):(this.scheme=function(te,pe){return te||pe?te:"file"}(W,Y),this.authority=ue||u,this.path=function(te,pe){switch(te){case"https":case"http":case"file":pe?pe[0]!==d&&(pe=d+pe):pe=d}return pe}(this.scheme,ie||u),this.query=V||u,this.fragment=O||u,c(this,Y))}get fsPath(){return E(this,!1)}with(W){if(!W)return this;let{scheme:ue,authority:ie,path:V,query:O,fragment:Y}=W;return ue===void 0?ue=this.scheme:ue===null&&(ue=u),ie===void 0?ie=this.authority:ie===null&&(ie=u),V===void 0?V=this.path:V===null&&(V=u),O===void 0?O=this.query:O===null&&(O=u),Y===void 0?Y=this.fragment:Y===null&&(Y=u),ue===this.scheme&&ie===this.authority&&V===this.path&&O===this.query&&Y===this.fragment?this:new g(ue,ie,V,O,Y)}static parse(W,ue=!1){let ie=p.exec(W);return ie?new g(ie[2]||u,N(ie[4]||u),N(ie[5]||u),N(ie[7]||u),N(ie[9]||u),ue):new g(u,u,u,u,u)}static file(W){let ue=u;if(i&&(W=W.replace(/\\/g,d)),W[0]===d&&W[1]===d){let ie=W.indexOf(d,2);ie===-1?(ue=W.substring(2),W=d):(ue=W.substring(2,ie),W=W.substring(ie)||d)}return new g("file",ue,W,u,u)}static from(W){let ue=new g(W.scheme,W.authority,W.path,W.query,W.fragment);return c(ue,!0),ue}toString(W=!1){return _(this,W)}toJSON(){return this}static revive(W){if(W){if(W instanceof m)return W;{let ue=new g(W);return ue._formatted=W.external,ue._fsPath=W._sep===h?W.fsPath:null,ue}}return W}}let h=i?1:void 0;class g extends m{static{s(this,"d")}_formatted=null;_fsPath=null;get fsPath(){return this._fsPath||(this._fsPath=E(this,!1)),this._fsPath}toString(W=!1){return W?_(this,!0):(this._formatted||(this._formatted=_(this,!1)),this._formatted)}toJSON(){let W={$mid:1};return this._fsPath&&(W.fsPath=this._fsPath,W._sep=h),this._formatted&&(W.external=this._formatted),this.path&&(W.path=this.path),this.scheme&&(W.scheme=this.scheme),this.authority&&(W.authority=this.authority),this.query&&(W.query=this.query),this.fragment&&(W.fragment=this.fragment),W}}let y={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function v(G,W,ue){let ie,V=-1;for(let O=0;O<G.length;O++){let Y=G.charCodeAt(O);if(Y>=97&&Y<=122||Y>=65&&Y<=90||Y>=48&&Y<=57||Y===45||Y===46||Y===95||Y===126||W&&Y===47||ue&&Y===91||ue&&Y===93||ue&&Y===58)V!==-1&&(ie+=encodeURIComponent(G.substring(V,O)),V=-1),ie!==void 0&&(ie+=G.charAt(O));else{ie===void 0&&(ie=G.substr(0,O));let te=y[Y];te!==void 0?(V!==-1&&(ie+=encodeURIComponent(G.substring(V,O)),V=-1),ie+=te):V===-1&&(V=O)}}return V!==-1&&(ie+=encodeURIComponent(G.substring(V))),ie!==void 0?ie:G}s(v,"m");function b(G){let W;for(let ue=0;ue<G.length;ue++){let ie=G.charCodeAt(ue);ie===35||ie===63?(W===void 0&&(W=G.substr(0,ue)),W+=y[ie]):W!==void 0&&(W+=G[ue])}return W!==void 0?W:G}s(b,"y");function E(G,W){let ue;return ue=G.authority&&G.path.length>1&&G.scheme==="file"?`//${G.authority}${G.path}`:G.path.charCodeAt(0)===47&&(G.path.charCodeAt(1)>=65&&G.path.charCodeAt(1)<=90||G.path.charCodeAt(1)>=97&&G.path.charCodeAt(1)<=122)&&G.path.charCodeAt(2)===58?W?G.path.substr(1):G.path[1].toLowerCase()+G.path.substr(2):G.path,i&&(ue=ue.replace(/\//g,"\\")),ue}s(E,"v");function _(G,W){let ue=W?b:v,ie="",{scheme:V,authority:O,path:Y,query:te,fragment:pe}=G;if(V&&(ie+=V,ie+=":"),(O||V==="file")&&(ie+=d,ie+=d),O){let ee=O.indexOf("@");if(ee!==-1){let ce=O.substr(0,ee);O=O.substr(ee+1),ee=ce.lastIndexOf(":"),ee===-1?ie+=ue(ce,!1,!1):(ie+=ue(ce.substr(0,ee),!1,!1),ie+=":",ie+=ue(ce.substr(ee+1),!1,!0)),ie+="@"}O=O.toLowerCase(),ee=O.lastIndexOf(":"),ee===-1?ie+=ue(O,!1,!0):(ie+=ue(O.substr(0,ee),!1,!0),ie+=O.substr(ee))}if(Y){if(Y.length>=3&&Y.charCodeAt(0)===47&&Y.charCodeAt(2)===58){let ee=Y.charCodeAt(1);ee>=65&&ee<=90&&(Y=`/${String.fromCharCode(ee+32)}:${Y.substr(3)}`)}else if(Y.length>=2&&Y.charCodeAt(1)===58){let ee=Y.charCodeAt(0);ee>=65&&ee<=90&&(Y=`${String.fromCharCode(ee+32)}:${Y.substr(2)}`)}ie+=ue(Y,!0,!1)}return te&&(ie+="?",ie+=ue(te,!1,!1)),pe&&(ie+="#",ie+=W?pe:v(pe,!1,!1)),ie}s(_,"b");function k(G){try{return decodeURIComponent(G)}catch{return G.length>3?G.substr(0,3)+k(G.substr(3)):G}}s(k,"C");let P=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function N(G){return G.match(P)?G.replace(P,W=>k(W)):G}s(N,"w");var U=n(975);let ne=U.posix||U,he="/";var ae;(function(G){G.joinPath=function(W,...ue){return W.with({path:ne.join(W.path,...ue)})},G.resolvePath=function(W,...ue){let ie=W.path,V=!1;ie[0]!==he&&(ie=he+ie,V=!0);let O=ne.resolve(ie,...ue);return V&&O[0]===he&&!W.authority&&(O=O.substring(1)),W.with({path:O})},G.dirname=function(W){if(W.path.length===0||W.path===he)return W;let ue=ne.dirname(W.path);return ue.length===1&&ue.charCodeAt(0)===46&&(ue=""),W.with({path:ue})},G.basename=function(W){return ne.basename(W.path)},G.extname=function(W){return ne.extname(W.path)}})(ae||(ae={})),TIe=r})();var{URI:Wx,Utils:iM}=TIe;function SIe(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substring(0,3)+SIe(t.substring(3)):t}}s(SIe,"decodeURIComponentGraceful");var wIe=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function rte(t){return t.match(wIe)?t.replace(wIe,e=>SIe(e)):t}s(rte,"percentDecode");function pl(t){if(/^[A-Za-z][A-Za-z0-9+.-]+:/.test(t))throw new Error("Path must not contain a scheme");if(!t)throw new Error("Path must not be empty");return Wx.file(t).toString()}s(pl,"makeFsUri");function kS(t){if(typeof t!="string"&&(t=t.uri),/^[A-Za-z]:\\/.test(t))throw new Error(`Could not parse <${t}>: Windows-style path`);try{let e=t.match(/^(?:([^:/?#]+?:)?\/\/)(\/\/.*)$/);return e?Wx.parse(e[1]+e[2],!0):Wx.parse(t,!0)}catch(e){throw new Error(`Could not parse <${t}>`,{cause:e})}}s(kS,"parseUri");function RIe(t){return kS(t),t}s(RIe,"validateUri");function mc(t){try{return kS(t).toString()}catch{return t}}s(mc,"normalizeUri");var kIe=new Set(["file","notebook","vscode-notebook","vscode-notebook-cell"]);function aa(t){let e=kS(t);if(!kIe.has(e.scheme))throw new Error(`Copilot currently does not support URI with scheme: ${e.scheme}`);if((0,_Ie.platform)()==="win32"){let n=e.path;return e.authority?n=`//${e.authority}${e.path}`:/^\/[A-Za-z]:/.test(n)&&(n=n.substring(1)),(0,oM.normalize)(n)}else{if(e.authority)throw new Error("Unsupported remote file path");return e.path}}s(aa,"fsPath");function Ho(t){try{return aa(t)}catch{return}}s(Ho,"getFsPath");function BIe(t){let e=Ho(t);if(e)return Wx.file(e).toString()}s(BIe,"getFsUri");function bI(t,...e){let n,r=Ho(t);return r?n=pl((0,oM.resolve)(r,...e)):n=iM.resolvePath(kS(t),...e.map(i=>PIe(i))).toString(),typeof t=="string"?n:{uri:n}}s(bI,"resolveFilePath");function ko(t,...e){let n=iM.joinPath(kS(t),...e.map(PIe)).toString();return typeof t=="string"?n:{uri:n}}s(ko,"joinPath");function PIe(t){return Iat(t)?t.replaceAll("\\","/"):t}s(PIe,"pathToURIPath");function Iat(t){return/^[^/\\]*\\/.test(t)}s(Iat,"isWinPath");function Ti(t){return rte((typeof t=="string"?t:t.uri).replace(/[#?].*$/,"").replace(/\/$/,"").replace(/^.*[/:]/,""))}s(Ti,"basename");function p0(t){let e=iM.dirname(kS(t)),n;return kIe.has(e.scheme)&&e.scheme!=="file"?n=e.with({scheme:"file",fragment:""}).toString():n=e.toString(),typeof t=="string"?n:{uri:n}}s(p0,"dirname");var Tu=class{static{s(this,"NetworkConfiguration")}};function sM(t,e){try{let n=new URL(e??"");if(n.protocol==="https:"||!ote(t)&&n.protocol==="http:")return n.href}catch{}}s(sM,"ensurePermittedUrl");var r8={api:"https://api.githubcopilot.com",proxy:"https://copilot-proxy.githubusercontent.com",telemetry:"https://copilot-telemetry.githubusercontent.com","origin-tracker":"https://origin-tracker.githubusercontent.com"};function ite(t,e,n){if(n&&tm(t)){for(let r of n){let i=Ai(t,r);if(i)return i}return}for(let r of e){let i=Ai(t,r);if(i)return i}}s(ite,"urlConfigOverride");function Tat(t,e){switch(e){case"api":return ite(t,[wt.DebugOverrideCapiUrl,wt.DebugOverrideCapiUrlLegacy],[wt.DebugTestOverrideCapiUrl,wt.DebugTestOverrideCapiUrlLegacy]);case"proxy":return ite(t,[wt.DebugOverrideProxyUrl,wt.DebugOverrideProxyUrlLegacy],[wt.DebugTestOverrideProxyUrl,wt.DebugTestOverrideProxyUrlLegacy]);case"origin-tracker":if(!ote(t))return ite(t,[wt.DebugSnippyOverrideUrl])}}s(Tat,"getEndpointOverrideUrl");function Hx(t,e,n,...r){let i=Tat(t,n)??e.endpoints[n];return ko(i,...r)}s(Hx,"getEndpointUrl");function aM(t){return vIe(t)?.endpoints??r8}s(aM,"getLastKnownEndpoints");function DIe(t,e){if(e&&!sM(t,e)){t.get($a).showWarningMessage(`Ignoring invalid or unsupported authentication URL "${e}".`);return}t.get(Tu).setConfiguredUrls(t,{serverUrl:e})}s(DIe,"updateServerUrl");var m0=new Tt("auth"),FIe=60;function Gx(t){let e=t.serverUrl?.match(/^https?:\/\//)?t.serverUrl:"",n=t.apiUrl?.match(/^https?:\/\//)?t.apiUrl:"";return e?n||=e.replace("://","://api."):n?.includes("://api.")&&(e||=n.replace("://api.","://")),(!e||!n)&&(e="https://github.com/",n="https://api.github.com/"),{apiUrl:n,serverUrl:e}}s(Gx,"fillGitHubUrls");function NIe(){return Math.floor(Date.now()/1e3)}s(NIe,"nowSeconds");async function lM(t,e){let n=ir.createAndMarkAsIssued({},{});kt(t,"auth.new_login");let r=await wat(t,e),i=await r.json(),o=i.user_notification;if(LIe(t,o,e),r.status===401){let d="Failed to get copilot token due to 401 status. Please sign out and try again.";return m0.info(t,d),yI(t,"auth.unknown_401",n),{kind:"failure",reason:"HTTP401",message:d,envelope:i}}if(!r.ok||!i.token){m0.info(t,`Invalid copilot token: missing token: ${r.status} ${r.statusText}`),yI(t,"auth.invalid_token",n.extendedBy({status:r.status.toString(),status_text:r.statusText}));let d=i.error_details;return d?.notification_id!=="not_signed_up"&&LIe(t,d,e),{kind:"failure",reason:"NotAuthorized",message:"User not authorized",envelope:i,...d}}let a=i.expires_at;i.expires_at=NIe()+i.refresh_in+FIe;let l=await ste(t,e),c;l.ok&&(c=await l.json());let u=new EI(i,c);return n8(t,u),kt(t,"auth.new_token",n.extendedBy({},{adjusted_expires_at:i.expires_at,expires_at:a,current_time:NIe()})),{kind:"success",copilotToken:u}}s(lM,"authFromGitHubSession");async function wat(t,e){let n={"X-GitHub-Api-Version":"2024-12-15"},r=e.devOverride?.copilotTokenUrl??"copilot_internal/v2/token";try{return await Bf(t,e,r,{timeout:12e4,headers:n})}catch(i){throw t.get(Iu).notifyUser(t,i),i}}s(wat,"fetchCopilotToken");async function ste(t,e){let n={"X-GitHub-Api-Version":ig},r=e.devOverride?.copilotUserInfoUrl??"copilot_internal/user";try{return await Bf(t,e,r,{timeout:12e4,headers:n})}catch(i){throw t.get(Iu).notifyUser(t,i),i}}s(ste,"fetchCopilotUserInfo");function LIe(t,e,n){e&&t.get($a).showWarningMessageOnlyOnce(e.notification_id,e.message,{title:e.title},{title:"Dismiss"}).then(async r=>{let i=r?.title===e.title,o=i||r?.title==="Dismiss";if(i){let a=t.get(ur).getEditorPluginInfo(),l=e.url.replace("{EDITOR}",encodeURIComponent(a.name+"_"+a.version));await t.get(pc).open(l)}e.notification_id&&o&&await _at(t,e.notification_id,n)}).catch(r=>{m0.exception(t,r,"copilotToken.notification")})}s(LIe,"notifyUser");async function _at(t,e,n){let r=n.devOverride?.notificationUrl??"copilot_internal/notification",i=await Bf(t,n,r,{method:"POST",body:JSON.stringify({notification_id:e})});(!i||!i.ok)&&m0.error(t,`Failed to send notification result to GitHub: ${i?.status} ${i?.statusText}`)}s(_at,"sendNotificationResultToGitHub");var EI=class{constructor(e,n){this.envelope=e;this.token=e.token,this.organization_list=e.organization_list,this.enterprise_list=e.enterprise_list,this.tokenMap=this.parseToken(this.token),this.userInfo=new nM(n)}static{s(this,"CopilotToken")}get endpoints(){return this.envelope.endpoints??r8}needsRefresh(){return(this.envelope.expires_at-FIe)*1e3<Date.now()}isExpired(){return this.envelope.expires_at*1e3<Date.now()}get hasKnownOrg(){return tte(this.organization_list||[])!==void 0}parseToken(e){let n=new Map,i=(e??"").split(":")[0].split(";");for(let o of i){let[a,l]=o.split("=");n.set(a,l)}return n}getTokenValue(e){return this.tokenMap.get(e)}getTokenValues(){return Object.fromEntries(this.tokenMap)}};f();f();var i8="apps",ate="hosts",II=class{constructor(e,n){this.ctx=e;this.persistenceManager=n}static{s(this,"AuthPersistence")}async getAuthRecord(e){let n=this.getAuthAuthority(e),r=e.githubAppId,i=await this.persistenceManager.read(i8,this.authRecordKey(this.ctx,{authAuthority:n,githubAppId:r}));if(!r&&!i?(r=ym,i=await this.persistenceManager.read(i8,this.authRecordKey(this.ctx,{authAuthority:n,githubAppId:r}))):r??=this.ctx.get(Fl).findAppIdToAuthenticate(),i){let o={...i,oauth_token:i.access_token||i.oauth_token,user:i.login||i.user,githubAppId:r,authAuthority:n};if(o.oauth_token&&o.user)return o}return await this.legacyAuthRecordMaybe(n)}async legacyAuthRecordMaybe(e){let n=await this.persistenceManager.read(ate,e);if(n)return{...n,githubAppId:ym}}async saveAuthRecord(e){await this.persistenceManager.update(i8,this.authRecordKey(this.ctx,e),{user:e.user,oauth_token:e.oauth_token,githubAppId:e.githubAppId,dev_override:e.dev_override})}async deleteAuthRecord(e){let n=this.getAuthAuthority(e),r=await this.getAuthRecord({authAuthority:n});r&&(r.githubAppId===ym&&await this.persistenceManager.delete(ate,n),await this.persistenceManager.delete(i8,this.authRecordKey(this.ctx,{authAuthority:n})),await this.persistenceManager.delete(i8,this.authRecordKey(this.ctx,{authAuthority:n,githubAppId:ym})))}async purgeLegacyAuthRecords(){await this.persistenceManager.deleteSetting(ate)}authRecordKey(e,n){let r=n.githubAppId??e.get(Fl).findAppIdToAuthenticate();return`${this.getAuthAuthority(n)}:${r}`}getAuthAuthority(e){return e.authAuthority}};f();f();var qIe=je(QIe()),WIe=je(UIe()),h0=je(require("os"));var BS=class{constructor(e,n,r,i,o=!1){this.ctx=e;this.namespace=n;this.includeAuthorizationHeader=o;this.onCopilotToken=s(e=>{this.token=e;let n=e.getTokenValue("tid");n!==void 0&&(this.tags["ai.user.id"]=n)},"onCopilotToken");this.xhrOverride={sendPOST:s((e,n)=>{if(typeof e.data!="string")throw new Error(`AppInsightsReporter only supports string payloads, received ${typeof e.data}`);let r=e.headers??{};r["Content-Type"]="application/json",this.includeAuthorizationHeader&&this.token&&(r.Authorization=`Bearer ${this.token.token}`);let i={method:"POST",headers:r,body:e.data};this.ctx.get(Kr).fetch(e.urlString,i).then(o=>o.text().then(a=>{n(o.status,Object.fromEntries(o.headers),a)})).catch(o=>{or.debug(this.ctx,"Error sending telemetry",o),n(0,{})})},"sendPOST")};this.client=new WIe.ApplicationInsights({instrumentationKey:i,disableAjaxTracking:!0,disableExceptionTracking:!0,disableFetchTracking:!0,disableCorrelationHeaders:!0,disableCookiesUsage:!0,autoTrackPageVisitTime:!1,emitLineDelimitedJson:!1,disableInstrumentationKeyValidation:!0,endpointUrl:r,extensionConfig:{[qIe.BreezeChannelIdentifier]:{alwaysUseXhrOverride:!0,httpXHROverride:this.xhrOverride}}}),this.tags=Sat(e),this.commonProperties=Rat(e),this.#e=ia(e,this.onCopilotToken)}static{s(this,"AppInsightsReporter")}#e;sendTelemetryEvent(e,n,r){n={...n,...this.commonProperties};let i=this.qualifyEventName(e);this.client.track({name:i,tags:this.tags,data:{...n,...r},baseType:"EventData",baseData:{name:i,properties:n,measurements:r}})}sendTelemetryErrorEvent(e,n,r){this.sendTelemetryEvent(this.qualifyEventName(e),n,r)}async dispose(){this.#e.dispose(),await this.client.unload(!0,void 0,200)}qualifyEventName(e){return e.startsWith(this.namespace)?e:`${this.namespace}/${e}`}};function Sat(t){let e={},n=t.get(Ps);e["ai.session.id"]=n.sessionId;let r=t.get(sc);return r.trackingId&&(e["ai.user.id"]=r.trackingId),e["ai.cloud.roleInstance"]="REDACTED",e["ai.device.osVersion"]=`${h0.type()} ${h0.release()}`,e["ai.device.osArchitecture"]=h0.arch(),e["ai.device.osPlatform"]=h0.platform(),e["ai.cloud.role"]="Web",e["ai.application.ver"]=t.get(zi).getVersion(),e}s(Sat,"getTags");function Rat(t){let e={};e.common_os=h0.platform(),e.common_platformversion=h0.release(),e.common_arch=h0.arch(),e.common_cpu=Array.from(new Set(h0.cpus().map(r=>r.model))).join();let n=t.get(Ps);return e.common_vscodemachineid=n.machineId,e.common_vscodesessionid=n.sessionId,e.common_uikind=n.uiKind,e.common_remotename=n.remoteName,e.common_isnewappinstall="",e}s(Rat,"getCommonProperties");var kat="7d7048df-6dd0-4048-bb23-b716c1461f8f",Bat="3fdd7f28-937a-48c8-9a21-ba337db23bd1",Pat="f0000000-0000-0000-0000-000000000000";function HIe(t){return new URL(t).hostname==="github.com"?r8.telemetry:t.replace("://","://copilot-telemetry-service.")}s(HIe,"getEndpointForServerUrl");var md=class{constructor(e,n){this.ctx=e;this.namespace=n;this.serverUrl="https://github.com/";this.rootUrl=HIe(this.serverUrl);this.shuttingDown=new Set;ia(e,r=>this.updateServiceEndpoints(r.endpoints))}static{s(this,"TelemetryInitialization")}get endpointUrl(){return this.overrideEndpointUrlForTesting||new URL("telemetry",this.rootUrl).href}get isInitialized(){return this.initializedWith!==void 0}get isEnabled(){return this._enabled??!1}initialize(e){let n=this.ctx;this._enabled=e;let r=this.endpointUrl;if(!(this.initializedWith?.enabled===this._enabled&&this.initializedWith?.endpointUrl===this.endpointUrl)&&(this.shutdownWithoutWaiting(),this.initializedWith={endpointUrl:r,enabled:this._enabled},e)){let i=n.get(Nl);i.setReporter(new BS(n,this.namespace,r,kat)),i.setRestrictedReporter(new BS(n,this.namespace,r,Bat)),i.setFTReporter(new BS(n,this.namespace,r,Pat,!0))}}async shutdown(){this.shutdownWithoutWaiting(),await Promise.all(this.shuttingDown)}shutdownWithoutWaiting(){this.initializedWith=void 0;let e=this.ctx.get(Nl).deactivate().finally(()=>{this.shuttingDown.delete(e)});this.shuttingDown.add(e)}updateSessionConfig(e){e?.serverUrl&&e.serverUrl!==this.serverUrl&&(this.serverUrl=e.serverUrl,this.rootUrl=HIe(e.serverUrl)),this.isInitialized&&this.initialize(this._enabled)}updateServiceEndpoints(e){this.rootUrl=e.telemetry,this.isInitialized&&this.initialize(this._enabled)}};var _r=class{constructor(e,n){this.ctx=e;this.env=n;this.pendingSignIn=void 0}static{s(this,"AuthManager")}#e;get _copilotTokenManager(){return this.ctx.get(Gn)}get authPersistence(){return this.ctx.get(II)}getConfiguredUrls(){return this.ctx.get(Tu).getConfiguredUrls()}getAuthAuthority(){return new URL(this.getConfiguredUrls().serverUrl).hostname}async checkAndUpdateStatus(e){let n=e?.localChecksOnly??!1,r;return e?.githubAppId!==void 0?r=await this.getPersistedSession(e):r=await this.getSession(),r===void 0?(this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken(),{status:"NotSignedIn"}):n?{status:"MaybeOK",user:r.login}:(e?.forceRefresh&&this._copilotTokenManager.resetToken(),{status:await this.getTokenWithSignUpLimited(r,e?.freshSignIn??!1),user:r.login})}async getTokenWithSignUpLimited(e,n){try{await this._copilotTokenManager.getToken()}catch(r){if(r instanceof Pf)return n&&r.result.envelope?.can_signup_for_limited&&await this.signUpLimited(e)?this.getTokenWithSignUpLimited(e,!1):r.result.reason==="HTTP401"?"NotSignedIn":r.result.reason;throw r}return"OK"}async getSession({authAuthority:e}={}){let n=Dat(this.env)??this.#e;if(n!==null){if(n){let r={...n,...Gx(n)};if(!e||e===new URL(r.serverUrl).hostname)return r}return await this.getPersistedSession()}}async getPersistedSession(e){let n=await this.authPersistence.getAuthRecord({...e,authAuthority:e?.authAuthority||this.getAuthAuthority()});if(n===void 0)return;let r={...this.getConfiguredUrls(),accessToken:n.oauth_token,login:n.user,githubAppId:n.githubAppId};return n.dev_override&&kf(this.ctx)==="dev"&&(r.devOverride={copilotTokenUrl:n.dev_override.copilot_token_url,copilotUserInfoUrl:n.dev_override.copilot_user_info_url,notificationUrl:n.dev_override.notification_url,contentRestrictionsUrl:n.dev_override.content_restrictions_url}),r}async signUpLimited(e){let n="copilot_internal/subscribe_limited_user";try{return(await(await Bf(this.ctx,e,n,{method:"POST",headers:{"X-GitHub-Api-Version":ig},body:JSON.stringify({restricted_telemetry:this.ctx.get(md).isEnabled?"enabled":"disabled",public_code_suggestions:"enabled"})})).json())?.subscribed||!1}catch(r){return m0.exception(this.ctx,r,"signUpLimited failed"),!1}}async setPersistedSession({accessToken:e,login:n,githubAppId:r,serverUrl:i}){let o=new URL(i||this.getConfiguredUrls().serverUrl).hostname;await this.authPersistence.saveAuthRecord({oauth_token:e,user:n,githubAppId:r,authAuthority:o}),this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken(),await this.authPersistence.purgeLegacyAuthRecords()}setTransientSession(e,n=!0){this.#e=e,n&&this._copilotTokenManager.resetToken()}async deletePersistedSession(){await this.authPersistence.deleteAuthRecord({authAuthority:this.getAuthAuthority()}),await this.authPersistence.purgeLegacyAuthRecords(),!this.#e&&(this._copilotTokenManager.resetToken(),await this._copilotTokenManager.primeToken())}};function Dat(t){if(t.GH_COPILOT_TOKEN&&!/=/.test(t.GH_COPILOT_TOKEN))return{apiUrl:t.GH_COPILOT_API_URL,serverUrl:t.GH_COPILOT_SERVER_URL,login:"<GH_COPILOT_TOKEN-user>",accessToken:t.GH_COPILOT_TOKEN};if(t.GITHUB_COPILOT_TOKEN)return{apiUrl:t.GITHUB_COPILOT_API_URL,serverUrl:t.GITHUB_COPILOT_SERVER_URL,login:"<GITHUB_COPILOT_TOKEN-user>",accessToken:t.GITHUB_COPILOT_TOKEN};if(t.CODESPACES==="true"&&t.GITHUB_TOKEN)return{apiUrl:t.GITHUB_API_URL,serverUrl:t.GITHUB_SERVER_URL,login:t.GITHUB_USER||"<codespaces-user>",accessToken:t.GITHUB_TOKEN}}s(Dat,"getSessionFromEnv");f();var Ji=class{static{s(this,"StatusReporter")}#e=0;#t="Normal";#i;#r;#n=!0;get busy(){return this.#e>0}withProgress(e){return this.#t==="Warning"&&this.forceNormal(),this.#e++===0&&this.#o(),e().finally(()=>{--this.#e===0&&this.#o()})}forceStatus(e,n,r){this.#t===e&&this.#i===n&&!r&&!this.#r&&!this.#n||(this.#t=e,this.#i=n,this.#r=r,this.#n=!1,this.#o())}forceNormal(){this.#t!=="Inactive"&&this.forceStatus("Normal")}setError(e,n){this.forceStatus("Error",e,n)}setWarning(e){this.#t!=="Error"&&this.forceStatus("Warning",e)}setInactive(e){this.#t==="Error"||this.#t==="Warning"||this.forceStatus("Inactive",e)}clearInactive(){this.#t==="Inactive"&&this.forceStatus("Normal")}#o(){let e={kind:this.#t,message:this.#i,busy:this.busy,command:this.#r};this.didChange(e)}},dM=class extends Ji{static{s(this,"NoOpStatusReporter")}didChange(){}};var Gn=class{constructor(e=!1){this.primed=e}static{s(this,"CopilotTokenManager")}primeToken(){this.primed=!0;try{return this.getToken().then(()=>!0,()=>!1)}catch{return Promise.resolve(!1)}}},Pf=class extends ls{constructor(n){super(n.message??"");this.result=n}static{s(this,"TokenResultError")}},fM=class extends Gn{constructor(n,r=!1){super(r);this.ctx=n;this.token=void 0;this.tokenPromise=void 0}static{s(this,"CopilotTokenManagerFromGitHubSession")}async fetchCopilotToken(){let n=await this.getGitHubSession();if(!n)throw new Pf({reason:"NotSignedIn"});if(!n.accessToken)throw new Pf({reason:"HTTP401"});let r=await lM(this.ctx,n);if(r.kind==="failure"){if(r.message)throw new Pf(r);let i=new Error(`Unexpected error getting Copilot token: ${r.reason}`);throw i.code=`CopilotToken.${r.reason}`,i}return r.copilotToken}async getToken(){if(!this.primed){let n=new Error("Token requested before initialization");if(GIe(this.ctx))throw n;m0.exception(this.ctx,n,".getToken")}if(!this.tokenPromise&&(!this.token||this.token?.needsRefresh())){let n=this.fetchCopilotToken().then(r=>this.tokenPromise!==n?r:(this.token=r,this.tokenPromise=void 0,this.ctx.get(Ji).forceNormal(),this.token),r=>{if(this.tokenPromise!==n)throw r;this.tokenPromise=void 0;let i=this.ctx.get(Ji);if(r instanceof Pf)switch(r.result.reason){case"NotSignedIn":i.setError("You are not signed into GitHub.",{command:"github.copilot.signIn",title:"Sign In"});break;case"HTTP401":i.setError("Your GitHub token is invalid. Try signing in again.");break;case"NotAuthorized":i.setError(r.message||"No access to Copilot found.");break}else i.setWarning(String(r));throw r});this.tokenPromise=n}return this.token&&!this.token.isExpired()?this.token:await this.tokenPromise}resetToken(n){n!==void 0?(kt(this.ctx,"auth.reset_token_"+n),m0.debug(this.ctx,`Resetting copilot token on HTTP error ${n}`)):m0.debug(this.ctx,"Resetting copilot token"),this.token=void 0,this.tokenPromise=void 0}},PS=class extends fM{static{s(this,"CopilotTokenManagerFromAuthManager")}async getGitHubSession(){return await this.ctx.get(_r).getSession()}};f();var yg=class{static{s(this,"Clock")}now(){return new Date}};f();var Cm=class{static{s(this,"ExpConfigMaker")}},o8=class extends Cm{constructor(n={}){super();this.defaultFilters=n}static{s(this,"ExpConfigFromTAS")}async fetchExperiments(n,r,i){let o=n.get(Kr),a=Object.keys(i).length===0?this.defaultFilters:i,l=new URL("telemetry",r.telemetry).href,c;try{c=await o.fetch(l,{method:"GET",headers:a,timeout:5e3})}catch(m){return Af.createFallbackConfig(n,`Error fetching ExP config: ${String(m)}`)}if(!c.ok)return Af.createFallbackConfig(n,`ExP responded with ${c.status}`);let u;try{u=await c.json()}catch(m){if(m instanceof SyntaxError)return wa(n,m,"fetchExperiments"),Af.createFallbackConfig(n,"ExP responded with invalid JSON");throw m}let d=u.Configs.find(m=>m.Id==="vscode")??{Id:"vscode",Parameters:{}},p=Object.entries(d.Parameters).map(([m,h])=>m+(h?"":"cf"));return new Af(d.Parameters,u.AssignmentContext,p.join(";"))}},pM=class extends Cm{static{s(this,"ExpConfigNone")}fetchExperiments(){return Promise.resolve(Af.createEmptyConfig())}};f();f();var mM=class{constructor(e){this.prefix=e}static{s(this,"GranularityImplementation")}getCurrentAndUpComingValues(e){let n=this.getValue(e),r=this.getUpcomingValues(e);return[n,r]}},lte=class extends mM{static{s(this,"ConstantGranularity")}getValue(e){return this.prefix}getUpcomingValues(e){return[]}},jIe=s(t=>new lte(t),"DEFAULT_GRANULARITY"),hM=class extends mM{constructor(n,r=.5,i=new Date().setUTCHours(0,0,0,0)){super(n);this.prefix=n;this.fetchBeforeFactor=r;this.anchor=i}static{s(this,"TimeBucketGranularity")}setTimePeriod(n){isNaN(n)?this.timePeriodLengthMs=void 0:this.timePeriodLengthMs=n}setByCallBuckets(n){isNaN(n)?this.numByCallBuckets=void 0:this.numByCallBuckets=n}getValue(n){return this.prefix+this.getTimePeriodBucketString(n)+(this.numByCallBuckets?this.timeHash(n):"")}getTimePeriodBucketString(n){return this.timePeriodLengthMs?this.dateToTimePartString(n):""}getUpcomingValues(n){let r=[],i=this.getUpcomingTimePeriodBucketStrings(n),o=this.getUpcomingByCallBucketStrings();for(let a of i)for(let l of o)r.push(this.prefix+a+l);return r}getUpcomingTimePeriodBucketStrings(n){if(this.timePeriodLengthMs===void 0)return[""];if((n.getTime()-this.anchor)%this.timePeriodLengthMs<this.fetchBeforeFactor*this.timePeriodLengthMs)return[this.getTimePeriodBucketString(n)];{let r=new Date(n.getTime()+this.timePeriodLengthMs);return[this.getTimePeriodBucketString(n),this.getTimePeriodBucketString(r)]}}getUpcomingByCallBucketStrings(){return this.numByCallBuckets===void 0?[""]:Array.from(Array(this.numByCallBuckets).keys()).map(n=>n.toString())}timeHash(n){return this.numByCallBuckets==null?0:7883*(n.getTime()%this.numByCallBuckets)%this.numByCallBuckets}dateToTimePartString(n){return this.timePeriodLengthMs==null?"":Math.floor((n.getTime()-this.anchor)/this.timePeriodLengthMs).toString()}};var VIe="X-Copilot-ClientTimeBucket",gM=class{constructor(e,n){this.specs=new Map;this.prefix=e,this.clock=n,this.defaultGranularity=jIe(e)}static{s(this,"GranularityDirectory")}selectGranularity(e){for(let[n,r]of this.specs.entries())if(e.extends(n))return r;return this.defaultGranularity}update(e,n,r){if(n=n>1?n:NaN,r=r>0?r:NaN,isNaN(n)&&isNaN(r))this.specs.delete(e);else{let i=new hM(this.prefix);isNaN(n)||i.setByCallBuckets(n),isNaN(r)||i.setTimePeriod(r*3600*1e3),this.specs.set(e,i)}}extendFilters(e){let n=this.selectGranularity(e),[r,i]=n.getCurrentAndUpComingValues(this.clock.now());return{newFilterSettings:e.withChange(VIe,r),otherFilterSettingsToPrefetch:i.map(o=>e.withChange(VIe,o))}}};f();f();f();function Nat(t){let e=t.getCopilotIntegrationId();if(e)return e;switch(t.getEditorPluginInfo().name){case"copilot-intellij":return"jetbrains-chat";case"copilot":case"copilot-vs":return;default:return"jetbrains-chat"}}s(Nat,"getIntegrationId");function jx(t){let e={...n0(t),"X-GitHub-Api-Version":ig},n=Nat(t.get(ur));return n&&(e["Copilot-Integration-Id"]=n),e}s(jx,"getCapiHeaders");function AM(t,e,...n){return Hx(t,e,"api",...n)}s(AM,"getCapiUrl");async function TI(t,e){let n=await t.get(Gn).getToken(),r=AM(t,n,e),i={Authorization:`Bearer ${n.token}`,...jx(t)};return await t.get(Kr).fetch(new URL(r).href,{method:"GET",headers:i})}s(TI,"fetchCapiUrl");async function $Ie(t,e,n){let r=await t.get(Gn).getToken(),i=AM(t,r,e),o={Authorization:`Bearer ${r.token}`,...jx(t)};return await t.get(Kr).fetch(new URL(i).href,{method:"POST",headers:o,body:n})}s($Ie,"postCapiUrl");f();var zIe=10*60*1e3,sr={Gpt35turbo:"gpt-3.5-turbo",Gpt4:"gpt-4",Gpt4turbo:"gpt-4-turbo",Gpt4o:"gpt-4o",Gpt4oMini:"gpt-4o-mini",O1Mini:"o1-mini",O1Ga:"o1-ga",Claude35Sonnet:"claude-3.5-sonnet",O3Mini:"o3-mini",Gemini20Flash:"gemini-2.0-flash",Gemini20Pro:"gemini-2.0-pro",Claude37Sonnet:"claude-3.7-sonnet",Claude37SonnetThought:"claude-3.7-sonnet-thought",Gpt45:"gpt-4.5",Gpt41:"gpt-4.1",CopilotBase:"copilot-base",Unknown:"unknown"},YIe=new Set([sr.O1Ga,sr.O3Mini,sr.O1Mini,sr.Gemini20Pro,sr.Gemini20Flash]);function Df(t){switch(t){case"edits":case"user":case"inline":return[sr.Gpt4o,sr.Gpt4turbo,sr.Gpt4,sr.O1Mini,sr.O1Ga,sr.Claude35Sonnet,sr.O3Mini,sr.Gemini20Flash,sr.Claude37Sonnet,sr.Claude37SonnetThought,sr.Gpt45,sr.Gpt41,sr.CopilotBase];case"meta":case"suggestions":case"synonyms":return[sr.Gpt4oMini,sr.Gpt4o,sr.Gpt35turbo,sr.Gpt41,sr.CopilotBase];case"gitCommit":return[sr.Gpt4oMini,sr.Gpt4o,sr.Gpt4,sr.Gpt41,sr.CopilotBase];case"codeReview":return[sr.Gpt4,sr.Gpt4o,sr.Gpt41,sr.CopilotBase];case"nesStubs":return[sr.Gpt4oMini,sr.Gpt4o,sr.Gpt41,sr.CopilotBase]}}s(Df,"getSupportedModelFamiliesForPrompt");var xM={textEmbedding3Small:"text-embedding-3-small"},Lat=I.Object({type:I.Union([I.Literal("chat"),I.Literal("embeddings"),I.Literal("completion")]),tokenizer:I.String(),family:I.String(),object:I.String(),supports:I.Optional(I.Object({tool_calls:I.Optional(I.Boolean()),parallel_tool_calls:I.Optional(I.Boolean()),streaming:I.Optional(I.Boolean()),vision:I.Optional(I.Boolean())})),limits:I.Optional(I.Object({max_inputs:I.Optional(I.Number()),max_prompt_tokens:I.Optional(I.Number()),max_output_tokens:I.Optional(I.Number()),max_context_window_tokens:I.Optional(I.Number())}))}),Fat=I.Object({id:I.String(),name:I.String(),version:I.String(),model_picker_enabled:I.Boolean(),is_chat_default:I.Optional(I.Boolean()),is_chat_fallback:I.Optional(I.Boolean()),capabilities:Lat,billing:I.Optional(I.Object({is_premium:I.Optional(I.Boolean()),multiplier:I.Optional(I.Number())})),object:I.String(),preview:I.Optional(I.Boolean()),isExperimental:I.Optional(I.Boolean()),policy:I.Optional(I.Object({state:I.String(),terms:I.String()}))}),KIe=I.Object({data:I.Array(Fat)}),wu=class{static{s(this,"ModelMetadataProvider")}},yM=class extends wu{constructor(n){super();this.ctx=n;this._metadata=[];this._lastFetchTime=0;ia(n,()=>{this._lastFetchTime=0})}static{s(this,"CapiModelMetadataProvider")}async getMetadata(){return this.shouldRefreshModels()&&await this.fetchMetadata(),this._metadata.slice()}async getFallbackModel(){return(await this.getMetadata()).find(r=>r.is_chat_fallback)}async fetchMetadata(){let n=await TI(this.ctx,"/models");if(n.status<200||n.status>=300){if(n.status===429&&this._metadata.length>0){or.error(this.ctx,"Rate limited while fetching models from CAPI",{status:n.status,statusText:n.statusText});return}throw or.error(this.ctx,"Failed to fetch models from CAPI",{status:n.status,statusText:n.statusText}),new rg(n)}await this.processModels(n)}async fetchModel(n){let r=await TI(this.ctx,`/models/${n}`);if(!r.ok){or.error(this.ctx,`Failed to fetch model ${n} from CAPI`,{status:r.status,statusText:r.statusText});return}return await r.json()}async acceptModelPolicy(n){return(await $Ie(this.ctx,`/models/${n}/policy`,JSON.stringify({status:"enabled"}))).ok?(await this.fetchMetadata(),!0):!1}async processModels(n){try{let r=await n.json();this._metadata=r.data,this._lastFetchTime=Date.now()}catch(r){or.error(this.ctx,"Failed to parse models from CAPI",{error:r})}}shouldRefreshModels(){return this._metadata.length===0||!this._lastFetchTime?!0:this.isLastFetchOlderTenMinutes()}isLastFetchOlderTenMinutes(){return Date.now()-this._lastFetchTime>zIe}},CM=class extends wu{constructor(n,r){super();this.ctx=n;this.delegate=r;this._exp_models_cache=new Map}static{s(this,"ExpModelMetadataProvider")}async getMetadata(){let n=this.ctx.get(Dt),r=await n.updateExPValuesAndAssignments(),i=n.ideChatExpModelIds(r),o=[];if(i){let a=i?.split(",");for(let l of a){let c=await this.fetchModel(l.trim());c!==void 0&&(c.isExperimental=!0,o.push(c))}}return o.concat(await this.delegate.getMetadata())}async fetchModel(n){let r=this._exp_models_cache.get(n);if(r){let[o,a]=r;if(Date.now()-a<zIe)return o}let i=await this.delegate.fetchModel(n);if(i)return this._exp_models_cache.set(n,[i,Date.now()]),i}async acceptModelPolicy(n){return await this.delegate.acceptModelPolicy(n)}async getFallbackModel(){return await this.delegate.getFallbackModel()}};f();function JIe(t){let e=Ai(t,wt.UserSelectedCompletionModel);return typeof e=="string"&&e.length>0?e:null}s(JIe,"getUserSelectedModelConfiguration");f();f();f();var DS=class extends Error{constructor(n,r){super(n,{cause:r});this.code="CopilotPromptLoadFailure"}static{s(this,"CopilotPromptLoadFailure")}};f();var XIe=je(require("node:fs/promises")),vM=je(require("node:path"));async function bM(t){return await XIe.readFile(cte(t))}s(bM,"readFile");function cte(t){return vM.default.resolve(vM.default.extname(__filename)!==".ts"?__dirname:vM.default.resolve(__dirname,"../../dist"),t)}s(cte,"locateFile");var NS=je(f2e());var SM=new Map;function Bo(t="o200k_base"){let e=SM.get(t);return e!==void 0||(e=SM.get("o200k_base"),e!==void 0)?e:new RM}s(Bo,"getTokenizer");async function m2e(t="o200k_base"){return await wI,Bo(t)}s(m2e,"getTokenizerAsync");async function Xat(t){if(!t.endsWith(".tiktoken.noindex"))throw new Error("File does not end with .tiktoken.noindex");let e=await bM(t),n=new Map,r=[];for(let i=0;i<e.length;i++){if(e[i]!==255||r.length===0){r.push(e[i]);continue}n.set(Uint8Array.from(r),n.size),r=[]}return n.set(Uint8Array.from(r),n.size),n}s(Xat,"parseTikTokenNoIndex");var xte=class t{constructor(e){this._tokenizer=e}static{s(this,"TTokenizer")}static async create(e){try{let n=(0,NS.createTokenizer)(await Xat(`resources/${e}.tiktoken.noindex`),(0,NS.getSpecialTokensByEncoder)(e),(0,NS.getRegexByEncoder)(e),32768);return new t(n)}catch(n){throw n instanceof Error?new DS("Could not load tokenizer",n):n}}tokenize(e){return this._tokenizer.encode(e)}detokenize(e){return this._tokenizer.decode(e)}tokenLength(e){return this.tokenize(e).length}tokenizeStrings(e){return this.tokenize(e).map(r=>this.detokenize([r]))}takeLastTokens(e,n){if(n<=0)return{text:"",tokens:[]};let r=4,i=1,o=Math.min(e.length,n*r),a=e.slice(-o),l=this.tokenize(a);for(;l.length<n+2&&o<e.length;)o=Math.min(e.length,o+n*i),a=e.slice(-o),l=this.tokenize(a);return l.length<n?{text:e,tokens:l}:(l=l.slice(-n),{text:this.detokenize(l),tokens:l})}takeFirstTokens(e,n){if(n<=0)return{text:"",tokens:[]};let r=4,i=1,o=Math.min(e.length,n*r),a=e.slice(0,o),l=this.tokenize(a);for(;l.length<n+2&&o<e.length;)o=Math.min(e.length,o+n*i),a=e.slice(0,o),l=this.tokenize(a);return l.length<n?{text:e,tokens:l}:(l=l.slice(0,n),{text:this.detokenize(l),tokens:l})}takeLastLinesTokens(e,n){let{text:r}=this.takeLastTokens(e,n);if(r.length===e.length||e[e.length-r.length-1]===`
`)return r;let i=r.indexOf(`
`);return r.substring(i+1)}},vte=class{constructor(){this.hash=s(e=>{let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);n=(n<<5)-n+i,n&=n&65535}return n},"hash")}static{s(this,"MockTokenizer")}tokenize(e){return this.tokenizeStrings(e).map(this.hash)}detokenize(e){return e.map(n=>n.toString()).join(" ")}tokenizeStrings(e){return e.split(/\b/)}tokenLength(e){return this.tokenizeStrings(e).length}takeLastTokens(e,n){let r=this.tokenizeStrings(e).slice(-n);return{text:r.join(""),tokens:r.map(this.hash)}}takeFirstTokens(e,n){let r=this.tokenizeStrings(e).slice(0,n);return{text:r.join(""),tokens:r.map(this.hash)}}takeLastLinesTokens(e,n){let{text:r}=this.takeLastTokens(e,n);if(r.length===e.length||e[e.length-r.length-1]===`
`)return r;let i=r.indexOf(`
`);return r.substring(i+1)}},Zat={cl100k_base:{python:3.99,typescript:4.54,typescriptreact:4.58,javascript:4.76,csharp:5.13,java:4.86,cpp:3.85,php:4.1,html:4.57,vue:4.22,go:3.93,dart:5.66,javascriptreact:4.81,css:3.37},o200k_base:{python:4.05,typescript:4.12,typescriptreact:5.01,javascript:4.47,csharp:5.47,java:4.86,cpp:3.8,php:4.35,html:4.86,vue:4.3,go:4.21,dart:5.7,javascriptreact:4.83,css:3.33}},Cte=4,RM=class{constructor(e="o200k_base",n){this.languageId=n;this.tokenizerName=e}static{s(this,"ApproximateTokenizer")}tokenize(e){return this.tokenizeStrings(e).map(n=>{let r=0;for(let i=0;i<n.length;i++)r=r*Math.pow(10,Cte)+n.charCodeAt(i);return r})}detokenize(e){return e.map(n=>{let r=[],i=n.toString();for(;i.length>0;){let o=i.slice(-Cte),a=String.fromCharCode(parseInt(o));r.unshift(a),i=i.slice(0,-Cte)}return r.join("")}).join("")}tokenizeStrings(e){return e.match(/.{1,4}/g)??[]}getEffectiveTokenLength(){return this.tokenizerName&&this.languageId?Zat[this.tokenizerName]?.[this.languageId]??4:4}tokenLength(e){return Math.ceil(e.length/this.getEffectiveTokenLength())}takeLastTokens(e,n){if(n<=0)return{text:"",tokens:[]};let r=e.slice(-Math.floor(n*this.getEffectiveTokenLength()));return{text:r,tokens:Array.from({length:this.tokenLength(r)},(i,o)=>o)}}takeFirstTokens(e,n){if(n<=0)return{text:"",tokens:[]};let r=e.slice(0,Math.floor(n*this.getEffectiveTokenLength()));return{text:r,tokens:Array.from({length:this.tokenLength(r)},(i,o)=>o)}}takeLastLinesTokens(e,n){let{text:r}=this.takeLastTokens(e,n);if(r.length===e.length||e[e.length-r.length-1]===`
`)return r;let i=r.indexOf(`
`);return r.substring(i+1)}};async function p2e(t){try{let e=await xte.create(t);SM.set(t,e)}catch{}}s(p2e,"setTokenizer");var wI=(async()=>{SM.set("mock",new vte),await Promise.all([p2e("cl100k_base"),p2e("o200k_base")])})();f();f();var elt=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},g2e=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},bte,kM,A2e,Ete=class extends Ar{static{s(this,"AssertError")}constructor(e){let n=e.First();super(n===void 0?"Invalid Value":n.message),bte.add(this),kM.set(this,void 0),elt(this,kM,e,"f"),this.error=n}Errors(){return new Bx(g2e(this,bte,"m",A2e).call(this))}};kM=new WeakMap,bte=new WeakSet,A2e=s(function*(){this.error&&(yield this.error),yield*g2e(this,kM,"f")},"_AssertError_Iterator");function h2e(t,e,n){if(!fi(t,e,n))throw new Ete(fg(t,e,n))}s(h2e,"AssertValue");function BM(...t){return t.length===3?h2e(t[0],t[1],t[2]):h2e(t[0],[],t[1])}s(BM,"Assert");f();f();f();function tlt(t){let e={};for(let n of Object.getOwnPropertyNames(t))e[n]=Xi(t[n]);for(let n of Object.getOwnPropertySymbols(t))e[n]=Xi(t[n]);return e}s(tlt,"FromObject");function nlt(t){return t.map(e=>Xi(e))}s(nlt,"FromArray");function rlt(t){return t.slice()}s(rlt,"FromTypedArray");function ilt(t){return new Map(Xi([...t.entries()]))}s(ilt,"FromMap");function olt(t){return new Set(Xi([...t.entries()]))}s(olt,"FromSet");function slt(t){return new Date(t.toISOString())}s(slt,"FromDate");function Xi(t){if(gr(t))return nlt(t);if(xu(t))return slt(t);if(xf(t))return rlt(t);if(eye(t))return ilt(t);if(tye(t))return olt(t);if(ci(t))return tlt(t);if(i0(t))return t;throw new Error("ValueClone: Unable to clone value")}s(Xi,"Clone");var g0=class extends Ar{static{s(this,"ValueCreateError")}constructor(e,n){super(n),this.schema=e}};function Zi(t){return bx(t)?t():Xi(t)}s(Zi,"FromDefault");function alt(t,e){return hr(t,"default")?Zi(t.default):{}}s(alt,"FromAny");function llt(t,e){return{}}s(llt,"FromArgument");function clt(t,e){if(t.uniqueItems===!0&&!hr(t,"default"))throw new g0(t,"Array with the uniqueItems constraint requires a default value");if("contains"in t&&!hr(t,"default"))throw new g0(t,"Array with the contains constraint requires a default value");return"default"in t?Zi(t.default):t.minItems!==void 0?Array.from({length:t.minItems}).map(n=>hd(t.items,e)):[]}s(clt,"FromArray");function ult(t,e){return hr(t,"default")?Zi(t.default):async function*(){}()}s(ult,"FromAsyncIterator");function dlt(t,e){return hr(t,"default")?Zi(t.default):BigInt(0)}s(dlt,"FromBigInt");function flt(t,e){return hr(t,"default")?Zi(t.default):!1}s(flt,"FromBoolean");function plt(t,e){if(hr(t,"default"))return Zi(t.default);{let n=hd(t.returns,e);return typeof n=="object"&&!Array.isArray(n)?class{constructor(){for(let[r,i]of Object.entries(n)){let o=this;o[r]=i}}}:class{}}}s(plt,"FromConstructor");function mlt(t,e){return hr(t,"default")?Zi(t.default):t.minimumTimestamp!==void 0?new Date(t.minimumTimestamp):new Date}s(mlt,"FromDate");function hlt(t,e){return hr(t,"default")?Zi(t.default):()=>hd(t.returns,e)}s(hlt,"FromFunction");function glt(t,e){let n=globalThis.Object.values(t.$defs),r=t.$defs[t.$ref];return hd(r,[...e,...n])}s(glt,"FromImport");function Alt(t,e){return hr(t,"default")?Zi(t.default):t.minimum!==void 0?t.minimum:0}s(Alt,"FromInteger");function ylt(t,e){if(hr(t,"default"))return Zi(t.default);{let n=t.allOf.reduce((r,i)=>{let o=hd(i,e);return typeof o=="object"?{...r,...o}:o},{});if(!fi(t,e,n))throw new g0(t,"Intersect produced invalid value. Consider using a default value.");return n}}s(ylt,"FromIntersect");function Clt(t,e){return hr(t,"default")?Zi(t.default):function*(){}()}s(Clt,"FromIterator");function xlt(t,e){return hr(t,"default")?Zi(t.default):t.const}s(xlt,"FromLiteral");function vlt(t,e){if(hr(t,"default"))return Zi(t.default);throw new g0(t,"Never types cannot be created. Consider using a default value.")}s(vlt,"FromNever");function blt(t,e){if(hr(t,"default"))return Zi(t.default);throw new g0(t,"Not types must have a default value")}s(blt,"FromNot");function Elt(t,e){return hr(t,"default")?Zi(t.default):null}s(Elt,"FromNull");function Ilt(t,e){return hr(t,"default")?Zi(t.default):t.minimum!==void 0?t.minimum:0}s(Ilt,"FromNumber");function Tlt(t,e){if(hr(t,"default"))return Zi(t.default);{let n=new Set(t.required),r={};for(let[i,o]of Object.entries(t.properties))n.has(i)&&(r[i]=hd(o,e));return r}}s(Tlt,"FromObject");function wlt(t,e){return hr(t,"default")?Zi(t.default):Promise.resolve(hd(t.item,e))}s(wlt,"FromPromise");function _lt(t,e){let[n,r]=Object.entries(t.patternProperties)[0];if(hr(t,"default"))return Zi(t.default);if(n===cg||n===lg)return{};{let i=n.slice(1,n.length-1).split("|"),o={};for(let a of i)o[a]=hd(r,e);return o}}s(_lt,"FromRecord");function Slt(t,e){return hr(t,"default")?Zi(t.default):hd(Ki(t,e),e)}s(Slt,"FromRef");function Rlt(t,e){if(hr(t,"default"))return Zi(t.default);throw new g0(t,"RegExp types cannot be created. Consider using a default value.")}s(Rlt,"FromRegExp");function klt(t,e){if(t.pattern!==void 0){if(hr(t,"default"))return Zi(t.default);throw new g0(t,"String types with patterns must specify a default value")}else if(t.format!==void 0){if(hr(t,"default"))return Zi(t.default);throw new g0(t,"String types with formats must specify a default value")}else return hr(t,"default")?Zi(t.default):t.minLength!==void 0?Array.from({length:t.minLength}).map(()=>" ").join(""):""}s(klt,"FromString");function Blt(t,e){return hr(t,"default")?Zi(t.default):"value"in t?Symbol.for(t.value):Symbol()}s(Blt,"FromSymbol");function Plt(t,e){if(hr(t,"default"))return Zi(t.default);if(!qL(t))throw new g0(t,"Can only create template literals that produce a finite variants. Consider using a default value.");return V_(t)[0]}s(Plt,"FromTemplateLiteral");function Dlt(t,e){if(y2e++>qlt)throw new g0(t,"Cannot create recursive type as it appears possibly infinite. Consider using a default.");return hr(t,"default")?Zi(t.default):hd(Ki(t,e),e)}s(Dlt,"FromThis");function Nlt(t,e){return hr(t,"default")?Zi(t.default):t.items===void 0?[]:Array.from({length:t.minItems}).map((n,r)=>hd(t.items[r],e))}s(Nlt,"FromTuple");function Llt(t,e){if(hr(t,"default"))return Zi(t.default)}s(Llt,"FromUndefined");function Flt(t,e){if(hr(t,"default"))return Zi(t.default);if(t.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");return hd(t.anyOf[0],e)}s(Flt,"FromUnion");function Mlt(t,e){return hr(t,"default")?Zi(t.default):t.minByteLength!==void 0?new Uint8Array(t.minByteLength):new Uint8Array(0)}s(Mlt,"FromUint8Array");function Qlt(t,e){return hr(t,"default")?Zi(t.default):{}}s(Qlt,"FromUnknown");function Olt(t,e){if(hr(t,"default"))return Zi(t.default)}s(Olt,"FromVoid");function Ult(t,e){if(hr(t,"default"))return Zi(t.default);throw new Error("User defined types must specify a default value")}s(Ult,"FromKind");function hd(t,e){let n=kl(t,e),r=t;switch(r[Ze]){case"Any":return alt(r,n);case"Argument":return llt(r,n);case"Array":return clt(r,n);case"AsyncIterator":return ult(r,n);case"BigInt":return dlt(r,n);case"Boolean":return flt(r,n);case"Constructor":return plt(r,n);case"Date":return mlt(r,n);case"Function":return hlt(r,n);case"Import":return glt(r,n);case"Integer":return Alt(r,n);case"Intersect":return ylt(r,n);case"Iterator":return Clt(r,n);case"Literal":return xlt(r,n);case"Never":return vlt(r,n);case"Not":return blt(r,n);case"Null":return Elt(r,n);case"Number":return Ilt(r,n);case"Object":return Tlt(r,n);case"Promise":return wlt(r,n);case"Record":return _lt(r,n);case"Ref":return Slt(r,n);case"RegExp":return Rlt(r,n);case"String":return klt(r,n);case"Symbol":return Blt(r,n);case"TemplateLiteral":return Plt(r,n);case"This":return Dlt(r,n);case"Tuple":return Nlt(r,n);case"Undefined":return Llt(r,n);case"Union":return Flt(r,n);case"Uint8Array":return Mlt(r,n);case"Unknown":return Qlt(r,n);case"Void":return Olt(r,n);default:if(!vu.Has(r[Ze]))throw new g0(r,"Unknown type");return Ult(r,n)}}s(hd,"Visit");var qlt=512,y2e=0;function Nf(...t){return y2e=0,t.length===2?hd(t[0],t[1]):hd(t[0],[])}s(Nf,"Create");var PM=class extends Ar{static{s(this,"ValueCastError")}constructor(e,n){super(n),this.schema=e}};function Wlt(t,e,n){if(t[Ze]==="Object"&&typeof n=="object"&&!g1(n)){let r=t,i=Object.getOwnPropertyNames(n),o=Object.entries(r.properties),[a,l]=[1/o.length,o.length];return o.reduce((c,[u,d])=>{let p=d[Ze]==="Literal"&&d.const===n[u]?l:0,m=fi(d,e,n[u])?a:0,h=i.includes(u)?a:0;return c+(p+m+h)},0)}else return fi(t,e,n)?1:0}s(Wlt,"ScoreUnion");function Hlt(t,e,n){let r=t.anyOf.map(a=>Ki(a,e)),[i,o]=[r[0],0];for(let a of r){let l=Wlt(a,e,n);l>o&&(i=a,o=l)}return i}s(Hlt,"SelectUnion");function Glt(t,e,n){if("default"in t)return typeof n=="function"?t.default:Xi(t.default);{let r=Hlt(t,e,n);return a8(r,e,n)}}s(Glt,"CastUnion");function jlt(t,e,n){return fi(t,e,n)?Xi(n):Nf(t,e)}s(jlt,"DefaultClone");function Vlt(t,e,n){return fi(t,e,n)?n:Nf(t,e)}s(Vlt,"Default");function $lt(t,e,n){if(fi(t,e,n))return Xi(n);let r=gr(n)?Xi(n):Nf(t,e),i=qn(t.minItems)&&r.length<t.minItems?[...r,...Array.from({length:t.minItems-r.length},()=>null)]:r,a=(qn(t.maxItems)&&i.length>t.maxItems?i.slice(0,t.maxItems):i).map(c=>xm(t.items,e,c));if(t.uniqueItems!==!0)return a;let l=[...new Set(a)];if(!fi(t,e,l))throw new PM(t,"Array cast produced invalid data due to uniqueItems constraint");return l}s($lt,"FromArray");function zlt(t,e,n){if(fi(t,e,n))return Nf(t,e);let r=new Set(t.returns.required||[]),i=s(function(){},"result");for(let[o,a]of Object.entries(t.returns.properties))!r.has(o)&&n.prototype[o]===void 0||(i.prototype[o]=xm(a,e,n.prototype[o]));return i}s(zlt,"FromConstructor");function Ylt(t,e,n){let r=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return xm(i,[...e,...r],n)}s(Ylt,"FromImport");function Klt(t,e,n){let r=Nf(t,e),i=ci(r)&&ci(n)?{...r,...n}:n;return fi(t,e,i)?i:Nf(t,e)}s(Klt,"FromIntersect");function Jlt(t,e,n){throw new PM(t,"Never types cannot be cast")}s(Jlt,"FromNever");function Xlt(t,e,n){if(fi(t,e,n))return n;if(n===null||typeof n!="object")return Nf(t,e);let r=new Set(t.required||[]),i={};for(let[o,a]of Object.entries(t.properties))!r.has(o)&&n[o]===void 0||(i[o]=xm(a,e,n[o]));if(typeof t.additionalProperties=="object"){let o=Object.getOwnPropertyNames(t.properties);for(let a of Object.getOwnPropertyNames(n))o.includes(a)||(i[a]=xm(t.additionalProperties,e,n[a]))}return i}s(Xlt,"FromObject");function Zlt(t,e,n){if(fi(t,e,n))return Xi(n);if(n===null||typeof n!="object"||Array.isArray(n)||n instanceof Date)return Nf(t,e);let r=Object.getOwnPropertyNames(t.patternProperties)[0],i=t.patternProperties[r],o={};for(let[a,l]of Object.entries(n))o[a]=xm(i,e,l);return o}s(Zlt,"FromRecord");function ect(t,e,n){return xm(Ki(t,e),e,n)}s(ect,"FromRef");function tct(t,e,n){return xm(Ki(t,e),e,n)}s(tct,"FromThis");function nct(t,e,n){return fi(t,e,n)?Xi(n):gr(n)?t.items===void 0?[]:t.items.map((r,i)=>xm(r,e,n[i])):Nf(t,e)}s(nct,"FromTuple");function rct(t,e,n){return fi(t,e,n)?Xi(n):Glt(t,e,n)}s(rct,"FromUnion");function xm(t,e,n){let r=qi(t.$id)?kl(t,e):e,i=t;switch(t[Ze]){case"Array":return $lt(i,r,n);case"Constructor":return zlt(i,r,n);case"Import":return Ylt(i,r,n);case"Intersect":return Klt(i,r,n);case"Never":return Jlt(i,r,n);case"Object":return Xlt(i,r,n);case"Record":return Zlt(i,r,n);case"Ref":return ect(i,r,n);case"This":return tct(i,r,n);case"Tuple":return nct(i,r,n);case"Union":return rct(i,r,n);case"Date":case"Symbol":case"Uint8Array":return jlt(t,e,n);default:return Vlt(i,r,n)}}s(xm,"Visit");function a8(...t){return t.length===3?xm(t[0],t[1],t[2]):xm(t[0],[],t[1])}s(a8,"Cast");f();function ict(t){return Ix(t)&&t[Ze]!=="Unsafe"}s(ict,"IsCheckable");function oct(t,e,n){return gr(n)?n.map(r=>gd(t.items,e,r)):n}s(oct,"FromArray");function sct(t,e,n){let r=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return gd(i,[...e,...r],n)}s(sct,"FromImport");function act(t,e,n){let r=t.unevaluatedProperties,o=t.allOf.map(l=>gd(l,e,Xi(n))).reduce((l,c)=>ci(c)?{...l,...c}:c,{});if(!ci(n)||!ci(o)||!Ix(r))return o;let a=ad(t);for(let l of Object.getOwnPropertyNames(n))a.includes(l)||fi(r,e,n[l])&&(o[l]=gd(r,e,n[l]));return o}s(act,"FromIntersect");function lct(t,e,n){if(!ci(n)||gr(n))return n;let r=t.additionalProperties;for(let i of Object.getOwnPropertyNames(n)){if(hr(t.properties,i)){n[i]=gd(t.properties[i],e,n[i]);continue}if(Ix(r)&&fi(r,e,n[i])){n[i]=gd(r,e,n[i]);continue}delete n[i]}return n}s(lct,"FromObject");function cct(t,e,n){if(!ci(n))return n;let r=t.additionalProperties,i=Object.getOwnPropertyNames(n),[o,a]=Object.entries(t.patternProperties)[0],l=new RegExp(o);for(let c of i){if(l.test(c)){n[c]=gd(a,e,n[c]);continue}if(Ix(r)&&fi(r,e,n[c])){n[c]=gd(r,e,n[c]);continue}delete n[c]}return n}s(cct,"FromRecord");function uct(t,e,n){return gd(Ki(t,e),e,n)}s(uct,"FromRef");function dct(t,e,n){return gd(Ki(t,e),e,n)}s(dct,"FromThis");function fct(t,e,n){if(!gr(n))return n;if(us(t.items))return[];let r=Math.min(n.length,t.items.length);for(let i=0;i<r;i++)n[i]=gd(t.items[i],e,n[i]);return n.length>r?n.slice(0,r):n}s(fct,"FromTuple");function pct(t,e,n){for(let r of t.anyOf)if(ict(r)&&fi(r,e,n))return gd(r,e,n);return n}s(pct,"FromUnion");function gd(t,e,n){let r=qi(t.$id)?kl(t,e):e,i=t;switch(i[Ze]){case"Array":return oct(i,r,n);case"Import":return sct(i,r,n);case"Intersect":return act(i,r,n);case"Object":return lct(i,r,n);case"Record":return cct(i,r,n);case"Ref":return uct(i,r,n);case"This":return dct(i,r,n);case"Tuple":return fct(i,r,n);case"Union":return pct(i,r,n);default:return n}}s(gd,"Visit");function DM(...t){return t.length===3?gd(t[0],t[1],t[2]):gd(t[0],[],t[1])}s(DM,"Clean");f();function NM(t){return qi(t)&&!isNaN(t)&&!isNaN(parseFloat(t))}s(NM,"IsStringNumeric");function mct(t){return ac(t)||ag(t)||qn(t)}s(mct,"IsValueToString");function l8(t){return t===!0||qn(t)&&t===1||ac(t)&&t===BigInt("1")||qi(t)&&(t.toLowerCase()==="true"||t==="1")}s(l8,"IsValueTrue");function c8(t){return t===!1||qn(t)&&(t===0||Object.is(t,-0))||ac(t)&&t===BigInt("0")||qi(t)&&(t.toLowerCase()==="false"||t==="0"||t==="-0")}s(c8,"IsValueFalse");function hct(t){return qi(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}s(hct,"IsTimeStringWithTimeZone");function gct(t){return qi(t)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}s(gct,"IsTimeStringWithoutTimeZone");function Act(t){return qi(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(t)}s(Act,"IsDateTimeStringWithTimeZone");function yct(t){return qi(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(t)}s(yct,"IsDateTimeStringWithoutTimeZone");function Cct(t){return qi(t)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test(t)}s(Cct,"IsDateString");function xct(t,e){let n=x2e(t);return n===e?n:t}s(xct,"TryConvertLiteralString");function vct(t,e){let n=v2e(t);return n===e?n:t}s(vct,"TryConvertLiteralNumber");function bct(t,e){let n=C2e(t);return n===e?n:t}s(bct,"TryConvertLiteralBoolean");function Ect(t,e){return qi(t.const)?xct(e,t.const):qn(t.const)?vct(e,t.const):ag(t.const)?bct(e,t.const):e}s(Ect,"TryConvertLiteral");function C2e(t){return l8(t)?!0:c8(t)?!1:t}s(C2e,"TryConvertBoolean");function Ict(t){let e=s(n=>n.split(".")[0],"truncateInteger");return NM(t)?BigInt(e(t)):qn(t)?BigInt(Math.trunc(t)):c8(t)?BigInt(0):l8(t)?BigInt(1):t}s(Ict,"TryConvertBigInt");function x2e(t){return A1(t)&&t.description!==void 0?t.description.toString():mct(t)?t.toString():t}s(x2e,"TryConvertString");function v2e(t){return NM(t)?parseFloat(t):l8(t)?1:c8(t)?0:t}s(v2e,"TryConvertNumber");function Tct(t){return NM(t)?parseInt(t):qn(t)?Math.trunc(t):l8(t)?1:c8(t)?0:t}s(Tct,"TryConvertInteger");function wct(t){return qi(t)&&t.toLowerCase()==="null"?null:t}s(wct,"TryConvertNull");function _ct(t){return qi(t)&&t==="undefined"?void 0:t}s(_ct,"TryConvertUndefined");function Sct(t){return xu(t)?t:qn(t)?new Date(t):l8(t)?new Date(1):c8(t)?new Date(0):NM(t)?new Date(parseInt(t)):gct(t)?new Date(`1970-01-01T${t}.000Z`):hct(t)?new Date(`1970-01-01T${t}`):yct(t)?new Date(`${t}.000Z`):Act(t)?new Date(t):Cct(t)?new Date(`${t}T00:00:00.000Z`):t}s(Sct,"TryConvertDate");function Rct(t,e,n){return(gr(n)?n:[n]).map(i=>vm(t.items,e,i))}s(Rct,"FromArray");function kct(t,e,n){return Ict(n)}s(kct,"FromBigInt");function Bct(t,e,n){return C2e(n)}s(Bct,"FromBoolean");function Pct(t,e,n){return Sct(n)}s(Pct,"FromDate");function Dct(t,e,n){let r=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return vm(i,[...e,...r],n)}s(Dct,"FromImport");function Nct(t,e,n){return Tct(n)}s(Nct,"FromInteger");function Lct(t,e,n){return t.allOf.reduce((r,i)=>vm(i,e,r),n)}s(Lct,"FromIntersect");function Fct(t,e,n){return Ect(t,n)}s(Fct,"FromLiteral");function Mct(t,e,n){return wct(n)}s(Mct,"FromNull");function Qct(t,e,n){return v2e(n)}s(Qct,"FromNumber");function Oct(t,e,n){if(!ci(n))return n;for(let r of Object.getOwnPropertyNames(t.properties))hr(n,r)&&(n[r]=vm(t.properties[r],e,n[r]));return n}s(Oct,"FromObject");function Uct(t,e,n){if(!ci(n))return n;let i=Object.getOwnPropertyNames(t.patternProperties)[0],o=t.patternProperties[i];for(let[a,l]of Object.entries(n))n[a]=vm(o,e,l);return n}s(Uct,"FromRecord");function qct(t,e,n){return vm(Ki(t,e),e,n)}s(qct,"FromRef");function Wct(t,e,n){return x2e(n)}s(Wct,"FromString");function Hct(t,e,n){return qi(n)||qn(n)?Symbol(n):n}s(Hct,"FromSymbol");function Gct(t,e,n){return vm(Ki(t,e),e,n)}s(Gct,"FromThis");function jct(t,e,n){return gr(n)&&!us(t.items)?n.map((i,o)=>o<t.items.length?vm(t.items[o],e,i):i):n}s(jct,"FromTuple");function Vct(t,e,n){return _ct(n)}s(Vct,"FromUndefined");function $ct(t,e,n){for(let r of t.anyOf){let i=vm(r,e,Xi(n));if(fi(r,e,i))return i}return n}s($ct,"FromUnion");function vm(t,e,n){let r=kl(t,e),i=t;switch(t[Ze]){case"Array":return Rct(i,r,n);case"BigInt":return kct(i,r,n);case"Boolean":return Bct(i,r,n);case"Date":return Pct(i,r,n);case"Import":return Dct(i,r,n);case"Integer":return Nct(i,r,n);case"Intersect":return Lct(i,r,n);case"Literal":return Fct(i,r,n);case"Null":return Mct(i,r,n);case"Number":return Qct(i,r,n);case"Object":return Oct(i,r,n);case"Record":return Uct(i,r,n);case"Ref":return qct(i,r,n);case"String":return Wct(i,r,n);case"Symbol":return Hct(i,r,n);case"This":return Gct(i,r,n);case"Tuple":return jct(i,r,n);case"Undefined":return Vct(i,r,n);case"Union":return $ct(i,r,n);default:return n}}s(vm,"Visit");function LM(...t){return t.length===3?vm(t[0],t[1],t[2]):vm(t[0],[],t[1])}s(LM,"Convert");f();function b2e(...t){let[e,n,r]=t.length===3?[t[0],t[1],t[2]]:[t[0],[],t[1]];if(!fi(e,n,r))throw new oS(e,r,fg(e,n,r).First());return w1(e,n)?sS(e,n,r):r}s(b2e,"Decode");f();function k1(t,e){let n=hr(t,"default")?t.default:void 0,r=bx(n)?n():Xi(n);return us(e)?r:ci(e)&&ci(r)?Object.assign(r,e):e}s(k1,"ValueOrDefault");function Ite(t){return Ix(t)&&"default"in t}s(Ite,"HasDefaultProperty");function zct(t,e,n){if(gr(n)){for(let i=0;i<n.length;i++)n[i]=Su(t.items,e,n[i]);return n}let r=k1(t,n);if(!gr(r))return r;for(let i=0;i<r.length;i++)r[i]=Su(t.items,e,r[i]);return r}s(zct,"FromArray");function Yct(t,e,n){return xu(n)?n:k1(t,n)}s(Yct,"FromDate");function Kct(t,e,n){let r=globalThis.Object.values(t.$defs),i=t.$defs[t.$ref];return Su(i,[...e,...r],n)}s(Kct,"FromImport");function Jct(t,e,n){let r=k1(t,n);return t.allOf.reduce((i,o)=>{let a=Su(o,e,r);return ci(a)?{...i,...a}:a},{})}s(Jct,"FromIntersect");function Xct(t,e,n){let r=k1(t,n);if(!ci(r))return r;let i=Object.getOwnPropertyNames(t.properties);for(let o of i){let a=Su(t.properties[o],e,r[o]);us(a)||(r[o]=Su(t.properties[o],e,r[o]))}if(!Ite(t.additionalProperties))return r;for(let o of Object.getOwnPropertyNames(r))i.includes(o)||(r[o]=Su(t.additionalProperties,e,r[o]));return r}s(Xct,"FromObject");function Zct(t,e,n){let r=k1(t,n);if(!ci(r))return r;let i=t.additionalProperties,[o,a]=Object.entries(t.patternProperties)[0],l=new RegExp(o);for(let c of Object.getOwnPropertyNames(r))l.test(c)&&Ite(a)&&(r[c]=Su(a,e,r[c]));if(!Ite(i))return r;for(let c of Object.getOwnPropertyNames(r))l.test(c)||(r[c]=Su(i,e,r[c]));return r}s(Zct,"FromRecord");function eut(t,e,n){return Su(Ki(t,e),e,k1(t,n))}s(eut,"FromRef");function tut(t,e,n){return Su(Ki(t,e),e,n)}s(tut,"FromThis");function nut(t,e,n){let r=k1(t,n);if(!gr(r)||us(t.items))return r;let[i,o]=[t.items,Math.max(t.items.length,r.length)];for(let a=0;a<o;a++)a<i.length&&(r[a]=Su(i[a],e,r[a]));return r}s(nut,"FromTuple");function rut(t,e,n){let r=k1(t,n);for(let i of t.anyOf){let o=Su(i,e,Xi(r));if(fi(i,e,o))return o}return r}s(rut,"FromUnion");function Su(t,e,n){let r=kl(t,e),i=t;switch(i[Ze]){case"Array":return zct(i,r,n);case"Date":return Yct(i,r,n);case"Import":return Kct(i,r,n);case"Intersect":return Jct(i,r,n);case"Object":return Xct(i,r,n);case"Record":return Zct(i,r,n);case"Ref":return eut(i,r,n);case"This":return tut(i,r,n);case"Tuple":return nut(i,r,n);case"Union":return rut(i,r,n);default:return k1(i,n)}}s(Su,"Visit");function FM(...t){return t.length===3?Su(t[0],t[1],t[2]):Su(t[0],[],t[1])}s(FM,"Default");f();f();var bm={};d1(bm,{Delete:()=>sut,Format:()=>u8,Get:()=>lut,Has:()=>aut,Set:()=>iut,ValuePointerRootDeleteError:()=>QM,ValuePointerRootSetError:()=>MM});f();var MM=class extends Ar{static{s(this,"ValuePointerRootSetError")}constructor(e,n,r){super("Cannot set root value"),this.value=e,this.path=n,this.update=r}},QM=class extends Ar{static{s(this,"ValuePointerRootDeleteError")}constructor(e,n){super("Cannot delete root value"),this.value=e,this.path=n}};function E2e(t){return t.indexOf("~")===-1?t:t.replace(/~1/g,"/").replace(/~0/g,"~")}s(E2e,"Escape");function*u8(t){if(t==="")return;let[e,n]=[0,0];for(let r=0;r<t.length;r++)t.charAt(r)==="/"?(r===0||(n=r,yield E2e(t.slice(e,n))),e=r+1):n=r;yield E2e(t.slice(e))}s(u8,"Format");function iut(t,e,n){if(e==="")throw new MM(t,e,n);let[r,i,o]=[null,t,""];for(let a of u8(e))i[a]===void 0&&(i[a]={}),r=i,i=i[a],o=a;r[o]=n}s(iut,"Set");function sut(t,e){if(e==="")throw new QM(t,e);let[n,r,i]=[null,t,""];for(let o of u8(e)){if(r[o]===void 0||r[o]===null)return;n=r,r=r[o],i=o}if(Array.isArray(n)){let o=parseInt(i);n.splice(o,1)}else delete n[i]}s(sut,"Delete");function aut(t,e){if(e==="")return!0;let[n,r,i]=[null,t,""];for(let o of u8(e)){if(r[o]===void 0)return!1;n=r,r=r[o],i=o}return Object.getOwnPropertyNames(n).includes(i)}s(aut,"Has");function lut(t,e){if(e==="")return t;let n=t;for(let r of u8(e)){if(n[r]===void 0)return;n=n[r]}return n}s(lut,"Get");f();function cut(t,e){if(!ci(e))return!1;let n=[...Object.keys(t),...Object.getOwnPropertySymbols(t)],r=[...Object.keys(e),...Object.getOwnPropertySymbols(e)];return n.length!==r.length?!1:n.every(i=>_I(t[i],e[i]))}s(cut,"ObjectType");function uut(t,e){return xu(e)&&t.getTime()===e.getTime()}s(uut,"DateType");function dut(t,e){return!gr(e)||t.length!==e.length?!1:t.every((n,r)=>_I(n,e[r]))}s(dut,"ArrayType");function fut(t,e){return!xf(e)||t.length!==e.length||Object.getPrototypeOf(t).constructor.name!==Object.getPrototypeOf(e).constructor.name?!1:t.every((n,r)=>_I(n,e[r]))}s(fut,"TypedArrayType");function put(t,e){return t===e}s(put,"ValueType");function _I(t,e){if(xu(t))return uut(t,e);if(xf(t))return fut(t,e);if(gr(t))return dut(t,e);if(ci(t))return cut(t,e);if(i0(t))return put(t,e);throw new Error("ValueEquals: Unable to compare value")}s(_I,"Equal");var mut=lo({type:Li("insert"),path:bu(),value:um()}),hut=lo({type:Li("update"),path:bu(),value:um()}),gut=lo({type:Li("delete"),path:bu()}),T2e=ao([mut,hut,gut]),OM=class extends Ar{static{s(this,"ValueDiffError")}constructor(e,n){super(n),this.value=e}};function UM(t,e){return{type:"update",path:t,value:e}}s(UM,"CreateUpdate");function w2e(t,e){return{type:"insert",path:t,value:e}}s(w2e,"CreateInsert");function _2e(t){return{type:"delete",path:t}}s(_2e,"CreateDelete");function I2e(t){if(globalThis.Object.getOwnPropertySymbols(t).length>0)throw new OM(t,"Cannot diff objects with symbols")}s(I2e,"AssertDiffable");function*Aut(t,e,n){if(I2e(e),I2e(n),!IX(n))return yield UM(t,n);let r=globalThis.Object.getOwnPropertyNames(e),i=globalThis.Object.getOwnPropertyNames(n);for(let o of i)hr(e,o)||(yield w2e(`${t}/${o}`,n[o]));for(let o of r)hr(n,o)&&(_I(e,n)||(yield*qM(`${t}/${o}`,e[o],n[o])));for(let o of r)hr(n,o)||(yield _2e(`${t}/${o}`))}s(Aut,"ObjectType");function*yut(t,e,n){if(!gr(n))return yield UM(t,n);for(let r=0;r<Math.min(e.length,n.length);r++)yield*qM(`${t}/${r}`,e[r],n[r]);for(let r=0;r<n.length;r++)r<e.length||(yield w2e(`${t}/${r}`,n[r]));for(let r=e.length-1;r>=0;r--)r<n.length||(yield _2e(`${t}/${r}`))}s(yut,"ArrayType");function*Cut(t,e,n){if(!xf(n)||e.length!==n.length||globalThis.Object.getPrototypeOf(e).constructor.name!==globalThis.Object.getPrototypeOf(n).constructor.name)return yield UM(t,n);for(let r=0;r<Math.min(e.length,n.length);r++)yield*qM(`${t}/${r}`,e[r],n[r])}s(Cut,"TypedArrayType");function*xut(t,e,n){e!==n&&(yield UM(t,n))}s(xut,"ValueType");function*qM(t,e,n){if(IX(e))return yield*Aut(t,e,n);if(gr(e))return yield*yut(t,e,n);if(xf(e))return yield*Cut(t,e,n);if(i0(e))return yield*xut(t,e,n);throw new OM(e,"Unable to diff value")}s(qM,"Visit");function S2e(t,e){return[...qM("",t,e)]}s(S2e,"Diff");function vut(t){return t.length>0&&t[0].path===""&&t[0].type==="update"}s(vut,"IsRootUpdate");function but(t){return t.length===0}s(but,"IsIdentity");function R2e(t,e){if(vut(e))return Xi(e[0].value);if(but(e))return Xi(t);let n=Xi(t);for(let r of e)switch(r.type){case"insert":{bm.Set(n,r.path,r.value);break}case"update":{bm.Set(n,r.path,r.value);break}case"delete":{bm.Delete(n,r.path);break}}return n}s(R2e,"Patch");f();function k2e(...t){let[e,n,r]=t.length===3?[t[0],t[1],t[2]]:[t[0],[],t[1]],i=w1(e,n)?lS(e,n,r):r;if(!fi(e,n,i))throw new aS(e,i,fg(e,n,i).First());return i}s(k2e,"Encode");f();function WM(t){return ci(t)&&!gr(t)}s(WM,"IsStandardObject");var HM=class extends Ar{static{s(this,"ValueMutateError")}constructor(e){super(e)}};function Eut(t,e,n,r){if(!WM(n))bm.Set(t,e,Xi(r));else{let i=Object.getOwnPropertyNames(n),o=Object.getOwnPropertyNames(r);for(let a of i)o.includes(a)||delete n[a];for(let a of o)i.includes(a)||(n[a]=null);for(let a of o)Tte(t,`${e}/${a}`,n[a],r[a])}}s(Eut,"ObjectType");function Iut(t,e,n,r){if(!gr(n))bm.Set(t,e,Xi(r));else{for(let i=0;i<r.length;i++)Tte(t,`${e}/${i}`,n[i],r[i]);n.splice(r.length)}}s(Iut,"ArrayType");function Tut(t,e,n,r){if(xf(n)&&n.length===r.length)for(let i=0;i<n.length;i++)n[i]=r[i];else bm.Set(t,e,Xi(r))}s(Tut,"TypedArrayType");function wut(t,e,n,r){n!==r&&bm.Set(t,e,r)}s(wut,"ValueType");function Tte(t,e,n,r){if(gr(r))return Iut(t,e,n,r);if(xf(r))return Tut(t,e,n,r);if(WM(r))return Eut(t,e,n,r);if(i0(r))return wut(t,e,n,r)}s(Tte,"Visit");function B2e(t){return xf(t)||i0(t)}s(B2e,"IsNonMutableValue");function _ut(t,e){return WM(t)&&gr(e)||gr(t)&&WM(e)}s(_ut,"IsMismatchedValue");function P2e(t,e){if(B2e(t)||B2e(e))throw new HM("Only object and array types can be mutated at the root level");if(_ut(t,e))throw new HM("Cannot assign due type mismatch of assignable values");Tte(t,"",t,e)}s(P2e,"Mutate");f();var GM=class extends Ar{static{s(this,"ParseError")}constructor(e){super(e)}},wte;(function(t){let e=new Map([["Assert",(o,a,l)=>(BM(o,a,l),l)],["Cast",(o,a,l)=>a8(o,a,l)],["Clean",(o,a,l)=>DM(o,a,l)],["Clone",(o,a,l)=>Xi(l)],["Convert",(o,a,l)=>LM(o,a,l)],["Decode",(o,a,l)=>w1(o,a)?sS(o,a,l):l],["Default",(o,a,l)=>FM(o,a,l)],["Encode",(o,a,l)=>w1(o,a)?lS(o,a,l):l]]);function n(o){e.delete(o)}s(n,"Delete"),t.Delete=n;function r(o,a){e.set(o,a)}s(r,"Set"),t.Set=r;function i(o){return e.get(o)}s(i,"Get"),t.Get=i})(wte||(wte={}));var D2e=["Clone","Clean","Default","Convert","Assert","Decode"];function Sut(t,e,n,r){return t.reduce((i,o)=>{let a=wte.Get(o);if(us(a))throw new GM(`Unable to find Parse operation '${o}'`);return a(e,n,i)},r)}s(Sut,"ParseValue");function N2e(...t){let[e,n,r,i]=t.length===4?[t[0],t[1],t[2],t[3]]:t.length===3?gr(t[0])?[t[0],t[1],[],t[2]]:[D2e,t[0],t[1],t[2]]:t.length===2?[D2e,t[0],[],t[1]]:(()=>{throw new GM("Invalid Arguments")})();return Sut(e,n,r,i)}s(N2e,"Parse");f();var $x={};d1($x,{Assert:()=>BM,Cast:()=>a8,Check:()=>fi,Clean:()=>DM,Clone:()=>Xi,Convert:()=>LM,Create:()=>Nf,Decode:()=>b2e,Default:()=>FM,Diff:()=>S2e,Edit:()=>T2e,Encode:()=>k2e,Equal:()=>_I,Errors:()=>fg,Hash:()=>kx,Mutate:()=>P2e,Parse:()=>N2e,Patch:()=>R2e,ValueErrorIterator:()=>Bx});f();var Rut="gpt-4o-copilot",Lf=class t{constructor(e,n=!0){this._ctx=e;this.onModelsFetchedCallbacks=[];this.fetchedModelData=[];this.customModels=[];this.editorPreviewFeaturesDisabled=!1;n&&ia(this._ctx,r=>this.refreshAvailableModels(r))}static{s(this,"AvailableModelsManager")}async refreshAvailableModels(e){await this.refreshModels(e);for(let n of this.onModelsFetchedCallbacks)n()}addHandler(e){this.onModelsFetchedCallbacks.push(e)}getDefaultModelId(){if(this.fetchedModelData){let e=t.filterCompletionModels(this.fetchedModelData,this.editorPreviewFeaturesDisabled)[0];if(e)return e.id}return Rut}parseModelsResponse(e){try{return $x.Parse(KIe,e)}catch(n){or.exception(this._ctx,n,"Failed to parse /models response from CAPI");return}}async refreshModels(e){let n=await this.fetchModels(e);n&&(this.fetchedModelData=n)}async fetchModels(e){return this.customModels=e.getTokenValue("cml")?.split(",")??[],this.editorPreviewFeaturesDisabled=e.getTokenValue("editor_preview_features")=="0",await this.fetch()}async fetch(){let e=await TI(this._ctx,"/models");return e.ok?this.parseModelsResponse(await e.json())?.data??[]:(or.error(this._ctx,"Failed to fetch models from CAPI",{status:e.status,statusText:e.statusText}),null)}getGenericCompletionModels(){let e=t.filterCompletionModels(this.fetchedModelData,this.editorPreviewFeaturesDisabled);return t.mapCompletionModels(e)}getTokenizerForModel(e){let r=this.getGenericCompletionModels().find(i=>i.modelId===e);return r?r.tokenizer:"o200k_base"}static filterCompletionModels(e,n){return e.filter(r=>r.capabilities.type==="completion").filter(r=>!n||r.preview===!1||r.preview===void 0)}static filterModelsWithEditorPreviewFeatures(e,n){return e.filter(r=>!n||r.preview===!1||r.preview===void 0)}static mapCompletionModels(e){return e.map(n=>({modelId:n.id,label:n.name,preview:!!n.preview,tokenizer:n.capabilities.tokenizer}))}getCurrentModelRequestInfo(e=void 0){let n=this.getDefaultModelId(),r=JIe(this._ctx);if(r){let l=this.getGenericCompletionModels().map(c=>c.modelId);l.includes(r)||(l.length>0&&or.error(this._ctx,`User selected model ${r} is not in the list of generic models: ${l.join(", ")}, falling back to default model.`),r=null),n===r&&(r=null)}let i=Ai(this._ctx,wt.DebugOverrideEngine)||Ai(this._ctx,wt.DebugOverrideEngineLegacy);if(i)return new zx(i,"override");let o=e?this._ctx.get(Dt).customEngine(e):"",a=e?this._ctx.get(Dt).customEngineTargetEngine(e):void 0;return r?o&&a&&r===a?new zx(o,"exp"):new zx(r,"modelpicker"):o?new zx(o,"exp"):this.customModels.length>0?new zx(this.customModels[0],"custommodel"):new zx(n,"default")}},zx=class{constructor(e,n){this.modelId=e;this.modelChoiceSource=n}static{s(this,"ModelRequestInfo")}get headers(){return{}}};function Yx(t,e=void 0){let n=t.get(Lf),r=n.getCurrentModelRequestInfo(e),i=n.getTokenizerForModel(r.modelId);return{headers:r.headers,modelId:r.modelId,engineChoiceSource:r.modelChoiceSource,tokenizer:i}}s(Yx,"getEngineRequestInfo");f();f();var po=class{static{s(this,"FileSystem")}};var X2e=je(J2e());function Z2e(t){return t!==void 0&&t!==0}s(Z2e,"isRepoInfo");function eTe(t){if(t===void 0||t===0)return"";let e=B1(t);if(e==="github/github")return e;let n=tdt(t)?.toLowerCase();return n!==void 0?n:""}s(eTe,"getDogFood");function B1(t){if(t!==void 0&&t!==0&&t.hostname==="github.com")return t.owner+"/"+t.repo}s(B1,"tryGetGitHubNWO");function tdt(t){if(t!==void 0&&t!==0&&(t.hostname.endsWith("azure.com")||t.hostname.endsWith("visualstudio.com")))return t.owner+"/"+t.repo}s(tdt,"tryGetADONWO");function Kx(t,e){let n=p0(e);return ndt(t,n)}s(Kx,"extractRepoInfoInBackground");var ndt=sdt(rdt,1e4);async function rdt(t,e){let n=BIe(e);if(!n)return;let r=await idt(t,n);if(!r)return;let i=t.get(po),o=ko(r,".git","config"),a;try{a=await i.readFileString(o)}catch{return}let l=odt(a)??"",c=kte(l),u={uri:r};return c===void 0?{baseFolder:u,url:l,hostname:"",owner:"",repo:"",pathname:""}:{baseFolder:u,url:l,...c}}s(rdt,"extractRepoInfo");function kte(t){let e;try{if(e=(0,X2e.default)(t),e.resource==""||e.owner==""||e.name==""||e.pathname=="")return}catch{return}return{hostname:e.resource,owner:e.owner,repo:e.name,pathname:e.pathname}}s(kte,"parseRepoUrl");async function idt(t,e){let n=e+"_add_to_make_longer",r=t.get(po);for(;e!=="file:///"&&e.length<n.length;){let i=ko(e,".git","config"),o=!1;try{await r.stat(i),o=!0}catch{o=!1}if(o)return e;n=e,e=p0(e)}}s(idt,"getRepoBaseUri");function odt(t){let e=/^\s*\[\s*remote\s+"((\\\\|\\"|[^\\"])+)"/,n=/^\s*\[remote.([^"\s]+)/,r=/^\s*url\s*=\s*([^\s#;]+)/,i=/^\s*\[/,o,a,l=!1;for(let c of t.split(`
`))if(l&&o!==void 0){if(o+=c,c.endsWith("\\"))o=o.substring(0,o.length-1);else if(l=!1,a==="origin")return o}else{let u=c.match(e)??c.match(n);if(u)a=u[1];else if(c.match(i))a=void 0;else{if(o&&a!=="origin")continue;{let d=c.match(r);if(d){if(o=d[1],o.endsWith("\\"))o=o.substring(0,o.length-1),l=!0;else if(a==="origin")return o}}}}return o}s(odt,"getRepoUrlFromConfigText");var Rte=class{static{s(this,"CompletedComputation")}constructor(e){this.result=e}};function sdt(t,e){let n=new Kn(e),r=new Set;return(i,...o)=>{let a=JSON.stringify(o),l=n.get(a);if(l)return l.result;if(r.has(a))return 0;let c=t(i,...o);return r.add(a),c.then(u=>{n.set(a,new Rte(u)),r.delete(a)}),0}}s(sdt,"computeInBackgroundAndMemoize");f();var d8=500,tTe=8192-d8,nTe=4,jM=10,rTe=15,adt={javascriptreact:"javascript",jsx:"javascript",typescriptreact:"typescript",jade:"pug",cshtml:"razor",c:"cpp"};function f8(t){return t=t.toLowerCase(),adt[t]??t}s(f8,"normalizeLanguageId");var Bte=class{constructor(e){this.ctx=e;this.cache=new Kn(200)}static{s(this,"FilterSettingsToExpConfigs")}async fetchExpConfig(e,n){let r=e.stringify()+`
`+JSON.stringify(n),i=this.cache.get(r);return i||(i=new Pte(()=>this.ctx.get(Cm).fetchExperiments(this.ctx,n,e.toHeaders()),1e3*60*60),this.cache.set(r,i)),i.run()}getCachedExpConfig(e){return this.cache.get(e.stringify())?.value()}},Pte=class{constructor(e,n=1/0){this.producer=e;this.expirationMs=n}static{s(this,"Task")}async run(){return this.promise===void 0&&(this.promise=this.producer(),this.storeResult(this.promise).then(()=>{this.expirationMs<1/0&&this.promise!==void 0&&setTimeout(()=>this.promise=void 0,this.expirationMs)})),this.promise}async storeResult(e){try{this.result=await e}finally{this.result===void 0&&(this.promise=void 0)}}value(){return this.result}};function cdt(t){return"uri"in t}s(cdt,"isCompletionsFiltersInfo");var Dt=class t{constructor(e){this.ctx=e;this.staticFilters={};this.dynamicFilters={};this.dynamicFilterGroups=[];this.upcomingDynamicFilters={};this.assignments=new Bte(this.ctx)}static{s(this,"Features")}static{this.upcomingDynamicFilterCheckDelayMs=20}static{this.upcomingTimeBucketMinutes=5+Math.floor(Math.random()*11)}registerStaticFilters(e){Object.assign(this.staticFilters,e)}registerDynamicFilter(e,n){this.dynamicFilters[e]=n}registerDynamicFilterGroup(e){this.dynamicFilterGroups.push(e)}getDynamicFilterValues(){let e={};for(let n of this.dynamicFilterGroups)Object.assign(e,n());for(let[n,r]of Object.entries(this.dynamicFilters))e[n]=r();return e}registerUpcomingDynamicFilter(e,n){this.upcomingDynamicFilters[e]=n}async updateExPValuesAndAssignments(e,n=ir.createAndMarkAsIssued(),r=void 0){if(n instanceof gg)throw new Error("updateExPValuesAndAssignments should not be called with TelemetryWithExp");let i=e&&cdt(e)?Kx(this.ctx,e.uri):void 0,o=B1(i)??"",a=eTe(i)??"",l=e?.languageId??"",c=Yx(this.ctx).modelId;r??=await this.ctx.get(Gn).getToken();let u=bIe(r),d=r.getTokenValue("ft")??"",p=r.getTokenValue("ol")??"",m=r.getTokenValue("cml")??"",h=r.getTokenValue("tid")??"",g=r.endpoints,y={"X-Copilot-Repository":o,"X-Copilot-FileType":l,"X-Copilot-UserKind":u,"X-Copilot-Dogfood":a,"X-Copilot-Engine":c,"X-Copilot-CustomModel":d,"X-Copilot-Orgs":p,"X-Copilot-CustomModelNames":m,"X-Copilot-CopilotTrackingId":h},v=this.getGranularityDirectory(),b=this.makeFilterSettings(y),E=v.extendFilters(b),_=await this.getExpConfig(E.newFilterSettings,g);v.update(b,+(_.variables.copilotbycallbuckets??NaN),+(_.variables.copilottimeperiodsizeinh??NaN));let k=v.extendFilters(b),P=k.newFilterSettings,N=await this.getExpConfig(P,g),U=new Promise(ne=>setTimeout(ne,t.upcomingDynamicFilterCheckDelayMs));for(let ne of k.otherFilterSettingsToPrefetch)U=U.then(async()=>{await new Promise(he=>setTimeout(he,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(ne,g)});return this.prepareForUpcomingFilters(P,g),new gg(n.properties,n.measurements,n.issuedTime,{filters:P,exp:N})}getGranularityDirectory(){if(!this.granularityDirectory){let e=this.ctx.get(Ps).machineId;this.granularityDirectory=new gM(e,this.ctx.get(yg))}return this.granularityDirectory}makeFilterSettings(e){return new tI({...this.staticFilters,...this.getDynamicFilterValues(),...e})}async getExpConfig(e,n){try{return this.assignments.fetchExpConfig(e,n)}catch(r){return Af.createFallbackConfig(this.ctx,`Error fetching ExP config: ${String(r)}`)}}async prepareForUpcomingFilters(e,n){if(!(new Date().getMinutes()<60-t.upcomingTimeBucketMinutes))for(let[r,i]of Object.entries(this.upcomingDynamicFilters))await new Promise(o=>setTimeout(o,t.upcomingDynamicFilterCheckDelayMs)),this.getExpConfig(e.withChange(r,i()),n)}stringify(){let e=this.assignments.getCachedExpConfig(new tI({}));return JSON.stringify(e?.variables??{})}async getFallbackExpAndFilters(){let e=this.makeFilterSettings({}),n=aM(this.ctx),r=await this.getExpConfig(e,n);return{filters:e,exp:r}}disableLogProb(e){return e.filtersAndExp.exp.variables.copilotdisablelogprob??!0}overrideBlockMode(e){return e.filtersAndExp.exp.variables.copilotoverrideblockmode||void 0}customEngine(e){return e.filtersAndExp.exp.variables.copilotcustomengine??""}customEngineTargetEngine(e){return e.filtersAndExp.exp.variables.copilotcustomenginetargetengine}suffixPercent(e){return e.filtersAndExp.exp.variables.CopilotSuffixPercent??rTe}suffixMatchThreshold(e){return e.filtersAndExp.exp.variables.copilotsuffixmatchthreshold??jM}cppHeadersEnableSwitch(e){return e.filtersAndExp.exp.variables.copilotcppheadersenableswitch??!1}relatedFilesVSCodeCSharp(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscodecsharp??!1}relatedFilesVSCodeTypeScript(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscodetypescript??!1}relatedFilesVSCode(e){return e.filtersAndExp.exp.variables.copilotrelatedfilesvscode??!1}contextProviders(e){let n=e.filtersAndExp.exp.variables.copilotcontextproviders??"";return n?n.split(",").map(r=>r.trim()):[]}contextProviderTimeBudget(e){return e.filtersAndExp.exp.variables.copilotcontextprovidertimebudget??150}includeNeighboringFiles(e){return e.filtersAndExp.exp.variables.copilotincludeneighboringfiles??!1}excludeRelatedFiles(e){return e.filtersAndExp.exp.variables.copilotexcluderelatedfiles??!1}maxPromptCompletionTokens(e){return e.filtersAndExp.exp.variables.maxpromptcompletionTokens??tTe+d8}ideChatMaxRequestTokens(e){return e.filtersAndExp.exp.variables.idechatmaxrequesttokens??-1}ideChatExpModelIds(e){return e.filtersAndExp.exp.variables.idechatexpmodelids??""}ideChatEnableProjectMetadata(e){return e.filtersAndExp.exp.variables.idechatenableprojectmetadata??!1}workspaceContextCoordinator(e){return e.filtersAndExp.exp.variables.copilotworkspacecontextcoordinator??!1}triggerCompletionAfterAccept(e){return e.filtersAndExp.exp.variables.copilottriggercompletionafteraccept}enableSpeculativeRequests(e){return e.filtersAndExp.exp.variables.copilotspeculativerequests??!1}enableSpeculativeRequestsShown(e){return e.filtersAndExp.exp.variables.copilotspeculativerequestsshown??!1}cppContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotcppContextProviderParams}csharpContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotcsharpcontextproviderparams}javaContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotjavacontextproviderparams}multiLanguageContextProviderParams(e){return e.filtersAndExp.exp.variables.copilotmultilanguagecontextproviderparams}tsContextProviderParams(e){return e.filtersAndExp.exp.variables.copilottscontextproviderparams}vscodeDebounceThreshold(e){return e.filtersAndExp.exp.variables.copilotvscodedebouncethreshold}enableElectronFetcher(e){return e.filtersAndExp.exp.variables.copilotelectronfetcher??!1}asyncCompletionsTimeout(e){return e.filtersAndExp.exp.variables.copilotasynccompletionstimeout??200}enablePromptContextProxyField(e){return e.filtersAndExp.exp.variables.copilotenablepromptcontextproxyfield??!1}enableProgressiveReveal(e){return e.filtersAndExp.exp.variables.copilotprogressivereveal??!1}modelAlwaysTerminatesSingleline(e){return e.filtersAndExp.exp.variables.copilotmodelterminatesingleline??!1}longLookaheadSize(e){return e.filtersAndExp.exp.variables.copilotprogressivereveallonglookaheadsize??7}shortLookaheadSize(e){return e.filtersAndExp.exp.variables.copilotprogressiverevealshortlookaheadsize??3}enableMultilineAfterAccept(e){return e.filtersAndExp.exp.variables.copilotmultilineafteraccept??!1}multilineAfterAcceptLines(e){return e.filtersAndExp.exp.variables.copilotmultilineafteracceptlines??1}enableNESXTab(e){return e.filtersAndExp.exp.variables.copilotnesxtab??!1}getNESXTabModelID(e){return e.filtersAndExp.exp.variables.copilotnesxtabmodelid??"copilot-nes-xtab"}completionsDelay(e){return e.filtersAndExp.exp.variables.copilotcompletionsdelay??0}singleLineUnlessAccepted(e){return e.filtersAndExp.exp.variables.copilotsinglelineunlessaccepted??!1}delayCompletionItemProviders(e){return e.filtersAndExp.exp.variables.copilotdelaycompletionitemproviders??!1}};f();f();var VM=je(iTe());var Nte={python:"python",javascript:"javascript",javascriptreact:"javascript",jsx:"javascript",typescript:"typescript",typescriptreact:"tsx",go:"go",ruby:"ruby",csharp:"c_sharp",java:"java",php:"php",c:"cpp",cpp:"cpp"};function A0(t){return t in Nte&&t!=="csharp"&&t!=="java"&&t!=="php"&&t!=="c"&&t!=="cpp"}s(A0,"isSupportedLanguageId");function $M(t){if(!(t in Nte))throw new Error(`Unrecognized language: ${t}`);return Nte[t]}s($M,"languageIdToWasmLanguage");var Dte=new Map;async function udt(t){let e;try{e=await bM(`tree-sitter-${t}.wasm`)}catch(n){throw n instanceof Error&&"code"in n&&typeof n.code=="string"&&n.name==="Error"?new DS(`Could not load tree-sitter-${t}.wasm`,n):n}return VM.default.Language.load(e)}s(udt,"loadWasmLanguage");function ddt(t){let e=$M(t);if(!Dte.has(e)){let n=udt(e);Dte.set(e,n)}return Dte.get(e)}s(ddt,"getLanguage");var Lte=class extends Error{static{s(this,"WrappedError")}constructor(e,n){super(e,{cause:n})}};async function P1(t,e){await VM.default.init({locateFile:s(o=>cte(o),"locateFile")});let n;try{n=new VM.default}catch(o){throw o&&typeof o=="object"&&"message"in o&&typeof o.message=="string"&&o.message.includes("table index is out of bounds")?new Lte(`Could not init Parse for language <${t}>`,o):o}let r=await ddt(t);n.setLanguage(r);let i=n.parse(e);return n.delete(),i}s(P1,"parseTreeSitter");function oTe(t){switch($M(t)){case"python":return null;case"javascript":case"typescript":case"tsx":case"go":case"c_sharp":case"java":case"php":case"cpp":return"}";case"ruby":return"end"}}s(oTe,"getBlockCloseToken");function fdt(t,e){let n=[];for(let r of t){if(!r[1]){let i=e.tree.getLanguage();r[1]=i.query(r[0])}n.push(...r[1].matches(e))}return n}s(fdt,"innerQuery");var pdt=[`[
    (class_definition (block (expression_statement (string))))
    (function_definition (block (expression_statement (string))))
]`];function sTe(t){return fdt([pdt],t).length==1}s(sTe,"queryPythonIsDocstring");var vg=class{constructor(e){this.node=e;this.children=[];this.collapsed=!1}static{s(this,"StatementNode")}addChild(e){e.parent=this,e.nextSibling=void 0,this.children.length>0&&(this.children[this.children.length-1].nextSibling=e),this.children.push(e)}childrenFinished(){}containsStatement(e){return this.node.startIndex<=e.node.startIndex&&this.node.endIndex>=e.node.endIndex}statementAt(e){if(this.node.startIndex>e||this.node.endIndex<e)return;let n;return this.children.find(r=>(n=r.statementAt(e),n!==void 0)),n??this}collapse(){this.children.length=0,this.collapsed=!0}get description(){return`${this.node.type} ([${this.node.startPosition.row},${this.node.startPosition.column}]..[${this.node.endPosition.row},${this.node.endPosition.column}]): ${JSON.stringify(this.node.text.length>33?this.node.text.substring(0,15)+"..."+this.node.text.slice(-15):this.node.text)}`}dump(e="",n=""){let r=[`${e}${this.description}`];return this.children.forEach(i=>{r.push(i.dump(`${n}+- `,i.nextSibling===void 0?`${n}   `:`${n}|  `))}),r.join(`
`)}dumpPath(e="",n="",r=!1){if(this.parent){let i=this.parent.dumpPath(e,n,!0),o=i.length-i.lastIndexOf(`
`)-1-n.length,a=" ".repeat(o),l=r?`
${n}${a}+- `:"";return i+this.description+l}else{let i=r?`
${n}+- `:"";return e+this.description+i}}},jc=class{constructor(e,n,r,i){this.languageId=e;this.text=n;this.startOffset=r;this.endOffset=i;this.statements=[]}static{s(this,"StatementTree")}static isSupported(e){return p8.languageIds.has(e)||m8.languageIds.has(e)||h8.languageIds.has(e)||g8.languageIds.has(e)||A8.languageIds.has(e)||y8.languageIds.has(e)||C8.languageIds.has(e)||x8.languageIds.has(e)}static create(e,n,r,i){if(p8.languageIds.has(e))return new p8(e,n,r,i);if(m8.languageIds.has(e))return new m8(e,n,r,i);if(h8.languageIds.has(e))return new h8(e,n,r,i);if(y8.languageIds.has(e))return new y8(e,n,r,i);if(g8.languageIds.has(e))return new g8(e,n,r,i);if(A8.languageIds.has(e))return new A8(e,n,r,i);if(C8.languageIds.has(e))return new C8(e,n,r,i);if(x8.languageIds.has(e))return new x8(e,n,r,i);throw new Error(`Unsupported languageId: ${e}`)}[Symbol.dispose](){this.tree&&(this.tree.delete(),this.tree=void 0)}clear(){this.statements.length=0}statementAt(e){let n;return this.statements.find(r=>(n=r.statementAt(e),n!==void 0)),n}async build(){let e=[];this.clear();let n=await this.parse();this.getStatementQuery(n).captures(n.rootNode,this.offsetToPosition(this.startOffset),this.offsetToPosition(this.endOffset)).forEach(i=>{let o=this.createNode(i.node);for(;e.length>0&&!e[0].containsStatement(o);)e.shift()?.childrenFinished();e.length>0?e[0].addChild(o):this.addStatement(o),e.unshift(o)}),e.forEach(i=>i.childrenFinished())}addStatement(e){e.parent=void 0,e.nextSibling=void 0,this.statements.length>0&&(this.statements[this.statements.length-1].nextSibling=e),this.statements.push(e)}async parse(){return this.tree||(this.tree=await P1(this.languageId,this.text)),this.tree}getStatementQuery(e){return this.getQuery(e.getLanguage(),this.getStatementQueryText())}getQuery(e,n){return e.query(n)}offsetToPosition(e){let n=this.text.slice(0,e).split(`
`),r=n.length-1,i=n[n.length-1].length;return{row:r,column:i}}dump(e=""){let n=[];return this.statements.forEach((r,i)=>{let o=`[${i}]`,a=" ".repeat(o.length);n.push(r.dump(`${e} ${o} `,`${e} ${a} `))}),n.join(`
`)}},Fte=class t extends vg{static{s(this,"JSStatementNode")}static{this.compoundTypeNames=new Set(["function_declaration","generator_function_declaration","class_declaration","statement_block","if_statement","switch_statement","for_statement","for_in_statement","while_statement","do_statement","try_statement","with_statement","labeled_statement","method_definition","interface_declaration"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="statement_block"||this.children.length===2&&this.node.childForFieldName("else")!==null&&this.children[0].node.type!=="statement_block"&&this.children[1].node.type!=="statement_block"}},p8=class extends jc{static{s(this,"JSStatementTree")}static{this.languageIds=new Set(["javascript","javascriptreact","jsx","typescript","typescriptreact"])}createNode(e){return new Fte(e)}getStatementQueryText(){return`[
            (export_statement)
            (import_statement)
            (debugger_statement)
            (expression_statement)
            (declaration)
            (statement_block)
            (if_statement)
            (switch_statement)
            (for_statement)
            (for_in_statement)
            (while_statement)
            (do_statement)
            (try_statement)
            (with_statement)
            (break_statement)
            (continue_statement)
            (return_statement)
            (throw_statement)
            (empty_statement)
            (labeled_statement)
            (method_definition)
            (public_field_definition)
        ] @statement`}},Mte=class t extends vg{static{s(this,"PyStatementNode")}static{this.compoundTypeNames=new Set(["if_statement","for_statement","while_statement","try_statement","with_statement","function_definition","class_definition","decorated_definition","match_statement","block"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"?!1:this.node.startPosition.row===this.node.endPosition.row}},m8=class extends jc{static{s(this,"PyStatementTree")}static{this.languageIds=new Set(["python"])}createNode(e){return new Mte(e)}getStatementQueryText(){return`[
            (future_import_statement)
            (import_statement)
            (import_from_statement)
            (print_statement)
            (assert_statement)
            (expression_statement)
            (return_statement)
            (delete_statement)
            (raise_statement)
            (pass_statement)
            (break_statement)
            (continue_statement)
            (global_statement)
            (nonlocal_statement)
            (exec_statement)
            (if_statement)
            (for_statement)
            (while_statement)
            (try_statement)
            (with_statement)
            (function_definition)
            (class_definition)
            (decorated_definition)
            (match_statement)
            (block)
        ] @statement`}},Qte=class t extends vg{static{s(this,"GoStatementNode")}static{this.compoundTypeNames=new Set(["function_declaration","method_declaration","if_statement","for_statement","expression_switch_statement","type_switch_statement","select_statement","block"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},h8=class extends jc{static{s(this,"GoStatementTree")}static{this.languageIds=new Set(["go"])}createNode(e){return new Qte(e)}getStatementQueryText(){return`[
            (package_clause)
            (function_declaration)
            (method_declaration)
            (import_declaration)
            (_statement)
            (block)
        ] @statement`}},Ote=class t extends vg{static{s(this,"PhpStatementNode")}static{this.compoundTypeNames=new Set(["if_statement","else_clause","else_if_clause","for_statement","foreach_statement","while_statement","do_statement","switch_statement","try_statement","catch_clause","finally_clause","anonymous_function","compound_statement"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},g8=class extends jc{static{s(this,"PhpStatementTree")}static{this.languageIds=new Set(["php"])}createNode(e){return new Ote(e)}getStatementQueryText(){return`[
            (statement)
            (compound_statement)
            (method_declaration)
            (property_declaration)
            (const_declaration)
            (use_declaration)
        ] @statement`}},Ute=class t extends vg{static{s(this,"RubyStatementNode")}static{this.compoundTypeNames=new Set(["if","case","while","until","for","begin","module","class","method"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}},A8=class extends jc{static{s(this,"RubyStatementTree")}static{this.languageIds=new Set(["ruby"])}createNode(e){return new Ute(e)}getStatementQueryText(){return`[
            (_statement)
            (when)
        ] @statement`}},qte=class t extends vg{static{s(this,"JavaStatementNode")}static{this.compoundTypeNames=new Set(["block","do_statement","enhanced_for_statement","for_statement","if_statement","labeled_statement","switch_expression","synchronized_statement","try_statement","try_with_resources_statement","while_statement","interface_declaration","method_declaration","constructor_declaration","compact_constructor_declaration","class_declaration","annotation_type_declaration","static_initializer"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="block"}},y8=class extends jc{static{s(this,"JavaStatementTree")}static{this.languageIds=new Set(["java"])}createNode(e){return new qte(e)}getStatementQueryText(){return`[
            (statement)
            (field_declaration)
            (record_declaration)
            (method_declaration)
            (compact_constructor_declaration)
            (class_declaration)
            (interface_declaration)
            (annotation_type_declaration)
            (enum_declaration)
            (block)
            (static_initializer)
            (constructor_declaration)
            ] @statement`}},Wte=class t extends vg{static{s(this,"CSharpStatementNode")}static{this.compoundTypeNames=new Set(["block","checked_statement","class_declaration","constructor_declaration","destructor_declaration","do_statement","fixed_statement","for_statement","foreach_statement","if_statement","interface_declaration","lock_statement","method_declaration","struct_declaration","switch_statement","try_statement","unsafe_statement","while_statement"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){this.isSingleLineIfStatement()&&this.collapse()}isSingleLineIfStatement(){return this.node.type!=="if_statement"||this.node.startPosition.row!==this.node.endPosition.row?!1:this.children.length===1&&this.children[0].node.type!=="block"}},C8=class extends jc{static{s(this,"CSharpStatementTree")}static{this.languageIds=new Set(["csharp"])}createNode(e){return new Wte(e)}getStatementQueryText(){return`[
            (extern_alias_directive)
            (using_directive)
            (global_attribute)
            (preproc_if)
            (namespace_declaration)
            (file_scoped_namespace_declaration)
            (statement)
            (type_declaration)
            (declaration)
            (accessor_declaration)
            (block)
        ] @statement`}},Hte=class t extends vg{static{s(this,"CStatementNode")}static{this.compoundTypeNames=new Set(["declaration","function_definition","enum_specifier","field_declaration_list","type_definition","compound_statement","if_statement","switch_statement","while_statement","for_statement","do_statement","preproc_if","preproc_ifdef","namespace_definition","class_specifier","field_declaration_list","concept_definition","template_declaration"])}get isCompoundStatementType(){return!this.collapsed&&t.compoundTypeNames.has(this.node.type)}childrenFinished(){(this.isSingleLineDeclarationStatement()||this.isSingleLineConceptDefinition())&&this.collapse()}isSingleLineDeclarationStatement(){return!(this.node.type!=="declaration"||this.node.startPosition.row!==this.node.endPosition.row)}isSingleLineConceptDefinition(){return!(this.node.type!=="concept_definition"||this.node.startPosition.row!==this.node.endPosition.row)}},x8=class extends jc{static{s(this,"CStatementTree")}static{this.languageIds=new Set(["c","cpp"])}createNode(e){return new Hte(e)}getStatementQueryText(){return`[
            (declaration)
            (function_definition)
            (type_definition)
            (field_declaration)
            (enum_specifier)
            (return_statement)
            (compound_statement)
            (if_statement)
            (expression_statement)
            (switch_statement)
            (break_statement)
            (case_statement)
            (while_statement)
            (for_statement)
            (do_statement)
            (goto_statement)
            (labeled_statement)
            (preproc_if)
            (preproc_def)
            (preproc_ifdef)
            (preproc_include)
            (preproc_call)
            (preproc_function_def)
            (continue_statement)

            ;C++ specific:
            (namespace_definition)
            (class_specifier)
            (field_declaration_list)
            (field_declaration)
            (concept_definition)
            (compound_requirement)
            (template_declaration)
            (using_declaration)
            (alias_declaration)
            (static_assert_declaration)
        ] @statement`}};f();function mdt(t){return t.HTTPS_PROXY||t.https_proxy||t.HTTP_PROXY||t.http_proxy}s(mdt,"getProxyFromEnvironment");function hdt(t){return t.NODE_TLS_REJECT_UNAUTHORIZED!=="0"}s(hdt,"getRejectUnauthorizedFromEnvironment");var aTe=I.Object({proxy:I.Optional(I.String()),proxyStrictSSL:I.Optional(I.Boolean()),proxyAuthorization:I.Optional(I.String()),proxyKerberosServicePrincipal:I.Optional(I.String())});function lTe(t){let e=mdt(t),n=v8({proxy:e,proxyStrictSSL:hdt(t)}),r=t.GH_COPILOT_KERBEROS_SERVICE_PRINCIPAL??t.GITHUB_COPILOT_KERBEROS_SERVICE_PRINCIPAL??t.AGENT_KERBEROS_SERVICE_PRINCIPAL;return r&&(n.proxyKerberosServicePrincipal=r),n}s(lTe,"getHttpSettingsFromEnvironment");function v8(t){if(!t.proxy)return{...t,proxy:""};try{let{protocol:e,host:n,username:r,password:i,pathname:o,search:a,hash:l}=new URL(t.proxy);return{...t,proxy:`${e}//${n}${o}${a}${l}`,proxyAuthorization:t.proxyAuthorization||gdt(r,i)}}catch{return{...t,proxy:""}}}s(v8,"normalizeHttpSettings");function gdt(t,e){return!t||!e?"":`${decodeURIComponent(t)}:${decodeURIComponent(e)}`}s(gdt,"getAuth");var uTe=je(require("events"));var Gte={};d1(Gte,{activationEvents:()=>Fdt,badges:()=>Ldt,browser:()=>Mdt,bugs:()=>_dt,build:()=>vdt,buildType:()=>bdt,categories:()=>Ddt,contributes:()=>jte,default:()=>Gdt,dependencies:()=>Wdt,description:()=>Cdt,devDependencies:()=>qdt,displayName:()=>ydt,enabledApiProposals:()=>Odt,engines:()=>Pdt,extensionPack:()=>Bdt,homepage:()=>Tdt,icon:()=>Rdt,keywords:()=>Ndt,license:()=>wdt,main:()=>Qdt,name:()=>Adt,overrides:()=>Hdt,preview:()=>Idt,pricing:()=>kdt,publisher:()=>Edt,qna:()=>Sdt,scripts:()=>Udt,version:()=>xdt});var Adt="copilot",ydt="GitHub Copilot",Cdt="Your AI pair programmer",xdt="1.343.0",vdt="1671",bdt="prod",Edt="GitHub",Idt=!1,Tdt="https://github.com/features/copilot?editor=vscode",wdt="https://docs.github.com/en/site-policy/github-terms/github-terms-for-additional-products-and-features",_dt={url:"https://github.com/microsoft/vscode/issues"},Sdt="https://github.com/github-community/community/discussions/categories/copilot",Rdt="assets/Copilot-App-Icon.png",kdt="Trial",Bdt=["GitHub.copilot-chat","GitHub.copilot"],Pdt={vscode:"^1.98.0",node:">=20.0.0",npm:">=9.0.0"},Ddt=["AI","Chat","Programming Languages","Machine Learning"],Ndt=["ai","openai","codex","pilot","snippets","documentation","autocomplete","intellisense","refactor","javascript","python","typescript","php","go","golang","ruby","c++","c#","java","kotlin","co-pilot"],Ldt=[{url:"https://img.shields.io/badge/GitHub%20Copilot-Subscription%20Required-orange",href:"https://github.com/github-copilot/signup?editor=vscode",description:"Sign up for GitHub Copilot"},{url:"https://img.shields.io/github/stars/github/copilot-docs?style=social",href:"https://github.com/github/copilot-docs",description:"Star Copilot on GitHub"},{url:"https://img.shields.io/youtube/channel/views/UC7c3Kb6jYCRj4JOHHZTxKsQ?style=social",href:"https://www.youtube.com/@GitHub/search?query=copilot",description:"Check out GitHub on Youtube"},{url:"https://img.shields.io/twitter/follow/github?style=social",href:"https://twitter.com/github",description:"Follow GitHub on Twitter"}],Fdt=["onStartupFinished"],Mdt="./dist/web",Qdt="./dist/extension",Odt=["inlineCompletionsAdditions"],jte={commands:[{command:"github.copilot.toggleStatusMenu",title:"Open Status Menu",category:"GitHub Copilot"},{command:"github.copilot.signIn",title:"Sign In",category:"GitHub Copilot",enablement:"!github.copilot.activated"},{command:"github.copilot.acceptCursorPanelSolution",title:"Accept Panel Suggestion at the Cursor",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.previousPanelSolution",title:"Navigate to the Previous Panel Suggestion",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.nextPanelSolution",title:"Navigate to the Next Panel Suggestion",enablement:"github.copilot.panelVisible",category:"GitHub Copilot"},{command:"github.copilot.generate",title:"Open Completions Panel",enablement:"github.copilot.activated && !isWeb",category:"GitHub Copilot"},{command:"github.copilot.generateComparison",title:"Open Comparison Panel",enablement:"github.copilot.activated && !isWeb && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.acceptCursorComparisonPanelSolution",title:"Accept Comparison Panel Suggestion at the Cursor",enablement:"github.copilot.comparisonPanelVisible && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.previousComparisonPanelSolution",title:"Navigate to the Previous Comparison Panel Suggestion",enablement:"github.copilot.comparisonPanelVisible && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.nextComparisonPanelSolution",title:"Navigate to the Next Comparison Panel Suggestion",enablement:"github.copilot.comparisonPanelVisible && github.copilot.comparisonPanelEnabled",category:"GitHub Copilot"},{command:"github.copilot.completions.disable",title:"Disable Completions",enablement:"github.copilot.activated && config.editor.inlineSuggest.enabled && github.copilot.completions.enabled",category:"GitHub Copilot"},{command:"github.copilot.completions.enable",title:"Enable Completions",enablement:"github.copilot.activated && !(config.editor.inlineSuggest.enabled && github.copilot.completions.enabled)",category:"GitHub Copilot"},{command:"github.copilot.completions.toggle",title:"Toggle (Enable/Disable) Completions",enablement:"github.copilot.activated",category:"GitHub Copilot"},{command:"github.copilot.sendFeedback",title:"Send Feedback",category:"GitHub Copilot"},{command:"github.copilot.collectDiagnostics",title:"Collect Diagnostics",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github.copilot.openLogs",title:"Open Logs",category:"GitHub Copilot"},{command:"github.copilot.openModelPicker",title:"Change Completions Model",category:"GitHub Copilot",enablement:"!isWeb"},{command:"github.copilot.sendCompletionFeedback",title:"Send Copilot Completion Feedback",category:"GitHub Copilot",enablement:"!isWeb"}],keybindings:[{command:"github.copilot.acceptCursorPanelSolution",key:"ctrl+/",mac:"ctrl+/",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.previousPanelSolution",key:"alt+[",mac:"alt+[",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.nextPanelSolution",key:"alt+]",mac:"alt+]",when:"activeWebviewPanelId == 'GitHub Copilot Suggestions'"},{command:"github.copilot.acceptCursorComparisonPanelSolution",key:"ctrl+shift+/",mac:"ctrl+shift+/",when:"activeWebviewPanelId == 'GitHub Copilot Comparison' && github.copilot.comparisonPanelEnabled"},{command:"github.copilot.previousComparisonPanelSolution",key:"alt+shift+[",mac:"alt+shift+[",when:"activeWebviewPanelId == 'GitHub Copilot Comparison' && github.copilot.comparisonPanelEnabled"},{command:"github.copilot.nextComparisonPanelSolution",key:"alt+shift+]",mac:"alt+shift+]",when:"activeWebviewPanelId == 'GitHub Copilot Comparison' && github.copilot.comparisonPanelEnabled"},{command:"editor.action.inlineSuggest.trigger",key:"alt+\\",when:"editorTextFocus && !editorHasSelection && !inlineSuggestionsVisible"}],configuration:[{title:"GitHub Copilot",properties:{"github.copilot.selectedCompletionModel":{type:"string",default:"",markdownDescription:'The currently selected completion model ID. To select from a list of available models, use the __"Change Completions Model"__ command or open the model picker (from the Copilot menu in the VS Code title bar, select __"Configure Code Completions"__ then __"Change Completions Model"__. The value must be a valid model ID. An empty value indicates that the default model will be used.'},"github.copilot.advanced":{type:"object",title:"Advanced Settings",properties:{authProvider:{type:"string",enum:["github","github-enterprise"],enumDescriptions:["GitHub.com","GitHub Enterprise"],default:"github",description:"The GitHub identity to use for Copilot"},authPermissions:{type:"string",enum:["default","minimal"],markdownEnumDescriptions:["Default (recommended) - The default permissions enable the best that Copilot has to offer including, but not limited to, faster repo indexing and the power of the `@github` agent.","Minimal - The minimal permissions required for Copilot functionality."],default:"default",markdownDescription:"Controls what kind of permissions are asked for when signing in to Copilot. The options are\n* `default` - (strongly recommended) The default permissions enable the best that Copilot has to offer including, but not limited to, faster repo indexing and the power of the `@github` agent.\n* `minimal` - The minimal permissions are the least that Copilot needs to function. Some features may behave slower or not at all."},useLanguageServer:{type:"boolean",default:!1,description:"Experimental: Use language server"},"debug.overrideEngine":{type:"string",default:"",description:"Override engine name"},"debug.overrideProxyUrl":{type:"string",default:"",description:"Override GitHub authentication proxy full URL"},"debug.testOverrideProxyUrl":{type:"string",default:"",description:"Override GitHub authentication proxy URL when running tests"},"debug.overrideCapiUrl":{type:"string",default:"",description:"Override GitHub Copilot API full URL"},"debug.testOverrideCapiUrl":{type:"string",default:"",description:"Override GitHub Copilot API URL when running tests"},"debug.filterLogCategories":{type:"array",default:[],deprecationMessage:"Set overrideLogLevels.* to ERROR to filter out unwanted categories.",description:"Show only log categories listed in this setting. If an array is empty, show all loggers"}}},"github.copilot.enable":{type:"object",scope:"window",default:{"*":!0,plaintext:!1,markdown:!1,scminput:!1},additionalProperties:{type:"boolean"},markdownDescription:"Enable or disable auto triggering of Copilot completions for specified [languages](https://code.visualstudio.com/docs/languages/identifiers). You can still trigger suggestions manually using `Alt + \\`"}}}],configurationDefaults:{"editor.tokenColorCustomizations":{"[*Light*]":{textMateRules:[{scope:"ref.matchtext",settings:{foreground:"#000"}}]},"[*Dark*]":{textMateRules:[{scope:"ref.matchtext",settings:{foreground:"#fff"}}]}}},languages:[{id:"code-referencing"}],grammars:[{language:"code-referencing",scopeName:"text.ref",path:"./syntaxes/ref.tmGrammar.json"}],iconFonts:[{id:"copilot-font",src:[{path:"assets/copilot.woff",format:"woff"}]}]},Udt={build:"tsx esbuild.ts",clean:"./script/build/clean.sh",compress:"tsx ./script/compressTokenizer.ts","forbid-sources-content:extension":"node script/forbid-sources-content.js --extension",generate_languages:"tsx script/generateLanguages.ts && prettier --write lib/src/language/generatedLanguages.ts",get_token:"tsx script/getToken.ts",lint:'run-p --aggregate-output "lint:*"',"lint:deps":"depcruise -c .dependency-cruiser.js .","lint:eslint":"eslint -f visualstudio --quiet --cache .","lint:prettier":"prettier --check . 2>&1","lint:types":"tsc --noEmit && tsc --noEmit -p extension/src/copilotPanel/webview",prebuild:"npm install",pretest:"npm run build","pretest:headless":"npm run build","pretest:extension":"npm run build","pretest:lsp-client":"npm run build","pretest:lib-e2e":"npm run build",prewatch:"npm run build","prewatch:esbuild":"npm run build",start:"npm run watch",test:'npm-run-all "test:extension --ignore-scripts" "test:headless --ignore-scripts" lint',"test:headless":'npm-run-all test:lib test:agent "test:lib-e2e --ignore-scripts" test:prompt "test:lsp-client --ignore-scripts" lint',"test:agent":'mocha "agent/src/**/*.test.{ts,tsx}"',"test:extension":"tsx extension/test/runTest.ts","test:lib":'mocha "lib/src/**/*.test.{ts,tsx}"',"test:lib-e2e":'mocha "lib/e2e/src/**/*.test.{ts,tsx}" --exclude "lib/e2e/src/prompt/**/*.test.ts"',"test:lib-e2e-no-ci":'mocha "lib/e2e/no-ci/**/*.test.{ts,tsx}"',"test:lib-prompt-e2e":'mocha "lib/e2e/src/prompt/prompt.test.ts"',"test:lib-prompt-e2e-perf":"INCLUDE_PERFORMANCE=true npm run test:lib-prompt-e2e","test:lsp-client":'mocha "lsp-client/test/*.test.{ts,tsx}"',"test:prompt":'mocha "prompt/test/**/*.test.{ts,tsx}"',"vscode-dts":"vscode-dts dev && mv vscode.proposed.*.ts extension/src","vscode:prepublish":'run-s "build --ignore-scripts" forbid-sources-content:extension',"vscode:uninstall":"node dist/extensionUninstalled.js",vsix:"vsce package --allow-missing-repository",watch:'run-p "watch:esbuild --ignore-scripts" "watch:types -- --preserveWatchOutput"',"watch:esbuild":"tsx esbuild.ts --watch","watch:types":"tsc --noEmit --watch"},qdt={"@datadog/datadog-ci":"^3.5.0","@github/prettier-config":"0.0.6","@limegrass/eslint-plugin-import-alias":"^1.5.1","@parcel/watcher":"^2.5.1","@types/benchmark":"^2.1.5","@types/crypto-js":"^4.2.2","@types/diff":"^7.0.2","@types/git-url-parse":"^16.0.0","@types/js-yaml":"^4.0.6","@types/kerberos":"^1.1.2","@types/mocha":"^10.0.10","@types/node":"~20.8.0","@types/semver":"^7.7.0","@types/sinon":"^17.0.4","@types/uuid":"^10.0.0","@types/vscode":"1.98.0","@types/yargs":"^17.0.24","@vscode/test-electron":"^2.5.2","@vscode/vsce":"^3.3.2","@yao-pkg/pkg":"^6.4.1",benchmark:"^2.1.4",boxen:"^8.0.1",chalk:"^5.4.1","dependency-cruiser":"^16.10.2",electron:"^28.1.4",esbuild:"^0.25.4","esbuild-plugin-copy":"^2.1.1",eslint:"^9.26.0","eslint-formatter-visualstudio":"^8.40.0","eslint-plugin-mocha":"^10.5.0",fantasticon:"^3.0.0",glob:"^11.0.2",globals:"^16.1.0","js-yaml":"^4.1.0",mocha:"^11.2.2","mocha-junit-reporter":"^2.2.1","mocha-multi-reporters":"^1.5.1","npm-run-all":"^4.1.5",prettier:"^3.5.3","prettier-plugin-organize-imports":"^4.1.0",proxy:"^2.1.1","simple-git":"^3.27.0",sinon:"^20.0.0","ts-dedent":"^2.2.0",tsx:"^4.19.4",typescript:"^5.8.3","typescript-eslint":"^8.32.0","vscode-dts":"^0.3.3"},Wdt={"@adobe/helix-fetch":"github:devm33/helix-fetch#2a08fa939591a0e14f34f611adcc3ed767579e9a","@github/memoize":"1.1.5","@microsoft/1ds-post-js":"^4.3.6","@microsoft/applicationinsights-web-basic":"^3.3.6","@microsoft/tiktokenizer":"^1.0.10","@modelcontextprotocol/sdk":"^1.11.1","@sinclair/typebox":"^0.34.33","@types/vscode-webview":"^1.57.4","@vscode/codicons":"^0.0.36","@vscode/prompt-tsx":"0.4.0-alpha.1","@vscode/webview-ui-toolkit":"^1.3.1","await-lock":"^2.2.2","crypto-js":"^4.2.0",diff:"^7.0.0",dldr:"^0.0.10","get-stream":"^6.0.1","git-url-parse":"^16.0.3",kerberos:"^2.2.0","mac-ca":"^3.1.1",microjob:"^0.7.0",minimatch:"^9.0.3",open:"^10.1.2","os-browserify":"^0.3.0","path-browserify":"^1.0.1",semver:"^7.7.1",shiki:"~1.15.0","source-map-support":"^0.5.21",sqlite3:"^5.1.7",uuid:"^11.1.0","vscode-languageclient":"^9.0.0","vscode-languageserver":"^9.0.0","vscode-languageserver-protocol":"^3.17","vscode-languageserver-textdocument":"~1.0.11","vscode-uri":"^3.1.0","web-tree-sitter":"^0.20.8","windows-ca-certs":"^0.1.0",yargs:"^17.7.2"},Hdt={fsevents:"<0",bindings:"npm:bundled-bindings@^1.5.0"},Gdt={name:Adt,displayName:ydt,description:Cdt,version:xdt,build:vdt,buildType:bdt,publisher:Edt,preview:Idt,homepage:Tdt,license:wdt,bugs:_dt,qna:Sdt,icon:Rdt,pricing:kdt,extensionPack:Bdt,engines:Pdt,categories:Ddt,keywords:Ndt,badges:Ldt,activationEvents:Fdt,browser:Mdt,main:Qdt,enabledApiProposals:Odt,contributes:jte,scripts:Udt,devDependencies:qdt,dependencies:Wdt,overrides:Hdt};var wt={Enable:"enable",UserSelectedCompletionModel:"selectedCompletionModel",ShowEditorCompletions:"editor.showEditorCompletions",EnableAutoCompletions:"editor.enableAutoCompletions",DelayCompletions:"editor.delayCompletions",FilterCompletions:"editor.filterCompletions",FetchStrategy:"fetchStrategy",RelatedFilesVSCodeCSharp:"advanced.relatedFilesVSCodeCSharp",RelatedFilesVSCodeTypeScript:"advanced.relatedFilesVSCodeTypeScript",RelatedFilesVSCode:"advanced.relatedFilesVSCode",ContextProviders:"advanced.contextProviders",DebugOverrideLogLevels:"advanced.debug.overrideLogLevels",DebugFilterLogCategories:"advanced.debug.filterLogCategories",DebugSnippyOverrideUrl:"advanced.debug.codeRefOverrideUrl",DebugUseElectronFetcher:"advanced.debug.useElectronFetcher",DebugUseEditorFetcher:"advanced.debug.useEditorFetcher",UseSubsetMatching:"advanced.useSubsetMatching",ContextProviderTimeBudget:"advanced.contextProviderTimeBudget",DebugOverrideCapiUrl:"internal.capiUrl",DebugOverrideCapiUrlLegacy:"advanced.debug.overrideCapiUrl",DebugTestOverrideCapiUrl:"internal.capiTestUrl",DebugTestOverrideCapiUrlLegacy:"advanced.debug.testOverrideCapiUrl",DebugOverrideProxyUrl:"internal.completionsUrl",DebugOverrideProxyUrlLegacy:"advanced.debug.overrideProxyUrl",DebugTestOverrideProxyUrl:"internal.completionsTestUrl",DebugTestOverrideProxyUrlLegacy:"advanced.debug.testOverrideProxyUrl",DebugOverrideEngine:"internal.completionModel",DebugOverrideEngineLegacy:"advanced.debug.overrideEngine",EnableSpeculativeRequests:"internal.enableSpeculativeRequests",EnableSpeculativeRequestsShown:"internal.enableSpeculativeRequestsShown",CompletionsDelay:"internal.completionsDelay",AlwaysRequestMultiline:"internal.alwaysRequestMultiline",ModelAlwaysTerminatesSingleline:"internal.modelAlwaysTerminatesSingleline",TrimCompletionsAggressively:"internal.trimCompletionsAggressively",VSCodeDebounceThreshold:"internal.vscodeDebounceThreshold",UseWorkspaceContextCoordinator:"internal.useWorkspaceContextCoordinator",IncludeNeighboringFiles:"internal.includeNeighboringFiles",ExcludeRelatedFiles:"internal.excludeRelatedFiles",DebugOverrideCppHeadersEnableSwitch:"internal.cppHeadersEnableSwitch",MultilineAfterAccept:"internal.multilineAfterAccept",NESXTab:"internal.useXTab",UseSplitContextPrompt:"internal.useSplitContextPrompt",UseCompletionsComparisonPanel:"internal.useCompletionsComparisonPanel",ComparisonPanelModelIds:"internal.comparisonPanelModelIds",ComparisonPanelRandomizedMode:"internal.comparisonPanelRandomizedMode",DelayCompletionItemProviders:"internal.delayCompletionItemProviders"};function dTe(t){return["server","parsingandserver"].includes(t)}s(dTe,"shouldDoServerTrimming");var Em=class{static{s(this,"BlockModeConfig")}},MS=class extends Em{static{s(this,"ConfigBlockModeConfig")}forLanguage(e,n,r){let i=e.get(Dt).overrideBlockMode(r);if(i)return cTe(i,n);let o=e.get(Dt).enableProgressiveReveal(r);return Ai(e,wt.AlwaysRequestMultiline)??o?cTe("moremultiline",n):n=="ruby"?"parsing":A0(n)?"parsingandserver":"server"}};function jdt(t){return["parsing","parsingandserver","moremultiline"].includes(t)}s(jdt,"blockModeRequiresTreeSitter");function cTe(t,e){return t==="moremultiline"&&jc.isSupported(e)?t:jdt(t)&&!A0(e)?"server":t}s(cTe,"toApplicableBlockMode");var fc=class{static{s(this,"ConfigProvider")}},QS=class extends fc{static{s(this,"DefaultsOnlyConfigProvider")}getConfig(e){return $dt(e)}getOptionalConfig(e){return zdt(e)}dumpForTelemetry(){return{}}getHttpSettings(){return{proxy:""}}onDidChangeHttpSettings(e){return{dispose:s(()=>{},"dispose")}}},RI=class extends fc{constructor(n,r){super();this.baseConfigProvider=n;this.overrides=r;this.emitter=new uTe.default;this.httpSettings=this.baseConfigProvider.getHttpSettings()}static{s(this,"InMemoryConfigProvider")}getOptionalOverride(n){return this.overrides.get(n)}getConfig(n){return this.getOptionalOverride(n)??this.baseConfigProvider.getConfig(n)}getOptionalConfig(n){return this.getOptionalOverride(n)??this.baseConfigProvider.getOptionalConfig(n)}setConfig(n,r){r!==void 0?this.overrides.set(n,r):this.overrides.delete(n)}getHttpSettings(){return this.httpSettings}setHttpSettings(n){let r=v8(n);this.httpSettings=r,this.emitter.emit("didChangeHttpSettings",this.getHttpSettings())}onDidChangeHttpSettings(n){return this.emitter.on("didChangeHttpSettings",n),{dispose:s(()=>{this.emitter.off("didChangeHttpSettings",n)},"dispose")}}dumpForTelemetry(){let n=this.baseConfigProvider.dumpForTelemetry();for(let r of[wt.ShowEditorCompletions,wt.EnableAutoCompletions,wt.DelayCompletions,wt.FilterCompletions]){let i=this.overrides.get(r);i!==void 0&&(n[r]=JSON.stringify(i))}return n}};function Vdt(t){return t?.type==="object"&&"properties"in t}s(Vdt,"isContributesObject");function fTe(t,e){let n=t,r=[];for(let i of e.split(".")){let o=[...r,i].join(".");n&&typeof n=="object"&&o in n?(n=n[o],r.length=0):r.push(i)}if(!(n===void 0||r.length>0))return n}s(fTe,"getConfigKeyRecursively");function $dt(t){if(LS.has(t))return LS.get(t);throw new Error(`Missing config default value: ${yB}.${t}`)}s($dt,"getConfigDefaultForKey");function zdt(t){return LS.get(t)}s(zdt,"getOptionalConfigDefaultForKey");var LS=new Map([[wt.DebugOverrideCppHeadersEnableSwitch,!1],[wt.RelatedFilesVSCodeCSharp,!1],[wt.RelatedFilesVSCodeTypeScript,!1],[wt.RelatedFilesVSCode,!1],[wt.IncludeNeighboringFiles,!1],[wt.ExcludeRelatedFiles,!1],[wt.ContextProviders,[]],[wt.DebugUseEditorFetcher,null],[wt.DebugUseElectronFetcher,null],[wt.DebugOverrideLogLevels,{}],[wt.DebugSnippyOverrideUrl,""],[wt.FetchStrategy,"auto"],[wt.UseSubsetMatching,null],[wt.ContextProviderTimeBudget,void 0],[wt.DebugOverrideCapiUrl,""],[wt.DebugTestOverrideCapiUrl,""],[wt.DebugOverrideProxyUrl,""],[wt.DebugTestOverrideProxyUrl,""],[wt.DebugOverrideEngine,""],[wt.EnableSpeculativeRequests,void 0],[wt.EnableSpeculativeRequestsShown,void 0],[wt.AlwaysRequestMultiline,void 0],[wt.ModelAlwaysTerminatesSingleline,void 0],[wt.TrimCompletionsAggressively,void 0],[wt.VSCodeDebounceThreshold,void 0],[wt.MultilineAfterAccept,void 0],[wt.NESXTab,void 0],[wt.UseWorkspaceContextCoordinator,void 0],[wt.CompletionsDelay,void 0],[wt.UseSplitContextPrompt,void 0],[wt.UseCompletionsComparisonPanel,!1],[wt.ComparisonPanelModelIds,["gpt-4o-copilot","chat-v6"]],[wt.ComparisonPanelRandomizedMode,!1],[wt.DelayCompletionItemProviders,void 0],[wt.ShowEditorCompletions,void 0],[wt.EnableAutoCompletions,void 0],[wt.DelayCompletions,void 0],[wt.FilterCompletions,void 0]]);for(let t of Object.values(wt)){let e=jte.configuration[0],n=[],r=`${yB}.${t}`.split(".");for(;r.length>0;){n.push(r.shift());let i=e.properties[n.join(".")];if(Vdt(i))n.length=0,e=i;else if(r.length==0&&i?.default!==void 0){if(LS.has(t))throw new Error(`Duplicate config default value ${yB}.${t}`);LS.set(t,i.default)}}if(!LS.has(t))throw new Error(`Missing config default value ${yB}.${t}`)}function Ai(t,e){return t.get(fc).getConfig(e)}s(Ai,"getConfig");function eIe(t){return t.get(fc).dumpForTelemetry()}s(eIe,"dumpForTelemetry");var zi=class{constructor(){this.packageJson=Gte}static{s(this,"BuildInfo")}isPreRelease(){return this.getBuildType()==="nightly"}isProduction(){return this.getBuildType()!=="dev"}getBuildType(){return this.packageJson.buildType}getVersion(){return this.packageJson.version}getDisplayVersion(){return this.getBuildType()==="dev"?`${this.getVersion()}-dev`:this.getVersion()}getBuild(){return this.packageJson.build}getName(){return this.packageJson.name}};function ote(t){return t.get(zi).isProduction()}s(ote,"isProduction");function GIe(t){return t.get(zi).getBuildType()==="dev"}s(GIe,"isDevBuild");function kf(t){return t.get(zi).getBuildType()}s(kf,"getBuildType");function tIe(t){return t.get(zi).getBuild()}s(tIe,"getBuild");function CI(t){return t.get(zi).getVersion()}s(CI,"getVersion");var Ps=class{constructor(e,n,r="none",i="desktop"){this.sessionId=e;this.machineId=n;this.remoteName=r;this.uiKind=i}static{s(this,"EditorSession")}};function og({name:t,version:e}){return`${t}/${e}`}s(og,"formatNameAndVersion");var ur=class{static{s(this,"EditorAndPluginInfo")}getCopilotIntegrationId(){}},ig="2025-05-01";function n0(t){let e=t.get(ur);return{"Editor-Version":og(e.getEditorInfo()),"Editor-Plugin-Version":og(e.getEditorPluginInfo()),"Copilot-Language-Server-Version":CI(t)}}s(n0,"editorVersionHeaders");var ym="Iv1.b507a08c87ecfe98",Fl=class{static{s(this,"GitHubAppInfo")}findAppIdToAuthenticate(){return this.githubAppId??ym}};f();var Jx=require("fs"),pTe=require("os"),mTe=je(require("path")),OS=require("process");var hc=class{static{s(this,"PersistenceManager")}},Vte=class extends hc{constructor(n){super();this.directory=n}static{s(this,"FilePersistenceManager")}async read(n,r){try{return(await this.readJsonObject(n))[r]}catch{return}}async update(n,r,i){await Jx.promises.mkdir(this.directory,{recursive:!0,mode:448});let o=`${this.directory}/${n}.json`,a=await this.readJsonObject(n);a[r]=i,await Jx.promises.writeFile(o,JSON.stringify(a)+`
`,{encoding:"utf8"})}async delete(n,r){let i=`${this.directory}/${n}.json`;try{let o=await this.readJsonObject(n);delete o[r];let a=JSON.stringify(o)+`
`;a===`{}
`?await Jx.promises.rm(i):await Jx.promises.writeFile(i,a,{encoding:"utf8"})}catch{}}async deleteSetting(n){let r=`${this.directory}/${n}.json`;try{await Jx.promises.rm(r)}catch{}}async listSettings(){try{return(await Jx.promises.readdir(this.directory)).filter(r=>r.endsWith(".json")).map(r=>r.slice(0,-5))}catch{return[]}}async listKeys(n){return Object.keys(await this.readJsonObject(n))}async readJsonObject(n){let r=`${this.directory}/${n}.json`;try{let i=await Jx.promises.readFile(r,{encoding:"utf8"});return JSON.parse(i)}catch{return{}}}};function $te(){return OS.env.XDG_CONFIG_HOME&&mTe.isAbsolute(OS.env.XDG_CONFIG_HOME)?OS.env.XDG_CONFIG_HOME+"/github-copilot":(0,pTe.platform)()==="win32"?OS.env.USERPROFILE+"\\AppData\\Local\\github-copilot":OS.env.HOME+"/.config/github-copilot"}s($te,"getXdgConfigPath");function hTe(){return new Vte($te())}s(hTe,"makeXdgPersistenceManager");f();f();f();var kI={abap:{extensions:[".abap"]},aspdotnet:{extensions:[".asax",".ascx",".ashx",".asmx",".aspx",".axd"]},bat:{extensions:[".bat",".cmd"]},bibtex:{extensions:[".bib",".bibtex"]},blade:{extensions:[".blade",".blade.php"]},BluespecSystemVerilog:{extensions:[".bsv"]},c:{extensions:[".c",".cats",".h",".h.in",".idc"]},csharp:{extensions:[".cake",".cs",".cs.pp",".csx",".linq"]},cpp:{extensions:[".c++",".cc",".cp",".cpp",".cppm",".cxx",".h",".h++",".hh",".hpp",".hxx",".idl",".inc",".inl",".ino",".ipp",".ixx",".rc",".re",".tcc",".tpp",".txx",".i"]},cobol:{extensions:[".cbl",".ccp",".cob",".cobol",".cpy"]},css:{extensions:[".css",".wxss"]},clojure:{extensions:[".bb",".boot",".cl2",".clj",".cljc",".cljs",".cljs.hl",".cljscm",".cljx",".edn",".hic"],filenames:["riemann.config"]},ql:{extensions:[".ql",".qll"]},coffeescript:{extensions:["._coffee",".cake",".cjsx",".coffee",".iced"],filenames:["Cakefile"]},cuda:{extensions:[".cu",".cuh"]},dart:{extensions:[".dart"]},dockerfile:{extensions:[".containerfile",".dockerfile"],filenames:["Containerfile","Dockerfile"]},dotenv:{extensions:[".env"],filenames:[".env",".env.ci",".env.dev",".env.development",".env.development.local",".env.example",".env.local",".env.prod",".env.production",".env.sample",".env.staging",".env.test",".env.testing"]},html:{extensions:[".ect",".ejs",".ejs.t",".jst",".hta",".htm",".html",".html.hl",".html5",".inc",".jsp",".njk",".tpl",".twig",".wxml",".xht",".xhtml",".phtml",".liquid"]},elixir:{extensions:[".ex",".exs"],filenames:["mix.lock"]},erlang:{extensions:[".app",".app.src",".erl",".es",".escript",".hrl",".xrl",".yrl"],filenames:["Emakefile","rebar.config","rebar.config.lock","rebar.lock"]},fsharp:{extensions:[".fs",".fsi",".fsx"]},go:{extensions:[".go"]},groovy:{extensions:[".gradle",".groovy",".grt",".gtpl",".gvy",".jenkinsfile"],filenames:["Jenkinsfile","Jenkinsfile"]},graphql:{extensions:[".gql",".graphql",".graphqls"]},terraform:{extensions:[".hcl",".nomad",".tf",".tfvars",".workflow"]},hlsl:{extensions:[".cginc",".fx",".fxh",".hlsl",".hlsli"]},erb:{extensions:[".erb",".erb.deface",".rhtml"]},razor:{extensions:[".cshtml",".razor"]},haml:{extensions:[".haml",".haml.deface"]},handlebars:{extensions:[".handlebars",".hbs"]},haskell:{extensions:[".hs",".hs-boot",".hsc"]},ini:{extensions:[".cfg",".cnf",".dof",".ini",".lektorproject",".prefs",".pro",".properties",".url"],filenames:[".buckconfig",".coveragerc",".flake8",".pylintrc","HOSTS","buildozer.spec","hosts","pylintrc","vlcrc"]},json:{extensions:[".4DForm",".4DProject",".JSON-tmLanguage",".avsc",".geojson",".gltf",".har",".ice",".json",".json.example",".jsonl",".mcmeta",".sarif",".tact",".tfstate",".tfstate.backup",".topojson",".webapp",".webmanifest",".yy",".yyp"],filenames:[".all-contributorsrc",".arcconfig",".auto-changelog",".c8rc",".htmlhintrc",".imgbotconfig",".nycrc",".tern-config",".tern-project",".watchmanconfig","MODULE.bazel.lock","Package.resolved","Pipfile.lock","bun.lock","composer.lock","deno.lock","flake.lock","mcmod.info"]},jsonc:{extensions:[".code-snippets",".code-workspace",".jsonc",".sublime-build",".sublime-color-scheme",".sublime-commands",".sublime-completions",".sublime-keymap",".sublime-macro",".sublime-menu",".sublime-mousemap",".sublime-project",".sublime-settings",".sublime-theme",".sublime-workspace",".sublime_metrics",".sublime_session"],filenames:[".babelrc",".devcontainer.json",".eslintrc.json",".jscsrc",".jshintrc",".jslintrc",".swcrc","api-extractor.json","argv.json","devcontainer.json","extensions.json","jsconfig.json","keybindings.json","language-configuration.json","launch.json","profiles.json","settings.json","tasks.json","tsconfig.json","tslint.json"]},java:{extensions:[".jav",".java",".jsh"]},javascript:{extensions:["._js",".bones",".cjs",".es",".es6",".frag",".gs",".jake",".javascript",".js",".jsb",".jscad",".jsfl",".jslib",".jsm",".jspre",".jss",".mjs",".njs",".pac",".sjs",".ssjs",".xsjs",".xsjslib"],filenames:["Jakefile"]},julia:{extensions:[".jl"]},kotlin:{extensions:[".kt",".ktm",".kts"]},less:{extensions:[".less"]},lua:{extensions:[".fcgi",".lua",".luau",".nse",".p8",".pd_lua",".rbxs",".rockspec",".wlua"],filenames:[".luacheckrc"]},makefile:{extensions:[".d",".mak",".make",".makefile",".mk",".mkfile"],filenames:["BSDmakefile","GNUmakefile","Kbuild","Makefile","Makefile.am","Makefile.boot","Makefile.frag","Makefile.in","Makefile.inc","Makefile.wat","makefile","makefile.sco","mkfile"]},markdown:{extensions:[".livemd",".markdown",".md",".mdown",".mdwn",".mdx",".mkd",".mkdn",".mkdown",".ronn",".scd",".workbook"],filenames:["contents.lr"]},"objective-c":{extensions:[".h",".m"]},"objective-cpp":{extensions:[".mm"]},php:{extensions:[".aw",".ctp",".fcgi",".inc",".install",".module",".php",".php3",".php4",".php5",".phps",".phpt",".theme"],filenames:[".php",".php_cs",".php_cs.dist","Phakefile"]},perl:{extensions:[".al",".cgi",".fcgi",".perl",".ph",".pl",".plx",".pm",".psgi",".t"],filenames:[".latexmkrc","Makefile.PL","Rexfile","ack","cpanfile","latexmkrc"]},powershell:{extensions:[".ps1",".psd1",".psm1"]},pug:{extensions:[".jade",".pug"]},python:{extensions:[".cgi",".codon",".fcgi",".gyp",".gypi",".lmi",".py",".py3",".pyde",".pyi",".pyp",".pyt",".pyw",".rpy",".sage",".spec",".tac",".wsgi",".xpy"],filenames:[".gclient","DEPS","SConscript","SConstruct","wscript"]},r:{extensions:[".r",".rd",".rsx"],filenames:[".Rprofile","expr-dist"]},ruby:{extensions:[".builder",".eye",".fcgi",".gemspec",".god",".jbuilder",".mspec",".pluginspec",".podspec",".prawn",".rabl",".rake",".rb",".rbi",".rbuild",".rbw",".rbx",".ru",".ruby",".spec",".thor",".watchr"],filenames:[".irbrc",".pryrc",".simplecov","Appraisals","Berksfile","Brewfile","Buildfile","Capfile","Dangerfile","Deliverfile","Fastfile","Gemfile","Guardfile","Jarfile","Mavenfile","Podfile","Puppetfile","Rakefile","Snapfile","Steepfile","Thorfile","Vagrantfile","buildfile"]},rust:{extensions:[".rs",".rs.in"]},scss:{extensions:[".scss"]},sql:{extensions:[".cql",".ddl",".inc",".mysql",".prc",".sql",".tab",".udf",".viw"]},sass:{extensions:[".sass"]},scala:{extensions:[".kojo",".sbt",".sc",".scala"]},shellscript:{extensions:[".bash",".bats",".cgi",".command",".fcgi",".fish",".ksh",".sh",".sh.in",".tmux",".tool",".trigger",".zsh",".zsh-theme"],filenames:[".bash_aliases",".bash_functions",".bash_history",".bash_logout",".bash_profile",".bashrc",".cshrc",".envrc",".flaskenv",".kshrc",".login",".profile",".tmux.conf",".zlogin",".zlogout",".zprofile",".zshenv",".zshrc","9fs","PKGBUILD","bash_aliases","bash_logout","bash_profile","bashrc","cshrc","gradlew","kshrc","login","man","profile","tmux.conf","zlogin","zlogout","zprofile","zshenv","zshrc"]},slang:{extensions:[".fxc",".hlsl",".s",".slang",".slangh",".usf",".ush",".vfx"]},slim:{extensions:[".slim"]},solidity:{extensions:[".sol"]},stylus:{extensions:[".styl"]},svelte:{extensions:[".svelte"]},swift:{extensions:[".swift"]},systemverilog:{extensions:[".sv",".svh",".vh"]},typescriptreact:{extensions:[".tsx"]},latex:{extensions:[".aux",".bbx",".cbx",".cls",".dtx",".ins",".lbx",".ltx",".mkii",".mkiv",".mkvi",".sty",".tex",".toc"]},typescript:{extensions:[".cts",".mts",".ts"]},verilog:{extensions:[".v",".veo"]},vim:{extensions:[".vba",".vim",".vimrc",".vmb"],filenames:[".exrc",".gvimrc",".nvimrc",".vimrc","_vimrc","gvimrc","nvimrc","vimrc"]},vb:{extensions:[".vb",".vbhtml",".Dsr",".bas",".cls",".ctl",".frm",".vbs"]},vue:{extensions:[".nvue",".vue"]},xml:{extensions:[".adml",".admx",".ant",".axaml",".axml",".builds",".ccproj",".ccxml",".clixml",".cproject",".cscfg",".csdef",".csl",".csproj",".ct",".depproj",".dita",".ditamap",".ditaval",".dll.config",".dotsettings",".filters",".fsproj",".fxml",".glade",".gml",".gmx",".gpx",".grxml",".gst",".hzp",".iml",".ivy",".jelly",".jsproj",".kml",".launch",".mdpolicy",".mjml",".mod",".mojo",".mxml",".natvis",".ncl",".ndproj",".nproj",".nuspec",".odd",".osm",".pkgproj",".plist",".pluginspec",".proj",".props",".ps1xml",".psc1",".pt",".pubxml",".qhelp",".rdf",".res",".resx",".rss",".sch",".scxml",".sfproj",".shproj",".srdf",".storyboard",".sublime-snippet",".svg",".sw",".targets",".tml",".typ",".ui",".urdf",".ux",".vbproj",".vcxproj",".vsixmanifest",".vssettings",".vstemplate",".vxml",".wixproj",".workflow",".wsdl",".wsf",".wxi",".wxl",".wxs",".x3d",".xacro",".xaml",".xib",".xlf",".xliff",".xmi",".xml",".xml.dist",".xmp",".xproj",".xsd",".xspec",".xul",".zcml"],filenames:[".classpath",".cproject",".project","App.config","NuGet.config","Settings.StyleCop","Web.Debug.config","Web.Release.config","Web.config","packages.config"]},xsl:{extensions:[".xsl",".xslt"]},yaml:{extensions:[".mir",".reek",".rviz",".sublime-syntax",".syntax",".yaml",".yaml-tmlanguage",".yaml.sed",".yml",".yml.mysql"],filenames:[".clang-format",".clang-tidy",".clangd",".gemrc","CITATION.cff","glide.lock","pixi.lock","yarn.lock"]},javascriptreact:{extensions:[".jsx"]},legend:{extensions:[".pure"]}};f();f();var gTe=[".ejs",".erb",".haml",".hbs",".j2",".jinja",".jinja2",".liquid",".mustache",".njk",".php",".pug",".slim",".webc"],ATe={".php":[".blade"]},b8=Object.keys(kI).flatMap(t=>kI[t].extensions);var zte=je(require("node:path"));var qS=class{constructor(e,n,r){this.languageId=e;this.isGuess=n;this.fileExtension=r}static{s(this,"Language")}},E8=class{static{s(this,"LanguageDetection")}},Yte=new Map,US=new Map;for(let[t,{extensions:e,filenames:n}]of Object.entries(kI)){for(let r of e)Yte.set(r,[...Yte.get(r)??[],t]);for(let r of n??[])US.set(r,[...US.get(r)??[],t])}var Kte=class extends E8{static{s(this,"FilenameAndExensionLanguageDetection")}detectLanguage(e){let n=Ti(e.uri),r=zte.extname(n).toLowerCase(),i=this.extensionWithoutTemplateLanguage(n,r),o=this.detectLanguageId(n,i),a=this.computeFullyQualifiedExtension(r,i);return o?new qS(o.languageId,o.isGuess,a):new qS(e.languageId,!0,a)}extensionWithoutTemplateLanguage(e,n){if(gTe.includes(n)){let r=e.substring(0,e.lastIndexOf(".")),i=zte.extname(r).toLowerCase();if(i.length>0&&b8.includes(i)&&this.isExtensionValidForTemplateLanguage(n,i))return i}return n}isExtensionValidForTemplateLanguage(e,n){let r=ATe[e];return!r||r.includes(n)}detectLanguageId(e,n){if(US.has(e))return{languageId:US.get(e)[0],isGuess:!1};let r=Yte.get(n)??[];if(r.length>0)return{languageId:r[0],isGuess:r.length>1};for(;e.includes(".");)if(e=e.replace(/\.[^.]*$/,""),US.has(e))return{languageId:US.get(e)[0],isGuess:!1}}computeFullyQualifiedExtension(e,n){return e!==n?n+e:e}},Jte=class extends E8{constructor(n){super();this.delegate=n}static{s(this,"GroupingLanguageDetection")}detectLanguage(n){let r=this.delegate.detectLanguage(n),i=r.languageId;return i==="c"||i==="cpp"?new qS("cpp",r.isGuess,r.fileExtension):r}},Xte=class extends E8{constructor(n){super();this.delegate=n}static{s(this,"ClientProvidedLanguageDetection")}detectLanguage(n){return n.uri.startsWith("untitled:")||n.uri.startsWith("vscode-notebook-cell:")?new qS(n.languageId,!0,""):this.delegate.detectLanguage(n)}},Ydt=new Jte(new Xte(new Kte));function WS({uri:t,languageId:e}){let n=Ydt.detectLanguage({uri:t,languageId:"UNKNOWN"});return n.languageId==="UNKNOWN"?e:n.languageId}s(WS,"detectLanguage");f();f();f();f();function D1(t){if(t.isCancellationRequested)throw new zM}s(D1,"throwIfCancellationRequested");function KM(t){return t instanceof zM?!0:t instanceof Error&&t.name===Zte&&t.message===Zte}s(KM,"isCancellationError");var zM=class extends Error{static{s(this,"CancellationError")}constructor(){super(Zte),this.name=this.message}},Zte="Canceled",YM=class{constructor(){this.items=[]}static{s(this,"Stack")}push(e){this.items.push(e)}pop(){return this.items.pop()}peek(){return this.items[this.items.length-1]}tryPeek(){return this.items.length>0}toArray(){return this.items}};function BI(t){switch(t){case 0:case 2:case 7:case 8:case 11:case 12:case 13:case 14:return!0;default:return!1}}s(BI,"isTypeDefinition");var Zo=class t{static{s(this,"TextRange")}static{this.empty=new t(0,0)}constructor(e,n){this.start=e,this.length=n}static fromBounds(e,n){return new t(e,n-e)}get end(){return this.start+this.length}contains(e){return this.start<=e&&this.end>=e}containsRange(e){return this.start<=e.start&&this.end>=e.end}equals(e){return this.start===e.start&&this.length===e.length}getText(e){return e.slice(this.start,this.end)}getTextWithIndentation(e,n){let r=[],i=this.start;for(i=CTe(e,e.length,i),yTe(r,n);i<this.end;)e[i]!=="\r"&&e[i]!==`
`?r.push(e[i++]):e[i]==="\r"&&i<e.length&&e[i+1]!==`
`||e[i]===`
`?(r.push(`
`),i=CTe(e,e.length,++i),yTe(r,n)):i++;return r.join("")}};function yTe(t,e){for(let n=0;n<e;n++)t.push(" ")}s(yTe,"appendIndent");function CTe(t,e,n){for(;n<e&&(t[n]===" "||t[n]==="	");)n++;return n}s(CTe,"consumeIndent");var Ff=class{constructor(e,n,r,i,o,a,l,c,u){this.fileName=e;this.fullyQualifiedName=n;this.unqualifiedName=r;this.commentRange=i;this.nameRange=o;this.bodyRange=a;this.extentRange=l;this.kind=c;this.refKind=u;if(e.indexOf("\\")!==-1)throw new Error("fileName must be normalized to use forward slashes as path separators")}static{s(this,"SymbolRange")}equals(e){return this.fileName===e.fileName&&this.fullyQualifiedName===e.fullyQualifiedName&&this.unqualifiedName===e.unqualifiedName&&this.commentRange.equals(e.commentRange)&&this.nameRange.equals(e.nameRange)&&this.bodyRange.equals(e.bodyRange)&&this.extentRange.equals(e.extentRange)&&this.kind===e.kind&&this.refKind===e.refKind}},Ka=class t{constructor(){this.queriesCache=new Map}static{s(this,"SymbolExtractorBase")}async findMatches(e,n){let r=await P1(this.languageId,e),i=r.getLanguage(),a=this.getOrCreateQuery(i,n).matches(r.rootNode);return{tree:r,matches:a}}async executeQuery(e,n,r){let i;try{i=await this.findMatches(n,r);let o=new YM,a=[];for(let l of i.matches){let c=this.createSymbolRange(o,e,n,l.captures);c&&a.push(c)}return a}catch{return[]}finally{i?.tree.delete()}}getOrCreateQuery(e,n){let r=this.queriesCache.get(n);return r||(r=e.query(n),this.queriesCache.set(n,r)),r}createSymbolRange(e,n,r,i){let o=0,a=0,l=0,c=0,u=0,d=0,p=0,m=0,h=null,g=null;for(let b=0;b<i.length;b++){let E=i[b].name;E==="name"?(u=i[b].node.startIndex,d=i[b].node.endIndex):E==="reference"?(u=i[b].node.startIndex,d=i[b].node.endIndex,l=i[b].node.startIndex,c=i[b].node.endIndex,h=E):E==="body"?(p=i[b].node.startIndex,m=i[b].node.endIndex):E==="comment"?(o=o===0?i[b].node.startIndex:Math.min(o,i[b].node.startIndex),a=Math.max(a,i[b].node.endIndex)):E==="receiver"?g=Zo.fromBounds(i[b].node.startIndex,i[b].node.endIndex).getText(r):(l=i[b].node.startIndex,c=i[b].node.endIndex,h=E)}h==="definition.module.filescoped"&&(m=r.length,c=m);let y=Zo.fromBounds(l,c),v=l>0||c>0||u>0||d>0?new Ff(n,"","",Zo.fromBounds(o,a),Zo.fromBounds(u,d),Zo.fromBounds(p,m),y,t.kindFromString(h),0):null;if(v){t.updateScopesForSymbol(e,v);let b=v.nameRange.getText(r),E=this.createNameFromScopes(r,e.toArray());return E=g?`${g}.${E}`:E,new Ff(n,E,b.substring(b.lastIndexOf(".")+1),v.commentRange,v.nameRange,v.bodyRange,v.extentRange,v.kind,0)}return null}static updateScopesForSymbol(e,n){for(;e.tryPeek()&&!e.peek()?.extentRange.containsRange(n.extentRange);)e.pop();e.push(n)}static kindFromString(e){switch(e){case"definition.class":return 0;case"definition.constant":return 1;case"definition.enum_variant":return 3;case"definition.enum":return 2;case"definition.field":return 4;case"definition.function":return 5;case"definition.implementation":return 6;case"definition.interface":return 7;case"definition.macro":return 8;case"definition.method":return 9;case"import.module":case"definition.module":case"definition.module.filescoped":return 10;case"definition.struct":return 11;case"definition.trait":return 12;case"definition.type":return 13;case"definition.union":return 14;case"reference":return 16;case"wildcard":return 18;case"alias":return 19;case"import":return 17;default:throw new Error("NotSupportedException")}}cleanQuotedString(e){return e.replace(/^(['"])(.*)\1$/,"$2")}};var JM=class extends Ka{static{s(this,"GoSymbolExtractor")}get languageId(){return"go"}extractSymbols(e,n){return this.executeQuery(e,n,Kdt)}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},XM=class extends Ka{static{s(this,"GoReferenceExtractor")}get languageId(){return"go"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}extractReferences(e,n){return this.executeQuery(e,n,Xdt)}async extractLocalReferences(e,n,r){let i=await this.executeQuery(e,n,Zdt),o=i.filter(c=>c.kind!==9),a=i.filter(c=>c.kind===9&&c.extentRange.containsRange(r)),l=[];for(let c of a)l.push(...o.filter(u=>c.extentRange.containsRange(u.extentRange)));return l}},ZM=class extends Ka{static{s(this,"GoImportExtractor")}get languageId(){return"go"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}async extractSymbols(e,n){let r=await this.findMatches(n,Jdt),i=new Set;try{r.matches.forEach(o=>{let a,l,c;for(let u of o.captures)u.name==="import.name"?a=u:u.name==="alias"?l=u:u.name==="import"&&(c=u);if(a&&c){let u=this.cleanQuotedString(a.node.text),d=a.node.startIndex+1,p=a.node.endIndex-1,m=l?new Zo(l.node.startIndex,l.node.endIndex-l.node.startIndex):new Zo(d,p-d),h=new Zo(c.node.startIndex,c.node.endIndex-c.node.startIndex),g=Zo.empty,y=Zo.empty,v=u.substring(u.lastIndexOf("/")+1);i.add(new Ff(e,u,v,g,m,y,h,17,0))}})}finally{r.tree.delete()}return i.size>0?[...i]:[]}},Kdt=`
(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (struct_type (field_declaration_list) @body))) @definition.struct
)

(
    ((comment)* @comment)
    .
    (type_declaration (type_spec name: (_) @name type: (interface_type (_)) @body)) @definition.interface
)

(
    ((comment)* @comment)
    .
    (method_declaration receiver: (parameter_list (parameter_declaration type: [(type_identifier) @receiver (pointer_type (type_identifier) @receiver)] )) name: (_) @name body: (_) @body) @definition.method
)

(
    ((comment)* @comment)
    .
    (method_elem name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (function_declaration name: (_) @name) @definition.method
)

(
    ((comment)* @comment)
    .
    (field_declaration name: (_) @name) @definition.field
)
`,Jdt=`
(import_declaration
  (import_spec
    name: (package_identifier)? @alias
    path: (interpreted_string_literal) @import.name)+) @import
    
(import_declaration
  (import_spec_list
    (import_spec
      name: (package_identifier)? @alias
      path: (interpreted_string_literal) @import.name))+) @import
`,Xdt=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`,Zdt=`
(call_expression function: (_) @name) @reference

(type_identifier) @reference
`;f();var tQ=class extends Ka{static{s(this,"JavaSymbolExtractor")}get languageId(){return"java"}extractSymbols(e,n){return this.executeQuery(e,n,e0t)}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},nQ=class extends Ka{static{s(this,"JavaReferenceExtractor")}get languageId(){return"java"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}extractReferences(e,n){return this.executeQuery(e,n,n0t)}async extractLocalReferences(e,n,r){let i=await this.executeQuery(e,n,r0t),o=i.filter(c=>c.kind!==9),a=i.filter(c=>c.kind===9&&c.extentRange.containsRange(r)),l=[];for(let c of a)l.push(...o.filter(u=>c.extentRange.containsRange(u.extentRange)));return l}},rQ=class extends Ka{static{s(this,"JavaImportExtractor")}get languageId(){return"java"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}async extractSymbols(e,n){return(await this.executeQuery(e,n,t0t)).filter(i=>i.kind===0)}},e0t=`
(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (class_declaration name: (identifier) @name body: (class_body) @body) @definition.class
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (constructor_declaration name: (identifier) @name body: (constructor_body) @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (method_declaration name: (identifier) @name body: (block)? @body) @definition.method
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (interface_declaration name: (identifier) @name body: (interface_body) @body) @definition.interface
)

(
    [
        (block_comment) @comment
        (line_comment)* @comment
    ]
    .
    (field_declaration declarator: (variable_declarator name: (identifier) @name)) @definition.field
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_declaration name: (_) @name body: (_) @body) @definition.enum
)

(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (enum_constant name: (identifier) @name) @definition.enum_variant
)
`,t0t=`
(
    [
        ((line_comment)* @comment)
        ((block_comment)* @comment)
    ]
    .
    (import_declaration 
        (scoped_identifier) @name
        (asterisk)? @wildcard
    ) @definition.class 
)
`,n0t=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`,r0t=`
(method_invocation 
  name: (identifier) @name
) @reference

(type_identifier) @reference
`;f();var i0t=new Set(["null","undefined","void","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),iQ=class extends Ka{static{s(this,"JavaScriptSymbolExtractor")}get languageId(){return"javascript"}extractSymbols(e,n){return this.executeQuery(e,n,o0t)}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},oQ=class extends Ka{static{s(this,"JavaScriptReferenceExtractor")}extractLocalReferences(e,n,r){throw new Error("Method not implemented.")}get languageId(){return"javascript"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}async extractReferences(e,n){return(await this.executeQuery(e,n,s0t)).filter(i=>!i0t.has(i.unqualifiedName))}};var o0t=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (export_statement declaration: (lexical_declaration (variable_declarator name: (identifier) @name value: (_) @body))) @definition.function
    ]
)
`,s0t=`
(call_expression function: (_) @name) @reference
`;f();var a0t=new Set(["int","str","float","bool","list","dict","tuple","set"]),sQ=class extends Ka{static{s(this,"PythonSymbolExtractor")}get languageId(){return"python"}extractSymbols(e,n){return this.executeQuery(e,n,l0t)}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},aQ=class extends Ka{static{s(this,"PythonReferenceExtractor")}get languageId(){return"python"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}async extractReferences(e,n){return(await this.executeQuery(e,n,c0t)).filter(i=>!a0t.has(i.unqualifiedName))}async extractLocalReferences(e,n,r){let i=await this.executeQuery(e,n,d0t),o=i.filter(c=>c.kind!==9),a=i.filter(c=>c.kind===9&&c.extentRange.containsRange(r)),l=[];for(let c of a)l.push(...o.filter(u=>c.extentRange.containsRange(u.extentRange)));return l}},lQ=class extends Ka{static{s(this,"PythonImportExtractor")}get languageId(){return"python"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}async extractSymbols(e,n){let r=await this.findMatches(n,u0t),i=new Set;try{r.matches.forEach(o=>{let a,l,c,u;for(let d of o.captures)d.name==="import.name"?a=d:d.name==="import.module"?c=d:d.name==="alias"?l=d:d.name==="import"&&(u=d);if(c&&u){let d=a||c,p=l?new Zo(l.node.startIndex,l.node.endIndex-l.node.startIndex):new Zo(d.node.startIndex,u.node.endIndex-d.node.endIndex),m=new Zo(u.node.startIndex,u.node.endIndex-u.node.startIndex),h=Zo.empty,g=Zo.empty,y=d.node.text,v=y.split(".").pop()||y,b;a?b=`${c.node.text}.${a.node.text}`:b=c.node.text,i.add(new Ff(e,b,v,h,p,g,m,17,0))}})}finally{r.tree.delete()}return i.size>0?[...i]:[]}},l0t=`
(
    ((comment)* @comment)
    .
    (class_definition name: (_) @name body: (_) @body) @definition.class
)

(
    ((comment)* @comment)
    .
    (function_definition name: (_) @name body: (_) @body) @definition.method
)
`,c0t=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
]) @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`,u0t=`  
(import_statement name: (dotted_name) @import.module) @import

(import_from_statement
  module_name: (dotted_name) @import.module
  name: (dotted_name (identifier) @import.name)) @import

(import_statement name: (aliased_import name: (dotted_name) @import.module alias: (identifier)? @alias)) @import

(import_from_statement 
  module_name: (dotted_name) @import.module
    name: 
      (aliased_import 
        name: ((dotted_name) @import.name)
        alias: (identifier) @alias)) @import
`,d0t=`
(call function: (_) @name) @reference

(type [  
    (identifier)* @name  
    (_ (identifier) @name)* 
])  @reference

(class_definition superclasses: (argument_list (identifier) @name)) @reference
`;f();var f0t=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),HS=class extends Ka{static{s(this,"TypeScriptSymbolExtractor")}get languageId(){return"typescript"}extractSymbols(e,n){return this.executeQuery(e,n,p0t)}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},GS=class extends Ka{static{s(this,"TypeScriptReferenceExtractor")}get languageId(){return"typescript"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}async extractReferences(e,n){return(await this.executeQuery(e,n,m0t)).filter(i=>!f0t.has(i.unqualifiedName))}async extractLocalReferences(e,n,r){throw new Error("Method not implemented.")}};var p0t=`
(
    ((comment)* @comment)
    .
    [
        (class_declaration name: (_) @name body: (_) @body) @definition.class
        (interface_declaration name: (_) @name body: (_) @body) @definition.interface
        (type_alias_declaration name: (type_identifier) @name) @definition.type
        (abstract_class_declaration name: (type_identifier) @name) @definition.class
        (enum_declaration name: (identifier) @name) @definition.type
    ]
)

(
    ((comment)* @comment)
    .
    [
        (method_definition name: (_) @name body: (_) @body) @definition.method
        (function_declaration name: (_) @name body: (_) @body) @definition.function
        (function_signature name: (identifier) @name) @definition.function
        (method_signature name: (property_identifier) @name) @definition.method
        (abstract_method_signature name: (property_identifier) @name) @definition.method
        (variable_declarator name: (identifier) @name type: (type_annotation (type_identifier)))
    ]
)
`,m0t=`
(call_expression function: (_) @name) @reference

(type_identifier) @name @reference

(new_expression constructor: (identifier) @name) @reference
`;f();var h0t=new Set(["string","number","boolean","null","undefined","void","any","never","object","symbol","bigint","Array","Promise","Date","RegExp","Map","Set"]),cQ=class extends HS{static{s(this,"TypeScriptReactSymbolExtractor")}get languageId(){return"typescriptreact"}extractSymbols(e,n){return Promise.all([this.executeQuery(e,n,g0t),super.extractSymbols(e,n)]).then(([r,i])=>[...r,...i])}createNameFromScopes(e,n){return n.map(r=>r.nameRange.getText(e)).join(".")}},uQ=class extends GS{static{s(this,"TypeScriptReactReferenceExtractor")}get languageId(){return"typescriptreact"}createNameFromScopes(e,n){return n.length>0?n[n.length-1].nameRange.getText(e):""}async extractReferences(e,n){let[r,i]=await Promise.all([this.executeQuery(e,n,A0t),super.extractReferences(e,n)]);return[...r.filter(o=>!h0t.has(o.unqualifiedName)),...i]}},g0t=`
(
    ((comment)* @comment)
    .
    [
        (lexical_declaration
            (variable_declarator
            name: (identifier) @name
            value: (arrow_function
                parameters: (_) 
                body: (_) @body))) @definition.function
    ]
)
`,A0t=`
    (jsx_element open_tag: (jsx_opening_element name: (_) @name) close_tag: (jsx_closing_element) ) @reference
    
    (jsx_self_closing_element name: (_) @name) @reference
    
    (import_specifier name:(identifier) @name) @reference
`;var I8=[{symbolExtractor:new tQ,referenceExtractor:new nQ,importExtractor:new rQ,languageId:"java"},{symbolExtractor:new JM,referenceExtractor:new XM,importExtractor:new ZM,languageId:"go"},{symbolExtractor:new sQ,referenceExtractor:new aQ,importExtractor:new lQ,languageId:"python"},{symbolExtractor:new HS,referenceExtractor:new GS,languageId:"typescript"},{symbolExtractor:new cQ,referenceExtractor:new uQ,languageId:"typescriptreact"},{symbolExtractor:new iQ,referenceExtractor:new oQ,languageId:"javascript"}];function xTe(t){let e=WS({uri:t});if(e&&I8.some(n=>e===n.languageId))return e}s(xTe,"getSupportedLanguageIdForMultiLanguageProvider");var vTe=new Map(I8.map(t=>[t.languageId,t.referenceExtractor])),dQ=new Map(I8.map(t=>[t.languageId,t.symbolExtractor])),bTe=new Map(I8.filter(t=>t.importExtractor!==void 0).map(t=>[t.languageId,t.importExtractor])),ene=I8.map(t=>kI[t.languageId].extensions).flat();f();f();f();f();f();f();f();f();f();function tne(t,e,n){return{type:"virtual",indentation:t,subs:e,label:n}}s(tne,"virtualNode");function ETe(t,e,n,r,i){if(n==="")throw new Error("Cannot create a line node with an empty source line");return{type:"line",indentation:t,lineNumber:e,sourceLine:n,subs:r,label:i}}s(ETe,"lineNode");function nne(t){return{type:"blank",lineNumber:t,subs:[]}}s(nne,"blankNode");function fQ(t){return{type:"top",indentation:-1,subs:t??[]}}s(fQ,"topNode");function gc(t){return t.type==="blank"}s(gc,"isBlank");function PI(t){return t.type==="line"}s(PI,"isLine");function DI(t){return t.type==="virtual"}s(DI,"isVirtual");f();function ITe(t,e){return Vc(t,n=>{n.label=n.label?e(n.label)?void 0:n.label:void 0},"bottomUp"),t}s(ITe,"clearLabelsIf");function NI(t,e){switch(t.type){case"line":case"virtual":{let n=t.subs.map(r=>NI(r,e));return{...t,subs:n,label:t.label?e(t.label):void 0}}case"blank":return{...t,label:t.label?e(t.label):void 0};case"top":return{...t,subs:t.subs.map(n=>NI(n,e)),label:t.label?e(t.label):void 0}}}s(NI,"mapLabels");function Vc(t,e,n){function r(i){n==="topDown"&&e(i),i.subs.forEach(o=>{r(o)}),n==="bottomUp"&&e(i)}s(r,"_visit"),r(t)}s(Vc,"visitTree");function rne(t,e,n,r){let i=e;function o(a){i=n(a,i)}return s(o,"visitor"),Vc(t,o,r),i}s(rne,"foldTree");function pQ(t,e,n){let r=s(o=>{if(n!==void 0&&n(o))return o;{let a=o.subs.map(r).filter(l=>l!==void 0);return o.subs=a,e(o)}},"rebuild"),i=r(t);return i!==void 0?i:fQ()}s(pQ,"rebuildTree");f();function C0t(t){let e=t.split(`
`),n=e.map(u=>u.match(/^\s*/)[0].length),r=e.map(u=>u.trimLeft());function i(u){let[d,p]=o(u+1,n[u]);return[ETe(n[u],u,r[u],d),p]}s(i,"parseNode");function o(u,d){let p,m=[],h=u,g;for(;h<r.length&&(r[h]===""||n[h]>d);)if(r[h]==="")g===void 0&&(g=h),h+=1;else{if(g!==void 0){for(let y=g;y<h;y++)m.push(nne(y));g=void 0}[p,h]=i(h),m.push(p)}return g!==void 0&&(h=g),[m,h]}s(o,"parseSubs");let[a,l]=o(0,-1),c=l;for(;c<r.length&&r[c]==="";)a.push(nne(c)),c+=1;if(c<r.length)throw new Error(`Parsing did not go to end of file. Ended at ${c} out of ${r.length}`);return fQ(a)}s(C0t,"parseRaw");function T8(t,e){function n(r){if(PI(r)){let i=e.find(o=>o.matches(r.sourceLine));i&&(r.label=i.label)}}s(n,"visitor"),Vc(t,n,"bottomUp")}s(T8,"labelLines");function mQ(t){function e(n){if(DI(n)&&n.label===void 0){let r=n.subs.filter(i=>!gc(i));r.length===1&&(n.label=r[0].label)}}s(e,"visitor"),Vc(t,e,"bottomUp")}s(mQ,"labelVirtualInherited");function w8(t){return Object.keys(t).map(e=>{let n;return t[e].test?n=s(r=>t[e].test(r),"matches"):n=t[e],{matches:n,label:e}})}s(w8,"buildLabelRules");function ine(t){let n=pQ(t,s(function(r){if(r.subs.length===0||r.subs.findIndex(a=>a.label==="closer"||a.label==="opener")===-1)return r;let i=[],o;for(let a=0;a<r.subs.length;a++){let l=r.subs[a],c=r.subs[a-1];if(l.label==="opener"&&c!==void 0&&PI(c))c.subs.push(l),l.subs.forEach(u=>c.subs.push(u)),l.subs=[];else if(l.label==="closer"&&o!==void 0&&(PI(l)||DI(l))&&l.indentation>=o.indentation){let u=i.length-1;for(;u>0&&gc(i[u]);)u-=1;if(o.subs.push(...i.splice(u+1)),l.subs.length>0){let d=o.subs.findIndex(g=>g.label!=="newVirtual"),p=o.subs.slice(0,d),m=o.subs.slice(d),h=m.length>0?[tne(l.indentation,m,"newVirtual")]:[];o.subs=[...p,...h,l]}else o.subs.push(l)}else i.push(l),gc(l)||(o=l)}return r.subs=i,r},"rebuilder"));return ITe(t,r=>r==="newVirtual"),n}s(ine,"combineClosersAndOpeners");function TTe(t,e=gc,n){return pQ(t,s(function(i){if(i.subs.length<=1)return i;let o=[],a=[],l,c=!1;function u(d=!1){if(l!==void 0&&(o.length>0||!d)){let p=tne(l,a,n);o.push(p)}else a.forEach(p=>o.push(p))}s(u,"flushBlockIntoNewSubs");for(let d=0;d<i.subs.length;d++){let p=i.subs[d],m=e(p);!m&&c&&(u(),a=[]),c=m,a.push(p),gc(p)||(l=l??p.indentation)}return u(!0),i.subs=o,i},"rebuilder"))}s(TTe,"groupBlocks");function LI(t){return pQ(t,s(function(n){return DI(n)&&n.label===void 0&&n.subs.length<=1?n.subs.length===0?void 0:n.subs[0]:(n.subs.length===1&&DI(n.subs[0])&&n.subs[0].label===void 0&&(n.subs=n.subs[0].subs),n)},"rebuilder"))}s(LI,"flattenVirtual");var x0t={opener:/^[[({]/,closer:/^[\])}]/},v0t=w8(x0t),wTe={};function one(t,e){wTe[t]=e}s(one,"registerLanguageSpecificParser");function _8(t,e){let n=C0t(t),r=wTe[e??""];return r?r(n):(T8(n,v0t),ine(n))}s(_8,"parseTree");var b0t={package:/^package /,import:/^import /,class:/\bclass /,interface:/\binterface /,javadoc:/^\/\*\*/,comment_multi:/^\/\*[^*]/,comment_single:/^\/\//,annotation:/^@/,opener:/^[[({]/,closer:/^[\])}]/},E0t=w8(b0t);function _Te(t){let e=t;return T8(e,E0t),e=ine(e),e=LI(e),mQ(e),Vc(e,n=>{if(n.label==="class"||n.label==="interface")for(let r of n.subs)!gc(r)&&(r.label===void 0||r.label==="annotation")&&(r.label="member")},"bottomUp"),e}s(_Te,"processJava");f();var I0t={heading:/^# /,subheading:/^## /,subsubheading:/### /},T0t=w8(I0t);function STe(t){let e=t;if(T8(e,T0t),gc(e))return e;function n(o){if(o.label==="heading")return 1;if(o.label==="subheading")return 2;if(o.label==="subsubheading")return 3}s(n,"headingLevel");let r=[e],i=[...e.subs];e.subs=[];for(let o of i){let a=n(o);if(a===void 0||gc(o))r[r.length-1].subs.push(o);else{for(;r.length<a;)r.push(r[r.length-1]);for(r[a-1].subs.push(o),r[a]=o;r.length>a+1;)r.pop()}}return e=TTe(e),e=LI(e),mQ(e),e}s(STe,"processMarkdown");f();function RTe(t){return" ".repeat(t.indentation)+t.sourceLine+`
`}s(RTe,"deparseLine");one("markdown",STe);one("java",_Te);var w0t={worthUp:.9,worthSibling:.88,worthDown:.8};function sne(t,e,n=Bo(),r=w0t){let i=NI(t,o=>o?1:void 0);return Vc(i,o=>{if(gc(o))return;let a=o.subs.reduce((l,c)=>Math.max(l,c.label??0),0);o.label=Math.max(o.label??0,a*r.worthUp)},"bottomUp"),Vc(i,o=>{if(gc(o))return;let a=o.subs.map(u=>u.label??0),l=[...a];for(let u=0;u<a.length;u++)a[u]!==0&&(l=l.map((d,p)=>Math.max(d,Math.pow(r.worthSibling,Math.abs(u-p))*a[u])));let c=o.label;c!==void 0&&(l=l.map(u=>Math.max(u,r.worthDown*c))),o.subs.forEach((u,d)=>u.label=l[d])},"topDown"),_0t(i,e,n)}s(sne,"fromTreeWithFocussedLines");function _0t(t,e,n=Bo()){let r=rne(t,[],(i,o)=>((i.type==="line"||i.type==="blank")&&o.push(i.type==="line"?[RTe(i).trimEnd(),i.label??0]:["",i.label??0]),o),"topDown");return new Bt(r,e,n)}s(_0t,"fromTreeWithValuedLines");function y0(t,e=!0,n=!0,r,i=Bo()){let o=typeof t=="string"?_8(t):_8(t.source,t.languageId);LI(o);let a=NI(o,l=>e&&l!=="closer");return Vc(a,l=>{l.label===void 0&&(l.label=e&&l.label!==!1)},"topDown"),e&&Vc(a,l=>{if(l.label){let c=!1;for(let u of[...l.subs].reverse())u.label&&!c?c=!0:u.label=!1}else for(let c of l.subs)c.label=!1;l.subs.length>0&&(l.label=!1)},"topDown"),n&&Vc(a,l=>{l.label||=(PI(l)||gc(l))&&l.lineNumber==0},"topDown"),sne(a,r,i)}s(y0,"elidableTextForSourceCode");f();var S8=class t{constructor(e,n,r,i="strict",o){this.text=e;this._value=n;this._cost=r;this.metadata=o;this.markedForRemoval=!1;if(e.includes(`
`)&&i!=="none")throw new Error("LineWithValueAndCost: text contains newline");if(n<0&&i!=="none")throw new Error("LineWithValueAndCost: value is negative");if(r<0&&i!=="none")throw new Error("LineWithValueAndCost: cost is negative");if(i=="strict"&&n>1)throw new Error("Value should normally be between 0 and 1 -- set validation to `loose` to ignore this error")}static{s(this,"LineWithValueAndCost")}get value(){return this._value}get cost(){return this._cost}adjustValue(e){return this._value*=e,this}setValue(e){return this._value=e,this}recost(e=n=>Bo().tokenLength(n+`
`)){return this._cost=e(this.text),this}copy(){let e=new t(this.text,this.value,this.cost,"none",this.metadata);return e.markedForRemoval=this.markedForRemoval,e}};var Bt=class t{constructor(e,n,r=Bo()){this.metadata=n;this.tokenizer=r;this.lines=[];let i=[];for(let o of e){let a=Array.isArray(o)?o[1]:1,l=Array.isArray(o)?o[0]:o;typeof l=="string"?l.split(`
`).forEach(c=>i.push(new S8(c,a,r.tokenLength(c+`
`),"strict",this.metadata))):l instanceof t?l.lines.forEach(c=>i.push(c.copy().adjustValue(a))):"source"in l&&"languageId"in l&&y0(l).lines.forEach(c=>i.push(c.copy().adjustValue(a)))}this.lines=i}static{s(this,"ElidableText")}adjust(e){this.lines.forEach(n=>n.adjustValue(e))}recost(e=n=>Bo().tokenLength(n+`
`)){this.lines.forEach(n=>n.recost(e))}elide(e,n="[...]",r=!0,i="removeLeastDesirable",o=this.tokenizer,a="topToBottom"){if(o.tokenLength(n+`
`)>e)throw new Error("maxTokens must be larger than the ellipsis length");let{lines:l,totalCost:c,priorityQueue:u}=R0t(this.lines,i);if(c<=e)return ane(l);k0t(u,a);let d=c;for(;d>e&&u.length>0;){let m=u.shift().originalIndex,h=l[m];if(h.markedForRemoval)continue;let g=r?B0t(l,m):"",y=kTe(g,n,o,h);l[m]=y,d-=h.cost,d+=y.cost;let v=m+1;if(v<l.length){let E=l[v];hQ(E,n)&&(d-=E.cost,E.markedForRemoval=!0)}let b=m-1;if(b>=0){let E=l[b];hQ(E,n)&&(d-=E.cost,E.markedForRemoval=!0)}}if(d>e)return ane([kTe("",n,o)]);let p=l.filter(m=>!m.markedForRemoval);for(let m=p.length-1;m>0;m--)hQ(p[m],n)&&hQ(p[m-1],n)&&p.splice(m,1);return ane(p)}};function S0t(t){return t?.text.match(/^\s*/)?.[0]??""}s(S0t,"getIndentation");function hQ(t,e){return t?.text.trim()===e.trim()}s(hQ,"isEllipsis");function ane(t){return{getText:s(()=>t.map(e=>e.text).join(`
`),"getText"),getLines:s(()=>t,"getLines")}}s(ane,"produceElidedText");function R0t(t,e){let n=0,r=[];return{lines:t.map((o,a)=>{let l=o.copy();return e==="removeLeastBangForBuck"&&l.adjustValue(1/l.cost),n+=l.cost,r.push({originalIndex:a,value:l.value}),l}),totalCost:n,priorityQueue:r}}s(R0t,"initializeElisionContext");function k0t(t,e){t.sort((n,r)=>n.value!==r.value?n.value-r.value:e==="bottomToTop"?r.originalIndex-n.originalIndex:n.originalIndex-r.originalIndex)}s(k0t,"sortPriorityQueue");function B0t(t,e){let n="";for(let r=e;r>=0;r--){let i=t[r];if(!i.markedForRemoval&&i.text.trim()!==""){n=S0t(i);break}}return n}s(B0t,"getClosestIndentation");function kTe(t,e,n,r){let i=t+e;return new S8(i,1/0,n.tokenLength(i+`
`),"loose",r?.metadata)}s(kTe,"getNewEllipsis");f();f();function Im(){}s(Im,"Diff");Im.prototype={diff:s(function(e,n){var r,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=i.callback;typeof i=="function"&&(o=i,i={});var a=this;function l(k){return k=a.postProcess(k,i),o?(setTimeout(function(){o(k)},0),!0):k}s(l,"done"),e=this.castInput(e,i),n=this.castInput(n,i),e=this.removeEmpty(this.tokenize(e,i)),n=this.removeEmpty(this.tokenize(n,i));var c=n.length,u=e.length,d=1,p=c+u;i.maxEditLength!=null&&(p=Math.min(p,i.maxEditLength));var m=(r=i.timeout)!==null&&r!==void 0?r:1/0,h=Date.now()+m,g=[{oldPos:-1,lastComponent:void 0}],y=this.extractCommon(g[0],n,e,0,i);if(g[0].oldPos+1>=u&&y+1>=c)return l(BTe(a,g[0].lastComponent,n,e,a.useLongestToken));var v=-1/0,b=1/0;function E(){for(var k=Math.max(v,-d);k<=Math.min(b,d);k+=2){var P=void 0,N=g[k-1],U=g[k+1];N&&(g[k-1]=void 0);var ne=!1;if(U){var he=U.oldPos-k;ne=U&&0<=he&&he<c}var ae=N&&N.oldPos+1<u;if(!ne&&!ae){g[k]=void 0;continue}if(!ae||ne&&N.oldPos<U.oldPos?P=a.addToPath(U,!0,!1,0,i):P=a.addToPath(N,!1,!0,1,i),y=a.extractCommon(P,n,e,k,i),P.oldPos+1>=u&&y+1>=c)return l(BTe(a,P.lastComponent,n,e,a.useLongestToken));g[k]=P,P.oldPos+1>=u&&(b=Math.min(b,k-1)),y+1>=c&&(v=Math.max(v,k+1))}d++}if(s(E,"execEditLength"),o)s(function k(){setTimeout(function(){if(d>p||Date.now()>h)return o();E()||k()},0)},"exec")();else for(;d<=p&&Date.now()<=h;){var _=E();if(_)return _}},"diff"),addToPath:s(function(e,n,r,i,o){var a=e.lastComponent;return a&&!o.oneChangePerToken&&a.added===n&&a.removed===r?{oldPos:e.oldPos+i,lastComponent:{count:a.count+1,added:n,removed:r,previousComponent:a.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:n,removed:r,previousComponent:a}}},"addToPath"),extractCommon:s(function(e,n,r,i,o){for(var a=n.length,l=r.length,c=e.oldPos,u=c-i,d=0;u+1<a&&c+1<l&&this.equals(r[c+1],n[u+1],o);)u++,c++,d++,o.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return d&&!o.oneChangePerToken&&(e.lastComponent={count:d,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=c,u},"extractCommon"),equals:s(function(e,n,r){return r.comparator?r.comparator(e,n):e===n||r.ignoreCase&&e.toLowerCase()===n.toLowerCase()},"equals"),removeEmpty:s(function(e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(e[r]);return n},"removeEmpty"),castInput:s(function(e){return e},"castInput"),tokenize:s(function(e){return Array.from(e)},"tokenize"),join:s(function(e){return e.join("")},"join"),postProcess:s(function(e){return e},"postProcess")};function BTe(t,e,n,r,i){for(var o=[],a;e;)o.push(e),a=e.previousComponent,delete e.previousComponent,e=a;o.reverse();for(var l=0,c=o.length,u=0,d=0;l<c;l++){var p=o[l];if(p.removed)p.value=t.join(r.slice(d,d+p.count)),d+=p.count;else{if(!p.added&&i){var m=n.slice(u,u+p.count);m=m.map(function(h,g){var y=r[d+g];return y.length>h.length?y:h}),p.value=t.join(m)}else p.value=t.join(n.slice(u,u+p.count));u+=p.count,p.added||(d+=p.count)}}return o}s(BTe,"buildValues");var u2n=new Im;function PTe(t,e){var n;for(n=0;n<t.length&&n<e.length;n++)if(t[n]!=e[n])return t.slice(0,n);return t.slice(0,n)}s(PTe,"longestCommonPrefix");function DTe(t,e){var n;if(!t||!e||t[t.length-1]!=e[e.length-1])return"";for(n=0;n<t.length&&n<e.length;n++)if(t[t.length-(n+1)]!=e[e.length-(n+1)])return t.slice(-n);return t.slice(-n)}s(DTe,"longestCommonSuffix");function lne(t,e,n){if(t.slice(0,e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't start with prefix ").concat(JSON.stringify(e),"; this is a bug"));return n+t.slice(e.length)}s(lne,"replacePrefix");function cne(t,e,n){if(!e)return t+n;if(t.slice(-e.length)!=e)throw Error("string ".concat(JSON.stringify(t)," doesn't end with suffix ").concat(JSON.stringify(e),"; this is a bug"));return t.slice(0,-e.length)+n}s(cne,"replaceSuffix");function R8(t,e){return lne(t,e,"")}s(R8,"removePrefix");function gQ(t,e){return cne(t,e,"")}s(gQ,"removeSuffix");function NTe(t,e){return e.slice(0,P0t(t,e))}s(NTe,"maximumOverlap");function P0t(t,e){var n=0;t.length>e.length&&(n=t.length-e.length);var r=e.length;t.length<e.length&&(r=t.length);var i=Array(r),o=0;i[0]=0;for(var a=1;a<r;a++){for(e[a]==e[o]?i[a]=i[o]:i[a]=o;o>0&&e[a]!=e[o];)o=i[o];e[a]==e[o]&&o++}o=0;for(var l=n;l<t.length;l++){for(;o>0&&t[l]!=e[o];)o=i[o];t[l]==e[o]&&o++}return o}s(P0t,"overlapCount");var AQ="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",D0t=new RegExp("[".concat(AQ,"]+|\\s+|[^").concat(AQ,"]"),"ug"),yQ=new Im;yQ.equals=function(t,e,n){return n.ignoreCase&&(t=t.toLowerCase(),e=e.toLowerCase()),t.trim()===e.trim()};yQ.tokenize=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n;if(e.intlSegmenter){if(e.intlSegmenter.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');n=Array.from(e.intlSegmenter.segment(t),function(o){return o.segment})}else n=t.match(D0t)||[];var r=[],i=null;return n.forEach(function(o){/\s/.test(o)?i==null?r.push(o):r.push(r.pop()+o):/\s/.test(i)?r[r.length-1]==i?r.push(r.pop()+o):r.push(i+o):r.push(o),i=o}),r};yQ.join=function(t){return t.map(function(e,n){return n==0?e:e.replace(/^\s+/,"")}).join("")};yQ.postProcess=function(t,e){if(!t||e.oneChangePerToken)return t;var n=null,r=null,i=null;return t.forEach(function(o){o.added?r=o:o.removed?i=o:((r||i)&&LTe(n,i,r,o),n=o,r=null,i=null)}),(r||i)&&LTe(n,i,r,null),t};function LTe(t,e,n,r){if(e&&n){var i=e.value.match(/^\s*/)[0],o=e.value.match(/\s*$/)[0],a=n.value.match(/^\s*/)[0],l=n.value.match(/\s*$/)[0];if(t){var c=PTe(i,a);t.value=cne(t.value,a,c),e.value=R8(e.value,c),n.value=R8(n.value,c)}if(r){var u=DTe(o,l);r.value=lne(r.value,l,u),e.value=gQ(e.value,u),n.value=gQ(n.value,u)}}else if(n)t&&(n.value=n.value.replace(/^\s*/,"")),r&&(r.value=r.value.replace(/^\s*/,""));else if(t&&r){var d=r.value.match(/^\s*/)[0],p=e.value.match(/^\s*/)[0],m=e.value.match(/\s*$/)[0],h=PTe(d,p);e.value=R8(e.value,h);var g=DTe(R8(d,h),m);e.value=gQ(e.value,g),r.value=lne(r.value,d,g),t.value=cne(t.value,d,d.slice(0,d.length-g.length))}else if(r){var y=r.value.match(/^\s*/)[0],v=e.value.match(/\s*$/)[0],b=NTe(v,y);e.value=gQ(e.value,b)}else if(t){var E=t.value.match(/\s*$/)[0],_=e.value.match(/^\s*/)[0],k=NTe(E,_);e.value=R8(e.value,k)}}s(LTe,"dedupeWhitespaceInChangeObjects");var N0t=new Im;N0t.tokenize=function(t){var e=new RegExp("(\\r?\\n)|[".concat(AQ,"]+|[^\\S\\n\\r]+|[^").concat(AQ,"]"),"ug");return t.match(e)||[]};var pne=new Im;pne.tokenize=function(t,e){e.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));var n=[],r=t.split(/(\n|\r\n)/);r[r.length-1]||r.pop();for(var i=0;i<r.length;i++){var o=r[i];i%2&&!e.newlineIsToken?n[n.length-1]+=o:n.push(o)}return n};pne.equals=function(t,e,n){return n.ignoreWhitespace?((!n.newlineIsToken||!t.includes(`
`))&&(t=t.trim()),(!n.newlineIsToken||!e.includes(`
`))&&(e=e.trim())):n.ignoreNewlineAtEof&&!n.newlineIsToken&&(t.endsWith(`
`)&&(t=t.slice(0,-1)),e.endsWith(`
`)&&(e=e.slice(0,-1))),Im.prototype.equals.call(this,t,e,n)};var L0t=new Im;L0t.tokenize=function(t){return t.split(/(\S.+?[.!?])(?=\s+|$)/)};var F0t=new Im;F0t.tokenize=function(t){return t.split(/([{}:;,]|\s+)/)};function une(t){"@babel/helpers - typeof";return une=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},une(t)}s(une,"_typeof");var k8=new Im;k8.useLongestToken=!0;k8.tokenize=pne.tokenize;k8.castInput=function(t,e){var n=e.undefinedReplacement,r=e.stringifyReplacer,i=r===void 0?function(o,a){return typeof a>"u"?n:a}:r;return typeof t=="string"?t:JSON.stringify(dne(t,null,null,i),i,"  ")};k8.equals=function(t,e,n){return Im.prototype.equals.call(k8,t.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"),n)};function dne(t,e,n,r,i){e=e||[],n=n||[],r&&(t=r(i,t));var o;for(o=0;o<e.length;o+=1)if(e[o]===t)return n[o];var a;if(Object.prototype.toString.call(t)==="[object Array]"){for(e.push(t),a=new Array(t.length),n.push(a),o=0;o<t.length;o+=1)a[o]=dne(t[o],e,n,r,i);return e.pop(),n.pop(),a}if(t&&t.toJSON&&(t=t.toJSON()),une(t)==="object"&&t!==null){e.push(t),a={},n.push(a);var l=[],c;for(c in t)Object.prototype.hasOwnProperty.call(t,c)&&l.push(c);for(l.sort(),o=0;o<l.length;o+=1)c=l[o],a[c]=dne(t[c],e,n,r,c);e.pop(),n.pop()}else a=t;return a}s(dne,"canonicalize");var fne=new Im;fne.tokenize=function(t){return t.slice()};fne.join=fne.removeEmpty=function(t){return t};var FTe=require("fs");async function MTe(t,e,n,r,i){let o=new Map,a=0;for(let p of t){let m=p.node.fileName.toLowerCase(),h=o.get(m);h?h.symbols.push(p):o.set(m,{symbols:[p],topRank:a}),a++}if(o.delete(n.toLowerCase()),o.size===0)return[];let l=e,c=e/Math.min(4,o.size),u=[],d=Array.from(o.keys());d.sort((p,m)=>{let h=o.get(p).topRank,g=o.get(m).topRank;return h-g});for(let p of d){let m=o.get(p).symbols;if(m.length===0)continue;let h=m[0].node.fileName,g=m.reduce((y,v)=>y+v.node.extentRange.length,0);for(let y of m){if(l<=5)return u;D1(i);let v=y.node.extentRange.length/g,b=Math.min(l,v*c),E=(await Q0t([y])).elide(b).getText();l-=r.tokenLength(E),u.push({uri:h,value:E})}}return u}s(MTe,"symbolRangesToCodeSnippets");async function Q0t(t){if(t.length===0)return new Bt([]);let e=t[0].node.fileName,n=[],r="";try{let i=Ho(e);i&&(r=(await FTe.promises.readFile(i)).toString())}catch{}for(let i of t)QTe(i,r).forEach(o=>n.push(o));return new Bt(n)}s(Q0t,"sameFileSymbolRangeToElidableText");function QTe(t,e){let r=[],i=t.node,o=e.substring(mne(e,i.commentRange.start),i.commentRange.end);r.push([hne(o),1-3e-4]);let a=mne(e,i.bodyRange.start),l=mne(e,i.extentRange.start),c=i.bodyRange.length===0?e.substring(l,i.extentRange.end):e.substring(i.commentRange.length===0?l:i.commentRange.end,a);if(BI(i.kind)&&(c="BEGIN "+c.trimStart()),r.push([hne(c),1-1e-4]),t.children.length>0)for(let u of t.children)r.push(...QTe(u,e));else{let u=1-(BI(t.node.kind)?3e-4:4e-4),d=e.substring(a,i.bodyRange.end);r.push([hne(d),u])}return BI(i.kind)&&r.push(["END "+c.substring(6),1-1e-4]),r.filter(u=>u[0].length>0)}s(QTe,"prepareForElidableText");function mne(t,e){for(;e-1>=0&&(t[e-1]==="	"||t[e-1]===" ");)e--;return e}s(mne,"shiftLeftToNearestLineEndingOrAlphanumeric");function hne(t){let e=0;for(;e<t.length&&(t[e]==="\r"||t[e]===`
`);)e++;let n=t.length-1;for(;n>=0&&(t[n]==="\r"||t[n]===`
`||t[n]===" "||t[n]==="	");)n--;return t.substring(e,n+1)}s(hne,"trimLineEndingsAndTrailingWhitespace");var gne=class{constructor(e,n){this.referenceExtractors=new Map;this.index=e,this.referenceExtractors=n}static{s(this,"ContextRetrievalStrategy")}},Xx=class extends gne{static{s(this,"UnqualifiedNameRetrievalStrategy")}constructor(e,n,r,i){super(e,n),this.caseSensitive=r,this.typesOnly=i}async getContextAtPositionAsync(e,n,r,i,o,a){let l=this.referenceExtractors.get(i);if(!l)return[];D1(a);let c=await l.extractReferences(e,n);D1(a);let u=Array.from(c);u.sort((h,g)=>this.compareSymbolRangesByProximityToCaret(h,g,r));let d=[],p=new Set,m=await this.findDefinitionsViaUnqualifiedNames(u,o,a);this.typesOnly&&(m=m.filter(h=>BI(h.kind)));for(let h of m)p.has(JSON.stringify(h))||(p.add(JSON.stringify(h)),d.push(await this.makeSymbolRangeNodeFromDefinition(h,a)));return d}async findDefinitionsViaUnqualifiedNames(e,n,r){let i=Array.from(new Set(e.map(p=>p.unqualifiedName))),o=!this.caseSensitive,a=await this.index.findPotentialDefinitionsAsync(i,o,r),l=s(p=>o?p.toLowerCase():p,"lowercaseIfCaseInsensitive"),c=s(p=>l(p.unqualifiedName),"getSymbolKey"),u=new Map;for(let p of a){let m=c(p),h=u.get(m)??[];u.set(m,[...h,p])}let d=[];for(let p of i){let m=u.get(l(p));if(!(!m||m.length>n.mlcpMaxSymbolMatches)){if(d.length+m.length>n.mlcpMaxContextItems){d.push(...m.slice(0,n.mlcpMaxContextItems-d.length));break}d.push(...m)}}return d}async makeSymbolRangeNodeFromDefinition(e,n){if(D1(n),BI(e.kind)){let r=await this.index.findSymbolsByFullyQualifiedNamePrefix(e.fileName,e.fullyQualifiedName+".",n),i=await Promise.all(r.map(o=>this.makeSymbolRangeNodeFromDefinition(o,n)));return{node:e,children:i}}else return{node:e,children:[]}}compareSymbolRangesByProximityToCaret(e,n,r){let i=e.extentRange.end<=r,o=n.extentRange.end<=r;if(i&&!o)return-1;if(!i&&o)return 1;let a=Math.abs(e.extentRange.start-r),l=Math.abs(n.extentRange.start-r);return a-l}},CQ=class{constructor(e,n){this.strategies=new Map;this.strategies.set("go",new Xx(e,n,!0,!0)),this.strategies.set("java",new Xx(e,n,!0,!0)),this.strategies.set("python",new Xx(e,n,!0,!1)),this.strategies.set("typescript",new Xx(e,n,!0,!0)),this.strategies.set("typescriptreact",new Xx(e,n,!0,!0)),this.strategies.set("javascript",new Xx(e,n,!0,!1))}static{s(this,"SyntaxAwareContextRetrieval")}async getStringifiedContextAtPositionAsync(e,n,r,i,o,a,l){let c=await this.getContextAtPositionAsync(e,n,r,i,o,l);D1(l);let u=Bo();return MTe(c,a,e,u,l)}async getContextAtPositionAsync(e,n,r,i,o,a){return this.strategies.has(i)?this.strategies.get(i).getContextAtPositionAsync(e,n,r,i,o,a):[]}};f();f();f();f();var FI={Id:"id"},C0={FilePath:"filePath",LastWriteTimeUtc:"lastWriteTimeUtc"},Fi={DocumentId:"documentId",FullyQualifiedName:"fullyQualifiedName",UnqualifiedName:"unqualifiedName",CommentStart:"commentStart",CommentLength:"commentLength",NameStart:"nameStart",NameLength:"nameLength",BodyStart:"bodyStart",BodyLength:"bodyLength",ExtentStart:"extentStart",ExtentLength:"extentLength",SymbolKind:"symbolKind",RefKind:"refKind"};f();f();var xQ=class{constructor(e,n,r){this.tableName=e;this.createOptimizations=n;this.extraCreateDeclarations=r;this.primaryKey=new Ane(FI.Id)}static{s(this,"SQLTableQueryGenerator")}createTableQueries(){return this.createTableString??=this.generateCreateTableString(),[this.createTableString,...this.createOptimizations]}generateCreateTableString(){let e=this.fields.map(n=>n.initColumnString());return this.extraCreateDeclarations&&e.push(this.extraCreateDeclarations),e.push(),[`CREATE TABLE IF NOT EXISTS ${this.tableName} (`,`    ${this.primaryKey.initColumnString()},`,`    ${e.join(`,
`)}`,")"].join(`
`)}insertQuery(e,n){this.cachedInsertQueryStrings??=this.generateInsertQueryStrings();let r=[this.cachedInsertQueryStrings.prefix,Array(n).fill(this.cachedInsertQueryStrings.valuesTemplate).join(`,
`)];return e&&r.push("ON CONFLICT DO NOTHING"),r.join(`
`)}generateInsertQueryStrings(){return{prefix:`INSERT INTO ${this.tableName} (${this.fields.map(e=>e.name).join(", ")})
VALUES`,valuesTemplate:`(${Array(this.fields.length).fill("?").join(", ")})`}}},B8=class t extends xQ{constructor(){super(t.tableName,[`CREATE UNIQUE INDEX IF NOT EXISTS 'IX_Document_FilePath' ON '${t.tableName}' ('${C0.FilePath}');`]);this.fields=[new N8(C0.FilePath,{notNull:!0,collate:!0,noCase:!0,unique:!0}),new Ad(C0.LastWriteTimeUtc,{notNull:!0})]}static{s(this,"DocumentQueryGenerator")}static{this.tableName="Document"}},P8=class t extends xQ{constructor(){super(t.tableName,[`CREATE INDEX IF NOT EXISTS 'IX_Symbol_DocumentId' ON '${t.tableName}' ('${Fi.DocumentId}', '${Fi.ExtentStart}', '${Fi.ExtentLength}');`,`CREATE INDEX IF NOT EXISTS 'IX_Symbol_UnqualifiedName' ON '${t.tableName}' ('${Fi.UnqualifiedName}');`],`FOREIGN KEY(${Fi.DocumentId}) REFERENCES Document(${FI.Id}) ON DELETE CASCADE`);this.fields=[new Ad(Fi.DocumentId),new N8(Fi.FullyQualifiedName,{notNull:!0}),new N8(Fi.UnqualifiedName,{notNull:!0}),new Ad(Fi.CommentStart,{notNull:!0}),new Ad(Fi.CommentLength,{notNull:!0}),new Ad(Fi.NameStart,{notNull:!0}),new Ad(Fi.NameLength,{notNull:!0}),new Ad(Fi.BodyStart,{notNull:!0}),new Ad(Fi.BodyLength,{notNull:!0}),new Ad(Fi.ExtentStart,{notNull:!0}),new Ad(Fi.ExtentLength,{notNull:!0}),new Ad(Fi.SymbolKind,{notNull:!0}),new Ad(Fi.RefKind,{notNull:!0})]}static{s(this,"SymbolQueryGenerator")}static{this.tableName="Symbol"}},D8=class{constructor(e,n){this.name=e;this.notNull=n?.notNull??!1}static{s(this,"SQLField")}},N8=class extends D8{static{s(this,"StringColumn")}constructor(e,n){super(e,{notNull:n?.notNull}),this.collate=n?.collate??!1,this.noCase=n?.noCase??!1,this.unique=n?.unique??!1}initColumnString(){let e=this.collate?"COLLATE":void 0,n=this.noCase?"NOCASE":void 0,r=this.notNull?"NOT NULL":void 0,i=this.unique?"UNIQUE":void 0,o=[e,n,r,i].filter(a=>a).join(" ");return`'${this.name}' VARCHAR(500) ${o}`}},Ad=class extends D8{static{s(this,"NumberColumn")}initColumnString(){return`'${this.name}' INTEGER${this.notNull?" NOT NULL":""}`}},Ane=class extends D8{static{s(this,"NumberPrimaryKeyColumn")}initColumnString(){return`'${this.name}' INTEGER PRIMARY KEY AUTOINCREMENT${this.notNull?" NOT NULL":""}`}};var vQ=class{static{s(this,"SQLTable")}constructor(e){this.queryGenerator=this.createQueryGenerator(),this.init=this.doInit(e)}async doInit(e){let n=await e;if(n)return await this.create(n),n}async create(e){let n=s(i=>new Promise((o,a)=>{e.run(i,l=>{l?a(l):o()})}),"runQuery"),r=this.queryGenerator.createTableQueries();for(let i of r)await n(i)}async insert(e,n){let r=await this.init;r&&await new Promise((i,o)=>{let a=this.queryGenerator.insertQuery(n,e.length);r.run(a,e.map(l=>Object.values(l)).flat(),function(l){l?o(l):i(this)})})}async getAllRows(){let e=await this.init;return e?Mf(e,`SELECT * FROM ${this.queryGenerator.tableName}`,[]):[]}async deleteRow(e){let n=await this.init;if(n)return Mf(n,`DELETE FROM ${this.queryGenerator.tableName} WHERE ${FI.Id} = ?`,[e])}},N1=class t extends vQ{static{s(this,"DocumentTable")}static{this.tableName=B8.tableName}createQueryGenerator(){return new B8}async updateTimestamp(e,n){let r=await this.init;r&&await Mf(r,`UPDATE ${t.tableName} SET ${C0.LastWriteTimeUtc} = ? WHERE ${C0.FilePath} = ?`,[n,e])}async deleteAllWithPath(e){let n=await this.init;n&&await Mf(n,`DELETE FROM ${t.tableName} WHERE ${C0.FilePath} = ?`,[e])}async getDocumentByFilePath(e){let n=await this.init;return n?Mf(n,`SELECT * FROM ${this.queryGenerator.tableName} WHERE ${C0.FilePath} = ?`,[e]):[]}},Ja=class t extends vQ{static{s(this,"SymbolTable")}static{this.tableName=P8.tableName}createQueryGenerator(){return new P8}async clearAllSymbolsFromDocument(e){let n=await this.init;if(n)return Mf(n,`DELETE FROM ${t.tableName} WHERE ${Fi.DocumentId} = ?`,[e])}};async function Mf(t,e,n){return new Promise((r,i)=>t.all(e,n,(o,a)=>{o&&i(o),r(a)}))}s(Mf,"runPromisifiedDBQuery");var IQ=class{constructor(e){this.databaseFileName=e;this.innerJoinStatement=`INNER JOIN ${N1.tableName} ON ${Ja.tableName}.${Fi.DocumentId} = ${N1.tableName}.${FI.Id}`;this.db=this.initDb(e),this.documentTable=new N1(this.db),this.symbolTable=new Ja(this.db)}static{s(this,"DocumentSymbolDatabase")}async initDb(e){let n;try{n=await Promise.resolve().then(()=>je(KTe()))}catch(i){console.error("Error loading sqlite3 module:",i);return}let r;try{r=await new Promise((i,o)=>{let a=new n.default.Database(e,l=>{l?o(l):i(a)})})}catch(i){console.error("Error initializing database:",i);return}return await Mf(r,"pragma journal_mode=wal",[]),await Mf(r,"pragma synchronous=normal",[]),await Mf(r,"pragma optimize=0x10002",[]),await Mf(r,"pragma foreign_keys = ON",[]),r}async close(){let e=await this.db;if(e)return await this.documentTable.init,await this.symbolTable.init,new Promise((n,r)=>{e.close(i=>i?r(i):n())})}async querySymbolsFuzzilyUsingUnqualifiedName(e,n){return await this.query([`SELECT * FROM ${Ja.tableName}`,this.innerJoinStatement,`WHERE ${Fi.UnqualifiedName} BETWEEN ? AND (? || '~')`,`ORDER BY ${Fi.UnqualifiedName}`,"LIMIT ?"].join(`
`),[e,e,n])}async querySymbolsUsingUnqualifiedNames(e,n){let r=e.map(()=>"?").join(", "),i=n?"COLLATE NOCASE ":"";return await this.query([`SELECT * FROM ${Ja.tableName}`,this.innerJoinStatement,`WHERE ${Fi.UnqualifiedName} ${i}IN (${r})`].join(`
`),e)}async querySymbolsUsingFullyQualifiedName(e){return this.query([`SELECT * FROM ${Ja.tableName}`,this.innerJoinStatement,`WHERE ${Fi.FullyQualifiedName} = ?`].join(`
`),[e])}async querySymbolsContainingPosition(e,n){return this.query([`SELECT * FROM ${Ja.tableName}`,this.innerJoinStatement,`WHERE ${N1.tableName}.${C0.FilePath} = ? AND ${Ja.tableName}.${Fi.ExtentStart} <= ? AND (${Ja.tableName}.${Fi.ExtentStart} + ${Ja.tableName}.${Fi.ExtentLength}) >= ?`].join(`
`),[e,n,n])}async querySymbolsContainedByRange(e,n,r){return this.query([`SELECT * FROM ${Ja.tableName}`,this.innerJoinStatement,`WHERE ${N1.tableName}.${C0.FilePath} = ? AND ${Ja.tableName}.${Fi.ExtentStart} >= ? AND (${Ja.tableName}.${Fi.ExtentStart} + ${Ja.tableName}.${Fi.ExtentLength}) <= ?`,`ORDER BY ${Ja.tableName}.${Fi.ExtentStart}`].join(`
`),[e,n,r])}async querySymbolsByQualifiedNamePrefix(e,n){return this.query([`SELECT * FROM ${Ja.tableName}`,this.innerJoinStatement,`WHERE ${N1.tableName}.${C0.FilePath} = ? AND ${Ja.tableName}.${Fi.FullyQualifiedName} LIKE ?`,`ORDER BY ${Ja.tableName}.${Fi.ExtentStart}`].join(`
`),[e,`${n}%`])}async insertSymbols(e){return await this.symbolTable.insert(e,!1)}async insertDocument(e,n,r=!1){return await this.documentTable.insert([{filePath:e,lastWriteTimeUtc:n}],r)}async clearAllSymbolsFromDocument(e){return this.symbolTable.clearAllSymbolsFromDocument(e)}async updateDocumentTimestamp(e,n){return this.documentTable.updateTimestamp(e,n)}async deleteAllDocumentsWithPath(e){return this.documentTable.deleteAllWithPath(e)}async getAllDocuments(){return this.documentTable.getAllRows()}getDocument(e){return this.documentTable.getDocumentByFilePath(e)}async query(e,n){let r=await this.db;return r?(await this.documentTable.init,await this.symbolTable.init,Mf(r,e,n)):[]}};var TQ=class{static{s(this,"SQLStorageReaderWriter")}constructor(e){this.database=new IQ(e)}async close(){await this.database.close()}async insertOrReplaceDocumentSymbolsAsync(e,n,r){let i=await this.getOrCreateDocumentAsync(e,n);await this.database.clearAllSymbolsFromDocument(i.id),r.length>0&&await this.database.insertSymbols(r.map(o=>({documentId:i.id,fullyQualifiedName:o.fullyQualifiedName,unqualifiedName:o.unqualifiedName,commentStart:o.commentRange.start,commentLength:o.commentRange.length,nameStart:o.nameRange.start,nameLength:o.nameRange.length,bodyStart:o.bodyRange.start,bodyLength:o.bodyRange.length,extentStart:o.extentRange.start,extentLength:o.extentRange.length,symbolKind:o.kind,refKind:o.refKind}))),await this.database.updateDocumentTimestamp(e,n)}async addDocumentsAsync(e){for(let n of e)n=n.toLowerCase(),await this.database.insertDocument(n,Date.now(),!0)}async deleteDocumentAsync(e){return await this.database.deleteAllDocumentsWithPath(e.toLowerCase())}async updateDocumentTimestampAsync(e,n){return await this.database.updateDocumentTimestamp(e.toLowerCase(),n)}async fuzzyMatchSymbolsAsync(e,n){return $S(await this.database.querySymbolsFuzzilyUsingUnqualifiedName(e,n))}async findPotentialDefinitionsAsync(e,n,r){let i=[],a=0;for(;a<e.length;){let l=e.slice(a,a+500);a+=500;let c=await this.database.querySymbolsUsingUnqualifiedNames(l,n);i.push(...c),D1(r)}return $S(i)}async getDefinitionsAsync(e){return $S(await this.database.querySymbolsUsingFullyQualifiedName(e))}async findSymbolsContainingPositionAsync(e,n){let r=await this.database.querySymbolsContainingPosition(e.toLowerCase(),n);return $S(r)}async findSymbolsContainedByRangeAsync(e,n,r){return $S(await this.database.querySymbolsContainedByRange(e.toLowerCase(),n,r))}async findSymbolsByFullyQualifiedNamePrefix(e,n){return $S(await this.database.querySymbolsByQualifiedNamePrefix(e.toLowerCase(),n))}async getDocumentsAsync(){return this.database.getAllDocuments()}async getDocumentAsync(e){let n=await this.database.getDocument(e);if(n?.at(0))return n[0]}async getOrCreateDocumentAsync(e,n){let r=await this.database.getDocument(e);if(r?.at(0))return r[0];await this.database.insertDocument(e,n,!0);let i=await this.database.getDocument(e);if(!i)throw Error("Unable to insert document");return i[0]}};function $S(t){return t.map(e=>new Ff(e.filePath,e.fullyQualifiedName,e.unqualifiedName,new Zo(e.commentStart,e.commentLength),new Zo(e.nameStart,e.nameLength),new Zo(e.bodyStart,e.bodyLength),new Zo(e.extentStart,e.extentLength),e.symbolKind,e.refKind))}s($S,"symbolsToSymbolRanges");var _Q=je(require("fs/promises"));var wQ=class{static{s(this,"Index")}constructor(e,n,r,i){this.storage=new TQ(e),this.symbolExtractors=n,this.importExtractors=r,this.params=i}dispose(){return this.storage.close()}get reader(){return this.storage}async indexFile(e,n){let r=Ho(e);if(!r)throw Error(`Cannot resolve a readable file path from ${e}`);let i;try{i=await _Q.stat(r)}catch{await this.storage.deleteDocumentAsync(e);return}let o=i.mtimeMs,a=await this.storage.getDocumentAsync(e);if(a&&a.lastWriteTimeUtc>=o)return;let l=this.symbolExtractors.get(n);if(!l)return;let c=(await _Q.readFile(r)).toString(),u=await l.extractSymbols(e,c),d=u;if(this.params?.mlcpEnableImports){let p=this.importExtractors.get(n);if(p){let m=await p.extractSymbols(e,c);d=[...u,...m]}}await this.storage.insertOrReplaceDocumentSymbolsAsync(e,o,d)}async getDocumentFilePaths(){return(await this.storage.getDocumentsAsync()).map(n=>n.filePath)}};f();function Ene(t){let e=t;return typeof e?.cwd=="string"&&Array.isArray(e?.indexWorkspaceRoots)&&e.indexWorkspaceRoots.every(n=>j0t(n))}s(Ene,"isIndexWorkerData");var F8=class{static{s(this,"IndexNotification")}constructor(e){this.operation=e}},Zx=class extends F8{constructor(n,r){super(r);this.id=n;this.id=n}static{s(this,"IndexRequest")}},SQ=class extends F8{constructor(n){super($c.Cancel);this.messageIdToCancel=n}static{s(this,"CancellationNotification")}},$c={CreateIndex:"createIndex",AddOrInvalidated:"addOrInvalidated",GetContext:"getContext",Exit:"exit",Response:"response",RemoveIndex:"removeIndex",Cancel:"cancel",GetAllDocumentsInWorkspace:"getAllDocumentsInWorkspace"},RQ=class extends Zx{constructor(n,r,i){super(n,$c.CreateIndex);this.baseWorkspaceFolderUri=r;this.databaseFilePath=i}static{s(this,"CreateIndexRequest")}},kQ=class extends Zx{constructor(n,r){super(n,$c.RemoveIndex);this.baseWorkspaceFolderUri=r}static{s(this,"RemoveIndexRequest")}},BQ=class extends Zx{constructor(n,r,i){super(n,$c.AddOrInvalidated);this.fileUri=r;this.languageId=i}static{s(this,"AddOrInvalidatedRequest")}},PQ=class extends Zx{constructor(n,r){super(n,$c.GetAllDocumentsInWorkspace);this.baseWorkspaceFolderUri=r}static{s(this,"GetAllDocumentsRequest")}},DQ=class extends Zx{constructor(n,r,i,o,a,l){super(n,$c.GetContext);this.fileUri=r;this.code=i;this.offset=o;this.languageId=a;this.params=l}static{s(this,"GetContextRequest")}},NQ=class extends Zx{static{s(this,"ExitRequest")}constructor(e){super(e,$c.Exit)}},Tm=class extends F8{constructor(n,r,i){super($c.Response);this.id=n;this.error=r;this.data=i;r&&"code"in r&&typeof r.code=="string"&&(this.code=r.code)}static{s(this,"ResponseMessage")}};function j0t(t){return"databaseFilePath"in t&&"rootPath"in t}s(j0t,"isIndexableWorkspaceFolder");var JTe=je(ri()),ev=require("worker_threads");var LQ=class{static{s(this,"IndexInfo")}constructor(e,n){this.index=new wQ(e,dQ,bTe,n),this.contextRetreival=new CQ(this.index.reader,vTe)}},Ine=class t{constructor(e,n,r){this.indices=new Map;this.cancellationTokens=new Map;this.params=r;for(let i of n){let o=aa(i.rootPath);this.indices.set(o,new LQ(i.databaseFilePath,r))}this.port=e,this.port.on("message",i=>void this.dispatchMessage(i,this.indices,this.cancellationTokens))}static{s(this,"IndexWorker")}async dispatchMessage(e,n,r){try{let i=new JTe.CancellationTokenSource;r.set(e.id,i);let o;switch(e.operation){case $c.AddOrInvalidated:o=await t.dispatchAddOrInvalidate(e,n,i.token);break;case $c.GetContext:o=await t.dispatchGetContext(e,n,i.token);break;case $c.Cancel:r.get(e.id)?.cancel(),o=new Tm(e.id,void 0,void 0);break;case $c.Exit:o=await this.dispatchExit(e,n,i.token);break;case $c.CreateIndex:o=await t.dispatchCreateIndex(e,n,i.token);break;case $c.RemoveIndex:o=await t.dispatchRemoveIndex(e,n,i.token);break;case $c.GetAllDocumentsInWorkspace:o=await t.GetAllDocumentsInWorkspaceRequest(e,n,i.token);break;default:this.port?.postMessage(new Error(`Unknown operation: ${e.operation}`))}o&&this.port?.postMessage(o),r.get(e.id)?.dispose(),r.delete(e.id)}catch(i){if(!(i instanceof Error))throw i;this.port?.postMessage(new Tm(e.id,i,void 0))}}static async GetAllDocumentsInWorkspaceRequest(e,n,r){let i=aa(e.baseWorkspaceFolderUri),o,a;return n.has(i)?a=await n.get(i).index.getDocumentFilePaths():o=new Error(`Index not found for ${e.baseWorkspaceFolderUri}`),new Tm(e.id,o,a)}static async dispatchAddOrInvalidate(e,n,r){let i=aa(e.fileUri),o=t.getIndexInfo(i,n)?.index,a;return o?await o.indexFile(e.fileUri,e.languageId):a=new Error(`Index not found for ${e.fileUri}`),new Tm(e.id,a,void 0)}static async dispatchGetContext(e,n,r){let i=aa(e.fileUri),o=t.getIndexInfo(i,n)?.contextRetreival,a,l;return o?l=await o.getStringifiedContextAtPositionAsync(e.fileUri,e.code,e.offset,e.languageId,e.params,8e3,r):a=new Error(`ContextRetrieval not found for ${e.fileUri}`),new Tm(e.id,a,l)}async dispatchExit(e,n,r){for(let i of n.values())await i.index.dispose();n.clear(),this.port?.postMessage(new Tm(e.id,void 0,void 0)),this.port?.close()}static async dispatchCreateIndex(e,n,r){let i=aa(e.baseWorkspaceFolderUri);return n.has(i)||n.set(i,new LQ(e.databaseFilePath)),new Tm(e.id,void 0,void 0)}static async dispatchRemoveIndex(e,n,r){let i=aa(e.baseWorkspaceFolderUri);if(n.has(i)){let o=n.get(i);o&&await o.index.dispose(),n.delete(i)}return new Tm(e.id,void 0,void 0)}static getIndexInfo(e,n){for(let[r,i]of n)if(e.startsWith(r))return i}};function XTe(){return Ene(ev.workerData)}s(XTe,"isIndexWorker");function ZTe(){let t=ev.parentPort;if(!t)throw new Error("This must be run a worker thread.");if(!Ene(ev.workerData))throw new Error("Worker data must provide a valid database path.");let e=ev.workerData.cwd;process.cwd=()=>e,new Ine(t,ev.workerData.indexWorkspaceRoots,ev.workerData.params)}s(ZTe,"runIndexWorker");f();var M8=je(require("util"));function ewe(t){let e=new console.Console(process.stderr,process.stderr);function n(r,...i){if(kf(t)==="dev")return t.get(Va).logIt(t,r,"console",...i)}return s(n,"logIt"),e.debug=(...r)=>n(4,...r),e.info=(...r)=>n(3,...r),e.warn=(...r)=>n(2,...r),e.error=(...r)=>n(1,...r),e.assert=(r,...i)=>{r||(i.length===0?n(2,"Assertion failed"):n(2,"Assertion failed:",M8.format(...i)))},e.dir=(r,i)=>n(4,M8.inspect(r,i)),e.log=e.debug.bind(e),e.trace=(...r)=>{let i=new Error(M8.format(...r));i.name="Trace",e.log(i)},e}s(ewe,"createConsole");var Zy=je(require("fs/promises")),_Ke=je(require("os")),tN=je(require("path")),Np=je(_m()),SKe=require("worker_threads");f();f();var CO=require("assert");f();f();var ipt={right:cpt,center:upt},opt=0,fO=1,spt=2,pO=3,Kne=class{static{s(this,"UI")}constructor(e){var n;this.width=e.width,this.wrap=(n=e.wrap)!==null&&n!==void 0?n:!0,this.rows=[]}span(...e){let n=this.div(...e);n.span=!0}resetOutput(){this.rows=[]}div(...e){if(e.length===0&&this.div(""),this.wrap&&this.shouldApplyLayoutDSL(...e)&&typeof e[0]=="string")return this.applyLayoutDSL(e[0]);let n=e.map(r=>typeof r=="string"?this.colFromString(r):r);return this.rows.push(n),n}shouldApplyLayoutDSL(...e){return e.length===1&&typeof e[0]=="string"&&/[\t\n]/.test(e[0])}applyLayoutDSL(e){let n=e.split(`
`).map(i=>i.split("	")),r=0;return n.forEach(i=>{i.length>1&&x0.stringWidth(i[0])>r&&(r=Math.min(Math.floor(this.width*.5),x0.stringWidth(i[0])))}),n.forEach(i=>{this.div(...i.map((o,a)=>({text:o.trim(),padding:this.measurePadding(o),width:a===0&&i.length>1?r:void 0})))}),this.rows[this.rows.length-1]}colFromString(e){return{text:e,padding:this.measurePadding(e)}}measurePadding(e){let n=x0.stripAnsi(e);return[0,n.match(/\s*$/)[0].length,0,n.match(/^\s*/)[0].length]}toString(){let e=[];return this.rows.forEach(n=>{this.rowToString(n,e)}),e.filter(n=>!n.hidden).map(n=>n.text).join(`
`)}rowToString(e,n){return this.rasterize(e).forEach((r,i)=>{let o="";r.forEach((a,l)=>{let{width:c}=e[l],u=this.negatePadding(e[l]),d=a;if(u>x0.stringWidth(a)&&(d+=" ".repeat(u-x0.stringWidth(a))),e[l].align&&e[l].align!=="left"&&this.wrap){let m=ipt[e[l].align];d=m(d,u),x0.stringWidth(d)<u&&(d+=" ".repeat((c||0)-x0.stringWidth(d)-1))}let p=e[l].padding||[0,0,0,0];p[pO]&&(o+=" ".repeat(p[pO])),o+=zwe(e[l],d,"| "),o+=d,o+=zwe(e[l],d," |"),p[fO]&&(o+=" ".repeat(p[fO])),i===0&&n.length>0&&(o=this.renderInline(o,n[n.length-1]))}),n.push({text:o.replace(/ +$/,""),span:e.span})}),n}renderInline(e,n){let r=e.match(/^ */),i=r?r[0].length:0,o=n.text,a=x0.stringWidth(o.trimRight());return n.span?this.wrap?i<a?e:(n.hidden=!0,o.trimRight()+" ".repeat(i-a)+e.trimLeft()):(n.hidden=!0,o+e):e}rasterize(e){let n=[],r=this.columnWidths(e),i;return e.forEach((o,a)=>{o.width=r[a],this.wrap?i=x0.wrap(o.text,this.negatePadding(o),{hard:!0}).split(`
`):i=o.text.split(`
`),o.border&&(i.unshift("."+"-".repeat(this.negatePadding(o)+2)+"."),i.push("'"+"-".repeat(this.negatePadding(o)+2)+"'")),o.padding&&(i.unshift(...new Array(o.padding[opt]||0).fill("")),i.push(...new Array(o.padding[spt]||0).fill(""))),i.forEach((l,c)=>{n[c]||n.push([]);let u=n[c];for(let d=0;d<a;d++)u[d]===void 0&&u.push("");u.push(l)})}),n}negatePadding(e){let n=e.width||0;return e.padding&&(n-=(e.padding[pO]||0)+(e.padding[fO]||0)),e.border&&(n-=4),n}columnWidths(e){if(!this.wrap)return e.map(a=>a.width||x0.stringWidth(a.text));let n=e.length,r=this.width,i=e.map(a=>{if(a.width)return n--,r-=a.width,a.width}),o=n?Math.floor(r/n):0;return i.map((a,l)=>a===void 0?Math.max(o,apt(e[l])):a)}};function zwe(t,e,n){return t.border?/[.']-+[.']/.test(e)?"":e.trim().length!==0?n:"  ":""}s(zwe,"addBorder");function apt(t){let e=t.padding||[],n=1+(e[pO]||0)+(e[fO]||0);return t.border?n+4:n}s(apt,"_minWidth");function lpt(){return typeof process=="object"&&process.stdout&&process.stdout.columns?process.stdout.columns:80}s(lpt,"getWindowWidth");function cpt(t,e){t=t.trim();let n=x0.stringWidth(t);return n<e?" ".repeat(e-n)+t:t}s(cpt,"alignRight");function upt(t,e){t=t.trim();let n=x0.stringWidth(t);return n>=e?t:" ".repeat(e-n>>1)+t}s(upt,"alignCenter");var x0;function Ywe(t,e){return x0=e,new Kne({width:t?.width||lpt(),wrap:t?.wrap})}s(Ywe,"cliui");f();var Kwe=new RegExp("\x1B(?:\\[(?:\\d+[ABCDEFGJKSTm]|\\d+;\\d+[Hfm]|\\d+;\\d+;\\d+m|6n|s|u|\\?25[lh])|\\w)","g");function Jne(t){return t.replace(Kwe,"")}s(Jne,"stripAnsi");function Jwe(t,e){let[n,r]=t.match(Kwe)||["",""];t=Jne(t);let i="";for(let o=0;o<t.length;o++)o!==0&&o%e===0&&(i+=`
`),i+=t.charAt(o);return n&&r&&(i=`${n}${i}${r}`),i}s(Jwe,"wrap");function Xne(t){return Ywe(t,{stringWidth:s(e=>[...e].length,"stringWidth"),stripAnsi:Jne,wrap:Jwe})}s(Xne,"ui");f();var JS=require("path"),mO=require("fs");function Zne(t,e){let n=(0,JS.resolve)(".",t),r;for((0,mO.statSync)(n).isDirectory()||(n=(0,JS.dirname)(n));;){if(r=e(n,(0,mO.readdirSync)(n)),r)return(0,JS.resolve)(n,r);if(n=(0,JS.dirname)(r=n),r===n)break}}s(Zne,"default");var p_e=require("util"),m_e=require("fs"),h_e=require("url");f();var n_e=require("util"),yO=require("path");f();function UI(t){if(t!==t.toLowerCase()&&t!==t.toUpperCase()||(t=t.toLowerCase()),t.indexOf("-")===-1&&t.indexOf("_")===-1)return t;{let n="",r=!1,i=t.match(/^-+/);for(let o=i?i[0].length:0;o<t.length;o++){let a=t.charAt(o);r&&(r=!1,a=a.toUpperCase()),o!==0&&(a==="-"||a==="_")?r=!0:a!=="-"&&a!=="_"&&(n+=a)}return n}}s(UI,"camelCase");function hO(t,e){let n=t.toLowerCase();e=e||"-";let r="";for(let i=0;i<t.length;i++){let o=n.charAt(i),a=t.charAt(i);o!==a&&i>0?r+=`${e}${n.charAt(i)}`:r+=a}return r}s(hO,"decamelize");function gO(t){return t==null?!1:typeof t=="number"||/^0x[0-9a-f]+$/i.test(t)?!0:/^0[^.]/.test(t)?!1:/^[-]?(?:\d+(?:\.\d*)?|\.\d+)(e[-+]?\d+)?$/.test(t)}s(gO,"looksLikeNumber");f();f();function Xwe(t){if(Array.isArray(t))return t.map(a=>typeof a!="string"?a+"":a);t=t.trim();let e=0,n=null,r=null,i=null,o=[];for(let a=0;a<t.length;a++){if(n=r,r=t.charAt(a),r===" "&&!i){n!==" "&&e++;continue}r===i?i=null:(r==="'"||r==='"')&&!i&&(i=r),o[e]||(o[e]=""),o[e]+=r}return o}s(Xwe,"tokenizeArgString");f();var Hf;(function(t){t.BOOLEAN="boolean",t.STRING="string",t.NUMBER="number",t.ARRAY="array"})(Hf||(Hf={}));var L1,AO=class{static{s(this,"YargsParser")}constructor(e){L1=e}parse(e,n){let r=Object.assign({alias:void 0,array:void 0,boolean:void 0,config:void 0,configObjects:void 0,configuration:void 0,coerce:void 0,count:void 0,default:void 0,envPrefix:void 0,narg:void 0,normalize:void 0,string:void 0,number:void 0,__:void 0,key:void 0},n),i=Xwe(e),o=typeof e=="string",a=dpt(Object.assign(Object.create(null),r.alias)),l=Object.assign({"boolean-negation":!0,"camel-case-expansion":!0,"combine-arrays":!1,"dot-notation":!0,"duplicate-arguments-array":!0,"flatten-duplicate-arrays":!0,"greedy-arrays":!0,"halt-at-non-option":!1,"nargs-eats-options":!1,"negation-prefix":"no-","parse-numbers":!0,"parse-positional-numbers":!0,"populate--":!1,"set-placeholder-key":!1,"short-option-groups":!0,"strip-aliased":!1,"strip-dashed":!1,"unknown-options-as-args":!1},r.configuration),c=Object.assign(Object.create(null),r.default),u=r.configObjects||[],d=r.envPrefix,p=l["populate--"],m=p?"--":"_",h=Object.create(null),g=Object.create(null),y=r.__||L1.format,v={aliases:Object.create(null),arrays:Object.create(null),bools:Object.create(null),strings:Object.create(null),numbers:Object.create(null),counts:Object.create(null),normalize:Object.create(null),configs:Object.create(null),nargs:Object.create(null),coercions:Object.create(null),keys:[]},b=/^-([0-9]+(\.[0-9]+)?|\.[0-9]+)$/,E=new RegExp("^--"+l["negation-prefix"]+"(.+)");[].concat(r.array||[]).filter(Boolean).forEach(function(X){let re=typeof X=="object"?X.key:X,We=Object.keys(X).map(function(De){return{boolean:"bools",string:"strings",number:"numbers"}[De]}).filter(Boolean).pop();We&&(v[We][re]=!0),v.arrays[re]=!0,v.keys.push(re)}),[].concat(r.boolean||[]).filter(Boolean).forEach(function(X){v.bools[X]=!0,v.keys.push(X)}),[].concat(r.string||[]).filter(Boolean).forEach(function(X){v.strings[X]=!0,v.keys.push(X)}),[].concat(r.number||[]).filter(Boolean).forEach(function(X){v.numbers[X]=!0,v.keys.push(X)}),[].concat(r.count||[]).filter(Boolean).forEach(function(X){v.counts[X]=!0,v.keys.push(X)}),[].concat(r.normalize||[]).filter(Boolean).forEach(function(X){v.normalize[X]=!0,v.keys.push(X)}),typeof r.narg=="object"&&Object.entries(r.narg).forEach(([X,re])=>{typeof re=="number"&&(v.nargs[X]=re,v.keys.push(X))}),typeof r.coerce=="object"&&Object.entries(r.coerce).forEach(([X,re])=>{typeof re=="function"&&(v.coercions[X]=re,v.keys.push(X))}),typeof r.config<"u"&&(Array.isArray(r.config)||typeof r.config=="string"?[].concat(r.config).filter(Boolean).forEach(function(X){v.configs[X]=!0}):typeof r.config=="object"&&Object.entries(r.config).forEach(([X,re])=>{(typeof re=="boolean"||typeof re=="function")&&(v.configs[X]=re)})),Ne(r.key,a,r.default,v.arrays),Object.keys(c).forEach(function(X){(v.aliases[X]||[]).forEach(function(re){c[re]=c[X]})});let _=null;tt();let k=[],P=Object.assign(Object.create(null),{_:[]}),N={};for(let X=0;X<i.length;X++){let re=i[X],We=re.replace(/^-{3,}/,"---"),De,be,ze,it,ht,Ot;if(re!=="--"&&/^-/.test(re)&&It(re))U(re);else if(We.match(/^---+(=|$)/)){U(re);continue}else if(re.match(/^--.+=/)||!l["short-option-groups"]&&re.match(/^-.+=/))it=re.match(/^--?([^=]+)=([\s\S]*)$/),it!==null&&Array.isArray(it)&&it.length>=3&&(Se(it[1],v.arrays)?X=he(X,it[1],i,it[2]):Se(it[1],v.nargs)!==!1?X=ne(X,it[1],i,it[2]):ae(it[1],it[2],!0));else if(re.match(E)&&l["boolean-negation"])it=re.match(E),it!==null&&Array.isArray(it)&&it.length>=2&&(be=it[1],ae(be,Se(be,v.arrays)?[!1]:!1));else if(re.match(/^--.+/)||!l["short-option-groups"]&&re.match(/^-[^-]+/))it=re.match(/^--?(.+)/),it!==null&&Array.isArray(it)&&it.length>=2&&(be=it[1],Se(be,v.arrays)?X=he(X,be,i):Se(be,v.nargs)!==!1?X=ne(X,be,i):(ht=i[X+1],ht!==void 0&&(!ht.match(/^-/)||ht.match(b))&&!Se(be,v.bools)&&!Se(be,v.counts)||/^(true|false)$/.test(ht)?(ae(be,ht),X++):ae(be,vt(be))));else if(re.match(/^-.\..+=/))it=re.match(/^-([^=]+)=([\s\S]*)$/),it!==null&&Array.isArray(it)&&it.length>=3&&ae(it[1],it[2]);else if(re.match(/^-.\..+/)&&!re.match(b))ht=i[X+1],it=re.match(/^-(.\..+)/),it!==null&&Array.isArray(it)&&it.length>=2&&(be=it[1],ht!==void 0&&!ht.match(/^-/)&&!Se(be,v.bools)&&!Se(be,v.counts)?(ae(be,ht),X++):ae(be,vt(be)));else if(re.match(/^-[^-]+/)&&!re.match(b)){ze=re.slice(1,-1).split(""),De=!1;for(let cn=0;cn<ze.length;cn++){if(ht=re.slice(cn+2),ze[cn+1]&&ze[cn+1]==="="){Ot=re.slice(cn+3),be=ze[cn],Se(be,v.arrays)?X=he(X,be,i,Ot):Se(be,v.nargs)!==!1?X=ne(X,be,i,Ot):ae(be,Ot),De=!0;break}if(ht==="-"){ae(ze[cn],ht);continue}if(/[A-Za-z]/.test(ze[cn])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(ht)&&Se(ht,v.bools)===!1){ae(ze[cn],ht),De=!0;break}if(ze[cn+1]&&ze[cn+1].match(/\W/)){ae(ze[cn],ht),De=!0;break}else ae(ze[cn],vt(ze[cn]))}be=re.slice(-1)[0],!De&&be!=="-"&&(Se(be,v.arrays)?X=he(X,be,i):Se(be,v.nargs)!==!1?X=ne(X,be,i):(ht=i[X+1],ht!==void 0&&(!/^(-|--)[^-]/.test(ht)||ht.match(b))&&!Se(be,v.bools)&&!Se(be,v.counts)||/^(true|false)$/.test(ht)?(ae(be,ht),X++):ae(be,vt(be))))}else if(re.match(/^-[0-9]$/)&&re.match(b)&&Se(re.slice(1),v.bools))be=re.slice(1),ae(be,vt(be));else if(re==="--"){k=i.slice(X+1);break}else if(l["halt-at-non-option"]){k=i.slice(X);break}else U(re)}Y(P,!0),Y(P,!1),ie(P),O(),ee(P,v.aliases,c,!0),te(P),l["set-placeholder-key"]&&pe(P),Object.keys(v.counts).forEach(function(X){ce(P,X.split("."))||ae(X,0)}),p&&k.length&&(P[m]=[]),k.forEach(function(X){P[m].push(X)}),l["camel-case-expansion"]&&l["strip-dashed"]&&Object.keys(P).filter(X=>X!=="--"&&X.includes("-")).forEach(X=>{delete P[X]}),l["strip-aliased"]&&[].concat(...Object.keys(a).map(X=>a[X])).forEach(X=>{l["camel-case-expansion"]&&X.includes("-")&&delete P[X.split(".").map(re=>UI(re)).join(".")],delete P[X]});function U(X){let re=ue("_",X);(typeof re=="string"||typeof re=="number")&&P._.push(re)}s(U,"pushPositional");function ne(X,re,We,De){let be,ze=Se(re,v.nargs);if(ze=typeof ze!="number"||isNaN(ze)?1:ze,ze===0)return ye(De)||(_=Error(y("Argument unexpected for: %s",re))),ae(re,vt(re)),X;let it=ye(De)?0:1;if(l["nargs-eats-options"])We.length-(X+1)+it<ze&&(_=Error(y("Not enough arguments following: %s",re))),it=ze;else{for(be=X+1;be<We.length&&(!We[be].match(/^-[^0-9]/)||We[be].match(b)||It(We[be]));be++)it++;it<ze&&(_=Error(y("Not enough arguments following: %s",re)))}let ht=Math.min(it,ze);for(!ye(De)&&ht>0&&(ae(re,De),ht--),be=X+1;be<ht+X+1;be++)ae(re,We[be]);return X+ht}s(ne,"eatNargs");function he(X,re,We,De){let be=[],ze=De||We[X+1],it=Se(re,v.nargs);if(Se(re,v.bools)&&!/^(true|false)$/.test(ze))be.push(!0);else if(ye(ze)||ye(De)&&/^-/.test(ze)&&!b.test(ze)&&!It(ze)){if(c[re]!==void 0){let ht=c[re];be=Array.isArray(ht)?ht:[ht]}}else{ye(De)||be.push(W(re,De,!0));for(let ht=X+1;ht<We.length&&!(!l["greedy-arrays"]&&be.length>0||it&&typeof it=="number"&&be.length>=it||(ze=We[ht],/^-/.test(ze)&&!b.test(ze)&&!It(ze)));ht++)X=ht,be.push(W(re,ze,o))}return typeof it=="number"&&(it&&be.length<it||isNaN(it)&&be.length===0)&&(_=Error(y("Not enough arguments following: %s",re))),ae(re,be),X}s(he,"eatArray");function ae(X,re,We=o){if(/-/.test(X)&&l["camel-case-expansion"]){let ze=X.split(".").map(function(it){return UI(it)}).join(".");G(X,ze)}let De=W(X,re,We),be=X.split(".");me(P,be,De),v.aliases[X]&&v.aliases[X].forEach(function(ze){let it=ze.split(".");me(P,it,De)}),be.length>1&&l["dot-notation"]&&(v.aliases[be[0]]||[]).forEach(function(ze){let it=ze.split("."),ht=[].concat(be);ht.shift(),it=it.concat(ht),(v.aliases[X]||[]).includes(it.join("."))||me(P,it,De)}),Se(X,v.normalize)&&!Se(X,v.arrays)&&[X].concat(v.aliases[X]||[]).forEach(function(it){Object.defineProperty(N,it,{enumerable:!0,get(){return re},set(ht){re=typeof ht=="string"?L1.normalize(ht):ht}})})}s(ae,"setArg");function G(X,re){v.aliases[X]&&v.aliases[X].length||(v.aliases[X]=[re],h[re]=!0),v.aliases[re]&&v.aliases[re].length||G(re,X)}s(G,"addNewAlias");function W(X,re,We){We&&(re=fpt(re)),(Se(X,v.bools)||Se(X,v.counts))&&typeof re=="string"&&(re=re==="true");let De=Array.isArray(re)?re.map(function(be){return ue(X,be)}):ue(X,re);return Se(X,v.counts)&&(ye(De)||typeof De=="boolean")&&(De=ere()),Se(X,v.normalize)&&Se(X,v.arrays)&&(Array.isArray(re)?De=re.map(be=>L1.normalize(be)):De=L1.normalize(re)),De}s(W,"processValue");function ue(X,re){return!l["parse-positional-numbers"]&&X==="_"||!Se(X,v.strings)&&!Se(X,v.bools)&&!Array.isArray(re)&&(gO(re)&&l["parse-numbers"]&&Number.isSafeInteger(Math.floor(parseFloat(`${re}`)))||!ye(re)&&Se(X,v.numbers))&&(re=Number(re)),re}s(ue,"maybeCoerceNumber");function ie(X){let re=Object.create(null);ee(re,v.aliases,c),Object.keys(v.configs).forEach(function(We){let De=X[We]||re[We];if(De)try{let be=null,ze=L1.resolve(L1.cwd(),De),it=v.configs[We];if(typeof it=="function"){try{be=it(ze)}catch(ht){be=ht}if(be instanceof Error){_=be;return}}else be=L1.require(ze);V(be)}catch(be){be.name==="PermissionDenied"?_=be:X[We]&&(_=Error(y("Invalid JSON config file: %s",De)))}})}s(ie,"setConfig");function V(X,re){Object.keys(X).forEach(function(We){let De=X[We],be=re?re+"."+We:We;typeof De=="object"&&De!==null&&!Array.isArray(De)&&l["dot-notation"]?V(De,be):(!ce(P,be.split("."))||Se(be,v.arrays)&&l["combine-arrays"])&&ae(be,De)})}s(V,"setConfigObject");function O(){typeof u<"u"&&u.forEach(function(X){V(X)})}s(O,"setConfigObjects");function Y(X,re){if(typeof d>"u")return;let We=typeof d=="string"?d:"",De=L1.env();Object.keys(De).forEach(function(be){if(We===""||be.lastIndexOf(We,0)===0){let ze=be.split("__").map(function(it,ht){return ht===0&&(it=it.substring(We.length)),UI(it)});(re&&v.configs[ze.join(".")]||!re)&&!ce(X,ze)&&ae(ze.join("."),De[be])}})}s(Y,"applyEnvVars");function te(X){let re,We=new Set;Object.keys(X).forEach(function(De){if(!We.has(De)&&(re=Se(De,v.coercions),typeof re=="function"))try{let be=ue(De,re(X[De]));[].concat(v.aliases[De]||[],De).forEach(ze=>{We.add(ze),X[ze]=be})}catch(be){_=be}})}s(te,"applyCoercions");function pe(X){return v.keys.forEach(re=>{~re.indexOf(".")||typeof X[re]>"u"&&(X[re]=void 0)}),X}s(pe,"setPlaceholderKeys");function ee(X,re,We,De=!1){Object.keys(We).forEach(function(be){ce(X,be.split("."))||(me(X,be.split("."),We[be]),De&&(g[be]=!0),(re[be]||[]).forEach(function(ze){ce(X,ze.split("."))||me(X,ze.split("."),We[be])}))})}s(ee,"applyDefaultsAndAliases");function ce(X,re){let We=X;l["dot-notation"]||(re=[re.join(".")]),re.slice(0,-1).forEach(function(be){We=We[be]||{}});let De=re[re.length-1];return typeof We!="object"?!1:De in We}s(ce,"hasKey");function me(X,re,We){let De=X;l["dot-notation"]||(re=[re.join(".")]),re.slice(0,-1).forEach(function(Ot){Ot=Zwe(Ot),typeof De=="object"&&De[Ot]===void 0&&(De[Ot]={}),typeof De[Ot]!="object"||Array.isArray(De[Ot])?(Array.isArray(De[Ot])?De[Ot].push({}):De[Ot]=[De[Ot],{}],De=De[Ot][De[Ot].length-1]):De=De[Ot]});let be=Zwe(re[re.length-1]),ze=Se(re.join("."),v.arrays),it=Array.isArray(We),ht=l["duplicate-arguments-array"];!ht&&Se(be,v.nargs)&&(ht=!0,(!ye(De[be])&&v.nargs[be]===1||Array.isArray(De[be])&&De[be].length===v.nargs[be])&&(De[be]=void 0)),We===ere()?De[be]=ere(De[be]):Array.isArray(De[be])?ht&&ze&&it?De[be]=l["flatten-duplicate-arrays"]?De[be].concat(We):(Array.isArray(De[be][0])?De[be]:[De[be]]).concat([We]):!ht&&!!ze==!!it?De[be]=We:De[be]=De[be].concat([We]):De[be]===void 0&&ze?De[be]=it?We:[We]:ht&&!(De[be]===void 0||Se(be,v.counts)||Se(be,v.bools))?De[be]=[De[be],We]:De[be]=We}s(me,"setKey");function Ne(...X){X.forEach(function(re){Object.keys(re||{}).forEach(function(We){v.aliases[We]||(v.aliases[We]=[].concat(a[We]||[]),v.aliases[We].concat(We).forEach(function(De){if(/-/.test(De)&&l["camel-case-expansion"]){let be=UI(De);be!==We&&v.aliases[We].indexOf(be)===-1&&(v.aliases[We].push(be),h[be]=!0)}}),v.aliases[We].concat(We).forEach(function(De){if(De.length>1&&/[A-Z]/.test(De)&&l["camel-case-expansion"]){let be=hO(De,"-");be!==We&&v.aliases[We].indexOf(be)===-1&&(v.aliases[We].push(be),h[be]=!0)}}),v.aliases[We].forEach(function(De){v.aliases[De]=[We].concat(v.aliases[We].filter(function(be){return De!==be}))}))})})}s(Ne,"extendAliases");function Se(X,re){let We=[].concat(v.aliases[X]||[],X),De=Object.keys(re),be=We.find(ze=>De.includes(ze));return be?re[be]:!1}s(Se,"checkAllAliases");function Je(X){let re=Object.keys(v);return[].concat(re.map(De=>v[De])).some(function(De){return Array.isArray(De)?De.includes(X):De[X]})}s(Je,"hasAnyFlag");function Me(X,...re){return[].concat(...re).some(function(De){let be=X.match(De);return be&&Je(be[1])})}s(Me,"hasFlagsMatching");function ft(X){if(X.match(b)||!X.match(/^-[^-]+/))return!1;let re=!0,We,De=X.slice(1).split("");for(let be=0;be<De.length;be++){if(We=X.slice(be+2),!Je(De[be])){re=!1;break}if(De[be+1]&&De[be+1]==="="||We==="-"||/[A-Za-z]/.test(De[be])&&/^-?\d+(\.\d*)?(e-?\d+)?$/.test(We)||De[be+1]&&De[be+1].match(/\W/))break}return re}s(ft,"hasAllShortFlags");function It(X){return l["unknown-options-as-args"]&&yt(X)}s(It,"isUnknownOptionAsArg");function yt(X){return X=X.replace(/^-{3,}/,"--"),X.match(b)||ft(X)?!1:!Me(X,/^-+([^=]+?)=[\s\S]*$/,E,/^-+([^=]+?)$/,/^-+([^=]+?)-$/,/^-+([^=]+?\d+)$/,/^-+([^=]+?)\W+.*$/)}s(yt,"isUnknownOption");function vt(X){return!Se(X,v.bools)&&!Se(X,v.counts)&&`${X}`in c?c[X]:le(Oe(X))}s(vt,"defaultValue");function le(X){return{[Hf.BOOLEAN]:!0,[Hf.STRING]:"",[Hf.NUMBER]:void 0,[Hf.ARRAY]:[]}[X]}s(le,"defaultForType");function Oe(X){let re=Hf.BOOLEAN;return Se(X,v.strings)?re=Hf.STRING:Se(X,v.numbers)?re=Hf.NUMBER:Se(X,v.bools)?re=Hf.BOOLEAN:Se(X,v.arrays)&&(re=Hf.ARRAY),re}s(Oe,"guessType");function ye(X){return X===void 0}s(ye,"isUndefined");function tt(){Object.keys(v.counts).find(X=>Se(X,v.arrays)?(_=Error(y("Invalid configuration: %s, opts.count excludes opts.array.",X)),!0):Se(X,v.nargs)?(_=Error(y("Invalid configuration: %s, opts.count excludes opts.narg.",X)),!0):!1)}return s(tt,"checkConfiguration"),{aliases:Object.assign({},v.aliases),argv:Object.assign(N,P),configuration:l,defaulted:Object.assign({},g),error:_,newAliases:Object.assign({},h)}}};function dpt(t){let e=[],n=Object.create(null),r=!0;for(Object.keys(t).forEach(function(i){e.push([].concat(t[i],i))});r;){r=!1;for(let i=0;i<e.length;i++)for(let o=i+1;o<e.length;o++)if(e[i].filter(function(l){return e[o].indexOf(l)!==-1}).length){e[i]=e[i].concat(e[o]),e.splice(o,1),r=!0;break}}return e.forEach(function(i){i=i.filter(function(a,l,c){return c.indexOf(a)===l});let o=i.pop();o!==void 0&&typeof o=="string"&&(n[o]=i)}),n}s(dpt,"combineAliases");function ere(t){return t!==void 0?t+1:1}s(ere,"increment");function Zwe(t){return t==="__proto__"?"___proto___":t}s(Zwe,"sanitizeKey");function fpt(t){return typeof t=="string"&&(t[0]==="'"||t[0]==='"')&&t[t.length-1]===t[0]?t.substring(1,t.length-1):t}s(fpt,"stripQuotes");var r_e=require("fs");var tre,nre,rre,e_e=process&&process.env&&process.env.YARGS_MIN_NODE_VERSION?Number(process.env.YARGS_MIN_NODE_VERSION):12,t_e=(nre=(tre=process==null?void 0:process.versions)===null||tre===void 0?void 0:tre.node)!==null&&nre!==void 0?nre:(rre=process==null?void 0:process.version)===null||rre===void 0?void 0:rre.slice(1);if(t_e&&Number(t_e.match(/^([^.]+)/)[1])<e_e)throw Error(`yargs parser supports a minimum Node.js version of ${e_e}. Read our version support policy: https://github.com/yargs/yargs-parser#supported-nodejs-versions`);var ppt=process?process.env:{},i_e=new AO({cwd:process.cwd,env:s(()=>ppt,"env"),format:n_e.format,normalize:yO.normalize,resolve:yO.resolve,require:s(t=>{if(typeof require<"u")return require(t);if(t.match(/\.json$/))return JSON.parse((0,r_e.readFileSync)(t,"utf8"));throw Error("only .json config files are supported in ESM")},"require")}),G8=s(function(e,n){return i_e.parse(e.slice(),n).argv},"Parser");G8.detailed=function(t,e){return i_e.parse(t.slice(),e)};G8.camelCase=UI;G8.decamelize=hO;G8.looksLikeNumber=gO;var o_e=G8;var Rm=require("path");f();function mpt(){return hpt()?0:1}s(mpt,"getProcessArgvBinIndex");function hpt(){return gpt()&&!process.defaultApp}s(hpt,"isBundledElectronApp");function gpt(){return!!process.versions.electron}s(gpt,"isElectronApp");function s_e(){return process.argv[mpt()]}s(s_e,"getProcessArgvBin");f();var gs=class t extends Error{static{s(this,"YError")}constructor(e){super(e||"yargs error"),this.name="YError",Error.captureStackTrace&&Error.captureStackTrace(this,t)}};f();f();var XS=require("fs"),a_e=require("util"),l_e=require("path");var c_e={fs:{readFileSync:XS.readFileSync,writeFile:XS.writeFile},format:a_e.format,resolve:l_e.resolve,exists:s(t=>{try{return(0,XS.statSync)(t).isFile()}catch{return!1}},"exists")};f();var Sm,ire=class{static{s(this,"Y18N")}constructor(e){e=e||{},this.directory=e.directory||"./locales",this.updateFiles=typeof e.updateFiles=="boolean"?e.updateFiles:!0,this.locale=e.locale||"en",this.fallbackToLanguage=typeof e.fallbackToLanguage=="boolean"?e.fallbackToLanguage:!0,this.cache=Object.create(null),this.writeQueue=[]}__(...e){if(typeof arguments[0]!="string")return this._taggedLiteral(arguments[0],...arguments);let n=e.shift(),r=s(function(){},"cb");return typeof e[e.length-1]=="function"&&(r=e.pop()),r=r||function(){},this.cache[this.locale]||this._readLocaleFile(),!this.cache[this.locale][n]&&this.updateFiles?(this.cache[this.locale][n]=n,this._enqueueWrite({directory:this.directory,locale:this.locale,cb:r})):r(),Sm.format.apply(Sm.format,[this.cache[this.locale][n]||n].concat(e))}__n(){let e=Array.prototype.slice.call(arguments),n=e.shift(),r=e.shift(),i=e.shift(),o=s(function(){},"cb");typeof e[e.length-1]=="function"&&(o=e.pop()),this.cache[this.locale]||this._readLocaleFile();let a=i===1?n:r;this.cache[this.locale][n]&&(a=this.cache[this.locale][n][i===1?"one":"other"]),!this.cache[this.locale][n]&&this.updateFiles?(this.cache[this.locale][n]={one:n,other:r},this._enqueueWrite({directory:this.directory,locale:this.locale,cb:o})):o();let l=[a];return~a.indexOf("%d")&&l.push(i),Sm.format.apply(Sm.format,l.concat(e))}setLocale(e){this.locale=e}getLocale(){return this.locale}updateLocale(e){this.cache[this.locale]||this._readLocaleFile();for(let n in e)Object.prototype.hasOwnProperty.call(e,n)&&(this.cache[this.locale][n]=e[n])}_taggedLiteral(e,...n){let r="";return e.forEach(function(i,o){let a=n[o+1];r+=i,typeof a<"u"&&(r+="%s")}),this.__.apply(this,[r].concat([].slice.call(n,1)))}_enqueueWrite(e){this.writeQueue.push(e),this.writeQueue.length===1&&this._processWriteQueue()}_processWriteQueue(){let e=this,n=this.writeQueue[0],r=n.directory,i=n.locale,o=n.cb,a=this._resolveLocaleFile(r,i),l=JSON.stringify(this.cache[i],null,2);Sm.fs.writeFile(a,l,"utf-8",function(c){e.writeQueue.shift(),e.writeQueue.length>0&&e._processWriteQueue(),o(c)})}_readLocaleFile(){let e={},n=this._resolveLocaleFile(this.directory,this.locale);try{Sm.fs.readFileSync&&(e=JSON.parse(Sm.fs.readFileSync(n,"utf-8")))}catch(r){if(r instanceof SyntaxError&&(r.message="syntax error in "+n),r.code==="ENOENT")e={};else throw r}this.cache[this.locale]=e}_resolveLocaleFile(e,n){let r=Sm.resolve(e,"./",n+".json");if(this.fallbackToLanguage&&!this._fileExistsSync(r)&&~n.lastIndexOf("_")){let i=Sm.resolve(e,"./",n.split("_")[0]+".json");this._fileExistsSync(i)&&(r=i)}return r}_fileExistsSync(e){return Sm.exists(e)}};function u_e(t,e){Sm=e;let n=new ire(t);return{__:n.__.bind(n),__n:n.__n.bind(n),setLocale:n.setLocale.bind(n),getLocale:n.getLocale.bind(n),updateLocale:n.updateLocale.bind(n),locale:n.locale}}s(u_e,"y18n");var Apt=s(t=>u_e(t,c_e),"y18n"),d_e=Apt;var ypt="require is not supported by ESM",f_e="loading a directory of commands is not supported yet for ESM",j8;try{j8=(0,h_e.fileURLToPath)(importMetaUrlShim)}catch{j8=process.cwd()}var Cpt=j8.substring(0,j8.lastIndexOf("node_modules")),g_e={assert:{notStrictEqual:CO.notStrictEqual,strictEqual:CO.strictEqual},cliui:Xne,findUp:Zne,getEnv:s(t=>process.env[t],"getEnv"),inspect:p_e.inspect,getCallerFile:s(()=>{throw new gs(f_e)},"getCallerFile"),getProcessArgvBin:s_e,mainFilename:Cpt||process.cwd(),Parser:o_e,path:{basename:Rm.basename,dirname:Rm.dirname,extname:Rm.extname,relative:Rm.relative,resolve:Rm.resolve},process:{argv:s(()=>process.argv,"argv"),cwd:process.cwd,emitWarning:s((t,e)=>process.emitWarning(t,e),"emitWarning"),execPath:s(()=>process.execPath,"execPath"),exit:process.exit,nextTick:process.nextTick,stdColumns:typeof process.stdout.columns<"u"?process.stdout.columns:null},readFileSync:m_e.readFileSync,require:s(()=>{throw new gs(ypt)},"require"),requireDirectory:s(()=>{throw new gs(f_e)},"requireDirectory"),stringWidth:s(t=>[...t].length,"stringWidth"),y18n:d_e({directory:(0,Rm.resolve)(j8,"../../../locales"),updateFiles:!1})};f();f();f();function ku(t,e,n,r){n.assert.notStrictEqual(t,e,r)}s(ku,"assertNotStrictEqual");function ore(t,e){e.assert.strictEqual(typeof t,"string")}s(ore,"assertSingleKey");function ZS(t){return Object.keys(t)}s(ZS,"objectKeys");f();function As(t){return!!t&&!!t.then&&typeof t.then=="function"}s(As,"isPromise");f();f();f();function iv(t){let n=t.replace(/\s{2,}/g," ").split(/\s+(?![^[]*]|[^<]*>)/),r=/\.*[\][<>]/g,i=n.shift();if(!i)throw new Error(`No command found in: ${t}`);let o={cmd:i.replace(r,""),demanded:[],optional:[]};return n.forEach((a,l)=>{let c=!1;a=a.replace(/\s/g,""),/\.+[\]>]/.test(a)&&l===n.length-1&&(c=!0),/^\[/.test(a)?o.optional.push({cmd:a.replace(r,"").split("|"),variadic:c}):o.demanded.push({cmd:a.replace(r,"").split("|"),variadic:c})}),o}s(iv,"parseCommand");var xpt=["first","second","third","fourth","fifth","sixth"];function xn(t,e,n){function r(){return typeof t=="object"?[{demanded:[],optional:[]},t,e]:[iv(`cmd ${t}`),e,n]}s(r,"parseArgs");try{let i=0,[o,a,l]=r(),c=[].slice.call(a);for(;c.length&&c[c.length-1]===void 0;)c.pop();let u=l||c.length;if(u<o.demanded.length)throw new gs(`Not enough arguments provided. Expected ${o.demanded.length} but received ${c.length}.`);let d=o.demanded.length+o.optional.length;if(u>d)throw new gs(`Too many arguments provided. Expected max ${d} but received ${u}.`);o.demanded.forEach(p=>{let m=c.shift(),h=A_e(m);p.cmd.filter(y=>y===h||y==="*").length===0&&y_e(h,p.cmd,i),i+=1}),o.optional.forEach(p=>{if(c.length===0)return;let m=c.shift(),h=A_e(m);p.cmd.filter(y=>y===h||y==="*").length===0&&y_e(h,p.cmd,i),i+=1})}catch(i){console.warn(i.stack)}}s(xn,"argsert");function A_e(t){return Array.isArray(t)?"array":t===null?"null":typeof t}s(A_e,"guessType");function y_e(t,e,n){throw new gs(`Invalid ${xpt[n]||"manyith"} argument. Expected ${e.join(" or ")} but received ${t}.`)}s(y_e,"argumentTypeError");var xO=class{static{s(this,"GlobalMiddleware")}constructor(e){this.globalMiddleware=[],this.frozens=[],this.yargs=e}addMiddleware(e,n,r=!0,i=!1){if(xn("<array|function> [boolean] [boolean] [boolean]",[e,n,r],arguments.length),Array.isArray(e)){for(let o=0;o<e.length;o++){if(typeof e[o]!="function")throw Error("middleware must be a function");let a=e[o];a.applyBeforeValidation=n,a.global=r}Array.prototype.push.apply(this.globalMiddleware,e)}else if(typeof e=="function"){let o=e;o.applyBeforeValidation=n,o.global=r,o.mutates=i,this.globalMiddleware.push(e)}return this.yargs}addCoerceMiddleware(e,n){let r=this.yargs.getAliases();return this.globalMiddleware=this.globalMiddleware.filter(i=>{let o=[...r[n]||[],n];return i.option?!o.includes(i.option):!0}),e.option=n,this.addMiddleware(e,!0,!0,!0)}getMiddleware(){return this.globalMiddleware}freeze(){this.frozens.push([...this.globalMiddleware])}unfreeze(){let e=this.frozens.pop();e!==void 0&&(this.globalMiddleware=e)}reset(){this.globalMiddleware=this.globalMiddleware.filter(e=>e.global)}};function C_e(t){return t?t.map(e=>(e.applyBeforeValidation=!1,e)):[]}s(C_e,"commandMiddlewareFactory");function qI(t,e,n,r){return n.reduce((i,o)=>{if(o.applyBeforeValidation!==r)return i;if(o.mutates){if(o.applied)return i;o.applied=!0}if(As(i))return i.then(a=>Promise.all([a,o(a,e)])).then(([a,l])=>Object.assign(a,l));{let a=o(i,e);return As(a)?a.then(l=>Object.assign(i,l)):Object.assign(i,a)}},t)}s(qI,"applyMiddleware");f();function WI(t,e,n=r=>{throw r}){try{let r=vpt(t)?t():t;return As(r)?r.then(i=>e(i)):e(r)}catch(r){return n(r)}}s(WI,"maybeAsyncResult");function vpt(t){return typeof t=="function"}s(vpt,"isFunction");f();function sre(t){if(typeof require>"u")return null;for(let e=0,n=Object.keys(require.cache),r;e<n.length;e++)if(r=require.cache[n[e]],r.exports===t)return r;return null}s(sre,"whichModule");var e5=/(^\*)|(^\$0)/,are=class{static{s(this,"CommandInstance")}constructor(e,n,r,i){this.requireCache=new Set,this.handlers={},this.aliasMap={},this.frozens=[],this.shim=i,this.usage=e,this.globalMiddleware=r,this.validation=n}addDirectory(e,n,r,i){i=i||{},typeof i.recurse!="boolean"&&(i.recurse=!1),Array.isArray(i.extensions)||(i.extensions=["js"]);let o=typeof i.visit=="function"?i.visit:a=>a;i.visit=(a,l,c)=>{let u=o(a,l,c);if(u){if(this.requireCache.has(l))return u;this.requireCache.add(l),this.addHandler(u)}return u},this.shim.requireDirectory({require:n,filename:r},e,i)}addHandler(e,n,r,i,o,a){let l=[],c=C_e(o);if(i=i||(()=>{}),Array.isArray(e))if(bpt(e))[e,...l]=e;else for(let u of e)this.addHandler(u);else if(Ipt(e)){let u=Array.isArray(e.command)||typeof e.command=="string"?e.command:this.moduleName(e);e.aliases&&(u=[].concat(u).concat(e.aliases)),this.addHandler(u,this.extractDesc(e),e.builder,e.handler,e.middlewares,e.deprecated);return}else if(x_e(r)){this.addHandler([e].concat(l),n,r.builder,r.handler,r.middlewares,r.deprecated);return}if(typeof e=="string"){let u=iv(e);l=l.map(m=>iv(m).cmd);let d=!1,p=[u.cmd].concat(l).filter(m=>e5.test(m)?(d=!0,!1):!0);p.length===0&&d&&p.push("$0"),d&&(u.cmd=p[0],l=p.slice(1),e=e.replace(e5,u.cmd)),l.forEach(m=>{this.aliasMap[m]=u.cmd}),n!==!1&&this.usage.command(e,n,d,l,a),this.handlers[u.cmd]={original:e,description:n,handler:i,builder:r||{},middlewares:c,deprecated:a,demanded:u.demanded,optional:u.optional},d&&(this.defaultCommand=this.handlers[u.cmd])}}getCommandHandlers(){return this.handlers}getCommands(){return Object.keys(this.handlers).concat(Object.keys(this.aliasMap))}hasDefaultCommand(){return!!this.defaultCommand}runCommand(e,n,r,i,o,a){let l=this.handlers[e]||this.handlers[this.aliasMap[e]]||this.defaultCommand,c=n.getInternalMethods().getContext(),u=c.commands.slice(),d=!e;e&&(c.commands.push(e),c.fullCommands.push(l.original));let p=this.applyBuilderUpdateUsageAndParse(d,l,n,r.aliases,u,i,o,a);return As(p)?p.then(m=>this.applyMiddlewareAndGetResult(d,l,m.innerArgv,c,o,m.aliases,n)):this.applyMiddlewareAndGetResult(d,l,p.innerArgv,c,o,p.aliases,n)}applyBuilderUpdateUsageAndParse(e,n,r,i,o,a,l,c){let u=n.builder,d=r;if(vO(u)){r.getInternalMethods().getUsageInstance().freeze();let p=u(r.getInternalMethods().reset(i),c);if(As(p))return p.then(m=>(d=b_e(m)?m:r,this.parseAndUpdateUsage(e,n,d,o,a,l)))}else Ept(u)&&(r.getInternalMethods().getUsageInstance().freeze(),d=r.getInternalMethods().reset(i),Object.keys(n.builder).forEach(p=>{d.option(p,u[p])}));return this.parseAndUpdateUsage(e,n,d,o,a,l)}parseAndUpdateUsage(e,n,r,i,o,a){e&&r.getInternalMethods().getUsageInstance().unfreeze(!0),this.shouldUpdateUsage(r)&&r.getInternalMethods().getUsageInstance().usage(this.usageFromParentCommandsCommandHandler(i,n),n.description);let l=r.getInternalMethods().runYargsParserAndExecuteCommands(null,void 0,!0,o,a);return As(l)?l.then(c=>({aliases:r.parsed.aliases,innerArgv:c})):{aliases:r.parsed.aliases,innerArgv:l}}shouldUpdateUsage(e){return!e.getInternalMethods().getUsageInstance().getUsageDisabled()&&e.getInternalMethods().getUsageInstance().getUsage().length===0}usageFromParentCommandsCommandHandler(e,n){let r=e5.test(n.original)?n.original.replace(e5,"").trim():n.original,i=e.filter(o=>!e5.test(o));return i.push(r),`$0 ${i.join(" ")}`}handleValidationAndGetResult(e,n,r,i,o,a,l,c){if(!a.getInternalMethods().getHasOutput()){let u=a.getInternalMethods().runValidation(o,c,a.parsed.error,e);r=WI(r,d=>(u(d),d))}if(n.handler&&!a.getInternalMethods().getHasOutput()){a.getInternalMethods().setHasOutput();let u=!!a.getOptions().configuration["populate--"];a.getInternalMethods().postProcess(r,u,!1,!1),r=qI(r,a,l,!1),r=WI(r,d=>{let p=n.handler(d);return As(p)?p.then(()=>d):d}),e||a.getInternalMethods().getUsageInstance().cacheHelpMessage(),As(r)&&!a.getInternalMethods().hasParseCallback()&&r.catch(d=>{try{a.getInternalMethods().getUsageInstance().fail(null,d)}catch{}})}return e||(i.commands.pop(),i.fullCommands.pop()),r}applyMiddlewareAndGetResult(e,n,r,i,o,a,l){let c={};if(o)return r;l.getInternalMethods().getHasOutput()||(c=this.populatePositionals(n,r,i,l));let u=this.globalMiddleware.getMiddleware().slice(0).concat(n.middlewares),d=qI(r,l,u,!0);return As(d)?d.then(p=>this.handleValidationAndGetResult(e,n,p,i,a,l,u,c)):this.handleValidationAndGetResult(e,n,d,i,a,l,u,c)}populatePositionals(e,n,r,i){n._=n._.slice(r.commands.length);let o=e.demanded.slice(0),a=e.optional.slice(0),l={};for(this.validation.positionalCount(o.length,n._.length);o.length;){let c=o.shift();this.populatePositional(c,n,l)}for(;a.length;){let c=a.shift();this.populatePositional(c,n,l)}return n._=r.commands.concat(n._.map(c=>""+c)),this.postProcessPositionals(n,l,this.cmdToParseOptions(e.original),i),l}populatePositional(e,n,r){let i=e.cmd[0];e.variadic?r[i]=n._.splice(0).map(String):n._.length&&(r[i]=[String(n._.shift())])}cmdToParseOptions(e){let n={array:[],default:{},alias:{},demand:{}},r=iv(e);return r.demanded.forEach(i=>{let[o,...a]=i.cmd;i.variadic&&(n.array.push(o),n.default[o]=[]),n.alias[o]=a,n.demand[o]=!0}),r.optional.forEach(i=>{let[o,...a]=i.cmd;i.variadic&&(n.array.push(o),n.default[o]=[]),n.alias[o]=a}),n}postProcessPositionals(e,n,r,i){let o=Object.assign({},i.getOptions());o.default=Object.assign(r.default,o.default);for(let u of Object.keys(r.alias))o.alias[u]=(o.alias[u]||[]).concat(r.alias[u]);o.array=o.array.concat(r.array),o.config={};let a=[];if(Object.keys(n).forEach(u=>{n[u].map(d=>{o.configuration["unknown-options-as-args"]&&(o.key[u]=!0),a.push(`--${u}`),a.push(d)})}),!a.length)return;let l=Object.assign({},o.configuration,{"populate--":!1}),c=this.shim.Parser.detailed(a,Object.assign({},o,{configuration:l}));if(c.error)i.getInternalMethods().getUsageInstance().fail(c.error.message,c.error);else{let u=Object.keys(n);Object.keys(n).forEach(d=>{u.push(...c.aliases[d])}),Object.keys(c.argv).forEach(d=>{u.includes(d)&&(n[d]||(n[d]=c.argv[d]),!this.isInConfigs(i,d)&&!this.isDefaulted(i,d)&&Object.prototype.hasOwnProperty.call(e,d)&&Object.prototype.hasOwnProperty.call(c.argv,d)&&(Array.isArray(e[d])||Array.isArray(c.argv[d]))?e[d]=[].concat(e[d],c.argv[d]):e[d]=c.argv[d])})}}isDefaulted(e,n){let{default:r}=e.getOptions();return Object.prototype.hasOwnProperty.call(r,n)||Object.prototype.hasOwnProperty.call(r,this.shim.Parser.camelCase(n))}isInConfigs(e,n){let{configObjects:r}=e.getOptions();return r.some(i=>Object.prototype.hasOwnProperty.call(i,n))||r.some(i=>Object.prototype.hasOwnProperty.call(i,this.shim.Parser.camelCase(n)))}runDefaultBuilderOn(e){if(!this.defaultCommand)return;if(this.shouldUpdateUsage(e)){let r=e5.test(this.defaultCommand.original)?this.defaultCommand.original:this.defaultCommand.original.replace(/^[^[\]<>]*/,"$0 ");e.getInternalMethods().getUsageInstance().usage(r,this.defaultCommand.description)}let n=this.defaultCommand.builder;if(vO(n))return n(e,!0);x_e(n)||Object.keys(n).forEach(r=>{e.option(r,n[r])})}moduleName(e){let n=sre(e);if(!n)throw new Error(`No command name given for module: ${this.shim.inspect(e)}`);return this.commandFromFilename(n.filename)}commandFromFilename(e){return this.shim.path.basename(e,this.shim.path.extname(e))}extractDesc({describe:e,description:n,desc:r}){for(let i of[e,n,r]){if(typeof i=="string"||i===!1)return i;ku(i,!0,this.shim)}return!1}freeze(){this.frozens.push({handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand})}unfreeze(){let e=this.frozens.pop();ku(e,void 0,this.shim),{handlers:this.handlers,aliasMap:this.aliasMap,defaultCommand:this.defaultCommand}=e}reset(){return this.handlers={},this.aliasMap={},this.defaultCommand=void 0,this.requireCache=new Set,this}};function v_e(t,e,n,r){return new are(t,e,n,r)}s(v_e,"command");function x_e(t){return typeof t=="object"&&!!t.builder&&typeof t.handler=="function"}s(x_e,"isCommandBuilderDefinition");function bpt(t){return t.every(e=>typeof e=="string")}s(bpt,"isCommandAndAliases");function vO(t){return typeof t=="function"}s(vO,"isCommandBuilderCallback");function Ept(t){return typeof t=="object"}s(Ept,"isCommandBuilderOptionDefinitions");function Ipt(t){return typeof t=="object"&&!Array.isArray(t)}s(Ipt,"isCommandHandlerDefinition");f();f();function ov(t={},e=()=>!0){let n={};return ZS(t).forEach(r=>{e(r,t[r])&&(n[r]=t[r])}),n}s(ov,"objFilter");f();function sv(t){typeof process>"u"||[process.stdout,process.stderr].forEach(e=>{let n=e;n._handle&&n.isTTY&&typeof n._handle.setBlocking=="function"&&n._handle.setBlocking(t)})}s(sv,"setBlocking");function Tpt(t){return typeof t=="boolean"}s(Tpt,"isBoolean");function I_e(t,e){let n=e.y18n.__,r={},i=[];r.failFn=s(function(W){i.push(W)},"failFn");let o=null,a=null,l=!0;r.showHelpOnFail=s(function(W=!0,ue){let[ie,V]=typeof W=="string"?[!0,W]:[W,ue];return t.getInternalMethods().isGlobalContext()&&(a=V),o=V,l=ie,r},"showHelpOnFailFn");let c=!1;r.fail=s(function(W,ue){let ie=t.getInternalMethods().getLoggerInstance();if(i.length)for(let V=i.length-1;V>=0;--V){let O=i[V];if(Tpt(O)){if(ue)throw ue;if(W)throw Error(W)}else O(W,ue,r)}else{if(t.getExitProcess()&&sv(!0),!c){c=!0,l&&(t.showHelp("error"),ie.error()),(W||ue)&&ie.error(W||ue);let V=o||a;V&&((W||ue)&&ie.error(""),ie.error(V))}if(ue=ue||new gs(W),t.getExitProcess())return t.exit(1);if(t.getInternalMethods().hasParseCallback())return t.exit(1,ue);throw ue}},"fail");let u=[],d=!1;r.usage=(G,W)=>G===null?(d=!0,u=[],r):(d=!1,u.push([G,W||""]),r),r.getUsage=()=>u,r.getUsageDisabled=()=>d,r.getPositionalGroupName=()=>n("Positionals:");let p=[];r.example=(G,W)=>{p.push([G,W||""])};let m=[];r.command=s(function(W,ue,ie,V,O=!1){ie&&(m=m.map(Y=>(Y[2]=!1,Y))),m.push([W,ue||"",ie,V,O])},"command"),r.getCommands=()=>m;let h={};r.describe=s(function(W,ue){Array.isArray(W)?W.forEach(ie=>{r.describe(ie,ue)}):typeof W=="object"?Object.keys(W).forEach(ie=>{r.describe(ie,W[ie])}):h[W]=ue},"describe"),r.getDescriptions=()=>h;let g=[];r.epilog=G=>{g.push(G)};let y=!1,v;r.wrap=G=>{y=!0,v=G},r.getWrap=()=>e.getEnv("YARGS_DISABLE_WRAP")?null:(y||(v=ne(),y=!0),v);let b="__yargsString__:";r.deferY18nLookup=G=>b+G,r.help=s(function(){if(k)return k;_();let W=t.customScriptName?t.$0:e.path.basename(t.$0),ue=t.getDemandedOptions(),ie=t.getDemandedCommands(),V=t.getDeprecatedOptions(),O=t.getGroups(),Y=t.getOptions(),te=[];te=te.concat(Object.keys(h)),te=te.concat(Object.keys(ue)),te=te.concat(Object.keys(ie)),te=te.concat(Object.keys(Y.default)),te=te.filter(N),te=Object.keys(te.reduce((Me,ft)=>(ft!=="_"&&(Me[ft]=!0),Me),{}));let pe=r.getWrap(),ee=e.cliui({width:pe,wrap:!!pe});if(!d){if(u.length)u.forEach(Me=>{ee.div({text:`${Me[0].replace(/\$0/g,W)}`}),Me[1]&&ee.div({text:`${Me[1]}`,padding:[1,0,0,0]})}),ee.div();else if(m.length){let Me=null;ie._?Me=`${W} <${n("command")}>
`:Me=`${W} [${n("command")}]
`,ee.div(`${Me}`)}}if(m.length>1||m.length===1&&!m[0][2]){ee.div(n("Commands:"));let Me=t.getInternalMethods().getContext(),ft=Me.commands.length?`${Me.commands.join(" ")} `:"";t.getInternalMethods().getParserConfiguration()["sort-commands"]===!0&&(m=m.sort((yt,vt)=>yt[0].localeCompare(vt[0])));let It=W?`${W} `:"";m.forEach(yt=>{let vt=`${It}${ft}${yt[0].replace(/^\$0 ?/,"")}`;ee.span({text:vt,padding:[0,2,0,2],width:E(m,pe,`${W}${ft}`)+4},{text:yt[1]});let le=[];yt[2]&&le.push(`[${n("default")}]`),yt[3]&&yt[3].length&&le.push(`[${n("aliases:")} ${yt[3].join(", ")}]`),yt[4]&&(typeof yt[4]=="string"?le.push(`[${n("deprecated: %s",yt[4])}]`):le.push(`[${n("deprecated")}]`)),le.length?ee.div({text:le.join(" "),padding:[0,0,0,2],align:"right"}):ee.div()}),ee.div()}let ce=(Object.keys(Y.alias)||[]).concat(Object.keys(t.parsed.newAliases)||[]);te=te.filter(Me=>!t.parsed.newAliases[Me]&&ce.every(ft=>(Y.alias[ft]||[]).indexOf(Me)===-1));let me=n("Options:");O[me]||(O[me]=[]),P(te,Y.alias,O,me);let Ne=s(Me=>/^--/.test(bO(Me)),"isLongSwitch"),Se=Object.keys(O).filter(Me=>O[Me].length>0).map(Me=>{let ft=O[Me].filter(N).map(It=>{if(ce.includes(It))return It;for(let yt=0,vt;(vt=ce[yt])!==void 0;yt++)if((Y.alias[vt]||[]).includes(It))return vt;return It});return{groupName:Me,normalizedKeys:ft}}).filter(({normalizedKeys:Me})=>Me.length>0).map(({groupName:Me,normalizedKeys:ft})=>{let It=ft.reduce((yt,vt)=>(yt[vt]=[vt].concat(Y.alias[vt]||[]).map(le=>Me===r.getPositionalGroupName()?le:(/^[0-9]$/.test(le)?Y.boolean.includes(vt)?"-":"--":le.length>1?"--":"-")+le).sort((le,Oe)=>Ne(le)===Ne(Oe)?0:Ne(le)?1:-1).join(", "),yt),{});return{groupName:Me,normalizedKeys:ft,switches:It}});if(Se.filter(({groupName:Me})=>Me!==r.getPositionalGroupName()).some(({normalizedKeys:Me,switches:ft})=>!Me.every(It=>Ne(ft[It])))&&Se.filter(({groupName:Me})=>Me!==r.getPositionalGroupName()).forEach(({normalizedKeys:Me,switches:ft})=>{Me.forEach(It=>{Ne(ft[It])&&(ft[It]=wpt(ft[It],4))})}),Se.forEach(({groupName:Me,normalizedKeys:ft,switches:It})=>{ee.div(Me),ft.forEach(yt=>{let vt=It[yt],le=h[yt]||"",Oe=null;le.includes(b)&&(le=n(le.substring(b.length))),Y.boolean.includes(yt)&&(Oe=`[${n("boolean")}]`),Y.count.includes(yt)&&(Oe=`[${n("count")}]`),Y.string.includes(yt)&&(Oe=`[${n("string")}]`),Y.normalize.includes(yt)&&(Oe=`[${n("string")}]`),Y.array.includes(yt)&&(Oe=`[${n("array")}]`),Y.number.includes(yt)&&(Oe=`[${n("number")}]`);let ye=s(re=>typeof re=="string"?`[${n("deprecated: %s",re)}]`:`[${n("deprecated")}]`,"deprecatedExtra"),tt=[yt in V?ye(V[yt]):null,Oe,yt in ue?`[${n("required")}]`:null,Y.choices&&Y.choices[yt]?`[${n("choices:")} ${r.stringifiedValues(Y.choices[yt])}]`:null,U(Y.default[yt],Y.defaultDescription[yt])].filter(Boolean).join(" ");ee.span({text:bO(vt),padding:[0,2,0,2+E_e(vt)],width:E(It,pe)+4},le);let X=t.getInternalMethods().getUsageConfiguration()["hide-types"]===!0;tt&&!X?ee.div({text:tt,padding:[0,0,0,2],align:"right"}):ee.div()}),ee.div()}),p.length&&(ee.div(n("Examples:")),p.forEach(Me=>{Me[0]=Me[0].replace(/\$0/g,W)}),p.forEach(Me=>{Me[1]===""?ee.div({text:Me[0],padding:[0,2,0,2]}):ee.div({text:Me[0],padding:[0,2,0,2],width:E(p,pe)+4},{text:Me[1]})}),ee.div()),g.length>0){let Me=g.map(ft=>ft.replace(/\$0/g,W)).join(`
`);ee.div(`${Me}
`)}return ee.toString().replace(/\s*$/,"")},"help");function E(G,W,ue){let ie=0;return Array.isArray(G)||(G=Object.values(G).map(V=>[V])),G.forEach(V=>{ie=Math.max(e.stringWidth(ue?`${ue} ${bO(V[0])}`:bO(V[0]))+E_e(V[0]),ie)}),W&&(ie=Math.min(ie,parseInt((W*.5).toString(),10))),ie}s(E,"maxWidth");function _(){let G=t.getDemandedOptions(),W=t.getOptions();(Object.keys(W.alias)||[]).forEach(ue=>{W.alias[ue].forEach(ie=>{h[ie]&&r.describe(ue,h[ie]),ie in G&&t.demandOption(ue,G[ie]),W.boolean.includes(ie)&&t.boolean(ue),W.count.includes(ie)&&t.count(ue),W.string.includes(ie)&&t.string(ue),W.normalize.includes(ie)&&t.normalize(ue),W.array.includes(ie)&&t.array(ue),W.number.includes(ie)&&t.number(ue)})})}s(_,"normalizeAliases");let k;r.cacheHelpMessage=function(){k=this.help()},r.clearCachedHelpMessage=function(){k=void 0},r.hasCachedHelpMessage=function(){return!!k};function P(G,W,ue,ie){let V=[],O=null;return Object.keys(ue).forEach(Y=>{V=V.concat(ue[Y])}),G.forEach(Y=>{O=[Y].concat(W[Y]),O.some(te=>V.indexOf(te)!==-1)||ue[ie].push(Y)}),V}s(P,"addUngroupedKeys");function N(G){return t.getOptions().hiddenOptions.indexOf(G)<0||t.parsed.argv[t.getOptions().showHiddenOpt]}s(N,"filterHiddenOptions"),r.showHelp=G=>{let W=t.getInternalMethods().getLoggerInstance();G||(G="error"),(typeof G=="function"?G:W[G])(r.help())},r.functionDescription=G=>["(",G.name?e.Parser.decamelize(G.name,"-"):n("generated-value"),")"].join(""),r.stringifiedValues=s(function(W,ue){let ie="",V=ue||", ",O=[].concat(W);return!W||!O.length||O.forEach(Y=>{ie.length&&(ie+=V),ie+=JSON.stringify(Y)}),ie},"stringifiedValues");function U(G,W){let ue=`[${n("default:")} `;if(G===void 0&&!W)return null;if(W)ue+=W;else switch(typeof G){case"string":ue+=`"${G}"`;break;case"object":ue+=JSON.stringify(G);break;default:ue+=G}return`${ue}]`}s(U,"defaultString");function ne(){return e.process.stdColumns?Math.min(80,e.process.stdColumns):80}s(ne,"windowWidth");let he=null;r.version=G=>{he=G},r.showVersion=G=>{let W=t.getInternalMethods().getLoggerInstance();G||(G="error"),(typeof G=="function"?G:W[G])(he)},r.reset=s(function(W){return o=null,c=!1,u=[],d=!1,g=[],p=[],m=[],h=ov(h,ue=>!W[ue]),r},"reset");let ae=[];return r.freeze=s(function(){ae.push({failMessage:o,failureOutput:c,usages:u,usageDisabled:d,epilogs:g,examples:p,commands:m,descriptions:h})},"freeze"),r.unfreeze=s(function(W=!1){let ue=ae.pop();ue&&(W?(h={...ue.descriptions,...h},m=[...ue.commands,...m],u=[...ue.usages,...u],p=[...ue.examples,...p],g=[...ue.epilogs,...g]):{failMessage:o,failureOutput:c,usages:u,usageDisabled:d,epilogs:g,examples:p,commands:m,descriptions:h}=ue)},"unfreeze"),r}s(I_e,"usage");function lre(t){return typeof t=="object"}s(lre,"isIndentedText");function wpt(t,e){return lre(t)?{text:t.text,indentation:t.indentation+e}:{text:t,indentation:e}}s(wpt,"addIndentation");function E_e(t){return lre(t)?t.indentation:0}s(E_e,"getIndentation");function bO(t){return lre(t)?t.text:t}s(bO,"getText");f();f();var T_e=`###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.bashrc
#    or {{app_path}} {{completion_command}} >> ~/.bash_profile on OSX.
#
_{{app_name}}_yargs_completions()
{
    local cur_word args type_list

    cur_word="\${COMP_WORDS[COMP_CWORD]}"
    args=("\${COMP_WORDS[@]}")

    # ask yargs to generate completions.
    type_list=$({{app_path}} --get-yargs-completions "\${args[@]}")

    COMPREPLY=( $(compgen -W "\${type_list}" -- \${cur_word}) )

    # if no match was found, fall back to filename completion
    if [ \${#COMPREPLY[@]} -eq 0 ]; then
      COMPREPLY=()
    fi

    return 0
}
complete -o bashdefault -o default -F _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`,w_e=`#compdef {{app_name}}
###-begin-{{app_name}}-completions-###
#
# yargs command completion script
#
# Installation: {{app_path}} {{completion_command}} >> ~/.zshrc
#    or {{app_path}} {{completion_command}} >> ~/.zprofile on OSX.
#
_{{app_name}}_yargs_completions()
{
  local reply
  local si=$IFS
  IFS=$'
' reply=($(COMP_CWORD="$((CURRENT-1))" COMP_LINE="$BUFFER" COMP_POINT="$CURSOR" {{app_path}} --get-yargs-completions "\${words[@]}"))
  IFS=$si
  _describe 'values' reply
}
compdef _{{app_name}}_yargs_completions {{app_name}}
###-end-{{app_name}}-completions-###
`;var cre=class{static{s(this,"Completion")}constructor(e,n,r,i){var o,a,l;this.yargs=e,this.usage=n,this.command=r,this.shim=i,this.completionKey="get-yargs-completions",this.aliases=null,this.customCompletionFunction=null,this.indexAfterLastReset=0,this.zshShell=(l=((o=this.shim.getEnv("SHELL"))===null||o===void 0?void 0:o.includes("zsh"))||((a=this.shim.getEnv("ZSH_NAME"))===null||a===void 0?void 0:a.includes("zsh")))!==null&&l!==void 0?l:!1}defaultCompletion(e,n,r,i){let o=this.command.getCommandHandlers();for(let l=0,c=e.length;l<c;++l)if(o[e[l]]&&o[e[l]].builder){let u=o[e[l]].builder;if(vO(u)){this.indexAfterLastReset=l+1;let d=this.yargs.getInternalMethods().reset();return u(d,!0),d.argv}}let a=[];this.commandCompletions(a,e,r),this.optionCompletions(a,e,n,r),this.choicesFromOptionsCompletions(a,e,n,r),this.choicesFromPositionalsCompletions(a,e,n,r),i(null,a)}commandCompletions(e,n,r){let i=this.yargs.getInternalMethods().getContext().commands;!r.match(/^-/)&&i[i.length-1]!==r&&!this.previousArgHasChoices(n)&&this.usage.getCommands().forEach(o=>{let a=iv(o[0]).cmd;if(n.indexOf(a)===-1)if(!this.zshShell)e.push(a);else{let l=o[1]||"";e.push(a.replace(/:/g,"\\:")+":"+l)}})}optionCompletions(e,n,r,i){if((i.match(/^-/)||i===""&&e.length===0)&&!this.previousArgHasChoices(n)){let o=this.yargs.getOptions(),a=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[];Object.keys(o.key).forEach(l=>{let c=!!o.configuration["boolean-negation"]&&o.boolean.includes(l);!a.includes(l)&&!o.hiddenOptions.includes(l)&&!this.argsContainKey(n,l,c)&&this.completeOptionKey(l,e,i,c&&!!o.default[l])})}}choicesFromOptionsCompletions(e,n,r,i){if(this.previousArgHasChoices(n)){let o=this.getPreviousArgChoices(n);o&&o.length>0&&e.push(...o.map(a=>a.replace(/:/g,"\\:")))}}choicesFromPositionalsCompletions(e,n,r,i){if(i===""&&e.length>0&&this.previousArgHasChoices(n))return;let o=this.yargs.getGroups()[this.usage.getPositionalGroupName()]||[],a=Math.max(this.indexAfterLastReset,this.yargs.getInternalMethods().getContext().commands.length+1),l=o[r._.length-a-1];if(!l)return;let c=this.yargs.getOptions().choices[l]||[];for(let u of c)u.startsWith(i)&&e.push(u.replace(/:/g,"\\:"))}getPreviousArgChoices(e){if(e.length<1)return;let n=e[e.length-1],r="";if(!n.startsWith("-")&&e.length>1&&(r=n,n=e[e.length-2]),!n.startsWith("-"))return;let i=n.replace(/^-+/,""),o=this.yargs.getOptions(),a=[i,...this.yargs.getAliases()[i]||[]],l;for(let c of a)if(Object.prototype.hasOwnProperty.call(o.key,c)&&Array.isArray(o.choices[c])){l=o.choices[c];break}if(l)return l.filter(c=>!r||c.startsWith(r))}previousArgHasChoices(e){let n=this.getPreviousArgChoices(e);return n!==void 0&&n.length>0}argsContainKey(e,n,r){let i=s(o=>e.indexOf((/^[^0-9]$/.test(o)?"-":"--")+o)!==-1,"argsContains");if(i(n)||r&&i(`no-${n}`))return!0;if(this.aliases){for(let o of this.aliases[n])if(i(o))return!0}return!1}completeOptionKey(e,n,r,i){var o,a,l,c;let u=e;if(this.zshShell){let h=this.usage.getDescriptions(),g=(a=(o=this===null||this===void 0?void 0:this.aliases)===null||o===void 0?void 0:o[e])===null||a===void 0?void 0:a.find(b=>{let E=h[b];return typeof E=="string"&&E.length>0}),y=g?h[g]:void 0,v=(c=(l=h[e])!==null&&l!==void 0?l:y)!==null&&c!==void 0?c:"";u=`${e.replace(/:/g,"\\:")}:${v.replace("__yargsString__:","").replace(/(\r\n|\n|\r)/gm," ")}`}let d=s(h=>/^--/.test(h),"startsByTwoDashes"),p=s(h=>/^[^0-9]$/.test(h),"isShortOption"),m=!d(r)&&p(e)?"-":"--";n.push(m+u),i&&n.push(m+"no-"+u)}customCompletion(e,n,r,i){if(ku(this.customCompletionFunction,null,this.shim),Spt(this.customCompletionFunction)){let o=this.customCompletionFunction(r,n);return As(o)?o.then(a=>{this.shim.process.nextTick(()=>{i(null,a)})}).catch(a=>{this.shim.process.nextTick(()=>{i(a,void 0)})}):i(null,o)}else return Rpt(this.customCompletionFunction)?this.customCompletionFunction(r,n,(o=i)=>this.defaultCompletion(e,n,r,o),o=>{i(null,o)}):this.customCompletionFunction(r,n,o=>{i(null,o)})}getCompletion(e,n){let r=e.length?e[e.length-1]:"",i=this.yargs.parse(e,!0),o=this.customCompletionFunction?a=>this.customCompletion(e,a,r,n):a=>this.defaultCompletion(e,a,r,n);return As(i)?i.then(o):o(i)}generateCompletionScript(e,n){let r=this.zshShell?w_e:T_e,i=this.shim.path.basename(e);return e.match(/\.js$/)&&(e=`./${e}`),r=r.replace(/{{app_name}}/g,i),r=r.replace(/{{completion_command}}/g,n),r.replace(/{{app_path}}/g,e)}registerFunction(e){this.customCompletionFunction=e}setParsed(e){this.aliases=e.aliases}};function __e(t,e,n,r){return new cre(t,e,n,r)}s(__e,"completion");function Spt(t){return t.length<3}s(Spt,"isSyncCompletionFunction");function Rpt(t){return t.length>3}s(Rpt,"isFallbackCompletionFunction");f();f();function S_e(t,e){if(t.length===0)return e.length;if(e.length===0)return t.length;let n=[],r;for(r=0;r<=e.length;r++)n[r]=[r];let i;for(i=0;i<=t.length;i++)n[0][i]=i;for(r=1;r<=e.length;r++)for(i=1;i<=t.length;i++)e.charAt(r-1)===t.charAt(i-1)?n[r][i]=n[r-1][i-1]:r>1&&i>1&&e.charAt(r-2)===t.charAt(i-1)&&e.charAt(r-1)===t.charAt(i-2)?n[r][i]=n[r-2][i-2]+1:n[r][i]=Math.min(n[r-1][i-1]+1,Math.min(n[r][i-1]+1,n[r-1][i]+1));return n[e.length][t.length]}s(S_e,"levenshtein");var R_e=["$0","--","_"];function k_e(t,e,n){let r=n.y18n.__,i=n.y18n.__n,o={};o.nonOptionCount=s(function(p){let m=t.getDemandedCommands(),g=p._.length+(p["--"]?p["--"].length:0)-t.getInternalMethods().getContext().commands.length;m._&&(g<m._.min||g>m._.max)&&(g<m._.min?m._.minMsg!==void 0?e.fail(m._.minMsg?m._.minMsg.replace(/\$0/g,g.toString()).replace(/\$1/,m._.min.toString()):null):e.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",g,g.toString(),m._.min.toString())):g>m._.max&&(m._.maxMsg!==void 0?e.fail(m._.maxMsg?m._.maxMsg.replace(/\$0/g,g.toString()).replace(/\$1/,m._.max.toString()):null):e.fail(i("Too many non-option arguments: got %s, maximum of %s","Too many non-option arguments: got %s, maximum of %s",g,g.toString(),m._.max.toString()))))},"nonOptionCount"),o.positionalCount=s(function(p,m){m<p&&e.fail(i("Not enough non-option arguments: got %s, need at least %s","Not enough non-option arguments: got %s, need at least %s",m,m+"",p+""))},"positionalCount"),o.requiredArguments=s(function(p,m){let h=null;for(let g of Object.keys(m))(!Object.prototype.hasOwnProperty.call(p,g)||typeof p[g]>"u")&&(h=h||{},h[g]=m[g]);if(h){let g=[];for(let v of Object.keys(h)){let b=h[v];b&&g.indexOf(b)<0&&g.push(b)}let y=g.length?`
${g.join(`
`)}`:"";e.fail(i("Missing required argument: %s","Missing required arguments: %s",Object.keys(h).length,Object.keys(h).join(", ")+y))}},"requiredArguments"),o.unknownArguments=s(function(p,m,h,g,y=!0){var v;let b=t.getInternalMethods().getCommandInstance().getCommands(),E=[],_=t.getInternalMethods().getContext();if(Object.keys(p).forEach(k=>{!R_e.includes(k)&&!Object.prototype.hasOwnProperty.call(h,k)&&!Object.prototype.hasOwnProperty.call(t.getInternalMethods().getParseContext(),k)&&!o.isValidAndSomeAliasIsNotNew(k,m)&&E.push(k)}),y&&(_.commands.length>0||b.length>0||g)&&p._.slice(_.commands.length).forEach(k=>{b.includes(""+k)||E.push(""+k)}),y){let P=((v=t.getDemandedCommands()._)===null||v===void 0?void 0:v.max)||0,N=_.commands.length+P;N<p._.length&&p._.slice(N).forEach(U=>{U=String(U),!_.commands.includes(U)&&!E.includes(U)&&E.push(U)})}E.length&&e.fail(i("Unknown argument: %s","Unknown arguments: %s",E.length,E.map(k=>k.trim()?k:`"${k}"`).join(", ")))},"unknownArguments"),o.unknownCommands=s(function(p){let m=t.getInternalMethods().getCommandInstance().getCommands(),h=[],g=t.getInternalMethods().getContext();return(g.commands.length>0||m.length>0)&&p._.slice(g.commands.length).forEach(y=>{m.includes(""+y)||h.push(""+y)}),h.length>0?(e.fail(i("Unknown command: %s","Unknown commands: %s",h.length,h.join(", "))),!0):!1},"unknownCommands"),o.isValidAndSomeAliasIsNotNew=s(function(p,m){if(!Object.prototype.hasOwnProperty.call(m,p))return!1;let h=t.parsed.newAliases;return[p,...m[p]].some(g=>!Object.prototype.hasOwnProperty.call(h,g)||!h[p])},"isValidAndSomeAliasIsNotNew"),o.limitedChoices=s(function(p){let m=t.getOptions(),h={};if(!Object.keys(m.choices).length)return;Object.keys(p).forEach(v=>{R_e.indexOf(v)===-1&&Object.prototype.hasOwnProperty.call(m.choices,v)&&[].concat(p[v]).forEach(b=>{m.choices[v].indexOf(b)===-1&&b!==void 0&&(h[v]=(h[v]||[]).concat(b))})});let g=Object.keys(h);if(!g.length)return;let y=r("Invalid values:");g.forEach(v=>{y+=`
  ${r("Argument: %s, Given: %s, Choices: %s",v,e.stringifiedValues(h[v]),e.stringifiedValues(m.choices[v]))}`}),e.fail(y)},"limitedChoices");let a={};o.implies=s(function(p,m){xn("<string|object> [array|number|string]",[p,m],arguments.length),typeof p=="object"?Object.keys(p).forEach(h=>{o.implies(h,p[h])}):(t.global(p),a[p]||(a[p]=[]),Array.isArray(m)?m.forEach(h=>o.implies(p,h)):(ku(m,void 0,n),a[p].push(m)))},"implies"),o.getImplied=s(function(){return a},"getImplied");function l(d,p){let m=Number(p);return p=isNaN(m)?p:m,typeof p=="number"?p=d._.length>=p:p.match(/^--no-.+/)?(p=p.match(/^--no-(.+)/)[1],p=!Object.prototype.hasOwnProperty.call(d,p)):p=Object.prototype.hasOwnProperty.call(d,p),p}s(l,"keyExists"),o.implications=s(function(p){let m=[];if(Object.keys(a).forEach(h=>{let g=h;(a[h]||[]).forEach(y=>{let v=g,b=y;v=l(p,v),y=l(p,y),v&&!y&&m.push(` ${g} -> ${b}`)})}),m.length){let h=`${r("Implications failed:")}
`;m.forEach(g=>{h+=g}),e.fail(h)}},"implications");let c={};o.conflicts=s(function(p,m){xn("<string|object> [array|string]",[p,m],arguments.length),typeof p=="object"?Object.keys(p).forEach(h=>{o.conflicts(h,p[h])}):(t.global(p),c[p]||(c[p]=[]),Array.isArray(m)?m.forEach(h=>o.conflicts(p,h)):c[p].push(m))},"conflicts"),o.getConflicting=()=>c,o.conflicting=s(function(p){Object.keys(p).forEach(m=>{c[m]&&c[m].forEach(h=>{h&&p[m]!==void 0&&p[h]!==void 0&&e.fail(r("Arguments %s and %s are mutually exclusive",m,h))})}),t.getInternalMethods().getParserConfiguration()["strip-dashed"]&&Object.keys(c).forEach(m=>{c[m].forEach(h=>{h&&p[n.Parser.camelCase(m)]!==void 0&&p[n.Parser.camelCase(h)]!==void 0&&e.fail(r("Arguments %s and %s are mutually exclusive",m,h))})})},"conflictingFn"),o.recommendCommands=s(function(p,m){m=m.sort((v,b)=>b.length-v.length);let g=null,y=1/0;for(let v=0,b;(b=m[v])!==void 0;v++){let E=S_e(p,b);E<=3&&E<y&&(y=E,g=b)}g&&e.fail(r("Did you mean %s?",g))},"recommendCommands"),o.reset=s(function(p){return a=ov(a,m=>!p[m]),c=ov(c,m=>!p[m]),o},"reset");let u=[];return o.freeze=s(function(){u.push({implied:a,conflicting:c})},"freeze"),o.unfreeze=s(function(){let p=u.pop();ku(p,void 0,n),{implied:a,conflicting:c}=p},"unfreeze"),o}s(k_e,"validation");f();var ure=[],V8;function EO(t,e,n,r){V8=r;let i={};if(Object.prototype.hasOwnProperty.call(t,"extends")){if(typeof t.extends!="string")return i;let o=/\.json|\..*rc$/.test(t.extends),a=null;if(o)a=Bpt(e,t.extends);else try{a=require.resolve(t.extends)}catch{return t}kpt(a),ure.push(a),i=o?JSON.parse(V8.readFileSync(a,"utf8")):require(t.extends),delete t.extends,i=EO(i,V8.path.dirname(a),n,V8)}return ure=[],n?B_e(i,t):Object.assign({},i,t)}s(EO,"applyExtends");function kpt(t){if(ure.indexOf(t)>-1)throw new gs(`Circular extended configurations: '${t}'.`)}s(kpt,"checkForCircularExtends");function Bpt(t,e){return V8.path.resolve(t,e)}s(Bpt,"getPathToDefaultConfig");function B_e(t,e){let n={};function r(i){return i&&typeof i=="object"&&!Array.isArray(i)}s(r,"isObject"),Object.assign(n,t);for(let i of Object.keys(e))r(e[i])&&r(n[i])?n[i]=B_e(t[i],e[i]):n[i]=e[i];return n}s(B_e,"mergeDeep");var In=function(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n},fe=function(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)},Sa,HI,$8,Gf,v0,IO,av,GI,TO,jf,wO,Vf,bg,b0,$f,_O,t5,Ml,On,SO,RO,E0,jI,n5,VI,lv,kO,Dr,$I,zI,YI,Hr,BO,Eg,la;function J_e(t){return(e=[],n=t.process.cwd(),r)=>{let i=new vre(e,n,r,t);return Object.defineProperty(i,"argv",{get:s(()=>i.parse(),"get"),enumerable:!0}),i.help(),i.version(),i}}s(J_e,"YargsFactory");var P_e=Symbol("copyDoubleDash"),D_e=Symbol("copyDoubleDash"),dre=Symbol("deleteFromParserHintObject"),N_e=Symbol("emitWarning"),L_e=Symbol("freeze"),F_e=Symbol("getDollarZero"),KI=Symbol("getParserConfiguration"),M_e=Symbol("getUsageConfiguration"),fre=Symbol("guessLocale"),Q_e=Symbol("guessVersion"),O_e=Symbol("parsePositionalNumbers"),pre=Symbol("pkgUp"),cv=Symbol("populateParserHintArray"),r5=Symbol("populateParserHintSingleValueDictionary"),mre=Symbol("populateParserHintArrayDictionary"),hre=Symbol("populateParserHintDictionary"),gre=Symbol("sanitizeKey"),Are=Symbol("setKey"),yre=Symbol("unfreeze"),U_e=Symbol("validateAsync"),q_e=Symbol("getCommandInstance"),W_e=Symbol("getContext"),H_e=Symbol("getHasOutput"),G_e=Symbol("getLoggerInstance"),j_e=Symbol("getParseContext"),V_e=Symbol("getUsageInstance"),$_e=Symbol("getValidationInstance"),PO=Symbol("hasParseCallback"),z_e=Symbol("isGlobalContext"),JI=Symbol("postProcess"),Y_e=Symbol("rebase"),Cre=Symbol("reset"),z8=Symbol("runYargsParserAndExecuteCommands"),xre=Symbol("runValidation"),K_e=Symbol("setHasOutput"),XI=Symbol("kTrackManuallySetKeys"),vre=class{static{s(this,"YargsInstance")}constructor(e=[],n,r,i){this.customScriptName=!1,this.parsed=!1,Sa.set(this,void 0),HI.set(this,void 0),$8.set(this,{commands:[],fullCommands:[]}),Gf.set(this,null),v0.set(this,null),IO.set(this,"show-hidden"),av.set(this,null),GI.set(this,!0),TO.set(this,{}),jf.set(this,!0),wO.set(this,[]),Vf.set(this,void 0),bg.set(this,{}),b0.set(this,!1),$f.set(this,null),_O.set(this,!0),t5.set(this,void 0),Ml.set(this,""),On.set(this,void 0),SO.set(this,void 0),RO.set(this,{}),E0.set(this,null),jI.set(this,null),n5.set(this,{}),VI.set(this,{}),lv.set(this,void 0),kO.set(this,!1),Dr.set(this,void 0),$I.set(this,!1),zI.set(this,!1),YI.set(this,!1),Hr.set(this,void 0),BO.set(this,{}),Eg.set(this,null),la.set(this,void 0),In(this,Dr,i,"f"),In(this,lv,e,"f"),In(this,HI,n,"f"),In(this,SO,r,"f"),In(this,Vf,new xO(this),"f"),this.$0=this[F_e](),this[Cre](),In(this,Sa,fe(this,Sa,"f"),"f"),In(this,Hr,fe(this,Hr,"f"),"f"),In(this,la,fe(this,la,"f"),"f"),In(this,On,fe(this,On,"f"),"f"),fe(this,On,"f").showHiddenOpt=fe(this,IO,"f"),In(this,t5,this[D_e](),"f")}addHelpOpt(e,n){let r="help";return xn("[string|boolean] [string]",[e,n],arguments.length),fe(this,$f,"f")&&(this[dre](fe(this,$f,"f")),In(this,$f,null,"f")),e===!1&&n===void 0?this:(In(this,$f,typeof e=="string"?e:r,"f"),this.boolean(fe(this,$f,"f")),this.describe(fe(this,$f,"f"),n||fe(this,Hr,"f").deferY18nLookup("Show help")),this)}help(e,n){return this.addHelpOpt(e,n)}addShowHiddenOpt(e,n){if(xn("[string|boolean] [string]",[e,n],arguments.length),e===!1&&n===void 0)return this;let r=typeof e=="string"?e:fe(this,IO,"f");return this.boolean(r),this.describe(r,n||fe(this,Hr,"f").deferY18nLookup("Show hidden options")),fe(this,On,"f").showHiddenOpt=r,this}showHidden(e,n){return this.addShowHiddenOpt(e,n)}alias(e,n){return xn("<object|string|array> [string|array]",[e,n],arguments.length),this[mre](this.alias.bind(this),"alias",e,n),this}array(e){return xn("<array|string>",[e],arguments.length),this[cv]("array",e),this[XI](e),this}boolean(e){return xn("<array|string>",[e],arguments.length),this[cv]("boolean",e),this[XI](e),this}check(e,n){return xn("<function> [boolean]",[e,n],arguments.length),this.middleware((r,i)=>WI(()=>e(r,i.getOptions()),o=>(o?(typeof o=="string"||o instanceof Error)&&fe(this,Hr,"f").fail(o.toString(),o):fe(this,Hr,"f").fail(fe(this,Dr,"f").y18n.__("Argument check failed: %s",e.toString())),r),o=>(fe(this,Hr,"f").fail(o.message?o.message:o.toString(),o),r)),!1,n),this}choices(e,n){return xn("<object|string|array> [string|array]",[e,n],arguments.length),this[mre](this.choices.bind(this),"choices",e,n),this}coerce(e,n){if(xn("<object|string|array> [function]",[e,n],arguments.length),Array.isArray(e)){if(!n)throw new gs("coerce callback must be provided");for(let r of e)this.coerce(r,n);return this}else if(typeof e=="object"){for(let r of Object.keys(e))this.coerce(r,e[r]);return this}if(!n)throw new gs("coerce callback must be provided");return fe(this,On,"f").key[e]=!0,fe(this,Vf,"f").addCoerceMiddleware((r,i)=>{let o;return Object.prototype.hasOwnProperty.call(r,e)?WI(()=>(o=i.getAliases(),n(r[e])),l=>{r[e]=l;let c=i.getInternalMethods().getParserConfiguration()["strip-aliased"];if(o[e]&&c!==!0)for(let u of o[e])r[u]=l;return r},l=>{throw new gs(l.message)}):r},e),this}conflicts(e,n){return xn("<string|object> [string|array]",[e,n],arguments.length),fe(this,la,"f").conflicts(e,n),this}config(e="config",n,r){return xn("[object|string] [string|function] [function]",[e,n,r],arguments.length),typeof e=="object"&&!Array.isArray(e)?(e=EO(e,fe(this,HI,"f"),this[KI]()["deep-merge-config"]||!1,fe(this,Dr,"f")),fe(this,On,"f").configObjects=(fe(this,On,"f").configObjects||[]).concat(e),this):(typeof n=="function"&&(r=n,n=void 0),this.describe(e,n||fe(this,Hr,"f").deferY18nLookup("Path to JSON config file")),(Array.isArray(e)?e:[e]).forEach(i=>{fe(this,On,"f").config[i]=r||!0}),this)}completion(e,n,r){return xn("[string] [string|boolean|function] [function]",[e,n,r],arguments.length),typeof n=="function"&&(r=n,n=void 0),In(this,v0,e||fe(this,v0,"f")||"completion","f"),!n&&n!==!1&&(n="generate completion script"),this.command(fe(this,v0,"f"),n),r&&fe(this,Gf,"f").registerFunction(r),this}command(e,n,r,i,o,a){return xn("<string|array|object> [string|boolean] [function|object] [function] [array] [boolean|string]",[e,n,r,i,o,a],arguments.length),fe(this,Sa,"f").addHandler(e,n,r,i,o,a),this}commands(e,n,r,i,o,a){return this.command(e,n,r,i,o,a)}commandDir(e,n){xn("<string> [object]",[e,n],arguments.length);let r=fe(this,SO,"f")||fe(this,Dr,"f").require;return fe(this,Sa,"f").addDirectory(e,r,fe(this,Dr,"f").getCallerFile(),n),this}count(e){return xn("<array|string>",[e],arguments.length),this[cv]("count",e),this[XI](e),this}default(e,n,r){return xn("<object|string|array> [*] [string]",[e,n,r],arguments.length),r&&(ore(e,fe(this,Dr,"f")),fe(this,On,"f").defaultDescription[e]=r),typeof n=="function"&&(ore(e,fe(this,Dr,"f")),fe(this,On,"f").defaultDescription[e]||(fe(this,On,"f").defaultDescription[e]=fe(this,Hr,"f").functionDescription(n)),n=n.call()),this[r5](this.default.bind(this),"default",e,n),this}defaults(e,n,r){return this.default(e,n,r)}demandCommand(e=1,n,r,i){return xn("[number] [number|string] [string|null|undefined] [string|null|undefined]",[e,n,r,i],arguments.length),typeof n!="number"&&(r=n,n=1/0),this.global("_",!1),fe(this,On,"f").demandedCommands._={min:e,max:n,minMsg:r,maxMsg:i},this}demand(e,n,r){return Array.isArray(n)?(n.forEach(i=>{ku(r,!0,fe(this,Dr,"f")),this.demandOption(i,r)}),n=1/0):typeof n!="number"&&(r=n,n=1/0),typeof e=="number"?(ku(r,!0,fe(this,Dr,"f")),this.demandCommand(e,n,r,r)):Array.isArray(e)?e.forEach(i=>{ku(r,!0,fe(this,Dr,"f")),this.demandOption(i,r)}):typeof r=="string"?this.demandOption(e,r):(r===!0||typeof r>"u")&&this.demandOption(e),this}demandOption(e,n){return xn("<object|string|array> [string]",[e,n],arguments.length),this[r5](this.demandOption.bind(this),"demandedOptions",e,n),this}deprecateOption(e,n){return xn("<string> [string|boolean]",[e,n],arguments.length),fe(this,On,"f").deprecatedOptions[e]=n,this}describe(e,n){return xn("<object|string|array> [string]",[e,n],arguments.length),this[Are](e,!0),fe(this,Hr,"f").describe(e,n),this}detectLocale(e){return xn("<boolean>",[e],arguments.length),In(this,GI,e,"f"),this}env(e){return xn("[string|boolean]",[e],arguments.length),e===!1?delete fe(this,On,"f").envPrefix:fe(this,On,"f").envPrefix=e||"",this}epilogue(e){return xn("<string>",[e],arguments.length),fe(this,Hr,"f").epilog(e),this}epilog(e){return this.epilogue(e)}example(e,n){return xn("<string|array> [string]",[e,n],arguments.length),Array.isArray(e)?e.forEach(r=>this.example(...r)):fe(this,Hr,"f").example(e,n),this}exit(e,n){In(this,b0,!0,"f"),In(this,av,n,"f"),fe(this,jf,"f")&&fe(this,Dr,"f").process.exit(e)}exitProcess(e=!0){return xn("[boolean]",[e],arguments.length),In(this,jf,e,"f"),this}fail(e){if(xn("<function|boolean>",[e],arguments.length),typeof e=="boolean"&&e!==!1)throw new gs("Invalid first argument. Expected function or boolean 'false'");return fe(this,Hr,"f").failFn(e),this}getAliases(){return this.parsed?this.parsed.aliases:{}}async getCompletion(e,n){return xn("<array> [function]",[e,n],arguments.length),n?fe(this,Gf,"f").getCompletion(e,n):new Promise((r,i)=>{fe(this,Gf,"f").getCompletion(e,(o,a)=>{o?i(o):r(a)})})}getDemandedOptions(){return xn([],0),fe(this,On,"f").demandedOptions}getDemandedCommands(){return xn([],0),fe(this,On,"f").demandedCommands}getDeprecatedOptions(){return xn([],0),fe(this,On,"f").deprecatedOptions}getDetectLocale(){return fe(this,GI,"f")}getExitProcess(){return fe(this,jf,"f")}getGroups(){return Object.assign({},fe(this,bg,"f"),fe(this,VI,"f"))}getHelp(){if(In(this,b0,!0,"f"),!fe(this,Hr,"f").hasCachedHelpMessage()){if(!this.parsed){let n=this[z8](fe(this,lv,"f"),void 0,void 0,0,!0);if(As(n))return n.then(()=>fe(this,Hr,"f").help())}let e=fe(this,Sa,"f").runDefaultBuilderOn(this);if(As(e))return e.then(()=>fe(this,Hr,"f").help())}return Promise.resolve(fe(this,Hr,"f").help())}getOptions(){return fe(this,On,"f")}getStrict(){return fe(this,$I,"f")}getStrictCommands(){return fe(this,zI,"f")}getStrictOptions(){return fe(this,YI,"f")}global(e,n){return xn("<string|array> [boolean]",[e,n],arguments.length),e=[].concat(e),n!==!1?fe(this,On,"f").local=fe(this,On,"f").local.filter(r=>e.indexOf(r)===-1):e.forEach(r=>{fe(this,On,"f").local.includes(r)||fe(this,On,"f").local.push(r)}),this}group(e,n){xn("<string|array> <string>",[e,n],arguments.length);let r=fe(this,VI,"f")[n]||fe(this,bg,"f")[n];fe(this,VI,"f")[n]&&delete fe(this,VI,"f")[n];let i={};return fe(this,bg,"f")[n]=(r||[]).concat(e).filter(o=>i[o]?!1:i[o]=!0),this}hide(e){return xn("<string>",[e],arguments.length),fe(this,On,"f").hiddenOptions.push(e),this}implies(e,n){return xn("<string|object> [number|string|array]",[e,n],arguments.length),fe(this,la,"f").implies(e,n),this}locale(e){return xn("[string]",[e],arguments.length),e===void 0?(this[fre](),fe(this,Dr,"f").y18n.getLocale()):(In(this,GI,!1,"f"),fe(this,Dr,"f").y18n.setLocale(e),this)}middleware(e,n,r){return fe(this,Vf,"f").addMiddleware(e,!!n,r)}nargs(e,n){return xn("<string|object|array> [number]",[e,n],arguments.length),this[r5](this.nargs.bind(this),"narg",e,n),this}normalize(e){return xn("<array|string>",[e],arguments.length),this[cv]("normalize",e),this}number(e){return xn("<array|string>",[e],arguments.length),this[cv]("number",e),this[XI](e),this}option(e,n){if(xn("<string|object> [object]",[e,n],arguments.length),typeof e=="object")Object.keys(e).forEach(r=>{this.options(r,e[r])});else{typeof n!="object"&&(n={}),this[XI](e),fe(this,Eg,"f")&&(e==="version"||n?.alias==="version")&&this[N_e](['"version" is a reserved word.',"Please do one of the following:",'- Disable version with `yargs.version(false)` if using "version" as an option',"- Use the built-in `yargs.version` method instead (if applicable)","- Use a different option key","https://yargs.js.org/docs/#api-reference-version"].join(`
`),void 0,"versionWarning"),fe(this,On,"f").key[e]=!0,n.alias&&this.alias(e,n.alias);let r=n.deprecate||n.deprecated;r&&this.deprecateOption(e,r);let i=n.demand||n.required||n.require;i&&this.demand(e,i),n.demandOption&&this.demandOption(e,typeof n.demandOption=="string"?n.demandOption:void 0),n.conflicts&&this.conflicts(e,n.conflicts),"default"in n&&this.default(e,n.default),n.implies!==void 0&&this.implies(e,n.implies),n.nargs!==void 0&&this.nargs(e,n.nargs),n.config&&this.config(e,n.configParser),n.normalize&&this.normalize(e),n.choices&&this.choices(e,n.choices),n.coerce&&this.coerce(e,n.coerce),n.group&&this.group(e,n.group),(n.boolean||n.type==="boolean")&&(this.boolean(e),n.alias&&this.boolean(n.alias)),(n.array||n.type==="array")&&(this.array(e),n.alias&&this.array(n.alias)),(n.number||n.type==="number")&&(this.number(e),n.alias&&this.number(n.alias)),(n.string||n.type==="string")&&(this.string(e),n.alias&&this.string(n.alias)),(n.count||n.type==="count")&&this.count(e),typeof n.global=="boolean"&&this.global(e,n.global),n.defaultDescription&&(fe(this,On,"f").defaultDescription[e]=n.defaultDescription),n.skipValidation&&this.skipValidation(e);let o=n.describe||n.description||n.desc,a=fe(this,Hr,"f").getDescriptions();(!Object.prototype.hasOwnProperty.call(a,e)||typeof o=="string")&&this.describe(e,o),n.hidden&&this.hide(e),n.requiresArg&&this.requiresArg(e)}return this}options(e,n){return this.option(e,n)}parse(e,n,r){xn("[string|array] [function|boolean|object] [function]",[e,n,r],arguments.length),this[L_e](),typeof e>"u"&&(e=fe(this,lv,"f")),typeof n=="object"&&(In(this,jI,n,"f"),n=r),typeof n=="function"&&(In(this,E0,n,"f"),n=!1),n||In(this,lv,e,"f"),fe(this,E0,"f")&&In(this,jf,!1,"f");let i=this[z8](e,!!n),o=this.parsed;return fe(this,Gf,"f").setParsed(this.parsed),As(i)?i.then(a=>(fe(this,E0,"f")&&fe(this,E0,"f").call(this,fe(this,av,"f"),a,fe(this,Ml,"f")),a)).catch(a=>{throw fe(this,E0,"f")&&fe(this,E0,"f")(a,this.parsed.argv,fe(this,Ml,"f")),a}).finally(()=>{this[yre](),this.parsed=o}):(fe(this,E0,"f")&&fe(this,E0,"f").call(this,fe(this,av,"f"),i,fe(this,Ml,"f")),this[yre](),this.parsed=o,i)}parseAsync(e,n,r){let i=this.parse(e,n,r);return As(i)?i:Promise.resolve(i)}parseSync(e,n,r){let i=this.parse(e,n,r);if(As(i))throw new gs(".parseSync() must not be used with asynchronous builders, handlers, or middleware");return i}parserConfiguration(e){return xn("<object>",[e],arguments.length),In(this,RO,e,"f"),this}pkgConf(e,n){xn("<string> [string]",[e,n],arguments.length);let r=null,i=this[pre](n||fe(this,HI,"f"));return i[e]&&typeof i[e]=="object"&&(r=EO(i[e],n||fe(this,HI,"f"),this[KI]()["deep-merge-config"]||!1,fe(this,Dr,"f")),fe(this,On,"f").configObjects=(fe(this,On,"f").configObjects||[]).concat(r)),this}positional(e,n){xn("<string> <object>",[e,n],arguments.length);let r=["default","defaultDescription","implies","normalize","choices","conflicts","coerce","type","describe","desc","description","alias"];n=ov(n,(a,l)=>a==="type"&&!["string","number","boolean"].includes(l)?!1:r.includes(a));let i=fe(this,$8,"f").fullCommands[fe(this,$8,"f").fullCommands.length-1],o=i?fe(this,Sa,"f").cmdToParseOptions(i):{array:[],alias:{},default:{},demand:{}};return ZS(o).forEach(a=>{let l=o[a];Array.isArray(l)?l.indexOf(e)!==-1&&(n[a]=!0):l[e]&&!(a in n)&&(n[a]=l[e])}),this.group(e,fe(this,Hr,"f").getPositionalGroupName()),this.option(e,n)}recommendCommands(e=!0){return xn("[boolean]",[e],arguments.length),In(this,kO,e,"f"),this}required(e,n,r){return this.demand(e,n,r)}require(e,n,r){return this.demand(e,n,r)}requiresArg(e){return xn("<array|string|object> [number]",[e],arguments.length),typeof e=="string"&&fe(this,On,"f").narg[e]?this:(this[r5](this.requiresArg.bind(this),"narg",e,NaN),this)}showCompletionScript(e,n){return xn("[string] [string]",[e,n],arguments.length),e=e||this.$0,fe(this,t5,"f").log(fe(this,Gf,"f").generateCompletionScript(e,n||fe(this,v0,"f")||"completion")),this}showHelp(e){if(xn("[string|function]",[e],arguments.length),In(this,b0,!0,"f"),!fe(this,Hr,"f").hasCachedHelpMessage()){if(!this.parsed){let r=this[z8](fe(this,lv,"f"),void 0,void 0,0,!0);if(As(r))return r.then(()=>{fe(this,Hr,"f").showHelp(e)}),this}let n=fe(this,Sa,"f").runDefaultBuilderOn(this);if(As(n))return n.then(()=>{fe(this,Hr,"f").showHelp(e)}),this}return fe(this,Hr,"f").showHelp(e),this}scriptName(e){return this.customScriptName=!0,this.$0=e,this}showHelpOnFail(e,n){return xn("[boolean|string] [string]",[e,n],arguments.length),fe(this,Hr,"f").showHelpOnFail(e,n),this}showVersion(e){return xn("[string|function]",[e],arguments.length),fe(this,Hr,"f").showVersion(e),this}skipValidation(e){return xn("<array|string>",[e],arguments.length),this[cv]("skipValidation",e),this}strict(e){return xn("[boolean]",[e],arguments.length),In(this,$I,e!==!1,"f"),this}strictCommands(e){return xn("[boolean]",[e],arguments.length),In(this,zI,e!==!1,"f"),this}strictOptions(e){return xn("[boolean]",[e],arguments.length),In(this,YI,e!==!1,"f"),this}string(e){return xn("<array|string>",[e],arguments.length),this[cv]("string",e),this[XI](e),this}terminalWidth(){return xn([],0),fe(this,Dr,"f").process.stdColumns}updateLocale(e){return this.updateStrings(e)}updateStrings(e){return xn("<object>",[e],arguments.length),In(this,GI,!1,"f"),fe(this,Dr,"f").y18n.updateLocale(e),this}usage(e,n,r,i){if(xn("<string|null|undefined> [string|boolean] [function|object] [function]",[e,n,r,i],arguments.length),n!==void 0){if(ku(e,null,fe(this,Dr,"f")),(e||"").match(/^\$0( |$)/))return this.command(e,n,r,i);throw new gs(".usage() description must start with $0 if being used as alias for .command()")}else return fe(this,Hr,"f").usage(e),this}usageConfiguration(e){return xn("<object>",[e],arguments.length),In(this,BO,e,"f"),this}version(e,n,r){let i="version";if(xn("[boolean|string] [string] [string]",[e,n,r],arguments.length),fe(this,Eg,"f")&&(this[dre](fe(this,Eg,"f")),fe(this,Hr,"f").version(void 0),In(this,Eg,null,"f")),arguments.length===0)r=this[Q_e](),e=i;else if(arguments.length===1){if(e===!1)return this;r=e,e=i}else arguments.length===2&&(r=n,n=void 0);return In(this,Eg,typeof e=="string"?e:i,"f"),n=n||fe(this,Hr,"f").deferY18nLookup("Show version number"),fe(this,Hr,"f").version(r||void 0),this.boolean(fe(this,Eg,"f")),this.describe(fe(this,Eg,"f"),n),this}wrap(e){return xn("<number|null|undefined>",[e],arguments.length),fe(this,Hr,"f").wrap(e),this}[(Sa=new WeakMap,HI=new WeakMap,$8=new WeakMap,Gf=new WeakMap,v0=new WeakMap,IO=new WeakMap,av=new WeakMap,GI=new WeakMap,TO=new WeakMap,jf=new WeakMap,wO=new WeakMap,Vf=new WeakMap,bg=new WeakMap,b0=new WeakMap,$f=new WeakMap,_O=new WeakMap,t5=new WeakMap,Ml=new WeakMap,On=new WeakMap,SO=new WeakMap,RO=new WeakMap,E0=new WeakMap,jI=new WeakMap,n5=new WeakMap,VI=new WeakMap,lv=new WeakMap,kO=new WeakMap,Dr=new WeakMap,$I=new WeakMap,zI=new WeakMap,YI=new WeakMap,Hr=new WeakMap,BO=new WeakMap,Eg=new WeakMap,la=new WeakMap,P_e)](e){if(!e._||!e["--"])return e;e._.push.apply(e._,e["--"]);try{delete e["--"]}catch{}return e}[D_e](){return{log:s((...e)=>{this[PO]()||console.log(...e),In(this,b0,!0,"f"),fe(this,Ml,"f").length&&In(this,Ml,fe(this,Ml,"f")+`
`,"f"),In(this,Ml,fe(this,Ml,"f")+e.join(" "),"f")},"log"),error:s((...e)=>{this[PO]()||console.error(...e),In(this,b0,!0,"f"),fe(this,Ml,"f").length&&In(this,Ml,fe(this,Ml,"f")+`
`,"f"),In(this,Ml,fe(this,Ml,"f")+e.join(" "),"f")},"error")}}[dre](e){ZS(fe(this,On,"f")).forEach(n=>{if((i=>i==="configObjects")(n))return;let r=fe(this,On,"f")[n];Array.isArray(r)?r.includes(e)&&r.splice(r.indexOf(e),1):typeof r=="object"&&delete r[e]}),delete fe(this,Hr,"f").getDescriptions()[e]}[N_e](e,n,r){fe(this,TO,"f")[r]||(fe(this,Dr,"f").process.emitWarning(e,n),fe(this,TO,"f")[r]=!0)}[L_e](){fe(this,wO,"f").push({options:fe(this,On,"f"),configObjects:fe(this,On,"f").configObjects.slice(0),exitProcess:fe(this,jf,"f"),groups:fe(this,bg,"f"),strict:fe(this,$I,"f"),strictCommands:fe(this,zI,"f"),strictOptions:fe(this,YI,"f"),completionCommand:fe(this,v0,"f"),output:fe(this,Ml,"f"),exitError:fe(this,av,"f"),hasOutput:fe(this,b0,"f"),parsed:this.parsed,parseFn:fe(this,E0,"f"),parseContext:fe(this,jI,"f")}),fe(this,Hr,"f").freeze(),fe(this,la,"f").freeze(),fe(this,Sa,"f").freeze(),fe(this,Vf,"f").freeze()}[F_e](){let e="",n;return/\b(node|iojs|electron)(\.exe)?$/.test(fe(this,Dr,"f").process.argv()[0])?n=fe(this,Dr,"f").process.argv().slice(1,2):n=fe(this,Dr,"f").process.argv().slice(0,1),e=n.map(r=>{let i=this[Y_e](fe(this,HI,"f"),r);return r.match(/^(\/|([a-zA-Z]:)?\\)/)&&i.length<r.length?i:r}).join(" ").trim(),fe(this,Dr,"f").getEnv("_")&&fe(this,Dr,"f").getProcessArgvBin()===fe(this,Dr,"f").getEnv("_")&&(e=fe(this,Dr,"f").getEnv("_").replace(`${fe(this,Dr,"f").path.dirname(fe(this,Dr,"f").process.execPath())}/`,"")),e}[KI](){return fe(this,RO,"f")}[M_e](){return fe(this,BO,"f")}[fre](){if(!fe(this,GI,"f"))return;let e=fe(this,Dr,"f").getEnv("LC_ALL")||fe(this,Dr,"f").getEnv("LC_MESSAGES")||fe(this,Dr,"f").getEnv("LANG")||fe(this,Dr,"f").getEnv("LANGUAGE")||"en_US";this.locale(e.replace(/[.:].*/,""))}[Q_e](){return this[pre]().version||"unknown"}[O_e](e){let n=e["--"]?e["--"]:e._;for(let r=0,i;(i=n[r])!==void 0;r++)fe(this,Dr,"f").Parser.looksLikeNumber(i)&&Number.isSafeInteger(Math.floor(parseFloat(`${i}`)))&&(n[r]=Number(i));return e}[pre](e){let n=e||"*";if(fe(this,n5,"f")[n])return fe(this,n5,"f")[n];let r={};try{let i=e||fe(this,Dr,"f").mainFilename;!e&&fe(this,Dr,"f").path.extname(i)&&(i=fe(this,Dr,"f").path.dirname(i));let o=fe(this,Dr,"f").findUp(i,(a,l)=>{if(l.includes("package.json"))return"package.json"});ku(o,void 0,fe(this,Dr,"f")),r=JSON.parse(fe(this,Dr,"f").readFileSync(o,"utf8"))}catch{}return fe(this,n5,"f")[n]=r||{},fe(this,n5,"f")[n]}[cv](e,n){n=[].concat(n),n.forEach(r=>{r=this[gre](r),fe(this,On,"f")[e].push(r)})}[r5](e,n,r,i){this[hre](e,n,r,i,(o,a,l)=>{fe(this,On,"f")[o][a]=l})}[mre](e,n,r,i){this[hre](e,n,r,i,(o,a,l)=>{fe(this,On,"f")[o][a]=(fe(this,On,"f")[o][a]||[]).concat(l)})}[hre](e,n,r,i,o){if(Array.isArray(r))r.forEach(a=>{e(a,i)});else if((a=>typeof a=="object")(r))for(let a of ZS(r))e(a,r[a]);else o(n,this[gre](r),i)}[gre](e){return e==="__proto__"?"___proto___":e}[Are](e,n){return this[r5](this[Are].bind(this),"key",e,n),this}[yre](){var e,n,r,i,o,a,l,c,u,d,p,m;let h=fe(this,wO,"f").pop();ku(h,void 0,fe(this,Dr,"f"));let g;e=this,n=this,r=this,i=this,o=this,a=this,l=this,c=this,u=this,d=this,p=this,m=this,{options:{set value(y){In(e,On,y,"f")}}.value,configObjects:g,exitProcess:{set value(y){In(n,jf,y,"f")}}.value,groups:{set value(y){In(r,bg,y,"f")}}.value,output:{set value(y){In(i,Ml,y,"f")}}.value,exitError:{set value(y){In(o,av,y,"f")}}.value,hasOutput:{set value(y){In(a,b0,y,"f")}}.value,parsed:this.parsed,strict:{set value(y){In(l,$I,y,"f")}}.value,strictCommands:{set value(y){In(c,zI,y,"f")}}.value,strictOptions:{set value(y){In(u,YI,y,"f")}}.value,completionCommand:{set value(y){In(d,v0,y,"f")}}.value,parseFn:{set value(y){In(p,E0,y,"f")}}.value,parseContext:{set value(y){In(m,jI,y,"f")}}.value}=h,fe(this,On,"f").configObjects=g,fe(this,Hr,"f").unfreeze(),fe(this,la,"f").unfreeze(),fe(this,Sa,"f").unfreeze(),fe(this,Vf,"f").unfreeze()}[U_e](e,n){return WI(n,r=>(e(r),r))}getInternalMethods(){return{getCommandInstance:this[q_e].bind(this),getContext:this[W_e].bind(this),getHasOutput:this[H_e].bind(this),getLoggerInstance:this[G_e].bind(this),getParseContext:this[j_e].bind(this),getParserConfiguration:this[KI].bind(this),getUsageConfiguration:this[M_e].bind(this),getUsageInstance:this[V_e].bind(this),getValidationInstance:this[$_e].bind(this),hasParseCallback:this[PO].bind(this),isGlobalContext:this[z_e].bind(this),postProcess:this[JI].bind(this),reset:this[Cre].bind(this),runValidation:this[xre].bind(this),runYargsParserAndExecuteCommands:this[z8].bind(this),setHasOutput:this[K_e].bind(this)}}[q_e](){return fe(this,Sa,"f")}[W_e](){return fe(this,$8,"f")}[H_e](){return fe(this,b0,"f")}[G_e](){return fe(this,t5,"f")}[j_e](){return fe(this,jI,"f")||{}}[V_e](){return fe(this,Hr,"f")}[$_e](){return fe(this,la,"f")}[PO](){return!!fe(this,E0,"f")}[z_e](){return fe(this,_O,"f")}[JI](e,n,r,i){return r||As(e)||(n||(e=this[P_e](e)),(this[KI]()["parse-positional-numbers"]||this[KI]()["parse-positional-numbers"]===void 0)&&(e=this[O_e](e)),i&&(e=qI(e,this,fe(this,Vf,"f").getMiddleware(),!1))),e}[Cre](e={}){In(this,On,fe(this,On,"f")||{},"f");let n={};n.local=fe(this,On,"f").local||[],n.configObjects=fe(this,On,"f").configObjects||[];let r={};n.local.forEach(a=>{r[a]=!0,(e[a]||[]).forEach(l=>{r[l]=!0})}),Object.assign(fe(this,VI,"f"),Object.keys(fe(this,bg,"f")).reduce((a,l)=>{let c=fe(this,bg,"f")[l].filter(u=>!(u in r));return c.length>0&&(a[l]=c),a},{})),In(this,bg,{},"f");let i=["array","boolean","string","skipValidation","count","normalize","number","hiddenOptions"],o=["narg","key","alias","default","defaultDescription","config","choices","demandedOptions","demandedCommands","deprecatedOptions"];return i.forEach(a=>{n[a]=(fe(this,On,"f")[a]||[]).filter(l=>!r[l])}),o.forEach(a=>{n[a]=ov(fe(this,On,"f")[a],l=>!r[l])}),n.envPrefix=fe(this,On,"f").envPrefix,In(this,On,n,"f"),In(this,Hr,fe(this,Hr,"f")?fe(this,Hr,"f").reset(r):I_e(this,fe(this,Dr,"f")),"f"),In(this,la,fe(this,la,"f")?fe(this,la,"f").reset(r):k_e(this,fe(this,Hr,"f"),fe(this,Dr,"f")),"f"),In(this,Sa,fe(this,Sa,"f")?fe(this,Sa,"f").reset():v_e(fe(this,Hr,"f"),fe(this,la,"f"),fe(this,Vf,"f"),fe(this,Dr,"f")),"f"),fe(this,Gf,"f")||In(this,Gf,__e(this,fe(this,Hr,"f"),fe(this,Sa,"f"),fe(this,Dr,"f")),"f"),fe(this,Vf,"f").reset(),In(this,v0,null,"f"),In(this,Ml,"","f"),In(this,av,null,"f"),In(this,b0,!1,"f"),this.parsed=!1,this}[Y_e](e,n){return fe(this,Dr,"f").path.relative(e,n)}[z8](e,n,r,i=0,o=!1){let a=!!r||o;e=e||fe(this,lv,"f"),fe(this,On,"f").__=fe(this,Dr,"f").y18n.__,fe(this,On,"f").configuration=this[KI]();let l=!!fe(this,On,"f").configuration["populate--"],c=Object.assign({},fe(this,On,"f").configuration,{"populate--":!0}),u=fe(this,Dr,"f").Parser.detailed(e,Object.assign({},fe(this,On,"f"),{configuration:{"parse-positional-numbers":!1,...c}})),d=Object.assign(u.argv,fe(this,jI,"f")),p,m=u.aliases,h=!1,g=!1;Object.keys(d).forEach(y=>{y===fe(this,$f,"f")&&d[y]?h=!0:y===fe(this,Eg,"f")&&d[y]&&(g=!0)}),d.$0=this.$0,this.parsed=u,i===0&&fe(this,Hr,"f").clearCachedHelpMessage();try{if(this[fre](),n)return this[JI](d,l,!!r,!1);fe(this,$f,"f")&&[fe(this,$f,"f")].concat(m[fe(this,$f,"f")]||[]).filter(_=>_.length>1).includes(""+d._[d._.length-1])&&(d._.pop(),h=!0),In(this,_O,!1,"f");let y=fe(this,Sa,"f").getCommands(),v=fe(this,Gf,"f").completionKey in d,b=h||v||o;if(d._.length){if(y.length){let E;for(let _=i||0,k;d._[_]!==void 0;_++)if(k=String(d._[_]),y.includes(k)&&k!==fe(this,v0,"f")){let P=fe(this,Sa,"f").runCommand(k,this,u,_+1,o,h||g||o);return this[JI](P,l,!!r,!1)}else if(!E&&k!==fe(this,v0,"f")){E=k;break}!fe(this,Sa,"f").hasDefaultCommand()&&fe(this,kO,"f")&&E&&!b&&fe(this,la,"f").recommendCommands(E,y)}fe(this,v0,"f")&&d._.includes(fe(this,v0,"f"))&&!v&&(fe(this,jf,"f")&&sv(!0),this.showCompletionScript(),this.exit(0))}if(fe(this,Sa,"f").hasDefaultCommand()&&!b){let E=fe(this,Sa,"f").runCommand(null,this,u,0,o,h||g||o);return this[JI](E,l,!!r,!1)}if(v){fe(this,jf,"f")&&sv(!0),e=[].concat(e);let E=e.slice(e.indexOf(`--${fe(this,Gf,"f").completionKey}`)+1);return fe(this,Gf,"f").getCompletion(E,(_,k)=>{if(_)throw new gs(_.message);(k||[]).forEach(P=>{fe(this,t5,"f").log(P)}),this.exit(0)}),this[JI](d,!l,!!r,!1)}if(fe(this,b0,"f")||(h?(fe(this,jf,"f")&&sv(!0),a=!0,this.showHelp("log"),this.exit(0)):g&&(fe(this,jf,"f")&&sv(!0),a=!0,fe(this,Hr,"f").showVersion("log"),this.exit(0))),!a&&fe(this,On,"f").skipValidation.length>0&&(a=Object.keys(d).some(E=>fe(this,On,"f").skipValidation.indexOf(E)>=0&&d[E]===!0)),!a){if(u.error)throw new gs(u.error.message);if(!v){let E=this[xre](m,{},u.error);r||(p=qI(d,this,fe(this,Vf,"f").getMiddleware(),!0)),p=this[U_e](E,p??d),As(p)&&!r&&(p=p.then(()=>qI(d,this,fe(this,Vf,"f").getMiddleware(),!1)))}}}catch(y){if(y instanceof gs)fe(this,Hr,"f").fail(y.message,y);else throw y}return this[JI](p??d,l,!!r,!0)}[xre](e,n,r,i){let o={...this.getDemandedOptions()};return a=>{if(r)throw new gs(r.message);fe(this,la,"f").nonOptionCount(a),fe(this,la,"f").requiredArguments(a,o);let l=!1;fe(this,zI,"f")&&(l=fe(this,la,"f").unknownCommands(a)),fe(this,$I,"f")&&!l?fe(this,la,"f").unknownArguments(a,e,n,!!i):fe(this,YI,"f")&&fe(this,la,"f").unknownArguments(a,e,{},!1,!1),fe(this,la,"f").limitedChoices(a),fe(this,la,"f").implications(a),fe(this,la,"f").conflicting(a)}}[K_e](){In(this,b0,!0,"f")}[XI](e){if(typeof e=="string")fe(this,On,"f").key[e]=!0;else for(let n of e)fe(this,On,"f").key[n]=!0}};function b_e(t){return!!t&&typeof t.getInternalMethods=="function"}s(b_e,"isYargsInstance");var Ppt=J_e(g_e),X_e=Ppt;f();f();f();var Z_e={AuthNotifyShown:"auth.auth_notify_shown",AuthNotifyDismissed:"auth.auth_notify_dismissed",NewGitHubLogin:"auth.new_github_login",GitHubLoginSuccess:"auth.github_login_success"};function eSe(t,e,n){let r=ir.createAndMarkAsIssued({authSource:e,authType:n});return kt(t,Z_e.NewGitHubLogin,r)}s(eSe,"telemetryNewGitHubLogin");function tSe(t,e){let n=ir.createAndMarkAsIssued({authType:e});return kt(t,Z_e.GitHubLoginSuccess,n)}s(tSe,"telemetryGitHubLoginSuccess");var bre=class extends ls{static{s(this,"DeviceFlowError")}constructor(e){super(e.error_description),this.code=e.error,this.uri=e.error_uri,this.name="DeviceFlowError"}};async function Dpt(t,e,{serverUrl:n}){let r={method:"POST",headers:{Accept:"application/json",...n0(t)},json:{client_id:e},timeout:3e4},i,o=new URL("login/device/code",n).href;try{i=await t.get(Kr).fetch(o,r)}catch(a){throw a instanceof Error&&vB(a)?new ls(`Could not log in with device flow on ${n}: ${a.message}`):a}if(!i.ok)throw new ls(`Could not log in with device flow on ${n}: HTTP ${i.status}`);return await i.json()}s(Dpt,"requestDeviceFlowStage1");async function Npt(t,e,n,{serverUrl:r}){let i={method:"POST",headers:{Accept:"application/json",...n0(t)},json:{client_id:n,device_code:e,grant_type:"urn:ietf:params:oauth:grant-type:device_code"},timeout:3e4},o=await t.get(Kr).fetch(new URL("login/oauth/access_token",r).href,i),a=await o.json();if(a.access_token||a.error==="authorization_pending"||a.error==="slow_down")return a;throw a.error&&a.error_description?new bre(a):new ls(`Unexpected ${o.status} response from device flow: ${JSON.stringify(a)}`)}s(Npt,"requestDeviceFlowStage2");async function Lpt(t,e){tSe(t,"deviceFlow");let r=await(await Bf(t,e,"user",{headers:{Accept:"application/json"}})).json();if("errors"in r)throw new ls(`Error retrieving user information: ${String(r.errors)}`);return r}s(Lpt,"requestUserInfo");var ZI=class{static{s(this,"GitHubDeviceFlow")}async getToken(e,n,r){try{return await this.getTokenUnguarded(e,n,r)}catch(i){throw e.get(Iu).notifyUser(e,i),i}}async getTokenUnguarded(e,n,r){eSe(e,"unknown","deviceFlow");let i=await Dpt(e,n,r),o=(async()=>{let a=i.expires_in,l,c=i.interval;for(;a>0;){await new Promise(d=>setTimeout(d,1e3*c));let u=await Npt(e,i.device_code,n,r);if(a-=c,l=u.access_token,l){let d=await Lpt(e,{...r,accessToken:l});return{...r,githubAppId:n,login:d.login,accessToken:l}}c=u.interval??c}throw new ls("Timed out waiting for login to complete")})();return{...i,waitForAuth:o}}};f();var I0=class{static{s(this,"CitationManager")}},DO=class extends I0{static{s(this,"NoOpCitationManager")}async handleIPCodeCitation(e,n){}};f();f();f();var Fpt={didChangeFeatureFlags:!1,fetch:!1,ipCodeCitation:!1,redirectedTelemetry:!1,related:!1,token:!1,watchedFiles:!1,showPanelMessage:!1},Go=class{constructor(){this.capabilities={...Fpt}}static{s(this,"CopilotCapabilitiesProvider")}setCapabilities(e){let n;for(n in e){let r=e[n];r!==void 0&&(this.capabilities[n]=r)}}getCapabilities(){return this.capabilities}};f();f();f();f();function F1(t,e){let n=T0(t,e);return n===-1?void 0:t[n]}s(F1,"findLastMonotonous");function T0(t,e,n=0,r=t.length){let i=n,o=r;for(;i<o;){let a=Math.floor((i+o)/2);e(t[a])?i=a+1:o=a}return i-1}s(T0,"findLastIdxMonotonous");function nSe(t,e){let n=e2(t,e);return n===t.length?void 0:t[n]}s(nSe,"findFirstMonotonous");function e2(t,e,n=0,r=t.length){let i=n,o=r;for(;i<o;){let a=Math.floor((i+o)/2);e(t[a])?o=a:i=a+1}return i}s(e2,"findFirstIdxMonotonousOrArrLen");var Y8=class t{constructor(e){this._array=e;this._findLastMonotonousLastIdx=0}static{s(this,"MonotonousArray")}static{this.assertInvariants=!1}findLastMonotonous(e){if(t.assertInvariants){if(this._prevFindLastPredicate){for(let r of this._array)if(this._prevFindLastPredicate(r)&&!e(r))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this._prevFindLastPredicate=e}let n=T0(this._array,e,this._findLastMonotonousLastIdx);return this._findLastMonotonousLastIdx=n+1,n===-1?void 0:this._array[n]}};f();var Ere=class{static{s(this,"ErrorHandler")}constructor(){this.listeners=[],this.unexpectedErrorHandler=function(e){setTimeout(()=>{throw e.stack?NO.isErrorNoTelemetry(e)?new NO(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.listeners.push(e),()=>{this._removeListener(e)}}emit(e){this.listeners.forEach(n=>{n(e)})}_removeListener(e){this.listeners.splice(this.listeners.indexOf(e),1)}setUnexpectedErrorHandler(e){this.unexpectedErrorHandler=e}getUnexpectedErrorHandler(){return this.unexpectedErrorHandler}onUnexpectedError(e){this.unexpectedErrorHandler(e),this.emit(e)}onUnexpectedExternalError(e){this.unexpectedErrorHandler(e)}},rSe=new Ere;function t2(t){rSe.onUnexpectedError(t)}s(t2,"onBugIndicatingError");function i5(t){Mpt(t)||rSe.onUnexpectedError(t)}s(i5,"onUnexpectedError");var Ire="Canceled";function Mpt(t){return t instanceof Ig?!0:t instanceof Error&&t.name===Ire&&t.message===Ire}s(Mpt,"isCancellationError");var Ig=class extends Error{static{s(this,"CancellationError")}constructor(){super(Ire),this.name=this.message}};function K8(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}s(K8,"illegalArgument");function iSe(t){return t?new Error(`Illegal state: ${t}`):new Error("Illegal state")}s(iSe,"illegalState");var NO=class t extends Error{static{s(this,"ErrorNoTelemetry")}constructor(e){super(e),this.name="CodeExpectedError"}static fromError(e){if(e instanceof t)return e;let n=new t;return n.message=e.message,n.stack=e.stack,n}static isErrorNoTelemetry(e){return e.name==="CodeExpectedError"}},dr=class t extends Error{static{s(this,"BugIndicatingError")}constructor(e){super(e||"An unexpected bug occurred."),Object.setPrototypeOf(this,t.prototype)}};function n2(t,e,n=(r,i)=>r===i){if(t===e)return!0;if(!t||!e||t.length!==e.length)return!1;for(let r=0,i=t.length;r<i;r++)if(!n(t[r],e[r]))return!1;return!0}s(n2,"equals");function*o5(t,e){let n,r;for(let i of t)r!==void 0&&e(r,i)?n.push(i):(n&&(yield n),n=[i]),r=i;n&&(yield n)}s(o5,"groupAdjacentBy");function sSe(t,e){for(let n=0;n<=t.length;n++)e(n===0?void 0:t[n-1],n===t.length?void 0:t[n])}s(sSe,"forEachAdjacent");function aSe(t,e){for(let n=0;n<t.length;n++)e(n===0?void 0:t[n-1],t[n],n+1===t.length?void 0:t[n+1])}s(aSe,"forEachWithNeighbors");function lSe(t){return t.filter(e=>!!e)}s(lSe,"coalesce");function cSe(t,e){for(let n of e)t.push(n)}s(cSe,"pushMany");var uSe;(l=>{function t(c){return c<0}l.isLessThan=t,s(t,"isLessThan");function e(c){return c<=0}l.isLessThanOrEqual=e,s(e,"isLessThanOrEqual");function n(c){return c>0}l.isGreaterThan=n,s(n,"isGreaterThan");function r(c){return c===0}l.isNeitherLessOrGreaterThan=r,s(r,"isNeitherLessOrGreaterThan"),l.greaterThan=1,l.lessThan=-1,l.neitherLessOrGreaterThan=0})(uSe||={});function w0(t,e){return(n,r)=>e(t(n),t(r))}s(w0,"compareBy");var _0=s((t,e)=>t-e,"numberComparator");function dSe(t){return(e,n)=>-t(e,n)}s(dSe,"reverseOrder");var LO=class{constructor(e){this.items=e;this.firstIdx=0;this.lastIdx=this.items.length-1}static{s(this,"ArrayQueue")}get length(){return this.lastIdx-this.firstIdx+1}takeWhile(e){let n=this.firstIdx;for(;n<this.items.length&&e(this.items[n]);)n++;let r=n===this.firstIdx?null:this.items.slice(this.firstIdx,n);return this.firstIdx=n,r}takeFromEndWhile(e){let n=this.lastIdx;for(;n>=0&&e(this.items[n]);)n--;let r=n===this.lastIdx?null:this.items.slice(n+1,this.lastIdx+1);return this.lastIdx=n,r}peek(){if(this.length!==0)return this.items[this.firstIdx]}peekLast(){if(this.length!==0)return this.items[this.lastIdx]}dequeue(){let e=this.items[this.firstIdx];return this.firstIdx++,e}removeLast(){let e=this.items[this.lastIdx];return this.lastIdx--,e}takeCount(e){let n=this.items.slice(this.firstIdx,this.firstIdx+e);return this.firstIdx+=e,n}},oSe=class t{constructor(e){this.iterate=e}static{s(this,"CallbackIterable")}static{this.empty=new t(e=>{})}forEach(e){this.iterate(n=>(e(n),!0))}toArray(){let e=[];return this.iterate(n=>(e.push(n),!0)),e}filter(e){return new t(n=>this.iterate(r=>e(r)?n(r):!0))}map(e){return new t(n=>this.iterate(r=>n(e(r))))}some(e){let n=!1;return this.iterate(r=>(n=e(r),!n)),n}findFirst(e){let n;return this.iterate(r=>e(r)?(n=r,!1):!0),n}findLast(e){let n;return this.iterate(r=>(e(r)&&(n=r),!0)),n}findLastMaxBy(e){let n,r=!0;return this.iterate(i=>((r||uSe.isGreaterThan(e(i,n)))&&(r=!1,n=i),!0)),n}};f();function hSe(t,e){let n=Object.create(null);for(let r of t){let i=e(r),o=n[i];o||(o=n[i]=[]),o.push(r)}return n}s(hSe,"groupBy");var pSe,mSe,fSe=class{constructor(e,n){this.toKey=n;this._map=new Map;this[pSe]="SetWithKey";for(let r of e)this.add(r)}static{s(this,"SetWithKey")}get size(){return this._map.size}add(e){let n=this.toKey(e);return this._map.set(n,e),this}delete(e){return this._map.delete(this.toKey(e))}has(e){return this._map.has(this.toKey(e))}*entries(){for(let e of this._map.values())yield[e,e]}keys(){return this.values()}*values(){for(let e of this._map.values())yield e}clear(){this._map.clear()}forEach(e,n){this._map.forEach(r=>e.call(n,r,r,this))}[(mSe=Symbol.iterator,pSe=Symbol.toStringTag,mSe)](){return this.values()}};f();function Tre(t,e){let n=this,r=!1,i;return function(){if(r)return i;if(r=!0,e)try{i=t.apply(n,arguments)}finally{e()}else i=t.apply(n,arguments);return i}}s(Tre,"createSingleCallFunction");f();var wre;(_=>{function t(k){return k&&typeof k=="object"&&typeof k[Symbol.iterator]=="function"}_.is=t,s(t,"is");let e=Object.freeze([]);function n(){return e}_.empty=n,s(n,"empty");function*r(k){yield k}_.single=r,s(r,"single");function i(k){return t(k)?k:r(k)}_.wrap=i,s(i,"wrap");function o(k){return k||e}_.from=o,s(o,"from");function*a(k){for(let P=k.length-1;P>=0;P--)yield k[P]}_.reverse=a,s(a,"reverse");function l(k){return!k||k[Symbol.iterator]().next().done===!0}_.isEmpty=l,s(l,"isEmpty");function c(k){return k[Symbol.iterator]().next().value}_.first=c,s(c,"first");function u(k,P){let N=0;for(let U of k)if(P(U,N++))return!0;return!1}_.some=u,s(u,"some");function d(k,P){for(let N of k)if(P(N))return N}_.find=d,s(d,"find");function*p(k,P){for(let N of k)P(N)&&(yield N)}_.filter=p,s(p,"filter");function*m(k,P){let N=0;for(let U of k)yield P(U,N++)}_.map=m,s(m,"map");function*h(k,P){let N=0;for(let U of k)yield*P(U,N++)}_.flatMap=h,s(h,"flatMap");function*g(...k){for(let P of k)yield*P}_.concat=g,s(g,"concat");function y(k,P,N){let U=N;for(let ne of k)U=P(U,ne);return U}_.reduce=y,s(y,"reduce");function*v(k,P,N=k.length){for(P<-k.length&&(P=0),P<0&&(P+=k.length),N<0?N+=k.length:N>k.length&&(N=k.length);P<N;P++)yield k[P]}_.slice=v,s(v,"slice");function b(k,P=Number.POSITIVE_INFINITY){let N=[];if(P===0)return[N,k];let U=k[Symbol.iterator]();for(let ne=0;ne<P;ne++){let he=U.next();if(he.done)return[N,_.empty()];N.push(he.value)}return[N,{[Symbol.iterator](){return U}}]}_.consume=b,s(b,"consume");async function E(k){let P=[];for await(let N of k)P.push(N);return Promise.resolve(P)}_.asyncToArray=E,s(E,"asyncToArray")})(wre||={});f();var _re=class{constructor(e,n){this.uri=e;this.value=n}static{s(this,"ResourceMapEntry")}};function Opt(t){return Array.isArray(t)}s(Opt,"isEntries");var ASe,FO=class t{constructor(e,n){this[ASe]="ResourceMap";if(e instanceof t)this.map=new Map(e.map),this.toKey=n??t.defaultToKey;else if(Opt(e)){this.map=new Map,this.toKey=n??t.defaultToKey;for(let[r,i]of e)this.set(r,i)}else this.map=new Map,this.toKey=e??t.defaultToKey}static{s(this,"ResourceMap")}static{this.defaultToKey=s(e=>e.toString(),"defaultToKey")}set(e,n){return this.map.set(this.toKey(e),new _re(e,n)),this}get(e){return this.map.get(this.toKey(e))?.value}has(e){return this.map.has(this.toKey(e))}get size(){return this.map.size}clear(){this.map.clear()}delete(e){return this.map.delete(this.toKey(e))}forEach(e,n){typeof n<"u"&&(e=e.bind(n));for(let[r,i]of this.map)e(i.value,i.uri,this)}*values(){for(let e of this.map.values())yield e.value}*keys(){for(let e of this.map.values())yield e.uri}*entries(){for(let e of this.map.values())yield[e.uri,e.value]}*[(ASe=Symbol.toStringTag,Symbol.iterator)](){for(let[,e]of this.map)yield[e.uri,e.value]}},ySe,gSe=class{constructor(e,n){this[ySe]="ResourceSet";!e||typeof e=="function"?this._map=new FO(e):(this._map=new FO(n),e.forEach(this.add,this))}static{s(this,"ResourceSet")}get size(){return this._map.size}add(e){return this._map.set(e,e),this}clear(){this._map.clear()}delete(e){return this._map.delete(e)}forEach(e,n){this._map.forEach((r,i)=>e.call(n,i,i,this))}has(e){return this._map.has(e)}entries(){return this._map.entries()}keys(){return this._map.keys()}values(){return this._map.keys()}[(ySe=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}};var CSe,Sre=class{constructor(){this[CSe]="LinkedMap";this._map=new Map,this._head=void 0,this._tail=void 0,this._size=0,this._state=0}static{s(this,"LinkedMap")}clear(){this._map.clear(),this._head=void 0,this._tail=void 0,this._size=0,this._state++}isEmpty(){return!this._head&&!this._tail}get size(){return this._size}get first(){return this._head?.value}get last(){return this._tail?.value}has(e){return this._map.has(e)}get(e,n=0){let r=this._map.get(e);if(r)return n!==0&&this.touch(r,n),r.value}set(e,n,r=0){let i=this._map.get(e);if(i)i.value=n,r!==0&&this.touch(i,r);else{switch(i={key:e,value:n,next:void 0,previous:void 0},r){case 0:this.addItemLast(i);break;case 1:this.addItemFirst(i);break;case 2:this.addItemLast(i);break;default:this.addItemLast(i);break}this._map.set(e,i),this._size++}return this}delete(e){return!!this.remove(e)}remove(e){let n=this._map.get(e);if(n)return this._map.delete(e),this.removeItem(n),this._size--,n.value}shift(){if(!this._head&&!this._tail)return;if(!this._head||!this._tail)throw new Error("Invalid list");let e=this._head;return this._map.delete(e.key),this.removeItem(e),this._size--,e.value}forEach(e,n){let r=this._state,i=this._head;for(;i;){if(n?e.bind(n)(i.value,i.key,this):e(i.value,i.key,this),this._state!==r)throw new Error("LinkedMap got modified during iteration.");i=i.next}}keys(){let e=this,n=this._state,r=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==n)throw new Error("LinkedMap got modified during iteration.");if(r){let o={value:r.key,done:!1};return r=r.next,o}else return{value:void 0,done:!0}}};return i}values(){let e=this,n=this._state,r=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==n)throw new Error("LinkedMap got modified during iteration.");if(r){let o={value:r.value,done:!1};return r=r.next,o}else return{value:void 0,done:!0}}};return i}entries(){let e=this,n=this._state,r=this._head,i={[Symbol.iterator](){return i},next(){if(e._state!==n)throw new Error("LinkedMap got modified during iteration.");if(r){let o={value:[r.key,r.value],done:!1};return r=r.next,o}else return{value:void 0,done:!0}}};return i}[(CSe=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}trimOld(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._head,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.next,r--;this._head=n,this._size=r,n&&(n.previous=void 0),this._state++}trimNew(e){if(e>=this.size)return;if(e===0){this.clear();return}let n=this._tail,r=this.size;for(;n&&r>e;)this._map.delete(n.key),n=n.previous,r--;this._tail=n,this._size=r,n&&(n.next=void 0),this._state++}addItemFirst(e){if(!this._head&&!this._tail)this._tail=e;else if(this._head)e.next=this._head,this._head.previous=e;else throw new Error("Invalid list");this._head=e,this._state++}addItemLast(e){if(!this._head&&!this._tail)this._head=e;else if(this._tail)e.previous=this._tail,this._tail.next=e;else throw new Error("Invalid list");this._tail=e,this._state++}removeItem(e){if(e===this._head&&e===this._tail)this._head=void 0,this._tail=void 0;else if(e===this._head){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this._head=e.next}else if(e===this._tail){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this._tail=e.previous}else{let n=e.next,r=e.previous;if(!n||!r)throw new Error("Invalid list");n.previous=r,r.next=n}e.next=void 0,e.previous=void 0,this._state++}touch(e,n){if(!this._head||!this._tail)throw new Error("Invalid list");if(!(n!==1&&n!==2)){if(n===1){if(e===this._head)return;let r=e.next,i=e.previous;e===this._tail?(i.next=void 0,this._tail=i):(r.previous=i,i.next=r),e.previous=void 0,e.next=this._head,this._head.previous=e,this._head=e,this._state++}else if(n===2){if(e===this._tail)return;let r=e.next,i=e.previous;e===this._head?(r.previous=void 0,this._head=r):(r.previous=i,i.next=r),e.next=void 0,e.previous=this._tail,this._tail.next=e,this._tail=e,this._state++}}}toJSON(){let e=[];return this.forEach((n,r)=>{e.push([r,n])}),e}fromJSON(e){this.clear();for(let[n,r]of e)this.set(n,r)}},Rre=class extends Sre{static{s(this,"Cache")}constructor(e,n=1){super(),this._limit=e,this._ratio=Math.min(Math.max(0,n),1)}get limit(){return this._limit}set limit(e){this._limit=e,this.checkTrim()}get ratio(){return this._ratio}set ratio(e){this._ratio=Math.min(Math.max(0,e),1),this.checkTrim()}get(e,n=2){return super.get(e,n)}peek(e){return super.get(e,0)}set(e,n){return super.set(e,n,2),this}checkTrim(){this.size>this._limit&&this.trim(Math.round(this._limit*this._ratio))}},MO=class extends Rre{static{s(this,"LRUCache")}constructor(e,n=1){super(e,n)}trim(e){this.trimOld(e)}set(e,n){return super.set(e,n),this.checkTrim(),this}};var s5=class{constructor(){this.map=new Map}static{s(this,"SetMap")}add(e,n){let r=this.map.get(e);r||(r=new Set,this.map.set(e,r)),r.add(n)}delete(e,n){let r=this.map.get(e);r&&(r.delete(n),r.size===0&&this.map.delete(e))}forEach(e,n){let r=this.map.get(e);r&&r.forEach(n)}get(e){let n=this.map.get(e);return n||new Set}};var Upt=!1,a5=null;var xSe=class t{constructor(){this.livingDisposables=new Map}static{s(this,"DisposableTracker")}static{this.idx=0}getDisposableData(e){let n=this.livingDisposables.get(e);return n||(n={parent:null,source:null,isSingleton:!1,value:e,idx:t.idx++},this.livingDisposables.set(e,n)),n}trackDisposable(e){let n=this.getDisposableData(e);n.source||(n.source=new Error().stack)}setParent(e,n){let r=this.getDisposableData(e);r.parent=n}markAsDisposed(e){this.livingDisposables.delete(e)}markAsSingleton(e){this.getDisposableData(e).isSingleton=!0}getRootParent(e,n){let r=n.get(e);if(r)return r;let i=e.parent?this.getRootParent(this.getDisposableData(e.parent),n):e;return n.set(e,i),i}getTrackedDisposables(){let e=new Map;return[...this.livingDisposables.entries()].filter(([,r])=>r.source!==null&&!this.getRootParent(r,e).isSingleton).flatMap(([r])=>r)}computeLeakingDisposables(e=10,n){let r;if(n)r=n;else{let c=new Map,u=[...this.livingDisposables.values()].filter(p=>p.source!==null&&!this.getRootParent(p,c).isSingleton);if(u.length===0)return;let d=new Set(u.map(p=>p.value));if(r=u.filter(p=>!(p.parent&&d.has(p.parent))),r.length===0)throw new Error("There are cyclic diposable chains!")}if(!r)return;function i(c){function u(p,m){for(;p.length>0&&m.some(h=>typeof h=="string"?h===p[0]:p[0].match(h));)p.shift()}s(u,"removePrefix");let d=c.source.split(`
`).map(p=>p.trim().replace("at ","")).filter(p=>p!=="");return u(d,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),d.reverse()}s(i,"getStackTracePath");let o=new s5;for(let c of r){let u=i(c);for(let d=0;d<=u.length;d++)o.add(u.slice(0,d).join(`
`),c)}r.sort(w0(c=>c.idx,_0));let a="",l=0;for(let c of r.slice(0,e)){l++;let u=i(c),d=[];for(let p=0;p<u.length;p++){let m=u[p];m=`(shared with ${o.get(u.slice(0,p+1).join(`
`)).size}/${r.length} leaks) at ${m}`;let g=o.get(u.slice(0,p).join(`
`)),y=hSe([...g].map(v=>i(v)[p]),v=>v);delete y[u[p]];for(let[v,b]of Object.entries(y))d.unshift(`    - stacktraces of ${b.length} other leaks continue with ${v}`);d.unshift(m)}a+=`


==================== Leaking disposable ${l}/${r.length}: ${c.value.constructor.name} ====================
${d.join(`
`)}
============================================================

`}return r.length>e&&(a+=`


... and ${r.length-e} more leaking disposables

`),{leaks:r,details:a}}};function qpt(t){a5=t}s(qpt,"setDisposableTracker");if(Upt){let t="__is_disposable_tracked__";qpt(new class{trackDisposable(e){let n=new Error("Potentially leaked disposable").stack;setTimeout(()=>{e[t]||console.log(n)},3e3)}setParent(e,n){if(e&&e!==jo.None)try{e[t]=!0}catch{}}markAsDisposed(e){if(e&&e!==jo.None)try{e[t]=!0}catch{}}markAsSingleton(e){}})}function l5(t){return a5?.trackDisposable(t),t}s(l5,"trackDisposable");function c5(t){a5?.markAsDisposed(t)}s(c5,"markAsDisposed");function kre(t,e){a5?.setParent(t,e)}s(kre,"setParentOfDisposable");function Wpt(t,e){if(a5)for(let n of t)a5.setParent(n,e)}s(Wpt,"setParentOfDisposables");function vSe(t){return typeof t=="object"&&t!==null&&typeof t.dispose=="function"&&t.dispose.length===0}s(vSe,"isDisposable");function QO(t){if(wre.is(t)){let e=[];for(let n of t)if(n)try{n.dispose()}catch(r){e.push(r)}if(e.length===1)throw e[0];if(e.length>1)throw new AggregateError(e,"Encountered errors while disposing of store");return Array.isArray(t)?[]:t}else if(t)return t.dispose(),t}s(QO,"dispose");function bSe(...t){let e=Ra(()=>QO(t));return Wpt(t,e),e}s(bSe,"combinedDisposable");function Ra(t){let e=l5({dispose:Tre(()=>{c5(e),t()})});return e}s(Ra,"toDisposable");var Bu=class t{constructor(){this._toDispose=new Set;this._isDisposed=!1;l5(this)}static{s(this,"DisposableStore")}static{this.DISABLE_DISPOSED_WARNING=!1}dispose(){this._isDisposed||(c5(this),this._isDisposed=!0,this.clear())}get isDisposed(){return this._isDisposed}clear(){if(this._toDispose.size!==0)try{QO(this._toDispose)}finally{this._toDispose.clear()}}add(e){if(!e)return e;if(e===this)throw new Error("Cannot register a disposable on itself!");return kre(e,this),this._isDisposed?t.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this._toDispose.add(e),e}delete(e){if(e){if(e===this)throw new Error("Cannot dispose a disposable on itself!");this._toDispose.delete(e),e.dispose()}}deleteAndLeak(e){e&&this._toDispose.has(e)&&(this._toDispose.delete(e),kre(e,null))}},jo=class{constructor(){this._store=new Bu;l5(this),kre(this._store,this)}static{s(this,"Disposable")}static{this.None=Object.freeze({dispose(){}})}dispose(){c5(this),this._store.dispose()}_register(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this._store.add(e)}};var zf=class extends jo{static{s(this,"ChatQuotaService")}constructor(e){super(),this._register(ia(e,n=>{this.processUserInfoQuotaSnapshot(n.userInfo?.raw)}))}get quotaExhausted(){return this._quotaInfo?this._quotaInfo.used>=this._quotaInfo.quota&&!this._quotaInfo.overageEnabled:!1}get overagesEnabled(){return this._quotaInfo?this._quotaInfo.overageEnabled:!1}clearQuota(){this._quotaInfo=void 0}processQuotaHeaders(e){let n=e.get("x-quota-snapshot-premium_models")||e.get("x-quota-snapshot-premium_interactions");if(n)try{let r=new URLSearchParams(n),i=parseInt(r.get("ent")||"0",10),o=parseFloat(r.get("ov")||"0.0"),a=r.get("ovPerm")==="true",l=parseFloat(r.get("rem")||"0.0"),c=r.get("rst"),u;c?u=new Date(c):(u=new Date,u.setMonth(u.getMonth()+1));let d=Math.max(0,i*(1-l/100));this._quotaInfo={quota:i,used:d,overageUsed:o,overageEnabled:a,resetDate:u}}catch(r){console.error("Failed to parse quota header",r)}}processUserInfoQuotaSnapshot(e){!e||!e.quota_snapshots||!e.quota_reset_date||(this._quotaInfo={overageEnabled:e.quota_snapshots.premium_interactions.overage_permitted,overageUsed:e.quota_snapshots.premium_interactions.overage_count,quota:e.quota_snapshots.premium_interactions.entitlement,resetDate:new Date(e.quota_reset_date),used:Math.max(0,e.quota_snapshots.premium_interactions.entitlement*(1-e.quota_snapshots.premium_interactions.percent_remaining/100))})}};f();var ESe=je(require("events"));var OO="CompletionRequested",Tg=class{constructor(e){this.ctx=e}static{s(this,"CompletionNotifier")}#e=new ESe.default;notifyRequest(e,n,r,i,o){return this.#e.emit(OO,{completionId:n,completionState:e,telemetryData:r,cancellationToken:i,options:o})}onRequest(e){let n=Eu(this.ctx,e,`event.${OO}`);return this.#e.on(OO,n),wr.Disposable.create(()=>this.#e.off(OO,n))}};f();var Bre=class extends Error{constructor(n){super(`No instance of ${n.name} has been registered`);this.ctor=n;this.name="UnregisteredContextError",this.code=n.name}static{s(this,"UnregisteredContextError")}},u5=class{constructor(){this.instances=new Map}static{s(this,"Context")}get(e){let n=this.tryGet(e);if(n)return n;throw new Bre(e)}tryGet(e){let n=this.instances.get(e);if(n)return n}set(e,n){if(this.tryGet(e))throw new Error(`An instance of ${e.name} has already been registered. Use forceSet() if you're sure it's a good idea.`);this.assertIsInstance(e,n),this.instances.set(e,n)}forceSet(e,n){this.assertIsInstance(e,n),this.instances.set(e,n)}assertIsInstance(e,n){if(!(n instanceof e)){let r=JSON.stringify(n);throw new Error(`The instance you're trying to register for ${e.name} is not an instance of it (${r}).`)}}};f();f();f();var UO=class t{static{s(this,"FullTextDocument")}constructor(e,n,r,i){this._uri=e,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content}update(e,n){for(let r of e)if(t.isIncremental(r)){let i=wSe(r.range),o=this.offsetAt(i.start),a=this.offsetAt(i.end);this._content=this._content.substring(0,o)+r.text+this._content.substring(a,this._content.length);let l=Math.max(i.start.line,0),c=Math.max(i.end.line,0),u=this._lineOffsets,d=ISe(r.text,!1,o);if(c-l===d.length)for(let m=0,h=d.length;m<h;m++)u[m+l+1]=d[m];else d.length<1e4?u.splice(l+1,c-l,...d):this._lineOffsets=u=u.slice(0,l+1).concat(d,u.slice(c+1));let p=r.text.length-(a-o);if(p!==0)for(let m=l+1+d.length,h=u.length;m<h;m++)u[m]=u[m]+p}else if(t.isFull(r))this._content=r.text,this._lineOffsets=void 0;else throw new Error("Unknown change event received");this._version=n}getLineOffsets(){return this._lineOffsets===void 0&&(this._lineOffsets=ISe(this._content,!0)),this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return{line:0,character:e};for(;r<i;){let a=Math.floor((r+i)/2);n[a]>e?i=a:r=a+1}let o=r-1;return e=this.ensureBeforeEOL(e,n[o]),{line:o,character:e-n[o]}}offsetAt(e){let n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;let r=n[e.line];if(e.character<=0)return r;let i=e.line+1<n.length?n[e.line+1]:this._content.length,o=Math.min(r+e.character,i);return this.ensureBeforeEOL(o,r)}ensureBeforeEOL(e,n){for(;e>n&&TSe(this._content.charCodeAt(e-1));)e--;return e}get lineCount(){return this.getLineOffsets().length}static isIncremental(e){let n=e;return n!=null&&typeof n.text=="string"&&n.range!==void 0&&(n.rangeLength===void 0||typeof n.rangeLength=="number")}static isFull(e){let n=e;return n!=null&&typeof n.text=="string"&&n.range===void 0&&n.rangeLength===void 0}},uv;(function(t){function e(i,o,a,l){return new UO(i,o,a,l)}s(e,"create"),t.create=e;function n(i,o,a){if(i instanceof UO)return i.update(o,a),i;throw new Error("TextDocument.update: document must be created by TextDocument.create")}s(n,"update"),t.update=n;function r(i,o){let a=i.getText(),l=Pre(o.map(Hpt),(d,p)=>{let m=d.range.start.line-p.range.start.line;return m===0?d.range.start.character-p.range.start.character:m}),c=0,u=[];for(let d of l){let p=i.offsetAt(d.range.start);if(p<c)throw new Error("Overlapping edit");p>c&&u.push(a.substring(c,p)),d.newText.length&&u.push(d.newText),c=i.offsetAt(d.range.end)}return u.push(a.substr(c)),u.join("")}s(r,"applyEdits"),t.applyEdits=r})(uv||(uv={}));function Pre(t,e){if(t.length<=1)return t;let n=t.length/2|0,r=t.slice(0,n),i=t.slice(n);Pre(r,e),Pre(i,e);let o=0,a=0,l=0;for(;o<r.length&&a<i.length;)e(r[o],i[a])<=0?t[l++]=r[o++]:t[l++]=i[a++];for(;o<r.length;)t[l++]=r[o++];for(;a<i.length;)t[l++]=i[a++];return t}s(Pre,"mergeSort");function ISe(t,e,n=0){let r=e?[n]:[];for(let i=0;i<t.length;i++){let o=t.charCodeAt(i);TSe(o)&&(o===13&&i+1<t.length&&t.charCodeAt(i+1)===10&&i++,r.push(n+i+1))}return r}s(ISe,"computeLineOffsets");function TSe(t){return t===13||t===10}s(TSe,"isEOL");function wSe(t){let e=t.start,n=t.end;return e.line>n.line||e.line===n.line&&e.character>n.character?{start:n,end:e}:t}s(wSe,"getWellformedRange");function Hpt(t){let e=wSe(t.range);return e!==t.range?{newText:t.newText,range:e}:t}s(Hpt,"getWellformedEdit");f();var _Se;(function(t){function e(n){return typeof n=="string"}s(e,"is"),t.is=e})(_Se||(_Se={}));var Dre;(function(t){function e(n){return typeof n=="string"}s(e,"is"),t.is=e})(Dre||(Dre={}));var SSe;(function(t){t.MIN_VALUE=-2147483648,t.MAX_VALUE=2147483647;function e(n){return typeof n=="number"&&t.MIN_VALUE<=n&&n<=t.MAX_VALUE}s(e,"is"),t.is=e})(SSe||(SSe={}));var qO;(function(t){t.MIN_VALUE=0,t.MAX_VALUE=2147483647;function e(n){return typeof n=="number"&&t.MIN_VALUE<=n&&n<=t.MAX_VALUE}s(e,"is"),t.is=e})(qO||(qO={}));var Yc;(function(t){function e(r,i){return r===Number.MAX_VALUE&&(r=qO.MAX_VALUE),i===Number.MAX_VALUE&&(i=qO.MAX_VALUE),{line:r,character:i}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.objectLiteral(i)&&Ve.uinteger(i.line)&&Ve.uinteger(i.character)}s(n,"is"),t.is=n})(Yc||(Yc={}));var es;(function(t){function e(r,i,o,a){if(Ve.uinteger(r)&&Ve.uinteger(i)&&Ve.uinteger(o)&&Ve.uinteger(a))return{start:Yc.create(r,i),end:Yc.create(o,a)};if(Yc.is(r)&&Yc.is(i))return{start:r,end:i};throw new Error(`Range#create called with invalid arguments[${r}, ${i}, ${o}, ${a}]`)}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.objectLiteral(i)&&Yc.is(i.start)&&Yc.is(i.end)}s(n,"is"),t.is=n})(es||(es={}));var WO;(function(t){function e(r,i){return{uri:r,range:i}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.objectLiteral(i)&&es.is(i.range)&&(Ve.string(i.uri)||Ve.undefined(i.uri))}s(n,"is"),t.is=n})(WO||(WO={}));var RSe;(function(t){function e(r,i,o,a){return{targetUri:r,targetRange:i,targetSelectionRange:o,originSelectionRange:a}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.objectLiteral(i)&&es.is(i.targetRange)&&Ve.string(i.targetUri)&&es.is(i.targetSelectionRange)&&(es.is(i.originSelectionRange)||Ve.undefined(i.originSelectionRange))}s(n,"is"),t.is=n})(RSe||(RSe={}));var Nre;(function(t){function e(r,i,o,a){return{red:r,green:i,blue:o,alpha:a}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.objectLiteral(i)&&Ve.numberRange(i.red,0,1)&&Ve.numberRange(i.green,0,1)&&Ve.numberRange(i.blue,0,1)&&Ve.numberRange(i.alpha,0,1)}s(n,"is"),t.is=n})(Nre||(Nre={}));var kSe;(function(t){function e(r,i){return{range:r,color:i}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.objectLiteral(i)&&es.is(i.range)&&Nre.is(i.color)}s(n,"is"),t.is=n})(kSe||(kSe={}));var BSe;(function(t){function e(r,i,o){return{label:r,textEdit:i,additionalTextEdits:o}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.objectLiteral(i)&&Ve.string(i.label)&&(Ve.undefined(i.textEdit)||f5.is(i))&&(Ve.undefined(i.additionalTextEdits)||Ve.typedArray(i.additionalTextEdits,f5.is))}s(n,"is"),t.is=n})(BSe||(BSe={}));var PSe;(function(t){t.Comment="comment",t.Imports="imports",t.Region="region"})(PSe||(PSe={}));var DSe;(function(t){function e(r,i,o,a,l,c){let u={startLine:r,endLine:i};return Ve.defined(o)&&(u.startCharacter=o),Ve.defined(a)&&(u.endCharacter=a),Ve.defined(l)&&(u.kind=l),Ve.defined(c)&&(u.collapsedText=c),u}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.objectLiteral(i)&&Ve.uinteger(i.startLine)&&Ve.uinteger(i.startLine)&&(Ve.undefined(i.startCharacter)||Ve.uinteger(i.startCharacter))&&(Ve.undefined(i.endCharacter)||Ve.uinteger(i.endCharacter))&&(Ve.undefined(i.kind)||Ve.string(i.kind))}s(n,"is"),t.is=n})(DSe||(DSe={}));var Lre;(function(t){function e(r,i){return{location:r,message:i}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.defined(i)&&WO.is(i.location)&&Ve.string(i.message)}s(n,"is"),t.is=n})(Lre||(Lre={}));var NSe;(function(t){t.Error=1,t.Warning=2,t.Information=3,t.Hint=4})(NSe||(NSe={}));var LSe;(function(t){t.Unnecessary=1,t.Deprecated=2})(LSe||(LSe={}));var FSe;(function(t){function e(n){let r=n;return Ve.objectLiteral(r)&&Ve.string(r.href)}s(e,"is"),t.is=e})(FSe||(FSe={}));var HO;(function(t){function e(r,i,o,a,l,c){let u={range:r,message:i};return Ve.defined(o)&&(u.severity=o),Ve.defined(a)&&(u.code=a),Ve.defined(l)&&(u.source=l),Ve.defined(c)&&(u.relatedInformation=c),u}s(e,"create"),t.create=e;function n(r){var i;let o=r;return Ve.defined(o)&&es.is(o.range)&&Ve.string(o.message)&&(Ve.number(o.severity)||Ve.undefined(o.severity))&&(Ve.integer(o.code)||Ve.string(o.code)||Ve.undefined(o.code))&&(Ve.undefined(o.codeDescription)||Ve.string((i=o.codeDescription)===null||i===void 0?void 0:i.href))&&(Ve.string(o.source)||Ve.undefined(o.source))&&(Ve.undefined(o.relatedInformation)||Ve.typedArray(o.relatedInformation,Lre.is))}s(n,"is"),t.is=n})(HO||(HO={}));var d5;(function(t){function e(r,i,...o){let a={title:r,command:i};return Ve.defined(o)&&o.length>0&&(a.arguments=o),a}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.defined(i)&&Ve.string(i.title)&&Ve.string(i.command)}s(n,"is"),t.is=n})(d5||(d5={}));var f5;(function(t){function e(o,a){return{range:o,newText:a}}s(e,"replace"),t.replace=e;function n(o,a){return{range:{start:o,end:o},newText:a}}s(n,"insert"),t.insert=n;function r(o){return{range:o,newText:""}}s(r,"del"),t.del=r;function i(o){let a=o;return Ve.objectLiteral(a)&&Ve.string(a.newText)&&es.is(a.range)}s(i,"is"),t.is=i})(f5||(f5={}));var Fre;(function(t){function e(r,i,o){let a={label:r};return i!==void 0&&(a.needsConfirmation=i),o!==void 0&&(a.description=o),a}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.objectLiteral(i)&&Ve.string(i.label)&&(Ve.boolean(i.needsConfirmation)||i.needsConfirmation===void 0)&&(Ve.string(i.description)||i.description===void 0)}s(n,"is"),t.is=n})(Fre||(Fre={}));var p5;(function(t){function e(n){let r=n;return Ve.string(r)}s(e,"is"),t.is=e})(p5||(p5={}));var MSe;(function(t){function e(o,a,l){return{range:o,newText:a,annotationId:l}}s(e,"replace"),t.replace=e;function n(o,a,l){return{range:{start:o,end:o},newText:a,annotationId:l}}s(n,"insert"),t.insert=n;function r(o,a){return{range:o,newText:"",annotationId:a}}s(r,"del"),t.del=r;function i(o){let a=o;return f5.is(a)&&(Fre.is(a.annotationId)||p5.is(a.annotationId))}s(i,"is"),t.is=i})(MSe||(MSe={}));var Mre;(function(t){function e(r,i){return{textDocument:r,edits:i}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.defined(i)&&Wre.is(i.textDocument)&&Array.isArray(i.edits)}s(n,"is"),t.is=n})(Mre||(Mre={}));var Qre;(function(t){function e(r,i,o){let a={kind:"create",uri:r};return i!==void 0&&(i.overwrite!==void 0||i.ignoreIfExists!==void 0)&&(a.options=i),o!==void 0&&(a.annotationId=o),a}s(e,"create"),t.create=e;function n(r){let i=r;return i&&i.kind==="create"&&Ve.string(i.uri)&&(i.options===void 0||(i.options.overwrite===void 0||Ve.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||Ve.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||p5.is(i.annotationId))}s(n,"is"),t.is=n})(Qre||(Qre={}));var Ore;(function(t){function e(r,i,o,a){let l={kind:"rename",oldUri:r,newUri:i};return o!==void 0&&(o.overwrite!==void 0||o.ignoreIfExists!==void 0)&&(l.options=o),a!==void 0&&(l.annotationId=a),l}s(e,"create"),t.create=e;function n(r){let i=r;return i&&i.kind==="rename"&&Ve.string(i.oldUri)&&Ve.string(i.newUri)&&(i.options===void 0||(i.options.overwrite===void 0||Ve.boolean(i.options.overwrite))&&(i.options.ignoreIfExists===void 0||Ve.boolean(i.options.ignoreIfExists)))&&(i.annotationId===void 0||p5.is(i.annotationId))}s(n,"is"),t.is=n})(Ore||(Ore={}));var Ure;(function(t){function e(r,i,o){let a={kind:"delete",uri:r};return i!==void 0&&(i.recursive!==void 0||i.ignoreIfNotExists!==void 0)&&(a.options=i),o!==void 0&&(a.annotationId=o),a}s(e,"create"),t.create=e;function n(r){let i=r;return i&&i.kind==="delete"&&Ve.string(i.uri)&&(i.options===void 0||(i.options.recursive===void 0||Ve.boolean(i.options.recursive))&&(i.options.ignoreIfNotExists===void 0||Ve.boolean(i.options.ignoreIfNotExists)))&&(i.annotationId===void 0||p5.is(i.annotationId))}s(n,"is"),t.is=n})(Ure||(Ure={}));var qre;(function(t){function e(n){let r=n;return r&&(r.changes!==void 0||r.documentChanges!==void 0)&&(r.documentChanges===void 0||r.documentChanges.every(i=>Ve.string(i.kind)?Qre.is(i)||Ore.is(i)||Ure.is(i):Mre.is(i)))}s(e,"is"),t.is=e})(qre||(qre={}));var QSe;(function(t){function e(r){return{uri:r}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.defined(i)&&Ve.string(i.uri)}s(n,"is"),t.is=n})(QSe||(QSe={}));var OSe;(function(t){function e(r,i){return{uri:r,version:i}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.defined(i)&&Ve.string(i.uri)&&Ve.integer(i.version)}s(n,"is"),t.is=n})(OSe||(OSe={}));var Wre;(function(t){function e(r,i){return{uri:r,version:i}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.defined(i)&&Ve.string(i.uri)&&(i.version===null||Ve.integer(i.version))}s(n,"is"),t.is=n})(Wre||(Wre={}));var USe;(function(t){function e(r,i,o,a){return{uri:r,languageId:i,version:o,text:a}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.defined(i)&&Ve.string(i.uri)&&Ve.string(i.languageId)&&Ve.integer(i.version)&&Ve.string(i.text)}s(n,"is"),t.is=n})(USe||(USe={}));var Hre;(function(t){t.PlainText="plaintext",t.Markdown="markdown";function e(n){let r=n;return r===t.PlainText||r===t.Markdown}s(e,"is"),t.is=e})(Hre||(Hre={}));var J8;(function(t){function e(n){let r=n;return Ve.objectLiteral(n)&&Hre.is(r.kind)&&Ve.string(r.value)}s(e,"is"),t.is=e})(J8||(J8={}));var qSe;(function(t){t.Text=1,t.Method=2,t.Function=3,t.Constructor=4,t.Field=5,t.Variable=6,t.Class=7,t.Interface=8,t.Module=9,t.Property=10,t.Unit=11,t.Value=12,t.Enum=13,t.Keyword=14,t.Snippet=15,t.Color=16,t.File=17,t.Reference=18,t.Folder=19,t.EnumMember=20,t.Constant=21,t.Struct=22,t.Event=23,t.Operator=24,t.TypeParameter=25})(qSe||(qSe={}));var WSe;(function(t){t.PlainText=1,t.Snippet=2})(WSe||(WSe={}));var HSe;(function(t){t.Deprecated=1})(HSe||(HSe={}));var GSe;(function(t){function e(r,i,o){return{newText:r,insert:i,replace:o}}s(e,"create"),t.create=e;function n(r){let i=r;return i&&Ve.string(i.newText)&&es.is(i.insert)&&es.is(i.replace)}s(n,"is"),t.is=n})(GSe||(GSe={}));var jSe;(function(t){t.asIs=1,t.adjustIndentation=2})(jSe||(jSe={}));var VSe;(function(t){function e(n){let r=n;return r&&(Ve.string(r.detail)||r.detail===void 0)&&(Ve.string(r.description)||r.description===void 0)}s(e,"is"),t.is=e})(VSe||(VSe={}));var $Se;(function(t){function e(n){return{label:n}}s(e,"create"),t.create=e})($Se||($Se={}));var zSe;(function(t){function e(n,r){return{items:n||[],isIncomplete:!!r}}s(e,"create"),t.create=e})(zSe||(zSe={}));var GO;(function(t){function e(r){return r.replace(/[\\`*_{}[\]()#+\-.!]/g,"\\$&")}s(e,"fromPlainText"),t.fromPlainText=e;function n(r){let i=r;return Ve.string(i)||Ve.objectLiteral(i)&&Ve.string(i.language)&&Ve.string(i.value)}s(n,"is"),t.is=n})(GO||(GO={}));var YSe;(function(t){function e(n){let r=n;return!!r&&Ve.objectLiteral(r)&&(J8.is(r.contents)||GO.is(r.contents)||Ve.typedArray(r.contents,GO.is))&&(n.range===void 0||es.is(n.range))}s(e,"is"),t.is=e})(YSe||(YSe={}));var KSe;(function(t){function e(n,r){return r?{label:n,documentation:r}:{label:n}}s(e,"create"),t.create=e})(KSe||(KSe={}));var JSe;(function(t){function e(n,r,...i){let o={label:n};return Ve.defined(r)&&(o.documentation=r),Ve.defined(i)?o.parameters=i:o.parameters=[],o}s(e,"create"),t.create=e})(JSe||(JSe={}));var XSe;(function(t){t.Text=1,t.Read=2,t.Write=3})(XSe||(XSe={}));var ZSe;(function(t){function e(n,r){let i={range:n};return Ve.number(r)&&(i.kind=r),i}s(e,"create"),t.create=e})(ZSe||(ZSe={}));var e5e;(function(t){t.File=1,t.Module=2,t.Namespace=3,t.Package=4,t.Class=5,t.Method=6,t.Property=7,t.Field=8,t.Constructor=9,t.Enum=10,t.Interface=11,t.Function=12,t.Variable=13,t.Constant=14,t.String=15,t.Number=16,t.Boolean=17,t.Array=18,t.Object=19,t.Key=20,t.Null=21,t.EnumMember=22,t.Struct=23,t.Event=24,t.Operator=25,t.TypeParameter=26})(e5e||(e5e={}));var t5e;(function(t){t.Deprecated=1})(t5e||(t5e={}));var n5e;(function(t){function e(n,r,i,o,a){let l={name:n,kind:r,location:{uri:o,range:i}};return a&&(l.containerName=a),l}s(e,"create"),t.create=e})(n5e||(n5e={}));var r5e;(function(t){function e(n,r,i,o){return o!==void 0?{name:n,kind:r,location:{uri:i,range:o}}:{name:n,kind:r,location:{uri:i}}}s(e,"create"),t.create=e})(r5e||(r5e={}));var i5e;(function(t){function e(r,i,o,a,l,c){let u={name:r,detail:i,kind:o,range:a,selectionRange:l};return c!==void 0&&(u.children=c),u}s(e,"create"),t.create=e;function n(r){let i=r;return i&&Ve.string(i.name)&&Ve.number(i.kind)&&es.is(i.range)&&es.is(i.selectionRange)&&(i.detail===void 0||Ve.string(i.detail))&&(i.deprecated===void 0||Ve.boolean(i.deprecated))&&(i.children===void 0||Array.isArray(i.children))&&(i.tags===void 0||Array.isArray(i.tags))}s(n,"is"),t.is=n})(i5e||(i5e={}));var o5e;(function(t){t.Empty="",t.QuickFix="quickfix",t.Refactor="refactor",t.RefactorExtract="refactor.extract",t.RefactorInline="refactor.inline",t.RefactorRewrite="refactor.rewrite",t.Source="source",t.SourceOrganizeImports="source.organizeImports",t.SourceFixAll="source.fixAll"})(o5e||(o5e={}));var jO;(function(t){t.Invoked=1,t.Automatic=2})(jO||(jO={}));var s5e;(function(t){function e(r,i,o){let a={diagnostics:r};return i!=null&&(a.only=i),o!=null&&(a.triggerKind=o),a}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.defined(i)&&Ve.typedArray(i.diagnostics,HO.is)&&(i.only===void 0||Ve.typedArray(i.only,Ve.string))&&(i.triggerKind===void 0||i.triggerKind===jO.Invoked||i.triggerKind===jO.Automatic)}s(n,"is"),t.is=n})(s5e||(s5e={}));var a5e;(function(t){function e(r,i,o){let a={title:r},l=!0;return typeof i=="string"?(l=!1,a.kind=i):d5.is(i)?a.command=i:a.edit=i,l&&o!==void 0&&(a.kind=o),a}s(e,"create"),t.create=e;function n(r){let i=r;return i&&Ve.string(i.title)&&(i.diagnostics===void 0||Ve.typedArray(i.diagnostics,HO.is))&&(i.kind===void 0||Ve.string(i.kind))&&(i.edit!==void 0||i.command!==void 0)&&(i.command===void 0||d5.is(i.command))&&(i.isPreferred===void 0||Ve.boolean(i.isPreferred))&&(i.edit===void 0||qre.is(i.edit))}s(n,"is"),t.is=n})(a5e||(a5e={}));var l5e;(function(t){function e(r,i){let o={range:r};return Ve.defined(i)&&(o.data=i),o}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.defined(i)&&es.is(i.range)&&(Ve.undefined(i.command)||d5.is(i.command))}s(n,"is"),t.is=n})(l5e||(l5e={}));var c5e;(function(t){function e(r,i){return{tabSize:r,insertSpaces:i}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.defined(i)&&Ve.uinteger(i.tabSize)&&Ve.boolean(i.insertSpaces)}s(n,"is"),t.is=n})(c5e||(c5e={}));var u5e;(function(t){function e(r,i,o){return{range:r,target:i,data:o}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.defined(i)&&es.is(i.range)&&(Ve.undefined(i.target)||Ve.string(i.target))}s(n,"is"),t.is=n})(u5e||(u5e={}));var d5e;(function(t){function e(r,i){return{range:r,parent:i}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.objectLiteral(i)&&es.is(i.range)&&(i.parent===void 0||t.is(i.parent))}s(n,"is"),t.is=n})(d5e||(d5e={}));var f5e;(function(t){t.namespace="namespace",t.type="type",t.class="class",t.enum="enum",t.interface="interface",t.struct="struct",t.typeParameter="typeParameter",t.parameter="parameter",t.variable="variable",t.property="property",t.enumMember="enumMember",t.event="event",t.function="function",t.method="method",t.macro="macro",t.keyword="keyword",t.modifier="modifier",t.comment="comment",t.string="string",t.number="number",t.regexp="regexp",t.operator="operator",t.decorator="decorator"})(f5e||(f5e={}));var p5e;(function(t){t.declaration="declaration",t.definition="definition",t.readonly="readonly",t.static="static",t.deprecated="deprecated",t.abstract="abstract",t.async="async",t.modification="modification",t.documentation="documentation",t.defaultLibrary="defaultLibrary"})(p5e||(p5e={}));var m5e;(function(t){function e(n){let r=n;return Ve.objectLiteral(r)&&(r.resultId===void 0||typeof r.resultId=="string")&&Array.isArray(r.data)&&(r.data.length===0||typeof r.data[0]=="number")}s(e,"is"),t.is=e})(m5e||(m5e={}));var h5e;(function(t){function e(r,i){return{range:r,text:i}}s(e,"create"),t.create=e;function n(r){let i=r;return i!=null&&es.is(i.range)&&Ve.string(i.text)}s(n,"is"),t.is=n})(h5e||(h5e={}));var g5e;(function(t){function e(r,i,o){return{range:r,variableName:i,caseSensitiveLookup:o}}s(e,"create"),t.create=e;function n(r){let i=r;return i!=null&&es.is(i.range)&&Ve.boolean(i.caseSensitiveLookup)&&(Ve.string(i.variableName)||i.variableName===void 0)}s(n,"is"),t.is=n})(g5e||(g5e={}));var A5e;(function(t){function e(r,i){return{range:r,expression:i}}s(e,"create"),t.create=e;function n(r){let i=r;return i!=null&&es.is(i.range)&&(Ve.string(i.expression)||i.expression===void 0)}s(n,"is"),t.is=n})(A5e||(A5e={}));var y5e;(function(t){function e(r,i){return{frameId:r,stoppedLocation:i}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.defined(i)&&es.is(r.stoppedLocation)}s(n,"is"),t.is=n})(y5e||(y5e={}));var Gre;(function(t){t.Type=1,t.Parameter=2;function e(n){return n===1||n===2}s(e,"is"),t.is=e})(Gre||(Gre={}));var jre;(function(t){function e(r){return{value:r}}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.objectLiteral(i)&&(i.tooltip===void 0||Ve.string(i.tooltip)||J8.is(i.tooltip))&&(i.location===void 0||WO.is(i.location))&&(i.command===void 0||d5.is(i.command))}s(n,"is"),t.is=n})(jre||(jre={}));var C5e;(function(t){function e(r,i,o){let a={position:r,label:i};return o!==void 0&&(a.kind=o),a}s(e,"create"),t.create=e;function n(r){let i=r;return Ve.objectLiteral(i)&&Yc.is(i.position)&&(Ve.string(i.label)||Ve.typedArray(i.label,jre.is))&&(i.kind===void 0||Gre.is(i.kind))&&i.textEdits===void 0||Ve.typedArray(i.textEdits,f5.is)&&(i.tooltip===void 0||Ve.string(i.tooltip)||J8.is(i.tooltip))&&(i.paddingLeft===void 0||Ve.boolean(i.paddingLeft))&&(i.paddingRight===void 0||Ve.boolean(i.paddingRight))}s(n,"is"),t.is=n})(C5e||(C5e={}));var x5e;(function(t){function e(n){return{kind:"snippet",value:n}}s(e,"createSnippet"),t.createSnippet=e})(x5e||(x5e={}));var v5e;(function(t){function e(n,r,i,o){return{insertText:n,filterText:r,range:i,command:o}}s(e,"create"),t.create=e})(v5e||(v5e={}));var b5e;(function(t){function e(n){return{items:n}}s(e,"create"),t.create=e})(b5e||(b5e={}));var E5e;(function(t){t.Invoked=0,t.Automatic=1})(E5e||(E5e={}));var I5e;(function(t){function e(n,r){return{range:n,text:r}}s(e,"create"),t.create=e})(I5e||(I5e={}));var T5e;(function(t){function e(n,r){return{triggerKind:n,selectedCompletionInfo:r}}s(e,"create"),t.create=e})(T5e||(T5e={}));var w5e;(function(t){function e(n){let r=n;return Ve.objectLiteral(r)&&Dre.is(r.uri)&&Ve.string(r.name)}s(e,"is"),t.is=e})(w5e||(w5e={}));var _5e;(function(t){function e(o,a,l,c){return new Vre(o,a,l,c)}s(e,"create"),t.create=e;function n(o){let a=o;return!!(Ve.defined(a)&&Ve.string(a.uri)&&(Ve.undefined(a.languageId)||Ve.string(a.languageId))&&Ve.uinteger(a.lineCount)&&Ve.func(a.getText)&&Ve.func(a.positionAt)&&Ve.func(a.offsetAt))}s(n,"is"),t.is=n;function r(o,a){let l=o.getText(),c=i(a,(d,p)=>{let m=d.range.start.line-p.range.start.line;return m===0?d.range.start.character-p.range.start.character:m}),u=l.length;for(let d=c.length-1;d>=0;d--){let p=c[d],m=o.offsetAt(p.range.start),h=o.offsetAt(p.range.end);if(h<=u)l=l.substring(0,m)+p.newText+l.substring(h,l.length);else throw new Error("Overlapping edit");u=m}return l}s(r,"applyEdits"),t.applyEdits=r;function i(o,a){if(o.length<=1)return o;let l=o.length/2|0,c=o.slice(0,l),u=o.slice(l);i(c,a),i(u,a);let d=0,p=0,m=0;for(;d<c.length&&p<u.length;)a(c[d],u[p])<=0?o[m++]=c[d++]:o[m++]=u[p++];for(;d<c.length;)o[m++]=c[d++];for(;p<u.length;)o[m++]=u[p++];return o}s(i,"mergeSort")})(_5e||(_5e={}));var Vre=class{static{s(this,"FullTextDocument")}constructor(e,n,r,i){this._uri=e,this._languageId=n,this._version=r,this._content=i,this._lineOffsets=void 0}get uri(){return this._uri}get languageId(){return this._languageId}get version(){return this._version}getText(e){if(e){let n=this.offsetAt(e.start),r=this.offsetAt(e.end);return this._content.substring(n,r)}return this._content}update(e,n){this._content=e.text,this._version=n,this._lineOffsets=void 0}getLineOffsets(){if(this._lineOffsets===void 0){let e=[],n=this._content,r=!0;for(let i=0;i<n.length;i++){r&&(e.push(i),r=!1);let o=n.charAt(i);r=o==="\r"||o===`
`,o==="\r"&&i+1<n.length&&n.charAt(i+1)===`
`&&i++}r&&n.length>0&&e.push(n.length),this._lineOffsets=e}return this._lineOffsets}positionAt(e){e=Math.max(Math.min(e,this._content.length),0);let n=this.getLineOffsets(),r=0,i=n.length;if(i===0)return Yc.create(0,e);for(;r<i;){let a=Math.floor((r+i)/2);n[a]>e?i=a:r=a+1}let o=r-1;return Yc.create(o,e-n[o])}offsetAt(e){let n=this.getLineOffsets();if(e.line>=n.length)return this._content.length;if(e.line<0)return 0;let r=n[e.line],i=e.line+1<n.length?n[e.line+1]:this._content.length;return Math.max(Math.min(r+e.character,i),r)}get lineCount(){return this.getLineOffsets().length}},Ve;(function(t){let e=Object.prototype.toString;function n(h){return typeof h<"u"}s(n,"defined"),t.defined=n;function r(h){return typeof h>"u"}s(r,"undefined"),t.undefined=r;function i(h){return h===!0||h===!1}s(i,"boolean"),t.boolean=i;function o(h){return e.call(h)==="[object String]"}s(o,"string"),t.string=o;function a(h){return e.call(h)==="[object Number]"}s(a,"number"),t.number=a;function l(h,g,y){return e.call(h)==="[object Number]"&&g<=h&&h<=y}s(l,"numberRange"),t.numberRange=l;function c(h){return e.call(h)==="[object Number]"&&-2147483648<=h&&h<=2147483647}s(c,"integer"),t.integer=c;function u(h){return e.call(h)==="[object Number]"&&0<=h&&h<=2147483647}s(u,"uinteger"),t.uinteger=u;function d(h){return e.call(h)==="[object Function]"}s(d,"func"),t.func=d;function p(h){return h!==null&&typeof h=="object"}s(p,"objectLiteral"),t.objectLiteral=p;function m(h,g){return Array.isArray(h)&&h.every(g)}s(m,"typedArray"),t.typedArray=m})(Ve||(Ve={}));var Mo=class{static{s(this,"LocationFactory")}static{this.range=es.create.bind(es)}static{this.position=Yc.create.bind(Yc)}},M1=class t{constructor(e,n,r){this.uri=e;this._textDocument=n;this.detectedLanguageId=r}static{s(this,"CopilotTextDocument")}static withChanges(e,n,r){let i=uv.create(e.clientUri,e.clientLanguageId,r,e.getText());return uv.update(i,n,r),new t(e.uri,i,e.detectedLanguageId)}applyEdits(e){let n=uv.create(this.clientUri,this.clientLanguageId,this.version,this.getText());return uv.update(n,e.map(r=>({text:r.newText,range:r.range})),this.version),new t(this.uri,n,this.detectedLanguageId)}static create(e,n,r,i,o=WS({uri:e,languageId:n})){return new t(mc(e),uv.create(e,n,r,i),o)}get clientUri(){return this._textDocument.uri}get clientLanguageId(){return this._textDocument.languageId}get languageId(){return this._textDocument.languageId}get version(){return this._textDocument.version}get lineCount(){return this._textDocument.lineCount}getText(e){return this._textDocument.getText(e)}positionAt(e){return this._textDocument.positionAt(e)}offsetAt(e){return this._textDocument.offsetAt(e)}lineAt(e){let n=typeof e=="number"?e:e.line;if(n<0||n>=this.lineCount)throw new RangeError("Illegal value for lineNumber");let r=es.create(n,0,n+1,0),i=this.getText(r).replace(/\r\n$|\r$|\n$/g,""),o=es.create(Yc.create(n,0),Yc.create(n,i.length)),a=i.trim().length===0;return{text:i,range:o,isEmptyOrWhitespace:a}}};f();f();f();f();var X8={isBlocked:!1,reason:"VALID_FILE"},VO={isBlocked:!1,reason:"NO_MATCHING_POLICY"},S5e={isBlocked:!0,reason:"POLICY_ERROR",message:"Copilot is disabled because we could not fetch the repository policy"},r2={all:"all",repo:"repo"},Q1=new Tt("contentExclusion");f();f();var $O=class{static{s(this,"PolicyEvaluator")}};f();f();f();var R5e=new Tt("repository"),i2=class t{constructor(){this.data={}}static{s(this,"GitConfigData")}getKeys(){return Object.keys(this.data)}getEntries(){return Object.entries(this.data)}get(e){let n=this.getAll(e);return n?n[n.length-1]:void 0}getAll(e){return this.data[this.normalizeKey(e)]}add(e,n){e in this.data||(this.data[e]=[]),this.data[e].push(n)}getSectionValues(e,n){let r=`${e}.`.toLowerCase(),i=`.${n}`.toLowerCase();return Object.keys(this.data).filter(o=>o.startsWith(r)&&o.endsWith(i)).map(o=>o.slice(r.length,-i.length))}concat(e){return this.getEntries().concat(e.getEntries()).reduce((n,[r,i])=>(i.forEach(o=>n.add(r,o)),n),new t)}normalizeKey(e){let n=e.split(".");return n[0]=n[0].toLowerCase(),n[n.length-1]=n[n.length-1].toLowerCase(),n.join(".")}},km=class{static{s(this,"GitConfigLoader")}},zO=class extends km{constructor(n){super();this.loaders=n}static{s(this,"GitFallbackConfigLoader")}async getConfig(n,r){for(let i of this.loaders){let o=await i.getConfig(n,r);if(o)return o}}};f();var k5e=require("os");var YO=class{constructor(e){this.url=e;this.isUrl()?this.parseUrl():this.tryParseSSHString()||(this._scheme="file")}static{s(this,"GitRemoteUrl")}get scheme(){return this._scheme}get authority(){return this._authority}get hostname(){return this._hostname}get path(){return this._path}isInvalid(){return this._error!==void 0}isRemote(){return this.scheme!=="file"&&this.hostname!==void 0}isGitHub(){return this.isRemote()&&/(?:^|\.)(?:github\.com|ghe\.com)$/i.test(this.hostname??"")}isADO(){return this.isRemote()&&/(?:^|\.)(?:visualstudio\.com|azure\.com)$/i.test(this.hostname??"")}getUrlForApi(){if(!this.isRemote())return null;if(this.isUrl()&&!this.isInvalid())return Wx.from({scheme:this.scheme,authority:this.authority.replace(/^[^@]+@/,""),path:this.path}).toString();if(this.scheme=="ssh"&&this.isADO()){let e=this.url.indexOf(":");return this.url.substring(0,e+1)+this.path}return this.url}isUrl(){return/[A-Za-z0-9][A-Za-z0-9]+:\/\//.test(this.url)}parseUrl(){let e;try{e=Wx.parse(this.url)}catch(n){this._error=n;return}this._scheme=e.scheme,this.setAuthority(e.authority),this.setPath(e.path)}setAuthority(e){this._authority=e;let n=e.replace(/^[^@]+@/,"").replace(/:\d*$/,"");n&&(this._hostname=n)}tryParseSSHString(){let e=/^(?<host>[^:/\\[]*(?:\[[^/\\\]]*\])?):/.exec(this.url);if(e&&((0,k5e.platform)()!=="win32"||(e.groups?.host?.length??0)>1)){let n=e.groups?.host??"";return this._scheme="ssh",this.setAuthority(n),this.setPath(this.url.substring(n.length+1)),!0}return!1}setPath(e){if(this.isADO())try{this._path=decodeURIComponent(e);return}catch{}this._path=e}};var KO=class{static{s(this,"GitRemoteResolver")}async resolveRemote(e,n){let r=await e.get(km).getConfig(e,n);if(!r)return;let i=this.getRemotes(r),o=i.filter(a=>a.url.isGitHub());if(o.length)return o.find(a=>a.name==="origin")?.url??o[0].url;if(i.length)return i.find(a=>a.name==="origin")?.url??i[0].url}getRemotes(e){let n=this.getInsteadOfRules(e);return e.getSectionValues("remote","url").map(r=>({name:r,url:new YO(this.applyInsteadOfRules(n,e.get(`remote.${r}.url`)??""))})).filter(r=>r.url.isRemote())}applyInsteadOfRules(e,n){for(let r of e)if(n.startsWith(r.insteadOf))return r.base+n.slice(r.insteadOf.length);return n}getInsteadOfRules(e){return e.getSectionValues("url","insteadof").map(n=>({base:n,insteadOf:e.get(`url.${n}.insteadof`)})).sort((n,r)=>r.base.length-n.base.length)}};var Gpt=100,$re=class{constructor(e,n){this.baseFolder=e;this.remote=n;this.setNWO()}static{s(this,"GitRepository")}get tenant(){return this._tenant}get owner(){return this._owner}get name(){return this._name}get adoOrganization(){return this._adoOrganization}isGitHub(){return this.remote?.isGitHub()??!1}isADO(){return this.remote?.isADO()??!1}setNWO(){let e=this.remote?.path?.replace(/^\//,"").split("/");if(this.isGitHub()){this._owner=e?.[0],this._name=e?.[1]?.replace(/\.git$/,"");let n=/^(?<tenant>[^.]+)\.ghe\.com$/.exec(this.remote?.hostname??"");n&&(this._tenant=n.groups?.tenant)}else if(this.isADO()&&e?.length===4){if(this.remote?.scheme==="ssh"){this._adoOrganization=e?.[1],this._owner=e?.[2],this._name=e?.[3];return}let n=/(?:(?<org>[^.]+)\.)?visualstudio\.com$/.exec(this.remote?.hostname??"");n?(this._adoOrganization=n.groups?.org,this._owner=e?.[1],this._name=e?.[3]):(this._adoOrganization=e?.[0],this._owner=e?.[1],this._name=e?.[3])}}},O1=class t{constructor(e){this.ctx=e;this.remoteResolver=new KO;this.cache=new Kn(Gpt)}static{s(this,"RepositoryManager")}async getRepo({uri:e}){let n,r=[];do{if(this.cache.has(e.toString())){let o=this.cache.get(e);return this.updateCache(r,o),o}r.push(e.toString());let i=await this.tryGetRepoForFolder(e);if(i)return this.updateCache(r,i),i;n=e,e=p0(e)}while(e!==n);this.updateCache(r,void 0)}updateCache(e,n){e.forEach(r=>this.cache.set(r,n))}async tryGetRepoForFolder(e){return await this.isBaseRepoFolder(e)?new $re(typeof e=="string"?{uri:e}:e,await this.repoUrl(e)):void 0}async isBaseRepoFolder(e){return await t.getRepoConfigLocation(this.ctx,e)!==void 0}async repoUrl(e){return await this.remoteResolver.resolveRemote(this.ctx,e)}static async getRepoConfigLocation(e,n){try{let r=e.get(po),i=ko(n,".git");if((await r.stat(i)).type&1)return await this.getConfigLocationForGitfile(r,n,i);let a=ko(i,"config");return await r.stat(a),a}catch{return}}static async getConfigLocationForGitfile(e,n,r){let o=(await e.readFileString(r)).match(/^gitdir:\s+(.+)$/m);if(!o)return;let a=bI(n,o[1]),l=ko(a,"config");if(await this.tryStat(e,l)!==void 0)return l;let c=ko(a,"config.worktree");if(await this.tryStat(e,c)!==void 0)return c;let u=ko(a,"commondir");a=bI(a,(await e.readFileString(u)).trimEnd());let d=ko(a,"config");return await e.stat(d),d}static async tryStat(e,n){try{return await e.stat(n)}catch{return}}};f();var B5e=s((t,e)=>{if($x.Check(t,e))return e;let n=`Typebox schema validation failed:
${[...$x.Errors(t,e)].map(r=>`${r.path} ${r.message}`).join(`
`)}`;throw new Error(n)},"assertShape");f();f();f();var XO=new WeakMap;function ZO(t,e){if(t==null||typeof t!="object")return String(t);let n,r="",i=0,o=Object.prototype.toString.call(t);if(o!=="[object RegExp]"&&o!=="[object Date]"&&XO.has(t))return XO.get(t);switch(XO.set(t,"~"+ ++e),o){case"[object Set]":n=Array.from(t);case"[object Array]":for(n||(n=t),r+="a";i<n.length;r+=ZO(n[i++],e));break;case"[object Object]":for(r+="o",n=Object.keys(t).sort();i<n.length;r+=n[i]+ZO(t[n[i++]],e));break;case"[object Map]":for(r+="o",n=Array.from(t.keys()).sort();i<n.length;r+=n[i]+ZO(t.get(n[i++]),e));break;case"[object Date]":return"d"+ +t;case"[object RegExp]":return"r"+t.source+t.flags;default:throw new Error(`Unsupported value ${t}`)}return XO.set(t,r),r}s(ZO,"t");function eU(t){return ZO(t,0)}s(eU,"r");var zre=new WeakMap;function P5e(t,e,n=eU(e)){let r,i,o=zre.get(t);o||(zre.set(t,o=[[],i=[],r=[]]),queueMicrotask(function(){let u,d=0;function p(m){for(;u=r[d++];u.r(m));}s(p,"o"),zre.delete(t),t(i).then(function(m){if(m.length!==r.length)return p(new Error("loader value length mismatch"));for(;u=m[d++],d<=m.length;u instanceof Error?r[d-1].r(u):r[d-1].s(u));},p)}));let a=o[0].indexOf(n);if(~a)return o[2][a].p;let l=o[0].push(n)-1,c=o[2][l]={};return o[1][l]=e,c.p=new Promise(function(u,d){c.s=u,c.r=d})}s(P5e,"n");var D5e=new WeakMap;function jpt(t,e,n,r=eU(n)){if(e||(e=D5e.get(t)),e||D5e.set(t,e=new Map),e.has(r))return Promise.resolve(e.get(r));let i=P5e(t,n,r);return e.set(r,i),i.catch(()=>e.delete(r)),i}s(jpt,"n");function N5e(t,e){return function(n,r){return jpt(t,e,n,r)}}s(N5e,"o");f();var t4e=je($5e(),1);f();var eP=s(t=>{if(typeof t!="string")throw new TypeError("invalid pattern");if(t.length>65536)throw new TypeError("pattern is too long")},"assertValidPattern");f();f();var Zpt={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},tP=s(t=>t.replace(/[[\]\\-]/g,"\\$&"),"braceEscape"),emt=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regexpEscape"),z5e=s(t=>t.join(""),"rangesToString"),Y5e=s((t,e)=>{let n=e;if(t.charAt(n)!=="[")throw new Error("not in a brace expression");let r=[],i=[],o=n+1,a=!1,l=!1,c=!1,u=!1,d=n,p="";e:for(;o<t.length;){let y=t.charAt(o);if((y==="!"||y==="^")&&o===n+1){u=!0,o++;continue}if(y==="]"&&a&&!c){d=o+1;break}if(a=!0,y==="\\"&&!c){c=!0,o++;continue}if(y==="["&&!c){for(let[v,[b,E,_]]of Object.entries(Zpt))if(t.startsWith(v,o)){if(p)return["$.",!1,t.length-n,!0];o+=v.length,_?i.push(b):r.push(b),l=l||E;continue e}}if(c=!1,p){y>p?r.push(tP(p)+"-"+tP(y)):y===p&&r.push(tP(y)),p="",o++;continue}if(t.startsWith("-]",o+1)){r.push(tP(y+"-")),o+=2;continue}if(t.startsWith("-",o+1)){p=y,o+=2;continue}r.push(tP(y)),o++}if(d<o)return["",!1,0,!1];if(!r.length&&!i.length)return["$.",!1,t.length-n,!0];if(i.length===0&&r.length===1&&/^\\?.$/.test(r[0])&&!u){let y=r[0].length===2?r[0].slice(-1):r[0];return[emt(y),!1,d-n,!1]}let m="["+(u?"^":"")+z5e(r)+"]",h="["+(u?"":"^")+z5e(i)+"]";return[r.length&&i.length?"("+m+"|"+h+")":r.length?m:h,l,d-n,!0]},"parseClass");f();var dv=s((t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/\[([^\/\\])\]/g,"$1"):t.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1"),"unescape");var tmt=new Set(["!","?","+","*","@"]),K5e=s(t=>tmt.has(t),"isExtglobType"),nmt="(?!(?:^|/)\\.\\.?(?:$|/))",tU="(?!\\.)",rmt=new Set(["[","."]),imt=new Set(["..","."]),omt=new Set("().*{}+?[]^$\\!"),smt=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),Jre="[^/]",J5e=Jre+"*?",X5e=Jre+"+?",m5=class t{static{s(this,"AST")}type;#e;#t;#i=!1;#r=[];#n;#o;#s;#a=!1;#l;#c;#d=!1;constructor(e,n,r={}){this.type=e,e&&(this.#t=!0),this.#n=n,this.#e=this.#n?this.#n.#e:this,this.#l=this.#e===this?r:this.#e.#l,this.#s=this.#e===this?[]:this.#e.#s,e==="!"&&!this.#e.#a&&this.#s.push(this),this.#o=this.#n?this.#n.#r.length:0}get hasMagic(){if(this.#t!==void 0)return this.#t;for(let e of this.#r)if(typeof e!="string"&&(e.type||e.hasMagic))return this.#t=!0;return this.#t}toString(){return this.#c!==void 0?this.#c:this.type?this.#c=this.type+"("+this.#r.map(e=>String(e)).join("|")+")":this.#c=this.#r.map(e=>String(e)).join("")}#p(){if(this!==this.#e)throw new Error("should only call on root");if(this.#a)return this;this.toString(),this.#a=!0;let e;for(;e=this.#s.pop();){if(e.type!=="!")continue;let n=e,r=n.#n;for(;r;){for(let i=n.#o+1;!r.type&&i<r.#r.length;i++)for(let o of e.#r){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(r.#r[i])}n=r,r=n.#n}}return this}push(...e){for(let n of e)if(n!==""){if(typeof n!="string"&&!(n instanceof t&&n.#n===this))throw new Error("invalid part: "+n);this.#r.push(n)}}toJSON(){let e=this.type===null?this.#r.slice().map(n=>typeof n=="string"?n:n.toJSON()):[this.type,...this.#r.map(n=>n.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===this.#e||this.#e.#a&&this.#n?.type==="!")&&e.push({}),e}isStart(){if(this.#e===this)return!0;if(!this.#n?.isStart())return!1;if(this.#o===0)return!0;let e=this.#n;for(let n=0;n<this.#o;n++){let r=e.#r[n];if(!(r instanceof t&&r.type==="!"))return!1}return!0}isEnd(){if(this.#e===this||this.#n?.type==="!")return!0;if(!this.#n?.isEnd())return!1;if(!this.type)return this.#n?.isEnd();let e=this.#n?this.#n.#r.length:0;return this.#o===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){let n=new t(this.type,e);for(let r of this.#r)n.copyIn(r);return n}static#u(e,n,r,i){let o=!1,a=!1,l=-1,c=!1;if(n.type===null){let h=r,g="";for(;h<e.length;){let y=e.charAt(h++);if(o||y==="\\"){o=!o,g+=y;continue}if(a){h===l+1?(y==="^"||y==="!")&&(c=!0):y==="]"&&!(h===l+2&&c)&&(a=!1),g+=y;continue}else if(y==="["){a=!0,l=h,c=!1,g+=y;continue}if(!i.noext&&K5e(y)&&e.charAt(h)==="("){n.push(g),g="";let v=new t(y,n);h=t.#u(e,v,h,i),n.push(v);continue}g+=y}return n.push(g),h}let u=r+1,d=new t(null,n),p=[],m="";for(;u<e.length;){let h=e.charAt(u++);if(o||h==="\\"){o=!o,m+=h;continue}if(a){u===l+1?(h==="^"||h==="!")&&(c=!0):h==="]"&&!(u===l+2&&c)&&(a=!1),m+=h;continue}else if(h==="["){a=!0,l=u,c=!1,m+=h;continue}if(K5e(h)&&e.charAt(u)==="("){d.push(m),m="";let g=new t(h,d);d.push(g),u=t.#u(e,g,u,i);continue}if(h==="|"){d.push(m),m="",p.push(d),d=new t(null,n);continue}if(h===")")return m===""&&n.#r.length===0&&(n.#d=!0),d.push(m),m="",n.push(...p,d),u;m+=h}return n.type=null,n.#t=void 0,n.#r=[e.substring(r-1)],u}static fromGlob(e,n={}){let r=new t(null,void 0,n);return t.#u(e,r,0,n),r}toMMPattern(){if(this!==this.#e)return this.#e.toMMPattern();let e=this.toString(),[n,r,i,o]=this.toRegExpSource();if(!(i||this.#t||this.#l.nocase&&!this.#l.nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return r;let l=(this.#l.nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${n}$`,l),{_src:n,_glob:e})}get options(){return this.#l}toRegExpSource(e){let n=e??!!this.#l.dot;if(this.#e===this&&this.#p(),!this.type){let c=this.isStart()&&this.isEnd(),u=this.#r.map(h=>{let[g,y,v,b]=typeof h=="string"?t.#m(h,this.#t,c):h.toRegExpSource(e);return this.#t=this.#t||v,this.#i=this.#i||b,g}).join(""),d="";if(this.isStart()&&typeof this.#r[0]=="string"&&!(this.#r.length===1&&imt.has(this.#r[0]))){let g=rmt,y=n&&g.has(u.charAt(0))||u.startsWith("\\.")&&g.has(u.charAt(2))||u.startsWith("\\.\\.")&&g.has(u.charAt(4)),v=!n&&!e&&g.has(u.charAt(0));d=y?nmt:v?tU:""}let p="";return this.isEnd()&&this.#e.#a&&this.#n?.type==="!"&&(p="(?:$|\\/)"),[d+u+p,dv(u),this.#t=!!this.#t,this.#i]}let r=this.type==="*"||this.type==="+",i=this.type==="!"?"(?:(?!(?:":"(?:",o=this.#f(n);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){let c=this.toString();return this.#r=[c],this.type=null,this.#t=void 0,[c,dv(this.toString()),!1,!1]}let a=!r||e||n||!tU?"":this.#f(!0);a===o&&(a=""),a&&(o=`(?:${o})(?:${a})*?`);let l="";if(this.type==="!"&&this.#d)l=(this.isStart()&&!n?tU:"")+X5e;else{let c=this.type==="!"?"))"+(this.isStart()&&!n&&!e?tU:"")+J5e+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&a?")":this.type==="*"&&a?")?":`)${this.type}`;l=i+o+c}return[l,dv(o),this.#t=!!this.#t,this.#i]}#f(e){return this.#r.map(n=>{if(typeof n=="string")throw new Error("string type in extglob ast??");let[r,i,o,a]=n.toRegExpSource(e);return this.#i=this.#i||a,r}).filter(n=>!(this.isStart()&&this.isEnd())||!!n).join("|")}static#m(e,n,r=!1){let i=!1,o="",a=!1;for(let l=0;l<e.length;l++){let c=e.charAt(l);if(i){i=!1,o+=(omt.has(c)?"\\":"")+c;continue}if(c==="\\"){l===e.length-1?o+="\\\\":i=!0;continue}if(c==="["){let[u,d,p,m]=Y5e(e,l);if(p){o+=u,a=a||d,l+=p-1,n=n||m;continue}}if(c==="*"){r&&e==="*"?o+=X5e:o+=J5e,n=!0;continue}if(c==="?"){o+=Jre,n=!0;continue}o+=smt(c)}return[o,dv(e),!!n,a]}};f();var Xre=s((t,{windowsPathsNoEscape:e=!1}={})=>e?t.replace(/[?*()[\]]/g,"[$&]"):t.replace(/[?*()[\]\\]/g,"\\$&"),"escape");var ka=s((t,e,n={})=>(eP(e),!n.nocomment&&e.charAt(0)==="#"?!1:new h5(e,n).match(t)),"minimatch"),amt=/^\*+([^+@!?\*\[\(]*)$/,lmt=s(t=>e=>!e.startsWith(".")&&e.endsWith(t),"starDotExtTest"),cmt=s(t=>e=>e.endsWith(t),"starDotExtTestDot"),umt=s(t=>(t=t.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(t)),"starDotExtTestNocase"),dmt=s(t=>(t=t.toLowerCase(),e=>e.toLowerCase().endsWith(t)),"starDotExtTestNocaseDot"),fmt=/^\*+\.\*+$/,pmt=s(t=>!t.startsWith(".")&&t.includes("."),"starDotStarTest"),mmt=s(t=>t!=="."&&t!==".."&&t.includes("."),"starDotStarTestDot"),hmt=/^\.\*+$/,gmt=s(t=>t!=="."&&t!==".."&&t.startsWith("."),"dotStarTest"),Amt=/^\*+$/,ymt=s(t=>t.length!==0&&!t.startsWith("."),"starTest"),Cmt=s(t=>t.length!==0&&t!=="."&&t!=="..","starTestDot"),xmt=/^\?+([^+@!?\*\[\(]*)?$/,vmt=s(([t,e=""])=>{let n=n4e([t]);return e?(e=e.toLowerCase(),r=>n(r)&&r.toLowerCase().endsWith(e)):n},"qmarksTestNocase"),bmt=s(([t,e=""])=>{let n=r4e([t]);return e?(e=e.toLowerCase(),r=>n(r)&&r.toLowerCase().endsWith(e)):n},"qmarksTestNocaseDot"),Emt=s(([t,e=""])=>{let n=r4e([t]);return e?r=>n(r)&&r.endsWith(e):n},"qmarksTestDot"),Imt=s(([t,e=""])=>{let n=n4e([t]);return e?r=>n(r)&&r.endsWith(e):n},"qmarksTest"),n4e=s(([t])=>{let e=t.length;return n=>n.length===e&&!n.startsWith(".")},"qmarksTestNoExt"),r4e=s(([t])=>{let e=t.length;return n=>n.length===e&&n!=="."&&n!==".."},"qmarksTestNoExtDot"),i4e=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&process.env.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix",Z5e={win32:{sep:"\\"},posix:{sep:"/"}},Tmt=i4e==="win32"?Z5e.win32.sep:Z5e.posix.sep;ka.sep=Tmt;var Kf=Symbol("globstar **");ka.GLOBSTAR=Kf;var wmt="[^/]",_mt=wmt+"*?",Smt="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?",Rmt="(?:(?!(?:\\/|^)\\.).)*?",kmt=s((t,e={})=>n=>ka(n,t,e),"filter");ka.filter=kmt;var Yf=s((t,e={})=>Object.assign({},t,e),"ext"),Bmt=s(t=>{if(!t||typeof t!="object"||!Object.keys(t).length)return ka;let e=ka;return Object.assign(s((r,i,o={})=>e(r,i,Yf(t,o)),"m"),{Minimatch:class extends e.Minimatch{static{s(this,"Minimatch")}constructor(i,o={}){super(i,Yf(t,o))}static defaults(i){return e.defaults(Yf(t,i)).Minimatch}},AST:class extends e.AST{static{s(this,"AST")}constructor(i,o,a={}){super(i,o,Yf(t,a))}static fromGlob(i,o={}){return e.AST.fromGlob(i,Yf(t,o))}},unescape:s((r,i={})=>e.unescape(r,Yf(t,i)),"unescape"),escape:s((r,i={})=>e.escape(r,Yf(t,i)),"escape"),filter:s((r,i={})=>e.filter(r,Yf(t,i)),"filter"),defaults:s(r=>e.defaults(Yf(t,r)),"defaults"),makeRe:s((r,i={})=>e.makeRe(r,Yf(t,i)),"makeRe"),braceExpand:s((r,i={})=>e.braceExpand(r,Yf(t,i)),"braceExpand"),match:s((r,i,o={})=>e.match(r,i,Yf(t,o)),"match"),sep:e.sep,GLOBSTAR:Kf})},"defaults");ka.defaults=Bmt;var o4e=s((t,e={})=>(eP(t),e.nobrace||!/\{(?:(?!\{).)*\}/.test(t)?[t]:(0,t4e.default)(t)),"braceExpand");ka.braceExpand=o4e;var Pmt=s((t,e={})=>new h5(t,e).makeRe(),"makeRe");ka.makeRe=Pmt;var Dmt=s((t,e,n={})=>{let r=new h5(e,n);return t=t.filter(i=>r.match(i)),r.options.nonull&&!t.length&&t.push(e),t},"match");ka.match=Dmt;var e4e=/[?*]|[+@!]\(.*?\)|\[|\]/,Nmt=s(t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),"regExpEscape"),h5=class{static{s(this,"Minimatch")}options;set;pattern;windowsPathsNoEscape;nonegate;negate;comment;empty;preserveMultipleSlashes;partial;globSet;globParts;nocase;isWindows;platform;windowsNoMagicRoot;regexp;constructor(e,n={}){eP(e),n=n||{},this.options=n,this.pattern=e,this.platform=n.platform||i4e,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!n.windowsPathsNoEscape||n.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!n.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!n.nonegate,this.comment=!1,this.empty=!1,this.partial=!!n.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=n.windowsNoMagicRoot!==void 0?n.windowsNoMagicRoot:!!(this.isWindows&&this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(let e of this.set)for(let n of e)if(typeof n!="string")return!0;return!1}debug(...e){}make(){let e=this.pattern,n=this.options;if(!n.nocomment&&e.charAt(0)==="#"){this.comment=!0;return}if(!e){this.empty=!0;return}this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],n.debug&&(this.debug=(...o)=>console.error(...o)),this.debug(this.pattern,this.globSet);let r=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(r),this.debug(this.pattern,this.globParts);let i=this.globParts.map((o,a,l)=>{if(this.isWindows&&this.windowsNoMagicRoot){let c=o[0]===""&&o[1]===""&&(o[2]==="?"||!e4e.test(o[2]))&&!e4e.test(o[3]),u=/^[a-z]:/i.test(o[0]);if(c)return[...o.slice(0,4),...o.slice(4).map(d=>this.parse(d))];if(u)return[o[0],...o.slice(1).map(d=>this.parse(d))]}return o.map(c=>this.parse(c))});if(this.debug(this.pattern,i),this.set=i.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){let a=this.set[o];a[0]===""&&a[1]===""&&this.globParts[o][2]==="?"&&typeof a[3]=="string"&&/^[a-z]:$/i.test(a[3])&&(a[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let r=0;r<e.length;r++)for(let i=0;i<e[r].length;i++)e[r][i]==="**"&&(e[r][i]="*");let{optimizationLevel:n=1}=this.options;return n>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):n>=1?e=this.levelOneOptimize(e):e=this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(n=>{let r=-1;for(;(r=n.indexOf("**",r+1))!==-1;){let i=r;for(;n[i+1]==="**";)i++;i!==r&&n.splice(r,i-r)}return n})}levelOneOptimize(e){return e.map(n=>(n=n.reduce((r,i)=>{let o=r[r.length-1];return i==="**"&&o==="**"?r:i===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(r.pop(),r):(r.push(i),r)},[]),n.length===0?[""]:n))}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let n=!1;do{if(n=!1,!this.preserveMultipleSlashes){for(let i=1;i<e.length-1;i++){let o=e[i];i===1&&o===""&&e[0]===""||(o==="."||o==="")&&(n=!0,e.splice(i,1),i--)}e[0]==="."&&e.length===2&&(e[1]==="."||e[1]==="")&&(n=!0,e.pop())}let r=0;for(;(r=e.indexOf("..",r+1))!==-1;){let i=e[r-1];i&&i!=="."&&i!==".."&&i!=="**"&&(n=!0,e.splice(r-1,2),r-=2)}}while(n);return e.length===0?[""]:e}firstPhasePreProcess(e){let n=!1;do{n=!1;for(let r of e){let i=-1;for(;(i=r.indexOf("**",i+1))!==-1;){let a=i;for(;r[a+1]==="**";)a++;a>i&&r.splice(i+1,a-i);let l=r[i+1],c=r[i+2],u=r[i+3];if(l!==".."||!c||c==="."||c===".."||!u||u==="."||u==="..")continue;n=!0,r.splice(i,1);let d=r.slice(0);d[i]="**",e.push(d),i--}if(!this.preserveMultipleSlashes){for(let a=1;a<r.length-1;a++){let l=r[a];a===1&&l===""&&r[0]===""||(l==="."||l==="")&&(n=!0,r.splice(a,1),a--)}r[0]==="."&&r.length===2&&(r[1]==="."||r[1]==="")&&(n=!0,r.pop())}let o=0;for(;(o=r.indexOf("..",o+1))!==-1;){let a=r[o-1];if(a&&a!=="."&&a!==".."&&a!=="**"){n=!0;let c=o===1&&r[o+1]==="**"?["."]:[];r.splice(o-1,2,...c),r.length===0&&r.push(""),o-=2}}}}while(n);return e}secondPhasePreProcess(e){for(let n=0;n<e.length-1;n++)for(let r=n+1;r<e.length;r++){let i=this.partsMatch(e[n],e[r],!this.preserveMultipleSlashes);if(i){e[n]=[],e[r]=i;break}}return e.filter(n=>n.length)}partsMatch(e,n,r=!1){let i=0,o=0,a=[],l="";for(;i<e.length&&o<n.length;)if(e[i]===n[o])a.push(l==="b"?n[o]:e[i]),i++,o++;else if(r&&e[i]==="**"&&n[o]===e[i+1])a.push(e[i]),i++;else if(r&&n[o]==="**"&&e[i]===n[o+1])a.push(n[o]),o++;else if(e[i]==="*"&&n[o]&&(this.options.dot||!n[o].startsWith("."))&&n[o]!=="**"){if(l==="b")return!1;l="a",a.push(e[i]),i++,o++}else if(n[o]==="*"&&e[i]&&(this.options.dot||!e[i].startsWith("."))&&e[i]!=="**"){if(l==="a")return!1;l="b",a.push(n[o]),i++,o++}else return!1;return e.length===n.length&&a}parseNegate(){if(this.nonegate)return;let e=this.pattern,n=!1,r=0;for(let i=0;i<e.length&&e.charAt(i)==="!";i++)n=!n,r++;r&&(this.pattern=e.slice(r)),this.negate=n}matchOne(e,n,r=!1){let i=this.options;if(this.isWindows){let y=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),v=!y&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),b=typeof n[0]=="string"&&/^[a-z]:$/i.test(n[0]),E=!b&&n[0]===""&&n[1]===""&&n[2]==="?"&&typeof n[3]=="string"&&/^[a-z]:$/i.test(n[3]),_=v?3:y?0:void 0,k=E?3:b?0:void 0;if(typeof _=="number"&&typeof k=="number"){let[P,N]=[e[_],n[k]];P.toLowerCase()===N.toLowerCase()&&(n[k]=P,k>_?n=n.slice(k):_>k&&(e=e.slice(_)))}}let{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:n}),this.debug("matchOne",e.length,n.length);for(var a=0,l=0,c=e.length,u=n.length;a<c&&l<u;a++,l++){this.debug("matchOne loop");var d=n[l],p=e[a];if(this.debug(n,d,p),d===!1)return!1;if(d===Kf){this.debug("GLOBSTAR",[n,d,p]);var m=a,h=l+1;if(h===u){for(this.debug("** at the end");a<c;a++)if(e[a]==="."||e[a]===".."||!i.dot&&e[a].charAt(0)===".")return!1;return!0}for(;m<c;){var g=e[m];if(this.debug(`
globstar while`,e,m,n,h,g),this.matchOne(e.slice(m),n.slice(h),r))return this.debug("globstar found match!",m,c,g),!0;if(g==="."||g===".."||!i.dot&&g.charAt(0)==="."){this.debug("dot detected!",e,m,n,h);break}this.debug("globstar swallow a segment, and continue"),m++}return!!(r&&(this.debug(`
>>> no match, partial?`,e,m,n,h),m===c))}let y;if(typeof d=="string"?(y=p===d,this.debug("string match",d,p,y)):(y=d.test(p),this.debug("pattern match",d,p,y)),!y)return!1}if(a===c&&l===u)return!0;if(a===c)return r;if(l===u)return a===c-1&&e[a]==="";throw new Error("wtf?")}braceExpand(){return o4e(this.pattern,this.options)}parse(e){eP(e);let n=this.options;if(e==="**")return Kf;if(e==="")return"";let r,i=null;(r=e.match(Amt))?i=n.dot?Cmt:ymt:(r=e.match(amt))?i=(n.nocase?n.dot?dmt:umt:n.dot?cmt:lmt)(r[1]):(r=e.match(xmt))?i=(n.nocase?n.dot?bmt:vmt:n.dot?Emt:Imt)(r):(r=e.match(fmt))?i=n.dot?mmt:pmt:(r=e.match(hmt))&&(i=gmt);let o=m5.fromGlob(e,this.options).toMMPattern();return i&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:i}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;let e=this.set;if(!e.length)return this.regexp=!1,this.regexp;let n=this.options,r=n.noglobstar?_mt:n.dot?Smt:Rmt,i=new Set(n.nocase?["i"]:[]),o=e.map(c=>{let u=c.map(d=>{if(d instanceof RegExp)for(let p of d.flags.split(""))i.add(p);return typeof d=="string"?Nmt(d):d===Kf?Kf:d._src});return u.forEach((d,p)=>{let m=u[p+1],h=u[p-1];d!==Kf||h===Kf||(h===void 0?m!==void 0&&m!==Kf?u[p+1]="(?:\\/|"+r+"\\/)?"+m:u[p]=r:m===void 0?u[p-1]=h+"(?:\\/|"+r+")?":m!==Kf&&(u[p-1]=h+"(?:\\/|\\/"+r+"\\/)"+m,u[p+1]=Kf))}),u.filter(d=>d!==Kf).join("/")}).join("|"),[a,l]=e.length>1?["(?:",")"]:["",""];o="^"+a+o+l+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...i].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e,n=this.partial){if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&n)return!0;let r=this.options;this.isWindows&&(e=e.split("\\").join("/"));let i=this.slashSplit(e);this.debug(this.pattern,"split",i);let o=this.set;this.debug(this.pattern,"set",o);let a=i[i.length-1];if(!a)for(let l=i.length-2;!a&&l>=0;l--)a=i[l];for(let l=0;l<o.length;l++){let c=o[l],u=i;if(r.matchBase&&c.length===1&&(u=[a]),this.matchOne(u,c,n))return r.flipNegate?!0:!this.negate}return r.flipNegate?!1:this.negate}static defaults(e){return ka.defaults(e).Minimatch}};ka.AST=m5;ka.Minimatch=h5;ka.escape=Xre;ka.unescape=dv;var Zre="contentExclusion",nU=class extends $O{static{s(this,"CopilotContentExclusion")}#e;#t=new Kn(1e4);#i=new Kn(200);constructor(e){super(),this.#e=e}async evaluate(e,n){try{e=bI(e).toString();let r=await this.getGitRepo({uri:e}),i=await this.#r(r?.url??r2.all);if(!i)return VO;let o=r?.baseFolder?.uri??"file://",a=this.evaluateFilePathRules(e,o,i);if(a.isBlocked)return a;let l=this.evaluateTextBasedRules(e,i,n);if(l.isBlocked)return l}catch(r){return Q1.exception(this.#e,r,`${Zre}.evaluate`),S5e}return X8}evaluateFilePathRules(e,n,r){let i=e;if(this.#t.has(i))return this.#t.get(i);let o=X8,a,l=rte(e.replace(n,""));e:for(let c of r)for(let u of c.paths)if(ka(l,u,{nocase:!0,matchBase:!0,nonegate:!0,dot:!0})){o=eie(c,"FILE_BLOCKED_PATH"),a=u;break e}return Q1.debug(this.#e,`Evaluated path-based exclusion rules for <${e}>`,{result:o,baseUri:n,fileName:l,matchingPattern:a}),this.#t.set(i,o),o}evaluateTextBasedRules(e,n,r){let i=n.filter(l=>l.ifAnyMatch),o=n.filter(l=>l.ifNoneMatch);if(!r||i.length===0&&o.length===0)return X8;let a=this.evaluateFileContent(i,o,r);return Q1.debug(this.#e,`Evaluated text-based exclusion rules for <${e}>`,{result:a}),a}evaluateFileContent(e,n,r){for(let i of e)if(i.ifAnyMatch&&i.ifAnyMatch.length>0&&i.ifAnyMatch.map(a=>s4e(a)).some(a=>a.test(r)))return eie(i,"FILE_BLOCKED_TEXT_BASED");for(let i of n)if(i.ifNoneMatch&&i.ifNoneMatch.length>0&&!i.ifNoneMatch.map(a=>s4e(a)).some(a=>a.test(r)))return eie(i,"FILE_BLOCKED_TEXT_BASED");return X8}async refresh(){try{let e=[...this.#i.keys()];this.reset(),await Promise.all(e.map(n=>this.#o(n)))}catch(e){wa(this.#e,e,`${Zre}.refresh`)}}reset(){this.#i.clear(),this.#t.clear()}async#r(e){if(this.#n?.length)return this.#n;let n=await this.#o(e.toLowerCase());if(n.length!==0)return n}#n;setTestingRules(e){this.#n=e}#o=N5e(async e=>{let n=await this.#e.get(Gn).getGitHubSession();if(!n)throw new ls("No token found");let r=n.devOverride?.contentRestrictionsUrl??"copilot_internal/content_exclusion",i=new URL(r,n.apiUrl),o=e.includes(r2.all);e.filter(u=>u!==r2.all).length>0&&i.searchParams.set("repos",e.filter(u=>u!==r2.all).join(",")),i.searchParams.set("scope",o?r2.all:r2.repo);let l=await Bf(this.#e,n,i.href),c=await l.json();if(!l.ok){if(l.status===404)return Array.from(e,()=>[]);throw this.#s("fetch.error",{message:c.message}),new rg(l)}return this.#s("fetch.success"),B5e(Qmt,c).map(u=>u.rules)},this.#i);async getGitRepo(e){let r=await this.#e.get(O1).getRepo(p0(e));if(!r||!r?.remote)return;let i=r.remote.getUrlForApi();if(i)return{baseFolder:r.baseFolder,url:i}}#s(e,n,r){kt(this.#e,`${Zre}.${e}`,ir.createAndMarkAsIssued(n,r))}};function s4e(t){if(!t.startsWith("/")&&!t.endsWith("/"))return new RegExp(t);let e=t.slice(1,t.lastIndexOf("/")),n=t.slice(t.lastIndexOf("/")+1);return new RegExp(e,n)}s(s4e,"stringToRegex");function eie(t,e){return{isBlocked:!0,message:`Your ${t.source.type.toLowerCase()} '${t.source.name}' has disabled Copilot for this file`,reason:e}}s(eie,"fileBlockedEvaluationResult");var Lmt=I.Object({name:I.String(),type:I.String()}),Fmt=I.Object({paths:I.Array(I.String()),ifNoneMatch:I.Optional(I.Array(I.String())),ifAnyMatch:I.Optional(I.Array(I.String())),source:Lmt}),tie=I.Array(Fmt),Mmt=I.Object({rules:tie,last_updated_at:I.String(),scope:I.String()}),Qmt=I.Array(Mmt);var Kc=class{constructor(e){this.ctx=e;this.#e=!1;this.#t=new nU(this.ctx);this.evaluateResultCache=new Map;this.onDidChangeActiveTextEditor=s(async e=>{if(!this.#e)return;if(!e){this.updateStatusIcon(!1);return}let n=await this.ctx.get(Nn).getTextDocumentValidation(e.document),r=n.status==="invalid",i=n.status==="invalid"?n.reason:void 0;this.updateStatusIcon(r,i)},"onDidChangeActiveTextEditor");this.ctx.get(Nn).onDidFocusTextDocument(this.onDidChangeActiveTextEditor),ia(this.ctx,n=>{this.#e=n.envelope.copilotignore_enabled??!1,this.evaluateResultCache.clear(),this.#t.refresh()})}static{s(this,"CopilotContentExclusionManager")}#e;#t;get enabled(){return this.#e}async evaluate(e,n,r){let i=Ho(e)!==void 0;if(i||Q1.debug(this.ctx,`Unsupported file URI <${e}>`),!this.#e||!i)return{isBlocked:!1};let o=[],a=s(async(u,d)=>{let p=Date.now(),m=await d.evaluate(e,n),h=Date.now();return o.push({key:u,result:m,elapsedMs:h-p}),m},"track"),c=(await Promise.all([a("contentExclusion.evaluate",this.#t)])).find(u=>u?.isBlocked)??{isBlocked:!1};try{for(let u of o)this.#i(u.key,e,u.result,u.elapsedMs)}catch(u){Q1.error(this.ctx,"Error tracking telemetry",u)}return r==="UPDATE"&&this.updateStatusIcon(c.isBlocked,c.message),c}updateStatusIcon(e,n){this.#e&&(e?this.ctx.get(Ji).setInactive(n??"Copilot is disabled"):this.ctx.get(Ji).clearInactive())}#i(e,n,r,i){let o=n+e;if(this.evaluateResultCache.get(o)===r.reason)return!1;if(this.evaluateResultCache.set(o,r.reason??"UNKNOWN"),r.reason===VO.reason)return Q1.debug(this.ctx,`[${e}] No matching policy for this repository. uri: ${n}`),!1;let l={isBlocked:r.isBlocked?"true":"false",reason:r.reason??"UNKNOWN"},c={elapsedMs:i};return kt(this.ctx,e,ir.createAndMarkAsIssued(l,c)),kt(this.ctx,e,ir.createAndMarkAsIssued({...l,path:n},c),1),Q1.debug(this.ctx,`[${e}] ${n}`,r),!0}setTestingRules(e){this.#t.setTestingRules(e)}set __contentExclusions(e){this.#t=e}get __contentExclusions(){return this.#t}};async function U1(t,e,n){let r=await t.get(Kc).evaluate(e.uri,n);return r.isBlocked?{status:"invalid",reason:r.message??"Document is blocked by repository policy"}:{status:"valid"}}s(U1,"isDocumentValid");var Nn=class{constructor(e){this.ctx=e}static{s(this,"TextDocumentManager")}async textDocuments(){let e=this.getTextDocumentsUnsafe(),n=[];for(let r of e)(await U1(this.ctx,r,r.getText())).status==="valid"&&n.push(r);return n}getTextDocumentUnsafe(e){let n=mc(e.uri);return this.getTextDocumentsUnsafe().find(r=>r.uri===n)}async getTextDocument(e){return this.getTextDocumentWithValidation(e).then(n=>{if(n.status==="valid")return n.document})}validateTextDocument(e,n){return U1(this.ctx,e,n)}async getTextDocumentValidation(e){try{let n=this.getTextDocumentUnsafe(e)?.getText()??await this.readTextDocumentFromDisk(e.uri);return n===void 0?this.notFoundResult(e):this.validateTextDocument(e,n)}catch{return this.notFoundResult(e)}}async getTextDocumentWithValidation(e){let n=this.getTextDocumentUnsafe(e);if(!n)return this.notFoundResult(e);let r=await this.validateTextDocument(e,n.getText());return r.status==="valid"?{status:"valid",document:n}:r}notFoundResult({uri:e}){return{status:"notfound",message:`Document for URI could not be found: ${e}`}}async readTextDocumentFromDisk(e){try{if((await this.ctx.get(po).stat(e)).size>5*1024*1024)return}catch{return}return await this.ctx.get(po).readFileString(e)}getWorkspaceFolder(e){let n=mc(e.uri);return this.getWorkspaceFolders().find(r=>n.startsWith(mc(r.uri)))}getRelativePath(e){if(e.uri.startsWith("untitled:"))return;let n=mc(e.uri);for(let r of this.getWorkspaceFolders()){let i=mc(r.uri).replace(/[#?].*/,"").replace(/\/?$/,"/");if(n.startsWith(i))return n.slice(i.length)}return Ti(n)}};function ys(t){switch(t.status){case"valid":return t.document.getText().trim().length===0?"empty":"included";case"invalid":return"blocked";case"notfound":return"notfound"}}s(ys,"statusFromTextDocumentResult");var Nr=class{constructor(e){this.ctx=e}static{s(this,"FileReader")}getRelativePath(e){return this.ctx.get(Nn).getRelativePath(e)??Ti(e.uri)}getOrReadTextDocument(e){return this.readFile(e.uri)}getOrReadTextDocumentWithFakeClientProperties(e){return this.readFile(e.uri)}async readFile(e){let r=await this.ctx.get(Nn).getTextDocumentWithValidation({uri:e});if(r.status!=="notfound")return r;try{if(await this.getFileSizeMB(e)>1)return{status:"notfound",message:"File too large"};let o=await this.doReadFile(e),a=await U1(this.ctx,{uri:e},o);return a.status==="valid"?{status:"valid",document:M1.create(e,"UNKNOWN",-1,o)}:a}catch{return{status:"notfound",message:"File not found"}}}async doReadFile(e){return await this.ctx.get(po).readFileString(e)}async getFileSizeMB(e){return(await this.ctx.get(po).stat(e)).size/1024/1024}};f();f();var fv=class{constructor(){this.resolve=s(()=>{},"resolve");this.reject=s(()=>{},"reject");this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}static{s(this,"Deferred")}};function o2(t,e=void 0){return new Promise(n=>setTimeout(()=>n(e),t))}s(o2,"delay");f();var nie=class{constructor(){this.observers=new Set}static{s(this,"Subject")}subscribe(e){return this.observers.add(e),()=>this.observers.delete(e)}next(e){for(let n of this.observers)n.next(e)}error(e){for(let n of this.observers)n.error?.(e)}complete(){for(let e of this.observers)e.complete?.()}},rU=class extends nie{static{s(this,"ReplaySubject")}subscribe(e){let n=super.subscribe(e);return this._value!==void 0&&e.next(this._value),n}next(e){this._value=e,super.next(e)}};var Cd=class{constructor(e){this.ctx=e;this.#e=new Tt("AsyncCompletionManager");this.requests=new Kn(100);this.mostRecentRequestId=""}static{s(this,"AsyncCompletionManager")}#e;clear(){this.requests.clear()}shouldWaitForAsyncCompletions(e,n){for(let[r,i]of this.requests)if(rie(e,n,i))return!0;return!1}updateCompletion(e,n){let r=this.requests.get(e);r!==void 0&&(r.partialCompletionText=n,r.subject.next(r))}queueCompletionRequest(e,n,r,i,o){this.#e.debug(this.ctx,`[${e}] Queueing async completion request:`,n.substring(n.lastIndexOf(`
`)+1));let a=new rU;return this.requests.set(e,{state:2,cancellationTokenSource:i,headerRequestId:e,prefix:n,prompt:r,subject:a}),o.then(l=>{if(this.requests.delete(e),l.type!=="success"){this.#e.debug(this.ctx,`[${e}] Request failed with`,l.reason),a.error(l.reason);return}let c={cancellationTokenSource:i,headerRequestId:e,prefix:n,prompt:r,subject:a,choice:l.value[0],result:l,state:0,allChoicesPromise:l.value[1]};this.requests.set(e,c),a.next(c),a.complete()}).catch(l=>{this.#e.error(this.ctx,`[${e}] Request errored with`,l),this.requests.delete(e),a.error(l)})}getFirstMatchingRequestWithTimeout(e,n,r,i,o){let a=this.ctx.get(Dt).asyncCompletionsTimeout(o);return a<0?(this.#e.debug(this.ctx,`[${e}] Waiting for completions without timeout`),this.getFirstMatchingRequest(e,n,r,i)):(this.#e.debug(this.ctx,`[${e}] Waiting for completions with timeout of ${a}ms`),Promise.race([this.getFirstMatchingRequest(e,n,r,i),new Promise(l=>setTimeout(()=>l(null),a))]).then(l=>{if(l===null){this.#e.debug(this.ctx,`[${e}] Timed out waiting for completion`);return}return l}))}async getFirstMatchingRequest(e,n,r,i){i||(this.mostRecentRequestId=e);let o=!1,a=new fv,l=new Map,c=s(d=>()=>{let p=l.get(d);p!==void 0&&(p(),l.delete(d),!o&&l.size===0&&(o=!0,this.#e.debug(this.ctx,`[${e}] No matching completions found`),a.resolve(void 0)))},"finishRequest"),u=s(d=>{if(rie(n,r,d)){if(d.state===0){let p=n.substring(d.prefix.length),{completionText:m}=d.choice;if(!m.startsWith(p)||m.length<=p.length){c(d.headerRequestId)();return}m=m.substring(p.length),d.choice.telemetryData.measurements.foundOffset=p.length,this.#e.debug(this.ctx,`[${e}] Found completion at offset ${p.length}: ${JSON.stringify(m)}`),a.resolve([{...d.choice,completionText:m},d.allChoicesPromise]),o=!0}}else this.cancelRequest(e,d),c(d.headerRequestId)()},"next");for(let[d,p]of this.requests)rie(n,r,p)?l.set(d,p.subject.subscribe({next:u,error:c(d),complete:c(d)})):this.cancelRequest(e,p);return a.promise.finally(()=>{for(let d of l.values())d()})}cancelRequest(e,n){e===this.mostRecentRequestId&&n.state!==0&&(this.#e.debug(this.ctx,`[${e}] Cancelling request: ${n.headerRequestId}`),n.cancellationTokenSource.cancel(),this.requests.delete(n.headerRequestId))}};function rie(t,e,n){if(n.prompt.suffix!==e.suffix||!t.startsWith(n.prefix))return!1;let r=t.substring(n.prefix.length);return n.state===0?n.choice.completionText.startsWith(r)&&n.choice.completionText.trimEnd().length>r.length:n.partialCompletionText===void 0?!0:n.partialCompletionText.startsWith(r)}s(rie,"isCandidate");f();f();var rP=class{constructor(e){this.maxSize=e;this.root=new nP;this.leafNodes=new Set}static{s(this,"LRURadixTrie")}set(e,n){let{node:r,remainingKey:i}=this.findClosestNode(e);if(i.length>0){for(let[o,a]of r.children)if(o.startsWith(i)){let l=o.slice(0,i.length),c=new nP;r.removeChild(o),r.addChild(l,c),c.addChild(o.slice(l.length),a),r=c,i=i.slice(l.length);break}if(i.length>0){let o=new nP;r.addChild(i,o),r=o}}r.value=n,this.leafNodes.add(r),this.leafNodes.size>this.maxSize&&this.evictLeastRecentlyUsed()}findAll(e){return this.findClosestNode(e).stack.map(({node:n,remainingKey:r})=>n.value!==void 0?{remainingKey:r,value:n.value}:void 0).filter(n=>n!==void 0)}delete(e){let{node:n,remainingKey:r}=this.findClosestNode(e);r.length>0||this.deleteNode(n)}findClosestNode(e){let n=!0,r=this.root,i=[{node:r,remainingKey:e}];for(;e.length>0&&n;){n=!1;for(let[o,a]of r.children)if(e.startsWith(o)){e=e.slice(o.length),i.unshift({node:a,remainingKey:e}),r=a,n=!0;break}}return{node:r,remainingKey:e,stack:i}}deleteNode(e){if(e.value=void 0,this.leafNodes.delete(e),e.parent===void 0||e.childCount>1)return;let{node:n,edge:r}=e.parent;if(e.childCount===1){let[o,a]=Array.from(e.children)[0];e.removeChild(o),n.removeChild(r),n.addChild(r+o,a);return}if(n.removeChild(r),n.parent===void 0)return;let i=n.parent;if(n.value===void 0&&n.childCount===1){let[o,a]=Array.from(n.children)[0],l=i.edge+o;n.removeChild(o),i.node.removeChild(i.edge),i.node.addChild(l,a)}}evictLeastRecentlyUsed(){let e=this.findLeastRecentlyUsed();e&&this.deleteNode(e)}findLeastRecentlyUsed(){let e;for(let n of this.leafNodes)(e===void 0||n.touched<e.touched)&&(e=n);return e}},nP=class{constructor(){this._children=new Map;this._touched=performance.now()}static{s(this,"LRURadixNode")}get children(){return this._children.entries()}get childCount(){return this._children.size}addChild(e,n){this._children.set(e,n),n.parent={node:this,edge:e}}removeChild(e){let n=this._children.get(e);n&&(n.parent=void 0),this._children.delete(e)}get value(){return this.touch(),this._value}set value(e){this.touch(),this._value=e}get touched(){return this._touched}touch(){this._touched=performance.now()}};var Bm=class{constructor(){this.cache=new rP(100)}static{s(this,"CompletionsCache")}findAll(e,n){return this.cache.findAll(e).flatMap(({remainingKey:r,value:i})=>i.content.filter(o=>o.suffix===n&&o.choice.completionText.startsWith(r)&&o.choice.completionText.length>r.length).map(o=>({...o.choice,completionText:o.choice.completionText.slice(r.length),telemetryData:o.choice.telemetryData.extendedBy({},{foundOffset:r.length})})))}append(e,n,r){let i=this.cache.findAll(e);if(i.length>0&&i[0].remainingKey===""){let o=i[0].value.content;this.cache.set(e,{content:[...o,{suffix:n,choice:r}]})}else this.cache.set(e,{content:[{suffix:n,choice:r}]})}clear(){this.cache=new rP(100)}};f();f();f();var Pm=class{constructor(e,n,r){this.languageId=e;this.prefix=n;this.completion=r}static{s(this,"BlockTrimmer")}static isSupported(e){return jc.isSupported(e)}async withParsedStatementTree(e){var r=[];try{let n=WJ(r,jc.create(this.languageId,this.prefix+this.completion,this.prefix.length,this.prefix.length+this.completion.length));await n.build();return await e(n)}catch(i){var o=i,a=!0}finally{HJ(r,o,a)}}trimmedCompletion(e){return e===void 0?this.completion:this.completion.substring(0,e)}getStatementAtCursor(e){return e.statementAt(Math.max(this.prefix.length-1,0))??e.statements[0]}getContainingBlockOffset(e){let n;if(e&&this.isCompoundStatement(e))n=e;else if(e){let r=e.parent;for(;r&&!this.isCompoundStatement(r);)r=r.parent;n=r}if(n){let r=this.asCompletionOffset(n.node.endIndex);if(r&&this.completion.substring(r).trim()!=="")return r}}hasNonStatementContentAfter(e){if(!e||!e.nextSibling)return!1;let n=this.asCompletionOffset(e.node.endIndex),r=this.asCompletionOffset(e.nextSibling.node.startIndex);return this.completion.substring(Math.max(0,n??0),Math.max(0,r??0)).trim()!==""}asCompletionOffset(e){return e===void 0?void 0:e-this.prefix.length}isCompoundStatement(e){return e.isCompoundStatementType||e.children.length>0}};var iU=class extends Pm{constructor(n,r,i,o=3,a=7){super(n,r,i);this.lineLimit=o;this.lookAhead=a;let l=[...this.completion.matchAll(/\n/g)],c=this.lineLimit+this.lookAhead;l.length>=this.lineLimit&&this.lineLimit>0&&(this.limitOffset=l[this.lineLimit-1].index),l.length>=c&&c>0&&(this.lookAheadOffset=l[c-1].index)}static{s(this,"TerseBlockTrimmer")}async getCompletionTrimOffset(){return await this.withParsedStatementTree(async n=>{let r=n.statementAt(this.stmtStartPos()),i=this.getContainingBlockOffset(r);return i=this.trimAtFirstBlankLine(i),r&&(i=this.trimAtStatementChange(r,i)),this.limitOffset&&this.lookAheadOffset&&(i===void 0||i>this.lookAheadOffset)?this.limitOffset:i})}stmtStartPos(){let n=this.completion.match(/\S/);return n&&n.index!==void 0?this.prefix.length+n.index:Math.max(this.prefix.length-1,0)}trimAtFirstBlankLine(n){let r=[...this.trimmedCompletion(n).matchAll(/\r?\n\s*\r?\n/g)];for(;r.length>0&&(n===void 0||n>r[0].index);){let i=r.shift();if(this.completion.substring(0,i.index).trim()!=="")return i.index}return n}trimAtStatementChange(n,r){let i=this.prefix.length,o=this.prefix.length+(r??this.completion.length);if(n.node.endIndex>i&&this.isCompoundStatement(n))return n.nextSibling&&n.node.endIndex<o?this.asCompletionOffset(n.node.endIndex):r;let a=n,l=n.nextSibling;for(;l&&l.node.endIndex<=o&&!this.hasNonStatementContentAfter(a)&&!this.isCompoundStatement(l);)a=l,l=l.nextSibling;return l&&a.node.endIndex>i&&a.node.endIndex<o?this.asCompletionOffset(a.node.endIndex):r}};async function a4e(t,e){var l=[];try{let n=t.getText();let r=t.offsetAt(e);let i=WJ(l,jc.create(t.detectedLanguageId,n,0,n.length));await i.build();let o=i.statementAt(r);if(!o)return"non-block";if(!o.isCompoundStatementType&&o.children.length===0)return o.parent&&!o.nextSibling&&o.node.endPosition.row<=e.line?"block-end":o.parent?"mid-block":"non-block";if(o.children.length===0)return"empty-block";let a=o.children[o.children.length-1];if(r<a.node.startIndex)return"mid-block";return"block-end"}catch(c){var u=c,d=!0}finally{HJ(l,u,d)}}s(a4e,"getBlockPositionType");f();f();var q1={" ":1,"!":2,'"':3,"#":4,$:5,"%":6,"&":7,"'":8,"(":9,")":10,"*":11,"+":12,",":13,"-":14,".":15,"/":16,0:17,1:18,2:19,3:20,4:21,5:22,6:23,7:24,8:25,9:26,":":27,";":28,"<":29,"=":30,">":31,"?":32,"@":33,A:34,B:35,C:36,D:37,E:38,F:39,G:40,H:41,I:42,J:43,K:44,L:45,M:46,N:47,O:48,P:49,Q:50,R:51,S:52,T:53,U:54,V:55,W:56,X:57,Y:58,Z:59,"[":60,"\\":61,"]":62,"^":63,_:64,"`":65,a:66,b:67,c:68,d:69,e:70,f:71,g:72,h:73,i:74,j:75,k:76,l:77,m:78,n:79,o:80,p:81,q:82,r:83,s:84,t:85,u:86,v:87,w:88,x:89,y:90,z:91,"{":92,"|":93,"}":94,"~":95};f();function l4e(t){let e;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>427.50000000000006?t[9]>13.500000000000002?t[121]>1e-35?e=-.3793786744885956:t[149]>1e-35?e=-.34717430705356905:e=-.26126834451035963:e=-.2431318366096852:t[5]>888.5000000000001?e=-.20600463586387135:e=-.2568037008471491:t[308]>1e-35?e=-.2363064824497454:t[8]>370.50000000000006?e=-.37470755210284723:e=-.321978453730494:t[3]>24.500000000000004?t[23]>1e-35?t[131]>1e-35?e=-.26259136509758885:e=-.3096719634039438:t[4]>30.500000000000004?t[9]>18.500000000000004?e=-.34254903852890883:t[2]>98.50000000000001?e=-.41585250791146294:e=-.3673574858887241:t[9]>6.500000000000001?e=-.31688079287876225:t[31]>1e-35?e=-.29110977864003823:t[308]>1e-35?e=-.3201411739040839:e=-.36874023066055506:t[8]>691.5000000000001?t[82]>1e-35?e=-.41318393149040566:t[133]>1e-35?e=-.3741272613525161:t[32]>1e-35?e=-.4112378041027121:t[227]>1e-35?e=-.37726615155719356:t[10]>3.5000000000000004?e=-.3164502293560397:e=-.2930071546509045:t[9]>13.500000000000002?e=-.277366858539218:t[308]>1e-35?t[4]>10.500000000000002?e=-.30975610686807187:t[4]>1.5000000000000002?e=-.2549142136728043:e=-.3271325650785176:t[127]>1e-35?t[0]>1937.5000000000002?e=-.2533046188098832:e=-.325520883579:e=-.331628896481776;let n;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?t[9]>13.500000000000002?n=.031231253521808708:n=.05380836288014532:t[5]>423.00000000000006?t[8]>114.50000000000001?n=.06751619128429062:n=.09625089153176467:n=.027268163053989804:t[308]>1e-35?n=.060174483556283756:n=-.049062854038919135:t[3]>24.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?n=-.03969241799174589:n=.01086816842550381:t[31]>1e-35?n=-.003284694817583201:t[9]>6.500000000000001?t[4]>30.500000000000004?n=-.04224490699947552:n=-.011834162944360616:t[308]>1e-35?t[32]>1e-35?n=-.13448447971850278:n=-.019569456707046823:t[19]>1e-35?t[9]>1.5000000000000002?n=-.07256260662659254:t[4]>60.50000000000001?n=-.08227503453609311:n=-.020596416747563847:n=-.07396549241564149:t[8]>691.5000000000001?t[82]>1e-35?n=-.10046536995362734:t[133]>1e-35?n=-.06407649822752297:t[225]>1e-35?n=.08035785003303324:t[92]>1e-35?n=.018901360933204676:t[20]>1e-35?n=.05252546973665552:t[8]>2592.5000000000005?n=-.040543705016462955:n=-.011236043818320725:t[9]>17.500000000000004?n=.025560632674895334:t[308]>1e-35?t[0]>1847.5000000000002?n=.03527165701669741:n=-.0071847350825815035:t[127]>1e-35?n=.024373016379595405:t[9]>2.5000000000000004?n=-.0035090719709448288:n=-.03514829488063766;let r;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?r=.03848674861536988:t[5]>423.00000000000006?t[8]>114.50000000000001?t[9]>56.50000000000001?r=-.003764520033319488:r=.06570817919969299:t[4]>61.50000000000001?r=.028346156293069538:r=.0908154644362606:r=.02445594243234816:t[308]>1e-35?t[8]>65.50000000000001?r=.0019305229020073053:r=.09279357295883772:r=-.04458984161917124:t[3]>24.500000000000004?t[23]>1e-35?r=.0027405390271277013:t[4]>29.500000000000004?t[52]>1e-35?r=.044727478132905285:t[115]>1e-35?r=.10245804828855934:t[9]>17.500000000000004?r=-.03353173647469207:t[2]>98.50000000000001?r=-.10048106638102179:r=-.05484231104348874:t[31]>1e-35?r=.016807537467116516:t[9]>6.500000000000001?r=-.012113620535295137:t[4]>8.500000000000002?t[308]>1e-35?r=-.01882594250504289:r=-.05585658862796076:r=.04279591277938338:t[8]>691.5000000000001?t[82]>1e-35?r=-.09262278043707878:t[133]>1e-35?r=-.058454257768893625:t[32]>1e-35?r=-.09769348447126434:t[25]>1e-35?r=-.0725430043727677:t[122]>1e-35?r=-.10047841601578077:r=-.00580671054458958:t[9]>13.500000000000002?r=.021399199032818294:t[308]>1e-35?t[4]>10.500000000000002?r=-.0076376731757173515:r=.03394923033036848:t[127]>1e-35?r=.02070489091204209:r=-.02290162726126496;let i;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[9]>21.500000000000004?i=.010230295672324606:i=.038540509248742805:t[8]>125.50000000000001?t[1]>49.50000000000001?i=.03086356292895467:i=.057128750867458604:t[5]>888.5000000000001?i=.07861602941396924:i=.030523262699070908:t[308]>1e-35?i=.048236117667577356:t[8]>370.50000000000006?i=-.05642125069212264:i=-.007232836777168195:t[3]>24.500000000000004?t[23]>1e-35?t[131]>1e-35?i=.03640661467213915:i=-.005889820723907028:t[31]>1e-35?i=-.0009007166998276938:t[9]>6.500000000000001?i=-.022590340093882378:t[308]>1e-35?t[32]>1e-35?i=-.1215445089091064:i=-.01435612266219722:t[19]>1e-35?t[9]>1.5000000000000002?i=-.061555513040777825:t[4]>60.50000000000001?i=-.07053475504569347:i=-.013733369453963092:i=-.06302097189114152:t[227]>1e-35?i=-.05820440333190048:t[8]>683.5000000000001?t[82]>1e-35?i=-.08466979526809346:t[10]>24.500000000000004?i=-.017092159721119944:t[92]>1e-35?i=.03592901452463749:i=-.00359310519524756:t[5]>1809.5000000000002?t[243]>1e-35?i=-.03963116207386097:t[118]>1e-35?i=-.09483996283536394:t[217]>1e-35?i=-.03394542089519989:t[242]>1e-35?i=-.07985899422287938:i=.019706602160656964:t[9]>12.500000000000002?i=.014072998937735146:i=-.021156294523894684;let o;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[9]>21.500000000000004?o=.009197756540516563:o=.03458896869535166:t[5]>5082.500000000001?o=.08265545468131008:t[131]>1e-35?o=.0740738432473315:o=.045159136632942756:t[8]>319.50000000000006?o=-.04653401534465376:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?o=-.011400839766681709:o=.11149800187510031:o=-.08683250977599462:o=.08355310136724753:t[4]>23.500000000000004?t[23]>1e-35?t[131]>1e-35?o=.040389083779932555:o=-.009887614274108602:t[52]>1e-35?o=.03705353499757327:t[9]>6.500000000000001?o=-.025401260429257562:t[2]>98.50000000000001?o=-.09237673187534504:o=-.04298556869281803:t[222]>1e-35?o=-.045221965895986184:t[8]>691.5000000000001?t[133]>1e-35?o=-.05435318330148897:t[128]>1e-35?o=-.08672907303184191:t[227]>1e-35?o=-.05568304584186561:t[122]>1e-35?o=-.09623059693538563:t[225]>1e-35?o=.07558331642202279:t[82]>1e-35?o=-.07360566227233566:o=-.005646164647395919:t[242]>1e-35?o=-.08203758341228108:t[9]>13.500000000000002?o=.018726123829696042:t[308]>1e-35?t[4]>10.500000000000002?o=-.011153942154062704:o=.03132858912391067:t[127]>1e-35?o=.021455228822345174:t[23]>1e-35?o=.01959966745346997:o=-.021764790177579325;let a;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>284.50000000000006?t[121]>1e-35?t[18]>1e-35?a=.07547602514276922:a=-.08529678832140396:a=.030314822344598043:t[5]>888.5000000000001?t[4]>61.50000000000001?a=.011143589009415464:a=.0654700456802118:a=.021794712646632755:t[308]>1e-35?a=.04231872551095028:a=-.034381999950549455:t[4]>23.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?a=-.03678981254332261:a=.010518160384496255:t[8]>825.5000000000001?a=-.04506534842082387:t[9]>38.50000000000001?a=.01004983052203438:a=-.030580958620701027:t[39]>1e-35?a=-.12802435021505382:t[8]>691.5000000000001?t[23]>1e-35?t[203]>1e-35?t[4]>6.500000000000001?a=.030426957004611704:a=-.0726407693060581:a=.017395521646964375:t[4]>7.500000000000001?t[0]>93.50000000000001?t[9]>7.500000000000001?a=-.008024349629981291:t[31]>1e-35?a=.01296539930850471:t[308]>1e-35?a=-.012855016509024084:a=-.04564527976851505:a=-.15681420504058596:t[10]>4.500000000000001?t[243]>1e-35?a=-.1012064426380198:a=-.0062808850924854194:a=.030706323726162416:t[9]>13.500000000000002?a=.017081636133736405:t[308]>1e-35?t[4]>10.500000000000002?a=-.009306613091760644:t[4]>1.5000000000000002?a=.03655523200850989:a=-.02671654212893341:t[127]>1e-35?a=.019261510468604387:a=-.017627818570628936;let l;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>892.5000000000001?t[308]>1e-35?l=.036100405995889276:l=.011709313297015793:t[0]>119.50000000000001?t[8]>125.50000000000001?l=.03622542297472574:l=.05595579157301536:l=-.02234751038146796:t[8]>319.50000000000006?l=-.040132029478400735:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?l=-.009306153573847916:l=.10058509567064988:l=-.0785668890966017:t[9]>28.500000000000004?l=-.04781977604130416:l=.09753292614937459:t[4]>23.500000000000004?t[131]>1e-35?l=.02372493254975127:t[148]>1e-35?l=.028103095989516644:t[4]>58.50000000000001?t[10]>1e-35?l=-.05000852203469597:l=.02922366846119705:t[23]>1e-35?l=-.0026335076988151292:l=-.03073993752935585:t[222]>1e-35?l=-.03867374428185713:t[32]>1e-35?l=-.07220729365053084:t[39]>1e-35?l=-.11624524614351733:t[8]>691.5000000000001?t[133]>1e-35?l=-.04836360271198036:t[8]>4968.500000000001?l=-.10873681915578029:t[149]>1e-35?l=-.11847484033769298:t[122]>1e-35?l=-.08916172460307559:t[82]>1e-35?l=-.06774726602152634:l=-.0033469147714351327:t[126]>1e-35?l=-.09474445392080015:t[8]>131.50000000000003?t[118]>1e-35?l=-.09002547031023511:l=.015475385187009489:t[25]>1e-35?l=-.08175501232759151:l=-.000429679055394914;let c;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>546.5000000000001?c=.021942996005324917:c=.042349138084484074:t[308]>1e-35?c=.036507270845732874:c=-.028981850556764995:t[3]>24.500000000000004?t[23]>1e-35?c=.00210930790963475:t[31]>1e-35?c=.006825358293027163:t[9]>6.500000000000001?c=-.013772084269062394:t[308]>1e-35?c=-.008307929099892574:t[19]>1e-35?c=-.027706313312904487:c=-.04891108984170914:t[134]>1e-35?c=-.0605730733844732:t[25]>1e-35?c=-.05347926493253117:t[227]>1e-35?c=-.049415829249003666:t[32]>1e-35?c=-.06807799662179595:t[308]>1e-35?t[4]>10.500000000000002?t[2]>13.500000000000002?c=-.00016302718260794637:c=-.10247095758122947:t[210]>1e-35?c=-.022149002072787024:t[95]>1e-35?c=.15222631630626304:c=.027393884520465712:t[9]>7.500000000000001?t[225]>1e-35?c=.13483346577752245:t[3]>9.500000000000002?t[243]>1e-35?c=-.045352728133789516:t[8]>683.5000000000001?c=.00474372227519902:c=.02635476098707525:t[92]>1e-35?c=.05659380819933452:t[105]>1e-35?c=.07431443210341222:t[186]>1e-35?c=.0915821133384904:c=-.016414750130401053:t[127]>1e-35?c=.011824693641866162:t[23]>1e-35?c=.0228468674288774:t[284]>1e-35?c=.06606936863302432:c=-.02872463273902358;let u;t[13]>1e-35?t[3]>1.5000000000000002?t[8]>125.50000000000001?t[288]>1e-35?u=-.019844363904157558:t[1]>50.50000000000001?t[131]>1e-35?u=.044961338592245194:u=.003659599513761676:t[121]>1e-35?u=-.04057103630479994:u=.03158560697078578:t[0]>421.50000000000006?t[4]>61.50000000000001?u=-.0003708603406529278:u=.05331312264472391:u=.0006575958601218936:t[8]>319.50000000000006?u=-.034654694051901545:t[7]>3.5000000000000004?t[0]>1230.5000000000002?t[0]>2579.5000000000005?u=-.0076053515916517005:u=.09116695486305336:u=-.07137458699162028:u=.06633130654035282:t[4]>29.500000000000004?t[23]>1e-35?t[4]>63.50000000000001?u=-.0308520802187302:u=.013156423968295541:t[115]>1e-35?u=.11581171687488252:t[52]>1e-35?t[10]>22.500000000000004?u=.12264179915175587:u=-.021905727233873535:t[8]>799.5000000000001?u=-.04181869575935412:u=-.023695901673350575:t[222]>1e-35?u=-.034612899265371776:t[8]>691.5000000000001?t[9]>98.50000000000001?u=-.06892116536821917:t[149]>1e-35?u=-.11194586444154514:t[133]>1e-35?u=-.04269583234000504:t[128]>1e-35?u=-.0644631966969502:t[8]>4968.500000000001?u=-.09650726096330133:u=-.004219129180139438:t[126]>1e-35?u=-.08038306745347751:t[5]>1809.5000000000002?u=.009265335288169993:t[9]>2.5000000000000004?u=.006447645462117438:u=-.021047132609551503;let d;t[13]>1e-35?t[3]>1.5000000000000002?t[9]>21.500000000000004?t[121]>1e-35?d=-.08436540015142402:t[8]>1861.5000000000002?d=-.01621425699342421:d=.01878613821895428:d=.031052879158242532:t[8]>319.50000000000006?d=-.031536619360997865:t[7]>3.5000000000000004?d=-.004510586962343298:d=.0596524941011746:t[4]>18.500000000000004?t[23]>1e-35?d=.004757490541310808:t[9]>6.500000000000001?d=-.008842393772207996:t[31]>1e-35?d=.0010536183837006993:t[308]>1e-35?d=-.008145882815435419:t[2]>98.50000000000001?d=-.08404937622173021:t[276]>1e-35?d=.0020072791321856663:t[19]>1e-35?d=-.023031820639490178:d=-.04553314326377875:t[8]>2134.5000000000005?d=-.02244583113572251:t[134]>1e-35?d=-.05592137394753121:t[308]>1e-35?t[49]>1e-35?d=.09989109704064947:t[4]>10.500000000000002?t[2]>13.500000000000002?d=-.00447733056482096:d=-.10191061664873849:d=.021765308380331864:t[9]>7.500000000000001?t[118]>1e-35?d=-.07570059131536411:t[243]>1e-35?d=-.040983393346598646:t[3]>9.500000000000002?d=.014763759061483812:t[92]>1e-35?d=.05136368898963024:d=-.008162398981149495:t[127]>1e-35?d=.013999119696708346:t[23]>1e-35?t[20]>1e-35?d=.14138985500120907:d=.008668274102844162:t[284]>1e-35?d=.06356484011042893:d=-.024781304572706303;let p;t[13]>1e-35?t[3]>8.500000000000002?t[8]>892.5000000000001?t[0]>384.50000000000006?p=.014387526569215037:t[8]>2266.5000000000005?p=-.1397298649743087:p=.007953931014097788:t[0]>119.50000000000001?t[4]>61.50000000000001?p=.0029819092211896296:t[218]>1e-35?p=.08450459375645737:p=.031646488019280654:p=-.03544960151460596:t[9]>9.500000000000002?p=-.026002317735915183:t[7]>1.5000000000000002?p=.005074258810794793:p=.0745247650477651:t[4]>29.500000000000004?t[131]>1e-35?p=.023269218675640847:t[148]>1e-35?p=.03812942399144545:t[115]>1e-35?p=.10512283476967227:p=-.02607307479736138:t[227]>1e-35?p=-.036576708299046294:t[101]>1e-35?p=.027948683650881864:t[149]>1e-35?p=-.08195628451594297:t[50]>1e-35?p=-.16997544922278504:t[8]>691.5000000000001?t[9]>101.50000000000001?p=-.06860333850762075:t[225]>1e-35?p=.06066641950951723:t[10]>22.500000000000004?t[1]>29.500000000000004?t[127]>1e-35?p=.028599705845427533:p=-.010746719511640914:t[0]>4877.500000000001?p=-.07251187886096228:p=-.021299712241446785:t[118]>1e-35?p=-.11902023760964736:p=15874469526809387e-21:t[8]>267.50000000000006?p=.01317292185402293:t[148]>1e-35?t[9]>20.500000000000004?p=.09614842415142123:p=.006049073167176467:t[189]>1e-35?p=.05562696451900713:p=-.006257541923837303;let m;t[13]>1e-35?t[9]>14.500000000000002?t[2]>11.500000000000002?t[1]>71.50000000000001?t[8]>1252.5000000000002?m=-.10069846585436666:m=-.010577995535809317:t[146]>1e-35?m=-.008877238274428668:t[280]>1e-35?m=.10076055897012692:t[6]>70.50000000000001?m=-.020603523042565547:t[7]>1.5000000000000002?m=.02819095420813202:m=-.1223354167911277:m=-.025073583348334844:t[8]>416.50000000000006?m=.01718560189149466:t[230]>1e-35?m=.12281803224342265:m=.03281276971308565:t[4]>14.500000000000002?t[23]>1e-35?t[21]>1e-35?m=-.13070568109867683:t[4]>63.50000000000001?m=-.027221825262496814:m=.01530862490082352:t[9]>6.500000000000001?t[5]>4320.500000000001?t[2]>31.500000000000004?m=-.00605574271293711:m=.04739407327741249:m=-.012537528620315956:t[31]>1e-35?t[20]>1e-35?m=.1252215087035768:m=.003905888677601057:t[52]>1e-35?m=.045466299731038815:t[2]>100.50000000000001?m=-.07815624550168065:t[308]>1e-35?m=-.007715815250508057:t[276]>1e-35?t[9]>1.5000000000000002?m=-.03538265083203445:t[18]>1e-35?m=.1591211669800727:m=.015151475408241136:t[8]>557.5000000000001?m=-.04225569725456342:m=-.022455546324243267:t[308]>1e-35?m=.01325441736085826:t[197]>1e-35?m=.03752194600682512:t[225]>1e-35?m=.06583712394533976:m=-.005205289866839043;let h;t[13]>1e-35?t[9]>21.500000000000004?t[2]>12.500000000000002?h=.010264022580774884:h=-.02335958814489217:t[8]>416.50000000000006?t[3]>4.500000000000001?t[295]>1e-35?h=-.0936747137352166:t[0]>384.50000000000006?h=.019846244507320695:h=-.0751102554077272:h=-.026885329334203723:t[0]>966.5000000000001?t[10]>48.50000000000001?h=.11654906890054273:h=.0346250587613322:t[4]>39.50000000000001?h=-.08568002378645614:t[9]>16.500000000000004?h=-.12010535752923689:h=.021321923389033808:t[4]>14.500000000000002?t[23]>1e-35?t[21]>1e-35?h=-.12056431231412057:t[131]>1e-35?h=.03652965550568472:h=.002563006128791669:t[9]>6.500000000000001?t[30]>1e-35?h=-.10141481732178981:h=-.003936457893178248:t[31]>1e-35?h=.008215898756249477:t[52]>1e-35?t[0]>4188.500000000001?h=.12972828769588213:h=-.003137412232297087:t[2]>100.50000000000001?h=-.0730872929087944:t[308]>1e-35?h=-.006958622747243333:t[35]>1e-35?t[0]>3707.5000000000005?h=.07934620723812878:h=-.018598568353702116:h=-.030635505446410763:t[128]>1e-35?h=-.06962290453843294:t[84]>1e-35?h=-.15290337844960322:t[308]>1e-35?t[8]>2543.5000000000005?h=-.034938657503885584:h=.016339322898966915:t[197]>1e-35?h=.03358907965870046:t[18]>1e-35?h=-.01754013791515288:h=-.0004944586067698557;let g;t[13]>1e-35?t[308]>1e-35?t[210]>1e-35?g=.005888790687820524:g=.0429676533834978:t[2]>7.500000000000001?t[0]>119.50000000000001?t[6]>79.50000000000001?g=-.0224319889201976:t[212]>1e-35?g=.06249587051783863:t[8]>963.5000000000001?t[8]>1156.5000000000002?g=.010357273289123324:g=-.029749145161304082:t[218]>1e-35?g=.06449336340743606:g=.018047654539345502:g=-.07350502390293116:g=-.019594829995832414:t[4]>39.50000000000001?g=-.019338083179859314:t[39]>1e-35?g=-.10427066919173111:t[222]>1e-35?t[0]>612.5000000000001?g=-.019197415255018464:g=-.0836562507048181:t[149]>1e-35?g=-.07679624472577429:t[32]>1e-35?g=-.05097506748590604:t[191]>1e-35?g=.04670476485250936:t[30]>1e-35?g=-.05313073892148652:t[8]>691.5000000000001?t[23]>1e-35?t[203]>1e-35?t[4]>8.500000000000002?g=.03930363008271334:g=-.06029171685615689:g=.016203086182431294:t[4]>7.500000000000001?g=-.013824248237085224:t[10]>4.500000000000001?t[94]>1e-35?g=-.09817668643367765:t[10]>40.50000000000001?g=-.023558078753593125:g=.0065113494780482326:t[8]>809.5000000000001?t[297]>1e-35?g=-.1352063548573715:g=.058203900441270634:g=-.035243959159285736:t[10]>59.50000000000001?t[1]>43.50000000000001?g=-.012552876807800442:g=.05991247777734298:g=.0035893102109330177;let y;t[13]>1e-35?t[9]>21.500000000000004?t[145]>1e-35?y=.03507251990078782:t[2]>14.500000000000002?y=.004905698363309292:t[8]>2421.5000000000005?y=-.10306119951984316:y=-.018951037816654928:t[8]>416.50000000000006?t[3]>4.500000000000001?t[295]>1e-35?y=-.08503171085833393:y=.015130974593044409:y=-.024425267075198206:y=.02624054905103126:t[4]>19.500000000000004?t[131]>1e-35?y=.02100191580704534:t[32]>1e-35?t[8]>2302.5000000000005?y=.09908783187786288:y=-.06920877329925636:t[8]>241.50000000000003?y=-.016756131804203496:t[9]>33.50000000000001?y=.04903179955263626:t[217]>1e-35?y=-.047416847619291644:y=-.0017200891991431119:t[39]>1e-35?y=-.10389927604977028:t[134]>1e-35?y=-.050480365434872866:t[178]>1e-35?y=-.05167855791556937:t[8]>2134.5000000000005?y=-.01663197335585307:t[242]>1e-35?y=-.05361323756615453:t[118]>1e-35?y=-.05299780866211368:t[10]>24.500000000000004?t[10]>55.50000000000001?t[8]>764.5000000000001?y=-.0016544848369620534:y=.04494144460483587:y=-.009283616456736156:t[121]>1e-35?t[0]>4463.500000000001?y=.051166688553608355:y=-.06623908820705383:t[84]>1e-35?y=-.12990936092409747:t[306]>1e-35?y=-.07020596855118943:t[49]>1e-35?y=.06272964802556856:t[192]>1e-35?y=.06540204627162581:y=.008277910531592885;let v;t[13]>1e-35?t[308]>1e-35?t[210]>1e-35?v=.003325460510319164:v=.037153108286272905:t[2]>12.500000000000002?t[1]>124.50000000000001?v=-.09880713344892134:t[7]>60.50000000000001?t[10]>71.50000000000001?v=.0697359767152808:t[230]>1e-35?v=.06513506845651572:v=-.02826625276613455:t[5]>246.50000000000003?t[8]>95.50000000000001?v=.013616385013146277:v=.04171540100223404:v=-.04360396575094823:t[212]>1e-35?v=.025945477945627522:v=-.019793208261535442:t[4]>39.50000000000001?t[25]>1e-35?v=-.07856453318384411:v=-.014803893522351739:t[39]>1e-35?v=-.09185452630751932:t[149]>1e-35?v=-.07122426086157027:t[134]>1e-35?v=-.04231052091434186:t[227]>1e-35?v=-.029815824273994197:t[50]>1e-35?v=-.15736496271211153:t[222]>1e-35?v=-.02360285356956629:t[128]>1e-35?v=-.03922080193836443:t[136]>1e-35?v=-.07219685327698587:t[10]>24.500000000000004?t[1]>8.500000000000002?v=-.0029736170756835783:v=-.06482902102259112:t[84]>1e-35?v=-.11340924635708383:t[94]>1e-35?v=-.03635703457792193:t[118]>1e-35?v=-.058181913914186034:t[126]>1e-35?v=-.062030576241517366:t[116]>1e-35?v=-.045086301850604006:t[25]>1e-35?v=-.031665223656767286:t[203]>1e-35?v=-.009444685731407691:v=.0112265153772187;let b;t[13]>1e-35?t[1]>64.50000000000001?t[9]>14.500000000000002?t[9]>54.50000000000001?b=.022717227245241684:b=-.049700413274686266:b=.007175776918589741:t[5]>50.50000000000001?t[8]>61.50000000000001?t[21]>1e-35?b=-.07927556792063156:t[3]>8.500000000000002?t[4]>23.500000000000004?t[281]>1e-35?b=-.12263724050601095:b=.0070743478891288035:t[288]>1e-35?b=-.050439138582109:b=.0255701593657891:b=-.005812703740580558:t[6]>49.50000000000001?b=-.008542694147899113:b=.035147383686665:b=-.0960461939274094:t[32]>1e-35?b=-.04555453745517765:t[222]>1e-35?t[0]>612.5000000000001?b=-.01800870272656664:b=-.07817304234604389:t[30]>1e-35?b=-.05227061750368981:t[25]>1e-35?t[0]>4449.500000000001?t[217]>1e-35?b=.08778416018479411:b=-.026563982720830256:b=-.05296139548112329:t[50]>1e-35?b=-.14926464875852247:t[8]>779.5000000000001?t[133]>1e-35?b=-.036572140520852024:t[183]>1e-35?b=-.10766853736801459:b=-.003966794968701808:t[217]>1e-35?t[5]>5237.500000000001?b=.09513215942486053:b=-.03641865277445567:t[10]>59.50000000000001?b=.03177172388687933:t[39]>1e-35?b=-.10234241303898953:t[243]>1e-35?b=-.02966738115984321:t[190]>1e-35?b=-.04312785336449181:t[118]>1e-35?b=-.05808521194081524:b=.006720381600740378;let E;t[308]>1e-35?t[5]>423.00000000000006?t[133]>1e-35?E=-.046284053681928526:t[210]>1e-35?E=49778070699847876e-21:t[13]>1e-35?E=.03328070054739309:t[128]>1e-35?E=-.054790214922938896:t[126]>1e-35?E=-.08524792218532945:E=.014414055975542446:t[1]>38.50000000000001?E=-.07287851335872973:E=.005263371501687163:t[9]>7.500000000000001?t[21]>1e-35?t[10]>4.500000000000001?E=-.12459748864088374:E=-.004626323021331593:t[298]>1e-35?t[4]>64.50000000000001?E=.13044981041138526:t[9]>71.50000000000001?E=-.056068402282406865:t[9]>12.500000000000002?E=.038957722962512764:E=-.04598815982492169:t[8]>691.5000000000001?t[126]>1e-35?E=-.0852126122372075:t[225]>1e-35?E=.10082066771689505:t[1]>161.50000000000003?E=-.11609832500613824:t[3]>8.500000000000002?t[8]>1685.5000000000002?E=-.010835400874777133:E=.004607419973807752:E=-.016989075258564062:E=.009205417251698097:t[23]>1e-35?t[20]>1e-35?E=.10184317139657878:t[0]>5724.500000000001?E=-.1163666496650542:t[1]>106.50000000000001?E=.1303850608190687:t[129]>1e-35?E=.10745031509534769:E=.006166901738036226:t[31]>1e-35?E=.010177092833155127:t[13]>1e-35?t[0]>213.50000000000003?E=.005004582564506611:E=-.10481581731668346:t[19]>1e-35?E=-.009850706427306281:E=-.02608226348051303;let _;t[13]>1e-35?t[1]>64.50000000000001?t[2]>4.500000000000001?_=-.0024117174588695603:_=-.058339700513831916:t[212]>1e-35?t[0]>2215.5000000000005?t[8]>847.5000000000001?t[10]>21.500000000000004?t[1]>39.50000000000001?_=.04575380761203418:_=-.10025595041353463:t[15]>1e-35?_=.17705790384964004:_=.0073813837628615014:_=.07676373681392407:_=-.027167992693885996:t[3]>11.500000000000002?t[280]>1e-35?_=.07078572910026419:t[4]>23.500000000000004?_=.005513918674164821:_=.0206586476926392:t[0]>5269.500000000001?_=.07706773525822633:_=-.010233826953776122:t[148]>1e-35?t[8]>1622.5000000000002?_=-.03204783603215824:_=.027405418223981973:t[4]>14.500000000000002?t[131]>1e-35?t[9]>1.5000000000000002?t[0]>5026.500000000001?_=-.0930246911392012:_=.011173087289703683:t[3]>24.500000000000004?_=.03281421918878597:_=.12449335091369843:t[204]>1e-35?_=.06634531187326123:_=-.011522999669353388:t[92]>1e-35?t[10]>42.50000000000001?_=-.041196758517013515:t[4]>7.500000000000001?_=-2942718111029724e-20:t[4]>6.500000000000001?_=.11953909558532852:_=.03188615019450534:t[122]>1e-35?_=-.0616037324662157:t[101]>1e-35?_=.027230889593349412:t[8]>4968.500000000001?_=-.1113986516540856:t[3]>2.5000000000000004?_=-.002045140426885727:t[129]>1e-35?_=.12641163374304432:_=.014909826232873194;let k;t[308]>1e-35?t[0]>7277.500000000001?k=-.09337446795435:t[5]>423.00000000000006?t[133]>1e-35?k=-.040884836258675006:t[210]>1e-35?k=-.0003719413278428804:t[13]>1e-35?k=.030287610160818174:k=.011174130013595384:t[1]>38.50000000000001?k=-.0662442170185784:k=.004332185707008564:t[9]>7.500000000000001?t[145]>1e-35?t[285]>1e-35?k=-.08092286307197555:k=.029866363328584986:t[21]>1e-35?t[10]>4.500000000000001?k=-.1155211149523894:k=-.0032903546638958538:t[149]>1e-35?k=-.03632198993199768:t[3]>9.500000000000002?t[8]>999.5000000000001?k=-.003507023626534306:t[128]>1e-35?t[4]>13.500000000000002?t[0]>3459.5000000000005?k=-.025416927789760076:k=.02777568919793122:k=-.10310351509769732:k=.013549608903688785:t[186]>1e-35?k=.08513865847420551:k=-.009306721292510369:t[31]>1e-35?k=.009780833952582307:t[23]>1e-35?k=.011143773934157629:t[210]>1e-35?k=.025354797285173356:t[17]>1e-35?t[10]>3.5000000000000004?k=-.04846287537743046:k=-.014647271080376757:t[2]>5.500000000000001?t[7]>57.50000000000001?k=-.034224938681445764:t[8]>1641.5000000000002?k=-.027298372075800673:t[191]>1e-35?t[10]>18.500000000000004?k=-.027950103994861836:k=.14575930827829034:k=-.007124740389354946:t[10]>22.500000000000004?k=.013173304107866726:k=-.11119620042551365;let P;t[131]>1e-35?P=.01892225243240137:t[308]>1e-35?t[5]>691.5000000000001?t[133]>1e-35?P=-.037118314390013646:t[1]>51.50000000000001?t[5]>3749.5000000000005?t[8]>58.50000000000001?P=-.022305242912035072:P=.024792895826340516:P=.013666137278072166:t[88]>1e-35?t[10]>27.500000000000004?P=.2080083584805785:P=.04247197078083379:t[10]>40.50000000000001?t[18]>1e-35?t[1]>27.500000000000004?P=.060783227455868206:P=-.056904865557409035:P=-.03278952553107572:t[192]>1e-35?P=.13117402617043625:P=.01647119888257836:P=-.01825870445636398:t[9]>6.500000000000001?t[298]>1e-35?P=.026536210945939682:t[8]>691.5000000000001?t[126]>1e-35?P=-.07927319604548912:t[10]>3.5000000000000004?t[21]>1e-35?P=-.11083976837572328:t[146]>1e-35?P=-.03359294484446772:P=-.0042815953591236475:t[190]>1e-35?P=-.09264239592903775:t[10]>1e-35?P=.022282638485105657:P=-.0205994057928458:t[5]>4918.500000000001?P=.03430715695199153:t[243]>1e-35?t[2]>57.50000000000001?P=.08935072241972036:P=-.03781647876237494:P=.0062655753179671515:t[31]>1e-35?P=.008603500300349887:t[230]>1e-35?P=.03350056932774173:t[23]>1e-35?t[241]>1e-35?P=.10277555508503314:P=.0017901817172993888:t[2]>98.50000000000001?P=-.05920081229672715:P=-.015722173275739208;let N;t[13]>1e-35?t[118]>1e-35?N=.07957905150112207:t[1]>125.50000000000001?N=-.0662620579858685:t[145]>1e-35?N=.029682040828779843:t[19]>1e-35?t[6]>15.500000000000002?N=-.0009597832580977798:N=-.081474760755753:t[212]>1e-35?N=.03637001492325179:N=.006912305498963309:t[32]>1e-35?N=-.03919900630910754:t[134]>1e-35?N=-.036225295529777886:t[4]>4.500000000000001?t[5]>384.50000000000006?t[204]>1e-35?N=.06671440854602108:t[136]>1e-35?N=-.07577364230133474:t[148]>1e-35?t[4]>7.500000000000001?N=.026430947016830915:N=-.04075501264495112:t[9]>93.50000000000001?N=-.04353169430417609:t[50]>1e-35?N=-.1411224537622882:t[17]>1e-35?t[49]>1e-35?N=.068392679163672:t[10]>1.5000000000000002?N=-.0209659792007492:N=-.0004393235559249831:t[133]>1e-35?t[9]>64.50000000000001?N=.07254524592323175:N=-.0319087835282534:N=.00037444813327793425:N=-.025138768151370408:t[243]>1e-35?N=-.050010891710502096:t[94]>1e-35?N=-.0817513550778599:t[122]>1e-35?N=-.061038875809822285:t[19]>1e-35?t[8]>1085.5000000000002?N=-.008408408775061623:t[2]>5.500000000000001?t[218]>1e-35?N=.1454877641381946:N=.053787998331240316:t[9]>33.50000000000001?N=.08602629796680285:N=-.03895127455803038:N=.008830878042315722;let U;t[131]>1e-35?U=.01687979707990516:t[8]>2915.5000000000005?t[297]>1e-35?U=.07473600489975568:t[0]>93.50000000000001?U=-.021596848506011502:U=-.13840802327735696:t[230]>1e-35?t[4]>6.500000000000001?t[0]>4977.500000000001?U=.10264284346448256:U=.031042487183181262:U=-.016653982936827776:t[4]>60.50000000000001?t[10]>75.50000000000001?U=.04226403420647408:t[10]>1e-35?t[0]>4733.500000000001?U=.006271403149804702:U=-.030013637555715046:t[0]>4449.500000000001?U=-.06556876058654929:U=.06437994816903034:t[32]>1e-35?U=-.043814577251655815:t[308]>1e-35?t[0]>7277.500000000001?U=-.09349726304052086:t[210]>1e-35?U=-.0035960132209098003:t[5]>691.5000000000001?t[133]>1e-35?U=-.029188394315052574:U=.017219308333820193:U=-.017378928852189585:t[9]>6.500000000000001?t[0]>2653.5000000000005?t[149]>1e-35?U=-.04428555753857688:U=.0001456106867817353:t[5]>213.50000000000003?U=.01740292726636365:U=-.011361718115556464:t[7]>4.500000000000001?t[0]>316.50000000000006?t[19]>1e-35?t[10]>54.50000000000001?U=.03410288911259329:t[121]>1e-35?U=-.06056527462120627:t[8]>2592.5000000000005?U=.12166808844363577:t[191]>1e-35?U=.11669879218998758:U=-.001664858391716235:U=-.01262927450503166:U=-.04506589951879664:t[227]>1e-35?U=-.08548904959752329:U=.02156080776537726;let ne;t[306]>1e-35?t[149]>1e-35?ne=-.1389218965136736:ne=-.032218642644416894:t[13]>1e-35?ne=.006465035217331847:t[50]>1e-35?ne=-.1381687930130022:t[179]>1e-35?ne=-.13112784985951215:t[148]>1e-35?t[8]>1726.5000000000002?ne=-.03262719498763048:ne=.023342916702125613:t[191]>1e-35?ne=.030005484947580197:t[4]>4.500000000000001?t[204]>1e-35?ne=.047767773119269434:t[136]>1e-35?t[0]>1937.5000000000002?ne=-.09989343595668776:ne=.06533942033334243:t[15]>1e-35?t[9]>86.50000000000001?ne=-.10577989354150097:t[8]>668.5000000000001?t[126]>1e-35?ne=-.09165257825246746:t[9]>32.50000000000001?ne=.02484870392366004:ne=-.008499493096971395:t[8]>24.500000000000004?ne=.02459679192828244:ne=-.010527978013140512:t[25]>1e-35?t[217]>1e-35?ne=.0015644546318714849:ne=-.06579524865022705:ne=-.0060233890975120614:t[122]>1e-35?t[1]>36.50000000000001?ne=.03331853632960164:ne=-.09482264761126993:t[19]>1e-35?t[8]>1430.5000000000002?ne=-.019091477207111116:ne=.037878468575478504:t[94]>1e-35?ne=-.08013082284576584:t[4]>2.5000000000000004?t[186]>1e-35?ne=.16919658785098224:t[243]>1e-35?ne=-.06580584936754524:ne=.01567555159935563:t[129]>1e-35?ne=.06721746994993226:t[10]>32.50000000000001?ne=-.046394462507797975:ne=-.006436180519584767;let he;t[131]>1e-35?he=.015039096856208693:t[8]>779.5000000000001?t[145]>1e-35?he=.019122095523977856:t[298]>1e-35?he=.023828936462317443:t[1]>23.500000000000004?t[5]>384.50000000000006?t[7]>59.50000000000001?he=-.026094309429557913:t[204]>1e-35?he=.09163404305658318:t[1]>27.500000000000004?t[149]>1e-35?t[6]>34.50000000000001?he=.012643810980689466:he=-.07884161741497837:he=-.0025267379810891104:t[2]>43.50000000000001?t[0]>2860.5000000000005?he=.04493082949897325:he=.18046359750455776:t[7]>18.500000000000004?he=-.018667348656891496:he=.02584325784698236:he=-.045696524897545915:t[0]>3321.5000000000005?t[201]>1e-35?he=.04749240016989375:he=-.0333334578246718:t[5]>3276.5000000000005?he=.11330554740098908:t[7]>94.50000000000001?he=.1296600395033268:he=-.003576436308940934:t[15]>1e-35?t[183]>1e-35?he=-.13787130789142835:t[0]>1847.5000000000002?he=.017915229729920556:t[10]>23.500000000000004?t[10]>31.500000000000004?t[6]>7.500000000000001?he=.028856848462727104:he=-.11197632885851168:he=.08169801342016791:t[1]>22.500000000000004?he=-.021052888644970163:he=.019048604298876753:t[7]>4.500000000000001?he=-.002603328695276418:t[7]>1.5000000000000002?t[2]>5.500000000000001?he=.03432638833359197:he=-.0036767863082454973:t[1]>48.50000000000001?he=.03087375270128195:t[2]>3.5000000000000004?he=-.04219917149740248:he=.018818493993207935;let ae;t[306]>1e-35?ae=-.04076858123502297:t[13]>1e-35?t[1]>67.50000000000001?t[9]>14.500000000000002?t[9]>53.50000000000001?t[8]>1971.5000000000002?ae=-.09091897542577475:ae=.04042943082645558:t[218]>1e-35?ae=.056254985867151:ae=-.053848117950183044:ae=.003881630017086845:t[5]>5152.500000000001?t[8]>857.5000000000001?t[6]>28.500000000000004?ae=.021581808008986944:ae=-.05639286496176611:ae=.052838875036198954:t[5]>50.50000000000001?t[5]>4082.5000000000005?t[17]>1e-35?ae=.023061479860228728:t[145]>1e-35?t[9]>10.500000000000002?ae=.023885302967553288:ae=.1617794086125622:t[212]>1e-35?ae=.04504545345658806:t[3]>17.500000000000004?t[4]>45.50000000000001?ae=-.03948072448245435:t[1]>47.50000000000001?t[9]>18.500000000000004?ae=.01894935813286188:ae=-.06449356357429188:ae=.012297239104320094:t[1]>26.500000000000004?t[8]>33.50000000000001?ae=-.034718828212885515:ae=.0898976288814321:t[1]>17.500000000000004?ae=-.15440137451988326:ae=-.03864183216821465:ae=.009988507307006308:ae=-.08540311947043305:t[50]>1e-35?ae=-.13323659732101975:t[134]>1e-35?ae=-.031820386486894385:t[32]>1e-35?t[8]>2302.5000000000005?ae=.08082476177379844:ae=-.041665761903645876:t[179]>1e-35?ae=-.12405023987936657:t[39]>1e-35?ae=-.06247416524997478:t[138]>1e-35?ae=-.10724031753676487:ae=-.0005423122305122404;let G;t[308]>1e-35?G=.006160742906729798:t[190]>1e-35?t[0]>2461.5000000000005?t[10]>22.500000000000004?G=.023223358334607133:G=-.04383410185346742:G=-.08542395045055405:t[297]>1e-35?t[8]>51.50000000000001?t[1]>13.500000000000002?G=.023406489302867494:G=-.085521220804058:G=-.02921899554854833:t[298]>1e-35?t[9]>12.500000000000002?G=.028120059780969632:G=-.04211009474298743:t[294]>1e-35?G=-.05040415676618239:t[86]>1e-35?t[1]>36.50000000000001?G=-.0993035220737934:G=-.0005384930611060366:t[230]>1e-35?t[4]>6.500000000000001?G=.029770210551187937:G=-.016272917551655715:t[4]>60.50000000000001?t[280]>1e-35?G=.06421359317599738:G=-.01963732469244167:t[218]>1e-35?t[3]>3.5000000000000004?G=.024368404612215164:G=-.04045232374803373:t[131]>1e-35?G=.017372701982485795:t[120]>1e-35?G=.08812710275150198:t[18]>1e-35?t[90]>1e-35?G=.18451364351180236:t[7]>33.50000000000001?G=-.03850813130183531:t[195]>1e-35?G=.06966114053446336:t[3]>16.500000000000004?G=-.0012869181693341211:t[0]>4242.500000000001?G=-.054625548611291035:G=-.014431095117473881:t[5]>4558.500000000001?t[8]>1.5000000000000002?G=.006302103427145562:G=.13967622319898698:t[121]>1e-35?G=-.038798585213145644:t[5]>4544.500000000001?G=-.08050498033009466:G=-.002986974112681435;let W;t[0]>384.50000000000006?t[2]>101.50000000000001?t[1]>16.500000000000004?W=-.03461119351456781:W=.05659026566680352:t[306]>1e-35?t[2]>14.500000000000002?t[149]>1e-35?W=-.12404435523286539:W=-.0034376913880382956:W=-.09821622245095822:t[131]>1e-35?t[9]>1.5000000000000002?W=.0037507103585310234:W=.03610387965829944:t[8]>999.5000000000001?t[9]>137.50000000000003?W=-.11985021663179699:t[0]>1847.5000000000002?t[126]>1e-35?W=-.04832024079663151:t[37]>1e-35?W=-.037103393468366934:W=-.004248086592531705:t[8]>3084.0000000000005?t[9]>43.50000000000001?W=.032539071163832034:t[5]>1643.5000000000002?W=.036408625378035665:t[0]>1500.5000000000002?W=-.1346358322854993:W=-.027586559522081014:t[3]>1e-35?t[190]>1e-35?W=-.1133991164577881:t[9]>52.50000000000001?W=-.024478640359723122:W=.03673777861098756:W=-.1037451237591819:t[230]>1e-35?t[9]>48.50000000000001?t[10]>20.500000000000004?W=.002583438691776944:W=.10773520810108106:t[9]>12.500000000000002?t[1]>16.500000000000004?W=-.02141222346712401:W=.06392462314316179:t[4]>12.500000000000002?W=.08700122294434816:t[8]>267.50000000000006?W=.056923170082743224:W=-.07716309825583327:t[32]>1e-35?W=-.03961343943752142:W=.002674914122888783:t[1]>42.50000000000001?W=-.05217539654421676:t[145]>1e-35?W=.09553630282946368:W=-.009424791262477729;let ue;t[183]>1e-35?ue=-.05753337139158443:t[308]>1e-35?ue=.00562436671450989:t[9]>7.500000000000001?t[21]>1e-35?t[10]>8.500000000000002?ue=-.10477869875380448:ue=-.0070301869937306055:t[3]>9.500000000000002?t[8]>1765.5000000000002?t[0]>4571.500000000001?ue=-.12526505173232894:t[10]>1e-35?t[9]>71.50000000000001?ue=-.04442302951713574:ue=.00012409888451734224:ue=-.092199119633697:t[225]>1e-35?ue=.13773072450201831:t[0]>2882.5000000000005?ue=.0028540012229920533:t[298]>1e-35?ue=.07134486044361629:ue=.014297412329837425:t[145]>1e-35?ue=.05608385321902638:t[92]>1e-35?ue=.038298413603926135:t[107]>1e-35?t[2]>6.500000000000001?ue=-.0039957800609801315:ue=.0776927564241081:t[203]>1e-35?ue=-.05502900859432093:t[105]>1e-35?ue=.06062892720841595:ue=-.009574839629252128:t[31]>1e-35?ue=.009488858841144216:t[23]>1e-35?t[20]>1e-35?ue=.08818126313644752:t[8]>161.50000000000003?ue=.014353968957885408:ue=-.022240738532827903:t[210]>1e-35?ue=.024648862719806694:t[2]>5.500000000000001?t[4]>4.500000000000001?t[17]>1e-35?t[10]>16.500000000000004?ue=-.043902062079383485:ue=-.014741559220396223:ue=-.00934935734853194:t[6]>32.50000000000001?ue=.1514593126307404:ue=.010771222510801532:t[10]>22.500000000000004?ue=.01412495209334078:ue=-.08576940379502533;let ie;t[0]>384.50000000000006?t[84]>1e-35?ie=-.06647690967306838:t[2]>101.50000000000001?ie=-.024451334501552457:t[306]>1e-35?ie=-.034517188927733505:t[131]>1e-35?t[9]>1.5000000000000002?ie=.0031858381443673127:ie=.032574927024450646:t[204]>1e-35?t[1]>62.50000000000001?ie=-.08601340441214533:t[1]>29.500000000000004?ie=.10487598629539963:t[8]>597.5000000000001?ie=-.0786529133673238:ie=.08689436600511559:t[8]>779.5000000000001?t[10]>2.5000000000000004?t[9]>100.50000000000001?ie=-.04883600353740688:t[126]>1e-35?ie=-.03794042763348827:ie=-.003358871967539988:t[210]>1e-35?ie=.054991356498447566:t[6]>19.500000000000004?ie=-.007418396981635549:ie=.018032606049498613:t[18]>1e-35?t[7]>35.50000000000001?t[2]>44.50000000000001?ie=-.02143003429501711:ie=-.09016000554055564:t[1]>19.500000000000004?t[1]>42.50000000000001?t[8]>17.500000000000004?ie=-.006636355416244082:ie=-.06483095743431454:t[4]>21.500000000000004?ie=-.028975965946833545:ie=.022012264796522657:ie=-.06653648243193663:t[5]>4593.500000000001?ie=.01753551428088607:t[217]>1e-35?ie=-.028864824937700297:t[94]>1e-35?ie=-.04885192273020658:t[279]>1e-35?ie=.08105715462329498:t[121]>1e-35?ie=-.04576676034750651:ie=.004795141324949362:t[1]>42.50000000000001?ie=-.047446619702809195:t[145]>1e-35?ie=.08400495571952321:ie=-.00854528836489364;let V;t[294]>1e-35?V=-.042529778074638265:t[266]>1e-35?V=-.1180276669679798:t[134]>1e-35?V=-.026818144353279623:t[183]>1e-35?V=-.05120747503479363:t[227]>1e-35?t[8]>1641.5000000000002?V=-.07265906898294434:t[4]>12.500000000000002?t[17]>1e-35?V=-.027516137530797014:t[0]>4331.500000000001?t[1]>64.50000000000001?V=-.03049646619610203:t[1]>50.50000000000001?V=.20634590755061122:V=.06956378103625731:t[0]>3770.5000000000005?V=-.07946414366134913:t[19]>1e-35?V=.17083312065604694:t[2]>21.500000000000004?V=-.02327981978127724:V=.129717297518715:t[145]>1e-35?V=.006891245076133524:V=-.0789123467863741:t[3]>99.50000000000001?V=-.02022281202803071:t[302]>1e-35?t[10]>47.50000000000001?V=.06447639919732716:V=-.05457561977645972:t[306]>1e-35?V=-.029995903305383882:t[191]>1e-35?V=.030596508110850414:t[242]>1e-35?V=-.024085578702020216:t[8]>3198.5000000000005?t[297]>1e-35?V=.09518584795377832:V=-.018197744600833596:t[13]>1e-35?V=.006751790086127549:t[148]>1e-35?V=.01904174573618417:t[99]>1e-35?V=.025287735102561926:t[4]>14.500000000000002?V=-.004364337681643273:t[1]>15.500000000000002?t[35]>1e-35?V=-.09467943982430241:t[243]>1e-35?V=-.02521824751996268:V=.005437570718352172:V=-.022476214821960674;let O;t[0]>384.50000000000006?t[84]>1e-35?O=-.06088131453064195:t[147]>1e-35?O=-.05332792965930566:t[135]>1e-35?t[9]>32.50000000000001?O=.04219361472548491:O=-.07227529211725771:t[10]>4.500000000000001?t[21]>1e-35?O=-.0787279848043689:t[17]>1e-35?t[3]>18.500000000000004?t[188]>1e-35?O=-.054347604504400286:t[0]>3544.5000000000005?t[0]>5850.500000000001?O=-.11431764534511478:O=.013549717238356157:O=-.020987333767091276:t[6]>2.5000000000000004?O=-.02914877855133127:O=.08483464900160231:t[8]>58.50000000000001?t[183]>1e-35?O=-.10087072787978416:t[37]>1e-35?O=-.030467397753331196:t[229]>1e-35?O=-.1017559811057469:t[4]>20.500000000000004?O=-.00413177742240167:t[20]>1e-35?O=.05213315982685969:O=.0037921635866823133:t[8]>51.50000000000001?O=.07327913092421544:t[6]>49.50000000000001?O=-.03457694284156811:t[6]>18.500000000000004?t[7]>17.500000000000004?O=.02744420891894289:O=.11288946357194463:O=.003482908820966248:t[18]>1e-35?t[1]>20.500000000000004?t[7]>4.500000000000001?O=-.012329314369909049:O=.026816658655600168:O=-.0872405354618811:O=.007872673500247845:t[1]>42.50000000000001?O=-.04309044198258254:t[145]>1e-35?O=.07572529147860785:t[7]>5.500000000000001?O=-.013837187093264945:t[1]>17.500000000000004?O=.04208698439539668:O=-.06284346769019863;let Y;t[294]>1e-35?Y=-.0384794324818203:t[266]>1e-35?Y=-.1087205883821061:t[32]>1e-35?t[8]>2302.5000000000005?Y=.07432960094940501:Y=-.035248735855751855:t[134]>1e-35?Y=-.02456191365284949:t[121]>1e-35?t[0]>4720.500000000001?t[1]>39.50000000000001?Y=-.01706896375068821:Y=.08212247914968074:t[2]>59.50000000000001?Y=-.09546478958824225:t[6]>53.50000000000001?Y=.12317082897575611:t[1]>56.50000000000001?t[4]>7.500000000000001?t[0]>3560.5000000000005?Y=.02816463285971267:Y=.15449139016588445:Y=-.10199787406123524:Y=-.038068684323297096:t[223]>1e-35?t[8]>668.5000000000001?Y=-.13924786681478077:Y=-.0072772442570213335:t[39]>1e-35?Y=-.05392786531177836:t[0]>93.50000000000001?t[40]>1e-35?Y=-.054059371343144036:t[306]>1e-35?t[2]>14.500000000000002?t[149]>1e-35?Y=-.11174465335620831:Y=.00013144040097180107:Y=-.08493919336681105:t[42]>1e-35?Y=-.11078582572836196:t[84]>1e-35?t[4]>17.500000000000004?Y=-.015540659878839153:Y=-.14442609417300142:t[21]>1e-35?Y=-.025251979447574083:Y=.0023698372645272847:t[18]>1e-35?Y=.07269739695712212:t[8]>2592.5000000000005?Y=-.1460388776448558:t[9]>30.500000000000004?t[1]>23.500000000000004?Y=-.01835130329646532:t[9]>45.50000000000001?Y=.02023047454629885:Y=.16469378262221102:Y=-.042975030085836426;let te;t[8]>2915.5000000000005?t[297]>1e-35?te=.06257393915394144:t[0]>93.50000000000001?t[4]>1.5000000000000002?te=-.01034964686484714:te=-.07357437440667927:te=-.11987794734779106:t[298]>1e-35?t[8]>81.50000000000001?t[0]>3370.5000000000005?t[8]>155.50000000000003?t[8]>660.5000000000001?t[8]>2134.5000000000005?te=-.09476398869062203:t[9]>72.50000000000001?te=-.0757383854264379:te=.02806542779508718:te=-.05147742568418084:te=.10212721564444344:te=.0518263760642861:te=-.08743405377022222:t[189]>1e-35?t[0]>5269.500000000001?te=-.10669213185972036:te=.027050434286384796:t[302]>1e-35?te=-.0407832394672723:t[116]>1e-35?t[10]>38.50000000000001?te=.06354599160071946:t[1]>67.50000000000001?te=.05317447949011187:te=-.059138165935307165:t[212]>1e-35?t[19]>1e-35?te=-.09369289448773599:t[0]>2215.5000000000005?te=.04077965380363924:t[0]>807.5000000000001?te=-.0591771776458298:te=.057315736906679376:t[308]>1e-35?t[1]>52.50000000000001?t[5]>3749.5000000000005?te=-.016323380219241672:te=.007291062979527741:t[210]>1e-35?t[8]>1641.5000000000002?te=.03720704290087811:te=-.008730548158766654:t[4]>80.50000000000001?te=-.05346644687473197:te=.014596824736762107:t[218]>1e-35?t[3]>3.5000000000000004?te=.019984510398089086:te=-.03917825025861855:t[9]>170.50000000000003?te=-.09759719821334525:te=-.0023586682752856298;let pe;t[183]>1e-35?t[17]>1e-35?pe=.030100940443356424:t[10]>1.5000000000000002?pe=-.10861112216742408:pe=.017680668976453255:t[227]>1e-35?t[17]>1e-35?t[2]>16.500000000000004?pe=-.032062878390325456:pe=-.10808232631806887:t[8]>1641.5000000000002?pe=-.06147013392655731:t[4]>12.500000000000002?pe=.03324767551088266:t[145]>1e-35?pe=.028851633810612017:pe=-.054871239091792784:t[134]>1e-35?pe=-.023813968121342108:t[266]>1e-35?pe=-.10037039667146351:t[222]>1e-35?t[0]>612.5000000000001?t[10]>1e-35?t[8]>1939.5000000000002?pe=-.055566877553100726:t[2]>24.500000000000004?t[8]>182.50000000000003?t[10]>43.50000000000001?t[10]>55.50000000000001?pe=-.025350325484720576:pe=.1579024598549572:t[9]>2.5000000000000004?t[0]>3746.5000000000005?pe=.056817276537534815:pe=-.07674158463557636:pe=-.06335553143454145:t[1]>56.50000000000001?pe=.16390494217299284:pe=-.0027330160430847177:t[10]>36.50000000000001?t[8]>1067.5000000000002?pe=.041717597065890205:pe=-.10357913492269129:t[10]>29.500000000000004?pe=.1365512866715726:pe=.020600048310575665:pe=.09708785634773187:pe=-.060427658852305666:t[126]>1e-35?t[10]>32.50000000000001?t[6]>24.500000000000004?t[8]>1146.5000000000002?pe=-.03146213719547347:pe=.11784024316238083:pe=-.050940520532045355:pe=-.047988344143075616:t[191]>1e-35?pe=.028764654731460032:pe=.0011911575567860023;let ee;t[294]>1e-35?t[10]>50.50000000000001?ee=-.11630092297244568:t[0]>2432.5000000000005?t[0]>4199.500000000001?ee=-.05103908560370243:ee=.05002066201169583:ee=-.09976646725732496:t[32]>1e-35?t[0]>4242.500000000001?ee=-.0648838712201258:t[5]>3721.5000000000005?t[9]>4.500000000000001?ee=.127983140816313:ee=-.05436534163636867:ee=-.024514536544596455:t[121]>1e-35?t[0]>4449.500000000001?t[4]>9.500000000000002?ee=-.009504203657088933:t[8]>819.5000000000001?ee=.18689664822602375:ee=.03635576744011826:ee=-.029862411809998525:t[223]>1e-35?ee=-.06474496692999487:t[86]>1e-35?t[8]>65.50000000000001?t[1]>46.50000000000001?ee=-.09405026597863717:t[0]>4153.500000000001?ee=.053577663326799765:ee=-.05062127873995668:ee=.06512222894425874:t[39]>1e-35?ee=-.04985311717827547:t[51]>1e-35?ee=-.04541229517934797:t[178]>1e-35?t[2]>25.500000000000004?t[2]>30.500000000000004?t[0]>2151.5000000000005?ee=-.02860634573675884:ee=.08863753005590103:ee=.11158892111063744:t[0]>655.5000000000001?ee=-.031005736641654926:ee=-.1439827004505974:t[222]>1e-35?t[1]>11.500000000000002?t[0]>612.5000000000001?ee=-.00843386136334982:ee=-.05273594615999777:ee=.1060183822015004:t[126]>1e-35?t[10]>32.50000000000001?t[8]>719.5000000000001?ee=-.015774115523598486:ee=.10147367091236065:ee=-.048307000563071016:ee=.002118376117677254;let ce;t[8]>1014.5000000000001?t[9]>137.50000000000003?ce=-.10279096288817871:t[0]>93.50000000000001?t[8]>1067.5000000000002?t[227]>1e-35?ce=-.03544332389470493:t[285]>1e-35?t[9]>64.50000000000001?ce=.07211107542565391:ce=-.041556776020476104:t[145]>1e-35?t[1]>66.50000000000001?ce=-.0751486415451188:t[1]>59.50000000000001?ce=.13459005084554104:ce=.024184371850147466:t[0]>3072.5000000000005?t[95]>1e-35?ce=.06715575425741895:ce=-.005895690393702183:t[8]>2915.5000000000005?ce=-.010205039411753762:t[9]>33.50000000000001?t[9]>47.50000000000001?ce=-.00029068886245881074:ce=.0613467393188786:t[148]>1e-35?ce=-.06074463294936236:t[3]>1.5000000000000002?t[5]>1849.5000000000002?t[1]>15.500000000000002?ce=.003887223773199377:ce=-.08553893131979015:ce=.025654192706396767:ce=-.05651733979610658:ce=-.02039913645229667:t[2]>7.500000000000001?ce=-.1058450646728524:ce=.02267192191610376:t[1]>120.50000000000001?t[2]>60.50000000000001?ce=-.12304707569000428:t[1]>132.50000000000003?t[6]>41.50000000000001?ce=.1283258201586378:ce=-.01718135372229775:ce=-.07702452408491414:t[125]>1e-35?ce=-.0804612900572707:t[178]>1e-35?t[0]>4533.500000000001?ce=.04273051857848212:ce=-.04533122948101463:t[2]>196.50000000000003?ce=-.10543331044088727:t[94]>1e-35?t[5]>4532.500000000001?ce=.0231032972703664:ce=-.04807386814498683:ce=.002729435991332102;let me;t[179]>1e-35?me=-.08065315471211375:t[183]>1e-35?t[17]>1e-35?me=.026484626664041125:t[10]>1.5000000000000002?me=-.10187000872941615:me=.015274190652133752:t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?me=.09574540795390041:me=-.06454986703691233:me=-.11411849349353141:t[266]>1e-35?me=-.09281838517322076:t[32]>1e-35?t[8]>2302.5000000000005?me=.06685250330182936:t[4]>67.50000000000001?t[2]>97.50000000000001?me=-.04403391373512386:me=.1132928075412222:t[2]>47.50000000000001?me=-.09700191391838056:me=-.02147184357182825:t[10]>4.500000000000001?t[21]>1e-35?me=-.0735617817957859:t[17]>1e-35?t[3]>18.500000000000004?me=-.001668912999010927:me=-.02363511102970245:t[8]>58.50000000000001?me=-.00035213368294640616:t[3]>17.500000000000004?t[2]>28.500000000000004?t[10]>23.500000000000004?t[1]>38.50000000000001?me=.0911011436534449:t[1]>28.500000000000004?me=-.07192390493729035:me=.06913818091291246:me=-.012312625373699222:me=.06784496312307986:me=-167756936027735e-19:t[18]>1e-35?t[8]>302.50000000000006?me=.0026564453057705273:me=-.025425772389361445:t[122]>1e-35?me=-.12046786388602149:t[0]>3183.5000000000005?me=.01162092842804907:t[91]>1e-35?me=.07000265526928563:t[1]>22.500000000000004?t[0]>576.5000000000001?me=-.0001647792543020228:me=-.023664538532907665:me=.01609078206180752;let Ne;t[294]>1e-35?t[1]>26.500000000000004?t[0]>4141.500000000001?Ne=-.051473645433684705:t[0]>3030.5000000000005?t[1]>51.50000000000001?Ne=-.017696526862422682:Ne=.1450050954613223:Ne=-.05406930069823832:Ne=-.08308700260259043:t[120]>1e-35?Ne=.058316269489189415:t[297]>1e-35?t[94]>1e-35?Ne=-.07425512495167255:t[8]>51.50000000000001?t[1]>13.500000000000002?t[1]>33.50000000000001?t[19]>1e-35?t[0]>4498.500000000001?Ne=.038431826961746934:Ne=-.05937462906539856:t[9]>65.50000000000001?Ne=.10814845712507865:t[4]>9.500000000000002?t[2]>22.500000000000004?t[1]>39.50000000000001?t[1]>44.50000000000001?t[10]>44.50000000000001?Ne=.12297945639231944:t[0]>3796.5000000000005?t[4]>26.500000000000004?Ne=-.09579030954062734:Ne=.025064711572811746:Ne=.02579440518821548:Ne=.1044440128091862:Ne=-.058348633139536844:Ne=.07766788227934436:Ne=-.01021229539092708:t[2]>2.5000000000000004?t[10]>29.500000000000004?t[0]>3770.5000000000005?t[0]>4438.500000000001?Ne=.07463684068207214:Ne=.18244269035484484:t[6]>39.50000000000001?Ne=-.06050050067471004:Ne=.05787759066913493:Ne=.010783225857972171:Ne=.1674891243602606:t[4]>9.500000000000002?Ne=-.004814132027475892:Ne=-.14543299413454813:Ne=-.02935093398687923:t[116]>1e-35?t[9]>2.5000000000000004?t[8]>1218.5000000000002?Ne=-.07634466313617769:Ne=.0287825335169114:Ne=-.06894721943300268:Ne=-.00023988459059521937;let Se;t[131]>1e-35?t[1]>93.50000000000001?Se=-.05706887458825395:t[2]>1.5000000000000002?Se=.011446637886629108:Se=-.10616119878749211:t[230]>1e-35?t[4]>6.500000000000001?t[0]>4977.500000000001?Se=.08424281276381033:t[3]>17.500000000000004?t[20]>1e-35?Se=.11146885439601915:t[8]>61.50000000000001?t[0]>3530.5000000000005?t[9]>48.50000000000001?t[9]>61.50000000000001?Se=.026278724448495064:Se=.17053138400480508:t[0]>4463.500000000001?Se=-.06482289890096041:Se=.03026516489536295:Se=-.031785170717683144:Se=.1312690622980455:t[13]>1e-35?Se=.14336922540461444:Se=.03523850945454039:Se=-.015407465968975714:t[39]>1e-35?Se=-.054809635385158186:t[32]>1e-35?t[0]>4242.500000000001?Se=-.0659975068798723:Se=-.008386582621403979:t[4]>60.50000000000001?t[10]>75.50000000000001?t[3]>107.50000000000001?Se=-.04225314193574262:t[3]>70.50000000000001?t[1]>29.500000000000004?Se=.057409156184759516:Se=.2024322059866388:Se=-.030670938454461245:t[10]>1e-35?t[0]>4733.500000000001?Se=.010648654146284154:t[308]>1e-35?Se=.008728141696325391:t[4]>64.50000000000001?t[298]>1e-35?Se=.12364025998551711:Se=-.02247495081065243:t[1]>22.500000000000004?Se=-.0726295464624251:Se=.03481895086048152:t[0]>4331.500000000001?Se=-.04775443357020673:Se=.07172377425057568:t[2]>89.50000000000001?Se=-.11782645274716962:Se=.00010092665257989378;let Je;t[147]>1e-35?Je=-.041560228567115574:t[302]>1e-35?t[10]>47.50000000000001?Je=.062292114082780084:t[10]>5.500000000000001?t[7]>22.500000000000004?Je=-.016101990375700172:t[0]>2579.5000000000005?Je=-.13045089661551845:Je=-.02874367814784938:Je=.025835149631944995:t[167]>1e-35?t[0]>3928.5000000000005?Je=.17084176915326055:Je=-.019195947948312853:t[222]>1e-35?t[30]>1e-35?t[1]>36.50000000000001?t[8]>45.50000000000001?t[8]>578.5000000000001?t[1]>67.50000000000001?Je=.10591712319944074:Je=-.024082167264285:Je=.16497698867036126:Je=-.04985066326861431:t[0]>1937.5000000000002?t[2]>16.500000000000004?Je=-.021012910475524206:Je=-.13058422554298485:t[0]>1102.5000000000002?Je=.10955864175201457:Je=-.03566689354348996:t[1]>11.500000000000002?Je=-.02093884208606101:Je=.09107244766183857:t[126]>1e-35?t[10]>32.50000000000001?t[8]>719.5000000000001?Je=-.013861861436128482:Je=.09756849802202777:t[224]>1e-35?t[1]>51.50000000000001?Je=.10163873449625677:Je=-.02779270277623805:t[1]>26.500000000000004?Je=-.08035058228527389:Je=.0005719695099064484:t[191]>1e-35?t[9]>9.500000000000002?Je=-.007028075523033826:Je=.0489470913925288:t[1]>61.50000000000001?t[132]>1e-35?Je=.11230846723576784:t[0]>350.50000000000006?t[2]>1.5000000000000002?Je=-.0032075580718124892:Je=-.04442829143298883:Je=-.06597073245775804:Je=.0015594090939337751;let Me;t[223]>1e-35?t[8]>668.5000000000001?Me=-.12803889879260094:Me=.002171373740016862:t[121]>1e-35?t[0]>4720.500000000001?t[217]>1e-35?Me=.08967966612917375:t[1]>39.50000000000001?Me=-.059791671514498074:Me=.05648934961902822:t[2]>59.50000000000001?Me=-.08633234097449628:t[6]>53.50000000000001?Me=.11140345067444689:t[1]>56.50000000000001?t[4]>7.500000000000001?t[0]>3560.5000000000005?Me=.025606129643140924:Me=.13835395886271978:Me=-.09361630641448024:t[4]>7.500000000000001?t[1]>26.500000000000004?t[1]>49.50000000000001?Me=-.09975506556937946:t[10]>36.50000000000001?Me=-.09427724661655643:t[10]>24.500000000000004?Me=.07329330653410447:Me=-.02271182965807972:Me=-.09767874967639482:t[6]>13.500000000000002?t[10]>23.500000000000004?Me=-.05082091374050816:Me=.1687114435254966:t[0]>2314.5000000000005?Me=-.06422664016383926:Me=.0636688376664789:t[298]>1e-35?t[9]>12.500000000000002?t[133]>1e-35?Me=-.06857762517406195:t[9]>71.50000000000001?t[0]>4188.500000000001?Me=-.1274167728754332:Me=.01308079126447365:t[4]>73.50000000000001?Me=.13854015371106546:t[4]>48.50000000000001?Me=-.03684255740123261:t[6]>45.50000000000001?Me=.10329912215813097:t[10]>77.50000000000001?Me=-.08630788656925215:Me=.031022006843800853:t[1]>25.500000000000004?Me=-.08278381528048026:Me=.06664374548141594:t[84]>1e-35?Me=-.05624227409079396:Me=.00012184182357340415;let ft;t[179]>1e-35?ft=-.07443348719246982:t[40]>1e-35?t[0]>1937.5000000000002?ft=-.07595415373151816:ft=.054065040429292326:t[134]>1e-35?t[11]>1e-35?t[2]>13.500000000000002?t[0]>1187.5000000000002?ft=.022822510448266862:ft=.17491569312933697:ft=-.058362287133533565:t[2]>2.5000000000000004?ft=-.03633895806364428:ft=.06397808186120692:t[8]>4968.500000000001?t[1]>31.500000000000004?ft=-.07294848747514579:ft=.025053613105805606:t[230]>1e-35?t[4]>6.500000000000001?t[107]>1e-35?ft=-.07009535282685533:t[8]>2640.0000000000005?ft=-.051761240111316276:t[131]>1e-35?ft=-.06245774419231631:ft=.03495606662854905:ft=-.013863522184803188:t[131]>1e-35?t[1]>93.50000000000001?t[1]>105.50000000000001?ft=.0015036626973581122:ft=-.12505706794835883:t[1]>48.50000000000001?t[276]>1e-35?ft=.10435171369790015:t[0]>5026.500000000001?t[0]>5308.500000000001?ft=.022343994371919224:ft=-.14087991797693533:t[8]>1323.5000000000002?t[10]>49.50000000000001?ft=.07724450228328664:t[0]>3853.5000000000005?ft=-.15671707454435677:t[10]>28.500000000000004?ft=-.10179090671841723:ft=.014878216919760927:ft=.03967665658164865:t[8]>2696.5000000000005?t[15]>1e-35?ft=.14054154485273487:ft=.01821247272493051:t[2]>5.500000000000001?t[2]>100.50000000000001?ft=-.08632985141410315:ft=.005524157938954954:ft=-.08802502622523681:ft=-.0004649168897260341;let It;t[86]>1e-35?t[8]>65.50000000000001?t[1]>32.50000000000001?t[4]>16.500000000000004?It=-.007458687464321174:It=-.09444966249102484:t[1]>23.500000000000004?It=.08564129697360716:It=-.07105002902845851:It=.05688756955238231:t[294]>1e-35?t[10]>50.50000000000001?It=-.10326216566705966:t[1]>26.500000000000004?It=.0050539832484585365:It=-.07080395606126953:t[306]>1e-35?t[149]>1e-35?It=-.10399433201474328:t[2]>14.500000000000002?t[9]>6.500000000000001?It=.05783632021087773:t[10]>17.500000000000004?It=-.06720598671764105:t[1]>47.50000000000001?It=.097495825172558:It=-.013372242800584872:It=-.06463226787713715:t[42]>1e-35?It=-.0885725817597767:t[204]>1e-35?t[1]>62.50000000000001?It=-.07496598696848249:t[1]>29.500000000000004?t[8]>446.50000000000006?It=.11051270080118503:It=.027719462817590454:t[8]>597.5000000000001?It=-.08441503592016869:It=.05534229430302502:t[223]>1e-35?t[8]>668.5000000000001?It=-.12190088985091102:It=-.0067442838156576345:t[148]>1e-35?t[9]>79.50000000000001?It=.09225972475904022:t[2]>10.500000000000002?t[1]>102.50000000000001?It=.11805676536334647:t[8]>1726.5000000000002?t[9]>10.500000000000002?It=.016585157185448045:It=-.11032043771149425:It=.01586986028570486:t[8]>388.50000000000006?It=-.10592413013261853:It=.04930703248769364:t[13]>1e-35?It=.003621937787920821:It=-.0013786331198611841;let yt;t[145]>1e-35?t[1]>32.50000000000001?t[1]>38.50000000000001?t[10]>55.50000000000001?t[1]>54.50000000000001?yt=.009769895322846493:yt=-.10620052926943656:t[9]>19.500000000000004?yt=.03781202525403449:t[9]>14.500000000000002?yt=-.11485785321365344:t[9]>6.500000000000001?yt=.07677177833073881:t[0]>4342.500000000001?yt=-.07079285609687631:t[49]>1e-35?yt=.06156814809246001:yt=-.014788509042554625:yt=-.032659201618470655:t[5]>5207.500000000001?yt=-.09013500825185713:t[3]>10.500000000000002?t[8]>1787.5000000000002?yt=-.03094160322187924:t[1]>29.500000000000004?yt=.09474646043921069:yt=.023445783928231618:yt=.09342846694174194:t[0]>533.5000000000001?t[204]>1e-35?t[1]>62.50000000000001?yt=-.07164443768784848:t[1]>29.500000000000004?yt=.089473622509272:t[8]>597.5000000000001?yt=-.08155349903101317:yt=.07098423265024251:t[8]>691.5000000000001?t[5]>2252.5000000000005?yt=-.004003900679358653:t[190]>1e-35?yt=-.09236113461485262:t[8]>3198.5000000000005?yt=-.0124130160451179:yt=.018453070064009328:t[15]>1e-35?yt=.012013209112857824:t[7]>4.500000000000001?t[7]>5.500000000000001?yt=-.0009580759587680961:yt=-.03227283036698222:yt=.01369287669536875:t[1]>50.50000000000001?yt=-.04213060332500437:t[35]>1e-35?yt=-.11508095777767471:t[190]>1e-35?yt=-.08611884672400155:t[297]>1e-35?yt=.05723551879433584:yt=-.004829340082311461;let vt;t[183]>1e-35?vt=-.037994150023203555:t[227]>1e-35?t[17]>1e-35?t[3]>20.500000000000004?t[10]>36.50000000000001?vt=-.11753465135886734:vt=-.007515490299047085:vt=-.08576941990777916:t[8]>1641.5000000000002?t[10]>37.50000000000001?vt=-.12371142493530439:t[1]>36.50000000000001?vt=.032189417575190435:vt=-.10339125953022954:t[3]>32.50000000000001?t[4]>27.500000000000004?t[1]>59.50000000000001?vt=-.0784518658439288:t[2]>54.50000000000001?vt=.12477882322370665:vt=.000313468482399738:vt=.12261955132611434:t[8]>81.50000000000001?t[23]>1e-35?vt=.04969252946760318:t[8]>511.50000000000006?t[8]>1146.5000000000002?vt=.0353146070135579:vt=-.06327619611098285:vt=.02813577701641991:vt=-.12354390728506215:t[34]>1e-35?vt=-.07664408516055397:t[3]>99.50000000000001?t[1]>16.500000000000004?t[1]>26.500000000000004?vt=-.01245803535276381:vt=-.07169472553475001:t[1]>11.500000000000002?vt=.12989984824561698:vt=-.01201544398886606:t[6]>91.50000000000001?t[1]>22.500000000000004?vt=.010390226893521422:t[10]>14.500000000000002?vt=.16790888126487719:vt=.010614982228955577:t[4]>79.50000000000001?t[9]>44.50000000000001?t[0]>3853.5000000000005?vt=-.043398307129729134:vt=.09963544907820426:t[9]>30.500000000000004?vt=-.13540713124984502:t[9]>17.500000000000004?vt=.0509435850590757:vt=-.04761897852404613:t[4]>78.50000000000001?vt=.09197086656470652:vt=.0006771050176682337;let le;t[122]>1e-35?t[6]>36.50000000000001?le=.05686884451670743:le=-.05334759543084309:t[266]>1e-35?le=-.08603579519816038:t[157]>1e-35?le=-.06736746113382097:t[302]>1e-35?t[0]>2579.5000000000005?le=-.0499592651503952:t[0]>725.5000000000001?le=.11780353905132664:le=-.05232097173108943:t[147]>1e-35?t[1]>53.50000000000001?le=-.11398297342629615:t[0]>2604.5000000000005?t[0]>3629.5000000000005?le=-.03190157229022304:le=.07985197845805492:le=-.0763078988943886:t[4]>41.50000000000001?t[280]>1e-35?le=.05162933940904835:t[11]>1e-35?t[0]>460.50000000000006?le=-.027174047777029083:le=.057117284879796476:t[3]>43.50000000000001?le=-.0016147040913107311:le=-.05856597304613519:t[2]>45.50000000000001?t[0]>4663.500000000001?t[18]>1e-35?le=-.04779247091640426:t[10]>25.500000000000004?t[9]>22.500000000000004?t[22]>1e-35?le=-.01466076988151239:le=.13375695925484857:le=-.04885873081899647:t[0]>5566.500000000001?le=.11086813028591343:t[8]>992.5000000000001?le=-.07622304217072383:le=.04316019272026325:t[10]>12.500000000000002?t[9]>36.50000000000001?t[9]>45.50000000000001?le=.03285858361708423:le=-.12354858211764992:le=.0672788301823281:t[15]>1e-35?le=.08658836986585006:le=-.02741484278509758:t[290]>1e-35?le=-.08161310335133287:t[135]>1e-35?le=-.04824156054814152:le=.0009156904299554183;let Oe;t[3]>7.500000000000001?Oe=.0006791852818377787:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?Oe=.03642374718166293:Oe=.16379973756366603:Oe=-.03946685266127979:t[186]>1e-35?Oe=.07618896623420895:t[96]>1e-35?Oe=.0680272261319657:t[107]>1e-35?t[1]>48.50000000000001?Oe=-.022822371600847505:Oe=.0501405836324949:t[203]>1e-35?t[1]>77.50000000000001?Oe=.044416424920571296:Oe=-.0648450593196238:t[5]>3921.5000000000005?t[1]>110.50000000000001?Oe=-.11110466767595227:t[9]>5.500000000000001?t[9]>52.50000000000001?t[1]>50.50000000000001?Oe=.1061937286809567:t[7]>54.50000000000001?Oe=.11487507743121311:t[8]>819.5000000000001?Oe=-.07181278009001418:t[10]>25.500000000000004?Oe=.13499019430369633:t[1]>31.500000000000004?Oe=.09032979489780704:Oe=-.12754166393372374:t[9]>37.50000000000001?Oe=-.05093963635361407:Oe=-.005026651151683848:t[9]>2.5000000000000004?Oe=.07619735785573735:Oe=.012363301341532136:t[26]>1e-35?Oe=-.10685800454968203:t[8]>125.50000000000001?t[8]>446.50000000000006?t[0]>3842.5000000000005?Oe=-.08783796894105043:t[282]>1e-35?t[1]>47.50000000000001?t[9]>40.50000000000001?Oe=-.10764172927882483:Oe=.01890760098464703:Oe=.06573095405846417:t[8]>634.5000000000001?Oe=-.00783575973273707:Oe=-.050612689680229306:t[1]>22.500000000000004?Oe=-.0016842490401359626:Oe=.0738227088444087:Oe=-.02663970950432175;let ye;t[31]>1e-35?t[8]>17.500000000000004?ye=.013678038624884814:t[1]>35.50000000000001?t[1]>51.50000000000001?ye=.007191286124908192:ye=-.09347881647636902:t[10]>1.5000000000000002?ye=.07938758708008091:ye=-.008702935600305113:t[224]>1e-35?t[149]>1e-35?t[13]>1e-35?ye=.12321804057595996:ye=-.018281109320672437:t[23]>1e-35?t[4]>62.50000000000001?ye=-.04644244754790671:ye=.024546310702263208:t[8]>862.5000000000001?t[0]>3429.5000000000005?t[4]>9.500000000000002?t[52]>1e-35?ye=.0706108609273337:t[2]>40.50000000000001?ye=-.028046629962303716:ye=-.06497613993109329:ye=.01076489668586676:t[1]>33.50000000000001?t[0]>966.5000000000001?t[2]>14.500000000000002?t[1]>38.50000000000001?ye=-.03056331974267756:ye=-.11886389712497057:ye=.053364962175658184:t[8]>2233.5000000000005?ye=-.0448152521157682:ye=.1508651602190868:t[2]>33.50000000000001?t[0]>2882.5000000000005?t[0]>3183.5000000000005?ye=.03818796510453344:ye=.23673992112982362:ye=.02858814226507374:t[10]>44.50000000000001?ye=-.1125863771551199:ye=.009129996952394916:t[1]>7.500000000000001?ye=-.004374525302461639:ye=-.07858519434925451:t[149]>1e-35?t[6]>23.500000000000004?ye=.0005231594491642136:t[0]>4053.5000000000005?t[8]>660.5000000000001?ye=-.13677189943034931:t[10]>2.5000000000000004?ye=.039591891437078086:ye=-.09312596849507347:ye=-.02423172142089822:ye=.0009836986075266283;let tt;t[189]>1e-35?t[0]>5269.500000000001?tt=-.103183298350443:t[2]>51.50000000000001?tt=.09784373530929913:t[10]>26.500000000000004?t[8]>764.5000000000001?tt=-.05186168947388339:tt=.0496996365539082:t[10]>23.500000000000004?tt=.1404445738719:t[93]>1e-35?tt=.0027146310074558505:t[5]>3821.5000000000005?tt=.002153033152069652:t[4]>2.5000000000000004?tt=.007663539551317215:tt=.13902616832015402:t[298]>1e-35?t[8]>81.50000000000001?t[4]>64.50000000000001?tt=.11498405722487515:t[2]>23.500000000000004?t[0]>2815.5000000000005?t[2]>44.50000000000001?t[4]>42.50000000000001?tt=-.021479467709980358:tt=.09336868994327292:t[1]>22.500000000000004?t[15]>1e-35?tt=.021660293256233334:tt=-.0927396152303864:tt=.0665074081601698:t[0]>1550.5000000000002?tt=.08972407105958534:tt=-.0380796411182682:t[6]>13.500000000000002?t[10]>2.5000000000000004?tt=.06761927942466854:tt=-.015762168112653286:t[17]>1e-35?tt=.10311304131145381:tt=-.017672785252336027:tt=-.08629805732772755:t[1]>24.500000000000004?t[138]>1e-35?tt=-.10638321435298535:tt=.0007073011744385905:t[18]>1e-35?tt=-.027056185501334325:t[145]>1e-35?tt=.023191199677450886:t[9]>33.50000000000001?t[201]>1e-35?tt=.09762140519655171:t[9]>110.50000000000001?tt=-.06581942957595835:t[6]>54.50000000000001?tt=.04959634035251596:tt=.0022616298654554207:tt=-.007437620924990854;let X;t[179]>1e-35?X=-.06961998209988884:t[167]>1e-35?t[0]>3928.5000000000005?X=.1470294450403005:X=-.01671476793947083:t[187]>1e-35?t[6]>13.500000000000002?t[4]>30.500000000000004?t[13]>1e-35?X=.07448480853603114:t[0]>1012.5000000000001?t[5]>2883.5000000000005?t[0]>3682.5000000000005?t[5]>4031.5000000000005?t[23]>1e-35?X=.07965955447707423:t[10]>10.500000000000002?X=-.09236156404262426:X=.03396273196231458:X=-.13246465021467432:X=.07092822261735353:X=-.08753829085942:X=.09409024840640956:t[1]>40.50000000000001?t[8]>984.5000000000001?t[8]>1514.5000000000002?t[8]>2134.5000000000005?X=.004705878789890202:X=.13775378964952867:X=-.04770928980587811:t[10]>29.500000000000004?X=.011221519891071544:t[0]>3853.5000000000005?X=.06365381191628273:X=.15506252245336827:t[1]>37.50000000000001?X=-.07254777021042061:X=.026514587757252385:t[308]>1e-35?X=.04115804816617256:t[10]>26.500000000000004?X=.02077721353011946:t[5]>3548.5000000000005?X=-.1280907116663952:X=-.021974774274438:t[306]>1e-35?X=-.02700446558079895:t[297]>1e-35?t[212]>1e-35?X=.07794139136748461:t[7]>5.500000000000001?t[19]>1e-35?X=-.005710865560475598:t[94]>1e-35?X=-.06751507982853555:X=.027250040757588703:t[9]>52.50000000000001?X=.07060357924595577:X=-.030297760713011795:X=-.0006005400085266517;let re;t[113]>1e-35?re=-.07311041707507712:t[40]>1e-35?t[0]>1937.5000000000002?re=-.06996356565314456:re=.04780211300352931:t[10]>52.50000000000001?t[49]>1e-35?re=-.08317707559926495:t[21]>1e-35?re=-.0817284654645976:t[15]>1e-35?t[2]>3.5000000000000004?re=-.010538203005984922:re=.08454819465349446:t[9]>124.50000000000001?re=.09015659250299132:t[7]>15.500000000000002?t[5]>5732.500000000001?re=-.08542251249346582:t[9]>50.50000000000001?re=-.023428882537657472:re=.010042500833979073:re=.020697210754240154:t[10]>28.500000000000004?t[5]>423.00000000000006?t[148]>1e-35?re=.03006025206979096:t[9]>108.50000000000001?re=-.09153851322499747:t[145]>1e-35?t[5]>4814.500000000001?t[2]>38.50000000000001?re=.04222035773042132:re=-.09078149053947535:t[8]>568.5000000000001?t[1]>64.50000000000001?re=-.07209095448054853:re=.028065954981903313:re=.08714651929917122:re=-.006678820669279169:t[10]>40.50000000000001?re=.006982396294941626:re=-.07889649792011418:t[94]>1e-35?t[4]>30.500000000000004?re=-.09351114982645548:t[4]>3.5000000000000004?re=-.004837550129223451:re=-.08324141237464677:t[303]>1e-35?re=.10703037493990825:t[9]>156.50000000000003?re=-.10803018621648303:t[116]>1e-35?re=-.03208302566598311:t[212]>1e-35?t[243]>1e-35?re=.10261721665006701:re=.018994509090668264:re=.0011244262442038839;let We;t[86]>1e-35?t[8]>65.50000000000001?t[1]>46.50000000000001?We=-.08404263465005328:t[0]>3682.5000000000005?We=.041259223920298876:t[1]>29.500000000000004?We=-.09541257493441671:We=.001482192721625409:We=.051541427372951004:t[3]>7.500000000000001?t[157]>1e-35?We=-.08268996098437432:t[230]>1e-35?We=.015749498159959817:t[4]>7.500000000000001?t[3]>11.500000000000002?We=-913218977737457e-19:t[4]>10.500000000000002?We=-.056334165674005156:t[127]>1e-35?We=-.0784634021824036:t[2]>9.500000000000002?t[1]>62.50000000000001?We=-.04231200150318989:t[10]>42.50000000000001?We=.10182973257894812:We=.015934763950068445:We=-.03130938805859397:t[92]>1e-35?t[4]>6.500000000000001?t[1]>51.50000000000001?t[9]>19.500000000000004?We=-.041117068322885315:We=.1167767830037126:We=.13611206992387337:t[10]>41.50000000000001?We=-.07120286010564107:We=.022032788063345417:t[8]>1.5000000000000002?t[1]>51.50000000000001?t[9]>72.50000000000001?We=-.07702290997669524:t[198]>1e-35?We=.08776558554437136:We=-.008290740324975692:t[2]>32.50000000000001?We=.07198457624219955:We=.005463113714361629:We=.09414099512900526:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?We=.03295785445437507:We=.15140250150674536:We=-.035613213948910254:t[186]>1e-35?We=.06849425535860769:t[96]>1e-35?We=.06028225812727254:We=-.007582543288662308;let De;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?De=.08396556264106572:De=-.0562516995099192:De=-.10593011018789432:t[183]>1e-35?t[15]>1e-35?De=-.09705176473553752:t[7]>18.500000000000004?t[2]>37.50000000000001?De=.0052017514017035915:De=-.11194119432743639:De=.03724337696163019:t[227]>1e-35?t[17]>1e-35?t[2]>16.500000000000004?De=-.025692451287403446:De=-.09511862672123193:t[8]>1661.5000000000002?t[10]>37.50000000000001?De=-.11892250746801664:t[10]>22.500000000000004?De=.07548493166973796:De=-.05973048107712209:t[4]>12.500000000000002?t[0]>4319.500000000001?t[10]>4.500000000000001?t[10]>37.50000000000001?De=.13750699058082427:t[18]>1e-35?De=.06535408879552801:De=-.054118179035040674:De=.1344282838979622:t[0]>3982.5000000000005?De=-.10409582202467015:t[19]>1e-35?De=.12672850705810795:t[8]>587.5000000000001?t[1]>35.50000000000001?De=.012705935670766466:De=.14149359442527545:De=-.047977876173706004:t[20]>1e-35?De=.057945228080337946:t[0]>3642.5000000000005?De=-.008726535792122467:De=-.08424769891378858:t[34]>1e-35?De=-.0699329538228602:t[134]>1e-35?t[11]>1e-35?t[4]>15.500000000000002?t[0]>1187.5000000000002?De=.01196849566739346:De=.1614642278429876:De=-.043022338150701625:t[3]>5.500000000000001?De=-.03907848255033881:De=.018280601026175593:De=.0006654540402589085;let be;t[31]>1e-35?t[2]>58.50000000000001?t[9]>1.5000000000000002?be=-.01386103677247845:be=.11386694333005128:t[4]>27.500000000000004?be=-.021862617610091336:t[2]>31.500000000000004?be=.0828858469030438:be=.006483353475830127:t[224]>1e-35?t[149]>1e-35?t[13]>1e-35?be=.11303635767048735:be=-.01645525128352694:t[23]>1e-35?t[4]>62.50000000000001?be=-.04238798044549342:be=.022091190130494303:t[5]>5082.500000000001?be=-.04287166152163786:t[8]>862.5000000000001?t[19]>1e-35?be=.000660344696244351:t[4]>9.500000000000002?t[0]>1277.5000000000002?be=-.04291104140431434:t[17]>1e-35?be=.11256797532342613:be=-.017206916368289193:be=.026482035265709743:t[1]>8.500000000000002?t[11]>1e-35?be=.04060606971664621:t[0]>4733.500000000001?t[8]>214.50000000000003?t[5]>4814.500000000001?be=.03581712466863222:be=.14770264307668884:t[8]>73.50000000000001?be=-.13093289429740068:be=.042461737442702936:t[52]>1e-35?be=.0501831919044939:be=-.010450249720465756:be=-.0753365425372656:t[149]>1e-35?t[6]>23.500000000000004?be=.0005381332165438493:be=-.04549431717503909:t[133]>1e-35?t[2]>5.500000000000001?t[8]>698.5000000000001?t[282]>1e-35?be=.04849637311285226:be=-.036671377119808564:t[0]>421.50000000000006?be=.00020968499911058945:be=.11636422423182405:be=-.12687837788222575:be=.0012774367867215346;let ze;t[120]>1e-35?ze=.04776057572434719:t[229]>1e-35?t[0]>2952.5000000000005?t[0]>3904.5000000000005?ze=-.042799574885345304:ze=.07412430171193245:ze=-.11248270469336048:t[193]>1e-35?ze=-.060694220820603384:t[121]>1e-35?t[217]>1e-35?t[0]>4449.500000000001?t[4]>8.500000000000002?ze=.028911612178122104:ze=.12326369727728437:t[0]>4091.5000000000005?ze=-.09370267064141052:t[0]>3519.5000000000005?t[8]>668.5000000000001?ze=.1159839898100149:ze=-.01924880886585737:t[8]>501.50000000000006?t[10]>16.500000000000004?ze=-.0216343737351583:ze=-.1220272260878369:t[2]>18.500000000000004?ze=.09152924475072398:t[8]>55.50000000000001?ze=.039508716651005665:ze=-.11714436880423203:t[18]>1e-35?t[9]>2.5000000000000004?ze=.06793009902674053:ze=-.024060578029812988:t[4]>2.5000000000000004?t[2]>16.500000000000004?t[4]>11.500000000000002?ze=-.04391068849624096:ze=.04009967593394672:t[8]>1085.5000000000002?ze=-.024773826356034825:ze=-.13919707884246582:ze=.06659278075192335:t[223]>1e-35?t[8]>668.5000000000001?ze=-.11567917501901476:ze=-.006813640337684114:t[3]>7.500000000000001?ze=.0010671269682548076:t[7]>3.5000000000000004?t[1]>33.50000000000001?t[0]>1597.5000000000002?t[10]>1.5000000000000002?ze=-.001754586408351048:ze=-.055422422450722056:ze=-.06090032532532226:t[0]>5269.500000000001?ze=.11787981735983527:ze=-.00198119768540783:ze=.00210412924303036;let it;t[294]>1e-35?t[10]>50.50000000000001?it=-.09738558653332406:t[0]>2432.5000000000005?t[0]>4533.500000000001?it=-.06063239096209816:it=.03317022411417386:it=-.08607562321324262:t[120]>1e-35?t[4]>18.500000000000004?it=-.013608609329298802:it=.09078000157330264:t[99]>1e-35?it=.014828708581964632:t[10]>52.50000000000001?t[49]>1e-35?it=-.07536137260189814:it=.006253266595455118:t[10]>28.500000000000004?it=-.006106041147592768:t[9]>156.50000000000003?it=-.11828932797811101:t[94]>1e-35?it=-.02566078479505714:t[303]>1e-35?it=.09544850289775349:t[15]>1e-35?t[224]>1e-35?t[4]>56.50000000000001?it=-.08401252789168523:t[5]>4244.500000000001?it=.026372887658499107:t[1]>16.500000000000004?it=-.027836756345634026:it=.09205362097909099:it=.00934612788718244:t[203]>1e-35?it=-.016371658366767253:t[7]>26.500000000000004?t[0]>966.5000000000001?t[1]>38.50000000000001?t[146]>1e-35?t[9]>21.500000000000004?it=-.09580979052540028:t[1]>50.50000000000001?it=-.06402211827281554:it=.08342858760095972:t[2]>36.50000000000001?it=.008114897658204584:t[92]>1e-35?it=.09541587072672864:it=-.022342147210555434:it=-.01660492519175128:it=.014721622240945446:t[4]>25.500000000000004?t[11]>1e-35?it=.15846731118501817:it=.039498507912023195:t[245]>1e-35?it=.07008718676813333:it=.0019806389728814727;let ht;t[32]>1e-35?t[8]>90.50000000000001?t[4]>67.50000000000001?t[0]>4188.500000000001?ht=-.01192072916082109:ht=.13888590840802637:t[1]>16.500000000000004?t[8]>2302.5000000000005?ht=.06874032717466054:t[4]>40.50000000000001?ht=-.07752510020707537:t[1]>76.50000000000001?ht=-.09944032260703917:t[8]>1381.5000000000002?ht=-.054466635810800745:t[1]>32.50000000000001?ht=.05974084520839573:ht=-.0384718740755954:ht=-.11374190719134032:t[0]>2151.5000000000005?ht=-.13703645155803298:ht=.004833344758654556:t[297]>1e-35?t[212]>1e-35?ht=.06954747264544993:t[7]>9.500000000000002?t[19]>1e-35?t[1]>30.500000000000004?t[0]>4242.500000000001?ht=.013539805885738608:ht=-.0692740641801559:t[0]>2653.5000000000005?t[10]>57.50000000000001?ht=.09941880179344399:ht=-.01608127391210995:ht=.08025226531247417:t[9]>67.50000000000001?ht=.13525448212444113:t[6]>61.50000000000001?ht=-.05511099182158894:t[94]>1e-35?ht=-.06821509831783572:t[128]>1e-35?ht=.11361314817714643:ht=.030160785008575566:t[1]>13.500000000000002?t[8]>17.500000000000004?t[16]>1e-35?ht=-.09954181329804547:t[197]>1e-35?ht=.10102833149755386:t[188]>1e-35?ht=.05584490988313965:t[9]>49.50000000000001?t[4]>5.500000000000001?ht=-.03781554214742005:ht=.09927933385592314:ht=-.020006000056720083:ht=-.10520473615957895:ht=-.12006990846253787:ht=-.00026111570975317574;let Ot;t[8]>2830.5000000000005?t[1]>31.500000000000004?t[9]>32.50000000000001?t[5]>1234.5000000000002?t[0]>1725.5000000000002?t[7]>14.500000000000002?t[2]>38.50000000000001?Ot=-.019188245509744628:Ot=-.13354864350075848:t[0]>2461.5000000000005?Ot=.051885477468354396:Ot=-.0833581968852119:Ot=.08233441701532287:Ot=-.10865584951212362:t[8]>2992.5000000000005?t[10]>49.50000000000001?t[10]>56.50000000000001?t[1]>45.50000000000001?t[0]>2041.5000000000002?Ot=.09926337893072812:Ot=-.027753610497327715:t[0]>1972.5000000000002?Ot=-.09780045823152517:Ot=.032380915168504935:Ot=.11502632261226381:t[17]>1e-35?Ot=-.06094965899579662:t[10]>40.50000000000001?Ot=-.07500475582440802:Ot=.006499832113084677:t[10]>4.500000000000001?t[4]>10.500000000000002?Ot=-.09584538995220808:Ot=-.00908705814304442:Ot=.03203281520813893:t[10]>49.50000000000001?Ot=-.03146271513986384:t[2]>63.50000000000001?Ot=.13172001315536286:t[224]>1e-35?Ot=.08945777550527927:t[0]>2282.5000000000005?t[4]>4.500000000000001?Ot=.09521549382082259:Ot=-.04414925613522197:t[0]>1847.5000000000002?Ot=-.09118580379557353:Ot=.009206744918282364:t[178]>1e-35?t[2]>25.500000000000004?t[1]>31.500000000000004?Ot=.03525144509943896:Ot=-.053340750721609057:t[0]>1057.5000000000002?t[10]>2.5000000000000004?Ot=-.04766112322938157:t[2]>10.500000000000002?Ot=.0728516504357201:Ot=-.05049625965272536:Ot=-.10868663055825774:Ot=.0005382613419948969;let cn;t[147]>1e-35?t[1]>53.50000000000001?cn=-.10615739288764095:t[0]>2604.5000000000005?t[0]>3629.5000000000005?cn=-.030504020655417463:cn=.07102458639110094:cn=-.07058131985243714:t[302]>1e-35?t[10]>47.50000000000001?cn=.055304563442710876:t[1]>53.50000000000001?cn=.033723409577443623:t[8]>175.50000000000003?t[0]>2628.5000000000005?t[9]>40.50000000000001?cn=-.1568835288372895:cn=-.0279829124400056:cn=.04493843959601833:cn=-.11637042729644327:t[191]>1e-35?t[282]>1e-35?cn=-.054133834303687026:t[9]>48.50000000000001?cn=.11263810289007213:t[9]>9.500000000000002?cn=-.02202034562838259:t[4]>45.50000000000001?cn=-.03410927569045158:cn=.04381615166534081:t[242]>1e-35?t[0]>3615.5000000000005?t[3]>19.500000000000004?t[1]>56.50000000000001?t[4]>28.500000000000004?cn=-.029687297407295893:cn=.10673602850001934:t[4]>42.50000000000001?cn=.0036275562945108117:cn=-.0760789221330622:cn=-.10385623431741903:t[2]>34.50000000000001?t[2]>44.50000000000001?t[4]>51.50000000000001?cn=.08274426793676076:cn=-.07076234425516396:cn=.13890177606150175:cn=-.019863286503635686:t[53]>1e-35?t[18]>1e-35?cn=-.09250637750836187:cn=-.0031531727902009026:t[2]>107.50000000000001?t[4]>91.50000000000001?t[1]>16.500000000000004?cn=-.01897867921812603:cn=.04890781705365262:cn=-.11569892307597907:t[2]>106.50000000000001?cn=.09032697440623969:cn=.00047935919155035045;let Lt;t[115]>1e-35?Lt=.05338335681275557:t[242]>1e-35?t[0]>3615.5000000000005?t[4]>42.50000000000001?t[4]>75.50000000000001?Lt=-.10131179514695865:t[8]>938.5000000000001?Lt=.10203729808015481:Lt=-.015357944186835289:t[1]>56.50000000000001?t[2]>22.500000000000004?Lt=.03574015165562999:Lt=-.07763042506449493:Lt=-.0813323116215548:t[2]>34.50000000000001?t[2]>44.50000000000001?t[4]>51.50000000000001?Lt=.0665706259130275:Lt=-.06586817559309924:Lt=.11925564412287476:Lt=-.014170019267143326:t[1]>124.50000000000001?t[2]>30.500000000000004?t[8]>533.5000000000001?t[4]>41.50000000000001?t[8]>977.5000000000001?Lt=.046017146627455346:Lt=-.08623321630086885:t[8]>1765.5000000000002?Lt=-.017990564319859934:t[10]>25.500000000000004?t[10]>48.50000000000001?Lt=.11143827902215087:Lt=-.01817808730473413:Lt=.16980985030210127:Lt=-.09357806298740017:t[10]>7.500000000000001?t[10]>54.50000000000001?Lt=.010168994879727824:Lt=-.09099594488792513:t[9]>1.5000000000000002?Lt=.0533459678147928:Lt=-.06886854808370108:t[99]>1e-35?t[17]>1e-35?t[9]>22.500000000000004?Lt=-.062346959148773695:t[1]>47.50000000000001?Lt=-.0021578343835599316:t[2]>27.500000000000004?Lt=.19567373210166172:Lt=.07851555379116423:t[18]>1e-35?Lt=.03711549097804649:t[8]>359.50000000000006?Lt=.012492346746905587:t[4]>20.500000000000004?Lt=.047511695735697544:Lt=-.07999269063948773:Lt=6802045404471004e-20;let Wn;t[222]>1e-35?t[0]>612.5000000000001?t[10]>1e-35?t[8]>2167.5000000000005?t[4]>25.500000000000004?Wn=.0011484728213539738:Wn=-.0936582904650763:t[2]>25.500000000000004?t[8]>182.50000000000003?t[10]>22.500000000000004?t[0]>5026.500000000001?Wn=-.09828874964938798:t[8]>1586.5000000000002?Wn=.13726397438080162:t[4]>48.50000000000001?t[2]>63.50000000000001?Wn=.011938269926919522:Wn=.17541983715953954:t[19]>1e-35?Wn=.023002786011088672:Wn=-.06221461272461431:t[9]>2.5000000000000004?t[0]>3818.5000000000005?Wn=.06508934844183291:Wn=-.10168553534835639:Wn=-.07755626499024171:t[2]>51.50000000000001?t[4]>65.50000000000001?Wn=.021140806225203937:Wn=-.1167833342453639:t[2]>33.50000000000001?Wn=.13163585734056618:Wn=-.00203273890889717:t[10]>36.50000000000001?t[8]>1067.5000000000002?Wn=.06314479201263888:Wn=-.09639088327091713:t[10]>29.500000000000004?Wn=.09225469303582386:t[0]>3129.5000000000005?t[0]>4091.5000000000005?t[0]>4354.500000000001?Wn=40577156464836036e-21:Wn=.12322387121810757:Wn=-.03697224045046014:t[1]>22.500000000000004?Wn=.016474835887320276:Wn=.16919298733903063:Wn=.07633203630214054:Wn=-.047438037934250644:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?Wn=.14150493354700563:Wn=-.01831155354975749:t[1]>28.500000000000004?Wn=-.07952557178685365:t[10]>28.500000000000004?Wn=.0665695554984927:Wn=-.053640139319277094:Wn=.0004754840665898665;let zn;t[76]>1e-35?zn=-.06814884255939921:t[179]>1e-35?zn=-.06325743795510681:t[122]>1e-35?t[6]>36.50000000000001?zn=.05052338063261613:t[8]>626.5000000000001?t[1]>38.50000000000001?zn=.004193658608848433:zn=-.1066968975983452:t[8]>302.50000000000006?zn=.05476730110440451:zn=-.06382970920394895:t[218]>1e-35?t[2]>3.5000000000000004?t[6]>13.500000000000002?t[2]>19.500000000000004?t[0]>3200.5000000000005?t[4]>91.50000000000001?zn=-.12156071809840739:t[9]>21.500000000000004?t[5]>3883.5000000000005?t[8]>919.5000000000001?t[8]>1085.5000000000002?zn=.013555772109446666:zn=-.09856116699770784:zn=.0284329611813383:t[2]>52.50000000000001?zn=.04008708444763762:t[9]>29.500000000000004?zn=-.1289599546008197:zn=-.018566534248335896:t[8]>747.5000000000001?zn=.02236484980076122:zn=.1148871655157582:t[8]>3084.0000000000005?zn=-.05573875952902531:t[10]>17.500000000000004?t[2]>51.50000000000001?zn=.03164751204281298:zn=.11752140436184891:t[9]>42.50000000000001?zn=-.07180559595410106:t[22]>1e-35?zn=.09325040416256854:zn=-.016041122807939914:zn=-.02765708954618808:t[1]>30.500000000000004?t[1]>66.50000000000001?zn=-.010718250133458515:zn=.09818827994853763:zn=.010180038981174032:zn=-.039472162599295535:t[9]>170.50000000000003?zn=-.08536729235976731:t[189]>1e-35?t[0]>5269.500000000001?zn=-.08674788057474031:zn=.02077653508548371:zn=-.0003536561382007414;let fr;t[86]>1e-35?t[10]>6.500000000000001?t[0]>4376.500000000001?fr=.018337297491457794:fr=-.05926206443180149:fr=.024026520855881126:t[288]>1e-35?t[184]>1e-35?fr=.10747078482128616:t[126]>1e-35?fr=-.10550625192391357:t[7]>71.50000000000001?fr=-.07698346027863572:t[8]>302.50000000000006?t[6]>49.50000000000001?t[4]>47.50000000000001?t[1]>38.50000000000001?t[15]>1e-35?fr=.1317396472229434:fr=-.025035791351328947:fr=-.0728334305864372:t[8]>963.5000000000001?fr=.023642201723096064:fr=.183010326734258:t[128]>1e-35?fr=.04228920135648387:t[2]>34.50000000000001?t[15]>1e-35?fr=.002801782941492993:t[3]>40.50000000000001?t[4]>39.50000000000001?fr=-.1088876900335281:fr=.02758317023002635:fr=-.11886771300807207:t[9]>59.50000000000001?t[1]>33.50000000000001?fr=-.01928020117446408:fr=.10193718474139135:t[1]>48.50000000000001?t[4]>9.500000000000002?t[8]>932.5000000000001?fr=.07893723375925096:fr=-.009878929627026153:t[10]>2.5000000000000004?t[9]>20.500000000000004?fr=-.10301657587280551:fr=.005787463140224318:fr=.07421364314695046:t[0]>2840.5000000000005?t[10]>29.500000000000004?fr=-.019296977889522397:fr=-.07274529751752634:t[1]>30.500000000000004?fr=-.050368901143148286:fr=.029630869489466655:t[2]>6.500000000000001?t[4]>9.500000000000002?fr=.0015332402792773946:fr=.09930153676749967:fr=-.06370844564357069:fr=.00042272155209927616;let Ae;t[71]>1e-35?t[4]>17.500000000000004?Ae=.12586844370423247:Ae=-.006791999603126354:t[222]>1e-35?t[1]>10.500000000000002?t[30]>1e-35?t[1]>36.50000000000001?t[9]>1.5000000000000002?t[10]>25.500000000000004?Ae=-.08474891624263797:t[8]>125.50000000000001?Ae=.08125086980439704:Ae=-.04082085238068532:t[0]>3863.5000000000005?Ae=.020481535807469208:Ae=.14810819386202126:t[0]>1937.5000000000002?t[2]>16.500000000000004?Ae=-.019110200161573936:Ae=-.12387719685855114:t[0]>1102.5000000000002?Ae=.08376595701957407:Ae=-.031821919580524834:t[9]>4.500000000000001?Ae=-.08116383486497568:t[7]>8.500000000000002?t[2]>24.500000000000004?Ae=-.02154820850475448:t[0]>3863.5000000000005?t[8]>902.5000000000001?Ae=.1349841206807871:Ae=.011864053595560297:t[1]>41.50000000000001?Ae=-.08203662486612544:t[2]>18.500000000000004?Ae=-.009541865642346947:Ae=.08345043168501759:t[2]>10.500000000000002?Ae=-.09585031818030947:Ae=.019432330487099865:Ae=.08399259524715129:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?Ae=.11951517733981365:Ae=-.016651014735738538:t[1]>28.500000000000004?Ae=-.07410922545030711:t[10]>28.500000000000004?Ae=.05886430683844788:Ae=-.04929626605117184:t[191]>1e-35?t[9]>9.500000000000002?t[9]>48.50000000000001?Ae=.04802269879144705:Ae=-.026208212831796737:t[4]>45.50000000000001?Ae=-.03227476944664786:Ae=.05124575625622705:Ae=.00020506696916003137;let He;t[116]>1e-35?t[9]>2.5000000000000004?t[9]>17.500000000000004?He=-.03042091758483443:t[10]>14.500000000000002?He=.09816619204768777:He=.01332124067720947:t[8]>8.500000000000002?t[4]>15.500000000000002?He=-.02381165060401718:He=-.10950361804974783:He=.03538211665111128:t[212]>1e-35?t[19]>1e-35?He=-.09940014650006174:t[0]>2215.5000000000005?t[5]>5056.500000000001?t[3]>5.500000000000001?t[10]>25.500000000000004?He=-.06371052144380579:He=.0835500621252692:He=-.10408255929333915:t[1]>74.50000000000001?He=.13208968122712403:t[1]>64.50000000000001?He=-.04778844603644965:t[8]>51.50000000000001?t[8]>201.50000000000003?t[8]>660.5000000000001?t[6]>4.500000000000001?t[9]>5.500000000000001?t[1]>29.500000000000004?t[0]>3830.5000000000005?He=.09922816902423433:He=.016366955328796718:He=.1592412560903584:t[1]>39.50000000000001?He=.05409467990258923:He=-.08260633210459611:He=-.06307205775247567:t[9]>36.50000000000001?He=.040253940015648144:He=.14202568969471283:He=-.028761848341594044:He=.08994073058773508:t[0]>807.5000000000001?He=-.043427848826323195:He=.04573516446846493:t[20]>1e-35?t[188]>1e-35?He=-.0758877731600639:t[23]>1e-35?He=.05913923322043199:t[8]>155.50000000000003?t[128]>1e-35?He=.08124700978741987:He=.013296063087086852:t[7]>5.500000000000001?He=-.01640196088612987:He=-.12685498840146067:He=-.0004940792382459551;let ut;t[1]>24.500000000000004?t[103]>1e-35?t[8]>61.50000000000001?t[17]>1e-35?ut=-.05584993681929434:t[9]>27.500000000000004?t[0]>3916.5000000000005?ut=.08513773825688947:ut=-.1184664832315282:ut=.05676963535893477:ut=.14263843210340613:ut=.0005795003292924202:t[18]>1e-35?t[0]>5453.500000000001?t[1]>11.500000000000002?ut=-.10669720555606924:ut=.029016613003137307:t[2]>46.50000000000001?t[10]>9.500000000000002?ut=.0664744575868955:ut=-.08469256188890871:ut=-.026746678040592144:t[281]>1e-35?ut=-.07408427239006925:t[145]>1e-35?t[4]>6.500000000000001?t[9]>16.500000000000004?t[4]>18.500000000000004?ut=.012131807587207655:ut=-.12776015795398743:ut=.04320472481083551:ut=.08390980661550446:t[10]>227.50000000000003?ut=-.09771783809101153:t[10]>130.50000000000003?ut=.11175201938704937:t[8]>779.5000000000001?t[5]>3325.5000000000005?t[128]>1e-35?ut=-.07610698254064358:t[8]>902.5000000000001?ut=-.03136381213599649:t[131]>1e-35?ut=.0704821739127936:t[224]>1e-35?ut=-.056961477774953785:t[10]>30.500000000000004?t[9]>43.50000000000001?ut=.10431473040024908:t[8]>841.5000000000001?ut=.07304745320500514:ut=-.038011541882439825:ut=-.01679746695007364:t[0]>3129.5000000000005?ut=.05589952587431965:t[210]>1e-35?ut=.06227198085800842:ut=-.0011341890997947812:t[8]>740.5000000000001?ut=.04817300084412584:ut=-.000577001010789238;let At;t[187]>1e-35?t[6]>12.500000000000002?t[10]>8.500000000000002?t[10]>16.500000000000004?t[8]>234.50000000000003?t[4]>43.50000000000001?t[0]>4476.500000000001?At=-.10504730480402079:t[5]>3341.5000000000005?At=.11087894671081754:At=-.0406668834674614:At=.03308382165616109:t[8]>104.50000000000001?At=-.10431436764549162:At=.0073928337244891455:t[4]>34.50000000000001?At=-.10571751512748416:At=-.006081128814142983:t[13]>1e-35?At=.1299673566095023:t[4]>60.50000000000001?At=-.06587492443829139:t[0]>2604.5000000000005?t[3]>19.500000000000004?At=.04857126072645073:At=-.03431365358104773:t[4]>16.500000000000004?At=.04101865986596709:At=.16480274980378218:t[10]>26.500000000000004?At=.03673978504199255:t[10]>9.500000000000002?At=-.10996402743800027:t[308]>1e-35?At=.0553693735082498:At=-.041600136235644125:t[306]>1e-35?t[8]>1156.5000000000002?t[4]>14.500000000000002?t[10]>21.500000000000004?At=.010902983761213922:At=.1325118659895645:At=-.064362945508595:t[1]>66.50000000000001?At=.033416767779331176:At=-.054080316225040496:t[42]>1e-35?At=-.07762364337810815:t[10]>1089.5000000000002?At=-.08465599849125216:t[31]>1e-35?t[8]>30.500000000000004?At=.012788520036013586:t[1]>32.50000000000001?t[1]>51.50000000000001?At=.0220102041325908:At=-.06516708740003069:At=.012833498905748267:t[224]>1e-35?At=-.007038418272997865:At=.00037666304316290967;let Xt;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Xt=.07554189644995735:Xt=-.052089349455904946:Xt=-.10148206848169845:t[113]>1e-35?Xt=-.06666678653225779:t[39]>1e-35?t[9]>3.5000000000000004?t[0]>3670.5000000000005?Xt=.07172653627995676:Xt=-.07602959317610998:Xt=-.08790686271287523:t[229]>1e-35?t[0]>2952.5000000000005?t[0]>3904.5000000000005?Xt=-.0399322883690891:Xt=.06523495517476098:Xt=-.10358715295743802:t[193]>1e-35?Xt=-.05551414334329124:t[134]>1e-35?t[11]>1e-35?t[2]>13.500000000000002?t[10]>1.5000000000000002?Xt=.015928764772252406:Xt=.1341513061552287:Xt=-.04975001987586173:t[10]>2.5000000000000004?t[3]>5.500000000000001?t[9]>2.5000000000000004?t[8]>310.50000000000006?Xt=-.033592997607280156:Xt=-.12432458028446665:t[1]>32.50000000000001?t[217]>1e-35?Xt=-.08402551858097379:Xt=.017401984506038796:t[1]>25.500000000000004?Xt=.13337205393591278:Xt=-.01160208350090984:Xt=.06708317942315471:t[8]>227.50000000000003?Xt=-.08486943882418681:Xt=-.013970104864235007:t[8]>4968.500000000001?t[1]>31.500000000000004?t[9]>4.500000000000001?Xt=-.10496268177586783:Xt=-.020921489532370493:Xt=.02629915927247642:t[7]>20.500000000000004?t[8]>251.50000000000003?t[115]>1e-35?Xt=.11639296062157028:Xt=-.004275784356569115:t[32]>1e-35?Xt=-.07297384970166025:Xt=.006026841626381599:Xt=.002034611134960428;let Ht;t[248]>1e-35?Ht=.06091438745093315:t[0]>384.50000000000006?t[204]>1e-35?t[1]>62.50000000000001?Ht=-.06455513326540585:t[1]>29.500000000000004?Ht=.07718474591552532:t[4]>7.500000000000001?Ht=.040139336931404826:Ht=-.09685734690563386:Ht=.00015327283570347363:t[9]>88.50000000000001?Ht=.10079017954199324:t[1]>47.50000000000001?t[2]>20.500000000000004?t[2]>27.500000000000004?Ht=-.04077257804338707:Ht=.0739963982640615:t[9]>1.5000000000000002?t[17]>1e-35?Ht=.03778141591008941:Ht=-.06459919920634845:Ht=-.11193190957880604:t[7]>6.500000000000001?t[11]>1e-35?t[18]>1e-35?Ht=.14063930759326346:t[0]>179.50000000000003?Ht=.07287482250668585:t[8]>1180.5000000000002?Ht=-.14419393112726253:t[10]>28.500000000000004?Ht=-.07993142770099469:t[17]>1e-35?Ht=-.04702595410391655:t[7]>21.500000000000004?t[2]>26.500000000000004?Ht=.05527969663610186:Ht=-.10824385941441346:t[3]>11.500000000000002?Ht=.12358502961047915:Ht=-.017509147119622873:t[0]>74.50000000000001?Ht=-.014907705458730486:t[8]>95.50000000000001?Ht=-.02225118168342062:Ht=-.1222374623708485:t[8]>1.5000000000000002?t[8]>950.5000000000001?Ht=.06946188930925638:t[3]>6.500000000000001?t[10]>2.5000000000000004?t[19]>1e-35?Ht=.04962819555610421:Ht=-.07213577821855309:Ht=.09139529824708481:t[19]>1e-35?Ht=.013439401088345224:Ht=-.049274647207292056:Ht=.10531673719686951;let yn;t[40]>1e-35?t[0]>1937.5000000000002?yn=-.06421671152073961:yn=.04235421241226177:t[294]>1e-35?t[10]>50.50000000000001?yn=-.09100102290316286:t[0]>3030.5000000000005?t[0]>4177.500000000001?yn=-.03520420769287065:t[8]>1085.5000000000002?yn=-.019817352506127633:yn=.11444439424520964:yn=-.06854631664538167:t[120]>1e-35?t[4]>18.500000000000004?yn=-.010490117519863269:yn=.08104430117757461:t[121]>1e-35?t[243]>1e-35?yn=.16408304891242204:t[217]>1e-35?t[0]>4449.500000000001?yn=.06619344145920268:t[0]>4091.5000000000005?yn=-.08813353450871053:t[0]>3519.5000000000005?t[8]>668.5000000000001?yn=.10016091391222309:yn=-.017407607199427293:t[8]>501.50000000000006?t[10]>16.500000000000004?yn=-.019511460451434884:yn=-.11643672465055221:t[2]>18.500000000000004?yn=.07848228087333317:t[8]>55.50000000000001?yn=.032583027899956235:yn=-.11209832692153521:t[11]>1e-35?yn=.027482174104412567:t[10]>1.5000000000000002?t[6]>26.500000000000004?t[4]>19.500000000000004?t[9]>31.500000000000004?yn=-.09996887746328006:t[9]>2.5000000000000004?yn=.02157682011863397:yn=-.05247727848991843:yn=.07409150201483244:t[1]>38.50000000000001?yn=-.11378466075449625:t[224]>1e-35?yn=-.10741749127732923:t[1]>26.500000000000004?yn=.07343136534146562:yn=-.07013573628594773:t[25]>1e-35?yn=-.04626669734164317:yn=.05518333197956482:yn=.00032434010867555516;let vn;t[183]>1e-35?t[10]>1.5000000000000002?t[17]>1e-35?vn=.026313251010808853:vn=-.08997339150292381:vn=.025062509535227952:t[227]>1e-35?t[1]>6.500000000000001?t[2]>9.500000000000002?t[210]>1e-35?vn=.08071107515789745:t[23]>1e-35?t[1]>75.50000000000001?vn=.0905155504503746:t[8]>1049.5000000000002?vn=-.062312558183394054:t[8]>719.5000000000001?vn=.09583836191410239:t[0]>3719.5000000000005?vn=-.0778097309430818:vn=.04012012419054895:t[4]>12.500000000000002?t[8]>1496.5000000000002?t[10]>42.50000000000001?vn=-.12920865648544927:t[0]>2699.5000000000005?vn=-.07086587879041864:vn=.022614182502461846:t[4]>15.500000000000002?t[8]>55.50000000000001?t[1]>60.50000000000001?t[8]>652.5000000000001?vn=-.11377786322600797:vn=-.009486325820117998:t[1]>55.50000000000001?vn=.12430248795958142:t[0]>2952.5000000000005?t[0]>4331.500000000001?t[1]>38.50000000000001?vn=-.07938291201004219:t[2]>36.50000000000001?vn=.01520046732530246:vn=.13649854049662832:vn=-.07145015938528873:t[8]>407.50000000000006?vn=-.00350257360822279:vn=.11332047082193297:vn=-.10060624458629897:vn=.05429496612497562:t[8]>1446.5000000000002?vn=.006073419197482838:vn=-.08718676350883998:vn=-.11532497988252638:vn=.10766270463068293:t[34]>1e-35?vn=-.06345912440611544:t[131]>1e-35?t[9]>1.5000000000000002?vn=-.0004109812623829506:vn=.021601073497455662:vn=-7343540098965853e-20;let jt;t[298]>1e-35?t[9]>12.500000000000002?t[133]>1e-35?jt=-.06107663265515864:t[9]>70.50000000000001?t[10]>37.50000000000001?jt=.05995640200798119:t[0]>3443.5000000000005?jt=-.14698883458733583:jt=-.030039164579240187:t[189]>1e-35?jt=-.06086763220538141:t[1]>86.50000000000001?jt=-.05096727866142538:t[4]>64.50000000000001?jt=.11240554253834577:t[4]>45.50000000000001?jt=-.030279760168394117:t[6]>45.50000000000001?jt=.10161088917815142:t[10]>77.50000000000001?jt=-.0792333078055653:t[7]>23.500000000000004?t[0]>2882.5000000000005?jt=-.06672020005240323:jt=.08831457502630258:t[8]>2592.5000000000005?jt=-.052617701047376654:t[10]>29.500000000000004?jt=.08499327690298047:t[2]>12.500000000000002?t[9]>41.50000000000001?jt=.12880460816709416:t[9]>25.500000000000004?t[4]>11.500000000000002?jt=-.064099222705728:jt=.044332487521538365:t[0]>2882.5000000000005?jt=.031099546885005065:jt=.12938467051623853:t[0]>4221.500000000001?jt=-.0928676413498701:t[9]>30.500000000000004?jt=-.05781824812803708:jt=.07561268901778094:t[8]>711.5000000000001?t[2]>22.500000000000004?jt=-.06648105454098469:jt=.05985487552383097:jt=-.13070190291919334:t[116]>1e-35?t[10]>38.50000000000001?jt=.05282385499619401:t[1]>66.50000000000001?jt=.048802929108006314:t[2]>4.500000000000001?t[0]>4593.500000000001?jt=.027885690791379255:jt=-.08407126408362446:jt=.014432924125571093:jt=-9903435845205118e-20;let nn;t[76]>1e-35?nn=-.06307875292162934:t[21]>1e-35?t[7]>10.500000000000002?t[10]>4.500000000000001?t[8]>944.5000000000001?t[0]>3655.5000000000005?nn=.013633653464240465:nn=-.10164319411983509:nn=-.1228424374328996:t[1]>26.500000000000004?t[2]>28.500000000000004?nn=.00632864847804078:nn=-.08393000368134668:nn=.07870508617440916:t[284]>1e-35?nn=.1092302727710421:nn=-.0025505047582483234:t[248]>1e-35?nn=.07101822393621864:t[274]>1e-35?nn=-.06621099406425579:t[1]>26.500000000000004?t[1]>28.500000000000004?nn=.0003077044909372931:t[10]>2.5000000000000004?t[0]>3770.5000000000005?nn=.025081789181021243:nn=-.014813325803582618:t[9]>33.50000000000001?nn=-.033466921233840194:t[3]>12.500000000000002?t[23]>1e-35?nn=.11926990418060353:nn=.01852125513565268:nn=.0975367595927343:t[5]>3325.5000000000005?t[8]>892.5000000000001?t[133]>1e-35?nn=-.1178464984373743:t[283]>1e-35?nn=.043370859226927405:t[5]>4320.500000000001?nn=-.01103141226366587:t[8]>1104.5000000000002?nn=-.023053423988095886:nn=-.0734238953804657:t[6]>18.500000000000004?t[8]>85.50000000000001?nn=.000579145585864887:nn=.03389152834202143:t[128]>1e-35?nn=-.14527722052568462:t[210]>1e-35?nn=-.08915971541902741:t[7]>9.500000000000002?nn=-.03307314577076116:t[18]>1e-35?nn=-.05521712302023565:nn=.009315605032770029:nn=.0036332551852289933;let Jt;t[0]>689.5000000000001?t[5]>768.5000000000001?t[20]>1e-35?t[5]>4368.500000000001?Jt=-.07583539600416284:t[188]>1e-35?Jt=-.07042659515500142:t[23]>1e-35?t[0]>3807.5000000000005?Jt=-.011038193049597113:Jt=.08154028164397753:t[1]>85.50000000000001?Jt=.10259361975201933:Jt=.011640408330521594:Jt=-.00023319159023748508:t[92]>1e-35?Jt=.13771692859530546:Jt=.022860029819654806:t[1]>22.500000000000004?t[1]>24.500000000000004?t[2]>96.50000000000001?Jt=.09967230141007705:t[30]>1e-35?Jt=-.08888529037551285:Jt=-.008615931385397808:t[10]>5.500000000000001?t[4]>36.50000000000001?Jt=.08284665960761373:Jt=-.029292565021289504:t[7]>7.500000000000001?Jt=-.09945093355204493:Jt=-.008381393701708593:t[20]>1e-35?Jt=-.04218678460370465:t[10]>6.500000000000001?t[9]>2.5000000000000004?t[1]>13.500000000000002?t[8]>143.50000000000003?t[4]>7.500000000000001?t[2]>36.50000000000001?Jt=.07585582641438211:t[8]>284.50000000000006?Jt=-.029387993239886723:Jt=.07716738177321587:t[1]>18.500000000000004?Jt=.026745348497993746:Jt=.1427429617069753:t[9]>16.500000000000004?t[9]>33.50000000000001?Jt=.02337306890530338:Jt=-.10390355904767366:Jt=.07390521199638532:Jt=-.06788247515155237:Jt=-.04201446383470994:t[2]>25.500000000000004?t[2]>29.500000000000004?t[8]>227.50000000000003?Jt=-.06360325615644084:Jt=.04342192339836601:Jt=-.10598779152030145:Jt=.05253384605768211;let Tn;t[3]>7.500000000000001?t[157]>1e-35?Tn=-.07514182877923786:Tn=.000636205502279271:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?Tn=.028692053800951845:Tn=.14081686716133598:Tn=-.03316566526940354:t[186]>1e-35?t[0]>2653.5000000000005?Tn=.0037139292567243084:Tn=.12662311031652707:t[107]>1e-35?t[0]>612.5000000000001?Tn=.01202688580305612:Tn=.0993509141454483:t[203]>1e-35?t[1]>77.50000000000001?Tn=.043935495082738626:Tn=-.05639305759669704:t[247]>1e-35?Tn=-.06770766046891649:t[105]>1e-35?t[19]>1e-35?Tn=.10331836202616368:Tn=.0006926658459781341:t[96]>1e-35?Tn=.05361846065599475:t[127]>1e-35?t[0]>2723.5000000000005?t[1]>54.50000000000001?Tn=-.0741403257305367:Tn=.022900127535540854:t[7]>3.5000000000000004?Tn=.038110741403836294:Tn=.14618649985842758:t[5]>3921.5000000000005?t[1]>110.50000000000001?Tn=-.09552842289807008:t[1]>27.500000000000004?Tn=.012505935885798007:Tn=-.020509603428689526:t[282]>1e-35?t[9]>45.50000000000001?t[6]>5.500000000000001?Tn=-.1046104767723845:Tn=.031388606992301074:t[8]>114.50000000000001?t[9]>17.500000000000004?t[9]>22.500000000000004?t[1]>32.50000000000001?Tn=.023466328488582572:Tn=.11730925774586994:Tn=-.04771965631104874:Tn=.17059689880751394:Tn=-.08181850955999449:t[26]>1e-35?Tn=-.12727482696678769:Tn=-.014343123272734182;let Fn;t[147]>1e-35?t[1]>53.50000000000001?Fn=-.0993064321015924:t[0]>2604.5000000000005?t[0]>3629.5000000000005?Fn=-.02763546051134888:Fn=.06423344777499343:Fn=-.064606430904295:t[302]>1e-35?t[10]>2.5000000000000004?t[10]>47.50000000000001?Fn=.049825139823021586:t[7]>22.500000000000004?Fn=-.01131680751379858:t[0]>2579.5000000000005?Fn=-.10673674485369694:Fn=-.015387212937189957:Fn=.04347325151148724:t[179]>1e-35?Fn=-.05788885608624092:t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Fn=.0650355590939066:Fn=-.0473332870892226:Fn=-.09699315983340703:t[288]>1e-35?t[88]>1e-35?Fn=.11139543329789044:t[126]>1e-35?Fn=-.09726928633696198:t[8]>149.50000000000003?t[9]>46.50000000000001?t[4]>1.5000000000000002?t[8]>1861.5000000000002?Fn=.06370903833231022:t[10]>29.500000000000004?Fn=.03415223859607161:t[10]>3.5000000000000004?Fn=-.07415518117873297:Fn=-.0014119203473324082:Fn=.12617652343819508:t[9]>41.50000000000001?Fn=-.10311145857176976:t[8]>2757.5000000000005?Fn=-.08106484219011428:t[7]>71.50000000000001?Fn=-.09783384432091176:t[1]>88.50000000000001?Fn=.06249739709782831:t[3]>9.500000000000002?t[5]>1601.5000000000002?Fn=-.008884084501608536:Fn=.061339437777743616:Fn=-.042490992675121846:t[2]>6.500000000000001?t[3]>10.500000000000002?Fn=.01526664064166223:Fn=.13534828515415498:Fn=-.06985484465894776:Fn=.0005758961943178744;let Yn;t[86]>1e-35?t[1]>23.500000000000004?t[1]>29.500000000000004?t[4]>16.500000000000004?t[2]>31.500000000000004?Yn=-.029152732370514342:Yn=.07173628916139178:t[1]>36.50000000000001?Yn=-.08859111297255318:Yn=.0018030071815630785:Yn=.13652461563759322:Yn=-.07550137680349367:t[10]>52.50000000000001?t[49]>1e-35?Yn=-.07145140450454163:t[21]>1e-35?Yn=-.07422841663493233:Yn=.006289319702780104:t[10]>40.50000000000001?t[9]>59.50000000000001?t[19]>1e-35?t[13]>1e-35?Yn=.11864240653986852:t[3]>33.50000000000001?Yn=-.08821209591953476:Yn=.05706392280054726:Yn=-.03600088051578915:t[18]>1e-35?t[1]>24.500000000000004?Yn=.01953613016837112:Yn=-.059781039130025006:t[148]>1e-35?Yn=.052668447861325476:t[3]>30.500000000000004?t[9]>49.50000000000001?Yn=.07207826841738371:t[202]>1e-35?Yn=.08163917539410503:Yn=-.01319846363832958:t[9]>35.50000000000001?t[5]>4134.500000000001?t[10]>44.50000000000001?Yn=-.06858280496900336:Yn=-.1781828899516648:Yn=-.04024620133969553:t[9]>10.500000000000002?t[1]>22.500000000000004?t[1]>37.50000000000001?Yn=.018232649414147116:Yn=-.04419781124222661:Yn=.05145485182416554:t[1]>23.500000000000004?t[0]>655.5000000000001?t[5]>4901.500000000001?t[10]>45.50000000000001?Yn=.11452368095776105:Yn=-.036496437259924026:Yn=-.040445338739465486:Yn=.0816572651001145:Yn=-.08968914517368663:Yn=.0002826343082585516;let Ur;t[189]>1e-35?t[0]>5269.500000000001?Ur=-.08839493050459957:t[10]>85.50000000000001?Ur=.10046908365702462:t[8]>2592.5000000000005?Ur=-.09632233975926387:t[8]>2000.5000000000002?Ur=.10282992953871627:t[8]>1266.5000000000002?t[9]>34.50000000000001?Ur=.035504970430426296:t[1]>31.500000000000004?Ur=-.1133764813142531:Ur=-.01138280942244812:t[8]>1125.5000000000002?Ur=.09800530246229806:Ur=.016170419267589393:t[218]>1e-35?t[9]>99.50000000000001?t[9]>101.50000000000001?t[9]>124.50000000000001?Ur=.07316772160107896:Ur=-.059095014819051765:Ur=.17859437315769733:t[2]>1.5000000000000002?t[9]>86.50000000000001?Ur=-.09150209066166894:t[8]>3084.0000000000005?Ur=-.05443972593168094:t[1]>65.50000000000001?t[10]>11.500000000000002?t[9]>33.50000000000001?Ur=-.04449234460408263:Ur=.05568837973347338:Ur=-.12362324875024472:t[1]>41.50000000000001?t[10]>12.500000000000002?t[8]>1336.5000000000002?Ur=.12741077850267066:Ur=.007372371864985329:t[2]>39.50000000000001?Ur=.02295917234617787:Ur=.14966532083907075:t[1]>39.50000000000001?Ur=-.06685557815340279:t[10]>22.500000000000004?t[2]>52.50000000000001?Ur=-.02511861881285652:t[1]>27.500000000000004?Ur=.08683660011672288:Ur=.02956214835267301:t[9]>15.500000000000002?Ur=-.016538805462996232:Ur=.04352738094981517:Ur=-.05561856645643868:t[9]>170.50000000000003?Ur=-.07996752635874248:t[179]>1e-35?Ur=-.09065975936933919:Ur=-.00042817975060427177;let Yr;t[39]>1e-35?t[4]>25.500000000000004?Yr=.03443173196222934:Yr=-.06554248341270724:t[32]>1e-35?t[8]>90.50000000000001?t[4]>67.50000000000001?t[4]>86.50000000000001?Yr=-.0013415395759330318:Yr=.12950978489563347:t[1]>22.500000000000004?t[10]>19.500000000000004?t[4]>30.500000000000004?t[9]>41.50000000000001?Yr=.002297618040307216:Yr=-.12522800128774994:t[4]>8.500000000000002?t[8]>1075.5000000000002?Yr=-.015297257305397608:Yr=.09651828834062742:Yr=-.06636003334371929:t[10]>11.500000000000002?Yr=.17631616138309397:t[0]>1639.5000000000002?Yr=3804386478092585e-20:Yr=-.09099296398683193:Yr=-.06874415876172972:t[0]>2151.5000000000005?Yr=-.1311264883406766:Yr=.00809052010141122:t[253]>1e-35?Yr=-.06338558211939296:t[178]>1e-35?t[2]>25.500000000000004?t[2]>30.500000000000004?t[0]>2151.5000000000005?t[10]>10.500000000000002?t[0]>3615.5000000000005?Yr=.045038497754638605:Yr=-.07770167665661752:Yr=-.08596294280650517:Yr=.08538655727027213:Yr=.09829076418590559:t[1]>39.50000000000001?t[9]>1.5000000000000002?Yr=.054627956617973275:t[1]>61.50000000000001?Yr=-.11994465088415499:t[4]>8.500000000000002?Yr=.06676200239406452:Yr=-.027503148069376867:t[8]>676.5000000000001?Yr=-.10363964928357075:t[4]>8.500000000000002?Yr=-.07589816227175682:Yr=.034664436544646814:t[1]>159.50000000000003?t[6]>25.500000000000004?Yr=.009093153189012338:Yr=-.06119765876605404:Yr=.0004668642103528348;let Fr;t[223]>1e-35?t[1]>31.500000000000004?t[8]>711.5000000000001?Fr=-.10100794502567233:Fr=.08000205636470442:Fr=-.11945419826856896:t[113]>1e-35?Fr=-.06105445938688056:t[167]>1e-35?t[0]>3928.5000000000005?Fr=.1224302423880318:Fr=-.01875566982911468:t[222]>1e-35?t[1]>8.500000000000002?t[1]>24.500000000000004?t[4]>3.5000000000000004?t[0]>725.5000000000001?t[0]>1682.5000000000002?t[0]>2860.5000000000005?Fr=.0019277012166729114:t[1]>28.500000000000004?Fr=-.054445821715687494:Fr=.045645722976713245:t[30]>1e-35?Fr=.13402660155331655:Fr=.008921176001777645:Fr=-.058547426505451076:Fr=.08841202222426625:t[1]>22.500000000000004?t[10]>9.500000000000002?Fr=-.13526418192218206:Fr=-.03266013432583145:t[1]>20.500000000000004?t[4]>27.500000000000004?Fr=.0007263224246135398:Fr=.12450043268647056:t[1]>17.500000000000004?t[9]>1.5000000000000002?Fr=-.11575657261278308:Fr=-.01530376565862095:t[4]>13.500000000000002?t[4]>22.500000000000004?Fr=-.01995960178292952:Fr=.11216586049153021:Fr=-.10050961087149474:Fr=.08848063368485726:t[30]>1e-35?t[224]>1e-35?t[1]>52.50000000000001?Fr=.10303451081526649:Fr=-.01375730267020699:t[1]>28.500000000000004?t[2]>20.500000000000004?Fr=-.043799548968209395:Fr=-.12451444314954115:t[4]>12.500000000000002?Fr=-.03838117361958468:Fr=.06504990789767144:t[57]>1e-35?Fr=.06890006938293915:Fr=.0003914274695562949;let jr;t[53]>1e-35?t[4]>11.500000000000002?t[8]>617.5000000000001?t[2]>41.50000000000001?jr=.004271749009686975:jr=-.10523878297127605:jr=.04633982158107851:jr=-.10349713975483057:t[183]>1e-35?t[15]>1e-35?jr=-.08655730561951676:t[8]>919.5000000000001?jr=-.0676453705610183:t[7]>18.500000000000004?jr=-.027787974193650575:jr=.08012784576991301:t[227]>1e-35?t[1]>6.500000000000001?t[3]>8.500000000000002?t[210]>1e-35?jr=.07185850683316512:t[8]>201.50000000000003?t[8]>348.50000000000006?t[23]>1e-35?t[8]>1049.5000000000002?jr=-.03473877164537313:t[8]>719.5000000000001?jr=.10471053866934404:jr=.008236107678382981:t[4]>57.50000000000001?jr=.09412219478825269:t[10]>66.50000000000001?jr=-.13884338641811986:t[10]>19.500000000000004?t[10]>22.500000000000004?t[0]>2490.5000000000005?jr=-.040681323751002293:jr=.06374650297561021:jr=.12884615227401788:t[10]>5.500000000000001?jr=-.0887517295786972:t[8]>597.5000000000001?t[18]>1e-35?jr=-.05474068967150784:jr=.03744700650806603:jr=-.07846396348680855:t[1]>42.50000000000001?jr=.018972315810821302:jr=.10953621007604744:t[5]>4439.500000000001?jr=.010999776705494586:t[1]>40.50000000000001?jr=-.12394200059775967:t[10]>2.5000000000000004?jr=.013528093962849453:jr=-.09222088417048682:jr=-.12662967149701485:jr=.09327296405849603:t[3]>99.50000000000001?jr=-.013581954439986752:jr=.0005526498251862075;let tr;t[187]>1e-35?t[243]>1e-35?tr=-.08392792551692502:t[10]>68.50000000000001?tr=.07871769409454053:t[10]>8.500000000000002?t[10]>16.500000000000004?t[2]>17.500000000000004?t[3]>31.500000000000004?t[91]>1e-35?t[10]>21.500000000000004?t[10]>33.50000000000001?t[10]>48.50000000000001?tr=-.0825306209711224:tr=.049559996084532945:tr=-.1064938580886302:tr=.03353240732240275:tr=.045985370399163464:t[1]>42.50000000000001?t[4]>20.500000000000004?tr=.16966001471529374:t[1]>57.50000000000001?tr=-.005772777673676247:tr=.09383677041525058:t[8]>747.5000000000001?tr=.054068175469351235:tr=-.049968216310277036:t[8]>753.5000000000001?tr=-.0679383555784074:t[4]>8.500000000000002?tr=-.059757341189735386:tr=.05701083682780414:tr=-.052497281448921164:t[6]>12.500000000000002?t[8]>969.5000000000001?t[4]>23.500000000000004?tr=.05820296128730006:tr=-.1063042385102475:t[1]>49.50000000000001?t[8]>302.50000000000006?tr=.15340611616954566:tr=.04385036188666874:t[0]>4449.500000000001?tr=-.02110897605541555:t[1]>24.500000000000004?t[2]>17.500000000000004?tr=.004840354641006495:tr=.09967827580276283:tr=.11605363537391578:t[9]>19.500000000000004?tr=-.0735831692725717:tr=.019973331823355176:t[306]>1e-35?t[149]>1e-35?tr=-.08968948874343531:t[8]>1094.5000000000002?t[10]>15.500000000000002?tr=-.02442182361342386:tr=.10334853004243093:tr=-.030431948680167104:tr=-956078595250818e-19;let Vr;t[294]>1e-35?t[1]>26.500000000000004?t[0]>4078.5000000000005?Vr=-.040232505718244854:t[0]>3030.5000000000005?Vr=.0634109586813073:Vr=-.04043617034245621:Vr=-.06385323610738443:t[120]>1e-35?t[4]>18.500000000000004?Vr=-.007859096946435131:Vr=.07282728486115758:t[229]>1e-35?t[0]>2952.5000000000005?t[17]>1e-35?Vr=.05515771679628051:Vr=-.04214471312668263:Vr=-.09589322222261765:t[193]>1e-35?Vr=-.05056345906812831:t[121]>1e-35?t[243]>1e-35?Vr=.14857706653119385:t[4]>9.500000000000002?t[1]>26.500000000000004?t[2]>59.50000000000001?Vr=-.08152604001147906:t[11]>1e-35?Vr=.09132936522356462:t[15]>1e-35?t[4]>23.500000000000004?Vr=.13100930780107503:t[10]>25.500000000000004?Vr=.05921074710011526:Vr=-.07226005736695183:t[0]>3304.5000000000005?t[0]>3707.5000000000005?t[0]>4053.5000000000005?Vr=.0009447118243153454:Vr=-.09820565036865991:Vr=.057146909749745546:t[0]>2115.5000000000005?Vr=-.12331216726611678:Vr=.007281983677694285:t[2]>56.50000000000001?Vr=.012310154675612615:Vr=-.08873665774670461:t[6]>25.500000000000004?Vr=.134708740821879:t[9]>5.500000000000001?Vr=-.0805901581148979:t[224]>1e-35?Vr=-.063684477784257:t[7]>2.5000000000000004?t[19]>1e-35?Vr=.10842593386554122:t[2]>13.500000000000002?Vr=.06466798320378395:Vr=-.08578130788886655:Vr=-.03590892078300114:Vr=.0003499894043880708;let _e;t[134]>1e-35?t[6]>50.50000000000001?t[0]>3601.5000000000005?_e=.10839808814624702:_e=-.028043875308180352:t[7]>30.500000000000004?t[8]>932.5000000000001?_e=-.007478368069393829:_e=-.09066751344326617:t[0]>3588.5000000000005?t[5]>4748.500000000001?_e=.04035247751736232:t[0]>4255.500000000001?_e=-.1310865624507367:t[0]>4004.5000000000005?_e=.06647367311982634:_e=-.08339693352955757:t[4]>10.500000000000002?t[1]>34.50000000000001?_e=-.011618902907510411:_e=.1114646660406691:t[10]>2.5000000000000004?t[0]>3072.5000000000005?_e=.09356028223727986:_e=-.03811765057032162:_e=-.09456215497345526:t[280]>1e-35?t[7]>70.50000000000001?_e=.10322956436499003:t[2]>22.500000000000004?t[1]>83.50000000000001?_e=.1146142460964847:t[1]>62.50000000000001?_e=-.09679869865322362:t[9]>71.50000000000001?_e=-.07377580769927583:t[4]>19.500000000000004?t[0]>4571.500000000001?_e=-.039046426387852974:_e=.04558778688367152:_e=.11220830937352602:t[7]>5.500000000000001?t[9]>17.500000000000004?t[8]>1067.5000000000002?_e=.03261697816211156:t[15]>1e-35?_e=.02586252542264368:t[2]>14.500000000000002?_e=-.016420452667484604:_e=-.1011799626006976:_e=-.13787471318963773:t[6]>4.500000000000001?t[8]>427.50000000000006?t[10]>36.50000000000001?_e=.010193588102560583:_e=.11748729525930773:_e=-.04468162226743652:_e=-.028365274393617957:t[71]>1e-35?_e=.05115139346588793:_e=-.0001510425316936658;let q;t[298]>1e-35?t[8]>81.50000000000001?t[8]>119.50000000000001?t[4]>64.50000000000001?q=.09072192054181037:t[9]>72.50000000000001?t[8]>1094.5000000000002?q=.020637047900190317:q=-.1017300802134141:t[1]>23.500000000000004?t[9]>12.500000000000002?t[0]>2815.5000000000005?t[0]>3183.5000000000005?t[3]>23.500000000000004?t[3]>45.50000000000001?t[4]>48.50000000000001?q=-.04632587527094407:q=.08603684785510396:q=-.05101401015448496:q=.025466432054358498:q=-.07897811963329214:t[6]>13.500000000000002?t[10]>26.500000000000004?q=.020385355430046367:q=.12032592051335252:q=-.012387370292173013:t[2]>23.500000000000004?q=-.12568545484492677:q=-.022261190943521976:t[8]>634.5000000000001?t[8]>857.5000000000001?q=.043528764484784536:q=.14352071657196003:q=-.009332833816977268:q=.11186782227735846:q=-.0737365712425554:t[136]>1e-35?t[0]>1937.5000000000002?q=-.05649104643152564:q=.03884200719305747:t[42]>1e-35?q=-.07191700385792335:t[116]>1e-35?t[9]>2.5000000000000004?t[9]>17.500000000000004?q=-.04103416502526736:q=.04881823954656287:t[4]>15.500000000000002?q=.009342724662897898:t[0]>3969.5000000000005?q=-.025637309961309498:q=-.12574492012987865:t[212]>1e-35?t[19]>1e-35?q=-.08185697075265091:t[0]>2215.5000000000005?q=.030063975892297354:t[0]>807.5000000000001?q=-.03924325550733229:q=.0415330999189793:q=-.00024374664461674863;let ge;t[3]>7.500000000000001?ge=.0005117490419655908:t[129]>1e-35?t[0]>2904.5000000000005?t[0]>4004.5000000000005?ge=.025798416259686565:ge=.13251610353146012:ge=-.029900559552677654:t[1]>81.50000000000001?t[1]>110.50000000000001?t[0]>4242.500000000001?ge=-.11098564237775424:ge=25960925309712775e-21:t[0]>4177.500000000001?t[9]>35.50000000000001?ge=.15347826616466054:t[3]>4.500000000000001?ge=.10379320730958941:ge=-.008896303020010654:t[0]>3415.5000000000005?t[0]>3830.5000000000005?ge=.03159791088468647:ge=-.10612873364104258:ge=.05059856107348746:t[133]>1e-35?t[2]>5.500000000000001?ge=-.02335760775001469:ge=-.1379386577903324:t[1]>62.50000000000001?t[3]>2.5000000000000004?ge=-.011164334474672973:ge=-.06594044410501655:t[207]>1e-35?ge=-.1014214372326535:t[8]>3.5000000000000004?t[107]>1e-35?t[2]>6.500000000000001?ge=-.01725821503981916:ge=.05594086838700241:t[203]>1e-35?t[1]>44.50000000000001?t[1]>51.50000000000001?ge=-.04226531631656534:ge=-.14409800530171432:ge=-.03245576341206398:t[8]>4214.500000000001?ge=.0895409165534886:t[247]>1e-35?ge=-.06506383629143335:t[118]>1e-35?ge=-.07214270121257443:t[8]>546.5000000000001?ge=-.004385020865473831:ge=.009321812545248529:t[0]>1639.5000000000002?t[13]>1e-35?ge=.046278501133958524:ge=-.030835570926968044:t[0]>493.50000000000006?ge=-.12794504651610425:ge=.009415039807550776;let ve;t[304]>1e-35?ve=-.04717777269217453:t[76]>1e-35?ve=-.05813439142128324:t[1]>59.50000000000001?t[0]>350.50000000000006?t[53]>1e-35?ve=-.09648224457374217:t[132]>1e-35?ve=.07089308107910267:t[0]>2248.5000000000005?t[5]>2525.5000000000005?t[9]>1.5000000000000002?t[114]>1e-35?ve=-.08595213071749083:t[9]>14.500000000000002?t[9]>33.50000000000001?t[285]>1e-35?ve=.10838431695638147:t[230]>1e-35?ve=.06458713915750626:t[0]>3219.5000000000005?t[3]>23.500000000000004?t[9]>69.50000000000001?ve=.050071316251979:ve=-.006356941111525215:t[6]>8.500000000000002?ve=-.0384814076434817:t[1]>73.50000000000001?t[0]>3746.5000000000005?ve=.10217402850540398:ve=-.048840949025349197:ve=-.03668313197909846:t[7]>39.50000000000001?ve=-.0562642841496003:t[10]>2.5000000000000004?ve=.09749777369987417:ve=-.04848223121417616:t[0]>5453.500000000001?ve=.08316648226133942:ve=-.0261979698267618:t[212]>1e-35?ve=.09565573198318654:t[5]>4814.500000000001?t[8]>963.5000000000001?t[8]>1514.5000000000002?ve=.04837009746506856:ve=-.09184360565631328:ve=.0032411047845613606:t[0]>4733.500000000001?ve=.0977378556864798:ve=.010776545559325588:ve=-.012483310473120218:ve=-.049284121449103935:ve=.011962641341789565:t[1]>67.50000000000001?t[1]>77.50000000000001?ve=-.08380361910948711:ve=.07375088778585813:ve=-.1084864186071348:ve=.0007819503469605476;let Z;t[7]>17.500000000000004?t[115]>1e-35?Z=.08741852531696623:t[167]>1e-35?Z=.10078975495600809:Z=-.0018324767784017562:t[290]>1e-35?Z=-.0850089851255888:t[74]>1e-35?t[10]>16.500000000000004?Z=.1379733311640402:Z=-.0038500648529631075:t[6]>29.500000000000004?t[8]>876.5000000000001?t[0]>3129.5000000000005?t[9]>5.500000000000001?t[8]>1765.5000000000002?Z=-.09360083033774169:Z=.061471353193188374:t[10]>11.500000000000002?t[10]>31.500000000000004?Z=-.015599362579530679:t[0]>4593.500000000001?Z=-.12029549262691491:Z=-.018917032256501397:Z=.04632831686576592:Z=.06892347785444271:t[4]>8.500000000000002?t[10]>33.50000000000001?Z=-.05894883236412263:Z=.05213944998315824:Z=.12621779223564986:t[243]>1e-35?t[6]>16.500000000000004?t[0]>4141.500000000001?t[0]>5850.500000000001?Z=.07577412405680808:Z=-.053144737214742235:t[1]>29.500000000000004?t[9]>16.500000000000004?Z=-.0277076900736147:t[1]>65.50000000000001?Z=-.023587471585763506:Z=.10184896592433082:Z=-.057699270527916825:Z=-.041191811945739454:t[114]>1e-35?t[2]>23.500000000000004?Z=.06566902102799584:t[10]>25.500000000000004?Z=-.07033633753181047:Z=-.01599120398351932:t[242]>1e-35?t[0]>2402.5000000000005?Z=-.08108035861059537:Z=.04184690010531078:t[35]>1e-35?t[0]>2904.5000000000005?Z=-.12431182772561139:Z=.01886235886984271:Z=.0025579594894418116;let M;t[8]>2915.5000000000005?t[101]>1e-35?M=.08648323956719083:t[0]>93.50000000000001?t[196]>1e-35?M=-.09509320772734361:t[4]>1.5000000000000002?t[5]>1106.5000000000002?t[5]>1191.5000000000002?t[283]>1e-35?M=-.11268313808648661:t[10]>12.500000000000002?t[131]>1e-35?M=.0687641681341721:t[10]>102.50000000000001?M=-.09667920080214842:t[4]>15.500000000000002?t[8]>2992.5000000000005?t[1]>24.500000000000004?t[1]>71.50000000000001?M=-.06762578396473291:t[10]>65.50000000000001?M=-.05226727783610509:t[282]>1e-35?M=.09911438410640917:t[19]>1e-35?M=.06915156336429933:M=-.006565637886508241:M=-.08344300251849307:M=-.0928863907927501:t[1]>60.50000000000001?t[2]>17.500000000000004?M=.19428463865406298:M=.016073883020956765:t[13]>1e-35?M=.06864077097923665:M=-.01388867527034731:t[0]>1847.5000000000002?M=.004655280608161356:t[1]>40.50000000000001?M=.031406054057765996:M=.12798062439212832:M=.09859670536264255:t[10]>2.5000000000000004?t[9]>68.50000000000001?M=.08821759640665892:t[9]>32.50000000000001?t[8]>3960.0000000000005?t[1]>31.500000000000004?M=-.0706095614785733:M=.04227164041372561:M=-.1056906923176064:t[2]>8.500000000000002?t[19]>1e-35?M=-.07139533369873902:M=.008952586782921625:M=.06086212582180936:M=-.0816938490403437:M=-.051224901945956025:M=-.10525399124186095:M=.000270924147208224;let ke;t[122]>1e-35?t[0]>2461.5000000000005?t[2]>36.50000000000001?ke=.029186512383291244:t[7]>1.5000000000000002?ke=-.14984127276725573:t[1]>40.50000000000001?ke=.032757060730648144:ke=-.07675575422749602:t[6]>8.500000000000002?ke=.10599766037117893:ke=-.0541423394552156:t[1]>24.500000000000004?t[103]>1e-35?t[8]>61.50000000000001?t[17]>1e-35?ke=-.051394622947855385:ke=.03237141302699347:ke=.12526173027943244:ke=.000579473126472788:t[18]>1e-35?t[3]>4.500000000000001?t[3]>6.500000000000001?t[0]>5453.500000000001?ke=-.07383912482657777:t[0]>5147.500000000001?ke=.07008813937042091:t[10]>38.50000000000001?ke=-.06779203808365307:ke=-.013782769999524498:ke=.0880038869117715:ke=-.12846294176070952:t[281]>1e-35?ke=-.06810806903850834:t[10]>227.50000000000003?ke=-.08937977001661111:t[10]>130.50000000000003?ke=.10538920632708033:t[145]>1e-35?t[4]>6.500000000000001?t[9]>16.500000000000004?t[4]>18.500000000000004?ke=.011036530162093841:ke=-.11500797478569702:ke=.03702229366129399:ke=.07242026683784307:t[189]>1e-35?ke=.03331407112090286:t[9]>33.50000000000001?t[201]>1e-35?ke=.08979610115743614:t[7]>57.50000000000001?t[1]>20.500000000000004?ke=-.02608892716555304:ke=.09609599320761308:t[9]>105.50000000000001?ke=-.06848127135991534:ke=.0023675721254089715:t[86]>1e-35?ke=-.11049635625500497:ke=-.004847764219432233;let $e;t[125]>1e-35?t[0]>3969.5000000000005?$e=-.09462233499115416:$e=.05235324508465096:t[17]>1e-35?t[49]>1e-35?t[10]>19.500000000000004?$e=-.030700661288166148:$e=.0870883677166864:t[10]>3.5000000000000004?t[3]>18.500000000000004?t[0]>3544.5000000000005?t[188]>1e-35?t[9]>7.500000000000001?$e=.03149547314036763:$e=-.08166208257451366:t[0]>5850.500000000001?$e=-.10228136324773157:t[102]>1e-35?$e=-.10572585290676295:t[8]>726.5000000000001?t[5]>3657.5000000000005?$e=.01782894842128785:t[13]>1e-35?$e=.002680190260979968:$e=.1773965720476949:t[2]>72.50000000000001?$e=.09090831938627947:t[1]>59.50000000000001?$e=-.12297206702816128:t[0]>4977.500000000001?$e=.09899015653118268:$e=-.022207141540838887:t[4]>32.50000000000001?t[1]>34.50000000000001?$e=-.0675900954187773:$e=.012336403425364092:$e=-.0017002325391924573:t[6]>7.500000000000001?t[1]>17.500000000000004?$e=-.02671721777458802:$e=-.09242452991958029:t[284]>1e-35?$e=-.08585691288582491:$e=.013332890564324447:t[4]>14.500000000000002?$e=-.005245022074799553:t[23]>1e-35?$e=-.020036720167235768:t[1]>29.500000000000004?t[114]>1e-35?$e=-.09289852307936758:t[116]>1e-35?$e=-.09686573010015055:t[8]>804.5000000000001?$e=.03812547148215318:$e=.005162744968176633:t[9]>43.50000000000001?$e=-.059246106396159376:$e=.050370113808135275:$e=.000794041852811028;let qt;t[3]>7.500000000000001?qt=.0004981426543104341:t[9]>114.50000000000001?qt=.05666010099424601:t[129]>1e-35?t[6]>3.5000000000000004?qt=-.019061766497948867:qt=.07193491146561211:t[186]>1e-35?t[0]>2653.5000000000005?qt=-.006044199577160493:qt=.1147136801028133:t[6]>85.50000000000001?t[8]>847.5000000000001?qt=.11486607015912494:t[9]>16.500000000000004?qt=-.08686820858087294:qt=.06119632492911875:t[127]>1e-35?t[0]>2723.5000000000005?t[0]>3682.5000000000005?t[1]>38.50000000000001?qt=-.022230207980026437:qt=.1056683690528792:qt=-.05859530800943035:qt=.06970608927597141:t[7]>3.5000000000000004?t[105]>1e-35?qt=.08073568184886762:t[107]>1e-35?t[2]>6.500000000000001?qt=-.05177544573528314:qt=.05370469772149028:t[1]>35.50000000000001?t[0]>4106.500000000001?t[9]>46.50000000000001?t[0]>4633.500000000001?qt=.15159657923771555:qt=-.0060542654587671055:t[9]>5.500000000000001?qt=-.042808028205051786:t[1]>48.50000000000001?qt=-.010449538258110742:qt=.10026907521968294:qt=-.04249349329714756:t[9]>42.50000000000001?t[1]>19.500000000000004?t[8]>852.5000000000001?qt=-.02272452389409874:qt=-.11202691218244319:t[5]>1809.5000000000002?qt=-.04460413584255906:qt=.08196329474205256:t[10]>69.50000000000001?qt=.10221481166238167:qt=.0004063052701699382:t[243]>1e-35?qt=-.07563941678849846:t[18]>1e-35?qt=.02563513231103432:qt=-.004740081147303786;let Sn;t[84]>1e-35?t[9]>6.500000000000001?t[2]>43.50000000000001?Sn=.057446442918106:Sn=-.04404018270156349:Sn=-.09282976714550464:t[0]>384.50000000000006?t[204]>1e-35?t[1]>62.50000000000001?Sn=-.05930486238817954:t[1]>29.500000000000004?Sn=.06955866121256543:t[8]>597.5000000000001?Sn=-.06538593556505168:Sn=.06212512595497445:Sn=.00021102929959182257:t[9]>90.50000000000001?Sn=.0958061289119631:t[102]>1e-35?Sn=.07172059675638813:t[1]>47.50000000000001?Sn=-.03879798603977766:t[297]>1e-35?Sn=.054948234271956144:t[282]>1e-35?t[2]>6.500000000000001?Sn=.003805910996312012:Sn=.09304295674749524:t[11]>1e-35?t[18]>1e-35?Sn=.11252376801858695:t[288]>1e-35?Sn=-.10293901912180432:Sn=.014669268837893872:t[1]>42.50000000000001?Sn=-.05988274123836837:t[145]>1e-35?Sn=.06142784665288495:t[3]>1.5000000000000002?t[4]>4.500000000000001?t[1]>21.500000000000004?t[1]>27.500000000000004?t[9]>24.500000000000004?Sn=.038791154988529926:t[10]>22.500000000000004?t[2]>19.500000000000004?Sn=-.03366718308159971:Sn=.11936550608549797:t[1]>31.500000000000004?Sn=-.07454716789539667:Sn=.027859650621164217:t[10]>10.500000000000002?Sn=-.11806374092321247:Sn=-.03506042229223101:Sn=-.0007080765837654515:t[10]>6.500000000000001?Sn=-.028077713664996503:t[2]>7.500000000000001?Sn=.15803724124216814:Sn=.0351381284833169:Sn=-.07877953381054767;let mn;t[131]>1e-35?t[282]>1e-35?t[4]>23.500000000000004?mn=.14144941521975005:mn=.0007727806714190652:t[9]>1.5000000000000002?t[8]>2134.5000000000005?t[2]>34.50000000000001?mn=.10514088112381886:t[7]>18.500000000000004?mn=-.10370643555956745:mn=.04093594315421388:t[6]>15.500000000000002?t[4]>9.500000000000002?t[10]>27.500000000000004?t[10]>71.50000000000001?mn=-.0508129468802936:t[224]>1e-35?mn=-.037816066368733595:t[10]>43.50000000000001?mn=.07793408602607932:mn=.017646166646099453:t[9]>3.5000000000000004?t[9]>29.500000000000004?t[17]>1e-35?mn=.036972453794202324:mn=-.08727431092411866:t[8]>427.50000000000006?t[8]>1278.5000000000002?mn=.09475302525132188:mn=-.03580104945898193:mn=.08349488283861875:t[10]>3.5000000000000004?t[0]>1847.5000000000002?t[0]>4280.500000000001?t[2]>27.500000000000004?mn=-.1282448778804823:mn=-.014395808269207212:mn=-.008940927190750592:mn=-.1459118815453748:t[0]>4897.500000000001?mn=-.09733068457286576:t[1]>57.50000000000001?mn=.06575271409540207:mn=-.019556422817450115:mn=-.10623959222984136:t[18]>1e-35?mn=.11280940901275241:t[8]>319.50000000000006?t[2]>6.500000000000001?mn=.008125645893104896:mn=-.11084368630465868:mn=.0584398731508786:t[0]>350.50000000000006?t[3]>83.50000000000001?mn=-.05854904579626861:t[4]>5.500000000000001?mn=.02985784951394175:mn=-.03247600140149334:mn=-.11152899295304973:mn=-.00035424577714215764;let lr;t[32]>1e-35?t[17]>1e-35?t[8]>359.50000000000006?t[8]>804.5000000000001?lr=-.06563670567578264:lr=.067656954313663:lr=-.10388217548685377:t[8]>2302.5000000000005?lr=.07190621943790435:t[4]>67.50000000000001?lr=.060020507643618604:t[4]>38.50000000000001?lr=-.08707253184321638:t[2]>11.500000000000002?t[2]>16.500000000000004?t[1]>31.500000000000004?t[1]>59.50000000000001?lr=-.06568134366461277:t[8]>1075.5000000000002?lr=-.004768057709758692:lr=.11785959165999467:lr=-.05080221682879267:lr=.14814206127494542:lr=-.07241946332311736:t[253]>1e-35?lr=-.058893562861261274:t[4]>61.50000000000001?t[283]>1e-35?t[10]>23.500000000000004?lr=-.02471195342450034:lr=.11866056464409412:t[10]>44.50000000000001?t[1]>16.500000000000004?t[8]>2640.0000000000005?lr=-.10741850739482771:lr=.010051635824944:lr=.12502069436017124:t[8]>1971.5000000000002?t[1]>23.500000000000004?t[308]>1e-35?lr=.10511236013756364:t[10]>10.500000000000002?t[1]>53.50000000000001?lr=-.08992396138178163:lr=.010944365997007212:lr=.06221307021813793:lr=.1286024087559141:t[127]>1e-35?lr=.06568148624531012:t[10]>40.50000000000001?lr=-.07567979134643352:t[5]>5647.500000000001?lr=.07594672895572069:lr=-.018158016446439187:t[6]>55.50000000000001?lr=.009293422430111872:t[4]>45.50000000000001?lr=-.017749818406964022:t[2]>46.50000000000001?lr=.01714136511113982:lr=-724762291423549e-19;let pr;t[1]>24.500000000000004?t[103]>1e-35?t[8]>48.50000000000001?t[17]>1e-35?pr=-.048689215588703864:t[9]>27.500000000000004?t[0]>3916.5000000000005?pr=.07084726276890757:pr=-.11232323677722932:pr=.04812773089510436:pr=.11757502216780046:t[5]>1464.5000000000002?t[5]>1505.5000000000002?t[167]>1e-35?pr=.07470606002425358:t[1]>53.50000000000001?t[132]>1e-35?pr=.0879462816013881:pr=-.002966662093626573:t[306]>1e-35?pr=-.04588085188342676:pr=.0031910005157084823:t[3]>10.500000000000002?t[10]>20.500000000000004?pr=-.006600332774461143:pr=.1272481351557754:pr=-.09030973597154808:t[284]>1e-35?t[1]>38.50000000000001?t[10]>2.5000000000000004?pr=.011884312066620044:pr=.11678751052403374:t[4]>8.500000000000002?pr=.03627129613273813:pr=-.12132783497902287:pr=-.006784372643244717:t[18]>1e-35?t[3]>4.500000000000001?t[3]>6.500000000000001?t[0]>5453.500000000001?pr=-.06830131718398992:t[0]>5147.500000000001?pr=.062360406249609306:t[4]>4.500000000000001?pr=-.013162203864592055:pr=-.07153029184927609:pr=.07628618062271557:pr=-.12085065687320373:t[190]>1e-35?pr=-.045816889524231186:t[137]>1e-35?pr=-.07956001795911584:t[199]>1e-35?t[0]>3853.5000000000005?pr=.025895337822752502:pr=-.06503949350616421:t[10]>227.50000000000003?pr=-.09989456525790491:t[10]>130.50000000000003?pr=.08616651057030683:pr=.0001234981796706021;let bn;t[8]>1014.5000000000001?t[9]>137.50000000000003?bn=-.08778879924617534:t[8]>1022.5000000000001?t[285]>1e-35?t[9]>64.50000000000001?bn=.04955806187281689:t[0]>3670.5000000000005?t[10]>32.50000000000001?bn=-.141732381961068:bn=-.0317152307496497:bn=-.02074638849097191:t[0]>93.50000000000001?t[0]>3072.5000000000005?t[10]>100.50000000000001?t[4]>24.500000000000004?t[8]>1336.5000000000002?bn=.12191801556691254:bn=-.0003444689085397977:bn=.005739668504631604:t[146]>1e-35?t[308]>1e-35?bn=.015237524791728777:t[6]>61.50000000000001?t[4]>63.50000000000001?bn=-.05676033995381961:bn=.10933961076803381:t[4]>26.500000000000004?bn=-.11667582544549814:t[8]>1765.5000000000002?bn=.032174455312047705:bn=-.0755016390126608:t[293]>1e-35?bn=-.08234885407658332:t[9]>41.50000000000001?t[0]>3830.5000000000005?bn=.026571311956824436:t[15]>1e-35?bn=.06175459479851121:bn=-.018778084411148754:t[9]>40.50000000000001?bn=-.09420232889965811:bn=-.004578248021263184:t[2]>1.5000000000000002?bn=.005453714644971445:bn=-.03907138175699279:bn=-.055296364182154736:t[23]>1e-35?bn=.036555134842143476:t[0]>4188.500000000001?t[6]>29.500000000000004?bn=-.09358146510580179:bn=.060524657996178094:bn=-.11245101144669545:t[125]>1e-35?t[9]>1.5000000000000002?bn=-.12698331085931538:bn=.006059605604079918:t[2]>196.50000000000003?bn=-.09451315810804783:bn=.0011390147031687425;let Gt;t[8]>2830.5000000000005?t[1]>31.500000000000004?t[9]>32.50000000000001?t[5]>1234.5000000000002?t[8]>3794.5000000000005?Gt=.05517359070460923:Gt=-.04758751221404857:Gt=-.09482078194138792:t[8]>2992.5000000000005?t[1]>101.50000000000001?Gt=.1040436595565776:t[9]>21.500000000000004?Gt=.04032250517675179:t[107]>1e-35?Gt=.05978752253058374:t[210]>1e-35?t[4]>37.50000000000001?Gt=.1192453009230486:t[1]>51.50000000000001?Gt=.0443376336292195:Gt=-.07967674833321865:t[5]>2117.5000000000005?t[9]>10.500000000000002?Gt=-.10025078607591283:t[0]>2882.5000000000005?t[18]>1e-35?Gt=-.08999822408398037:Gt=.017533219253893447:t[9]>1.5000000000000002?t[4]>12.500000000000002?Gt=-.061850439226075:Gt=.08849196353361093:Gt=.10536348167793089:t[92]>1e-35?Gt=.04894947712119185:t[9]>16.500000000000004?Gt=.05900227903883853:t[9]>5.500000000000001?Gt=-.11946594348916476:Gt=-.03652096348071964:t[1]>41.50000000000001?Gt=-.07411603110840567:Gt=-.00021033247574340914:t[10]>22.500000000000004?t[9]>68.50000000000001?Gt=.08493634342741495:t[11]>1e-35?Gt=-.10899097825564363:Gt=-.006156708838964173:t[8]>3198.5000000000005?t[2]>41.50000000000001?Gt=.08356655906359918:t[7]>25.500000000000004?Gt=-.09475076526194888:t[10]>5.500000000000001?Gt=-.01999406228763778:Gt=.06696212545889428:t[6]>20.500000000000004?Gt=.14713592661393468:Gt=.0459917279002218:Gt=.00027445928493734093;let Mr;t[223]>1e-35?t[1]>31.500000000000004?t[8]>634.5000000000001?Mr=-.06904501553217077:Mr=.05696231672035904:Mr=-.1124703178077813:t[99]>1e-35?t[1]>89.50000000000001?Mr=-.05074261170009721:t[1]>57.50000000000001?t[8]>969.5000000000001?Mr=-.011419256378538392:t[0]>3830.5000000000005?Mr=.140315841503076:Mr=.02403434913963024:t[1]>31.500000000000004?t[8]>65.50000000000001?t[2]>10.500000000000002?Mr=-.04027822909411164:Mr=.03176085103667189:Mr=.06779515865838849:t[4]>15.500000000000002?Mr=.0762878389015175:t[8]>175.50000000000003?t[0]>3030.5000000000005?t[8]>1041.5000000000002?Mr=.06124039747298539:Mr=-.04312732764434027:Mr=.09161522761808062:Mr=-.09663512235460074:t[280]>1e-35?t[6]>45.50000000000001?t[1]>46.50000000000001?Mr=.11211681010488772:t[13]>1e-35?Mr=.06725735814960367:Mr=-.046744031455827846:t[10]>44.50000000000001?t[0]>3400.5000000000005?t[0]>4004.5000000000005?t[2]>22.500000000000004?Mr=.11743605068905603:Mr=-.011309033539148687:Mr=-.07896094707523052:Mr=.12862714793172117:t[10]>1.5000000000000002?t[8]>455.50000000000006?t[0]>4706.500000000001?Mr=-.09218756798869711:t[10]>19.500000000000004?t[0]>1894.5000000000002?t[0]>3719.5000000000005?Mr=.02836295848998302:Mr=.12210680366745175:Mr=-.058302317470509096:t[5]>4144.500000000001?Mr=.06123341960495106:Mr=-.03840046906926525:Mr=-.05221474543453495:Mr=.03988215485860711:Mr=-.00033074684693083496;let Ws=Omt(e+n+r+i+o+a+l+c+u+d+p+m+h+g+y+v+b+E+_+k+P+N+U+ne+he+ae+G+W+ue+ie+V+O+Y+te+pe+ee+ce+me+Ne+Se+Je+Me+ft+It+yt+vt+le+Oe+ye+tt+X+re+We+De+be+ze+it+ht+Ot+cn+Lt+Wn+zn+fr+Ae+He+ut+At+Xt+Ht+yn+vn+jt+nn+Jt+Tn+Fn+Yn+Ur+Yr+Fr+jr+tr+Vr+_e+q+ge+ve+Z+M+ke+$e+qt+Sn+mn+lr+pr+bn+Gt+Mr);return[1-Ws,Ws]}s(l4e,"multilineModelPredict");function Omt(t){if(t<0){let e=Math.exp(t);return e/(1+e)}return 1/(1+Math.exp(-t))}s(Omt,"sigmoid");var Umt={javascript:["//"],typescript:["//"],typescriptreact:["//"],javascriptreact:["//"],vue:["//","-->"],php:["//","#"],dart:["//"],go:["//"],cpp:["//"],scss:["//"],csharp:["//"],java:["//"],c:["//"],rust:["//"],python:["#"],markdown:["#","-->"],css:["*/"]},c4e={javascript:1,javascriptreact:2,typescript:3,typescriptreact:4,python:5,go:6,ruby:7};function u4e(t,e,n,r=!0){let i=t.split(`
`);if(r&&(i=i.filter(l=>l.trim().length>0)),Math.abs(e)>i.length||e>=i.length)return!1;e<0&&(e=i.length+e);let o=i[e];return(Umt[n]??[]).some(l=>o.includes(l))}s(u4e,"hasComment");var oU=class{static{s(this,"PromptFeatures")}constructor(e,n){let[r,i]=this.firstAndLast(e),o=this.firstAndLast(e.trimEnd());this.language=n,this.length=e.length,this.firstLineLength=r.length,this.lastLineLength=i.length,this.lastLineRstripLength=i.trimEnd().length,this.lastLineStripLength=i.trim().length,this.rstripLength=e.trimEnd().length,this.stripLength=e.trim().length,this.rstripLastLineLength=o[1].length,this.rstripLastLineStripLength=o[1].trim().length,this.secondToLastLineHasComment=u4e(e,-2,n),this.rstripSecondToLastLineHasComment=u4e(e.trimEnd(),-2,n),this.prefixEndsWithNewline=e.endsWith(`
`),this.lastChar=e.slice(-1),this.rstripLastChar=e.trimEnd().slice(-1),this.firstChar=e[0],this.lstripFirstChar=e.trimStart().slice(0,1)}firstAndLast(e){let n=e.split(`
`),r=n.length,i=n[0],o=n[r-1];return o==""&&r>1&&(o=n[r-2]),[i,o]}},iie=class{static{s(this,"MultilineModelFeatures")}constructor(e,n,r){this.language=r,this.prefixFeatures=new oU(e,r),this.suffixFeatures=new oU(n,r)}constructFeatures(){let e=new Array(14).fill(0);e[0]=this.prefixFeatures.length,e[1]=this.prefixFeatures.firstLineLength,e[2]=this.prefixFeatures.lastLineLength,e[3]=this.prefixFeatures.lastLineRstripLength,e[4]=this.prefixFeatures.lastLineStripLength,e[5]=this.prefixFeatures.rstripLength,e[6]=this.prefixFeatures.rstripLastLineLength,e[7]=this.prefixFeatures.rstripLastLineStripLength,e[8]=this.suffixFeatures.length,e[9]=this.suffixFeatures.firstLineLength,e[10]=this.suffixFeatures.lastLineLength,e[11]=this.prefixFeatures.secondToLastLineHasComment?1:0,e[12]=this.prefixFeatures.rstripSecondToLastLineHasComment?1:0,e[13]=this.prefixFeatures.prefixEndsWithNewline?1:0;let n=new Array(Object.keys(c4e).length+1).fill(0);n[c4e[this.language]??0]=1;let r=new Array(Object.keys(q1).length+1).fill(0);r[q1[this.prefixFeatures.lastChar]??0]=1;let i=new Array(Object.keys(q1).length+1).fill(0);i[q1[this.prefixFeatures.rstripLastChar]??0]=1;let o=new Array(Object.keys(q1).length+1).fill(0);o[q1[this.suffixFeatures.firstChar]??0]=1;let a=new Array(Object.keys(q1).length+1).fill(0);return a[q1[this.suffixFeatures.lstripFirstChar]??0]=1,e.concat(n,r,i,o,a)}};function qmt(t,e){return new iie(t.prefix,t.suffix,e)}s(qmt,"constructMultilineFeatures");function d4e(t,e){let n=qmt(t,e).constructFeatures();return l4e(n)[1]}s(d4e,"requestMultilineScore");f();f();f();f();async function*W1(t,e){for await(let n of t)yield e(n)}s(W1,"asyncIterableMap");async function*f4e(t,e){for await(let n of t)await e(n)&&(yield n)}s(f4e,"asyncIterableFilter");async function*iP(t,e){for await(let n of t){let r=await e(n);r!==void 0&&(yield r)}}s(iP,"asyncIterableMapFilter");async function*p4e(...t){for(let e of t)yield*e}s(p4e,"asyncIterableConcat");f();async function oP(t,e,n,r){let i=ir.createAndMarkAsIssued({messageId:e,conversationId:n});return await t.get(Dt).updateExPValuesAndAssignments(r,i)}s(oP,"createTelemetryWithExpWithId");function ml(t,{turn:e,conversation:n}={},r){return oP(t,e?.telemetryId??"",n?.telemetryId??"",r)}s(ml,"createTelemetryWithExpWithTurn");function sP(t,e,n,r,i,o,a,l){let c=t.turns[t.turns.length-1].skills.map(p=>p.skillId).sort(),u={source:"user",turnIndex:(t.turns.length-1).toString(),uiKind:e,skillIds:c.join(",")},d={promptTokenLen:r,messageCharLen:n};return i&&(u.suggestion=i),o&&(u.suggestionId=o),l.length>0&&(u.skillResolutionsJson=JSON.stringify(Wmt(l))),a=a.extendedBy(u,d),a}s(sP,"extendUserMessageTelemetryData");function Wmt(t){return t.map(e=>({skillId:e.skillId,resolution:e.resolution,fileStatus:e.files?.map(n=>n.status),tokensPreEliding:e.tokensPreEliding??0,resolutionTimeMs:e.resolutionTimeMs??0,processingTimeMs:e.processingTimeMs??0}))}s(Wmt,"mapSkillResolutionsForTelemetry");function m4e(t,e,n,r,i,o,a){return r!=null&&(a=a.extendedBy({offTopic:r.toString()})),sU(t,o,e,n,{uiKind:e,headerRequestId:i},{},a).properties.messageId}s(m4e,"createUserMessageTelemetryData");function h4e(t,e,n,r,i,o,a,l){let c=Gmt(r);return sU(t,a,n,r,{source:"model",turnIndex:(e.turns.length-1).toString(),headerRequestId:o,uiKind:n,codeBlockLanguages:JSON.stringify({...c})},{messageCharLen:r.length,numCodeBlocks:c.length,numTokens:i},l).properties.messageId}s(h4e,"createModelMessageTelemetryData");function g4e(t,e,n,r,i,o,a){sU(t,o,n,r,{source:"offTopic",turnIndex:e.turns.length.toString(),userMessageId:i,uiKind:n},{messageCharLen:r.length},a)}s(g4e,"createOffTopicMessageTelemetryData");function A4e(t,e,n,r,i,o,a,l,c){let u=sU(t,l,n,r,{source:"suggestion",suggestion:o,turnIndex:(e.turns.length-1).toString(),uiKind:n,suggestionId:a},{promptTokenLen:i,messageCharLen:r.length},c);return Hmt(t,n,o,u.properties.messageId,u.properties.conversationId,a,c,l),u.properties.messageId}s(A4e,"createSuggestionMessageTelemetryData");var y4e={synonymTimeMs:0,rankingTimeMs:0,chunkCount:0,localSnippetCount:0,embeddingsTimeMs:0,rerankingTimeMs:0};async function C4e(t,e,n){let r=await ml(t.ctx,t),i=t.conversation.source==="inline"?"conversationInline":"conversationPanel";Pu(t.ctx,void 0,{conversationId:t.conversation.telemetryId,turnIndex:(t.conversation.turns.length-1).toString(),userMessageId:t.turn.telemetryId,provider:e,uiKind:i},n,"index.codesearch",r)}s(C4e,"telemetryIndexCodesearch");function sU(t,e,n,r,i,o,a){let l=a??ir.createAndMarkAsIssued(),c={messageText:r,...i};if(!("messageId"in i)&&!("messageId"in l.properties)){let m=an();i.messageId=m,c.messageId=m}e&&(i.languageId=e.detectedLanguageId,o.documentLength=e.getText().length,o.documentLineCount=e.lineCount);let u=l.extendedBy(i,o),d=l.extendedBy(c),p=Ac(n);return kt(t,`${p}.message`,u),kt(t,`${p}.messageText`,d,1),u}s(sU,"telemetryMessage");function x4e(t,e,n,r){Pu(t,r,{uiKind:e},{},"conversation.suggestionShown",n)}s(x4e,"createSuggestionShownTelemetryData");function Hmt(t,e,n,r,i,o,a,l){Pu(t,l,{suggestion:n,messageId:r,conversationId:i,suggestionId:o,uiKind:e},{},"conversation.suggestionSelected",a)}s(Hmt,"createSuggestionSelectedTelemetryData");function Pu(t,e,n,r,i,o){let a=o??ir.createAndMarkAsIssued();e&&(n.languageId=e.detectedLanguageId,r.documentLength=e.getText().length,r.documentLineCount=e.lineCount);let l=a.extendedBy(n,r);return kt(t,i,l),l}s(Pu,"telemetryUserAction");function A5(t,e,n){let r=n.extendedBy({messagesJson:JSON.stringify(e)});return kt(t,"engine.messages",r,1)}s(A5,"logEngineMessages");function Ac(t){switch(t){case"agentPanel":return"copilotAgentConversation";case"editsPanel":return"copilotEditsPanel";case"conversationInline":return"inlineConversation";case"conversationPanel":default:return"conversation"}}s(Ac,"telemetryPrefixForUiKind");function Gmt(t){let e=t.split(`
`),n=[],r=[];for(let i=0;i<e.length;i++){let o=e[i];o.startsWith("```")&&(r.length>0&&o==="```"?n.push(r.pop()):r.length===0&&r.push(o.substring(3)))}return n}s(Gmt,"getCodeBlocks");function v4e(t){return t=="conversationInline"?"conversation-inline":"conversation-panel"}s(v4e,"uiKindToIntent");function pv(t){return t==="inline"?"conversationInline":"conversationPanel"}s(pv,"conversationSourceToUiKind");function b4e(t,e,n,r,i){let o={conversationId:e.conversation.telemetryId,turnIndex:(e.conversation.turns.length-1).toString(),roundId:n.toString(),uiKind:"agentPanel"},a={totalTimeMs:r};I4e(t,"round",i.extendedBy(o,a))}s(b4e,"createAgentRoundTelemetryData");function E4e(t,e,n,r,i,o,a,l){let c={conversationId:e.conversation.telemetryId,turnIndex:(e.conversation.turns.length-1).toString(),roundId:i.toString(),toolName:n.name,toolType:n.type,toolProviderId:n.toolProvider.id,toolCallId:r,toolCallStatus:a,uiKind:"agentPanel"},u={totalTimeMs:o};I4e(t,"toolCall",l.extendedBy(c,u))}s(E4e,"createToolInvocationTelemetryData");function I4e(t,e,n){return kt(t,`${Ac("agentPanel")}.${e}`,n)}s(I4e,"logAgenticEvent");f();f();function s2(t){if(t instanceof Error)return t.stack?t.stack:t.message;if(typeof t=="string")return t;try{return JSON.stringify(t)}catch{return String(t)}}s(s2,"toString");var xd=new Tt("streamChoices"),oie=class{constructor(){this.logprobs=[];this.top_logprobs=[];this.text=[];this.tokens=[];this.text_offset=[];this.copilot_annotations=new lie;this.tool_calls=[];this.function_call=new aie;this.copilot_references=[];this.yielded=!1}static{s(this,"APIJsonDataStreaming")}append(e){if(e.text&&this.text.push(e.text),e.delta?.content&&e.delta.role!=="function"&&this.text.push(e.delta.content),e.logprobs&&(this.tokens.push(e.logprobs.tokens??[]),this.text_offset.push(e.logprobs.text_offset??[]),this.logprobs.push(e.logprobs.token_logprobs??[]),this.top_logprobs.push(e.logprobs.top_logprobs??[])),e.copilot_annotations&&this.copilot_annotations.update(e.copilot_annotations),e.delta?.copilot_annotations&&this.copilot_annotations.update(e.delta.copilot_annotations),e.delta?.tool_calls&&e.delta.tool_calls.length>0)for(let n of e.delta.tool_calls){let r=n.index;this.tool_calls[r]||(this.tool_calls[r]=new sie),this.tool_calls[r].update(n)}e.delta?.function_call&&this.function_call.update(e.delta.function_call),e?.finish_reason&&(this.finish_reason=e.finish_reason)}};function jmt(t){let e=t.split(`
`),n=e.pop();return[e.filter(r=>r!=""),n]}s(jmt,"splitChunk");var sie=class{constructor(){this.arguments=[]}static{s(this,"StreamingToolCall")}update(e){e.function.name&&(this.name=e.function.name),this.arguments.push(e.function.arguments)}},aie=class{constructor(){this.arguments=[]}static{s(this,"StreamingFunctionCall")}update(e){e.name&&(this.name=e.name),this.arguments.push(e.arguments)}},lie=class{constructor(){this.current={}}static{s(this,"StreamCopilotAnnotations")}update(e){Object.entries(e).forEach(([n,r])=>{r.forEach(i=>this.update_namespace(n,i))})}update_namespace(e,n){this.current[e]||(this.current[e]=[]);let r=this.current[e],i=r.findIndex(o=>o.id===n.id);i>=0?r[i]=n:r.push(n)}for(e){return this.current[e]??[]}},mv=class t{constructor(e,n,r,i,o,a,l){this.ctx=e;this.expectedNumChoices=n;this.response=r;this.body=i;this.telemetryData=o;this.dropCompletionReasons=a;this.cancellationToken=l;this.requestId=hv(this.response);this.stats=new cie;this.solutions={}}static{s(this,"SSEProcessor")}static create(e,n,r,i,o,a){let l=r.body();if(l===null)throw new Error("No response body available");return typeof l.setEncoding=="function"?l.setEncoding("utf8"):l=l.pipeThrough(new TextDecoderStream),new t(e,n,r,l,i,o??[],a)}async*processSSE(e=()=>{}){try{yield*this.processSSEInner(e)}finally{this.cancel(),xd.debug(this.ctx,`request done: headerRequestId: [${this.requestId.headerRequestId}] model deployment ID: [${this.requestId.deploymentId}]`),xd.debug(this.ctx,"request stats:",this.stats)}}async*processSSEInner(e){let n="",r=null,i,o;e:for await(let a of this.body){if(this.maybeCancel("after awaiting body chunk"))return;xd.debug(this.ctx,"chunk",a.toString());let[l,c]=jmt(n+a.toString());n=c;for(let u of l){let d=u.slice(5).trim();if(d=="[DONE]"){yield*this.finishSolutions(r,i,o,e);return}r=null;let p;try{p=JSON.parse(d)}catch{xd.error(this.ctx,"Error parsing JSON stream data",u);continue}if(p.copilot_confirmation&&Vmt(p.copilot_confirmation)&&await e("",{text:"",requestId:this.requestId,copilotConfirmation:p.copilot_confirmation}),p.copilot_references&&await e("",{text:"",requestId:this.requestId,copilotReferences:p.copilot_references}),p.choices===void 0){!p.copilot_references&&!p.copilot_confirmation&&(p.error!==void 0?xd.error(this.ctx,"Error in response:",p.error.message):xd.error(this.ctx,"Unexpected response with no choices or error: "+d)),p.copilot_errors&&await e("",{text:"",requestId:this.requestId,copilotErrors:p.copilot_errors});continue}if(this.requestId.created==0&&(this.requestId=hv(this.response,p),this.requestId.created===0&&p.choices?.length&&xd.error(this.ctx,'Request id invalid, should have "completionId" and "created":',this.requestId)),i===void 0&&p.model&&(i=p.model),o===void 0&&p.usage&&(o=p.usage),this.allSolutionsDone()){n="";break e}for(let m=0;m<p.choices?.length;m++){let h=p.choices[m];xd.debug(this.ctx,"choice",h),this.stats.add(h.index),h.index in this.solutions||(this.solutions[h.index]=new oie);let g=this.solutions[h.index];if(g==null)continue;g.append(h);let y=this.asSolutionDecision(),v=h.text?.indexOf(`
`)>-1||h.delta?.content?.indexOf(`
`)>-1;if(h.finish_reason||v){let E=g.text.join("");if(y=this.asSolutionDecision(await e(E,{text:E,index:h.index,requestId:this.requestId,annotations:g.copilot_annotations,copilotReferences:g.copilot_references,getAPIJsonData:s(()=>aP(g),"getAPIJsonData"),finished:!!h.finish_reason,telemetryData:this.telemetryData})),this.maybeCancel("after awaiting finishedCb"))return}if(h.finish_reason&&g.function_call.name!==void 0){r=h.finish_reason;continue}if(h.finish_reason&&(y.yieldSolution=!0,y.continueStreaming=!1),!y.yieldSolution)continue;let b=h.finish_reason??"client-trimmed";if(kt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:b,engineName:i??"",engineChoiceSource:Yx(this.ctx,this.telemetryData).engineChoiceSource})),this.dropCompletionReasons.includes(h.finish_reason)?this.solutions[h.index]=null:g.yielded||(this.stats.markYielded(h.index),yield{solution:g,finishOffset:y.finishOffset,reason:h.finish_reason,requestId:this.requestId,index:h.index,model:i,usage:o},g.yielded=!0),this.maybeCancel("after yielding finished choice"))return;y.continueStreaming||(this.solutions[h.index]=null)}}}for(let[a,l]of Object.entries(this.solutions)){let c=Number(a);if(l!=null&&(kt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:"Iteration Done",engineName:i??""})),this.stats.markYielded(c),yield{solution:l,finishOffset:void 0,reason:"Iteration Done",requestId:this.requestId,index:c,model:i,usage:o},this.maybeCancel("after yielding after iteration done")))return}if(n.length>0)try{let a=JSON.parse(n);a.error!==void 0&&xd.error(this.ctx,`Error in response: ${a.error.message}`,a.error)}catch{xd.error(this.ctx,`Error parsing extraData: ${n}`)}}asSolutionDecision(e){return e===void 0?{yieldSolution:!1,continueStreaming:!0}:typeof e=="number"?{yieldSolution:!0,continueStreaming:!1,finishOffset:e}:e}async*finishSolutions(e,n,r,i){for(let[o,a]of Object.entries(this.solutions)){let l=Number(o);if(a==null)continue;let c=a.text.join("");if(await i(c,{text:c,index:l,requestId:this.requestId,annotations:a.copilot_annotations,copilotReferences:a.copilot_references,getAPIJsonData:s(()=>aP(a),"getAPIJsonData"),finished:!0,telemetryData:this.telemetryData}),!a.yielded&&(this.stats.markYielded(l),kt(this.ctx,"completion.finishReason",this.telemetryData.extendedBy({completionChoiceFinishReason:e??"DONE",engineName:n??""})),yield{solution:a,finishOffset:void 0,reason:e??"DONE",requestId:this.requestId,index:l,model:n,usage:r},this.maybeCancel("after yielding on DONE")))return}}maybeCancel(e){return this.cancellationToken?.isCancellationRequested?(xd.debug(this.ctx,"Cancelled: "+e),this.cancel(),!0):!1}cancel(){this.body&&"destroy"in this.body&&typeof this.body.destroy=="function"?this.body.destroy():this.body instanceof ReadableStream&&this.body.cancel()}allSolutionsDone(){let e=Object.values(this.solutions);return e.length==this.expectedNumChoices&&e.every(n=>n==null)}};function aU(t,e,n){let r=e.solution.text.join(""),i=!1;e.finishOffset!==void 0&&(xd.debug(t,`solution ${e.index}: early finish at offset ${e.finishOffset}`),r=r.substring(0,e.finishOffset),i=!0),xd.info(t,`solution ${e.index} returned. finish reason: [${e.reason}]`),xd.debug(t,`solution ${e.index} details: finishOffset: [${e.finishOffset}] completionId: [{${e.requestId.completionId}}] created: [{${e.requestId.created}}]`);let o=aP(e.solution);return lU(t,r,o,e.index,e.requestId,i,n)}s(aU,"prepareSolutionForReturn");function aP(t){let e=t.text.join(""),n=$mt(t),r=zmt(t),i=t.copilot_annotations.current,o={text:e,tokens:t.text,tool_calls:n,function_call:r,copilot_annotations:i,finish_reason:t.finish_reason??"stop"};if(t.logprobs.length===0)return o;let a=t.logprobs.reduce((d,p)=>d.concat(p),[]),l=t.top_logprobs.reduce((d,p)=>d.concat(p),[]),c=t.text_offset.reduce((d,p)=>d.concat(p),[]),u=t.tokens.reduce((d,p)=>d.concat(p),[]);return{...o,logprobs:{token_logprobs:a,top_logprobs:l,text_offset:c,tokens:u}}}s(aP,"convertToAPIJsonData");function Vmt(t){return typeof t.title=="string"&&typeof t.message=="string"&&!!t.confirmation}s(Vmt,"isCopilotConfirmation");function T4e(t,e,n){if(!t)return{};try{return JSON.parse(t)}catch(r){throw new Error(`Failed to parse JSON for ${e} '${n}': ${s2(r)}. Input: '${t}'`)}}s(T4e,"parseCallArguments");function $mt(t){let e=[];for(let n of t.tool_calls)if(n.name){let r=n.arguments.join("").trim(),i=T4e(r,"tool call",n.name);e.push({type:"function",function:{name:n.name,arguments:i},approxNumTokens:n.arguments.length+1})}return e}s($mt,"extractToolCalls");function zmt(t){if(t.function_call.name){let e=t.function_call.arguments.join("").trim(),n=T4e(e,"function call",t.function_call.name);return{name:t.function_call.name,arguments:n}}}s(zmt,"extractFunctionCall");var cie=class{constructor(){this.choices=new Map}static{s(this,"ChunkStats")}getChoiceStats(e){let n=this.choices.get(e);return n||(n=new uie,this.choices.set(e,n)),n}add(e){this.getChoiceStats(e).increment()}markYielded(e){this.getChoiceStats(e).markYielded()}toString(){return Array.from(this.choices.entries()).map(([e,n])=>`${e}: ${n.yieldedTokens} -> ${n.seenTokens}`).join(", ")}},uie=class{constructor(){this.yieldedTokens=-1;this.seenTokens=0}static{s(this,"ChoiceStats")}increment(){this.seenTokens++}markYielded(){this.yieldedTokens=this.seenTokens}};f();function cU(t,e){return t!==null&&typeof t=="object"&&e in t}s(cU,"hasKey");function Du(t,e){return cU(t,e)?t[e]:void 0}s(Du,"getKey");var _4e=je(ri());var Js=new Tt("fetchCompletions");function hv(t,e){return{headerRequestId:t.headers.get("x-request-id")||"",completionId:e&&e.id?e.id:"",created:e&&e.created?e.created:0,serverExperiments:t.headers.get("X-Copilot-Experiment")||"",deploymentId:t.headers.get("azureml-model-deployment")||""}}s(hv,"getRequestId");function y5(t){let e=t.headers.get("openai-processing-ms");return e?parseInt(e,10):0}s(y5,"getProcessingTime");function S4e(t){switch(t){case"ghostText":return"copilot-ghost";case"synthesize":return"copilot-panel"}}s(S4e,"uiKindToIntent");var vd=class{static{s(this,"OpenAIFetcher")}};function Ymt(t,e,n,r){return Hx(t,e,"proxy","v1/engines",n,r)}s(Ymt,"getProxyEngineUrl");function uU(t,e,n,r){for(let[i,o]of Object.entries(t)){if(n.includes(i))continue;let a=o;if(i==="extra"&&r){let l={...a};for(let c of r)delete l[c];a=l}e.properties[`request.option.${i}`]=JSON.stringify(a)??"undefined"}}s(uU,"sanitizeRequestOptionTelemetry");async function w4e(t,e,n,r,i,o,a,l,c,u,d){let p=t.get(Ji),m=Ymt(t,a,n,r),h=c.extendedBy({endpoint:r,engineName:n,uiKind:l},RS(e));uU(o,h,["prompt","suffix"],["context"]),h.properties.headerRequestId=i,kt(t,"request.sent",h);let g=Ks(),y=S4e(l);return nI(t,m,a.token,y,i,o,u,d).then(v=>{let b=hv(v,void 0);h.extendWithRequestId(b);let E=Ks()-g;return h.measurements.totalTimeMs=E,Js.info(t,`Request ${i} at <${m}> finished with ${v.status} status after ${E}ms`),h.properties.status=String(v.status),Js.debug(t,"request.response properties",h.properties),Js.debug(t,"request.response measurements",h.measurements),Js.debug(t,"prompt:",e),kt(t,"request.response",h),v}).catch(v=>{if(Fc(v))throw kt(t,"request.cancel",h),v;p.setWarning(Du(v,"message")??"");let b=h.extendedBy({error:"Network exception"});kt(t,"request.shownWarning",b),h.properties.message=String(Du(v,"name")??""),h.properties.code=String(Du(v,"code")??""),h.properties.errno=String(Du(v,"errno")??""),h.properties.type=String(Du(v,"type")??"");let E=Ks()-g;throw h.measurements.totalTimeMs=E,Js.info(t,`Request ${i} at <${m}> rejected with ${String(v)} after ${E}ms`),Js.debug(t,"request.error properties",h.properties),Js.debug(t,"request.error measurements",h.measurements),kt(t,"request.error",h),v}).finally(()=>{ZEe(t,e,h)})}s(w4e,"fetchWithInstrumentation");async function Kmt(t,e,n,r,i,o,a,l,c,u){let d=c.extendedBy({endpoint:"chat/completions",engineModelId:n,uiKind:l});uU(o,d,["messages"]),d.properties.headerRequestId=i,kt(t,"request.sent",d);let p=Ks(),m=S4e(l),h={...jx(t)};try{let g=await nI(t,r,a.token,m,i,o,u,h),y=hv(g,void 0);d.extendWithRequestId(y);let v=Ks()-p;return d.measurements.totalTimeMs=v,Js.info(t,`Request ${i} at <${r}> finished with ${g.status} status after ${v}ms`),Js.debug(t,"request.response properties",d.properties),Js.debug(t,"request.response measurements",d.measurements),Js.debug(t,"messages:",JSON.stringify(e)),kt(t,"request.response",d),g}catch(g){if(Fc(g))throw kt(t,"request.cancel",d),g;let y=d.extendedBy({error:"Network exception"});kt(t,"request.shownWarning",y),d.properties.message=String(Du(g,"name")??""),d.properties.code=String(Du(g,"code")??""),d.properties.errno=String(Du(g,"errno")??""),d.properties.type=String(Du(g,"type")??"");let v=Ks()-p;throw d.measurements.totalTimeMs=v,Js.info(t,`Request ${i} at <${r}> rejected with ${String(g)} after ${v}ms`),Js.debug(t,"request.error properties",d.properties),Js.debug(t,"request.error measurements",d.measurements),kt(t,"request.error",d),g}finally{A5(t,e,d)}}s(Kmt,"fetchChatWithInstrumentation");function die(t){return f4e(t,e=>e.completionText.trim().length>0)}s(die,"postProcessChoices");var Jmt="github.copilot.completions.quotaExceeded",lP=class extends vd{static{s(this,"LiveOpenAIFetcher")}#e;async fetchAndStreamCompletions(e,n,r,i,o){if(this.#e)return{type:"canceled",reason:this.#e};let a=e.get(Ji),l="completions",c=await e.get(Gn).getToken(),u=await this.fetchWithParameters(e,l,n,c,r,o);if(u==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let h=u.body();try{h&&"destroy"in h&&typeof h.destroy=="function"?h.destroy():h instanceof ReadableStream&&h.cancel()}catch(g){Js.exception(e,g,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(u.status!==200){let h=this.createTelemetryData(l,e,n);return this.handleError(e,a,h,u,c)}let p=mv.create(e,n.count,u,r,[],o).processSSE(i),m=W1(p,h=>aU(e,h,r));return{type:"success",choices:die(m),getProcessingTime:s(()=>y5(u),"getProcessingTime")}}async fetchAndStreamChat(e,n,r,i,o,a,l,c={},u){if(this.#e)return{type:"canceled",reason:this.#e};let d="https://copilot-proxy.githubusercontent.com/chat/completions",p={messages:n,model:l.id,stream:!0,...c},m=r.extendedBy({endpoint:d,model:l.name}),h=e.get(Ji),g=await e.get(Gn).getToken(),y=await Kmt(e,n,l.id,d,o,p,g,i,m,u);if(u?.isCancellationRequested){let _=y.body();try{_&&"destroy"in _&&typeof _.destroy=="function"?_.destroy():_ instanceof ReadableStream&&_.cancel()}catch(k){Js.exception(e,k,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(y.status!==200){let _=ir.createAndMarkAsIssued({endpoint:d,engineName:l.name,uiKind:i,headerRequestId:o});return this.handleError(e,h,_,y,g)}let b=mv.create(e,1,y,m,[],_4e.CancellationToken.None).processSSE(),E=W1(b,_=>aU(e,_,r));return{type:"success",choices:die(E),getProcessingTime:s(()=>y5(y),"getProcessingTime")}}async fetchAndStreamSpeculation(e,n,r,i,o){if(this.#e)return{type:"canceled",reason:this.#e};let a=e.get(Ji),l="speculation",c=await e.get(Gn).getToken(),u={prompt:{prefix:n.prompt,suffix:"",isFimEnabled:!1},speculation:n.speculation,ourRequestId:an(),engineModelId:n.engineModelId,uiKind:n.uiKind,headers:n.headers,stops:n.stops},d=await this.fetchSpeculationWithParameters(e,l,u,c,r,o);if(d==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let g=d.body();try{g&&"destroy"in g&&typeof g.destroy=="function"?g.destroy():g instanceof ReadableStream&&g.cancel()}catch(y){Js.exception(e,y,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(d.status!==200){let g=this.createTelemetryData(l,e,u);return this.handleError(e,a,g,d,c)}let m=mv.create(e,1,d,r,[],o).processSSE(i),h=W1(m,g=>aU(e,g,r));return{type:"success",choices:die(h),getProcessingTime:s(()=>y5(d),"getProcessingTime")}}createTelemetryData(e,n,r){return ir.createAndMarkAsIssued({endpoint:e,engineName:r.engineModelId,uiKind:r.uiKind,headerRequestId:r.ourRequestId})}async fetchSpeculationWithParameters(e,n,r,i,o,a){let l={prompt:r.prompt.prefix,speculation:r.speculation,temperature:0,stream:!0,stop:r.stops??[]};return await o2(0),a?.isCancellationRequested?"not-sent":await w4e(e,r.prompt,r.engineModelId,n,r.ourRequestId,l,i,r.uiKind,o,a,r.headers)}async fetchWithParameters(e,n,r,i,o,a){let l=e.get(Dt).disableLogProb(o),c={prompt:r.prompt.prefix,suffix:r.prompt.suffix,max_tokens:fU(e),temperature:C5(e,r.count),top_p:dU(e),n:r.count,stop:R4e(e,r.languageId),stream:!0,extra:r.extra};(r.requestLogProbs||!l)&&(c.logprobs=2);let u=B1(r.repoInfo);return u!==void 0&&(c.nwo=u),r.postOptions&&Object.assign(c,r.postOptions),r.prompt.context&&(c.extra.context=r.prompt.context),await o2(0),a?.isCancellationRequested?"not-sent":await w4e(e,r.prompt,r.engineModelId,n,r.ourRequestId,c,i,r.uiKind,o,a,r.headers)}async handleError(e,n,r,i,o){let a=await i.text();if(i.status===402){this.#e="monthly free code completions exhausted",n.setError("Completions limit reached",{command:Jmt,title:"Learn More"});let c=ia(e,u=>{this.#e=void 0,(u.envelope.limited_user_quotas?.completions??1)>0&&(n.forceNormal(),c.dispose())});return{type:"failed",reason:this.#e}}if(i.status===466)return n.setError(a),Js.info(e,a),{type:"failed",reason:`client not supported: ${a}`};if(i.clientError&&!i.headers.get("x-github-request-id")){let l=`Last response was a ${i.status} error and does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`;Js.error(e,l),n.setWarning(l),r.properties.error=`Response status was ${i.status} with no x-github-request-id header`}else i.clientError?(Js.warn(e,`Response status was ${i.status}:`,a),n.setWarning(`Last response was a ${i.status} error: ${a}`),r.properties.error=`Response status was ${i.status}: ${a}`):(n.setWarning(`Last response was a ${i.status} error`),r.properties.error=`Response status was ${i.status}`);return r.properties.status=String(i.status),kt(e,"request.shownWarning",r),i.status===401||i.status===403?(e.get(Gn).resetToken(i.status),{type:"failed",reason:`token expired or invalid: ${i.status}`}):i.status===429?(setTimeout(()=>{this.#e=void 0},10*1e3),this.#e="rate limited",Js.warn(e,"Rate limited by server. Denying completions for the next 10 seconds."),{type:"failed",reason:this.#e}):i.status===499?(Js.info(e,"Cancelled by server"),{type:"failed",reason:"canceled by server"}):(Js.error(e,"Unhandled status from server:",i.status,a),{type:"failed",reason:`unhandled status from server: ${i.status} ${a}`})}};function lU(t,e,n,r,i,o,a){return XEe(t,e,n,i,r),{completionText:e,meanLogProb:Xmt(t,n),meanAlternativeLogProb:Zmt(t,n),choiceIndex:r,requestId:i,blockFinished:o,tokens:n.tokens,numTokens:n.tokens.length,telemetryData:a,copilotAnnotations:n.copilot_annotations,clientCompletionId:an(),finishReason:n.finish_reason}}s(lU,"convertToAPIChoice");function Xmt(t,e){if(e?.logprobs?.token_logprobs)try{let n=0,r=0,i=50;for(let o=0;o<e.logprobs.token_logprobs.length-1&&i>0;o++,i--)n+=e.logprobs.token_logprobs[o],r+=1;return r>0?n/r:void 0}catch(n){or.exception(t,n,"Error calculating mean prob")}}s(Xmt,"calculateMeanLogProb");function Zmt(t,e){if(e?.logprobs?.top_logprobs)try{let n=0,r=0,i=50;for(let o=0;o<e.logprobs.token_logprobs.length-1&&i>0;o++,i--){let a={...e.logprobs.top_logprobs[o]};delete a[e.logprobs.tokens[o]],n+=Math.max(...Object.values(a)),r+=1}return r>0?n/r:void 0}catch(n){or.exception(t,n,"Error calculating mean prob")}}s(Zmt,"calculateMeanAlternativeLogProb");function C5(t,e){return tm(t)||e<=1?0:e<10?.2:e<20?.4:.8}s(C5,"getTemperatureForSamples");var eht={markdown:[`


`],python:[`
def `,`
class `,`
if `,`

#`]};function R4e(t,e){return eht[e??""]??[`


`,"\n```"]}s(R4e,"getStops");function dU(t){return 1}s(dU,"getTopP");function fU(t){return d8}s(fU,"getMaxSolutionTokens");var fie=class t{constructor(e,n){this.index=e;this.documentPrefix=n;this.startOffset=0;this.text="";this.trimCount=0}static{s(this,"StreamingCompletion")}updateText(e){this.text=e}get addedToPrefix(){return this.text.substring(0,this.startOffset)}get effectivePrefix(){return this.documentPrefix+this.addedToPrefix}get effectiveText(){return this.text.substring(this.startOffset)}get isFirstCompletion(){return this.trimCount===0}get firstNewlineOffset(){let e=[...this.text.matchAll(/\r?\n/g)];return e.length>0&&e[0].index===0&&e.shift(),e.length>0?e[0].index:-1}trimAt(e){let n=new t(this.index,this.documentPrefix);return n.startOffset=this.startOffset,n.text=this.text.substring(0,this.startOffset+e),n.trimCount=this.trimCount,this.startOffset+=e,this.trimCount++,n}},pU=class{constructor(e,n,r,i,o,a){this.ctx=e;this.prefix=n;this.languageId=r;this.initialSingleLine=i;this.trimmerLookahead=o;this.cacheFunction=a;this.lineLimit=3;this.completions=new Map}static{s(this,"StreamedCompletionSplitter")}getFinishedCallback(){return async(e,n)=>{let r=n.index??0,i=this.getCompletion(r,e);if(i.isFirstCompletion&&this.initialSingleLine&&i.firstNewlineOffset>=0){let o={yieldSolution:!0,continueStreaming:!0,finishOffset:i.firstNewlineOffset};return i.trimAt(o.finishOffset),n.finished&&await this.trimAll(n,i),o}return n.finished?await this.trimAll(n,i):await this.trimOnce(n,i)}}getCompletion(e,n){let r=this.completions.get(e);return r||(r=new fie(e,this.prefix),this.completions.set(e,r)),r.updateText(n),r}async trimOnce(e,n){let r=await this.trim(n);return r===void 0?{yieldSolution:!1,continueStreaming:!0}:n.isFirstCompletion?(n.trimAt(r),{yieldSolution:!0,continueStreaming:!0,finishOffset:r}):(this.cacheCompletion(e,n,r),{yieldSolution:!1,continueStreaming:!0})}async trimAll(e,n){let r,i;do r=await this.trim(n),n.isFirstCompletion?(i=r,n.trimAt(r??n.effectiveText.length)):this.cacheCompletion(e,n,r);while(r!==void 0);return i!==void 0?{yieldSolution:!0,continueStreaming:!0,finishOffset:i}:{yieldSolution:!1,continueStreaming:!0}}async trim(e){return await new iU(this.languageId,e.effectivePrefix,e.effectiveText,this.lineLimit,this.trimmerLookahead).getCompletionTrimOffset()}cacheCompletion(e,n,r){let i=n.trimAt(r??n.effectiveText.length);if(i.effectiveText.trim()==="")return;let o=lU(this.ctx,i.effectiveText.trimEnd(),e.getAPIJsonData(),i.index,e.requestId,r!==void 0,e.telemetryData);o.copilotAnnotations=this.adjustedAnnotations(o,n,i),o.generatedChoiceIndex=i.trimCount,this.cacheFunction(i.addedToPrefix,o)}adjustedAnnotations(e,n,r){if(e.copilotAnnotations===void 0)return;let i=r.addedToPrefix.length,a=i+e.completionText.length>=n.text.length,l={};for(let[c,u]of Object.entries(e.copilotAnnotations)){let d=u.filter(p=>p.start_offset-i<e.completionText.length&&p.stop_offset-i>0).map(p=>{let m={...p};return m.start_offset-=i,m.stop_offset-=i,a||(m.stop_offset=Math.min(m.stop_offset,e.completionText.length)),m});d.length>0&&(l[c]=d)}return Object.keys(l).length>0?l:void 0}};f();f();var Jf=class{constructor(){this.cache=new Kn(100)}static{s(this,"SpeculativeRequestCache")}set(e,n){this.cache.set(e,n)}async request(e){let n=this.cache.get(e);n!==void 0&&(this.cache.delete(e),await n())}};var mU=new Tt("getCompletions");function hU(t,e,n){(Ai(t,wt.EnableSpeculativeRequestsShown)??t.get(Dt).enableSpeculativeRequestsShown(n.telemetry))&&t.get(Jf).request(n.clientCompletionId),n.telemetry.markAsDisplayed(),n.telemetry.properties.reason=x5(n.resultType),kt(t,`${e}.shown`,n.telemetry)}s(hU,"telemetryShown");function k4e(t,e,n){let r=e+".accepted";kt(t,r,n)}s(k4e,"telemetryAccepted");function B4e(t,e,n){let r=e+".rejected";kt(t,r,n)}s(B4e,"telemetryRejected");function wg(t,e={}){return{...e,telemetryBlob:t}}s(wg,"mkCanceledResultTelemetry");function Xs(t){let e={headerRequestId:t.properties.headerRequestId,copilot_trackingId:t.properties.copilot_trackingId};return t.properties.sku!==void 0&&(e.sku=t.properties.sku),t.properties.opportunityId!==void 0&&(e.opportunityId=t.properties.opportunityId),t.properties.organizations_list!==void 0&&(e.organizations_list=t.properties.organizations_list),t.properties.enterprise_list!==void 0&&(e.enterprise_list=t.properties.enterprise_list),t.properties.clientCompletionId!==void 0&&(e.clientCompletionId=t.properties.clientCompletionId),e["abexp.assignmentcontext"]=t.filtersAndExp.exp.assignmentContext,e}s(Xs,"mkBasicResultTelemetry");function P4e(t,e){if(e.type!=="promptOnly"){if(e.type==="success"){let n=Ks()-e.telemetryBlob.issuedTime,r=x5(e.resultType),i=JSON.stringify(e.performanceMetrics),o={...e.telemetryData,reason:r,performanceMetrics:i},{foundOffset:a}=e.telemetryBlob.measurements,l=e.performanceMetrics?.map(([c,u])=>`
${u.toFixed(2)}	${c}`).join("")??"";return mU.debug(t,`ghostText produced from ${r} in ${Math.round(n)}ms with foundOffset ${a}${l}`),Hee(t,"ghostText.produced",o,{timeToProduceMs:n,foundOffset:a}),e.value}if(mU.debug(t,"No ghostText produced -- "+e.type+": "+e.reason),e.type==="canceled"){kt(t,"ghostText.canceled",e.telemetryData.telemetryBlob.extendedBy({reason:e.reason,cancelledNetworkRequest:e.telemetryData.cancelledNetworkRequest?"true":"false"}));return}Hee(t,`ghostText.${e.type}`,{...e.telemetryData,reason:e.reason},{})}}s(P4e,"handleGhostTextResultTelemetry");function x5(t){switch(t){case 0:return"network";case 1:return"cache";case 3:return"cycling";case 2:return"typingAsSuggested";case 4:return"async"}}s(x5,"resultTypeToString");f();f();f();async function tht(t){if(t.isCancellationRequested)return;let e=new fv,n=t.onCancellationRequested(()=>{e.resolve(),n.dispose()});await e.promise}s(tht,"cancellationTokenToPromise");async function D4e(t,e){if(e){let n=tht(e);await Promise.race([t,n])}else await t}s(D4e,"raceCancellation");function pie(t){return Array.isArray(t)}s(pie,"isArrayOfT");async function N4e(t,e){let n=new Map,r=[];for(let[i,o]of t.entries()){let a=(async()=>{let l=await nht(o,e);n.set(i,l)})();r.push(a)}return await Promise.allSettled(r.values()),n}s(N4e,"resolveAll");async function nht(t,e){let n;return t instanceof Promise?n=await rht(t,e):n=await iht(t,e),n}s(nht,"resolve");async function rht(t,e){let n=performance.now(),r={status:"none",resolutionTime:0,value:null},i=(async()=>{try{let o=await t;if(e?.isCancellationRequested)return;r={status:"full",resolutionTime:0,value:pie(o)?[...o]:[o]}}catch(o){if(e?.isCancellationRequested)return;r={status:"error",resolutionTime:0,reason:o}}})();return await D4e(i,e),r.resolutionTime=performance.now()-n,r}s(rht,"resolvePromise");async function iht(t,e){let n=performance.now(),r={status:"none",resolutionTime:0,value:null},i=(async()=>{try{for await(let o of t){if(e?.isCancellationRequested)return;r.status!="partial"&&(r={status:"partial",resolutionTime:0,value:[]}),r.value.push(o)}e?.isCancellationRequested||(r.status!=="partial"?r={status:"full",resolutionTime:0,value:[]}:r.status="full")}catch(o){if(e?.isCancellationRequested)return;r={status:"error",resolutionTime:0,reason:o}}})();return await D4e(i,e),r.resolutionTime=performance.now()-n,r}s(iht,"resolveIterable");f();var oht={maxSnippetLength:3e3,maxSnippetCount:7,enabledFeatures:"Deferred",timeBudgetMs:7,doAggregateSnippets:!0},sht="ms-vscode.cpptools",aht="CppCompletionContextProvider";function L4e(t,e,n,r){(e.includes(aht)||e.length===1&&e[0]==="*")&&M4e(t,n,r)}s(L4e,"fillInCppVSActiveExperiments");function F4e(t,e,n,r){(e.length===1&&e[0]==="*"||e.includes(sht))&&M4e(t,n,r)}s(F4e,"fillInCppVSCodeActiveExperiments");function M4e(t,e,n){try{let r=oht,i=t.get(Dt).cppContextProviderParams(n);if(i)try{r=JSON.parse(i)}catch(o){or.error(t,"Failed to parse cppContextProviderParams",o)}for(let[o,a]of Object.entries(r))e.set(o,a)}catch(r){or.exception(t,r,"fillInCppActiveExperiments")}}s(M4e,"addActiveExperiments");f();function gU(t,e,n){try{let r=t.get(Dt).csharpContextProviderParams(n);if(r){let i=JSON.parse(r);for(let[o,a]of Object.entries(i))e.set(o,a)}}catch(r){return or.debug(t,"Failed to get the active C# experiments for the Context Provider API",r),!1}return!0}s(gU,"fillInCSharpActiveExperiments");f();var gv="fallbackContextProvider",AU={mlcpMaxContextItems:20,mlcpMaxSymbolMatches:20,mlcpEnableImports:!1};function Q4e(t,e,n,r){(e.length===1&&e[0]==="*"||e.includes(gv))&&lht(t,n,r)}s(Q4e,"fillInMultiLanguageActiveExperiments");function lht(t,e,n){try{let r=cht(t,n);for(let[i,o]of Object.entries(r))e.set(i,o)}catch(r){or.exception(t,r,"fillInMultiLanguageActiveExperiments")}}s(lht,"addActiveExperiments");function cht(t,e){let n=AU,r=t.get(Dt).multiLanguageContextProviderParams(e);if(r)try{n=JSON.parse(r)}catch(i){or.error(t,"Failed to parse multiLanguageContextProviderParams",i)}return n}s(cht,"getMultiLanguageContextProviderParamsFromExp");function O4e(t){let e={...AU};return t.has("mlcpMaxContextItems")&&(e.mlcpMaxContextItems=Number(t.get("mlcpMaxContextItems"))),t.has("mlcpMaxSymbolMatches")&&(e.mlcpMaxSymbolMatches=Number(t.get("mlcpMaxSymbolMatches"))),t.has("mlcpEnableImports")&&(e.mlcpEnableImports=String(t.get("mlcpEnableImports"))==="true"),e}s(O4e,"getMultiLanguageContextProviderParamsFromActiveExperiments");f();var uht="typescript-ai-context-provider";function U4e(t,e,n,r){if(!(e.length===1&&e[0]==="*"||e.includes(uht)))return!1;try{let i=t.get(Dt).tsContextProviderParams(r);if(i){let o=JSON.parse(i);for(let[a,l]of Object.entries(o))n.set(a,l)}}catch(i){return or.debug(t,"Failed to get the active TypeScript experiments for the Context Provider API",i),!1}return!0}s(U4e,"fillInTsActiveExperiments");f();var q4e=I.Object({importance:I.Optional(I.Integer({minimum:0,maximum:100})),id:I.Optional(I.String()),origin:I.Optional(I.Union([I.Literal("request"),I.Literal("update")]))}),W4e=I.Intersect([I.Object({name:I.String(),value:I.String()}),q4e]),H4e=I.Intersect([I.Object({uri:I.String(),value:I.String(),additionalUris:I.Optional(I.Array(I.String()))}),q4e]),dht=[W4e,H4e],fht=I.Union(dht),pht=new Map([["Trait",ms.Compile(W4e)],["CodeSnippet",ms.Compile(H4e)]]),mht=s(t=>t,"ensureTypesAreEqual");mht(!0);var hht=I.Object({contextItems:I.Array(fht)}),ght=I.Object({selector:I.Array(I.Union([I.String(),I.Object({language:I.Optional(I.String()),scheme:I.Optional(I.String()),pattern:I.Optional(I.String())})]))}),mie=I.Object({id:I.String()}),Aht=I.Intersect([mie,ght]),yht=I.Intersect([mie,hht]),G4e=I.Object({providers:I.Array(Aht)}),j4e=I.Object({providers:I.Array(mie)}),hie=I.Object({providers:I.Array(yht),updating:I.Optional(I.Array(I.String()))}),yU=I.Intersect([cIe,I.Object({contextItems:I.Optional(hie)})]);function CU(t,e){return t.map(n=>{let r=n.data.filter(i=>i.type===e);return r.length>0?{...n,data:r}:void 0}).filter(n=>n!==void 0)}s(CU,"filterContextItemsByType");function V4e(t){let e=[],n=0;return t.forEach(r=>{let i=!1;for(let[o,a]of pht.entries())if(a.Check(r)){e.push({...r,type:o}),i=!0;break}i||n++}),[e,n]}s(V4e,"filterSupportedContextItems");function Cht(t){return t.length>0&&t.replaceAll(/[^a-zA-Z0-9-]/g,"").length===t.length}s(Cht,"validateContextItemId");function $4e(t,e){let n=new Set,r=[];for(let i of e){let o=i.id??an();if(!Cht(o)){let a=an();or.error(t,`Invalid context item ID ${o}, replacing with ${a}`),o=a}if(n.has(o)){let a=an();or.error(t,`Duplicate context item ID ${o}, replacing with ${a}`),o=a}n.add(o),r.push({...i,id:o})}return r}s($4e,"addOrValidateContextItemsIDs");f();var Ql=class{constructor(e=()=>new gie){this.createStatistics=e;this.statistics=new Kn(25)}static{s(this,"ContextProviderStatistics")}getStatisticsForCompletion(e){let n=this.statistics.get(e);if(n)return n;let r=this.createStatistics();return this.statistics.set(e,r),r}getPreviousStatisticsForCompletion(e){let n=Array.from(this.statistics.keys());for(let r=n.length-1;r>=0;r--){let i=n[r];if(i!==e)return this.statistics.peek(i)}}},gie=class{constructor(){this._expectations=new Map;this._lastResolution=new Map;this._statistics=new Map}static{s(this,"PerCompletionContextProviderStatistics")}addExpectations(e,n){let r=this._expectations.get(e)??[];this._expectations.set(e,[...r,...n])}clearExpectations(){this._expectations.clear()}setLastResolution(e,n){this._lastResolution.set(e,n)}get(e){return this._statistics.get(e)}computeMatch(e){try{for(let[n,r]of this._expectations){if(r.length===0)continue;let i=this._lastResolution.get(n)??"none";if(i==="none"||i==="error"){this._statistics.set(n,{usage:"none",resolution:i});continue}let o=[];for(let[u,d]of r){let p={id:u.id,type:u.type};if(u.origin&&(p.origin=u.origin),d==="content_excluded"){o.push({...p,usage:"none_content_excluded"});continue}let m=e.find(h=>h.source===u);m===void 0?o.push({...p,usage:"error"}):o.push({...p,usage:m.expectedTokens>0&&m.expectedTokens===m.actualTokens?"full":m.actualTokens>0?"partial":"none",expectedTokens:m.expectedTokens,actualTokens:m.actualTokens})}let l=o.reduce((u,d)=>d.usage==="full"?u+1:d.usage==="partial"?u+.5:u,0)/r.length,c=l===1?"full":l===0?"none":"partial";this._statistics.set(n,{resolution:i,usage:c,usageDetails:o})}}finally{this.clearExpectations(),this._lastResolution.clear()}}};function z4e(t){return t.map(e=>{if(!(e.source===void 0||e.expectedTokens===void 0||e.actualTokens===void 0))return{source:e.source,expectedTokens:e.expectedTokens,actualTokens:e.actualTokens}}).filter(e=>e!==void 0)}s(z4e,"componentStatisticsToPromptMatcher");var Y4e=je(ri());var Ba=class{static{s(this,"ContextProviderRegistry")}},_g=class{static{s(this,"DefaultContextProviders")}},b5=class extends _g{constructor(){super();this.ids=[]}static{s(this,"DefaultContextProvidersContainer")}add(n){this.ids.push(n)}getIds(){return this.ids}},Aie=class extends Ba{constructor(n,r){super();this.ctx=n;this.match=r;this._providers=[]}static{s(this,"CoreContextProviderRegistry")}registerContextProvider(n){if(n.id.includes(",")||n.id.includes("*"))throw new Error(`A context provider id cannot contain a comma or an asterisk. The id ${n.id} is invalid.`);if(this._providers.find(r=>r.id===n.id))throw new Error(`A context provider with id ${n.id} has already been registered`);this._providers.push(n)}unregisterContextProvider(n){this._providers=this._providers.filter(r=>r.id!==n)}get providers(){return this._providers.slice()}async resolveAllProviders(n,r,i,o,a){if(o?.isCancellationRequested)return or.debug(this.ctx,"Resolving context providers cancelled"),[];let l=new Map;gU(this.ctx,l,i);let c=[];if(this._providers.length===0)return c;let u=await this.matchProviders(r,i),d=u.filter(_=>_[1]>0);if(u.filter(_=>_[1]<=0).forEach(([_,k])=>{let P={providerId:_.id,matchScore:k,resolution:"none",resolutionTimeMs:0,data:[]};c.push(P)}),d.length===0)return c;if(o?.isCancellationRequested)return or.debug(this.ctx,"Resolving context providers cancelled"),[];F4e(this.ctx,d.map(_=>_[0].id),l,i),Q4e(this.ctx,d.map(_=>_[0].id),l,i),U4e(this.ctx,d.map(_=>_[0].id),l,i);let m=new Y4e.CancellationTokenSource;if(o){let _=o.onCancellationRequested(k=>{m.cancel(),_.dispose()})}let h=TB(this.ctx)&&!kL(this.ctx)?0:xht(this.ctx,i),g=h>0?Date.now()+h:Number.MAX_SAFE_INTEGER,y;h>0&&(y=setTimeout(()=>{m.cancel(),m.dispose()},h));let v=new Map,b={completionId:n,documentContext:r,activeExperiments:l,timeBudget:h,timeoutEnd:g,data:a};for(let[_]of d){let k=this.ctx.get(Ql).getPreviousStatisticsForCompletion(n)?.get(_.id);k&&(b.previousUsageStatistics=k);let P=_.resolver.resolve(b,m.token);v.set(_.id,P)}let E=await N4e(v,m.token);y&&clearTimeout(y);for(let[_,k]of d){let P=E.get(_.id);if(P){if(P.status==="error")KM(P.reason)||or.error(this.ctx,`Error resolving context from ${_.id}: `,P.reason),c.push({providerId:_.id,matchScore:k,resolution:P.status,resolutionTimeMs:P.resolutionTime,data:[]});else{let N=[...P.value??[]];if((P.status==="none"||P.status==="partial")&&(or.info(this.ctx,`Context provider ${_.id} exceeded time budget of ${h}ms`),_.resolver.resolveOnTimeout))try{let G=_.resolver.resolveOnTimeout(b);pie(G)?N.push(...G):G&&N.push(G),N.length>0&&(P.status="partial")}catch(G){or.error(this.ctx,`Error in fallback logic for context provider ${_.id}: `,G)}let[U,ne]=V4e(N);ne&&or.error(this.ctx,`Dropped ${ne} context items from ${_.id} due to invalid schema`);let he=$4e(this.ctx,U),ae={providerId:_.id,matchScore:k,resolution:P.status,resolutionTimeMs:P.resolutionTime,data:he};c.push(ae)}this.ctx.get(Ql).getStatisticsForCompletion(n).setLastResolution(_.id,P.status)}else or.error(this.ctx,`Context provider ${_.id} not found in results`)}return c.sort((_,k)=>k.matchScore-_.matchScore)}async matchProviders(n,r){let i=vU(this.ctx,r),o=i.length===1&&i[0]==="*";return await Promise.all(this._providers.map(async l=>{if(!o&&!i.includes(l.id))return[l,0];let c=await this.match(this.ctx,l.selector,n);return[l,c]}))}},yie=class extends Ba{constructor(n){super();this.delegate=n;this._cachedContextItems=new Kn(5)}static{s(this,"CachedContextProviderRegistry")}registerContextProvider(n){this.delegate.registerContextProvider(n)}unregisterContextProvider(n){this.delegate.unregisterContextProvider(n)}get providers(){return this.delegate.providers}async resolveAllProviders(n,r,i,o,a){let l=this._cachedContextItems.get(n);if(n&&l&&l.length>0)return l;let c=await this.delegate.resolveAllProviders(n,r,i,o,a);return c.length>0&&n&&this._cachedContextItems.set(n,c),c}};function xU(t,e){return new yie(new Aie(t,e))}s(xU,"getContextProviderRegistry");function K4e(t,e,n){let r=t.get(Ql).getStatisticsForCompletion(e);return n.map(o=>{let{providerId:a,resolution:l,resolutionTimeMs:c,matchScore:u,data:d}=o,p=r.get(a),m=p?.usage??"none";(u<=0||l==="none"||l==="error")&&(m="none");let h={providerId:a,resolution:l,resolutionTimeMs:c,usage:m,usageDetails:p?.usageDetails,matched:u>0,numResolvedItems:d.length},g=p?.usageDetails!==void 0?p?.usageDetails.filter(v=>v.usage==="full"||v.usage==="partial"||v.usage==="partial_content_excluded").length:void 0,y=p?.usageDetails!==void 0?p?.usageDetails.filter(v=>v.usage==="partial"||v.usage==="partial_content_excluded").length:void 0;return g!==void 0&&(h.numUsedItems=g),y!==void 0&&(h.numPartiallyUsedItems=y),h})}s(K4e,"telemetrizeContextItems");function J4e(t){return t.matchScore>0&&t.resolution!=="error"}s(J4e,"matchContextItems");function vU(t,e){let n=Cie(t,e),r=Ai(t,wt.ContextProviders)??[];if(n.length===1&&n[0]==="*"||r.length===1&&r[0]==="*")return["*"];let i=t.get(_g).getIds();return Array.from(new Set([...i,...n,...r]))}s(vU,"getActiveContextProviders");function Cie(t,e){return TB(t)?["*"]:t.get(Dt).contextProviders(e)}s(Cie,"getExpContextProviders");function xie(t,e){return vU(t,e).length>0}s(xie,"useContextProviderAPI");function xht(t,e){let n=Ai(t,wt.ContextProviderTimeBudget);return n!==void 0&&typeof n=="number"?n:t.get(Dt).contextProviderTimeBudget(e)}s(xht,"getContextProviderTimeBudget");var Xf=class{constructor(e){this.ctx=e;this.scheduledResolutions=new Kn(25)}static{s(this,"ContextProviderBridge")}schedule(e,n,r,i,o){let a=this.ctx.get(Ba),{textDocument:l,originalPosition:c,originalOffset:u,originalVersion:d,editsWithPosition:p}=e,m=a.resolveAllProviders(n,{uri:l.uri,languageId:l.detectedLanguageId,version:d,offset:u,position:c,proposedEdits:p.length>0?p:void 0},r,i,o?.data);this.scheduledResolutions.set(n,m)}async resolution(e){let n=this.scheduledResolutions.get(e);return n?await n:[]}};f();f();var bU=class{constructor(e,n,r){this.languageId=e;this.nodeMatch=n;this.nodeTypesWithBlockOrStmtChild=r}static{s(this,"BaseBlockParser")}async getNodeMatchAtPosition(e,n,r){let i=await P1(this.languageId,e);try{let a=i.rootNode.descendantForIndex(n);for(;a;){let l=this.nodeMatch[a.type];if(l){if(!this.nodeTypesWithBlockOrStmtChild.has(a.type))break;let c=this.nodeTypesWithBlockOrStmtChild.get(a.type);if((c==""?a.namedChildren[0]:a.childForFieldName(c))?.type==l)break}a=a.parent}return a?r(a):void 0}finally{i.delete()}}getNextBlockAtPosition(e,n,r){return this.getNodeMatchAtPosition(e,n,i=>{let o=i.children.reverse().find(a=>a.type==this.nodeMatch[i.type]);if(o){if(this.languageId=="python"&&o.parent){let a=o.parent.type==":"?o.parent.parent:o.parent,l=a?.nextSibling;for(;l&&l.type=="comment";){let c=l.startPosition.row==o.endPosition.row&&l.startPosition.column>=o.endPosition.column,u=l.startPosition.row>a.endPosition.row&&l.startPosition.column>a.startPosition.column;if(c||u)o=l,l=l.nextSibling;else break}}if(!(o.endIndex>=o.tree.rootNode.endIndex-1&&(o.hasError()||o.parent.hasError())))return r(o)}})}async isBlockBodyFinished(e,n,r){let i=(e+n).trimEnd(),o=await this.getNextBlockAtPosition(i,r,a=>a.endIndex);if(o!==void 0&&o<i.length){let a=o-e.length;return a>0?a:void 0}}getNodeStart(e,n){let r=e.trimEnd();return this.getNodeMatchAtPosition(r,n,i=>i.startIndex)}},EU=class extends bU{constructor(n,r,i,o,a){super(n,o,a);this.blockEmptyMatch=r;this.lineMatch=i}static{s(this,"RegexBasedBlockParser")}isBlockStart(n){return this.lineMatch.test(n.trimStart())}async isBlockBodyEmpty(n,r){let i=await this.getNextBlockAtPosition(n,r,o=>{o.startIndex<r&&(r=o.startIndex);let a=n.substring(r,o.endIndex).trim();return a==""||a.replace(/\s/g,"")==this.blockEmptyMatch});return i===void 0||i}async isEmptyBlockStart(n,r){return r=Z4e(n,r),this.isBlockStart(vht(n,r))&&this.isBlockBodyEmpty(n,r)}};function vht(t,e){let n=t.lastIndexOf(`
`,e-1),r=t.indexOf(`
`,e);return r<0&&(r=t.length),t.slice(n+1,r)}s(vht,"getLineAtOffset");function Z4e(t,e){let n=e;for(;n>0&&/\s/.test(t.charAt(n-1));)n--;return n}s(Z4e,"rewindToNearestNonWs");function X4e(t,e){let n=t.startIndex,r=t.startIndex-t.startPosition.column,i=e.substring(r,n);if(/^\s*$/.test(i))return i}s(X4e,"indent");function bht(t,e,n){if(e.startPosition.row<=t.startPosition.row)return!1;let r=X4e(t,n),i=X4e(e,n);return r!==void 0&&i!==void 0&&r.startsWith(i)}s(bht,"outdented");var Sg=class extends bU{constructor(n,r,i,o,a,l,c){super(n,r,i);this.startKeywords=o;this.blockNodeType=a;this.emptyStatementType=l;this.curlyBraceLanguage=c}static{s(this,"TreeSitterBasedBlockParser")}isBlockEmpty(n,r){let i=n.text.trim();return this.curlyBraceLanguage&&(i.startsWith("{")&&(i=i.slice(1)),i.endsWith("}")&&(i=i.slice(0,-1)),i=i.trim()),!!(i.length==0||this.languageId=="python"&&(n.parent?.type=="class_definition"||n.parent?.type=="function_definition")&&n.children.length==1&&sTe(n.parent))}async isEmptyBlockStart(n,r){if(r>n.length)throw new RangeError("Invalid offset");for(let o=r;o<n.length&&n.charAt(o)!=`
`;o++)if(/\S/.test(n.charAt(o)))return!1;r=Z4e(n,r);let i=await P1(this.languageId,n);try{let o=i.rootNode.descendantForIndex(r-1);if(o==null||this.curlyBraceLanguage&&o.type=="}")return!1;if((this.languageId=="javascript"||this.languageId=="typescript")&&o.parent&&o.parent.type=="object"&&o.parent.text.trim()=="{")return!0;if(this.languageId=="typescript"){let d=o;for(;d.parent;){if(d.type=="function_signature"||d.type=="method_signature"){let p=o.nextSibling;return p&&d.hasError()&&bht(d,p,n)?!0:!d.children.find(h=>h.type==";")&&d.endIndex<=r}d=d.parent}}let a=null,l=null,c=null,u=o;for(;u!=null;){if(u.type==this.blockNodeType){l=u;break}if(this.nodeMatch[u.type]){c=u;break}if(u.type=="ERROR"){a=u;break}u=u.parent}if(l!=null){if(!l.parent||!this.nodeMatch[l.parent.type])return!1;if(this.languageId=="python"){let d=l.previousSibling;if(d!=null&&d.hasError()&&(d.text.startsWith('"""')||d.text.startsWith("'''")))return!0}return this.isBlockEmpty(l,r)}if(a!=null){if(a.previousSibling?.type=="module"||a.previousSibling?.type=="internal_module"||a.previousSibling?.type=="def")return!0;let d=[...a.children].reverse(),p=d.find(h=>this.startKeywords.includes(h.type)),m=d.find(h=>h.type==this.blockNodeType);if(p){switch(this.languageId){case"python":{p.type=="try"&&o.type=="identifier"&&o.text.length>4&&(m=d.find(y=>y.hasError())?.children.find(y=>y.type=="block"));let h,g=0;for(let y of a.children){if(y.type==":"&&g==0){h=y;break}y.type=="("&&(g+=1),y.type==")"&&(g-=1)}if(h&&p.endIndex<=h.startIndex&&h.nextSibling){if(p.type=="def"){let y=h.nextSibling;if(y.type=='"'||y.type=="'"||y.type=="ERROR"&&(y.text=='"""'||y.text=="'''"))return!0}return!1}break}case"javascript":{let h=d.find(v=>v.type=="formal_parameters");if(p.type=="class"&&h)return!0;let g=d.find(v=>v.type=="{");if(g&&g.startIndex>p.endIndex&&g.nextSibling!=null||d.find(v=>v.type=="do")&&p.type=="while"||p.type=="=>"&&p.nextSibling&&p.nextSibling.type!="{")return!1;break}case"typescript":{let h=d.find(y=>y.type=="{");if(h&&h.startIndex>p.endIndex&&h.nextSibling!=null||d.find(y=>y.type=="do")&&p.type=="while"||p.type=="=>"&&p.nextSibling&&p.nextSibling.type!="{")return!1;break}}return m&&m.startIndex>p.endIndex?this.isBlockEmpty(m,r):!0}}if(c!=null){let d=this.nodeMatch[c.type],p=c.children.slice().reverse().find(m=>m.type==d);if(p)return this.isBlockEmpty(p,r);if(this.nodeTypesWithBlockOrStmtChild.has(c.type)){let m=this.nodeTypesWithBlockOrStmtChild.get(c.type),h=m==""?c.children[0]:c.childForFieldName(m);if(h&&h.type!=this.blockNodeType&&h.type!=this.emptyStatementType)return!1}return!0}return!1}finally{i.delete()}}},Eht={python:new Sg("python",{class_definition:"block",elif_clause:"block",else_clause:"block",except_clause:"block",finally_clause:"block",for_statement:"block",function_definition:"block",if_statement:"block",try_statement:"block",while_statement:"block",with_statement:"block"},new Map,["def","class","if","elif","else","for","while","try","except","finally","with"],"block",null,!1),javascript:new Sg("javascript",{arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",method_definition:"statement_block",try_statement:"statement_block",while_statement:"statement_block",with_statement:"statement_block",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),typescript:new Sg("typescript",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),tsx:new Sg("typescriptreact",{ambient_declaration:"statement_block",arrow_function:"statement_block",catch_clause:"statement_block",do_statement:"statement_block",else_clause:"statement_block",finally_clause:"statement_block",for_in_statement:"statement_block",for_statement:"statement_block",function:"statement_block",function_declaration:"statement_block",generator_function:"statement_block",generator_function_declaration:"statement_block",if_statement:"statement_block",internal_module:"statement_block",method_definition:"statement_block",module:"statement_block",try_statement:"statement_block",while_statement:"statement_block",abstract_class_declaration:"class_body",class:"class_body",class_declaration:"class_body"},new Map([["arrow_function","body"],["do_statement","body"],["else_clause",""],["for_in_statement","body"],["for_statement","body"],["if_statement","consequence"],["while_statement","body"],["with_statement","body"]]),["declare","=>","try","catch","finally","do","for","if","else","while","with","function","function*","class"],"statement_block","empty_statement",!0),go:new EU("go","{}",/\b(func|if|else|for)\b/,{communication_case:"block",default_case:"block",expression_case:"block",for_statement:"block",func_literal:"block",function_declaration:"block",if_statement:"block",labeled_statement:"block",method_declaration:"block",type_case:"block"},new Map),ruby:new EU("ruby","end",/\b(BEGIN|END|case|class|def|do|else|elsif|for|if|module|unless|until|while)\b|->/,{begin_block:"}",block:"}",end_block:"}",lambda:"block",for:"do",until:"do",while:"do",case:"end",do:"end",if:"end",method:"end",module:"end",unless:"end",do_block:"end"},new Map),c_sharp:new Sg("csharp",{},new Map([]),[],"block",null,!0),java:new Sg("java",{},new Map([]),[],"block",null,!0),php:new Sg("php",{},new Map([]),[],"block",null,!0),cpp:new Sg("cpp",{},new Map([]),[],"block",null,!0)};function vie(t){if(!A0(t))throw new Error(`Language ${t} is not supported`);return Eht[$M(t)]}s(vie,"getBlockParser");async function eRe(t,e,n){return A0(t)?vie(t).isEmptyBlockStart(e,n):!1}s(eRe,"isEmptyBlockStart");async function tRe(t,e,n,r){if(A0(t))return vie(t).isBlockBodyFinished(e,n,r)}s(tRe,"isBlockBodyFinished");async function nRe(t,e,n){if(A0(t))return vie(t).getNodeStart(e,n)}s(nRe,"getNodeStart");var a9n=new Tt("parseBlock");function cP(t,e,n,r){let i=e.getText(Mo.range(Mo.position(0,0),n))+(r?`
`:""),o=e.offsetAt(n)+(r?1:0),a=e.detectedLanguageId;return l=>tRe(a,i,l,o)}s(cP,"parsingBlockFinished");function TU(t,e){return eRe(t.detectedLanguageId,t.getText(),t.offsetAt(e))}s(TU,"isEmptyBlockStartUtil");async function rRe(t,e,n,r){let o=e.getText(Mo.range(Mo.position(0,0),n))+r,a=await nRe(e.detectedLanguageId,o,e.offsetAt(n));if(a)return e.positionAt(a)}s(rRe,"getNodeStartUtil");var Iht=["\\{","\\}","\\[","\\]","\\(","\\)"].concat(["then","else","elseif","elif","catch","finally","fi","done","end","loop","until","where","when"].map(t=>t+"\\b")),Tht=new RegExp(`^(${Iht.join("|")})`);function wht(t){return Tht.test(t.trimLeft().toLowerCase())}s(wht,"isContinuationLine");function IU(t){let e=/^(\s*)([^]*)$/.exec(t);if(e&&e[2]&&e[2].length>0)return e[1].length}s(IU,"indentationOfLine");function uP(t,e){let n=t.getText(),r=t.offsetAt(e);return bie(n,r,t.detectedLanguageId)}s(uP,"contextIndentation");function bie(t,e,n){let r=t.slice(0,e).split(`
`),i=t.slice(e).split(`
`);function o(d,p,m){let h=p,g,y;for(;g===void 0&&h>=0&&h<d.length;)g=IU(d[h]),y=h,h+=m;if(n==="python"&&m===-1){h++;let v=d[h].trim();if(v.endsWith('"""')){if(!(v.startsWith('"""')&&v!=='"""'))for(h--;h>=0&&!d[h].trim().startsWith('"""');)h--;if(h>=0)for(g=void 0,h--;g===void 0&&h>=0;)g=IU(d[h]),y=h,h--}}return[g,y]}s(o,"seekNonBlank");let[a,l]=o(r,r.length-1,-1),c=(()=>{if(!(a===void 0||l===void 0))for(let d=l-1;d>=0;d--){let p=IU(r[d]);if(p!==void 0&&p<a)return p}})(),[u]=o(i,1,1);return{prev:c,current:a??0,next:u}}s(bie,"contextIndentationFromText");var _ht=!1;function Sht(t,e,n){let r=t.split(`
`),i=n!==void 0,o=n?.split(`
`).pop(),a=0;if(i&&o?.trim()!=""&&r[0].trim()!==""&&a++,!i&&_ht&&r[0].trim()===""&&a++,i||a++,r.length===a)return"continue";let l=Math.max(e.current,e.next??0);for(let c=a;c<r.length;c++){let u=r[c];c==0&&o!==void 0&&(u=o+u);let d=IU(u);if(d!==void 0&&(d<l||d===l&&!wht(u)))return r.slice(0,c).join(`
`).length}return"continue"}s(Sht,"completionCutOrContinue");function iRe(t,e){return async n=>{let r=Sht(n,t,e);return r==="continue"?void 0:r}}s(iRe,"indentationBlockFinished");f();f();f();f();f();f();var Rht={tokenizerName:"o200k_base"};function kht(t){return{...Rht,...t}}s(kht,"cursorContextOptions");function dP(t,e={}){let n=kht(e),r=Bo(n.tokenizerName);if(n.maxLineCount!==void 0&&n.maxLineCount<0)throw new Error("maxLineCount must be non-negative if defined");if(n.maxTokenLength!==void 0&&n.maxTokenLength<0)throw new Error("maxTokenLength must be non-negative if defined");if(n.maxLineCount===0||n.maxTokenLength===0)return{context:"",lineCount:0,tokenLength:0,tokenizerName:n.tokenizerName};let i=t.source.slice(0,t.offset);return n.maxLineCount!==void 0&&(i=i.split(`
`).slice(-n.maxLineCount).join(`
`)),n.maxTokenLength!==void 0&&(i=r.takeLastLinesTokens(i,n.maxTokenLength)),{context:i,lineCount:i.split(`
`).length,tokenLength:r.tokenLength(i),tokenizerName:n.tokenizerName}}s(dP,"getCursorContext");f();f();var Bht={function:"function",snippet:"snippet",snippets:"snippets",variable:"variable",parameter:"parameter",method:"method",class:"class",module:"module",alias:"alias","enum member":"enum member",interface:"interface"};function oRe(t){let e=Bht[t.semantics],n=["snippets"].includes(t.semantics)?"these":"this";return{headline:t.relativePath?`Compare ${n} ${e} from ${t.relativePath}:`:`Compare ${n} ${e}:`,snippet:t.snippet}}s(oRe,"announceSnippet");var Eie=class{constructor(e){this.keys=[];this.cache={};this.size=e}static{s(this,"FifoCache")}put(e,n){if(this.cache[e]=n,this.keys.length>this.size){this.keys.push(e);let r=this.keys.shift()??"";delete this.cache[r]}}get(e){return this.cache[e]}};var Iie=class{static{s(this,"Tokenizer")}constructor(e){this.stopsForLanguage=Lht.get(e.languageId)??Nht}tokenize(e){return new Set(Pht(e).filter(n=>!this.stopsForLanguage.has(n)))}},sRe=new Eie(20),E5=class{static{s(this,"WindowedMatcher")}constructor(e){this.referenceDoc=e,this.tokenizer=new Iie(e)}get referenceTokens(){return this.createReferenceTokens()}async createReferenceTokens(){return this.referenceTokensCache??=this.tokenizer.tokenize(this._getCursorContextInfo(this.referenceDoc).context)}sortScoredSnippets(e,n="descending"){return n=="ascending"?e.sort((r,i)=>r.score>i.score?1:-1):n=="descending"?e.sort((r,i)=>r.score>i.score?-1:1):e}async retrieveAllSnippets(e,n="descending"){let r=[];if(e.source.length===0||(await this.referenceTokens).size===0)return r;let i=e.source.split(`
`),o=this.id()+":"+e.source,a=sRe.get(o)??[],l=a.length==0,c=l?i.map(u=>this.tokenizer.tokenize(u),this.tokenizer):[];for(let[u,[d,p]]of this.getWindowsDelineations(i).entries()){if(l){let g=new Set;c.slice(d,p).forEach(y=>y.forEach(v=>g.add(v),g)),a.push(g)}let m=a[u],h=this.similarityScore(m,await this.referenceTokens);if(r.length&&d>0&&r[r.length-1].endLine>d){r[r.length-1].score<h&&(r[r.length-1].score=h,r[r.length-1].startLine=d,r[r.length-1].endLine=p);continue}r.push({score:h,startLine:d,endLine:p})}return l&&sRe.put(o,a),this.sortScoredSnippets(r,n)}findMatches(e,n){return this.findBestMatch(e,n)}async findBestMatch(e,n){if(e.source.length===0||(await this.referenceTokens).size===0)return[];let r=e.source.split(`
`),i=await this.retrieveAllSnippets(e,"descending");if(i.length===0)return[];let o=[];for(let a=0;a<i.length&&a<n;a++)if(i[a].score!==0){let l=r.slice(i[a].startLine,i[a].endLine).join(`
`);o.push({snippet:l,semantics:"snippet",provider:"similar-files",...i[a]})}return o}};function Pht(t){return t.split(/[^a-zA-Z0-9]/).filter(e=>e.length>0)}s(Pht,"splitIntoWords");var Dht=new Set(["we","our","you","it","its","they","them","their","this","that","these","those","is","are","was","were","be","been","being","have","has","had","having","do","does","did","doing","can","don","t","s","will","would","should","what","which","who","when","where","why","how","a","an","the","and","or","not","no","but","because","as","until","again","further","then","once","here","there","all","any","both","each","few","more","most","other","some","such","above","below","to","during","before","after","of","at","by","about","between","into","through","from","up","down","in","out","on","off","over","under","only","own","same","so","than","too","very","just","now"]),Nht=new Set(["if","then","else","for","while","with","def","function","return","TODO","import","try","catch","raise","finally","repeat","switch","case","match","assert","continue","break","const","class","enum","struct","static","new","super","this","var",...Dht]),Lht=new Map([]);f();function wU(t,e){let n=[],r=e.length;if(r==0)return[];if(r<t)return[[0,r]];for(let i=0;i<r-t+1;i++)n.push([i,i+t]);return n}s(wU,"getBasicWindowDelineations");var _U=class t extends E5{static{s(this,"FixedWindowSizeJaccardMatcher")}constructor(e,n){super(e),this.windowLength=n}static{this.FACTORY=s(e=>({to:s(n=>new t(n,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return wU(this.windowLength,e)}_getCursorContextInfo(e){return dP(e,{maxLineCount:this.windowLength})}similarityScore(e,n){return Fht(e,n)}};function Fht(t,e){let n=new Set;return t.forEach(r=>{e.has(r)&&n.add(r)}),n.size/(t.size+e.size-n.size)}s(Fht,"computeScore");f();var SU=class t extends E5{static{s(this,"BlockTokenSubsetMatcher")}constructor(e,n){super(e),this.windowLength=n}static{this.FACTORY=s(e=>({to:s(n=>new t(n,e),"to")}),"FACTORY")}id(){return"fixed:"+this.windowLength}getWindowsDelineations(e){return wU(this.windowLength,e)}_getCursorContextInfo(e){return dP(e,{maxLineCount:this.windowLength})}get referenceTokens(){return this.createReferenceTokensForLanguage()}async createReferenceTokensForLanguage(){return this.referenceTokensCache?this.referenceTokensCache:(this.referenceTokensCache=t.syntaxAwareSupportsLanguage(this.referenceDoc.languageId)?await this.syntaxAwareReferenceTokens():await super.referenceTokens,this.referenceTokensCache)}async syntaxAwareReferenceTokens(){let e=(await this.getEnclosingMemberStart(this.referenceDoc.source,this.referenceDoc.offset))?.startIndex,n=this.referenceDoc.offset,r=e?this.referenceDoc.source.slice(e,n):dP(this.referenceDoc,{maxLineCount:this.windowLength}).context;return this.tokenizer.tokenize(r)}static syntaxAwareSupportsLanguage(e){switch(e){case"csharp":return!0;default:return!1}}similarityScore(e,n){return Mht(e,n)}async getEnclosingMemberStart(e,n){let r;try{r=await P1(this.referenceDoc.languageId,e);let i=r.rootNode.namedDescendantForIndex(n);for(;i&&!(t.isMember(i)||t.isBlock(i));)i=i.parent??void 0;return i}finally{r?.delete()}}static isMember(e){switch(e?.type){case"method_declaration":case"property_declaration":case"field_declaration":case"constructor_declaration":return!0;default:return!1}}static isBlock(e){switch(e?.type){case"class_declaration":case"struct_declaration":case"record_declaration":case"enum_declaration":case"interface_declaration":return!0;default:return!1}}};function Mht(t,e){let n=new Set;return e.forEach(r=>{t.has(r)&&n.add(r)}),n.size}s(Mht,"computeScore");var Qht=0,Oht=60,Uht=4,qht=1,Wht=20,Hht=1e4,aRe={snippetLength:Oht,threshold:Qht,maxTopSnippets:Uht,maxCharPerFile:Hht,maxNumberOfFiles:Wht,maxSnippetsPerFile:qht,useSubsetMatching:!1};var Tie={snippetLength:60,threshold:0,maxTopSnippets:16,maxCharPerFile:1e5,maxNumberOfFiles:200,maxSnippetsPerFile:4};function Ght(t,e){return(e.useSubsetMatching?SU.FACTORY(e.snippetLength):_U.FACTORY(e.snippetLength)).to(t)}s(Ght,"getMatcher");async function lRe(t,e,n){let r=Ght(t,n);return n.maxTopSnippets===0?[]:(await e.filter(o=>o.source.length<n.maxCharPerFile&&o.source.length>0).slice(0,n.maxNumberOfFiles).reduce(async(o,a)=>(await o).concat((await r.findMatches(a,n.maxSnippetsPerFile)).map(l=>({relativePath:a.relativePath,...l}))),Promise.resolve([]))).filter(o=>o.score&&o.snippet&&o.score>n.threshold).sort((o,a)=>o.score-a.score).slice(-n.maxTopSnippets)}s(lRe,"getSimilarSnippets");function cRe(t,e){return{...Tie,useSubsetMatching:wie(t,e)}}s(cRe,"getCppSimilarFilesOptions");function uRe(t){return Tie.maxTopSnippets}s(uRe,"getCppNumberOfSnippets");var jht=new Map([["cpp",cRe]]);function RU(t,e,n){let r=jht.get(n);return r?r(t,e):{...aRe,useSubsetMatching:wie(t,e)}}s(RU,"getSimilarFilesOptions");var Vht=new Map([["cpp",uRe]]);function dRe(t,e){let n=Vht.get(e);return n?n(t):nTe}s(dRe,"getNumberOfSnippets");function wie(t,e){return(e.filtersAndExp.exp.variables.copilotsubsetmatching||Ai(t,wt.UseSubsetMatching))??!1}s(wie,"useSubsetMatching");f();f();var $ht=new Set(["ERR_WORKER_OUT_OF_MEMORY","ENOMEM"]);function zht(t){return $ht.has(t.code??"")||t.name==="RangeError"&&t.message==="WebAssembly.Memory(): could not allocate memory"}s(zht,"isOomError");function I5(t,e,n,r=or){if(!Fc(e)){if(e instanceof Error){let i=e;zht(i)?t.get(Ji).setWarning("Out of memory"):i.code==="EMFILE"||i.code==="ENFILE"?t.get(Ji).setWarning("Too many open files"):i.code==="CopilotPromptLoadFailure"?t.get(Ji).setWarning("Corrupted Copilot installation"):`${i.code}`.startsWith("CopilotPromptWorkerExit")?t.get(Ji).setWarning("Worker unexpectedly exited"):i.syscall==="uv_cwd"&&i.code==="ENOENT"&&t.get(Ji).setWarning("Current working directory does not exist")}r.exception(t,e,n)}}s(I5,"handleException");function fRe(t){process.addListener("uncaughtException",n=>{I5(t,n,"uncaughtException")});let e=!1;process.addListener("unhandledRejection",n=>{if(!e)try{e=!0,I5(t,n,"unhandledRejection")}finally{e=!1}})}s(fRe,"registerDefaultHandlers");f();f();var Yht="content_excluded";async function pRe(t,e,n,r){let i=CU(n,"CodeSnippet");if(i.length===0)return[];let o=new Set,a=i.flatMap(d=>d.data.map(p=>(o.add(p.uri),p.additionalUris?.forEach(m=>o.add(m)),{providerId:d.providerId,data:p}))),l=t.get(Nn),c=new Map;await Promise.all(Array.from(o).map(async d=>{c.set(d,await l.getTextDocumentValidation({uri:d}))}));let u=t.get(Ql).getStatisticsForCompletion(e);return a.filter(d=>{let m=[d.data.uri,...d.data.additionalUris??[]].every(h=>c.get(h)?.status==="valid");return m?u.addExpectations(d.providerId,[[d.data,"included"]]):u.addExpectations(d.providerId,[[d.data,Yht]]),m}).map(d=>d.data)}s(pRe,"getCodeSnippetsFromContextItems");function mRe(t,e){let n=t.get(Nn);return e.map(r=>({snippet:r,relativePath:n.getRelativePath(r)}))}s(mRe,"addRelativePathToCodeSnippets");f();function ca(t){if(t.children)return Array.isArray(t.children)?t.children.join(""):t.children}s(ca,"Text");function Av(t){return t.children}s(Av,"Chunk");f();function Pn(t,e,n){let r=[];Array.isArray(e.children)?r=e.children:e.children&&(r=[e.children]);let i={...e,children:r};return n&&(i.key=n),{type:t,props:i}}s(Pn,"functionComponentFunction");function Dm(t){return{type:"f",children:t}}s(Dm,"fragmentFunction");Dm.isFragmentFunction=!0;var kU=s((t,e)=>{let[n,r]=e.useState(),[i,o]=e.useState();if(e.useData(bd,u=>{u.codeSnippets!==n&&r(u.codeSnippets),u.document.uri!==i?.uri&&o(u.document)}),!n||n.length===0||!i)return;let a=mRe(t.ctx,n),l=new Map;for(let u of a){let d=u.relativePath??u.snippet.uri,p=l.get(d);p===void 0&&(p=[],l.set(d,p)),p.push(u)}let c=[];for(let[u,d]of l.entries()){let p=d.filter(m=>m.snippet.value.length>0);p.length>0&&c.push({chunkElements:p.map(m=>m.snippet),importance:Math.max(...p.map(m=>m.snippet.importance??0)),uri:u})}if(c.length!==0)return c.sort((u,d)=>d.importance-u.importance),c.reverse(),c.map(u=>{let d=[];return d.push(Pn(ca,{children:`Compare ${u.chunkElements.length>1?"these snippets":"this snippet"} from ${u.uri}:`})),u.chunkElements.forEach((p,m)=>{d.push(Pn(ca,{source:p,children:p.value},p.id)),u.chunkElements.length>1&&m<u.chunkElements.length-1&&d.push(Pn(ca,{children:"---"}))}),Pn(Av,{children:d})})},"CodeSnippets");f();function _ie(t){return t.children}s(_ie,"CompletionsContext");function Sie(t){return t.children}s(Sie,"StableCompletionsContext");function Rie(t){return t.children}s(Rie,"AdditionalCompletionsContext");function BU(t){return t.name===_ie.name||t.name===Sie.name||t.name===Rie.name}s(BU,"isContextNode");f();f();f();function hRe(t,e){if(t.length===0||e.length===0)return{score:t.length+e.length};let n=Array.from({length:t.length}).map(()=>Array.from({length:e.length}).map(()=>0));for(let r=0;r<t.length;r++)n[r][0]=r;for(let r=0;r<e.length;r++)n[0][r]=r;for(let r=0;r<e.length;r++)for(let i=0;i<t.length;i++)n[i][r]=Math.min((i==0?r:n[i-1][r])+1,(r==0?i:n[i][r-1])+1,(i==0||r==0?Math.max(i,r):n[i-1][r-1])+(t[i]==e[r]?0:1));return{score:n[t.length-1][e.length-1]}}s(hRe,"findEditDistanceScore");var gRe=50;function kie(t){let e=t*4,n=t*.1;return Math.floor(e+n)}s(kie,"approximateMaxCharacters");function fP(t,e){let[n,r]=e.useState(),[i,o]=e.useState(),[a,l]=e.useState(0),[c,u]=e.useState(),[d,p]=e.useState();e.useData(bd,h=>{let g=h.document;(h.document.uri!==n?.uri||g.getText()!==n?.getText())&&r(g),h.position!==i&&o(h.position),h.suffixMatchThreshold!==c&&u(h.suffixMatchThreshold),h.maxPromptTokens!==a&&l(h.maxPromptTokens),h.tokenizer!==d&&p(h.tokenizer)});let m=kie(a);return Pn(Dm,{children:[Pn(a2,{document:n,position:i,maxCharacters:m}),Pn(PU,{document:n,position:i,suffixMatchThreshold:c,maxCharacters:m,tokenizer:d})]})}s(fP,"CurrentFile");function a2(t){if(t.document===void 0||t.position===void 0)return Pn(ca,{});let e=t.document.getText({start:{line:0,character:0},end:t.position});return e.length>t.maxCharacters&&(e=e.slice(-t.maxCharacters)),Pn(ca,{children:e})}s(a2,"BeforeCursor");function PU(t,e){let[n,r]=e.useState("");if(t.document===void 0||t.position===void 0)return Pn(ca,{});let i=t.document.getText({start:t.position,end:{line:Number.MAX_VALUE,character:Number.MAX_VALUE}});i.length>t.maxCharacters&&(i=i.slice(0,t.maxCharacters));let o=i.replace(/^.*/,"").trimStart();if(o==="")return Pn(ca,{});if(n===o)return Pn(ca,{children:n});let a=o;if(n!==""){let l=Bo(t.tokenizer),c=l.takeFirstTokens(o,gRe);c.tokens.length>0&&100*hRe(c.tokens,l.takeFirstTokens(n,gRe).tokens)?.score<(t.suffixMatchThreshold??jM)*c.tokens.length&&(a=n)}return a!==n&&r(a),Pn(ca,{children:a})}s(PU,"AfterCursor");function ARe(t,e){let[n,r]=e.useState(),[i,o]=e.useState(),[a,l]=e.useState(0);e.useData(bd,u=>{let d=u.document;(u.document.uri!==n?.uri||d.getText()!==n?.getText())&&r(d),u.position!==i&&o(u.position),u.maxPromptTokens!==a&&l(u.maxPromptTokens)});let c=kie(a);return Pn(a2,{document:n,position:i,maxCharacters:c})}s(ARe,"DocumentPrefix");function yRe(t,e){let[n,r]=e.useState(),[i,o]=e.useState(),[a,l]=e.useState(0),[c,u]=e.useState(),[d,p]=e.useState();e.useData(bd,h=>{let g=h.document;(h.document.uri!==n?.uri||g.getText()!==n?.getText())&&r(g),h.position!==i&&o(h.position),h.suffixMatchThreshold!==c&&u(h.suffixMatchThreshold),h.maxPromptTokens!==a&&l(h.maxPromptTokens),h.tokenizer!==d&&p(h.tokenizer)});let m=kie(a);return Pn(PU,{document:n,position:i,suffixMatchThreshold:c,maxCharacters:m,tokenizer:d})}s(yRe,"DocumentSuffix");f();var DU=class{static{s(this,"WishlistElision")}elide(e,n,r,i,o){if(n<=0)throw new Error("Prefix limit must be greater than 0");let[a,l]=this.preparePrefixBlocks(e,o),{elidedSuffix:c,adjustedPrefixTokenLimit:u}=this.elideSuffix(r,i,n,l,o),d=this.elidePrefix(a,u,l,o);return{blocks:[c,...d],cycles:1}}preparePrefixBlocks(e,n){let r=0,i=new Set;return[e.map((a,l)=>{let c=0,d=a.value.split(/([^\n]*\n+)/).filter(m=>m!=="").map(m=>{let h=n.tokenLength(m);return c+=h,r+=h,{line:m,componentPath:a.componentPath,tokens:h}}),p=a.componentPath;if(i.has(p))throw new Error(`Duplicate component path in prefix blocks: ${p}`);return i.add(p),{...a,tokens:c,markedForRemoval:!1,originalIndex:l,lines:d}}),r]}elideSuffix(e,n,r,i,o){let a=e.value;if(a.length===0||n<=0)return{elidedSuffix:{...e,tokens:0,elidedValue:"",elidedTokens:0},adjustedPrefixTokenLimit:r+Math.max(0,n)};i<r&&(n=n+(r-i),r=i);let l=o.takeFirstTokens(a,n);return{elidedSuffix:{...e,value:a,tokens:o.tokenLength(a),elidedValue:l.text,elidedTokens:l.tokens.length},adjustedPrefixTokenLimit:r+Math.max(0,n-l.tokens.length)}}elidePrefix(e,n,r,i){let o=this.removeLowWeightPrefixBlocks(e,n,r),a=o.filter(d=>!d.markedForRemoval).flatMap(d=>d.lines);if(a.length===0)return[];let[l,c]=this.trimPrefixLinesToFit(a,n,i),u=c;return o.map(d=>{if(d.markedForRemoval)return u+d.tokens<=n&&!d.chunks?(u+=d.tokens,{...d,elidedValue:d.value,elidedTokens:d.tokens}):{...d,elidedValue:"",elidedTokens:0};let p=l.filter(h=>h.componentPath===d.componentPath&&h.line!=="").map(h=>h.line).join(""),m=d.tokens;return p!==d.value&&(m=p!==""?i.tokenLength(p):0),{...d,elidedValue:p,elidedTokens:m}})}removeLowWeightPrefixBlocks(e,n,r){let i=r;e.sort((o,a)=>o.weight-a.weight);for(let o of e){if(i<=n)break;if(o.weight!==1&&!(o.chunks&&o.markedForRemoval))if(o.chunks&&o.chunks.size>0)for(let a of e)!a.markedForRemoval&&a.chunks&&[...o.chunks].every(l=>a.chunks?.has(l))&&(a.markedForRemoval=!0,i-=a.tokens);else o.markedForRemoval=!0,i-=o.tokens}return e.sort((o,a)=>o.originalIndex-a.originalIndex)}trimPrefixLinesToFit(e,n,r){let i=0,o=[];for(let a=e.length-1;a>=0;a--){let l=e[a],c=l.tokens;if(i+c<=n)o.unshift(l),i+=c;else break}if(o.length===0){let a=e[e.length-1];if(a&&a.line.length>0){let c=r.takeLastTokens(a.line,n);return o.push({line:c.text,componentPath:a.componentPath,tokens:c.tokens.length}),[o,c.tokens.length]}let l=`Cannot fit prefix within limit of ${n} tokens`;throw new Error(l)}return[o,i]}};function CRe(t){return t.map(e=>e.elidedValue).join("")}s(CRe,"makePrompt");function xRe(t){return t.filter(e=>e.type==="prefix").map(e=>e.elidedValue).join("")}s(xRe,"makePrefixPrompt");function vRe(t){if(t.length===0)return[];let e=new Map;for(let i of t)if(i.type==="context"&&i.index!==void 0){e.has(i.index)||e.set(i.index,[]);let o=i.elidedValue.trim();o.length>0&&e.get(i.index).push(o)}let n=Math.max(...Array.from(e.keys()),-1),r=[];for(let i=0;i<=n;i++){let o=e.get(i);if(o&&o.length>0){let a=o.join(`
`).trim();r.push(a)}else r.push("")}return r}s(vRe,"makeContextPrompt");f();var T5=class{constructor(e,n=Bie()){this.snapshot=e;this.transformers=n}static{s(this,"SnapshotWalker")}walkSnapshot(e){this.walkSnapshotNode(this.snapshot,void 0,e,{})}walkSnapshotNode(e,n,r,i){let o=this.transformers.reduce((l,c)=>c(e,n,l),{...i});if(r(e,n,o))for(let l of e.children??[])this.walkSnapshotNode(l,e,r,o)}};function Bie(){return[(t,e,n)=>{n.weight===void 0&&(n.weight=1);let r=t.props?.weight??1,i=typeof r=="number"?Math.max(0,Math.min(1,r)):1;return{...n,weight:i*n.weight}},(t,e,n)=>{if(t.name===Av.name){let r=n.chunks?new Set(n.chunks):new Set;return r.add(t.path),{...n,chunks:r}}return n},(t,e,n)=>t.props?.source!==void 0?{...n,source:t.props.source}:n]}s(Bie,"defaultTransformers");f();var pP={abap:{lineComment:{start:'"',end:""},markdownLanguageIds:["abap","sap-abap"]},aspdotnet:{lineComment:{start:"<%--",end:"--%>"}},bat:{lineComment:{start:"REM",end:""}},bibtex:{lineComment:{start:"%",end:""},markdownLanguageIds:["bibtex"]},blade:{lineComment:{start:"#",end:""}},BluespecSystemVerilog:{lineComment:{start:"//",end:""}},c:{lineComment:{start:"//",end:""},markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";",end:""},markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["coffeescript","coffee","cson","iced"]},cpp:{lineComment:{start:"//",end:""},markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"]},csharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["csharp","cs"]},css:{lineComment:{start:"/*",end:"*/"}},cuda:{lineComment:{start:"//",end:""}},dart:{lineComment:{start:"//",end:""}},dockerfile:{lineComment:{start:"#",end:""},markdownLanguageIds:["dockerfile","docker"]},dotenv:{lineComment:{start:"#",end:""}},elixir:{lineComment:{start:"#",end:""}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%",end:""},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//",end:""},markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"]},go:{lineComment:{start:"//",end:""},markdownLanguageIds:["go","golang"]},graphql:{lineComment:{start:"#",end:""}},groovy:{lineComment:{start:"//",end:""}},haml:{lineComment:{start:"-#",end:""}},handlebars:{lineComment:{start:"{{!",end:"}}"},markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"]},haskell:{lineComment:{start:"--",end:""},markdownLanguageIds:["haskell","hs"]},hlsl:{lineComment:{start:"//",end:""}},html:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["html","xhtml"]},ini:{lineComment:{start:";",end:""}},java:{lineComment:{start:"//",end:""},markdownLanguageIds:["java","jsp"]},javascript:{lineComment:{start:"//",end:""},markdownLanguageIds:["javascript","js"]},javascriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},jsonc:{lineComment:{start:"//",end:""}},jsx:{lineComment:{start:"//",end:""},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#",end:""},markdownLanguageIds:["julia","jl"]},kotlin:{lineComment:{start:"//",end:""},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%",end:""},markdownLanguageIds:["tex"]},legend:{lineComment:{start:"//",end:""}},less:{lineComment:{start:"//",end:""}},lua:{lineComment:{start:"--",end:""},markdownLanguageIds:["lua","pluto"]},makefile:{lineComment:{start:"#",end:""},markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"[]: #",end:""},markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec","mm","objc","obj-c"]},"objective-cpp":{lineComment:{start:"//",end:""},markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#",end:""},markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//",end:""}},powershell:{lineComment:{start:"#",end:""},markdownLanguageIds:["powershell","ps","ps1"]},pug:{lineComment:{start:"//",end:""}},python:{lineComment:{start:"#",end:""},markdownLanguageIds:["python","py","gyp"]},ql:{lineComment:{start:"//",end:""}},r:{lineComment:{start:"#",end:""}},razor:{lineComment:{start:"<!--",end:"-->"},markdownLanguageIds:["cshtml","razor","razor-cshtml"]},ruby:{lineComment:{start:"#",end:""},markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"]},rust:{lineComment:{start:"//",end:""},markdownLanguageIds:["rust","rs"]},sass:{lineComment:{start:"//",end:""}},scala:{lineComment:{start:"//",end:""}},scss:{lineComment:{start:"//",end:""}},shellscript:{lineComment:{start:"#",end:""},markdownLanguageIds:["bash","sh","zsh"]},slang:{lineComment:{start:"//",end:""}},slim:{lineComment:{start:"/",end:""}},solidity:{lineComment:{start:"//",end:""},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--",end:""}},stylus:{lineComment:{start:"//",end:""}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//",end:""}},systemverilog:{lineComment:{start:"//",end:""}},terraform:{lineComment:{start:"#",end:""}},tex:{lineComment:{start:"%",end:""}},typescript:{lineComment:{start:"//",end:""},markdownLanguageIds:["typescript","ts"]},typescriptreact:{lineComment:{start:"//",end:""},markdownLanguageIds:["tsx"]},vb:{lineComment:{start:"'",end:""},markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//",end:""}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//",end:""}},xml:{lineComment:{start:"<!--",end:"-->"}},xsl:{lineComment:{start:"<!--",end:"-->"}},yaml:{lineComment:{start:"#",end:""},markdownLanguageIds:["yaml","yml"]}},Pie={};for(let[t,e]of Object.entries(pP))if(e.markdownLanguageIds)for(let n of e.markdownLanguageIds)Pie[n]=t;else Pie[t]=t;function ERe(t){return Pie[t]}s(ERe,"mdCodeBlockLangToLanguageId");var Kht={start:"//",end:""},Jht=["php","plaintext"],Die={html:"<!DOCTYPE html>",python:"#!/usr/bin/env python3",ruby:"#!/usr/bin/env ruby",shellscript:"#!/bin/sh",yaml:"# YAML data"};function IRe(t){return Object.values(Die).includes(t.trim())}s(IRe,"isShebangLine");function Xht({source:t}){return t.startsWith("#!")||t.startsWith("<!DOCTYPE")}s(Xht,"hasLanguageMarker");function Zht(t,e){let n=pP[e]?pP[e].lineComment:Kht;if(n){let r=n.end==""?"":" "+n.end;return`${n.start} ${t}${r}`}return""}s(Zht,"comment");function NU(t,e){if(t==="")return"";let n=t.endsWith(`
`),i=(n?t.slice(0,-1):t).split(`
`).map(o=>Zht(o,e)).join(`
`);return n?i+`
`:i}s(NU,"commentBlockAsSingles");function TRe(t){let{languageId:e}=t;return Jht.indexOf(e)===-1&&!Xht(t)?e in Die?Die[e]:`Language: ${e}`:""}s(TRe,"getLanguageMarker");function wRe(t){return t.relativePath?`Path: ${t.relativePath}`:""}s(wRe,"getPathMarker");function mP(t){return t===""||t.endsWith(`
`)?t:t+`
`}s(mP,"newLineEnded");function _Re(t){return bRe(typeof t=="string"?t:"plaintext")}s(_Re,"getLanguage");function bRe(t){return pP[t]!==void 0?{languageId:t,...pP[t]}:{languageId:t,lineComment:{start:"//",end:""}}}s(bRe,"_getLanguage");var egt=5,w5=class{constructor(){this.renderId=0;this.formatPrefix=CRe}static{s(this,"CompletionsPromptRenderer")}render(e,n,r){let i=this.renderId++,o=performance.now();try{if(r?.isCancellationRequested)return{status:"cancelled"};let a=n.delimiter??"",l=n.tokenizer??"o200k_base",{prefixBlocks:c,suffixBlock:u,componentStatistics:d}=this.processSnapshot(e,a,n.languageId),{prefixTokenLimit:p,suffixTokenLimit:m}=this.getPromptLimits(u,n),h=performance.now(),g=new DU,{blocks:[y,...v],cycles:b}=g.elide(c,p,u,m,Bo(l)),E=performance.now(),_=this.formatPrefix(v),k=this.formatContext?this.formatContext(v):void 0,P=y.elidedValue,N=v.reduce((U,ne)=>U+ne.elidedTokens,0);return d.push(...tgt([...v,y])),{prefix:_,prefixTokens:N,suffix:P,suffixTokens:y.elidedTokens,context:k,status:"ok",metadata:{renderId:i,rendererName:"completions",tokenizer:l,elisionStrategy:"wishlist",elisionCycles:b,elisionTimeMs:E-h,renderTimeMs:performance.now()-o,componentStatistics:d,updateDataTimeMs:d.reduce((U,ne)=>U+(ne.updateDataTimeMs??0),0),status:"ok"}}}catch(a){return{status:"error",error:a}}}getPromptLimits(e,n){let r=e?.value??"",i=n.promptTokenLimit,o=n.suffixPercent;if(r.length==0||o==0)return{prefixTokenLimit:i,suffixTokenLimit:0};i=r.length>0?i-egt:i;let a=Math.ceil(i*(o/100));return{prefixTokenLimit:i-a,suffixTokenLimit:a}}processSnapshot(e,n,r){let i=[],o=[],a=[],l=!1;if(new T5(e,Nie).walkSnapshot((d,p,m)=>{if(d===e||(d.name===fP.name&&(l=!0),d.statistics.updateDataTimeMs&&d.statistics.updateDataTimeMs>0&&a.push({componentPath:d.path,updateDataTimeMs:d.statistics.updateDataTimeMs}),d.value===void 0||d.value===""))return!0;let h=m.chunks;if(m.type==="suffix")o.push({value:hP(d.value),type:"suffix",weight:m.weight,componentPath:d.path,nodeStatistics:d.statistics,chunks:h,source:m.source});else{let g=d.value.endsWith(n)?d.value:d.value+n,y=g;m.type==="prefix"?y=d.value:IRe(d.value)?y=g:y=NU(g,r),i.push({type:m.type==="prefix"?"prefix":"context",value:hP(y),weight:m.weight,componentPath:d.path,nodeStatistics:d.statistics,chunks:h,source:m.source})}return!0}),!l)throw new Error(`Node of type ${fP.name} not found`);if(o.length>1)throw new Error("Only one suffix is allowed");let u=o.length===1?o[0]:{componentPath:"",value:"",weight:1,nodeStatistics:{},type:"suffix"};return{prefixBlocks:i,suffixBlock:u,componentStatistics:a}}},Nie=[...Bie(),(t,e,n)=>BU(t)?{...n,type:"context"}:n,(t,e,n)=>t.name===a2.name?{...n,type:"prefix"}:n,(t,e,n)=>t.name===PU.name?{...n,type:"suffix"}:n];function tgt(t){return t.map(e=>{let n={componentPath:e.componentPath};return e.tokens!==0&&(n.expectedTokens=e.tokens,n.actualTokens=e.elidedTokens),e.nodeStatistics.updateDataTimeMs!==void 0&&(n.updateDataTimeMs=e.nodeStatistics.updateDataTimeMs),e.source&&(n.source=e.source),n})}s(tgt,"computeComponentStatistics");function hP(t){return t.replace(/\r\n?/g,`
`)}s(hP,"normalizeLineEndings");f();var LU=s((t,e)=>{let[n,r]=e.useState();if(e.useData(bd,i=>{i.document.uri!==n?.uri&&r(i.document)}),n){let i=t.ctx.get(Nn),o=i.getRelativePath(n),a={uri:n.uri,source:n.getText(),relativePath:o,languageId:n.detectedLanguageId},l=i.findNotebook(n);return a.relativePath&&!l?Pn(ngt,{docInfo:a}):Pn(rgt,{docInfo:a})}},"DocumentMarker"),ngt=s(t=>Pn(ca,{children:wRe(t.docInfo)}),"PathMarker"),rgt=s(t=>Pn(ca,{children:TRe(t.docInfo)}),"LanguageMarker");f();f();f();f();function gP(t,e="Unreachable"){throw new Error(e)}s(gP,"assertNever");function Ol(t,e="unexpected state"){if(!t)throw new dr(`Assertion Failed: ${e}`)}s(Ol,"assert");function Nu(t){if(!t()){debugger;t(),i5(new dr("Assertion Failed"))}}s(Nu,"assertFn");function yv(t,e){let n=0;for(;n<t.length-1;){let r=t[n],i=t[n+1];if(!e(r,i))return!1;n++}return!0}s(yv,"checkAdjacentItems");f();f();f();f();f();var H1=s((t,e)=>t===e,"strictEquals");f();f();var Cs=class t{static{s(this,"Node")}static{this.Undefined=new t(void 0)}constructor(e){this.element=e,this.next=t.Undefined,this.prev=t.Undefined}},AP=class{constructor(){this._first=Cs.Undefined;this._last=Cs.Undefined;this._size=0}static{s(this,"LinkedList")}get size(){return this._size}isEmpty(){return this._first===Cs.Undefined}clear(){let e=this._first;for(;e!==Cs.Undefined;){let n=e.next;e.prev=Cs.Undefined,e.next=Cs.Undefined,e=n}this._first=Cs.Undefined,this._last=Cs.Undefined,this._size=0}unshift(e){return this._insert(e,!1)}push(e){return this._insert(e,!0)}_insert(e,n){let r=new Cs(e);if(this._first===Cs.Undefined)this._first=r,this._last=r;else if(n){let o=this._last;this._last=r,r.prev=o,o.next=r}else{let o=this._first;this._first=r,r.next=o,o.prev=r}this._size+=1;let i=!1;return()=>{i||(i=!0,this._remove(r))}}shift(){if(this._first!==Cs.Undefined){let e=this._first.element;return this._remove(this._first),e}}pop(){if(this._last!==Cs.Undefined){let e=this._last.element;return this._remove(this._last),e}}_remove(e){if(e.prev!==Cs.Undefined&&e.next!==Cs.Undefined){let n=e.prev;n.next=e.next,e.next.prev=n}else e.prev===Cs.Undefined&&e.next===Cs.Undefined?(this._first=Cs.Undefined,this._last=Cs.Undefined):e.next===Cs.Undefined?(this._last=this._last.prev,this._last.next=Cs.Undefined):e.prev===Cs.Undefined&&(this._first=this._first.next,this._first.prev=Cs.Undefined);this._size-=1}*[Symbol.iterator](){let e=this._first;for(;e!==Cs.Undefined;)yield e.element,e=e.next}};f();var igt=globalThis.performance&&typeof globalThis.performance.now=="function",_5=class t{static{s(this,"StopWatch")}static create(e){return new t(e)}constructor(e){this._now=igt&&e===!1?Date.now:globalThis.performance.now.bind(globalThis.performance),this._startTime=this._now(),this._stopTime=-1}stop(){this._stopTime=this._now()}reset(){this._startTime=this._now(),this._stopTime=-1}elapsed(){return this._stopTime!==-1?this._stopTime-this._startTime:this._now()-this._startTime}};var SRe=!1,ogt=!1,l2;(ie=>{ie.None=s(()=>jo.None,"None");function e(V){if(ogt){let{onDidAddListener:O}=V,Y=yP.create(),te=0;V.onDidAddListener=()=>{++te===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),Y.print()),O?.()}}}s(e,"_addLeakageTraceLogic");function n(V,O){return h(V,()=>{},0,void 0,!0,void 0,O)}ie.defer=n,s(n,"defer");function r(V){return(O,Y=null,te)=>{let pe=!1,ee;return ee=V(ce=>{if(!pe)return ee?ee.dispose():pe=!0,O.call(Y,ce)},null,te),pe&&ee.dispose(),ee}}ie.once=r,s(r,"once");function i(V,O){return ie.once(ie.filter(V,O))}ie.onceIf=i,s(i,"onceIf");function o(V,O,Y){return p((te,pe=null,ee)=>V(ce=>te.call(pe,O(ce)),null,ee),Y)}ie.map=o,s(o,"map");function a(V,O,Y){return p((te,pe=null,ee)=>V(ce=>{O(ce),te.call(pe,ce)},null,ee),Y)}ie.forEach=a,s(a,"forEach");function l(V,O,Y){return p((te,pe=null,ee)=>V(ce=>O(ce)&&te.call(pe,ce),null,ee),Y)}ie.filter=l,s(l,"filter");function c(V){return V}ie.signal=c,s(c,"signal");function u(...V){return(O,Y=null,te)=>{let pe=bSe(...V.map(ee=>ee(ce=>O.call(Y,ce))));return m(pe,te)}}ie.any=u,s(u,"any");function d(V,O,Y,te){let pe=Y;return o(V,ee=>(pe=O(pe,ee),pe),te)}ie.reduce=d,s(d,"reduce");function p(V,O){let Y,te={onWillAddFirstListener(){Y=V(pe.fire,pe)},onDidRemoveLastListener(){Y?.dispose()}};O||e(te);let pe=new S0(te);return O?.add(pe),pe.event}s(p,"snapshot");function m(V,O){return O instanceof Array?O.push(V):O&&O.add(V),V}s(m,"addAndReturnDisposable");function h(V,O,Y=100,te=!1,pe=!1,ee,ce){let me,Ne,Se,Je=0,Me,ft={leakWarningThreshold:ee,onWillAddFirstListener(){me=V(yt=>{Je++,Ne=O(Ne,yt),te&&!Se&&(It.fire(Ne),Ne=void 0),Me=s(()=>{let vt=Ne;Ne=void 0,Se=void 0,(!te||Je>1)&&It.fire(vt),Je=0},"doFire"),typeof Y=="number"?(clearTimeout(Se),Se=setTimeout(Me,Y)):Se===void 0&&(Se=0,queueMicrotask(Me))})},onWillRemoveListener(){pe&&Je>0&&Me?.()},onDidRemoveLastListener(){Me=void 0,me.dispose()}};ce||e(ft);let It=new S0(ft);return ce?.add(It),It.event}ie.debounce=h,s(h,"debounce");function g(V,O=0,Y){return ie.debounce(V,(te,pe)=>te?(te.push(pe),te):[pe],O,void 0,!0,void 0,Y)}ie.accumulate=g,s(g,"accumulate");function y(V,O=(te,pe)=>te===pe,Y){let te=!0,pe;return l(V,ee=>{let ce=te||!O(ee,pe);return te=!1,pe=ee,ce},Y)}ie.latch=y,s(y,"latch");function v(V,O,Y){return[ie.filter(V,O,Y),ie.filter(V,te=>!O(te),Y)]}ie.split=v,s(v,"split");function b(V,O=!1,Y=[],te){let pe=Y.slice(),ee=V(Ne=>{pe?pe.push(Ne):me.fire(Ne)});te&&te.add(ee);let ce=s(()=>{pe?.forEach(Ne=>me.fire(Ne)),pe=null},"flush"),me=new S0({onWillAddFirstListener(){ee||(ee=V(Ne=>me.fire(Ne)),te&&te.add(ee))},onDidAddFirstListener(){pe&&(O?setTimeout(ce):ce())},onDidRemoveLastListener(){ee&&ee.dispose(),ee=null}});return te&&te.add(me),me.event}ie.buffer=b,s(b,"buffer");function E(V,O){return s((te,pe,ee)=>{let ce=O(new k);return V(function(me){let Ne=ce.evaluate(me);Ne!==_&&te.call(pe,Ne)},void 0,ee)},"fn")}ie.chain=E,s(E,"chain");let _=Symbol("HaltChainable");class k{constructor(){this.steps=[]}static{s(this,"ChainableSynthesis")}map(O){return this.steps.push(O),this}forEach(O){return this.steps.push(Y=>(O(Y),Y)),this}filter(O){return this.steps.push(Y=>O(Y)?Y:_),this}reduce(O,Y){let te=Y;return this.steps.push(pe=>(te=O(te,pe),te)),this}latch(O=(Y,te)=>Y===te){let Y=!0,te;return this.steps.push(pe=>{let ee=Y||!O(pe,te);return Y=!1,te=pe,ee?pe:_}),this}evaluate(O){for(let Y of this.steps)if(O=Y(O),O===_)break;return O}}function P(V,O,Y=te=>te){let te=s((...me)=>ce.fire(Y(...me)),"fn"),pe=s(()=>V.on(O,te),"onFirstListenerAdd"),ee=s(()=>V.removeListener(O,te),"onLastListenerRemove"),ce=new S0({onWillAddFirstListener:pe,onDidRemoveLastListener:ee});return ce.event}ie.fromNodeEventEmitter=P,s(P,"fromNodeEventEmitter");function N(V,O,Y=te=>te){let te=s((...me)=>ce.fire(Y(...me)),"fn"),pe=s(()=>V.addEventListener(O,te),"onFirstListenerAdd"),ee=s(()=>V.removeEventListener(O,te),"onLastListenerRemove"),ce=new S0({onWillAddFirstListener:pe,onDidRemoveLastListener:ee});return ce.event}ie.fromDOMEventEmitter=N,s(N,"fromDOMEventEmitter");function U(V,O){return new Promise(Y=>r(V)(Y,null,O))}ie.toPromise=U,s(U,"toPromise");function ne(V){let O=new S0;return V.then(Y=>{O.fire(Y)},()=>{O.fire(void 0)}).finally(()=>{O.dispose()}),O.event}ie.fromPromise=ne,s(ne,"fromPromise");function he(V,O){return V(Y=>O.fire(Y))}ie.forward=he,s(he,"forward");function ae(V,O,Y){return O(Y),V(te=>O(te))}ie.runAndSubscribe=ae,s(ae,"runAndSubscribe");class G{constructor(O,Y){this._observable=O;this._counter=0;this._hasChanged=!1;let te={onWillAddFirstListener:s(()=>{O.addObserver(this),this._observable.reportChanges()},"onWillAddFirstListener"),onDidRemoveLastListener:s(()=>{O.removeObserver(this)},"onDidRemoveLastListener")};Y||e(te),this.emitter=new S0(te),Y&&Y.add(this.emitter)}static{s(this,"EmitterObserver")}beginUpdate(O){this._counter++}handlePossibleChange(O){}handleChange(O,Y){this._hasChanged=!0}endUpdate(O){this._counter--,this._counter===0&&(this._observable.reportChanges(),this._hasChanged&&(this._hasChanged=!1,this.emitter.fire(this._observable.get())))}}function W(V,O){return new G(V,O).emitter.event}ie.fromObservable=W,s(W,"fromObservable");function ue(V){return(O,Y,te)=>{let pe=0,ee=!1,ce={beginUpdate(){pe++},endUpdate(){pe--,pe===0&&(V.reportChanges(),ee&&(ee=!1,O.call(Y)))},handlePossibleChange(){},handleChange(){ee=!0}};V.addObserver(ce),V.reportChanges();let me={dispose(){V.removeObserver(ce)}};return te instanceof Bu?te.add(me):Array.isArray(te)&&te.push(me),me}}ie.fromObservableLight=ue,s(ue,"fromObservableLight")})(l2||={});var Lie=class t{constructor(e){this.listenerCount=0;this.invocationCount=0;this.elapsedOverall=0;this.durations=[];this.name=`${e}_${t._idPool++}`,t.all.add(this)}static{s(this,"EventProfiling")}static{this.all=new Set}static{this._idPool=0}start(e){this._stopWatch=new _5,this.listenerCount=e}stop(){if(this._stopWatch){let e=this._stopWatch.elapsed();this.durations.push(e),this.elapsedOverall+=e,this.invocationCount+=1,this._stopWatch=void 0}}},RRe=-1;var Fie=class t{constructor(e,n,r=(t._idPool++).toString(16).padStart(3,"0")){this._errorHandler=e;this.threshold=n;this.name=r;this._warnCountdown=0}static{s(this,"LeakageMonitor")}static{this._idPool=1}dispose(){this._stacks?.clear()}check(e,n){let r=this.threshold;if(r<=0||n<r)return;this._stacks||(this._stacks=new Map);let i=this._stacks.get(e.value)||0;if(this._stacks.set(e.value,i+1),this._warnCountdown-=1,this._warnCountdown<=0){this._warnCountdown=r*.5;let[o,a]=this.getMostFrequentStack(),l=`[${this.name}] potential listener LEAK detected, having ${n} listeners already. MOST frequent listener (${a}):`;console.warn(l),console.warn(o);let c=new Mie(l,o);this._errorHandler(c)}return()=>{let o=this._stacks.get(e.value)||0;this._stacks.set(e.value,o-1)}}getMostFrequentStack(){if(!this._stacks)return;let e,n=0;for(let[r,i]of this._stacks)(!e||n<i)&&(e=[r,i],n=i);return e}},yP=class t{constructor(e){this.value=e}static{s(this,"Stacktrace")}static create(){let e=new Error;return new t(e.stack??"")}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},Mie=class extends Error{static{s(this,"ListenerLeakError")}constructor(e,n){super(e),this.name="ListenerLeakError",this.stack=n}},Qie=class extends Error{static{s(this,"ListenerRefusalError")}constructor(e,n){super(e),this.name="ListenerRefusalError",this.stack=n}},sgt=0,S5=class{constructor(e){this.value=e;this.id=sgt++}static{s(this,"UniqueContainer")}},agt=2,lgt=s((t,e)=>{if(t instanceof S5)e(t);else for(let n=0;n<t.length;n++){let r=t[n];r&&e(r)}},"forEachListener"),S0=class{constructor(e){this._size=0;this._options=e,this._leakageMon=RRe>0||this._options?.leakWarningThreshold?new Fie(e?.onListenerError??i5,this._options?.leakWarningThreshold??RRe):void 0,this._perfMon=this._options?._profName?new Lie(this._options._profName):void 0,this._deliveryQueue=this._options?.deliveryQueue}static{s(this,"Emitter")}dispose(){if(!this._disposed){if(this._disposed=!0,this._deliveryQueue?.current===this&&this._deliveryQueue.reset(),this._listeners){if(SRe){let e=this._listeners;queueMicrotask(()=>{lgt(e,n=>n.stack?.print())})}this._listeners=void 0,this._size=0}this._options?.onDidRemoveLastListener?.(),this._leakageMon?.dispose()}}get event(){return this._event??=(e,n,r)=>{if(this._leakageMon&&this._size>this._leakageMon.threshold**2){let c=`[${this._leakageMon.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this._size} vs ${this._leakageMon.threshold})`;console.warn(c);let u=this._leakageMon.getMostFrequentStack()??["UNKNOWN stack",-1],d=new Qie(`${c}. HINT: Stack shows most frequent listener (${u[1]}-times)`,u[0]);return(this._options?.onListenerError||i5)(d),jo.None}if(this._disposed)return jo.None;n&&(e=e.bind(n));let i=new S5(e),o,a;this._leakageMon&&this._size>=Math.ceil(this._leakageMon.threshold*.2)&&(i.stack=yP.create(),o=this._leakageMon.check(i.stack,this._size+1)),SRe&&(i.stack=a??yP.create()),this._listeners?this._listeners instanceof S5?(this._deliveryQueue??=new Oie,this._listeners=[this._listeners,i]):this._listeners.push(i):(this._options?.onWillAddFirstListener?.(this),this._listeners=i,this._options?.onDidAddFirstListener?.(this)),this._options?.onDidAddListener?.(this),this._size++;let l=Ra(()=>{o?.(),this._removeListener(i)});return r instanceof Bu?r.add(l):Array.isArray(r)&&r.push(l),l},this._event}_removeListener(e){if(this._options?.onWillRemoveListener?.(this),!this._listeners)return;if(this._size===1){this._listeners=void 0,this._options?.onDidRemoveLastListener?.(this),this._size=0;return}let n=this._listeners,r=n.indexOf(e);if(r===-1)throw console.log("disposed?",this._disposed),console.log("size?",this._size),console.log("arr?",JSON.stringify(this._listeners)),new Error("Attempted to dispose unknown listener");this._size--,n[r]=void 0;let i=this._deliveryQueue.current===this;if(this._size*agt<=n.length){let o=0;for(let a=0;a<n.length;a++)n[a]?n[o++]=n[a]:i&&o<this._deliveryQueue.end&&(this._deliveryQueue.end--,o<this._deliveryQueue.i&&this._deliveryQueue.i--);n.length=o}}_deliver(e,n){if(!e)return;let r=this._options?.onListenerError||i5;if(!r){e.value(n);return}try{e.value(n)}catch(i){r(i)}}_deliverQueue(e){let n=e.current._listeners;for(;e.i<e.end;)this._deliver(n[e.i++],e.value);e.reset()}fire(e){if(this._deliveryQueue?.current&&(this._deliverQueue(this._deliveryQueue),this._perfMon?.stop()),this._perfMon?.start(this._size),this._listeners)if(this._listeners instanceof S5)this._deliver(this._listeners,e);else{let n=this._deliveryQueue;n.enqueue(this,e,this._listeners.length),this._deliverQueue(n)}this._perfMon?.stop()}hasListeners(){return this._size>0}};var Oie=class{constructor(){this.i=-1;this.end=0}static{s(this,"EventDeliveryQueuePrivate")}enqueue(e,n,r){this.i=0,this.end=r,this.current=e,this.value=n}reset(){this.i=this.end,this.current=void 0,this.value=void 0}};f();var Lu=class{constructor(e,n,r){this.owner=e;this.debugNameSource=n;this.referenceFn=r}static{s(this,"DebugNameData")}getDebugName(e){return DRe(e,this)}},kRe=new Map,Uie=new WeakMap;function DRe(t,e){let n=Uie.get(t);if(n)return n;let r=cgt(t,e);if(r){let i=kRe.get(r)??0;i++,kRe.set(r,i);let o=i===1?r:`${r}#${i}`;return Uie.set(t,o),o}}s(DRe,"getDebugName");function cgt(t,e){let n=Uie.get(t);if(n)return n;let r=e.owner?dgt(e.owner)+".":"",i,o=e.debugNameSource;if(o!==void 0)if(typeof o=="function"){if(i=o(),i!==void 0)return r+i}else return r+o;let a=e.referenceFn;if(a!==void 0&&(i=FU(a),i!==void 0))return r+i;if(e.owner!==void 0){let l=ugt(e.owner,t);if(l!==void 0)return r+l}}s(cgt,"computeDebugName");function ugt(t,e){for(let n in t)if(t[n]===e)return n}s(ugt,"findKey");var BRe=new Map,PRe=new WeakMap;function dgt(t){let e=PRe.get(t);if(e)return e;let n=fgt(t),r=BRe.get(n)??0;r++,BRe.set(n,r);let i=r===1?n:`${n}#${r}`;return PRe.set(t,i),i}s(dgt,"formatOwner");function fgt(t){let e=t.constructor;return e?e.name:"Object"}s(fgt,"getClassName");function FU(t){let e=t.toString(),r=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(e);return(r?r[1]:void 0)?.trim()}s(FU,"getFunctionName");f();var c2;function QU(t){c2?c2 instanceof MU?c2.loggers.push(t):c2=new MU([c2,t]):c2=t}s(QU,"addLogger");function Ms(){return c2}s(Ms,"getLogger");var qie;function NRe(t){qie=t}s(NRe,"setLogObservableFn");function LRe(t){qie&&qie(t)}s(LRe,"logObservable");var MU=class{constructor(e){this.loggers=e}static{s(this,"ComposedLogger")}handleObservableCreated(e){for(let n of this.loggers)n.handleObservableCreated(e)}handleOnListenerCountChanged(e,n){for(let r of this.loggers)r.handleOnListenerCountChanged(e,n)}handleObservableUpdated(e,n){for(let r of this.loggers)r.handleObservableUpdated(e,n)}handleAutorunCreated(e){for(let n of this.loggers)n.handleAutorunCreated(e)}handleAutorunDisposed(e){for(let n of this.loggers)n.handleAutorunDisposed(e)}handleAutorunDependencyChanged(e,n,r){for(let i of this.loggers)i.handleAutorunDependencyChanged(e,n,r)}handleAutorunStarted(e){for(let n of this.loggers)n.handleAutorunStarted(e)}handleAutorunFinished(e){for(let n of this.loggers)n.handleAutorunFinished(e)}handleDerivedDependencyChanged(e,n,r){for(let i of this.loggers)i.handleDerivedDependencyChanged(e,n,r)}handleDerivedCleared(e){for(let n of this.loggers)n.handleDerivedCleared(e)}handleBeginTransaction(e){for(let n of this.loggers)n.handleBeginTransaction(e)}handleEndTransaction(e){for(let n of this.loggers)n.handleEndTransaction(e)}};var FRe;function MRe(t){FRe=t}s(MRe,"_setRecomputeInitiallyAndOnChange");var QRe;function ORe(t){QRe=t}s(ORe,"_setKeepObserved");var Wie;function URe(t){Wie=t}s(URe,"_setDerivedOpts");var OU=class{static{s(this,"ConvenientObservable")}get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,n){let r=n===void 0?void 0:e,i=n===void 0?e:n;return Wie({owner:r,debugName:s(()=>{let o=FU(i);if(o!==void 0)return o;let l=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(i.toString());if(l)return`${this.debugName}.${l[2]}`;if(!r)return`${this.debugName} (mapped)`},"debugName"),debugReferenceFn:i},o=>i(this.read(o),o))}flatten(){return Wie({owner:void 0,debugName:s(()=>`${this.debugName} (flattened)`,"debugName")},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,n){return e.add(FRe(this,n)),this}keepObserved(e){return e.add(QRe(this)),this}get debugValue(){return this.get()}},Cv=class extends OU{constructor(){super();this.observers=new Set;Ms()?.handleObservableCreated(this)}static{s(this,"BaseObservable")}addObserver(n){let r=this.observers.size;this.observers.add(n),r===0&&this.onFirstObserverAdded(),r!==this.observers.size&&Ms()?.handleOnListenerCountChanged(this,this.observers.size)}removeObserver(n){let r=this.observers.delete(n);r&&this.observers.size===0&&this.onLastObserverRemoved(),r&&Ms()?.handleOnListenerCountChanged(this,this.observers.size)}onFirstObserverAdded(){}onLastObserverRemoved(){}log(){let n=!!Ms();return LRe(this),n||Ms()?.handleObservableCreated(this),this}};function qU(t,e){let n=new R5(t,e);try{t(n)}finally{n.finish()}}s(qU,"transaction");function Hie(t,e,n){t?e(t):qU(e,n)}s(Hie,"subtransaction");var R5=class{constructor(e,n){this._fn=e;this._getDebugName=n;this.updatingObservers=[];Ms()?.handleBeginTransaction(this)}static{s(this,"TransactionImpl")}getDebugName(){return this._getDebugName?this._getDebugName():FU(this._fn)}updateObserver(e,n){this.updatingObservers.push({observer:e,observable:n}),e.beginUpdate(n)}finish(){let e=this.updatingObservers;for(let n=0;n<e.length;n++){let{observer:r,observable:i}=e[n];r.endUpdate(i)}this.updatingObservers=null,Ms()?.handleEndTransaction(this)}};function Nm(t,e){let n;return typeof t=="string"?n=new Lu(void 0,t,void 0):n=new Lu(t,void 0,void 0),new UU(n,e,H1)}s(Nm,"observableValue");var UU=class extends Cv{constructor(n,r,i){super();this._debugNameData=n;this._equalityComparator=i;this._value=r,Ms()?.handleObservableUpdated(this,{hadValue:!1,newValue:r,change:void 0,didChange:!0,oldValue:void 0})}static{s(this,"ObservableValue")}get debugName(){return this._debugNameData.getDebugName(this)??"ObservableValue"}get(){return this._value}set(n,r,i){if(i===void 0&&this._equalityComparator(this._value,n))return;let o;r||(r=o=new R5(()=>{},()=>`Setting ${this.debugName}`));try{let a=this._value;this._setValue(n),Ms()?.handleObservableUpdated(this,{oldValue:a,newValue:n,change:i,didChange:!0,hadValue:!0});for(let l of this.observers)r.updateObserver(l,this),l.handleChange(this,i)}finally{o&&o.finish()}}toString(){return`${this.debugName}: ${this._value}`}_setValue(n){this._value=n}};f();f();function u2(t){return new k5(new Lu(void 0,void 0,t),t,void 0,void 0)}s(u2,"autorun");function Gie(t,e){return new k5(new Lu(t.owner,t.debugName,t.debugReferenceFn??e),e,void 0,void 0)}s(Gie,"autorunOpts");function WU(t,e){return new k5(new Lu(t.owner,t.debugName,t.debugReferenceFn??e),e,t.createEmptyChangeSummary,t.handleChange)}s(WU,"autorunHandleChanges");function jie(t,e){let n=new Bu,r=WU({owner:t.owner,debugName:t.debugName,debugReferenceFn:t.debugReferenceFn??e,createEmptyChangeSummary:t.createEmptyChangeSummary,handleChange:t.handleChange},(i,o)=>{n.clear(),e(i,o,n)});return Ra(()=>{r.dispose(),n.dispose()})}s(jie,"autorunWithStoreHandleChanges");function Vie(t){let e=new Bu,n=Gie({owner:void 0,debugName:void 0,debugReferenceFn:t},r=>{e.clear(),t(r,e)});return Ra(()=>{n.dispose(),e.dispose()})}s(Vie,"autorunWithStore");var k5=class{constructor(e,n,r,i){this._debugNameData=e;this._runFn=n;this.createChangeSummary=r;this._handleChange=i;this.state=2;this.updateCount=0;this.disposed=!1;this.dependencies=new Set;this.dependenciesToBeRemoved=new Set;this._isRunning=!1;this.changeSummary=this.createChangeSummary?.(),Ms()?.handleAutorunCreated(this),this._runIfNeeded(),l5(this)}static{s(this,"AutorunObserver")}get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}dispose(){this.disposed=!0;for(let e of this.dependencies)e.removeObserver(this);this.dependencies.clear(),Ms()?.handleAutorunDisposed(this),c5(this)}_runIfNeeded(){if(this.state===3)return;let e=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=e,this.state=3;try{if(!this.disposed){Ms()?.handleAutorunStarted(this);let n=this.changeSummary;try{this.changeSummary=this.createChangeSummary?.(),this._isRunning=!0,this._runFn(this,n)}catch(r){t2(r)}finally{this._isRunning=!1}}}finally{this.disposed||Ms()?.handleAutorunFinished(this);for(let n of this.dependenciesToBeRemoved)n.removeObserver(this);this.dependenciesToBeRemoved.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(e){this.state===3&&(this.state=1),this.updateCount++}endUpdate(e){try{if(this.updateCount===1)do{if(this.state===1){this.state=3;for(let n of this.dependencies)if(n.reportChanges(),this.state===2)break}this._runIfNeeded()}while(this.state!==3)}finally{this.updateCount--}Nu(()=>this.updateCount>=0)}handlePossibleChange(e){this.state===3&&this._isDependency(e)&&(this.state=1)}handleChange(e,n){if(this._isDependency(e)){Ms()?.handleAutorunDependencyChanged(this,e,n);try{(this._handleChange?this._handleChange({changedObservable:e,change:n,didChange:s(i=>i===e,"didChange")},this.changeSummary):!0)&&(this.state=2)}catch(r){t2(r)}}}_isDependency(e){return this.dependencies.has(e)&&!this.dependenciesToBeRemoved.has(e)}readObservable(e){if(!this._isRunning)throw new dr("The reader object cannot be used outside its compute function!");if(this.disposed)return e.get();e.addObserver(this);let n=e.get();return this.dependencies.add(e),this.dependenciesToBeRemoved.delete(e),n}};(e=>e.Observer=k5)(u2||={});f();function HU(t,e){return new d2(new Lu(t.owner,t.debugName,t.debugReferenceFn),e,void 0,void 0,t.onLastObserverRemoved,t.equalsFn??H1)}s(HU,"derivedOpts");URe(HU);var d2=class extends Cv{constructor(n,r,i,o,a=void 0,l){super();this._debugNameData=n;this._computeFn=r;this.createChangeSummary=i;this._handleChange=o;this._handleLastObserverRemoved=a;this._equalityComparator=l;this.state=0;this.value=void 0;this.updateCount=0;this.dependencies=new Set;this.dependenciesToBeRemoved=new Set;this.changeSummary=void 0;this._isUpdating=!1;this._isComputing=!1;this._removedObserverToCallEndUpdateOn=null;this._isReaderValid=!1;this.changeSummary=this.createChangeSummary?.()}static{s(this,"Derived")}get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}onLastObserverRemoved(){this.state=0,this.value=void 0,Ms()?.handleDerivedCleared(this);for(let n of this.dependencies)n.removeObserver(this);this.dependencies.clear(),this._handleLastObserverRemoved?.()}get(){if(this._isComputing,this.observers.size===0){let r;try{this._isReaderValid=!0,r=this._computeFn(this,this.createChangeSummary?.())}finally{this._isReaderValid=!1}return this.onLastObserverRemoved(),r}else{do{if(this.state===1){for(let r of this.dependencies)if(r.reportChanges(),this.state===2)break}this.state===1&&(this.state=3),this._recomputeIfNeeded()}while(this.state!==3);return this.value}}_recomputeIfNeeded(){if(this.state===3)return;let n=this.dependenciesToBeRemoved;this.dependenciesToBeRemoved=this.dependencies,this.dependencies=n;let r=this.state!==0,i=this.value;this.state=3;let o=!1;this._isComputing=!0;try{let a=this.changeSummary;this.changeSummary=this.createChangeSummary?.();try{this._isReaderValid=!0,this.value=this._computeFn(this,a)}finally{this._isReaderValid=!1;for(let l of this.dependenciesToBeRemoved)l.removeObserver(this);this.dependenciesToBeRemoved.clear()}o=r&&!this._equalityComparator(i,this.value),Ms()?.handleObservableUpdated(this,{oldValue:i,newValue:this.value,change:void 0,didChange:o,hadValue:r})}catch(a){t2(a)}if(this._isComputing=!1,o)for(let a of this.observers)a.handleChange(this,void 0)}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(n){if(this._isUpdating)throw new dr("Cyclic deriveds are not supported yet!");this.updateCount++,this._isUpdating=!0;try{let r=this.updateCount===1;if(this.state===3&&(this.state=1,!r))for(let i of this.observers)i.handlePossibleChange(this);if(r)for(let i of this.observers)i.beginUpdate(this)}finally{this._isUpdating=!1}}endUpdate(n){if(this.updateCount--,this.updateCount===0){let r=[...this.observers];for(let i of r)i.endUpdate(this);if(this._removedObserverToCallEndUpdateOn){let i=[...this._removedObserverToCallEndUpdateOn];this._removedObserverToCallEndUpdateOn=null;for(let o of i)o.endUpdate(this)}}Nu(()=>this.updateCount>=0)}handlePossibleChange(n){if(this.state===3&&this.dependencies.has(n)&&!this.dependenciesToBeRemoved.has(n)){this.state=1;for(let r of this.observers)r.handlePossibleChange(this)}}handleChange(n,r){if(this.dependencies.has(n)&&!this.dependenciesToBeRemoved.has(n)){Ms()?.handleDerivedDependencyChanged(this,n,r);let i=!1;try{i=this._handleChange?this._handleChange({changedObservable:n,change:r,didChange:s(a=>a===n,"didChange")},this.changeSummary):!0}catch(a){t2(a)}let o=this.state===3;if(i&&(this.state===1||o)&&(this.state=2,o))for(let a of this.observers)a.handlePossibleChange(this)}}readObservable(n){if(!this._isReaderValid)throw new dr("The reader object cannot be used outside its compute function!");n.addObserver(this);let r=n.get();return this.dependencies.add(n),this.dependenciesToBeRemoved.delete(n),r}addObserver(n){let r=!this.observers.has(n)&&this.updateCount>0;super.addObserver(n),r&&(this._removedObserverToCallEndUpdateOn&&this._removedObserverToCallEndUpdateOn.has(n)?this._removedObserverToCallEndUpdateOn.delete(n):n.beginUpdate(this))}removeObserver(n){this.observers.has(n)&&this.updateCount>0&&(this._removedObserverToCallEndUpdateOn||(this._removedObserverToCallEndUpdateOn=new Set),this._removedObserverToCallEndUpdateOn.add(n)),super.removeObserver(n)}};f();f();function $ie(...t){let e,n,r;return t.length===3?[e,n,r]=t:[n,r]=t,new xv(new Lu(e,void 0,r),n,r,()=>xv.globalTransaction,H1)}s($ie,"observableFromEvent");var xv=class extends Cv{constructor(n,r,i,o,a){super();this._debugNameData=n;this.event=r;this._getValue=i;this._getTransaction=o;this._equalityComparator=a;this.hasValue=!1;this.handleEvent=s(n=>{let r=this._getValue(n),i=this.value,o=!this.hasValue||!this._equalityComparator(i,r),a=!1;o&&(this.value=r,this.hasValue&&(a=!0,Hie(this._getTransaction(),l=>{Ms()?.handleObservableUpdated(this,{oldValue:i,newValue:r,change:void 0,didChange:o,hadValue:this.hasValue});for(let c of this.observers)l.updateObserver(c,this),c.handleChange(this,void 0)},()=>{let l=this.getDebugName();return"Event fired"+(l?`: ${l}`:"")})),this.hasValue=!0),a||Ms()?.handleObservableUpdated(this,{oldValue:i,newValue:r,change:void 0,didChange:o,hadValue:this.hasValue})},"handleEvent")}static{s(this,"FromEventObservable")}getDebugName(){return this._debugNameData.getDebugName(this)}get debugName(){let n=this.getDebugName();return"From Event"+(n?`: ${n}`:"")}onFirstObserverAdded(){this.subscription=this.event(this.handleEvent)}onLastObserverRemoved(){this.subscription.dispose(),this.subscription=void 0,this.hasValue=!1,this.value=void 0}get(){return this.subscription?(this.hasValue||this.handleEvent(void 0),this.value):this._getValue(void 0)}};(n=>{n.Observer=xv;function e(r,i){let o=!1;xv.globalTransaction===void 0&&(xv.globalTransaction=r,o=!0);try{i()}finally{o&&(xv.globalTransaction=void 0)}}n.batchEventsGlobally=e,s(e,"batchEventsGlobally")})($ie||={});function WRe(t){let e=new GU(!1,void 0);return t.addObserver(e),Ra(()=>{t.removeObserver(e)})}s(WRe,"keepObserved");ORe(WRe);function HRe(t,e){let n=new GU(!0,e);return t.addObserver(n),e?e(t.get()):t.reportChanges(),Ra(()=>{t.removeObserver(n)})}s(HRe,"recomputeInitiallyAndOnChange");MRe(HRe);var GU=class{constructor(e,n){this._forceRecompute=e;this._handleValue=n;this._counter=0}static{s(this,"KeepAliveObserver")}beginUpdate(e){this._counter++}endUpdate(e){this._counter--,this._counter===0&&this._forceRecompute&&(this._handleValue?this._handleValue(e.get()):e.reportChanges())}handlePossibleChange(e){}handleChange(e,n){}};function Zf(t,e,n,r){let i=new jU(n,r);return HU({debugReferenceFn:n,owner:t,onLastObserverRemoved:s(()=>{i.dispose(),i=new jU(n)},"onLastObserverRemoved")},a=>(i.setItems(e.read(a)),i.getItems()))}s(Zf,"mapObservableArrayCached");var jU=class{constructor(e,n){this._map=e;this._keySelector=n;this._cache=new Map;this._items=[]}static{s(this,"ArrayMap")}dispose(){this._cache.forEach(e=>e.store.dispose()),this._cache.clear()}setItems(e){let n=[],r=new Set(this._cache.keys());for(let i of e){let o=this._keySelector?this._keySelector(i):i,a=this._cache.get(o);if(a)r.delete(o);else{let l=new Bu;a={out:this._map(i,l),store:l},this._cache.set(o,a)}n.push(a.out)}for(let i of r)this._cache.get(i).store.dispose(),this._cache.delete(i);this._items=n}getItems(){return this._items}};function zie(t,e){let n;return jie({createEmptyChangeSummary:s(()=>({deltas:[],didChange:!1}),"createEmptyChangeSummary"),handleChange:s((r,i)=>{if(r.didChange(t)){let o=r.change;o!==void 0&&i.deltas.push(o),i.didChange=!0}return!0},"handleChange")},(r,i)=>{let o=t.read(r),a=n;i.didChange&&(n=o,e(o,a,i.deltas))})}s(zie,"runOnChange");f();f();f();var GRe=Object.freeze(function(t,e){let n=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(n)}}}),VU;(r=>{function t(i){return i===r.None||i===r.Cancelled||i instanceof B5?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}r.isCancellationToken=t,s(t,"isCancellationToken"),r.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:l2.None}),r.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:GRe})})(VU||={});var B5=class{constructor(){this._isCancelled=!1;this._emitter=null}static{s(this,"MutableToken")}cancel(){this._isCancelled||(this._isCancelled=!0,this._emitter&&(this._emitter.fire(void 0),this.dispose()))}get isCancellationRequested(){return this._isCancelled}get onCancellationRequested(){return this._isCancelled?GRe:(this._emitter||(this._emitter=new S0),this._emitter.event)}dispose(){this._emitter&&(this._emitter.dispose(),this._emitter=null)}},G1=class{constructor(e){this._token=void 0;this._parentListener=void 0;this._parentListener=e&&e.onCancellationRequested(this.cancel,this)}static{s(this,"CancellationTokenSource")}get token(){return this._token||(this._token=new B5),this._token}cancel(){this._token?this._token instanceof B5&&this._token.cancel():this._token=VU.Cancelled}dispose(e=!1){e&&this.cancel(),this._parentListener?.dispose(),this._token?this._token instanceof B5&&this._token.dispose():this._token=VU.None}};f();var $U;function jRe(t){$U||($U=new xP,QU($U)),$U.addFilteredObj(t)}s(jRe,"logObservableToConsole");var xP=class{constructor(){this.indentation=0;this.changedObservablesSets=new WeakMap}static{s(this,"ConsoleObservableLogger")}addFilteredObj(e){this._filteredObjects||(this._filteredObjects=new Set),this._filteredObjects.add(e)}_isIncluded(e){return this._filteredObjects?.has(e)??!0}textToConsoleArgs(e){return pgt([P5(ggt("|  ",this.indentation)),e])}formatInfo(e){return e.hadValue?e.didChange?[P5(" "),ep(CP(e.oldValue,70),{color:"red",strikeThrough:!0}),P5(" "),ep(CP(e.newValue,60),{color:"green"})]:[P5(" (unchanged)")]:[P5(" "),ep(CP(e.newValue,60),{color:"green"}),P5(" (initial)")]}handleObservableCreated(e){if(e instanceof d2){let n=e;if(this.changedObservablesSets.set(n,new Set),!1){let i=[];n.__debugUpdating=i;let o=n.beginUpdate;n.beginUpdate=l=>(i.push(l),o.apply(n,[l]));let a=n.endUpdate;n.endUpdate=l=>{let c=i.indexOf(l);return c===-1&&console.error("endUpdate called without beginUpdate",n.debugName,l.debugName),i.splice(c,1),a.apply(n,[l])}}}}handleOnListenerCountChanged(e,n){}handleObservableUpdated(e,n){if(this._isIncluded(e)){if(e instanceof d2){this._handleDerivedRecomputed(e,n);return}console.log(...this.textToConsoleArgs([D5("observable value changed"),ep(e.debugName,{color:"BlueViolet"}),...this.formatInfo(n)]))}}formatChanges(e){if(e.size!==0)return ep(" (changed deps: "+[...e].map(n=>n.debugName).join(", ")+")",{color:"gray"})}handleDerivedDependencyChanged(e,n,r){this._isIncluded(e)&&this.changedObservablesSets.get(e)?.add(n)}_handleDerivedRecomputed(e,n){if(!this._isIncluded(e))return;let r=this.changedObservablesSets.get(e);r&&(console.log(...this.textToConsoleArgs([D5("derived recomputed"),ep(e.debugName,{color:"BlueViolet"}),...this.formatInfo(n),this.formatChanges(r),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),r.clear())}handleDerivedCleared(e){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([D5("derived cleared"),ep(e.debugName,{color:"BlueViolet"})]))}handleFromEventObservableTriggered(e,n){this._isIncluded(e)&&console.log(...this.textToConsoleArgs([D5("observable from event triggered"),ep(e.debugName,{color:"BlueViolet"}),...this.formatInfo(n),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){this._isIncluded(e)&&this.changedObservablesSets.set(e,new Set)}handleAutorunDisposed(e){}handleAutorunDependencyChanged(e,n,r){this._isIncluded(e)&&this.changedObservablesSets.get(e).add(n)}handleAutorunStarted(e){let n=this.changedObservablesSets.get(e);n&&(this._isIncluded(e)&&console.log(...this.textToConsoleArgs([D5("autorun"),ep(e.debugName,{color:"BlueViolet"}),this.formatChanges(n),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),n.clear(),this.indentation++)}handleAutorunFinished(e){this.indentation--}handleBeginTransaction(e){let n=e.getDebugName();n===void 0&&(n=""),this._isIncluded(e)&&console.log(...this.textToConsoleArgs([D5("transaction"),ep(n,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.indentation++}handleEndTransaction(){this.indentation--}};function pgt(t){let e=new Array,n=[],r="";function i(a){if("length"in a)for(let l of a)l&&i(l);else"text"in a?(r+=`%c${a.text}`,e.push(a.style),a.data&&n.push(...a.data)):"data"in a&&n.push(...a.data)}s(i,"process"),i(t);let o=[r,...e];return o.push(...n),o}s(pgt,"consoleTextToArgs");function P5(t){return ep(t,{color:"black"})}s(P5,"normalText");function D5(t){return ep(Agt(`${t}: `,10),{color:"black",bold:!0})}s(D5,"formatKind");function ep(t,e={color:"black"}){function n(i){return Object.entries(i).reduce((o,[a,l])=>`${o}${a}:${l};`,"")}s(n,"objToCss");let r={color:e.color};return e.strikeThrough&&(r["text-decoration"]="line-through"),e.bold&&(r["font-weight"]="bold"),{text:t,style:n(r)}}s(ep,"styled");function CP(t,e){switch(typeof t){case"number":return""+t;case"string":return t.length+2<=e?`"${t}"`:`"${t.substr(0,e-7)}"+...`;case"boolean":return t?"true":"false";case"undefined":return"undefined";case"object":return t===null?"null":Array.isArray(t)?mgt(t,e):hgt(t,e);case"symbol":return t.toString();case"function":return`[[Function${t.name?" "+t.name:""}]]`;default:return""+t}}s(CP,"formatValue");function mgt(t,e){let n="[ ",r=!0;for(let i of t){if(r||(n+=", "),n.length-5>e){n+="...";break}r=!1,n+=`${CP(i,e-n.length)}`}return n+=" ]",n}s(mgt,"formatArray");function hgt(t,e){if(typeof t.toString=="function"&&t.toString!==Object.prototype.toString){let i=t.toString();return i.length<=e?i:i.substring(0,e-3)+"..."}let n="{ ",r=!0;for(let[i,o]of Object.entries(t)){if(r||(n+=", "),n.length-5>e){n+="...";break}r=!1,n+=`${i}: ${CP(o,e-n.length)}`}return n+=" }",n}s(hgt,"formatObject");function ggt(t,e){let n="";for(let r=1;r<=e;r++)n+=t;return n}s(ggt,"repeat");function Agt(t,e){for(;t.length<e;)t+=" ";return t}s(Agt,"padStr");NRe(jRe);var ygt=!1;ygt&&QU(new xP);f();var f2;(n=>{n.PlainText="plaintext";function e(r){return r}n.create=e,s(e,"create")})(f2||={});f();f();f();function VRe(t){return t}s(VRe,"identity");var zU=class{constructor(e,n){this.lastCache=void 0;this.lastArgKey=void 0;typeof e=="function"?(this._fn=e,this._computeKey=VRe):(this._fn=n,this._computeKey=e.getCacheKey)}static{s(this,"LRUCachedFunction")}get(e){let n=this._computeKey(e);return this.lastArgKey!==n&&(this.lastArgKey=n,this.lastCache=this._fn(e)),this.lastCache}},j1=class{constructor(e,n){this._map=new Map;this._map2=new Map;typeof e=="function"?(this._fn=e,this._computeKey=VRe):(this._fn=n,this._computeKey=e.getCacheKey)}static{s(this,"CachedFunction")}get cachedValues(){return this._map}get(e){let n=this._computeKey(e);if(this._map2.has(n))return this._map2.get(n);let r=this._fn(e);return this._map.set(e,r),this._map2.set(n,r),r}};f();f();var Rg=class{constructor(e){this.executor=e;this._didRun=!1}static{s(this,"Lazy")}get hasValue(){return this._didRun}get value(){if(!this._didRun)try{this._value=this.executor()}catch(e){this._error=e}finally{this._didRun=!0}if(this._error)throw this._error;return this._value}get rawValue(){return this._value}};f();function p2(t){return t<0?0:t>4294967295?4294967295:t|0}s(p2,"toUint32");function Yie(t){return t.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}s(Yie,"escapeRegExpCharacters");function kg(t){return t.split(/\r\n|\r|\n/)}s(kg,"splitLines");function vP(t,e){let n=Math.min(t.length,e.length),r;for(r=0;r<n;r++)if(t.charCodeAt(r)!==e.charCodeAt(r))return r;return n}s(vP,"commonPrefixLength");function L5(t,e){let n=Math.min(t.length,e.length),r,i=t.length-1,o=e.length-1;for(r=0;r<n;r++)if(t.charCodeAt(i-r)!==e.charCodeAt(o-r))return r;return n}s(L5,"commonSuffixLength");var xgt=/^[\t\n\r\x20-\x7E]*$/;function Kie(t){return xgt.test(t)}s(Kie,"isBasicASCII");var DMn=String.fromCharCode(65279);var $Re=class t{static{s(this,"GraphemeBreakTree")}static{this._INSTANCE=null}static getInstance(){return t._INSTANCE||(t._INSTANCE=new t),t._INSTANCE}constructor(){this._data=vgt()}getGraphemeBreakType(e){if(e<32)return e===10?3:e===13?2:4;if(e<127)return 0;let n=this._data,r=n.length/3,i=1;for(;i<=r;)if(e<n[3*i])i=2*i;else if(e>n[3*i+1])i=2*i+1;else return n[3*i+2];return 0}};function vgt(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}s(vgt,"getGraphemeBreakRawData");var zRe=class t{constructor(e){this.confusableDictionary=e}static{s(this,"AmbiguousCharacters")}static{this.ambiguousCharacterData=new Rg(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"cs":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"es":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"fr":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"it":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ja":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],"ko":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"pt-BR":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"ru":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],"zh-hans":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],"zh-hant":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'))}static{this.cache=new zU({getCacheKey:JSON.stringify},e=>{function n(d){let p=new Map;for(let m=0;m<d.length;m+=2)p.set(d[m],d[m+1]);return p}s(n,"arrayToMap");function r(d,p){let m=new Map(d);for(let[h,g]of p)m.set(h,g);return m}s(r,"mergeMaps");function i(d,p){if(!d)return p;let m=new Map;for(let[h,g]of d)p.has(h)&&m.set(h,g);return m}s(i,"intersectMaps");let o=this.ambiguousCharacterData.value,a=e.filter(d=>!d.startsWith("_")&&d in o);a.length===0&&(a=["_default"]);let l;for(let d of a){let p=n(o[d]);l=i(l,p)}let c=n(o._common),u=r(c,l);return new t(u)})}static getInstance(e){return t.cache.get(Array.from(e))}static{this._locales=new Rg(()=>Object.keys(t.ambiguousCharacterData.value).filter(e=>!e.startsWith("_")))}static getLocales(){return t._locales.value}isAmbiguous(e){return this.confusableDictionary.has(e)}containsAmbiguousCharacter(e){for(let n=0;n<e.length;n++){let r=e.codePointAt(n);if(typeof r=="number"&&this.isAmbiguous(r))return!0}return!1}getPrimaryConfusable(e){return this.confusableDictionary.get(e)}getConfusableCodePoints(){return new Set(this.confusableDictionary.keys())}},YRe=class t{static{s(this,"InvisibleCharacters")}static getRawData(){return JSON.parse("[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]")}static{this._data=void 0}static getData(){return this._data||(this._data=new Set(t.getRawData())),this._data}static isInvisibleCharacter(e){return t.getData().has(e)}static containsInvisibleCharacter(e){for(let n=0;n<e.length;n++){let r=e.codePointAt(n);if(typeof r=="number"&&t.isInvisibleCharacter(r))return!0}return!1}static get codePoints(){return t.getData()}};f();var Rt=class t{constructor(e,n){this.start=e;this.endExclusive=n;if(e>n)throw new dr(`Invalid range: ${this.toString()}`)}static{s(this,"OffsetRange")}static fromTo(e,n){return new t(e,n)}static addRange(e,n){let r=0;for(;r<n.length&&n[r].endExclusive<e.start;)r++;let i=r;for(;i<n.length&&n[i].start<=e.endExclusive;)i++;if(r===i)n.splice(r,0,e);else{let o=Math.min(e.start,n[r].start),a=Math.max(e.endExclusive,n[i-1].endExclusive);n.splice(r,i-r,new t(o,a))}}static tryCreate(e,n){if(!(e>n))return new t(e,n)}static ofLength(e){return new t(0,e)}static ofStartAndLength(e,n){return new t(e,e+n)}static emptyAt(e){return new t(e,e)}get isEmpty(){return this.start===this.endExclusive}delta(e){return new t(this.start+e,this.endExclusive+e)}deltaStart(e){return new t(this.start+e,this.endExclusive)}deltaEnd(e){return new t(this.start,this.endExclusive+e)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(e){return this.start===e.start&&this.endExclusive===e.endExclusive}containsRange(e){return this.start<=e.start&&e.endExclusive<=this.endExclusive}contains(e){return this.start<=e&&e<this.endExclusive}join(e){return new t(Math.min(this.start,e.start),Math.max(this.endExclusive,e.endExclusive))}intersect(e){let n=Math.max(this.start,e.start),r=Math.min(this.endExclusive,e.endExclusive);if(n<=r)return new t(n,r)}intersectionLength(e){let n=Math.max(this.start,e.start),r=Math.min(this.endExclusive,e.endExclusive);return Math.max(0,r-n)}intersects(e){let n=Math.max(this.start,e.start),r=Math.min(this.endExclusive,e.endExclusive);return n<r}intersectsOrTouches(e){let n=Math.max(this.start,e.start),r=Math.min(this.endExclusive,e.endExclusive);return n<=r}isBefore(e){return this.endExclusive<=e.start}isAfter(e){return this.start>=e.endExclusive}slice(e){return e.slice(this.start,this.endExclusive)}substring(e){return e.substring(this.start,this.endExclusive)}clip(e){if(this.isEmpty)throw new dr(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,e))}clipCyclic(e){if(this.isEmpty)throw new dr(`Invalid clipping range: ${this.toString()}`);return e<this.start?this.endExclusive-(this.start-e)%this.length:e>=this.endExclusive?this.start+(e-this.start)%this.length:e}map(e){let n=[];for(let r=this.start;r<this.endExclusive;r++)n.push(e(r));return n}forEach(e){for(let n=this.start;n<this.endExclusive;n++)e(n)}joinRightTouching(e){if(this.endExclusive!==e.start)throw new dr(`Invalid join: ${this.toString()} and ${e.toString()}`);return new t(this.start,e.endExclusive)}};f();var rr=class t{static{s(this,"Position")}constructor(e,n){this.lineNumber=e,this.column=n}with(e=this.lineNumber,n=this.column){return e===this.lineNumber&&n===this.column?this:new t(e,n)}delta(e=0,n=0){return this.with(this.lineNumber+e,this.column+n)}equals(e){return t.equals(this,e)}static equals(e,n){return!e&&!n?!0:!!e&&!!n&&e.lineNumber===n.lineNumber&&e.column===n.column}isBefore(e){return t.isBefore(this,e)}static isBefore(e,n){return e.lineNumber<n.lineNumber?!0:n.lineNumber<e.lineNumber?!1:e.column<n.column}isBeforeOrEqual(e){return t.isBeforeOrEqual(this,e)}static isBeforeOrEqual(e,n){return e.lineNumber<n.lineNumber?!0:n.lineNumber<e.lineNumber?!1:e.column<=n.column}static compare(e,n){let r=e.lineNumber|0,i=n.lineNumber|0;if(r===i){let o=e.column|0,a=n.column|0;return o-a}return r-i}clone(){return new t(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(e){return new t(e.lineNumber,e.column)}static isIPosition(e){return e&&typeof e.lineNumber=="number"&&typeof e.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}};f();var zt=class t{static{s(this,"Range")}constructor(e,n,r,i){e>r||e===r&&n>i?(this.startLineNumber=r,this.startColumn=i,this.endLineNumber=e,this.endColumn=n):(this.startLineNumber=e,this.startColumn=n,this.endLineNumber=r,this.endColumn=i)}isEmpty(){return t.isEmpty(this)}static isEmpty(e){return e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn}containsPosition(e){return t.containsPosition(this,e)}static containsPosition(e,n){return!(n.lineNumber<e.startLineNumber||n.lineNumber>e.endLineNumber||n.lineNumber===e.startLineNumber&&n.column<e.startColumn||n.lineNumber===e.endLineNumber&&n.column>e.endColumn)}static strictContainsPosition(e,n){return!(n.lineNumber<e.startLineNumber||n.lineNumber>e.endLineNumber||n.lineNumber===e.startLineNumber&&n.column<=e.startColumn||n.lineNumber===e.endLineNumber&&n.column>=e.endColumn)}containsRange(e){return t.containsRange(this,e)}static containsRange(e,n){return!(n.startLineNumber<e.startLineNumber||n.endLineNumber<e.startLineNumber||n.startLineNumber>e.endLineNumber||n.endLineNumber>e.endLineNumber||n.startLineNumber===e.startLineNumber&&n.startColumn<e.startColumn||n.endLineNumber===e.endLineNumber&&n.endColumn>e.endColumn)}strictContainsRange(e){return t.strictContainsRange(this,e)}static strictContainsRange(e,n){return!(n.startLineNumber<e.startLineNumber||n.endLineNumber<e.startLineNumber||n.startLineNumber>e.endLineNumber||n.endLineNumber>e.endLineNumber||n.startLineNumber===e.startLineNumber&&n.startColumn<=e.startColumn||n.endLineNumber===e.endLineNumber&&n.endColumn>=e.endColumn)}plusRange(e){return t.plusRange(this,e)}static plusRange(e,n){let r,i,o,a;return n.startLineNumber<e.startLineNumber?(r=n.startLineNumber,i=n.startColumn):n.startLineNumber===e.startLineNumber?(r=n.startLineNumber,i=Math.min(n.startColumn,e.startColumn)):(r=e.startLineNumber,i=e.startColumn),n.endLineNumber>e.endLineNumber?(o=n.endLineNumber,a=n.endColumn):n.endLineNumber===e.endLineNumber?(o=n.endLineNumber,a=Math.max(n.endColumn,e.endColumn)):(o=e.endLineNumber,a=e.endColumn),new t(r,i,o,a)}intersectRanges(e){return t.intersectRanges(this,e)}static intersectRanges(e,n){let r=e.startLineNumber,i=e.startColumn,o=e.endLineNumber,a=e.endColumn,l=n.startLineNumber,c=n.startColumn,u=n.endLineNumber,d=n.endColumn;return r<l?(r=l,i=c):r===l&&(i=Math.max(i,c)),o>u?(o=u,a=d):o===u&&(a=Math.min(a,d)),r>o||r===o&&i>a?null:new t(r,i,o,a)}equalsRange(e){return t.equalsRange(this,e)}static equalsRange(e,n){return!e&&!n?!0:!!e&&!!n&&e.startLineNumber===n.startLineNumber&&e.startColumn===n.startColumn&&e.endLineNumber===n.endLineNumber&&e.endColumn===n.endColumn}getEndPosition(){return t.getEndPosition(this)}static getEndPosition(e){return new rr(e.endLineNumber,e.endColumn)}getStartPosition(){return t.getStartPosition(this)}static getStartPosition(e){return new rr(e.startLineNumber,e.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(e,n){return new t(this.startLineNumber,this.startColumn,e,n)}setStartPosition(e,n){return new t(e,n,this.endLineNumber,this.endColumn)}collapseToStart(){return t.collapseToStart(this)}static collapseToStart(e){return new t(e.startLineNumber,e.startColumn,e.startLineNumber,e.startColumn)}collapseToEnd(){return t.collapseToEnd(this)}static collapseToEnd(e){return new t(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn)}delta(e){return new t(this.startLineNumber+e,this.startColumn,this.endLineNumber+e,this.endColumn)}isSingleLine(){return this.startLineNumber===this.endLineNumber}static fromPositions(e,n=e){return new t(e.lineNumber,e.column,n.lineNumber,n.column)}static lift(e){return e?new t(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn):null}static isIRange(e){return e&&typeof e.startLineNumber=="number"&&typeof e.startColumn=="number"&&typeof e.endLineNumber=="number"&&typeof e.endColumn=="number"}static areIntersectingOrTouching(e,n){return!(e.endLineNumber<n.startLineNumber||e.endLineNumber===n.startLineNumber&&e.endColumn<n.startColumn||n.endLineNumber<e.startLineNumber||n.endLineNumber===e.startLineNumber&&n.endColumn<e.startColumn)}static areIntersecting(e,n){return!(e.endLineNumber<n.startLineNumber||e.endLineNumber===n.startLineNumber&&e.endColumn<=n.startColumn||n.endLineNumber<e.startLineNumber||n.endLineNumber===e.startLineNumber&&n.endColumn<=e.startColumn)}static compareRangesUsingStarts(e,n){if(e&&n){let o=e.startLineNumber|0,a=n.startLineNumber|0;if(o===a){let l=e.startColumn|0,c=n.startColumn|0;if(l===c){let u=e.endLineNumber|0,d=n.endLineNumber|0;if(u===d){let p=e.endColumn|0,m=n.endColumn|0;return p-m}return u-d}return l-c}return o-a}return(e?1:0)-(n?1:0)}static compareRangesUsingEnds(e,n){return e.endLineNumber===n.endLineNumber?e.endColumn===n.endColumn?e.startLineNumber===n.startLineNumber?e.startColumn-n.startColumn:e.startLineNumber-n.startLineNumber:e.endColumn-n.endColumn:e.endLineNumber-n.endLineNumber}static spansMultipleLines(e){return e.endLineNumber>e.startLineNumber}toJSON(){return this}};f();f();var Yt=class t{static{s(this,"LineRange")}static fromRange(e){return new t(e.startLineNumber,e.endLineNumber)}static fromRangeInclusive(e){return new t(e.startLineNumber,e.endLineNumber+1)}static subtract(e,n){return n?e.startLineNumber<n.startLineNumber&&n.endLineNumberExclusive<e.endLineNumberExclusive?[new t(e.startLineNumber,n.startLineNumber),new t(n.endLineNumberExclusive,e.endLineNumberExclusive)]:n.startLineNumber<=e.startLineNumber&&e.endLineNumberExclusive<=n.endLineNumberExclusive?[]:n.endLineNumberExclusive<e.endLineNumberExclusive?[new t(Math.max(n.endLineNumberExclusive,e.startLineNumber),e.endLineNumberExclusive)]:[new t(e.startLineNumber,Math.min(n.startLineNumber,e.endLineNumberExclusive))]:[e]}static joinMany(e){if(e.length===0)return[];let n=new m2(e[0].slice());for(let r=1;r<e.length;r++)n=n.getUnion(new m2(e[r].slice()));return n.ranges}static join(e){if(e.length===0)throw new dr("lineRanges cannot be empty");let n=e[0].startLineNumber,r=e[0].endLineNumberExclusive;for(let i=1;i<e.length;i++)n=Math.min(n,e[i].startLineNumber),r=Math.max(r,e[i].endLineNumberExclusive);return new t(n,r)}static ofLength(e,n){return new t(e,e+n)}static deserialize(e){return new t(e[0],e[1])}constructor(e,n){if(e>n)throw new dr(`startLineNumber ${e} cannot be after endLineNumberExclusive ${n}`);this.startLineNumber=e,this.endLineNumberExclusive=n}contains(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}get isEmpty(){return this.startLineNumber===this.endLineNumberExclusive}delta(e){return new t(this.startLineNumber+e,this.endLineNumberExclusive+e)}deltaLength(e){return new t(this.startLineNumber,this.endLineNumberExclusive+e)}get length(){return this.endLineNumberExclusive-this.startLineNumber}join(e){return new t(Math.min(this.startLineNumber,e.startLineNumber),Math.max(this.endLineNumberExclusive,e.endLineNumberExclusive))}toString(){return`[${this.startLineNumber},${this.endLineNumberExclusive})`}intersect(e){let n=Math.max(this.startLineNumber,e.startLineNumber),r=Math.min(this.endLineNumberExclusive,e.endLineNumberExclusive);if(n<=r)return new t(n,r)}intersectsStrict(e){return this.startLineNumber<e.endLineNumberExclusive&&e.startLineNumber<this.endLineNumberExclusive}overlapOrTouch(e){return this.startLineNumber<=e.endLineNumberExclusive&&e.startLineNumber<=this.endLineNumberExclusive}equals(e){return this.startLineNumber===e.startLineNumber&&this.endLineNumberExclusive===e.endLineNumberExclusive}toInclusiveRange(){return this.isEmpty?null:new zt(this.startLineNumber,1,this.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER)}toExclusiveRange(){return new zt(this.startLineNumber,1,this.endLineNumberExclusive,1)}mapToLineArray(e){let n=[];for(let r=this.startLineNumber;r<this.endLineNumberExclusive;r++)n.push(e(r));return n}forEach(e){for(let n=this.startLineNumber;n<this.endLineNumberExclusive;n++)e(n)}serialize(){return[this.startLineNumber,this.endLineNumberExclusive]}includes(e){return this.startLineNumber<=e&&e<this.endLineNumberExclusive}toOffsetRange(){return new Rt(this.startLineNumber-1,this.endLineNumberExclusive-1)}distanceToRange(e){return this.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-this.endLineNumberExclusive:e.endLineNumberExclusive<=this.startLineNumber?this.startLineNumber-e.endLineNumberExclusive:0}distanceToLine(e){return this.contains(e)?0:e<this.startLineNumber?this.startLineNumber-e:e-this.endLineNumberExclusive}addMargin(e,n){return new t(this.startLineNumber-e,this.endLineNumberExclusive+n)}},m2=class t{constructor(e=[]){this._normalizedRanges=e}static{s(this,"LineRangeSet")}get ranges(){return this._normalizedRanges}addRange(e){if(e.length===0)return;let n=e2(this._normalizedRanges,i=>i.endLineNumberExclusive>=e.startLineNumber),r=T0(this._normalizedRanges,i=>i.startLineNumber<=e.endLineNumberExclusive)+1;if(n===r)this._normalizedRanges.splice(n,0,e);else if(n===r-1){let i=this._normalizedRanges[n];this._normalizedRanges[n]=i.join(e)}else{let i=this._normalizedRanges[n].join(this._normalizedRanges[r-1]).join(e);this._normalizedRanges.splice(n,r-n,i)}}contains(e){let n=F1(this._normalizedRanges,r=>r.startLineNumber<=e);return!!n&&n.endLineNumberExclusive>e}intersects(e){let n=F1(this._normalizedRanges,r=>r.startLineNumber<e.endLineNumberExclusive);return!!n&&n.endLineNumberExclusive>e.startLineNumber}getUnion(e){if(this._normalizedRanges.length===0)return e;if(e._normalizedRanges.length===0)return this;let n=[],r=0,i=0,o=null;for(;r<this._normalizedRanges.length||i<e._normalizedRanges.length;){let a=null;if(r<this._normalizedRanges.length&&i<e._normalizedRanges.length){let l=this._normalizedRanges[r],c=e._normalizedRanges[i];l.startLineNumber<c.startLineNumber?(a=l,r++):(a=c,i++)}else r<this._normalizedRanges.length?(a=this._normalizedRanges[r],r++):(a=e._normalizedRanges[i],i++);o===null?o=a:o.endLineNumberExclusive>=a.startLineNumber?o=new Yt(o.startLineNumber,Math.max(o.endLineNumberExclusive,a.endLineNumberExclusive)):(n.push(o),o=a)}return o!==null&&n.push(o),new t(n)}subtractFrom(e){let n=e2(this._normalizedRanges,a=>a.endLineNumberExclusive>=e.startLineNumber),r=T0(this._normalizedRanges,a=>a.startLineNumber<=e.endLineNumberExclusive)+1;if(n===r)return new t([e]);let i=[],o=e.startLineNumber;for(let a=n;a<r;a++){let l=this._normalizedRanges[a];l.startLineNumber>o&&i.push(new Yt(o,l.startLineNumber)),o=l.endLineNumberExclusive}return o<e.endLineNumberExclusive&&i.push(new Yt(o,e.endLineNumberExclusive)),new t(i)}toString(){return this._normalizedRanges.map(e=>e.toString()).join(", ")}getIntersection(e){let n=[],r=0,i=0;for(;r<this._normalizedRanges.length&&i<e._normalizedRanges.length;){let o=this._normalizedRanges[r],a=e._normalizedRanges[i],l=o.intersect(a);l&&!l.isEmpty&&n.push(l),o.endLineNumberExclusive<a.endLineNumberExclusive?r++:i++}return new t(n)}getWithDelta(e){return new t(this._normalizedRanges.map(n=>n.delta(e)))}};var Ul=class t{constructor(e,n){this.lineCount=e;this.columnCount=n}static{s(this,"TextLength")}static{this.zero=new t(0,0)}static lengthDiffNonNegative(e,n){return n.isLessThan(e)?t.zero:e.lineCount===n.lineCount?new t(0,n.columnCount-e.columnCount):new t(n.lineCount-e.lineCount,n.columnCount)}static betweenPositions(e,n){return e.lineNumber===n.lineNumber?new t(0,n.column-e.column):new t(n.lineNumber-e.lineNumber,n.column-1)}static fromPosition(e){return new t(e.lineNumber-1,e.column-1)}static ofRange(e){return t.betweenPositions(e.getStartPosition(),e.getEndPosition())}static ofText(e){let n=0,r=0;for(let i of e)i===`
`?(n++,r=0):r++;return new t(n,r)}isZero(){return this.lineCount===0&&this.columnCount===0}isLessThan(e){return this.lineCount!==e.lineCount?this.lineCount<e.lineCount:this.columnCount<e.columnCount}isGreaterThan(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>e.columnCount}isGreaterThanOrEqualTo(e){return this.lineCount!==e.lineCount?this.lineCount>e.lineCount:this.columnCount>=e.columnCount}equals(e){return this.lineCount===e.lineCount&&this.columnCount===e.columnCount}compare(e){return this.lineCount!==e.lineCount?this.lineCount-e.lineCount:this.columnCount-e.columnCount}add(e){return e.lineCount===0?new t(this.lineCount,this.columnCount+e.columnCount):new t(this.lineCount+e.lineCount,e.columnCount)}createRange(e){return this.lineCount===0?new zt(e.lineNumber,e.column,e.lineNumber,e.column+this.columnCount):new zt(e.lineNumber,e.column,e.lineNumber+this.lineCount,this.columnCount+1)}toRange(){return new zt(1,1,this.lineCount+1,this.columnCount+1)}toLineRange(){return Yt.ofLength(1,this.lineCount)}addToPosition(e){return this.lineCount===0?new rr(e.lineNumber,e.column+this.columnCount):new rr(e.lineNumber+this.lineCount,this.columnCount+1)}addToRange(e){return zt.fromPositions(this.addToPosition(e.getStartPosition()),this.addToPosition(e.getEndPosition()))}toString(){return`${this.lineCount},${this.columnCount}`}};var ql=class t{constructor(e){this.value=e}static{s(this,"StringValue")}apply(e){return new t(e.apply(this.value))}equals(e){return this.value===e.value}getTransformer(){return this._transformer||(this._transformer=new Jie(this.value)),this._transformer}getValueOfRange(e){return this.getTransformer().getOffsetRange(e).substring(this.value)}getLines(){return kg(this.value)}getLineAt(e){return this.getLines()[e-1]}toString(){return this.value}getTextLength(){return this.getTransformer().textLength}},Jie=class{constructor(e){this.text=e;this.lineStartOffsetByLineIdx=[],this.lineEndOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let n=0;n<e.length;n++)e.charAt(n)===`
`&&(this.lineStartOffsetByLineIdx.push(n+1),n>0&&e.charAt(n-1)==="\r"?this.lineEndOffsetByLineIdx.push(n-1):this.lineEndOffsetByLineIdx.push(n));this.lineEndOffsetByLineIdx.push(e.length)}static{s(this,"PositionOffsetTransformer")}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new Rt(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getPosition(e){let n=T0(this.lineStartOffsetByLineIdx,o=>o<=e),r=n+1,i=e-this.lineStartOffsetByLineIdx[n]+1;return new rr(r,i)}getRange(e){return zt.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getTextLength(e){return Ul.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new Ul(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}};var Lm=class{static{s(this,"ObservableWorkspace")}getDocument(e){return Promise.resolve(this.openDocuments.get().find(n=>n.id===e))}};var YU=class extends jo{constructor(n,r,i,o,a,l){super();this.id=n;this.workspaceRoot=l;this.value=Nm(this,r),this.selection=Nm(this,i),this.languageId=Nm(this,o),this._register(Ra(a))}static{s(this,"MutableObservableDocument")}applyEdit(n,r=void 0){let i=this.value.get().apply(n);this.value.set(i,r,n)}updateSelection(n,r=void 0){this.selection.set(n,r)}};f();f();function V1(t,e,n){let r=new Map(Object.entries(e).map(([o,a])=>[a,o])),i=new Map(Object.keys(e).map(o=>[o,void 0]));return WU({owner:t,createEmptyChangeSummary:s(()=>({}),"createEmptyChangeSummary"),handleChange:s((o,a)=>{let l=r.get(o.changedObservable);return a[l]===void 0&&(a[l]={value:void 0,changes:[]}),a[l].changes.push(o.change),!0},"handleChange")},(o,a)=>{for(let[l,c]of Object.entries(e)){let u=c.read(o);a[l]===void 0&&(a[l]={value:u,changes:[],previous:i.get(l)}),a[l].value=u,a[l].previous=i.get(l)===void 0?void 0:i.get(l),i.set(l,u)}n(a)})}s(V1,"autorunWithChanges");f();var Bg=class extends jo{static{s(this,"RecentEditsProvider")}};function bgt(t,e=!1,n=void 0,r){if(e&&(n===void 0||r===void 0))throw new Error("cursorLine and activeDocDistanceLimitFromCursor are required when filterByCursorLine is true");let i=t.startLine-1,o=t.endLine-1;return!!(e&&(Math.abs(i-n)<=r||Math.abs(o-n)<=r))}s(bgt,"editIsTooCloseToCursor");var KU=s((t,e)=>{let[n,r]=e.useState();return e.useData(bd,async i=>{if(!i.document)return;let o=t.ctx.get(Bg);if(o.isEnabled())o.start();else return;let a=o.config,l=o.getRecentEdits(),c=new Set,u=t.ctx.get(Nn),d=[];for(let m=l.length-1;m>=0&&!(d.length>=a.maxEdits);m--){let h=l[m];if(!await u.getTextDocument({uri:h.file}))continue;let g=!c.has(h.file);if(c.size+(g?1:0)>a.maxFiles)break;let v=h.file===i.document?.uri,b=v?i.position.line:void 0;if(bgt(h,v,b,a.activeDocDistanceLimitFromCursor))continue;let _=o.getEditSummary(h);if(_){c.add(h.file);let k=u.getRelativePath({uri:h.file});d.unshift(mP(`File: ${k}`)+mP(_))}}if(d.length===0){r(void 0);return}let p=mP("These are recently edited files. Do not suggest code that has been deleted.")+d.join("")+mP("End of recent edits");r(p)}),n?Pn(Av,{children:Pn(ca,{children:n})}):void 0},"RecentEdits");f();f();f();f();var Xie=new Kn;function KRe(t){return[...t].sort((e,n)=>{let r=Xie.get(e.uri)??0;return(Xie.get(n.uri)??0)-r})}s(KRe,"sortByAccessTimes");var JRe=s(t=>t.get(Nn).onDidFocusTextDocument(e=>{e&&Xie.set(e.document.uri.toString(),Date.now())}),"registerDocumentTracker");var JU=class{constructor(e){this.docManager=e}static{s(this,"OpenTabFiles")}async truncateDocs(e,n,r,i){let o=new Map,a=0;for(let l of e)if(!(a+l.getText().length>h2.MAX_NEIGHBOR_AGGREGATE_LENGTH)&&(l.uri.startsWith("file:")&&n.startsWith("file:")&&l.uri!==n&&XU(r,l.detectedLanguageId)&&(o.set(l.uri.toString(),{uri:l.uri.toString(),relativePath:this.docManager.getRelativePath(l),source:l.getText()}),a+=l.getText().length),o.size>=i))break;return o}async getNeighborFiles(e,n,r){let i=new Map,o=new Map;return i=await this.truncateDocs(KRe(await this.docManager.textDocuments()),e,n,r),o.set("opentabs",Array.from(i.keys()).map(a=>a.toString())),{docs:i,neighborSource:o}}};f();f();function XRe(t,e,n){return async function(...r){return await Promise.race([t.apply(this,r),new Promise(i=>{setTimeout(i,e,n)})])}}s(XRe,"shortCircuit");f();function Igt(...t){return JSON.stringify(t,(e,n)=>typeof n=="object"?n:String(n))}s(Igt,"defaultHash");function Zie(t,e={}){let{hash:n=Igt,cache:r=new Map}=e;return function(...i){let o=n.apply(this,i);if(r.has(o))return r.get(o);let a=t.apply(this,i);return a instanceof Promise&&(a=a.catch(l=>{throw r.delete(o),l})),r.set(o,a),a}}s(Zie,"memoize");var ZRe={entries:[],traits:[]},ZU={entries:new Map,traits:[]},eoe=class extends Kn{constructor(n,r=2*60*1e3){super(n);this.defaultEvictionTimeMs=r;this._cacheTimestamps=new Map}static{s(this,"PromiseExpirationCacheMap")}bumpRetryCount(n){let r=this._cacheTimestamps.get(n);return r?++r.retryCount:(this._cacheTimestamps.set(n,{timestamp:Date.now(),retryCount:0}),0)}has(n){return this.isValid(n)?super.has(n):(this.deleteExpiredEntry(n),!1)}get(n){let r=super.get(n);if(this.isValid(n))return r;this.deleteExpiredEntry(n)}set(n,r){let i=super.set(n,r);return this.isValid(n)||this._cacheTimestamps.set(n,{timestamp:Date.now(),retryCount:0}),i}clear(){super.clear(),this._cacheTimestamps.clear()}isValid(n){let r=this._cacheTimestamps.get(n);return r!==void 0&&Date.now()-r.timestamp<this.defaultEvictionTimeMs}deleteExpiredEntry(n){this._cacheTimestamps.has(n)&&this._cacheTimestamps.delete(n),super.delete(n)}},hl=new Tt("relatedFiles"),Tgt=1e3,eq=class extends Error{static{s(this,"RelatedFilesProviderFailure")}constructor(){super("The provider failed providing the list of relatedFiles")}},g2=class t{constructor(e){this.context=e}static{s(this,"RelatedFilesProvider")}async getRelatedFiles(e,n,r){let i=await this.getRelatedFilesResponse(e,n,r);if(i===void 0)return;let o={entries:new Map,traits:i.traits??[]};for(let a of i.entries){let l=o.entries.get(a.type);l||(l=new Map,o.entries.set(a.type,l));for(let c of a.uris)try{hl.debug(this.context,`Processing ${c}`);let u=await this.getFileContent(c);if(!u||u.length==0){hl.debug(this.context,`Skip ${c} due to empty content or loading issue.`);continue}if(await this.isContentExcluded(c,u)){hl.debug(this.context,`Skip ${c} due content exclusion.`);continue}u=t.dropBOM(u),l.set(c,u)}catch(u){hl.warn(this.context,u)}}return o}async getFileContent(e){try{return this.context.get(po).readFileString(e)}catch(n){hl.debug(this.context,n)}}async isContentExcluded(e,n){try{return(await this.context.get(Kc).evaluate(e,n)).isBlocked}catch(r){hl.exception(this.context,r,"isContentExcluded")}return!0}static dropBOM(e){return e.charCodeAt(0)===65279?e.slice(1):e}},wgt=3,e3e=new eoe(Tgt);async function t3e(t,e,n,r,i){let o=performance.now(),a;try{a=await i.getRelatedFiles(e,n,r)}catch(c){hl.exception(t,c,".getRelatedFiles"),a=void 0}a===void 0&&(e3e.bumpRetryCount(e.uri)>=wgt?a=ZU:a=void 0);let l=performance.now()-o;if(hl.debug(t,a!==void 0?`Fetched ${[...a.entries.values()].map(c=>c.size).reduce((c,u)=>c+u,0)} related files for '${e.uri}' in ${l}ms.`:`Failing fetching files for '${e.uri}' in ${l}ms.`),a===void 0)throw new eq;return a}s(t3e,"getRelatedFiles");var toe=Zie(t3e,{cache:e3e,hash:s((t,e,n,r,i)=>`${e.uri}`,"hash")});toe=XRe(toe,200,ZU);async function tq(t,e,n,r,i,o=!1){let a=t.get(g2),l=ZU;try{let c={uri:e.uri,clientLanguageId:e.clientLanguageId,data:i};l=o?await t3e(t,c,n,r,a):await toe(t,c,n,r,a)}catch(c){l=ZU,c instanceof eq&&kt(t,"getRelatedFilesList",n)}return hl.debug(t,l!=null?`Fetched following traits ${l.traits.map(c=>`{${c.name} : ${c.value}}`).join("")} for '${e.uri}'`:`Failing fecthing traits for '${e.uri}'.`),l}s(tq,"getRelatedFilesAndTraits");function XU(t,e){return f8(t)===f8(e)}s(XU,"considerNeighborFile");var h2=class t{static{s(this,"NeighborSource")}static{this.MAX_NEIGHBOR_AGGREGATE_LENGTH=2e5}static{this.MAX_NEIGHBOR_FILES=20}static{this.EXCLUDED_NEIGHBORS=["node_modules","dist","site-packages"]}static defaultEmptyResult(){return{docs:new Map,neighborSource:new Map,traits:[]}}static reset(){t.instance=void 0}static async getNeighborFilesAndTraits(e,n,r,i,o,a,l){let c=e.get(Nn);t.instance===void 0&&(t.instance=new JU(c));let u={...await t.instance.getNeighborFiles(n,r,t.MAX_NEIGHBOR_FILES),traits:[]};if(_gt(e,i))return u;let d=await c.getTextDocument({uri:n});if(!d)return hl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`Failed to get the related files: failed to get the document ${n}`),u;let p=c.getWorkspaceFolder(d);if(!p)return hl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`Failed to get the related files: ${n} is not under the workspace folder`),u;let m=await tq(e,d,i,o,a,l);return m.entries.size===0?(hl.debug(e,"neighborFiles.getNeighborFilesAndTraits",`0 related files found for ${n}`),u.traits.push(...m.traits),u):(m.entries.forEach((h,g)=>{let y=[];h.forEach((v,b)=>{let E=t.getRelativePath(b,p.uri);if(!E||u.docs.has(b))return;let _={relativePath:E,uri:b,source:v};y.unshift(_),u.docs.set(b,_)}),y.length>0&&u.neighborSource.set(g,y.map(v=>v.uri.toString()))}),u.traits.push(...m.traits),u)}static basename(e){return decodeURIComponent(e.replace(/[#?].*$/,"").replace(/^.*[/:]/,""))}static getRelativePath(e,n){let r=n.toString().replace(/[#?].*/,"").replace(/\/?$/,"/");return e.toString().startsWith(r)?e.toString().slice(r.length):t.basename(e)}};function _gt(t,e){return t.get(Dt).excludeRelatedFiles(e)||Ai(t,wt.ExcludeRelatedFiles)}s(_gt,"isExcludeRelatedFilesActive");function n3e(t,e){return t.get(Dt).includeNeighboringFiles(e)||Ai(t,wt.IncludeNeighboringFiles)}s(n3e,"isIncludeNeighborFilesActive");var nq=s((t,e)=>{let[n,r]=e.useState(),[i,o]=e.useState([]);e.useData(bd,async c=>{c.document.uri!==n?.uri&&o([]),r(c.document);let u=h2.defaultEmptyResult();c.turnOffSimilarFiles||(u=await h2.getNeighborFilesAndTraits(t.ctx,c.document.uri,c.document.detectedLanguageId,c.telemetryData,c.cancellationToken,c.data));let d=await a(c.telemetryData,c.document,c,u);o(d)});async function a(c,u,d,p){let m=rq(t.ctx,c,u.detectedLanguageId);return(await l(m,c,u,d,p)).filter(g=>g.snippet.length>0).sort((g,y)=>g.score-y.score).map(g=>({...oRe(g),score:g.score}))}s(a,"produceSimilarFiles");async function l(c,u,d,p,m){let h=c.similarFilesOptions||RU(t.ctx,u,d.detectedLanguageId),y=t.ctx.get(Nn).getRelativePath(d),v={uri:d.uri,source:d.getText(),offset:d.offsetAt(p.position),relativePath:y,languageId:d.detectedLanguageId};return await lRe(v,Array.from(m.docs.values()),h)}return s(l,"findSimilarSnippets"),Pn(Dm,{children:[...i.map((c,u)=>Pn(Sgt,{snippet:c}))]})},"SimilarFiles"),Sgt=s((t,e)=>Pn(Av,{children:[Pn(ca,{children:t.snippet.headline}),Pn(ca,{children:t.snippet.snippet})]}),"SimilarFile");f();f();var iq=s((t,e)=>{let[n,r]=e.useState(),[i,o]=e.useState();if(e.useData(bd,a=>{a.traits!==n&&r(a.traits);let l=f8(a.document.detectedLanguageId);l!==i&&o(l)}),!(!n||n.length===0||!i))return Pn(Dm,{children:[Pn(ca,{children:`Consider this related information:
`}),...n.map(a=>Pn(ca,{source:a,children:`${a.name}: ${a.value}`},a.id))]})},"Traits");function r3e(t,e){return Ai(t,wt.UseSplitContextPrompt)??t.get(Dt).enablePromptContextProxyField(e)}s(r3e,"shouldUseSplitContextPrompt");function i3e(t){return Pn(Dm,{children:[Pn(Sie,{children:[Pn(LU,{ctx:t,weight:.7}),Pn(iq,{weight:.6}),Pn(kU,{ctx:t,weight:.9}),Pn(nq,{ctx:t,weight:.8})]}),Pn(yRe,{weight:1}),Pn(Rie,{children:Pn(KU,{ctx:t,weight:.99})}),Pn(ARe,{weight:1})]})}s(i3e,"splitContextCompletionsPrompt");f();var o3e=0;function Rgt(){o3e=0}s(Rgt,"resetContextIndex");function kgt(){return o3e++}s(kgt,"getNextContextIndex");var oq=class extends w5{constructor(){super(...arguments);this.formatPrefix=xRe;this.formatContext=vRe}static{s(this,"SplitContextPromptRenderer")}processSnapshot(n,r){let i=[],o=[],a=[],l=!1;if(Rgt(),new T5(n,Bgt).walkSnapshot((d,p,m)=>{if(d===n||(d.statistics.updateDataTimeMs&&d.statistics.updateDataTimeMs>0&&a.push({componentPath:d.path,updateDataTimeMs:d.statistics.updateDataTimeMs}),d.name===a2.name&&(l=!0),d.value===void 0||d.value===""))return!0;let h=m.chunks,g=m.type;if(g==="suffix")o.push({value:hP(d.value),type:"suffix",weight:m.weight,componentPath:d.path,nodeStatistics:d.statistics,chunks:h,source:m.source});else{let y=g==="prefix",v=y||d.value.endsWith(r)?d.value:d.value+r;i.push({type:y?"prefix":"context",value:hP(v),weight:m.weight,componentPath:d.path,nodeStatistics:d.statistics,chunks:h,source:m.source,index:y?void 0:m.index})}return!0}),!l)throw new Error(`Node of type ${a2.name} not found`);if(o.length>1)throw new Error("Only one suffix is allowed");let u=o.length===1?o[0]:{componentPath:"",value:"",weight:1,nodeStatistics:{},type:"suffix"};return{prefixBlocks:i,suffixBlock:u,componentStatistics:a}}},Bgt=[...Nie,(t,e,n)=>BU(t)?{...n,index:kgt()}:n];f();function s3e(t,e,n){let r=CU(n,"Trait");for(let o of r)Pgt(t,e,o.data,o.providerId);return r.flatMap(o=>o.data).sort((o,a)=>(o.importance??0)-(a.importance??0))}s(s3e,"getTraitsFromContextItems");function Pgt(t,e,n,r){let i=t.get(Ql).getStatisticsForCompletion(e);n.forEach(o=>{i.addExpectations(r,[[o,"included"]])})}s(Pgt,"setupExpectationsForTraits");var Dgt=new Map([["TargetFrameworks","targetFrameworks"],["LanguageVersion","languageVersion"]]);function a3e(t,e,n,r,i,o){if(n.length>0){let a={};a.detectedLanguageId=r,a.languageId=i;for(let c of n){let u=Dgt.get(c.name);u&&(a[u]=c.value)}let l=o.extendedBy(a,{});return kt(e,t,l)}}s(a3e,"ReportTraitsTelemetry");f();f();f();var sq=class{constructor(e){this.states=e;this.currentIndex=0;this.stateChanged=!1}static{s(this,"UseState")}useState(e){let n=this.currentIndex;if(this.states[n]===void 0){let i=typeof e=="function"?e():e;this.states[n]=i}let r=s(i=>{let o=typeof i=="function"?i(this.states[n]):i;this.states[n]=o,this.stateChanged=!0},"setState");return this.currentIndex++,[this.states[n],r]}hasChanged(){return this.stateChanged}},aq=class{constructor(e){this.measureUpdateTime=e;this.consumers=[]}static{s(this,"UseData")}useData(e,n){this.consumers.push(r=>{if(e(r))return n(r)})}async updateData(e){if(this.consumers.length>0){let n=performance.now();for(let r of this.consumers)await r(e);this.measureUpdateTime(performance.now()-n)}}};var lq=class{constructor(e){this.lifecycleData=new Map;this.vTree=this.virtualizeElement(e,"$",0)}static{s(this,"VirtualPromptReconciler")}reconcile(e){if(!this.vTree)throw new Error("No tree to reconcile, make sure to pass a valid prompt");return e?.isCancellationRequested?this.vTree:(this.vTree=this.reconcileNode(this.vTree,"$",0,e),this.vTree)}reconcileNode(e,n,r,i){if(!e.children&&!e.lifecycle)return e;let o=e;if(e.lifecycle?.isRemountRequired()){let l=this.collectChildPaths(e);o=this.virtualizeElement(e.component,n,r);let c=this.collectChildPaths(o);this.cleanupState(l,c)}else if(e.children){let l=[];for(let c=0;c<e.children.length;c++){let u=e.children[c];if(u){let d=this.reconcileNode(u,e.path,c,i);d!==void 0&&l.push(d)}}o.children=l}return o}virtualizeElement(e,n,r){if(!(typeof e>"u")){if(typeof e=="string"||typeof e=="number")return{name:typeof e,path:`${n}[${r}]`,props:{value:e},component:e};if(Ngt(e.type)){let i=e.type(e.props.children),o=n!=="$"?`[${r}]`:"",a=`${n}${o}.${i.type}`,l=i.children.map((c,u)=>this.virtualizeElement(c,a,u));return this.ensureUniqueKeys(l),{name:i.type,path:a,children:l.flat().filter(c=>c!==void 0),component:e}}return this.virtualizeFunctionComponent(n,r,e,e.type)}}virtualizeFunctionComponent(e,n,r,i){let o=r.props.key?`["${r.props.key}"]`:`[${n}]`,a=`${e}${o}.${i.name}`,l=new roe(this.getOrCreateLifecycleData(a)),c=i(r.props,l),p=(Array.isArray(c)?c:[c]).map((m,h)=>this.virtualizeElement(m,a,h)).flat().filter(m=>m!==void 0);return this.ensureUniqueKeys(p),{name:i.name,path:a,props:r.props,children:p,component:r,lifecycle:l}}ensureUniqueKeys(e){let n=new Map;for(let i of e){if(!i)continue;let o=i.props?.key;o&&n.set(o,(n.get(o)||0)+1)}let r=Array.from(n.entries()).filter(([i,o])=>o>1).map(([i])=>i);if(r.length>0)throw new Error(`Duplicate keys found: ${r.join(", ")}`)}collectChildPaths(e){let n=[];if(e?.children)for(let r of e.children)r&&(n.push(r.path),n.push(...this.collectChildPaths(r)));return n}cleanupState(e,n){for(let r of e)n.includes(r)||this.lifecycleData.delete(r)}getOrCreateLifecycleData(e){return this.lifecycleData.has(e)||this.lifecycleData.set(e,new noe([])),this.lifecycleData.get(e)}createPipe(){return{pump:s(async e=>{await this.pumpData(e)},"pump")}}async pumpData(e){if(!this.vTree)throw new Error("No tree to pump data into. Pumping data before initializing?");await this.recursivelyPumpData(e,this.vTree)}async recursivelyPumpData(e,n){if(!n)throw new Error("Can't pump data into undefined node.");await n.lifecycle?.dataHook.updateData(e);for(let r of n.children||[])await this.recursivelyPumpData(e,r)}},noe=class{static{s(this,"PromptElementLifecycleData")}constructor(e){this.state=e,this._updateTimeMs=0}getUpdateTimeMsAndReset(){let e=this._updateTimeMs;return this._updateTimeMs=0,e}},roe=class{constructor(e){this.lifecycleData=e;this.stateHook=new sq(e.state),this.dataHook=new aq(n=>{e._updateTimeMs=n})}static{s(this,"PromptElementLifecycle")}useState(e){return this.stateHook.useState(e)}useData(e,n){this.dataHook.useData(e,n)}isRemountRequired(){return this.stateHook.hasChanged()}};function Ngt(t){return typeof t=="function"&&"isFragmentFunction"in t}s(Ngt,"isFragmentFunction");var bP=class{static{s(this,"VirtualPrompt")}constructor(e){this.reconciler=new lq(e)}snapshotNode(e,n){if(!e)return;if(n?.isCancellationRequested)return"cancelled";let r=[];for(let i of e.children??[]){let o=this.snapshotNode(i,n);if(o==="cancelled")return"cancelled";o!==void 0&&r.push(o)}return{value:e.props?.value?.toString(),name:e.name,path:e.path,props:e.props,children:r,statistics:{updateDataTimeMs:e.lifecycle?.lifecycleData.getUpdateTimeMsAndReset()}}}snapshot(e){try{let n=this.reconciler.reconcile(e);if(e?.isCancellationRequested)return{snapshot:void 0,status:"cancelled"};if(!n)throw new Error("Invalid virtual prompt tree");let r=this.snapshotNode(n,e);return r==="cancelled"||e?.isCancellationRequested?{snapshot:void 0,status:"cancelled"}:{snapshot:r,status:"ok"}}catch(n){return{snapshot:void 0,status:"error",error:n}}}createPipe(){return this.reconciler.createPipe()}};var Fm=class{static{s(this,"CompletionsPromptFactory")}};function cq(t,e,n){return new ooe(new soe(new aoe(t,e,n)))}s(cq,"createCompletionsPromptFactory");var ooe=class extends Fm{constructor(n){super();this.delegate=n}static{s(this,"SequentialCompletionsPromptFactory")}prompt(n,r){return this.lastPromise=this.promptAsync(n,r),this.lastPromise}async promptAsync(n,r){if(await this.lastPromise,r?.isCancellationRequested)return F5;try{return await this.delegate.prompt(n,r)}catch{return loe}}},Lgt=1200,soe=class extends Fm{constructor(n){super();this.delegate=n}static{s(this,"TimeoutHandlingCompletionsPromptFactory")}async prompt(n,r){let i=new wr.CancellationTokenSource,o=i.token;return r?.onCancellationRequested(()=>{i.cancel()}),await Promise.race([this.delegate.prompt(n,o),new Promise(a=>{setTimeout(()=>{i.cancel(),a(p3e)},Lgt)})])}};function bd(t){if(!t||typeof t!="object")return!1;let e=t;return!(!e.document||!e.position||e.position.line===void 0||e.position.character===void 0||!e.telemetryData)}s(bd,"isCompletionRequestData");var ioe={default:{promptFunction:l3e,renderer:w5},splitContext:{promptFunction:i3e,renderer:oq}};function l3e(t){return Pn(Dm,{children:[Pn(_ie,{children:[Pn(LU,{ctx:t,weight:.7}),Pn(iq,{weight:.6}),Pn(kU,{ctx:t,weight:.9}),Pn(nq,{ctx:t,weight:.8}),Pn(KU,{ctx:t,weight:.99})]}),Pn(fP,{weight:1})]})}s(l3e,"defaultCompletionsPrompt");var aoe=class extends Fm{constructor(n,r,i){super();this.ctx=n;this.promptOrdering=i??"default",this.virtualPrompt=r??new bP(this.completionsPrompt()),this.pipe=this.virtualPrompt.createPipe(),this.renderer=this.getRenderer()}static{s(this,"ComponentsCompletionsPromptFactory")}async prompt(n,r){try{return await this.createPromptUnsafe(n,r)}catch(i){return this.errorPrompt(i)}}async createPromptUnsafe({completionId:n,completionState:r,telemetryData:i,promptOpts:o},a){let{maxPromptLength:l,suffixPercent:c,suffixMatchThreshold:u}=rq(this.ctx,i,r.textDocument.detectedLanguageId),d=await this.failFastPrompt(r.textDocument,r.position,c,a);if(d)return d;let p=o?.separateContext?"splitContext":"default";this.setPromptOrdering(p);let m=performance.now(),{traits:h,codeSnippets:g,turnOffSimilarFiles:y,resolvedContextItems:v}=await this.resolveContext(n,r,i,a,o);if(await this.updateComponentData(r.textDocument,r.position,h,g,i,y,l,a,o,u,o?.tokenizer),a?.isCancellationRequested)return F5;let b=this.virtualPrompt.snapshot(a),E=b.status;if(E==="cancelled")return F5;if(E==="error")return this.errorPrompt(b.error);let _=this.renderer.render(b.snapshot,{delimiter:`
`,tokenizer:o?.tokenizer,promptTokenLimit:l,suffixPercent:c,languageId:r.textDocument.detectedLanguageId},a);if(_.status==="cancelled")return F5;if(_.status==="error")return this.errorPrompt(_.error);let[k,P]=M5(_.prefix),N={..._,prefix:k},U;if(xie(this.ctx,i)){let he=z4e(_.metadata.componentStatistics);this.ctx.get(Ql).getStatisticsForCompletion(n).computeMatch(he),U=K4e(this.ctx,n,v),or.debug(this.ctx,`Context providers telemetry: '${JSON.stringify(U)}'`)}let ne=performance.now();return this.resetIfEmpty(_),this.successPrompt(N,ne,m,P,U)}async updateComponentData(n,r,i,o,a,l,c,u,d={},p,m){let h=this.createRequestData(n,r,a,u,d,c,i,o,l,p,m);await this.pipe.pump(h)}async resolveContext(n,r,i,o,a={}){let l=[],c,u,d=!1;if(xie(this.ctx,i)){l=await this.ctx.get(Xf).resolution(n);let{textDocument:p}=r,m=l.filter(J4e);Fgt(this.ctx,p.detectedLanguageId,m,i)||(d=!0),c=s3e(this.ctx,n,m),a3e("contextProvider.traits",this.ctx,c,p.detectedLanguageId,p.detectedLanguageId,i),u=await pRe(this.ctx,n,m,p.detectedLanguageId)}return{traits:c,codeSnippets:u,turnOffSimilarFiles:d,resolvedContextItems:l}}async failFastPrompt(n,r,i,o){if(o?.isCancellationRequested)return F5;if((await this.ctx.get(Kc).evaluate(n.uri,n.getText(),"UPDATE")).isBlocked)return f3e;if((i>0?n.getText().length:n.offsetAt(r))<u3e)return d3e}createRequestData(n,r,i,o,a,l,c,u,d,p,m){return{document:n,position:r,telemetryData:i,cancellationToken:o,data:a.data,traits:c,codeSnippets:u,turnOffSimilarFiles:d,suffixMatchThreshold:p,maxPromptTokens:l,tokenizer:m}}resetIfEmpty(n){n.prefix.length===0&&n.suffix.length===0&&this.reset()}successPrompt(n,r,i,o,a){return{type:"prompt",prompt:{prefix:n.prefix,prefixTokens:n.prefixTokens,suffix:n.suffix,suffixTokens:n.suffixTokens,context:n.context,isFimEnabled:n.suffix.length>0},computeTimeMs:r-i,trailingWs:o,neighborSource:new Map,metadata:n.metadata,contextProvidersTelemetry:a}}errorPrompt(n){return wa(this.ctx,n,"PromptComponents.CompletionsPromptFactory"),this.reset(),loe}reset(){this.renderer=this.getRenderer(),this.virtualPrompt=new bP(this.completionsPrompt()),this.pipe=this.virtualPrompt.createPipe()}setPromptOrdering(n){this.promptOrdering!==n&&(this.promptOrdering=n,this.reset())}completionsPrompt(){return(ioe[this.promptOrdering]?.promptFunction??l3e)(this.ctx)}getRenderer(){let n=ioe[this.promptOrdering]??ioe.default;return new n.renderer}};function Fgt(t,e,n,r){let i=["cpp","c"];return n3e(t,r)||i.includes(e)||!n.some(a=>a.data.some(l=>l.type==="CodeSnippet"))}s(Fgt,"similarFilesEnabled");async function c3e(t){try{await wI}catch(e){I5(t,e,"initializeTokenizers")}}s(c3e,"waitForTokenizers");var u3e=10,d3e={type:"contextTooShort"},f3e={type:"copilotContentExclusion"},loe={type:"promptError"},F5={type:"promptCancelled"},p3e={type:"promptTimeout"};function M5(t){let e=t.split(`
`),n=e[e.length-1],r=n.length-n.trimEnd().length,i=t.slice(0,t.length-r),o=t.slice(i.length);return[n.length==r?i:t,o]}s(M5,"trimLastLine");function Q5(t,e,n,r,i,o={}){let l=t.get(Nn).findNotebook(n.textDocument),c=l?.getCellFor(n.textDocument);l&&c&&(n=Qgt(n,l,c)),r.extendWithConfigProperties(t),r.sanitizeKeys();let u=r3e(t,r);return t.get(Fm).prompt({completionId:e,completionState:n,telemetryData:r,promptOpts:{...o,separateContext:u}},i)}s(Q5,"extractPrompt");function Mgt(t,e){let n=t.document.detectedLanguageId,r=t.document.getText();return n===e?r:NU(r,e)}s(Mgt,"addNeighboringCellsToPrompt");function Qgt(t,e,n){let i=e.getCells().filter(l=>l.index<n.index&&XU(n.document.detectedLanguageId,l.document.detectedLanguageId)),o=i.length>0?i.map(l=>Mgt(l,n.document.detectedLanguageId)).join(`

`)+`

`:"",a={line:0,character:0};return t.applyEdits([{newText:o,range:{start:a,end:a}}])}s(Qgt,"applyEditsForNotebook");function rq(t,e,n){let i=t.get(Dt).maxPromptCompletionTokens(e)-fU(t),o=dRe(e,n),a=RU(t,e,n),l=t.get(Dt).suffixPercent(e),c=t.get(Dt).suffixMatchThreshold(e);if(l<0||l>100)throw new Error(`suffixPercent must be between 0 and 100, but was ${l}`);if(c<0||c>100)throw new Error(`suffixMatchThreshold must be between 0 and 100, but was ${c}`);return{maxPromptLength:i,similarFilesOptions:a,numberOfSnippets:o,suffixPercent:l,suffixMatchThreshold:c}}s(rq,"getPromptOptions");f();f();var m3e=2.98410452738298,h3e=-.838732736843507,g3e=1.50314646255716,A3e=-.237798634012662,uq={python:.314368072478742},y3e={"0.01":.225800751784931,"0.02":.290204307767402,"0.03":.333153496466045,"0.05":.404516749849559,"0.1":.513216040545626,"0.2":.626904979128674,"0.3":.694880719658273,"0.4":.743100684947291,"0.5":.782524520571946,"0.6":.816856186092243,"0.7":.84922977716585,"0.8":.883694877241999,"0.9":.921859050950077,"0.95":.944571268106974,"0.99":.969535563141733};var Ogt={link:s(t=>Math.exp(t)/(1+Math.exp(t)),"link"),unlink:s(t=>Math.log(t/(1-t)),"unlink")};function Ugt(t,e){let n=Math.min(...Array.from(e.keys()).filter(a=>a>=t)),r=Math.max(...Array.from(e.keys()).filter(a=>a<t)),i=e.get(n),o=e.get(r);return o+(i-o)*(t-r)/(n-r)}s(Ugt,"linearInterpolation");var O5=class{static{s(this,"Regressor")}constructor(e,n,r){this.name=e,this.coefficient=n,this.transformation=r||(i=>i)}contribution(e){return this.coefficient*this.transformation(e)}},coe=class{constructor(e,n,r){this.link=Ogt;if(this.intercept=e,this.coefficients=n,this.logitsToQuantiles=new Map,this.logitsToQuantiles.set(0,0),this.logitsToQuantiles.set(1,1),r)for(let i in r)this.logitsToQuantiles.set(r[i],Number(i))}static{s(this,"LogisticRegression")}predict(e,n){let r=this.intercept;for(let i of this.coefficients){let o=n[i.name];if(o===void 0)return NaN;r+=i.contribution(o)}return this.link.link(r)}quantile(e,n){let r=this.predict(e,n);return Ugt(r,this.logitsToQuantiles)}},C3e=new coe(m3e,[new O5("compCharLen",h3e,t=>Math.log(1+t)),new O5("meanLogProb",g3e),new O5("meanAlternativeLogProb",A3e)].concat(Object.entries(uq).map(t=>new O5(t[0],t[1]))),y3e);function x3e(t,e){let n={...e.measurements};return Object.keys(uq).forEach(r=>{n[r]=e.properties["customDimensions.languageId"]==r?1:0}),C3e.predict(t,n)}s(x3e,"ghostTextScoreConfidence");function v3e(t,e){let n={...e.measurements};return Object.keys(uq).forEach(r=>{n[r]=e.properties["customDimensions.languageId"]==r?1:0}),C3e.quantile(t,n)}s(v3e,"ghostTextScoreQuantile");f();f();var qgt=[{max_token_sequence_length:1,last_tokens_to_consider:10},{max_token_sequence_length:10,last_tokens_to_consider:30},{max_token_sequence_length:20,last_tokens_to_consider:45},{max_token_sequence_length:30,last_tokens_to_consider:60}];function dq(t){let e=t.slice();return e.reverse(),b3e(e)||b3e(e.filter(n=>n.trim().length>0))}s(dq,"isRepetitive");function b3e(t){let e=Wgt(t);for(let n of qgt){if(t.length<n.last_tokens_to_consider)continue;if(n.last_tokens_to_consider-1-e[n.last_tokens_to_consider-1]<=n.max_token_sequence_length)return!0}return!1}s(b3e,"isRepeatedPattern");function Wgt(t){let e=Array(t.length).fill(0);e[0]=-1;let n=-1;for(let r=1;r<t.length;r++){for(;n>=0&&t[n+1]!==t[r];)n=e[n];t[n+1]===t[r]&&n++,e[r]=n}return e}s(Wgt,"kmp_prefix_function");function Hgt(t,e,n,r){let i="}";try{i=oTe(e.detectedLanguageId)??"}"}catch{}return Ggt({getLineText:s(o=>e.lineAt(o).text,"getLineText"),getLineCount:s(()=>e.lineCount,"getLineCount")},n,r,i)}s(Hgt,"maybeSnipCompletion");function Ggt(t,e,n,r){let i=jgt(n),o=i.lines;if(o.length===1)return n;for(let a=1;a<o.length;a++){let l=!0,c=0,u=0;for(let d=0;d+a+u<o.length;d++){let p;for(;;){let y=e.line+1+d+c;if(p=y>=t.getLineCount()?void 0:t.getLineText(y),p!==void 0&&p.trim()==="")c++;else break}let m,h;for(;m=a+d+u,h=m>=o.length?void 0:o[m],h!==void 0&&h.trim()==="";)u++;let g=m===o.length-1;if(!h||!(p&&(g?p.startsWith(h)||h.startsWith(p):p===h&&h.trim()===r))){l=!1;break}}if(l)return o.slice(0,a).join(i.newLineCharacter)}return n}s(Ggt,"maybeSnipCompletionImpl");function jgt(t){let e=t.includes(`\r
`)?`\r
`:`
`;return{lines:t.split(e),newLineCharacter:e}}s(jgt,"splitByNewLine");function Vgt(t,e,n,r){let i="",o=e.line+1,a=r?n.trim():n;for(;i===""&&o<t.lineCount;){if(i=t.lineAt(o).text,r&&(i=i.trim()),i===a)return!0;o++}return!1}s(Vgt,"matchesNextLine");function EP(t,e,n,r,i,o){if(dq(r.tokens)){let l=ir.createAndMarkAsIssued();l.extendWithRequestId(r.requestId),kt(t,"repetition.detected",l,1),o.info(t,"Filtered out repetitive solution");return}let a={...r};if(Vgt(e,n,a.completionText,!i)){let l=ir.createAndMarkAsIssued();l.extendWithRequestId(r.requestId),kt(t,"completion.alreadyInDocument",l),kt(t,"completion.alreadyInDocument",l.extendedBy({completionTextJson:JSON.stringify(a.completionText)}),1),o.info(t,"Filtered out solution matching next line");return}return a.completionText=Hgt(t,e,n,a.completionText),a.completionText?a:void 0}s(EP,"postProcessChoiceInContext");function E3e(t,e,n){let i=t.lineAt(e.line).text.substring(e.character);if(i.length>0){if(n.completionText.indexOf(i)!==-1)return i.length;{let o=-1,a=0;for(let l of i){let c=n.completionText.indexOf(l,o+1);if(c>o)a++,o=c;else break}return a}}return 0}s(E3e,"checkSuffix");var _3e=je(vx());var co=new Tt("ghostText");var zgt=200,I3e=20;async function S3e(t,e,n,r,i,o,a){co.debug(t,`Getting ${o} from network`),n=n.extendedBy();let l=e.isCycling?3:1,c=C5(t,l),u={language:e.languageId,next_indent:e.indentation.next??0,trim_by_indentation:dTe(e.blockMode),prompt_tokens:e.prompt.prefixTokens??0,suffix_tokens:e.prompt.suffixTokens??0},d={n:l,temperature:c},p=Ai(t,wt.ModelAlwaysTerminatesSingleline)??t.get(Dt).modelAlwaysTerminatesSingleline(n),m=e.blockMode==="moremultiline"&&Pm.isSupported(e.languageId)&&!p;!e.multiline&&!m?d.stop=[`
`]:e.stop&&(d.stop=e.stop),e.maxTokens!==void 0&&(d.max_tokens=e.maxTokens);let h=Date.now(),g={endpoint:"completions",uiKind:"ghostText",temperature:JSON.stringify(c),n:JSON.stringify(l),stop:JSON.stringify(d.stop)??"unset",logit_bias:JSON.stringify(null)};Object.assign(n.properties,g);try{let y={prompt:e.prompt,languageId:e.languageId,repoInfo:e.repoInfo,ourRequestId:e.ourRequestId,engineModelId:e.engineModelId,count:l,uiKind:"ghostText",postOptions:d,headers:e.headers,extra:u},v=await t.get(vd).fetchAndStreamCompletions(t,y,n,i,r);return v.type==="failed"?{type:"failed",reason:v.reason,telemetryData:Xs(n)}:v.type==="canceled"?(co.debug(t,"Cancelled after awaiting fetchCompletions"),{type:"canceled",reason:v.reason,telemetryData:wg(n)}):a(h,v.getProcessingTime(),v.choices)}catch(y){if(Fc(y))return{type:"canceled",reason:"network request aborted",telemetryData:wg(n,{cancelledNetworkRequest:!0})};if(co.exception(t,y,"Error on ghost text request"),t.get(Iu).notifyUser(t,y),L_(t))throw y;return{type:"failed",reason:"non-abort error on ghost text request",telemetryData:Xs(n)}}}s(S3e,"genericGetCompletionsFromNetwork");function uoe(t,e,n){if(n||(n=[]),t.completionText=t.completionText.trimEnd(),!!t.completionText&&n.findIndex(r=>r.completionText.trim()===t.completionText.trim())===-1)return e.requestForNextLine&&(t.completionText=`
`+t.completionText),t}s(uoe,"postProcessChoices");async function Ygt(t,e,n,r,i){return S3e(t,e,n,r,i,"completions",async(o,a,l)=>{let u=await l[Symbol.asyncIterator]().next();if(u.done)return co.debug(t,"All choices redacted"),{type:"empty",reason:"all choices redacted",telemetryData:Xs(n)};if(r?.isCancellationRequested)return co.debug(t,"Cancelled after awaiting redactedChoices iterator"),{type:"canceled",reason:"after awaiting redactedChoices iterator",telemetryData:wg(n)};let d=u.value;if(d===void 0)return co.debug(t,"Got undefined choice from redactedChoices iterator"),{type:"empty",reason:"got undefined choice from redactedChoices iterator",telemetryData:Xs(n)};k3e(t,"performance",d,o,a),co.debug(t,`Awaited first result, id:  ${d.choiceIndex}`);let p=uoe(d,e);p&&(fq(t,e,p),co.debug(t,`GhostText first completion (index ${p?.choiceIndex}): ${JSON.stringify(p?.completionText)}`));let m=(async()=>{let h=p!==void 0?[p]:[];for await(let g of l){if(g===void 0)continue;co.debug(t,`GhostText later completion (index ${g?.choiceIndex}): ${JSON.stringify(g.completionText)}`);let y=uoe(g,e,h);y&&(h.push(y),fq(t,e,y))}})();return tm(t)&&await m,p?{type:"success",value:[doe(p,{forceSingleLine:!1}),m],telemetryData:Xs(n),telemetryBlob:n,resultType:0}:{type:"empty",reason:"got undefined processedFirstChoice",telemetryData:Xs(n)}})}s(Ygt,"getCompletionsFromNetwork");async function Kgt(t,e,n,r,i){return S3e(t,e,n,r,i,"all completions",async(o,a,l)=>{let c=[];for await(let u of l){if(r?.isCancellationRequested)return co.debug(t,"Cancelled after awaiting choices iterator"),{type:"canceled",reason:"after awaiting choices iterator",telemetryData:wg(n)};let d=uoe(u,e,c);d&&c.push(d)}if(c.length>0){for(let u of c)fq(t,e,u);k3e(t,"cyclingPerformance",c[0],o,a)}return{type:"success",value:[c,Promise.resolve()],telemetryData:Xs(n),telemetryBlob:n,resultType:3}})}s(Kgt,"getAllCompletionsFromNetwork");function doe(t,e){let n={...t};if(e.forceSingleLine){let{completionText:r}=n,i=r.match(/^\r?\n/);i?n.completionText=i[0]+r.split(`
`)[1]:n.completionText=r.split(`
`)[0]}return n}s(doe,"makeGhostAPIChoice");function T3e(t){return e=>{let n=e?.split(`
`)??[];if(n.length>t+1)return n.slice(0,t+1).join(`
`).length}}s(T3e,"takeNLines");async function Jgt(t,e,n,r,i,o,a,l,c,u,d){let p=t.get(Dt).multilineAfterAcceptLines(d),m=t.get(Em).forLanguage(t,e.textDocument.detectedLanguageId,d);switch(m){case"server":return a&&u?{blockMode:"parsing",requestMultiline:!0,finishedCb:T3e(p),stop:[`

`],maxTokens:I3e*p}:{blockMode:"server",requestMultiline:!0,finishedCb:s(h=>{},"finishedCb")};case"parsing":case"parsingandserver":case"moremultiline":default:{let h;try{h=await oAt(t,m,e.textDocument,e.position,o,l,c,r)}catch{h={requestMultiline:!1}}if(!a&&h.requestMultiline&&t.get(Dt).singleLineUnlessAccepted(d)&&(h.requestMultiline=!1),h.requestMultiline){let g;return r.trailingWs.length>0&&!r.prompt.prefix.endsWith(r.trailingWs)?g=Mo.position(e.position.line,Math.max(e.position.character-r.trailingWs.length,0)):g=e.position,{blockMode:m,requestMultiline:!0,...w3e(t,m,e.textDocument,g,h.blockPosition,n,c,!0,r.prompt,d)}}if(a&&(u||m==="moremultiline")){let g={blockMode:"parsing",requestMultiline:!0,finishedCb:T3e(p),stop:[`

`],maxTokens:I3e*p};return m==="moremultiline"&&(g.blockMode="moremultiline"),g}return{blockMode:m,requestMultiline:!1,...w3e(t,m,e.textDocument,e.position,h.blockPosition,n,c,!1,r.prompt,d)}}}}s(Jgt,"getGhostTextStrategy");function w3e(t,e,n,r,i,o,a,l,c,u){if(l&&e==="moremultiline"&&Pm.isSupported(n.detectedLanguageId)){let d=i==="empty-block"||i==="block-end"?t.get(Dt).longLookaheadSize(u):t.get(Dt).shortLookaheadSize(u);return{finishedCb:new pU(t,o,n.detectedLanguageId,!1,d,(m,h)=>{let g={prefix:o+m,prompt:{...c,prefix:c.prefix+m}};fq(t,g,h)}).getFinishedCallback(),maxTokens:zgt}}return{finishedCb:l?cP(t,n,r,a):d=>{}}}s(w3e,"buildFinishedCallback");var Xgt={isCycling:!1,promptOnly:!1,isSpeculative:!1};async function Zgt(t,e,n,r,i,o){let a=r.issuedTime,l=[];function c(b){let E=Ks();l.push([b,E-a]),a=E}s(c,"recordPerformance"),c("telemetry");let u=t.get(Dt);if(i?.isCancellationRequested)return{type:"abortedBeforeIssued",reason:"cancelled before extractPrompt",telemetryData:Xs(r)};let d=tAt(e.textDocument,e.position);if(d===void 0)return co.debug(t,"Breaking, invalid middle of the line"),{type:"abortedBeforeIssued",reason:"Invalid middle of the line",telemetryData:Xs(r)};let p=i,m=new wr.CancellationTokenSource;i=m.token;let h=Yx(t,r),g={...Xgt,...o,tokenizer:h.tokenizer},y=await Q5(t,n,e,r,i,g);return c("prompt"),y.type==="copilotContentExclusion"?(co.debug(t,"Copilot not available, due to content exclusion"),{type:"abortedBeforeIssued",reason:"Copilot not available due to content exclusion",telemetryData:Xs(r)}):y.type==="contextTooShort"?(co.debug(t,"Breaking, not enough context"),{type:"abortedBeforeIssued",reason:"Not enough context",telemetryData:Xs(r)}):y.type==="promptError"?(co.debug(t,"Error while building the prompt"),{type:"abortedBeforeIssued",reason:"Error while building the prompt",telemetryData:Xs(r)}):g.promptOnly?{type:"promptOnly",reason:"Breaking, promptOnly set to true",prompt:y}:y.type==="promptCancelled"?(co.debug(t,"Cancelled during extractPrompt"),{type:"abortedBeforeIssued",reason:"Cancelled during extractPrompt",telemetryData:Xs(r)}):y.type==="promptTimeout"?(co.debug(t,"Timeout during extractPrompt"),{type:"abortedBeforeIssued",reason:"Timeout",telemetryData:Xs(r)}):y.prompt.prefix.length===0&&y.prompt.suffix.length===0?(co.debug(t,"Error empty prompt"),{type:"abortedBeforeIssued",reason:"Empty prompt",telemetryData:Xs(r)}):i?.isCancellationRequested?(co.debug(t,"Cancelled after extractPrompt"),{type:"abortedBeforeIssued",reason:"Cancelled after extractPrompt",telemetryData:Xs(r)}):t.get(Ji).withProgress(async()=>{let[b]=M5(e.textDocument.getText(Mo.range(Mo.position(0,0),e.position))),E=u.triggerCompletionAfterAccept(r),_=t.get(Ed).hasAcceptedCurrentCompletion(b,y.prompt.suffix),k=Ai(t,wt.MultilineAfterAccept)??u.enableMultilineAfterAccept(r),P=(Ai(t,wt.AlwaysRequestMultiline)??u.enableProgressiveReveal(r))&&Pm.isSupported(e.textDocument.detectedLanguageId),N=E&&!k&&!P?_:void 0,U=y.prompt;N&&(y.prompt={...y.prompt,prefix:y.prompt.prefix+`
`});let ne=await Jgt(t,e,b,y,g.isCycling,d,_,g.isSpeculative,N??!1,k,r);if(c("strategy"),i?.isCancellationRequested)return co.debug(t,"Cancelled after requestMultiline"),{type:"abortedBeforeIssued",reason:"Cancelled after requestMultiline",telemetryData:Xs(r)};let he=eAt(t,b,U,ne.requestMultiline);c("cache");let ae=Kx(t,e.textDocument.uri),G={blockMode:ne.blockMode,languageId:e.textDocument.detectedLanguageId,repoInfo:ae,engineModelId:h.modelId,ourRequestId:n,prefix:b,prompt:y.prompt,multiline:ne.requestMultiline,indentation:uP(e.textDocument,e.position),isCycling:g.isCycling,headers:h.headers,requestForNextLine:N,stop:ne.stop,maxTokens:ne.maxTokens,afterAccept:_};G.headers={...G.headers,"X-Copilot-Async":"true","X-Copilot-Speculative":g.isSpeculative?"true":"false"};let W=uAt(t,e.textDocument,G,e.position,y,r,h,g);if(he===void 0&&!g.isCycling&&t.get(Cd).shouldWaitForAsyncCompletions(b,y.prompt)){let ce=await t.get(Cd).getFirstMatchingRequestWithTimeout(n,b,y.prompt,g.isSpeculative,W);if(c("asyncWait"),ce){let me=!ne.requestMultiline;he=[[doe(ce[0],{forceSingleLine:me})],4]}if(p?.isCancellationRequested)return co.debug(t,"Cancelled before requesting a new completion"),{type:"abortedBeforeIssued",reason:"Cancelled after waiting for async completion",telemetryData:Xs(W)}}let ue=ne.blockMode==="moremultiline"&&Pm.isSupported(e.textDocument.detectedLanguageId);if(he!==void 0&&(he[0]=he[0].map(ce=>EP(t,e.textDocument,e.position,ce,ue,co)).filter(ce=>ce!==void 0)),he!==void 0&&he[0].length===0)return co.debug(t,`Found empty inline suggestions locally via ${x5(he[1])}`),{type:"empty",reason:"cached results empty after post-processing",telemetryData:Xs(W)};if(he!==void 0&&he[0].length>0&&(!g.isCycling||he[0].length>1))co.debug(t,`Found inline suggestions locally via ${x5(he[1])}`);else{if(g.isCycling){let ce=await Kgt(t,G,W,i,ne.finishedCb);if(ce.type==="success"){let me=he?.[0]??[];ce.value[0].forEach(Ne=>{me.findIndex(Se=>Se.completionText.trim()===Ne.completionText.trim())===-1&&me.push(Ne)}),he=[me,3]}else if(he===void 0)return ce}else{if(i?.isCancellationRequested)return co.debug(t,"Cancelled before request"),{type:"canceled",reason:"before request",telemetryData:wg(W)};let me=Ygt(t,G,W,i,s((Se,Je)=>(t.get(Cd).updateCompletion(n,Se),ne.finishedCb(Se,Je)),"finishedCb"));t.get(Cd).queueCompletionRequest(n,b,y.prompt,m,me);let Ne=await t.get(Cd).getFirstMatchingRequest(n,b,y.prompt,g.isSpeculative);if(Ne===void 0)return{type:"empty",reason:"received no results from async completions",telemetryData:Xs(W)};he=[[Ne[0]],4]}c("network")}if(he===void 0)return{type:"failed",reason:"internal error: choices should be defined after network call",telemetryData:Xs(W)};let[ie,V]=he,O=ie.map(ce=>EP(t,e.textDocument,e.position,ce,ue,co)).filter(ce=>ce!==void 0),Y=Ai(t,wt.CompletionsDelay)??u.completionsDelay(r),te=Ks()-r.issuedTime,pe=Math.max(Y-te,0);if(V!==2&&!g.isCycling&&pe>0&&(co.debug(t,`Waiting ${pe}ms before returning completion`),await o2(pe),p?.isCancellationRequested))return co.debug(t,"Cancelled after completions delay"),{type:"canceled",reason:"after completions delay",telemetryData:wg(W)};let ee=[];for(let ce of O){let me=cAt(t,e.textDocument,G,ce,W),Ne=d?E3e(e.textDocument,e.position,ce):0,Je={completion:sAt(ce.choiceIndex,ce.completionText,y.trailingWs),telemetry:me,isMiddleOfTheLine:d,suffixCoverage:Ne,copilotAnnotations:ce.copilotAnnotations,clientCompletionId:ce.clientCompletionId};ee.push(Je)}return p?.isCancellationRequested?(co.debug(t,"Cancelled after post processing completions"),{type:"canceled",reason:"after post processing completions",telemetryData:wg(W)}):(W.properties.clientCompletionId=ee[0]?.clientCompletionId,W.measurements.foundOffset=ee?.[0]?.telemetry?.measurements?.foundOffset??-1,co.debug(t,`Produced ${ee.length} results from ${x5(V)} at ${W.measurements.foundOffset} offset`),n!==t.get(Ed).currentRequestId?(co.debug(t,"Current request id changed before returning"),{type:"canceled",reason:"current request id changed before returning",telemetryData:wg(W)}):(g.isSpeculative||t.get(Ed).setGhostText(b,y.prompt.suffix,O,V),c("complete"),{type:"success",value:[ee,V],telemetryData:Xs(W),telemetryBlob:W,resultType:V,performanceMetrics:l}))})}s(Zgt,"getGhostTextWithoutAbortHandling");async function foe(t,e,n,r){let i=an();t.get(Ed).currentRequestId=i;let o=await lAt(t,e.textDocument,i,r);await wI.catch(()=>{});try{return t.get(Xf).schedule(e,i,o,n,r),t.get(Tg).notifyRequest(e,i,o,n,r),await Zgt(t,e,i,o,n,r)}catch(a){if(Fc(a))return{type:"canceled",reason:"aborted at unknown location",telemetryData:wg(o,{cancelledNetworkRequest:!0})};throw a}}s(foe,"getGhostText");function eAt(t,e,n,r){let i=t.get(Ed).getCompletionsForUserTyping(e,n.suffix),o=aAt(t,e,n.suffix,r);if(i&&i.length>0){let a=(o??[]).filter(l=>!i.some(c=>c.completionText===l.completionText));return[i.concat(a),2]}if(o&&o.length>0)return[o,1]}s(eAt,"getLocalInlineSuggestion");function tAt(t,e){let n=nAt(e,t),r=rAt(e,t);return n&&!r?void 0:n&&r}s(tAt,"isInlineSuggestion");function nAt(t,e){return e.lineAt(t).text.substr(t.character).trim().length!=0}s(nAt,"isMiddleOfTheLine");function rAt(t,e){let r=e.lineAt(t).text.substr(t.character).trim();return/^\s*[)>}\]"'`]*\s*[:{;,]?\s*$/.test(r)}s(rAt,"isValidMiddleOfTheLinePosition");function iAt(t,e){return e.lineAt(t).text.trim().length===0}s(iAt,"isNewLine");var $1=class t{constructor(e=!1){this.requestMultilineOverride=e}static{s(this,"ForceMultiLine")}static{this.default=new t}};async function oAt(t,e,n,r,i,o,a,l){if(t.get($1).requestMultilineOverride)return{requestMultiline:!0};if(n.lineCount>=8e3)kt(t,"ghostText.longFileMultilineSkip",ir.createAndMarkAsIssued({languageId:n.detectedLanguageId,lineCount:String(n.lineCount),currentLine:String(r.line)}));else{if(e=="moremultiline"&&Pm.isSupported(n.detectedLanguageId))return o?{requestMultiline:!0,blockPosition:await a4e(n,r)}:{requestMultiline:!1};if(a){let d=uP(n,r),p=d.current>0?n.lineAt(r).text[0]:void 0,m={range:{start:r,end:r},newText:`
`+(p?p.repeat(d.current):"")};n=n.applyEdits([m])}if(["typescript","typescriptreact"].includes(n.detectedLanguageId)&&iAt(r,n))return{requestMultiline:!0};let u=!1;return!i&&A0(n.detectedLanguageId)?u=await TU(n,r):i&&A0(n.detectedLanguageId)&&(u=await TU(n,r)||await TU(n,n.lineAt(r).range.end)),u||["javascript","javascriptreact","python"].includes(n.detectedLanguageId)&&(u=d4e(l.prompt,n.detectedLanguageId)>.5),{requestMultiline:u}}return{requestMultiline:!1}}s(oAt,"shouldRequestMultiline");function fq(t,e,n){t.get(Bm).append(e.prefix,e.prompt.suffix,n)}s(fq,"appendToCache");function sAt(t,e,n){if(n.length>0){if(e.startsWith(n))return{completionIndex:t,completionText:e,displayText:e.substring(n.length),displayNeedsWsOffset:!1};{let r=e.substring(0,e.length-e.trimStart().length);return n.startsWith(r)?{completionIndex:t,completionText:e,displayText:e.trimStart(),displayNeedsWsOffset:!0}:{completionIndex:t,completionText:e,displayText:e,displayNeedsWsOffset:!1}}}else return{completionIndex:t,completionText:e,displayText:e,displayNeedsWsOffset:!1}}s(sAt,"adjustLeadingWhitespace");function aAt(t,e,n,r){let i=t.get(Bm).findAll(e,n);return i.length===0?(co.debug(t,"Found no completions in cache"),[]):(co.debug(t,`Found ${i.length} completions in cache`),i.map(o=>doe(o,{forceSingleLine:!r})))}s(aAt,"getCompletionsFromCache");async function lAt(t,e,n,r){let i={headerRequestId:n};r?.opportunityId&&(i.opportunityId=r.opportunityId),r?.selectedCompletionInfo?.text&&(i.completionsActive="true"),r?.isSpeculative&&(i.reason="speculative");let o=ir.createAndMarkAsIssued(i);return await t.get(Dt).updateExPValuesAndAssignments({uri:e.uri,languageId:e.detectedLanguageId},o)}s(lAt,"createTelemetryWithExp");function cAt(t,e,n,r,i){let o=r.requestId,a={choiceIndex:r.choiceIndex.toString(),clientCompletionId:r.clientCompletionId};r.generatedChoiceIndex!==void 0&&(a.originalChoiceIndex=a.choiceIndex,a.choiceIndex=(1e4*(r.generatedChoiceIndex+1)+r.choiceIndex).toString());let l=r.completionText.split(`
`).length,c={compCharLen:r.completionText.length,numLines:n.requestForNextLine?l-1:l};r.meanLogProb&&(c.meanLogProb=r.meanLogProb),r.meanAlternativeLogProb&&(c.meanAlternativeLogProb=r.meanAlternativeLogProb);let u=r.telemetryData.extendedBy(a,c);return u.issuedTime=i.issuedTime,u.measurements.timeToProduceMs=performance.now()-i.issuedTime,R3e(u,e),u.extendWithRequestId(o),u.measurements.confidence=x3e(t,u),u.measurements.quantile=v3e(t,u),co.debug(t,`Extended telemetry for ${r.telemetryData.properties.headerRequestId} with retention confidence ${u.measurements.confidence} (expected as good or better than about ${u.measurements.quantile} of all suggestions)`),u}s(cAt,"telemetryWithAddData");function uAt(t,e,n,r,i,o,a,l){let c={languageId:e.detectedLanguageId};n.requestForNextLine!==void 0&&(c.requestForNextLine=n.requestForNextLine.toString()),c.afterAccept=n.afterAccept.toString(),c.isSpeculative=l.isSpeculative.toString();let u=o.extendedBy(c);R3e(u,e);let d=n.repoInfo;u.properties.gitRepoInformation=d===void 0?"unavailable":d===0?"pending":"available",d!==void 0&&d!==0&&(u.properties.gitRepoUrl=d.url,u.properties.gitRepoHost=d.hostname,u.properties.gitRepoOwner=d.owner,u.properties.gitRepoName=d.repo,u.properties.gitRepoPath=d.pathname),u.properties.engineName=a.modelId,u.properties.engineChoiceSource=a.engineChoiceSource,u.properties.isMultiline=JSON.stringify(n.multiline),u.properties.isCycling=JSON.stringify(n.isCycling);let p=e.lineAt(r.line),m=e.getText(Mo.range(p.range.start,r)),h=e.getText(Mo.range(r,p.range.end)),g=Array.from(i.neighborSource.entries()).map(E=>[E[0],E[1].map(_=>(0,_3e.SHA256)(_).toString())]),y={beforeCursorWhitespace:JSON.stringify(m.trim()===""),afterCursorWhitespace:JSON.stringify(h.trim()===""),neighborSource:JSON.stringify(g),blockMode:n.blockMode},v={...RS(i.prompt),promptEndPos:e.offsetAt(r),promptComputeTimeMs:i.computeTimeMs};i.metadata&&(y.promptMetadata=JSON.stringify(i.metadata)),i.contextProvidersTelemetry&&(y.contextProviders=JSON.stringify(i.contextProvidersTelemetry));let b=u.extendedBy(y,v);return kt(t,"ghostText.issued",b),u}s(uAt,"telemetryIssued");function R3e(t,e){t.measurements.documentLength=e.getText().length,t.measurements.documentLineCount=e.lineCount}s(R3e,"addDocumentTelemetry");function k3e(t,e,n,r,i){let o=Date.now()-r,a=o-i,l=n.telemetryData.extendedBy({},{completionCharLen:n.completionText.length,requestTimeMs:o,processingTimeMs:i,deltaMs:a,meanLogProb:n.meanLogProb||NaN,meanAlternativeLogProb:n.meanAlternativeLogProb||NaN});l.extendWithRequestId(n.requestId),kt(t,`ghostText.${e}`,l)}s(k3e,"telemetryPerformance");var Ed=class{constructor(){this.choices=[]}static{s(this,"CurrentGhostText")}get clientCompletionId(){return this.choices[0]?.clientCompletionId}setGhostText(e,n,r,i){i!==2&&(this.prefix=e,this.suffix=n,this.choices=r)}getCompletionsForUserTyping(e,n){let r=this.getRemainingPrefix(e,n);if(r!==void 0&&B3e(this.choices[0].completionText,r))return dAt(this.choices,r)}hasAcceptedCurrentCompletion(e,n){let r=this.getRemainingPrefix(e,n);if(r===void 0)return!1;let i=r===this.choices?.[0].completionText,o=this.choices?.[0].finishReason;return i&&o==="stop"}getRemainingPrefix(e,n){if(!(this.prefix===void 0||this.suffix===void 0||this.choices.length===0)&&this.suffix===n&&e.startsWith(this.prefix))return e.substring(this.prefix.length)}};function dAt(t,e){return t.filter(n=>B3e(n.completionText,e)).map(n=>({...n,completionText:n.completionText.substring(e.length)}))}s(dAt,"adjustChoicesStart");function B3e(t,e){return t.startsWith(e)&&t.length>e.length}s(B3e,"startsWithAndExceeds");f();f();f();var A2=class{constructor(e,n,r){this._referenceCount=0;this._isDisposed=!1;this._offset=r;let i=e.get(Nn);this._tracker=i.onDidChangeTextDocument(o=>{if(o.document.uri===n){for(let a of o.contentChanges)if(a.rangeOffset+a.rangeLength<=this.offset){let l=a.text.length-a.rangeLength;this._offset=this._offset+l}}})}static{s(this,"ChangeTracker")}get offset(){return this._offset}push(e,n){if(this._isDisposed)throw new Error("Unable to push new actions to a disposed ChangeTracker");this._referenceCount++,setTimeout(()=>{e(),this._referenceCount--,this._referenceCount===0&&(this._tracker.dispose(),this._isDisposed=!0)},n)}};f();var poe=class t{constructor(e,n,r=[],i,o,a){this._textDocument=e;this._position=n;this.originalPosition=i??wr.Position.create(n.line,n.character),this.originalVersion=o??e.version,this.originalOffset=a??e.offsetAt(this.originalPosition),this._editsWithPosition=[...r]}static{s(this,"CompletionState")}get textDocument(){return this._textDocument}get position(){return this._position}get editsWithPosition(){return[...this._editsWithPosition]}updateState(e,n,r){return new t(e,n,r??this.editsWithPosition,this.originalPosition,this.originalVersion,this.originalOffset)}updatePosition(e){return this.updateState(this._textDocument,e)}addSelectedCompletionInfo(e){if(this.editsWithPosition.find(r=>r.source==="selectedCompletionInfo"))throw new Error("Selected completion info already applied");let n={range:e.range,newText:e.text};return this.applyEdits([n],!0)}applyEdits(e,n=!1){if(n&&e.length>1)throw new Error("Selected completion info should be a single edit");let r=this._textDocument,i=this._position,o=r.offsetAt(i),a=this.editsWithPosition;for(let{range:l,newText:c}of e){let u=r.getText(l),d=r.offsetAt(l.end);if(r=r.applyEdits([{range:l,newText:c}]),o<r.offsetAt(l.start)){let m={range:l,newText:c,positionAfterEdit:wr.Position.create(i.line,i.character)};n&&(m.source="selectedCompletionInfo"),a.push(m);continue}o<d&&(o=d),o+=c.length-u.length,i=r.positionAt(o);let p={range:l,newText:c,positionAfterEdit:wr.Position.create(i.line,i.character)};n&&(p.source="selectedCompletionInfo"),a.push(p)}return this.updateState(r,i,a)}};function Pg(t,e){return new poe(t,e)}s(Pg,"createCompletionState");f();function moe(t,e,n=(r,i)=>r===i?0:1){if(e.length===0||t.length===0)return{distance:e.length,startOffset:0,endOffset:0};let r=new Array(e.length+1).fill(0),i=new Array(e.length+1).fill(0),o=new Array(t.length+1).fill(0),a=new Array(t.length+1).fill(0),l=e[0];for(let u=0;u<t.length+1;u++)u===0?r[u]=1:r[u]=n(t[u-1],l,u-1,0),i[u]=u>0?u-1:0;for(let u=1;u<e.length;u++){let d=o;o=r,r=d,d=a,a=i,i=d,l=e[u],r[0]=u+1;for(let p=1;p<t.length+1;p++){let m=1+o[p],h=1+r[p-1],g=n(t[p-1],l,p-1,u)+o[p-1];r[p]=Math.min(h,m,g),r[p]===g?i[p]=a[p-1]:r[p]===m?i[p]=a[p]:i[p]=i[p-1]}}let c=0;for(let u=0;u<t.length+1;u++)r[u]<r[c]&&(c=u);return{distance:r[c],startOffset:i[c],endOffset:c}}s(moe,"editDistance");function fAt(){return new Map}s(fAt,"emptyLexDictionary");function pAt(t){let e=new Array(t.size);for(let[n,r]of t)e[r]=n;return e}s(pAt,"reverseLexDictionary");function*mAt(t){let e="",n;(l=>(l[l.Word=0]="Word",l[l.Space=1]="Space",l[l.Other=2]="Other"))(n||={});let r=0;for(let i of t){let o;new RegExp("(\\p{L}|\\p{Nd}|_)","u").test(i)?o=0:i===" "?o=1:o=2,o===r&&o!==2?e+=i:(e.length>0&&(yield e),e=i,r=o)}e.length>0&&(yield e)}s(mAt,"lexGeneratorWords");function P3e(t,e,n,r){let i=[],o=0;for(let a of n(t))r(a)&&(e.has(a)||e.set(a,e.size),i.push([e.get(a),o])),o+=a.length;return[i,e]}s(P3e,"lexicalAnalyzer");function D3e(t){return t!==" "}s(D3e,"notSingleSpace");function N3e(t,e,n=mAt){let[r,i]=P3e(t,fAt(),n,D3e),[o,a]=P3e(e,i,n,D3e);if(o.length===0||r.length===0)return{lexDistance:o.length,startOffset:0,endOffset:0,haystackLexLength:r.length,needleLexLength:o.length};let l=pAt(a),c=o.length,u=l[o[0][0]],d=l[o[c-1][0]];function p(y,v,b,E){if(E===0||E===c-1){let _=l[r[b][0]];return E==0&&_.endsWith(u)||E==c-1&&_.startsWith(d)?0:1}else return y===v?0:1}s(p,"compare");let m=moe(r.map(y=>y[0]),o.map(y=>y[0]),p),h=r[m.startOffset][1],g=m.endOffset<r.length?r[m.endOffset][1]:t.length;return g>0&&t[g-1]===" "&&--g,{lexDistance:m.distance,startOffset:h,endOffset:g,haystackLexLength:r.length,needleLexLength:o.length}}s(N3e,"lexEditDistance");f();function L3e(t,e){return t.compType==="partial"?t.acceptedLength:e.length}s(L3e,"computeCompCharLen");function F3e(t,e){return e.compType==="partial"?t.substring(0,e.acceptedLength):t}s(F3e,"computeCompletionText");function M3e(t,e,n){return t.displayText!==t.insertText&&t.insertText.trim()===t.displayText||n===3?e:e-t.range.end.character+t.range.start.character}s(M3e,"computePartialLength");var vv=new Tt("postInsertion"),Q3e=[{seconds:15,captureCode:!1,captureRejection:!1},{seconds:30,captureCode:!0,captureRejection:!0},{seconds:120,captureCode:!1,captureRejection:!1},{seconds:300,captureCode:!1,captureRejection:!1},{seconds:600,captureCode:!1,captureRejection:!1}],O3e=50,hAt=1500,gAt=.5,AAt=500,hoe={triggerPostInsertionSynchroneously:!1,captureCode:!1,captureRejection:!1};async function U3e(t,e,n,r,i){let o=await t.get(Nr).getOrReadTextDocumentWithFakeClientProperties({uri:e});if(o.status!=="valid")return vv.info(t,`Could not get document for ${e}. Maybe it was closed by the editor.`),{prompt:{prefix:"",suffix:"",isFimEnabled:!1},capturedCode:"",terminationOffset:0};let a=o.document,l=a.getText(),c=l.substring(0,r),u=a.positionAt(r),d=await Q5(t,n.properties.headerRequestId,Pg(a,u),n),p=d.type==="prompt"?d.prompt:{prefix:c,suffix:"",isFimEnabled:!1};if(p.isFimEnabled&&i!==void 0){let m=l.substring(r,i);return p.suffix=l.substring(i),{prompt:p,capturedCode:m,terminationOffset:0}}else{let m=l.substring(r),h=bie(c,r,a.detectedLanguageId),y=await iRe(h,void 0)(m),v=Math.min(l.length,r+(y?y*2:AAt)),b=l.substring(r,v);return{prompt:p,capturedCode:b,terminationOffset:y??-1}}}s(U3e,"captureCode");function pq(t,e,n,r,i){i.forEach(({completionText:c,completionTelemetryData:u})=>{vv.debug(t,`${e}.rejected choiceIndex: ${u.properties.choiceIndex}`),B4e(t,e,u)});let o=new A2(t,r,n-1),a=new A2(t,r,n),l=s(async c=>{vv.debug(t,`Original offset: ${n}, Tracked offset: ${o.offset}`);let{completionTelemetryData:u}=i[0],{prompt:d,capturedCode:p,terminationOffset:m}=await U3e(t,r,u,o.offset+1,a.offset),h={hypotheticalPromptJson:JSON.stringify({prefix:d.prefix,context:d.context}),hypotheticalPromptSuffixJson:JSON.stringify(d.suffix)},g=u.extendedBy({...h,capturedCodeJson:JSON.stringify(p)},{timeout:c.seconds,insertionOffset:n,trackedOffset:o.offset,terminationOffsetInCapturedCode:m});vv.debug(t,`${e}.capturedAfterRejected choiceIndex: ${u.properties.choiceIndex}`,g),kt(t,e+".capturedAfterRejected",g,1)},"checkInCode");Q3e.filter(c=>c.captureRejection).map(c=>o.push(Eu(t,()=>l(c),"postRejectionTasks"),c.seconds*1e3))}s(pq,"postRejectionTasks");function y2(t,e,n,r,i,o,a,l){let c=o.extendedBy({compType:a.compType},{compCharLen:L3e(a,n)});vv.debug(t,`${e}.accepted choiceIndex: ${c.properties.choiceIndex}`),k4e(t,e,c);let u=n;n=F3e(n,a);let d=n.trim(),p=new A2(t,i,r),m=new A2(t,i,r+n.length),h=s(async g=>{await vAt(t,e,d,r,i,g,c,p,m)},"stillInCodeCheck");if(hoe.triggerPostInsertionSynchroneously&&tm(t)){let g=h({seconds:0,captureCode:hoe.captureCode,captureRejection:hoe.captureRejection});t.get(ba).register(g)}else Q3e.map(g=>p.push(Eu(t,()=>h(g),"postInsertionTasks"),g.seconds*1e3));Eu(t,yAt,"post insertion citation check")(t,i,u,n,r,l)}s(y2,"postInsertionTasks");async function yAt(t,e,n,r,i,o){if(!o||(o.ip_code_citations?.length??0)<1)return;let a=await t.get(Nn).getTextDocument({uri:e});if(a){let l=goe(a.getText(),r,O3e,i);l.stillInCodeHeuristic&&(i=l.foundOffset)}for(let l of o.ip_code_citations){let c=CAt(n.length,r.length,l.start_offset);if(c===void 0){vv.info(t,`Full completion for ${e} contains a reference matching public code, but the partially inserted text did not include the match.`);continue}let u=i+c,d=a?.positionAt(u),p=i+xAt(n.length,r.length,l.stop_offset),m=a?.positionAt(p),h=d&&m?a?.getText({start:d,end:m}):"<unknown>";await t.get(I0).handleIPCodeCitation(t,{inDocumentUri:e,offsetStart:u,offsetEnd:p,version:a?.version,location:d&&m?{start:d,end:m}:void 0,matchingText:h,details:l.details.citations})}}s(yAt,"citationCheck");function CAt(t,e,n){if(!(e<t&&n>e))return n}s(CAt,"computeCitationStart");function xAt(t,e,n){return e<t?Math.min(n,e):n}s(xAt,"computeCitationEnd");function goe(t,e,n,r){let i=t.substring(Math.max(0,r-n),Math.min(t.length,r+e.length+n)),o=N3e(i,e),a=o.lexDistance/o.needleLexLength,{distance:l}=moe(i.substring(o.startOffset,o.endOffset),e);return{relativeLexEditDistance:a,charEditDistance:l,completionLexLength:o.needleLexLength,foundOffset:o.startOffset+Math.max(0,r-n),lexEditDistance:o.lexDistance,stillInCodeHeuristic:a<=gAt?1:0}}s(goe,"find");async function vAt(t,e,n,r,i,o,a,l,c){let u=await t.get(Nr).getOrReadTextDocument({uri:i});if(u.status==="valid"){let p=u.document.getText(),m=goe(p,n,O3e,l.offset);m.stillInCodeHeuristic||(m=goe(p,n,hAt,l.offset)),vv.debug(t,`stillInCode: ${m.stillInCodeHeuristic?"Found":"Not found"}! Completion '${n}' in file ${i}. lexEditDistance fraction was ${m.relativeLexEditDistance}. Char edit distance was ${m.charEditDistance}. Inserted at ${r}, tracked at ${l.offset}, found at ${m.foundOffset}. choiceIndex: ${a.properties.choiceIndex}`);let h=a.extendedBy({},{timeout:o.seconds,insertionOffset:r,trackedOffset:l.offset}).extendedBy({},m);if(kt(t,e+".stillInCode",h),o.captureCode){let{prompt:g,capturedCode:y,terminationOffset:v}=await U3e(t,i,h,l.offset,c.offset),b={hypotheticalPromptJson:JSON.stringify({prefix:g.prefix,context:g.context}),hypotheticalPromptSuffixJson:JSON.stringify(g.suffix)},E=a.extendedBy({...b,capturedCodeJson:JSON.stringify(y)},{timeout:o.seconds,insertionOffset:r,trackedOffset:l.offset,terminationOffsetInCapturedCode:v});vv.debug(t,`${e}.capturedAfterAccepted choiceIndex: ${a.properties.choiceIndex}`,h),kt(t,e+".capturedAfterAccepted",E,1)}}}s(vAt,"checkStillInCode");var Aoe=new Tt("ghostText"),Fu=class{static{s(this,"LastGhostText")}#e;#t;#i=[];get position(){return this.#e}get shownCompletions(){return this.#i||[]}get uri(){return this.#t}resetState(){this.#t=void 0,this.#e=void 0,this.#i=[]}setState({uri:e},n){this.#t=e,this.#e=n,this.#i=[]}resetPartialAcceptanceState(){this.partiallyAcceptedLength=0}};function bAt(t){let e=[];return t.shownCompletions.forEach(n=>{if(n.displayText&&n.telemetry){let r,i;t.partiallyAcceptedLength?(r=n.displayText.substring(t.partiallyAcceptedLength-1),i=n.telemetry.extendedBy({compType:"partial"},{compCharLen:r.length})):(r=n.displayText,i=n.telemetry);let o={completionText:r,completionTelemetryData:i,offset:n.offset};e.push(o)}}),e}s(bAt,"computeRejectedCompletions");function yoe(t,e){let n=t.get(Fu);if(!n.position||!n.uri)return;let r=bAt(n);r.length>0&&pq(t,"ghostText",e??r[0].offset,n.uri,r),n.resetState(),n.resetPartialAcceptanceState()}s(yoe,"rejectLastShown");function q3e(t,e,n,r){let i=t.get(Fu);return i.position&&i.uri&&!(i.position.line===n.line&&i.position.character===n.character&&i.uri.toString()===e.uri.toString())&&r!==2&&yoe(t,e.offsetAt(i.position)),i.setState(e,n),i.index}s(q3e,"setLastShown");function W3e(t,e){let n=t.get(Fu);if(n.index=e.index,!n.shownCompletions.find(r=>r.index===e.index)&&(e.uri===n.uri&&n.position?.line===e.position.line&&n.position?.character==e.position.character&&n.shownCompletions.push(e),e.displayText)){let r=e.resultType!==0;Aoe.debug(t,`[${e.telemetry.properties.headerRequestId}] shown choiceIndex: ${e.telemetry.properties.choiceIndex}, fromCache ${r}`),e.telemetry.measurements.compCharLen=e.displayText.length,hU(t,"ghostText",e)}}s(W3e,"handleGhostTextShown");function mq(t,e){let n=t.get(Fu);n.resetState(),Aoe.debug(t,"Ghost text post insert");let r={compType:"full"};return n.resetPartialAcceptanceState(),y2(t,"ghostText",e.displayText,e.offset,e.uri,e.telemetry,r,e.copilotAnnotations)}s(mq,"handleGhostTextPostInsert");function H3e(t,e,n,r=0){let i=t.get(Fu);Aoe.debug(t,"Ghost text partial post insert");let o=M3e(e,n,r);if(o)return i.partiallyAcceptedLength=n,y2(t,"ghostText",e.displayText,e.offset,e.uri,e.telemetry,{compType:"partial",acceptedLength:o},e.copilotAnnotations)}s(H3e,"handlePartialGhostTextPostInsert");function G3e(t){let e=new u5;return e.set(fc,t),e.set(yg,new yg),e.set(zi,new zi),e.set(Bm,new Bm),e.set(Am,new Am),e.set(Dt,new Dt(e)),e.set(sg,new sg),e.set(sc,new sc(e)),e.set(Nl,new Nl),e.set(Iu,new Iu),e.set(vd,new lP),e.set(Em,new MS),e.set(Cm,new o8),e.set(ba,new ba),e.set(Tg,new Tg(e)),e.set(Nr,new Nr(e)),e.set(Fm,cq(e)),e.set(Fu,new Fu),e.set(Ed,new Ed),e.set($1,$1.default),e.set(O1,new O1(e)),e.set(Lf,new Lf(e)),e.set(Fl,new Fl),e.set(Cd,new Cd(e)),e.set(Go,new Go),e.set(zf,new zf(e)),e.set(Jf,new Jf),e}s(G3e,"createCommonContext");f();f();var hq=class extends Error{static{s(this,"FetchSpeculationCanceledException")}constructor(e){super(e),this.name="FetchSpeculationCanceledException"}};f();var U5=class extends Error{static{s(this,"FetchSpeculationFailedException")}constructor(e){super(e),this.name="FetchSpeculationFailedException"}};var gjn=I.Object({prompt:I.String(),speculation:I.String(),languageId:I.String(),stops:I.Array(I.String())}),IP=class{static{s(this,"SpeculationFetcher")}constructor(e){this.ctx=e}async fetchSpeculation(e,n){let i={prompt:e.prompt,speculation:e.speculation,engineModelId:"copilot-centralus-h100",uiKind:"editsPanel",stops:e.stops},o=await this.ctx.get(Dt).updateExPValuesAndAssignments(),a=await this.ctx.get(vd).fetchAndStreamSpeculation(this.ctx,i,o,(l,c)=>{},n);switch(a.type){case"success":return a;case"canceled":throw new hq(a.reason);case"failed":throw new U5(a.reason)}}};f();f();var j3e=je(require("node:util"));function V3e(t,...e){return`[${t}] ${EAt(e)}`}s(V3e,"formatLogMessage");function EAt(t){return j3e.default.formatWithOptions({maxStringLength:1/0},...t)}s(EAt,"format");function gq(t){return G1e(t)}s(gq,"verboseLogging");var Aq=class extends Va{constructor(n){super();this.console=n}static{s(this,"ConsoleLog")}logIt(n,r,i,...o){r==1?this.console.error(`[${i}]`,...o):(r==2||gq(n))&&this.console.warn(`[${i}]`,...o)}};f();var $3e=require("node:util");var q5=class extends Ag{static{s(this,"TelemetryLogSenderImpl")}sendError(e,n,...r){yI(e,"log",ir.createAndMarkAsIssued({context:n,level:vI[1],message:IAt(...r)}),1)}sendException(e,n,r){wa(e,n,r)}};function IAt(...t){return t.map(e=>(0,$3e.inspect)(e)).join(" ")}s(IAt,"telemetryMessage");f();var aFe=je(require("crypto")),lFe=je(require("fs")),YH=je(oFe()),cFe=require("tls"),uFe=je(sFe());var K4=new Tt("certificates"),rl=class{static{s(this,"RootCertificateReader")}};function KH(t,e=process.platform){return new Hce(t,[new Gce,new jce,T3t(t,e)])}s(KH,"getRootCertificateReader");function T3t(t,e){switch(e){case"linux":return new Vce(t);case"darwin":return new $ce(t);case"win32":return new zce(t);default:return new Yce}}s(T3t,"createPlatformReader");var Wce=class extends rl{constructor(n,r){super();this.ctx=n;this.delegate=r}static{s(this,"ErrorHandlingCertificateReader")}async getAllRootCAs(){try{return await this.delegate.getAllRootCAs()}catch(n){return K4.warn(this.ctx,"Failed to read root certificates:",n),[]}}},Hce=class extends rl{constructor(n,r){super();this.ctx=n;this.delegates=r.map(i=>new Wce(n,i))}static{s(this,"CachingRootCertificateReader")}async getAllRootCAs(){return this.certificates||(this.certificates=this.removeExpiredCertificates((await Promise.all(this.delegates.map(n=>n.getAllRootCAs()))).flat())),this.certificates}removeExpiredCertificates(n){let r=Date.now(),i=n.filter(o=>{try{let a=new aFe.X509Certificate(o),l=Date.parse(a.validTo);return isNaN(l)||l>r}catch(a){return K4.warn(this.ctx,"Failed to parse certificate",o,a),!1}});return n.length!==i.length&&K4.info(this.ctx,`Removed ${n.length-i.length} expired certificates`),i}},Gce=class extends rl{static{s(this,"NodeTlsRootCertificateReader")}getAllRootCAs(){return cFe.rootCertificates}},jce=class extends rl{static{s(this,"EnvironmentVariableRootCertificateReader")}async getAllRootCAs(){let e=process.env.NODE_EXTRA_CA_CERTS;return e?await dFe(e):[]}},Vce=class extends rl{constructor(n){super();this.ctx=n}static{s(this,"LinuxRootCertificateReader")}async getAllRootCAs(){let n=[];for(let r of["/etc/ssl/certs/ca-certificates.crt","/etc/ssl/certs/ca-bundle.crt"]){let i=await dFe(r);K4.debug(this.ctx,`Read ${i.length} certificates from ${r}`),n=n.concat(i)}return n}},$ce=class extends rl{constructor(n){super();this.ctx=n}static{s(this,"MacRootCertificateReader")}getAllRootCAs(){let n=YH.get({excludeBundled:!1,format:YH.Format.pem});return K4.debug(this.ctx,`Read ${n.length} certificates from Mac keychain`),n}},zce=class extends rl{constructor(n){super();this.ctx=n}static{s(this,"WindowsRootCertificateReader")}getAllRootCAs(){let n=uFe.all();return K4.debug(this.ctx,`Read ${n.length} certificates from Windows store`),n}},Yce=class extends rl{static{s(this,"UnsupportedPlatformRootCertificateReader")}getAllRootCAs(){return Promise.reject(new Error("No certificate reader available for unsupported platform"))}};async function dFe(t){let e;try{e=await lFe.promises.readFile(t,{encoding:"utf8"})}catch{return[]}let n=e.match(/-----BEGIN CERTIFICATE-----[\s\S]*?-----END CERTIFICATE-----/g);if(!n)return[];let r=n.filter(o=>o.length>0),i=new Set(r);return Array.from(i)}s(dFe,"readCertsFromFile");f();var EFe=je(require("http"));var K3t=407,bc=new Tt("proxySocketFactory"),eA=class{static{s(this,"ProxySocketFactory")}},J2=class extends Error{static{s(this,"ProxySocketError")}constructor(e,n,r){super(e),this.code=n?.code,this.syscall=n?.syscall,this.errno=n?.errno,/^Failed to establish a socket connection to proxies:/.test(n?.message??"")?this.code="ProxyFailedToEstablishSocketConnection":/^InitializeSecurityContext:/.test(n?.message??"")?this.code="ProxyInitializeSecurityContext":n?.message==="Miscellaneous failure (see text): Server not found in Kerberos database"?this.code="ProxyKerberosServerNotFound":/^Unspecified GSS failure. {2}Minor code may provide more information: No Kerberos credentials available/.test(n?.message??"")&&(this.code="ProxyGSSFailureNoKerberosCredentialsAvailable"),r!==void 0&&(this.code=r)}};function JH(t){return new Xce(t,new Zce(t))}s(JH,"getProxySocketFactory");var Xce=class extends eA{constructor(n,r,i=new HD,o=process.platform){super();this.ctx=n;this.delegate=r;this.kerberosLoader=i;this.platform=o;this.successfullyAuthorized=new Kn(20)}static{s(this,"KerberosProxySocketFactory")}async createSocket(n,r){this.successfullyAuthorized.get(this.getProxyCacheKey(r))&&(bc.debug(this.ctx,"Proxy authorization already successful once, skipping 407 round trip"),await this.reauthorize(n,r));try{return await this.delegate.createSocket(n,r)}catch(i){if(i instanceof J2&&i.code===`ProxyStatusCode${K3t}`){bc.debug(this.ctx,"Proxy authorization required, trying to authorize first time");let o=await this.authorizeAndCreateSocket(n,r);if(o)return bc.debug(this.ctx,"Proxy authorization successful, caching result"),kt(this.ctx,"proxy.kerberosAuthorized"),this.successfullyAuthorized.set(this.getProxyCacheKey(r),!0),o}throw i}}async reauthorize(n,r){let i=await this.authorize(r);i&&(bc.debug(this.ctx,"Proxy re-authorization successful, received token"),n.headers["Proxy-Authorization"]="Negotiate "+i)}async authorizeAndCreateSocket(n,r){let i=await this.authorize(r);if(bc.debug(this.ctx,"Proxy authorization successful, received token"),i)return bc.debug(this.ctx,"Trying to create socket with proxy authorization"),n.headers["Proxy-Authorization"]="Negotiate "+i,await this.delegate.createSocket(n,r)}async authorize(n){bc.debug(this.ctx,"Loading kerberos module");let r=await this.kerberosLoader.load(),i=this.computeSpn(n);bc.debug(this.ctx,"Initializing kerberos client using spn",i);let o=await r.initializeClient(i);bc.debug(this.ctx,"Perform client side kerberos step");let a=await o.step("");return bc.debug(this.ctx,"Received kerberos server response"),a}computeSpn(n){let r=n.kerberosServicePrincipal;if(r)return bc.debug(this.ctx,"Using configured kerberos spn",r),r;let i=this.platform==="win32"?`HTTP/${n.hostname}`:`HTTP@${n.hostname}`;return bc.debug(this.ctx,"Using default kerberos spn",i),i}getProxyCacheKey(n){return`${n.hostname}:${n.port}`}},Zce=class extends eA{constructor(n){super();this.ctx=n;this.userAgent=`GithubCopilot/${this.ctx.get(zi).getVersion()}`}static{s(this,"TunnelingProxySocketFactory")}async createSocket(n,r){let i=this.createConnectRequestOptions(n,r);return new Promise((o,a)=>{bc.debug(this.ctx,"Attempting to establish connection to proxy");let l=EFe.request(i);l.useChunkedEncodingByDefault=!1,l.once("connect",(c,u,d)=>{bc.debug(this.ctx,"Socket Connect returned status code",c.statusCode),l.removeAllListeners(),u.removeAllListeners(),c.statusCode!==200?(u.destroy(),a(new J2(`tunneling socket could not be established, statusCode=${c.statusCode}`,void 0,`ProxyStatusCode${c.statusCode}`))):d.length>0?(u.destroy(),a(new J2(`got non-empty response body from proxy, length=${d.length}`,void 0,"ProxyNonEmptyResponseBody"))):(bc.debug(this.ctx,"Successfully established tunneling connection to proxy"),o(u))}),l.once("error",c=>{bc.debug(this.ctx,"Proxy socket connection error",c.message),l.removeAllListeners(),a(new J2(`tunneling socket could not be established, cause=${c.message}`,c))}),l.on("timeout",()=>{bc.debug(this.ctx,"Proxy socket connection timeout"),a(new J2(`tunneling socket could not be established, proxy socket connection timeout while connecting to ${i.hostname}:${i.port}`,void 0,"ProxyTimeout"))}),l.end()})}createConnectRequestOptions(n,r){let i=`${n.hostname}:${n.port}`,o={hostname:r.hostname,port:r.port,method:"CONNECT",path:i,agent:!1,headers:{host:i,"Proxy-Connection":"keep-alive","User-Agent":this.userAgent},timeout:n.timeout};return n.localAddress&&(o.localAddress=n.localAddress),this.configureProxyAuthorization(o,n,r.authorization),o}configureProxyAuthorization(n,r,i){n.headers["Proxy-Authorization"]=[],i&&n.headers["Proxy-Authorization"].push("Basic "+Buffer.from(i).toString("base64")),typeof r.headers?.["Proxy-Authorization"]=="string"&&n.headers["Proxy-Authorization"].push(r.headers["Proxy-Authorization"])}},HD=class{static{s(this,"KerberosLoader")}load(){return Promise.resolve().then(()=>je(bFe()))}};f();var _Fe=require("node:os");var J3t=new Tt("repository"),X2="\\\\",SFe="(?:[#;].*)",Z4=`(?:[^"${X2}]|${X2}.)`,X3t="[0-9A-Za-z-]",IFe=`[A-Za-z]${X3t}*`,RFe=`\\s*${SFe}?$`,kFe=`(?:[^"${X2};#]|${X2}.)`,Z3t=`(?:"${Z4}*"|"${Z4}*(?<strCont>${X2})$)`,ekt=`(?:${kFe}|${Z3t})+`,tkt=`(?:(?<cont>${X2})$)`,BFe=`(?<value>${ekt})${tkt}?${RFe}`,TFe=new RegExp(`^${BFe}`),nkt=new RegExp(`^(?<value>${Z4}*(?:(?<strCont>${X2})$|(?<quote>")))`),rkt=new RegExp(`^\\s*(?:(?<key>${IFe})\\s*=\\s*${BFe}|(?<soloKey>${IFe})${RFe})`),ikt=new RegExp(`(?<value>${kFe}+)|"(?<string>${Z4}*)"`,"g"),wFe="[-.0-9A-Za-z]+",okt=`\\s+"(?<ext>${Z4}*)"`,skt=`\\s+"(?<extOnly>${Z4}*)"`,akt=new RegExp(`^\\s*\\[(?:(?<simple>${wFe})${okt}|${skt}|(?<simpleOnly>${wFe}))\\]`),lkt=new RegExp(`^\\s*${SFe}$`),eue=class{constructor(e){this.content=e;this.stopped=!1;this.section="";this.line="";this.lineNum=0;this.lines=[];this.linesWithErrors=[]}static{s(this,"GitConfigParser")}parse(e){for(this.stopped=!1,this.section="",this.line="",this.linesWithErrors=[],this.configValueHandler=e,this.lines=this.content.split(/\r?\n/),this.lineNum=0;!this.stopped&&this.lineNum<this.lines.length;this.lineNum++)this.line=this.lines[this.lineNum],this.parseSectionStart(),this.parseConfigPair(),this.parseComment(),/^\s*$/.test(this.line)||this.errorAt(this.lineNum+1)}stop(){this.stopped=!0}hasErrors(){return this.linesWithErrors.length>0}errorAt(e){this.linesWithErrors.push(e)}parseSectionStart(){let e=this.line.match(akt);e&&(e.groups?.simple?this.section=e.groups.simple.toLowerCase()+"."+this.unescapeBaseValue(e.groups.ext):e.groups?.extOnly?this.section="."+this.unescapeBaseValue(e.groups.extOnly):this.section=e.groups.simpleOnly.toLowerCase(),this.line=this.line.slice(e[0].length))}unescapeBaseValue(e){return e.replace(/\\(.)/g,"$1")}parseConfigPair(){let e=this.line.match(rkt);if(e){if(e.groups?.key){let n=this.handleContinued(e);this.configValueHandler?.(this.nameWithSection(e.groups.key.toLowerCase()),n)}else e.groups?.soloKey&&this.configValueHandler?.(this.nameWithSection(e.groups.soloKey.toLowerCase()),"");this.line=""}}handleContinued(e){let n=e,r=[this.matchedValue(n)];for(;n?.groups?.cont||n?.groups?.strCont;){if(this.line=this.lines[++this.lineNum],this.lineNum>=this.lines.length){this.errorAt(this.lineNum);break}n.groups.strCont?(n=this.line.match(nkt),n?(r.push(this.matchedValue(n)),n.groups?.quote&&(n=this.line.slice(n[0].length).match(TFe),n?r.push(this.matchedValue(n)):this.errorAt(this.lineNum+1))):this.errorAt(this.lineNum+1)):(n=this.line.match(TFe),n?r.push(this.matchedValue(n)):this.errorAt(this.lineNum+1))}return this.normalizeValue(r.join(""))}matchedValue(e){return e.groups.strCont?e.groups.value.slice(0,-1):e.groups.value}normalizeValue(e){let n=!1,r=[...e.matchAll(ikt)].map(i=>i.groups?.value?(n=!0,this.unescapeValue(i.groups.value.replace(/\s/g," "))):(n=!1,this.unescapeValue(i.groups.string))).join("");return n?r.trimEnd():r}unescapeValue(e){let n={n:`
`,t:"	",b:"\b"};return e.replace(/\\(.)/g,(r,i)=>n[i]||i)}nameWithSection(e){return this.section?this.section+"."+e:e}parseComment(){lkt.test(this.line)&&(this.line="")}},XH=class extends km{static{s(this,"GitParsingConfigLoader")}async getConfig(e,n){let r=await O1.getRepoConfigLocation(e,n);if(!r)return;let i=await this.getParsedConfig(e,r);if(i)return this.mergeConfig(await this.baseConfig(e,r),i)}mergeConfig(...e){return e.filter(n=>n!==void 0).reduce((n,r)=>n.concat(r),new i2)}async getParsedConfig(e,n,r=!0){let i=await this.tryLoadConfig(e,n,r);if(!i)return;let o=new eue(i),a=new i2;return o.parse((l,c)=>a.add(l,c)),a}async tryLoadConfig(e,n,r){try{return await e.get(po).readFileString(n)}catch(i){(r||!(i instanceof Error)||i.code!=="ENOENT")&&J3t.warn(e,`Failed to load git config from ${JSON.stringify(n)}:`,i);return}}async baseConfig(e,n){let r=await this.commondirConfigUri(e,n),i=ko(this.xdgConfigUri(),"git","config"),o=ko(this.homeUri(),".gitconfig");return this.mergeConfig(await this.getParsedConfig(e,i,!1),await this.getParsedConfig(e,o,!1),r?await this.getParsedConfig(e,r,!1):void 0)}async commondirConfigUri(e,n){if(Ti(n).toLowerCase()!=="config.worktree")return;let r=p0(n),i=ko(r,"commondir");try{let o=(await e.get(po).readFileString(i)).trimEnd();return ko(bI(r,o),"config")}catch{return}}xdgConfigUri(){return typeof process<"u"&&process.env.XDG_CONFIG_HOME?pl(process.env.XDG_CONFIG_HOME):ko(this.homeUri(),".config")}homeUri(){return pl((0,_Fe.homedir)())}};f();var PFe=require("child_process");var ZH=class extends km{static{s(this,"GitCLIConfigLoader")}runCommand(e,n,r){return new Promise((i,o)=>{(0,PFe.execFile)(n,r,{cwd:e},(a,l)=>{a?o(a):i(l)})})}async tryRunCommand(e,n,r,i){try{return await this.runCommand(n,r,i)}catch(o){R5e.info(e,`Failed to run command '${r}' in ${n}:`,o);return}}async getConfig(e,n){let r=Ho(n);if(r===void 0)return;let i=await this.tryRunCommand(e,r,"git",["-c","safe.directory=*","config","--list","--null",...this.extraArgs()]);return i?this.extractConfig(i):void 0}extractConfig(e){let n=new i2;for(let r of e.split("\0").filter(i=>i)){let i=r.split(`
`,1)[0],o=r.slice(i.length+1);n.add(i,o)}return n}extraArgs(){return[]}};f();var NFe=je(require("node:events"));var DFe="onWorkspaceChanged",O0=class{constructor(){this.emitter=new NFe.default}static{s(this,"WorkspaceNotifier")}onChange(e){this.emitter.on(DFe,e)}emit(e){this.emitter.emit(DFe,e)}};function LFe(t){let e=G3e(t);return ckt(e),e.set(rl,KH(e)),e.set(eA,JH(e)),e.set(km,new zO([new ZH,new XH])),e.set(O0,new O0),e.set(IP,new IP(e)),e}s(LFe,"createProductionContext");function ckt(t){t.set(Cf,Cf.fromEnvironment(!1)),t.set(Ag,new q5),t.set(Va,new Aq(console))}s(ckt,"setupRudimentaryLogging");var ter=new Tt("context");f();f();var Ln=new Tt("chat");f();f();var Al=(o=>(o.System="system",o.User="user",o.Assistant="assistant",o.Function="function",o.Tool="tool",o))(Al||{});function Vn(t){return t?(t=U0(t),typeof t=="string"?t:t.map(e=>"text"in e?e.text:"").join("")):""}s(Vn,"getTextPart");var FFe=s((t,e)=>I.Unsafe({type:"string",enum:t,description:e?.description}),"StringEnum"),MFe=I.Optional(I.Object({agentSlug:I.String(),state:I.Union([I.Literal("accepted"),I.Literal("dismissed")]),confirmation:I.Any()}));function Zv(t){if(typeof t.function.arguments=="string")try{return JSON.parse(t.function.arguments)}catch{return{}}return t.function.arguments}s(Zv,"parseToolCallArguments");function QFe(t){return typeof t.function.arguments=="object"&&(t.function.arguments=JSON.stringify(t.function.arguments)),t}s(QFe,"toOpenAIToolCall");function OFe(t,e,n,r,i,o,a,l){let c=JSON.parse(JSON.stringify(e));return n.tool_calls&&(c.tool_calls=n.tool_calls),A5(t,[c],l),{message:e,choiceIndex:r,requestId:i,blockFinished:o,finishReason:a,tokens:n.tokens,numTokens:n.tokens.length,tool_calls:n.tool_calls,function_call:n.function_call,telemetryData:l}}s(OFe,"convertToChatCompletion");function GD(t){return Array.isArray(t)&&t.every(e=>"type"in e&&!("role"in e))}s(GD,"isChatCompletionContentPartArray");function eG(t){return Array.isArray(t)&&t.every(e=>"role"in e)}s(eG,"isChatMessageArray");function U0(t){if(typeof t=="string")return t;if(GD(t))return t;if(eG(t)){let e=t.filter(r=>r.role==="assistant"),n=[];for(let r of e)Array.isArray(r.content)?n.push(...r.content):n.push({type:"text",text:r.content});return n}return""}s(U0,"resolveAsChatMessageContent");function jD(t,e){return(typeof t=="string"||GD(t))&&(t=[{role:"assistant",content:t}]),t.push(e),t}s(jD,"appendChatMessageContent");function tue(t,e){if(t){if(typeof t=="string"||GD(t))return[{role:"assistant",content:t}];if(eG(t))return e?t:t.filter(n=>n.role!=="tool").map(n=>n.tool_calls?{...n,tool_calls:void 0,tool_call_id:void 0}:n)}else return[];return[]}s(tue,"resolveResponseAsChatMessages");f();var nue=new Tt("streamMessages");function UFe(t,e,n){let r=e.solution.text.join(""),i=!1;e.finishOffset!==void 0&&(nue.debug(t,`message ${e.index}: early finish at offset ${e.finishOffset}`),r=r.substring(0,e.finishOffset),i=!0),nue.info(t,`message ${e.index} returned. finish reason: [${e.reason}]`),nue.debug(t,`message ${e.index} details: finishOffset: [${e.finishOffset}] completionId: [{${e.requestId.completionId}}] created: [{${e.requestId.created}}]`);let o=aP(e.solution),a={role:"assistant",content:r};return OFe(t,a,o,e.index,e.requestId,i,e.reason??"",n)}s(UFe,"prepareChatCompletionForReturn");var hp=new Tt("fetchChat"),tG=class{static{s(this,"OpenAIChatMLFetcher")}async fetchAndStreamChat(e,n,r,i,o){let a=await this.fetchWithParameters(e,n.endpoint,n,r,o);if(a==="not-sent")return{type:"canceled",reason:"before fetch request"};if(o?.isCancellationRequested){let l=a.body();try{l.destroy()}catch(c){hp.exception(e,c,"Error destroying stream")}return{type:"canceled",reason:"after fetch request"}}if(a.status!==200){let l=this.createTelemetryData(n.endpoint,e,n);return this.handleError(e,l,a)}if(e.get(zf).processQuotaHeaders(a.headers),n.postOptions?.stream===!1){let l=await a.text(),c=JSON.parse(l),u=c.choices!=null?c.choices[0].message:{role:"assistant",content:""},d=a.headers.get("X-Request-ID")??an(),p={blockFinished:!1,choiceIndex:0,finishReason:"stop",message:u,tokens:Vn(u.content).split(" "),requestId:{headerRequestId:d,completionId:c.id?c.id:"",created:c.created?Number(c.created):0,deploymentId:"",serverExperiments:""},telemetryData:r,numTokens:0},m=Vn(u.content);return await i(m,{text:m,copilotReferences:c.copilot_references}),{type:"success",chatCompletions:async function*(){yield p}(),getProcessingTime:s(()=>y5(a),"getProcessingTime")}}else{let c=mv.create(e,n.count,a,r,[],o).processSSE(i);return{type:"success",chatCompletions:W1(c,d=>UFe(e,d,r)),getProcessingTime:s(()=>y5(a),"getProcessingTime")}}}createTelemetryData(e,n,r){return ir.createAndMarkAsIssued({endpoint:e,engineName:r.engineName,uiKind:r.uiKind,headerRequestId:r.ourRequestId})}async fetchWithParameters(e,n,r,i,o){let a={messages:r.messages,tools:r.tools,tool_choice:r.tool_choice,model:r.model,temperature:C5(e,r.count),top_p:dU(e),n:r.count,stop:[`


`],copilot_thread_id:r.copilot_thread_id},l=B1(r.repoInfo);return l!==void 0&&(a.nwo=l),r.postOptions&&Object.assign(a,r.postOptions),r.intent&&(a.intent=r.intent,r.intent_model&&(a.intent_model=r.intent_model),r.intent_tokenizer&&(a.intent_tokenizer=r.intent_tokenizer),r.intent_threshold&&(a.intent_threshold=r.intent_threshold),r.intent_content&&(a.intent_content=r.intent_content)),o?.isCancellationRequested?"not-sent":await ukt(e,r.messages,r.copilotApiBaseUrl,r.engineName,n,r.ourRequestId,a,r.authToken,r.uiKind,i,r.llmInteraction,o)}async handleError(e,n,r){if(r.clientError&&!r.headers.get("x-github-request-id")){let a=`Last response was a ${r.status} error and does not appear to originate from GitHub. Is a proxy or firewall intercepting this request? https://gh.io/copilot-firewall`;hp.error(e,a),n.properties.error=`Response status was ${r.status} with no x-github-request-id header`}else n.properties.error=`Response status was ${r.status}`;if(n.properties.status=String(r.status),kt(e,"request.shownWarning",n),r.status===401)try{let a=await r.text(),l=JSON.parse(a);if(l.authorize_url)return{type:"authRequired",reason:"not authorized",authUrl:l.authorize_url}}catch{}if(r.status===401||r.status===403)return e.get(Gn).resetToken(r.status),{type:"failed",reason:`token expired or invalid: ${r.status}`,code:r.status};if(r.status===499)return hp.info(e,"Cancelled by server"),{type:"failed",reason:"canceled by server",code:r.status};let i=await r.text();if(r.status===466)return hp.info(e,i),{type:"failed",reason:`client not supported: ${i}`,code:r.status};if(r.status===400&&i.includes("off_topic"))return{type:"failed",reason:"filtered as off_topic by intent classifier: message was not programming related",code:r.status};if(r.status===400&&i.includes("model_not_supported"))return{type:"failed",reason:"model is not supported.",code:r.status};if(r.status==400&&i.includes("model_max_prompt_tokens_exceeded"))return{type:"failed",reason:"model max prompt tokens exceeded.",code:r.status};if(r.status===424)return{type:"failedDependency",reason:i};let o=await e.get(Gn).getToken();if(r.status===402){if(i.includes("free_quota_exceeded")){let c=r.headers.get("retry-after");return{type:"failed",reason:c?`You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait until ${new Date(c).toLocaleString()} for your limit to reset.`:"You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait for your limit to reset.",code:r.status}}else{if(i.includes("overage_limit_reached"))return{type:"failed",reason:"You cannot accrue additional overages at this time. Please contact [GitHub Support](https://support.github.com/contact) to continue using Copilot.",code:r.status};if(i.includes("quota_exceeded"))switch(o.userInfo?.copilotPlan){case"free":return{type:"failed",reason:"You've reached your monthly chat messages quota. Upgrade to Copilot Pro (30-day free trial) or wait for your allowance to renew.",code:r.status};case"individual":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please enable additional paid premium requests, upgrade to Copilot Pro+, or wait for your allowance to renew.",code:r.status};case"individual_pro":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please enable additional paid premium requests or wait for your allowance to renew.",code:r.status};case"business":case"enterprise":return{type:"failed",reason:"You've reached your monthly chat messages quota. Please reach out to your organization's Copilot admin to enable additional paid premium requests or wait for your allowance to renew.",code:r.status};default:return{type:"failed",reason:"You've reached your monthly chat messages quota.",code:r.status}}}return{type:"failed",reason:"Quota Exceeded.",code:r.status}}return r.status===503?{type:"failed",reason:i,code:r.status}:(hp.error(e,"Unhandled status from server:",r.status,i),{type:"failed",reason:`unhandled status from server: ${r.status} ${i}`,code:r.status})}};async function ukt(t,e,n,r,i,o,a,l,c,u,d,p){let m=ko(n,r,i);if(!l)throw new Error(`Failed to send request to ${m} due to missing key`);let h=u.extendedBy({endpoint:i,engineName:r,uiKind:c});uU(a,h,["messages"]),h.properties.headerRequestId=o,kt(t,"request.sent",h);let g=Ks(),y=v4e(c),v={...jx(t),...d.toCapiHeaders()};return a.messages?.some(b=>Array.isArray(b.content)?b.content.some(E=>"image_url"in E):!1)&&(v["Copilot-Vision-Request"]="true"),a.messages&&a.messages.forEach(b=>{dkt(b)&&b.tool_calls&&(b.tool_calls=b.tool_calls.map(E=>QFe(E)))}),nI(t,m,l,y,o,a,p,v).then(b=>{let E=hv(b,void 0);h.extendWithRequestId(E);let _=Ks()-g;return h.measurements.totalTimeMs=_,hp.info(t,`Request ${o} at <${m}> finished with ${b.status} status after ${_}ms`),hp.debug(t,"request.response properties",h.properties),hp.debug(t,"request.response measurements",h.measurements),hp.debug(t,"messages:",JSON.stringify(e)),kt(t,"request.response",h),b}).catch(b=>{if(Fc(b))throw b;let E=h.extendedBy({error:"Network exception"});kt(t,"request.shownWarning",E),h.properties.message=String(Du(b,"name")??""),h.properties.code=String(Du(b,"code")??""),h.properties.errno=String(Du(b,"errno")??""),h.properties.type=String(Du(b,"type")??"");let _=Ks()-g;throw h.measurements.totalTimeMs=_,hp.info(t,`Request ${o} at <${m}> rejected with ${String(b)} after ${_}ms`),hp.debug(t,"request.error properties",h.properties),hp.debug(t,"request.error measurements",h.measurements),kt(t,"request.error",h),b}).finally(()=>{A5(t,e,h)})}s(ukt,"fetchWithInstrumentation");function dkt(t){return"tool_calls"in t}s(dkt,"isChatMessageWithToolCalls");var ta=class{constructor(e){this.ctx=e;this.fetcher=new tG}static{s(this,"ChatMLFetcher")}async fetchResponse(e,n,r,i){let o=an(),a={n:e.num_suggestions??1,temperature:e.temperature??0,stop:e.stop,top_p:e.topP??1,copilot_thread_id:e.copilot_thread_id,prediction:e.prediction},l=e.modelConfiguration;l&&(e.prediction?.content||delete a.prediction,e.prediction||(a.max_tokens=l.maxResponseTokens),a.stream=!!l.stream),e.logitBias&&(a.logit_bias=e.logitBias);let c=await this.ctx.get(Gn).getToken(),u=Hx(this.ctx,c,e.copilotApiProvider??"api"),d=e.endpoint??"completions",p=e.authToken??c.token,m={messages:e.messages,repoInfo:void 0,ourRequestId:o,copilotApiBaseUrl:u,engineName:e.engineName??"chat",endpoint:d,count:e.num_suggestions??1,uiKind:e.uiKind,postOptions:a,authToken:p,...e.intentParams,llmInteraction:e.llmInteraction,prediction:e.prediction};return l&&(m.model=l.modelId),e.tools&&e.tools?.length>0&&(l===void 0||l.toolCalls)&&(m.tools=e.tools,m.tool_choice=e.tool_choice??"auto"),await this.fetch(m,i,n,r)}async fetch(e,n,r,i){try{let o=await this.fetcher.fetchAndStreamChat(this.ctx,e,i.extendedBy({uiKind:e.uiKind}),n||(()=>{}),r);switch(o.type){case"success":return await this.processSuccessfulResponse(e,o,e.ourRequestId,i);case"canceled":return this.processCanceledResponse(o,e.ourRequestId);case"failed":case"failedDependency":return this.processFailedResponse(o,e.ourRequestId);case"authRequired":return{type:"agentAuthRequired",reason:"Agent authentication required.",authUrl:o.authUrl,requestId:e.ourRequestId}}}catch(o){return this.processError(o,e.ourRequestId)}}async processSuccessfulResponse(e,n,r,i){let o=[],a=iP(n.chatCompletions,c=>this.postProcess(c,i));Ln.debug(this.ctx,`Process success response for request ${e.ourRequestId} with chatParams: ${JSON.stringify(e,null,2)}`);let l=0;for await(let c of a)Ln.debug(this.ctx,`Received choice #${l} for request ${e.ourRequestId}: ${JSON.stringify(c,null,2)}`),o.push(c),l++;if(o.length==1){let c=o[0];switch(c.finishReason){case"stop":return{type:"success",value:Vn(c.message?.content)??"",toolCalls:c.tool_calls,requestId:r,numTokens:c.numTokens};case"tool_calls":return{type:"tool_calls",toolCalls:c.tool_calls,requestId:r};case"content_filter":return{type:"filtered",reason:"Response got filtered.",requestId:r};case"length":return{type:"length",reason:"Response too long.",requestId:r,truncatedValue:Vn(c.message?.content)??""};case"DONE":return{type:"no_finish_reason",reason:"No finish reason received.",requestId:r};default:return{type:"unknown",reason:"Unknown finish reason received.",requestId:r}}}else if(o.length>1){let c=o.filter(u=>u.finishReason=="stop"||u.finishReason=="tool_calls");if(c.length>0)return{type:"successMultiple",value:c.map(u=>Vn(u.message.content)),toolCalls:c.map(u=>u.tool_calls).filter(u=>u),requestId:r}}return{type:"no_choices",reason:"Response contained no choices.",requestId:r}}postProcess(e,n){return dq(e.tokens)?(n.extendWithRequestId(e.requestId),kt(this.ctx,"conversation.repetition.detected",n,0),e.finishReason!==""?e:void 0):e.message?e:void 0}processCanceledResponse(e,n){return Ln.debug(this.ctx,"Cancelled after awaiting fetchConversation"),{type:"canceled",reason:e.reason,requestId:n}}processFailedResponse(e,n){return e?.reason.includes("filtered as off_topic by intent classifier")?{type:"offTopic",reason:e.reason,requestId:n}:e?.reason.includes("model is not supported")?{type:"model_not_supported",reason:e.reason,requestId:n}:e?.reason.includes("model max prompt tokens exceeded")?{type:"model_max_prompt_tokens_exceeded",reason:e.reason,requestId:n}:{type:"failed",reason:e.reason,requestId:n,code:e.type==="failed"?e.code:void 0}}processError(e,n){return Fc(e)?{type:"canceled",reason:"network request aborted",requestId:n}:(Ln.exception(this.ctx,e,"Error on conversation request"),{type:"failed",reason:"Error on conversation request. Check the log for more details.",requestId:n})}};f();var tA=class{constructor(e){this.ctx=e}static{s(this,"AbstractClientToolConfirmationInvoker")}};f();var eb=class{constructor(e){this.ctx=e}static{s(this,"AbstractClientToolInvoker")}};f();var fkt=".github/copilot-instructions.md",pkt=".github/git-commit-instructions.md",mkt="global-copilot-instructions",hkt="global-git-commit-instructions",nA=class{static{s(this,"CustomInstructionsService")}constructor(){this.globalCopilotInstructions=void 0,this.globalGitCommitInstructions=void 0}setGlobalCopilotInstructions(e,n){e&&e.trim()?this.globalCopilotInstructions={instruction:e.trim(),languageId:n}:this.globalCopilotInstructions=void 0}setGlobalGitCommitInstructions(e,n){e&&e.trim()?this.globalGitCommitInstructions={instruction:e.trim(),languageId:n}:this.globalGitCommitInstructions=void 0}getGlobalCopilotInstructions(){return this.globalCopilotInstructions}getGlobalGitCommitInstructions(){return this.globalGitCommitInstructions}getGlobalInstructions(e={}){let n=[];return e.includeCodeGenerationInstructions&&this.globalCopilotInstructions&&n.push({kind:1,content:[this.globalCopilotInstructions],reference:mkt}),e.includeCommitMessageGenerationInstructions&&this.globalGitCommitInstructions&&n.push({kind:1,content:[this.globalGitCommitInstructions],reference:hkt}),n}async _collectInstructionsFromFile(e,n,r,i,o,a){try{let l=ko(n.uri,r),c=(await e.get(po).readFileString(l)).trim();if(!c)return;(await U1(e,{uri:l},c)).status==="valid"&&o.push({kind:a,content:[{instruction:c,languageId:i}],reference:l})}catch{}}async readFromWorkspaces(e,n,r={}){let i=[];if(!n.length)return i;let o=n.flatMap(a=>{let l=[];return r.includeCodeGenerationInstructions!==!1&&l.push(this._collectInstructionsFromFile(e,a,fkt,r.languageId,i,0)),r.includeCommitMessageGenerationInstructions&&l.push(this._collectInstructionsFromFile(e,a,pkt,void 0,i,0)),l});return await Promise.all(o),i}};f();var Ec=class{constructor(e){this.ctx=e}static{s(this,"EditProgressReporter")}},nG=class extends Ec{constructor(){super(...arguments);this.items=[]}static{s(this,"LibTestEditProgressReporter")}reset(){this.items=[]}async reportTurn(n,r){this.items.push({editConversationId:n.editConversationId,editTurnId:n.editTurnId,...r})}};f();f();f();function rG(){return an()}s(rG,"uuidV4");f();var tb=class extends Error{static{s(this,"CopilotEditsCancelledByUserException")}constructor(){super("Operation cancelled by user"),this.name="CopilotEditsCancelledByUserException"}};f();var rA=class extends Error{static{s(this,"CopilotEditsProcessCodeBlockException")}constructor(e){super(e),this.name="CopilotEditsProcessCodeBlockException"}};f();f();f();var VD="filepath:",yl="...existing code...",rue="copilot-edited-file";f();function eR(t){let e=t.matchAll(/^\s*(```+)/gm),n=Math.max(3,...Array.from(e,r=>r[1].length+1));return"`".repeat(n)}s(eR,"getFenceForCodeBlock");var q0=class{constructor(e){this.params=e;this.params.noFilePath===void 0&&(this.params.noFilePath=!1)}static{s(this,"CodeBlock")}renderAsArray(){let e=eR(this.params.code),n=[`${e}${this.params.languageId}`];return!this.params.noFilePath&&this.params.uri&&n.push(`// ${VD} ${aa(this.params.uri)}`),n.push(this.params.shouldTrim?this.params.code.trim():this.params.code,e),n}renderAsString(e=`
`){return this.renderAsArray().join(e)}};var iue=class{constructor(e){this.props=e}static{s(this,"CodeBlockChangeDescription")}render(){if(this.props.markdownBeforeBlock)return["This is the description of what the code block changes:","<changeDescription>",this.props.markdownBeforeBlock,"","</changeDescription>",""].join(`
`)}},$D=class{constructor(e){this.props=e;this.shouldTrim=!0}static{s(this,"CodeMapperPrompt")}async render(){let e=await this.props.textDocumentProvider.getByUri(this.props.uri.toString()),n=[{role:"system",content:this.buildSystemMessage(e)},{role:"user",content:this.buildUserMessage(e)}];return this.props.inProgressRewriteContent&&(n.push({role:"assistant",content:this.props.inProgressRewriteContent}),n.push({role:"user",content:"Please continue providing the next part of the response."})),n}transformToFastApplyMessage(e){return[{role:"user",content:e.reduce((n,r)=>{let i=Vn(r.content);return r.role==="system"?`${n}<SYSTEM>
${i}
</SYSTEM>


`:n+i},"")}]}transformToSpeculationPrompt(e,n,r){return e.reduce((o,a)=>{if(a.role==="system"){let l=Vn(a.content).endsWith(`
`)?Vn(a.content):`${Vn(a.content)}
`;return`${o}<SYSTEM>
${l}
End your response with </${rue}>.
</SYSTEM>


`}return o+Vn(a.content)},"")+`


The resulting document:
<${rue}>
${r}${n}
`}buildSystemMessage(e){if(e.status!=="valid")return"";let n=[];return n.push("You are an AI programming assistant that is specialized in applying code changes to an existing document.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",`The user has a code block that represents a suggestion for a code change and a ${e.document.detectedLanguageId} file opened in a code editor.`,"Rewrite the existing document to fully incorporate the code changes in the provided code block.","For the response, always follow these instructions:","1. Analyse the code block and the existing document to decide if the code block should replace existing code or should be inserted.","2. If necessary, break up the code block into multiple parts and insert each part at the appropriate location.","3. Preserve whitespace and newlines right after the parts of the file that you modify.",`4. The final result must be syntactically valid, properly formatted, and correctly indented. It should not contain any \`${yl}\` comments.`,"5. Finally, provide the fully rewritten file. You must output the complete file."),n.join(`
`)}buildUserMessage(e){let n=[];if(e.status!=="valid")return"";if(e.document.getText().length>0){let a=new q0({code:e.document.getText(),languageId:e.document.detectedLanguageId,noFilePath:!0,shouldTrim:this.shouldTrim});n.push(`I have the following code open in the editor, starting from line 1 to line ${e.document.lineCount}.`,...a.renderAsArray())}else n.push("I am in an empty editor.");let i=new iue({markdownBeforeBlock:this.props.markdownBeforeBlock}).render();i&&n.push(i);let o=new q0({code:this.props.codeBlock,languageId:e.document.detectedLanguageId,noFilePath:!0,shouldTrim:this.shouldTrim});return n.push("This is the code block that represents the suggested code change:",...o.renderAsArray(),"<userPrompt>","Provide the fully rewritten file, incorporating the suggested code change. You must produce the complete file.","</userPrompt>"),n.join(`
`)}};f();var fy=class{constructor(e){this.ctx=e}static{s(this,"DefaultTextDocumentProvider")}async getByUri(e){return await this.ctx.get(Nr).getOrReadTextDocument({uri:e})}};f();var Na=class extends Error{static{s(this,"CanceledError")}constructor(){super("Canceled"),this.name="Canceled"}};var gkt=1e3,Akt={modelId:"gpt-4o-instant-apply-full-ft-v66",uiName:"gpt-4o-instant-apply-full-ft-v66",modelFamily:sr.Gpt4oMini,maxRequestTokens:128e3,maxResponseTokens:16e3,baseTokensPerCompletion:3,baseTokensPerMessage:3,baseTokensPerName:1,tokenizer:"o200k_base",isExperimental:!1,stream:!0,toolCalls:!1},tR=class{static{s(this,"CodeMapper")}constructor(e){this.ctx=e,this.logger=new Tt("CopilotEditsCodeMapper")}async mapCode(e,n,r,i,o=!1){if(!e.resource)throw new rA("No uri found in code block");if(r.isCancellationRequested)throw new tb;e.code.includes(yl)||this.logger.debug(this.ctx,`Code block for uri ${e.resource} does not contain existing code marker`);let a=await this.ctx.get(Nr).getOrReadTextDocument({uri:e.resource});if(a.status==="notfound")return i&&await this.reportCodeBlock(e,i),e.code;if(a.status==="invalid"){let v=`Failed to find file ${e.resource} with status ${a.status} and reason ${a.reason}`,b=new rA(v);throw this.logger.error(this.ctx,v,b),b}let l=a.document.getText();if(l.length===0&&!e.code.includes(yl))return i&&await this.reportCodeBlock(e,i),e.code;let c=new $D({documentContext:{document:a},codeBlock:e.code,uri:e.resource,markdownBeforeBlock:e.markdownBeforeBlock,textDocumentProvider:new fy(this.ctx)}),u=await c.render();u=c.transformToFastApplyMessage(u),i&&await i({fileGenerationStatus:"edit-plan-generated",uri:e.resource,basename:Ti(e.resource),editDescription:e.markdownBeforeBlock});let d=await this.ctx.get(Dt).updateExPValuesAndAssignments(),p=rG(),m=[],h=0,g=0,y=l.length+e.code.length+gkt;for(;;){let v={copilotApiProvider:"proxy",modelConfiguration:Akt,messages:u,uiKind:o?"agentPanel":"editsPanel",temperature:0,llmInteraction:n,prediction:{type:"content",content:l}};this.logger.debug(this.ctx,`Send map code request ${p} in iteration ${g} with params: ${JSON.stringify(v,null,2)}`);let E=await this.ctx.get(ta).fetchResponse(v,r,d);if(this.logger.debug(this.ctx,`Received map code response ${p} in iteration ${g} with result: ${JSON.stringify(E,null,2)}`),h=this.calculateResponseLength(E,m,h),E.type==="length"){if(h>y)throw new rA(`Code mapper might be in a loop: Rewritten length: ${h}, Document length: ${l.length}, Code block length ${e.code.length}`);u=await new $D({documentContext:{document:a},codeBlock:e.code,uri:e.resource,markdownBeforeBlock:e.markdownBeforeBlock,textDocumentProvider:new fy(this.ctx),inProgressRewriteContent:E.truncatedValue}).render()}else if(E.type==="success"){let _=m.join("");if(_)return i&&await i({fileGenerationStatus:"updated-code-generated",uri:e.resource,basename:Ti(e.resource),partialText:_,languageId:a.document.detectedLanguageId,markdownCodeFence:eR(_)}),_;{let k=`No valid completion found for uri ${e.resource}`;throw new rA(k)}}else{if(E.type==="canceled")throw new Na;{let _=`Failed to map code for uri ${e.resource} with result type ${E.type}`;throw this.logger.error(this.ctx,_,E),new rA(_)}}g+=1}}calculateResponseLength(e,n,r){return e.type==="success"?(n.push(e.value),r+=e.value.length):e.type==="length"&&(n.push(e.truncatedValue),r+=e.truncatedValue.length),r}async reportCodeBlock(e,n){await n({fileGenerationStatus:"edit-plan-generated",uri:e.resource,basename:Ti(e.resource),editDescription:e.markdownBeforeBlock}),await n({fileGenerationStatus:"updated-code-generated",partialText:e.code,uri:e.resource,basename:Ti(e.resource)})}};f();var tu=class extends Error{constructor(n){super(n.message);this.editConversationError=n;this.name="EditConversationException"}static{s(this,"EditConversationException")}};f();f();var nb=class{static{s(this,"CapiErrorTranslator")}static translateErrorMessage(e,n){switch(e){case 466:return"Oops, your plugin is out of date. Please update it.";case 401:return"Oops, you are not authorized. Please sign in.";case 402:return n||"Oops, you need to upgrade your plan.";case 413:return"Oops, your request is too large. Please try again with a smaller input.";case 429:return"Oops, you reached the rate limit. Please try again later.";case 503:return n||"Oops, the service is currently unavailable. Please try again later.";default:return"Sorry, an error occurred while generating a response."}}};f();f();var iG=class extends Error{static{s(this,"EditTurnNotFoundException")}constructor(e){super(e),this.name="EditTurnNotFoundException"}};var rb=class{constructor(e,n){this.request=e;this.id=an();this.timestamp=Date.now();this.status="in-progress";this.workingSet=[];n&&n.length>0&&(this.workingSet=n)}static{s(this,"EditTurn")}},oue=class{constructor(e=[]){this.turns=[];this.turns=e}static{s(this,"EditTurnManager")}addTurn(e){this.turns.push(e)}deleteTurn(e){this.turns=this.turns.filter(n=>n.id!==e)}getLastTurn(){if(this.turns.length!==0)return this.turns[this.turns.length-1]}hasTurn(e){return this.turns.some(n=>n.id===e)}getTurns(){return[...this.turns]}},oG=class{constructor(e=[],n="panel",r="en"){this._id=an();this._timestamp=Date.now();this.source="panel";this.userLanguage="en";this.source=n,this.userLanguage=r,this.turnsManager=new oue(e)}static{s(this,"EditConversation")}get id(){return this._id}get timestamp(){return this._timestamp}getUserLanguage(){return this.userLanguage}getTurns(){return this.turnsManager.getTurns()}getSource(){return this.source}addTurn(e){this.turnsManager.addTurn(e)}deleteTurn(e){this.turnsManager.deleteTurn(e)}getLastTurn(){let e=this.turnsManager.getLastTurn();if(e===void 0)throw new iG(`No turns in the conversation ${this._id}`);return e}hasTurn(e){return this.turnsManager.hasTurn(e)}};var sG=class{static{s(this,"EditCodeResultProcessor")}static processResult(e,n){switch(n.type){case"success":return n.value;case"offTopic":{e.currentTurn.status="off-topic";let r="Sorry, but I can only assist with programming related questions.";throw e.currentTurn.response={message:r,type:"offtopic-detection"},new tu({message:r,responseIsFiltered:!0})}case"canceled":throw e.currentTurn.status="cancelled",e.currentTurn.response={message:qx,type:"user"},new tu({message:qx});case"failed":throw e.currentTurn.status="error",e.currentTurn.response={message:n.reason,type:"server"},new tu({message:nb.translateErrorMessage(n.code,n.reason),code:n.code});case"filtered":throw e.currentTurn.status="filtered",new tu({message:"Oops, your response got filtered.",responseIsFiltered:!0});case"length":throw e.currentTurn.status="error",new tu({message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0});case"agentAuthRequired":throw e.currentTurn.status="error",e.currentTurn.response={message:"Authorization required",type:"server"},new tu({message:"Authorization required",responseIsFiltered:!1});case"no_choices":throw e.currentTurn.status="error",e.currentTurn.response={message:"No choices returned",type:"server"},new tu({message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"no_finish_reason":throw e.currentTurn.status="error",e.currentTurn.response={message:"No finish reason",type:"server"},new tu({message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"model_not_supported":throw e.currentTurn.status="error",e.currentTurn.response={message:"Model not supported",type:"server"},new tu({message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1});case"model_max_prompt_tokens_exceeded":throw e.currentTurn.status="error",e.currentTurn.response={message:"Model max prompt tokens exceeded",type:"server"},new tu({message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",code:400,reason:"model_max_prompt_tokens_exceeded",responseIsFiltered:!1});case"successMultiple":case"tool_calls":case"unknown":throw e.currentTurn.status="error",new tu({message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1})}}};f();async function*WFe(t){yield t}s(WFe,"stringToAsyncIterable");f();f();var iA=class t{static{s(this,"CustomInstruction")}static async getInstructions(e,n,r={}){try{let i=e.get(nA),o=i.getGlobalInstructions(r),a=await i.readFromWorkspaces(e,n,r),l=[...o,...a];return this.processInstructions(l,r)}catch{return}}static processInstructions(e,n={}){if(!e||e.length===0)return;let r=[];for(let o of e){let a=this.createInstructionElement(o,n);a&&r.push(a)}return r.length===0?void 0:`${n.customIntroduction||"When generating code, please follow these user provided coding instructions. You can ignore an instruction if it contradicts a system message."}

<instructions>${r.join(`
`)}</instructions>`}static createInstructionElement(e,n={}){let r=[];for(let i of e.content)i.languageId?n.languageId&&i.languageId===n.languageId&&r.push(`For ${i.languageId} code: ${i.instruction}`):r.push(i.instruction);if(r.length!==0)return r.join(`
`)}static async appendToUserMessage(e,n,r="",i={}){if(!n||n.length===0)return r;let o=await t.getInstructions(e,n,i);return o?o+`

`+r:r}};f();var py=class{static{s(this,"CopilotEditsPromptUriUtils")}static pathToUri(e,n){let r=e.mapToUriInWorkingSet(n);return r||pl(n)}static uriToPath(e){let n=Ho(e);if(n)return n;throw new Error(`Unsupported URI scheme: ${e.split(":")[0]}`)}static posixFilePathToUri(e){return process.platform==="win32"?`file:///c:${e}`:`file://${e}`}};var aG=class{constructor(e){this.props=e;this.exampleFilePath=this.getExampleFilePath("/path/to/file"),this.tsExampleFilePath=this.getExampleFilePath("/Users/someone/proj01/example.ts")}static{s(this,"EditCodePrompt")}async render(){let e=await this.getValidFilesInWorkingSet(),n=[{role:"system",content:this.buildSystemMessage(e)}];if(this.props.history&&this.props.history.length>0)for(let i of this.props.history)n.push({role:"user",content:i.request.message}),i.response&&i.response.type==="model"&&n.push({role:"assistant",content:i.response.message});let r=await iA.appendToUserMessage(this.props.ctx,this.props.workspaceFolder?[{uri:this.props.workspaceFolder}]:[],this.buildUserMessage(e),{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1});return n.push({role:"user",content:r}),n}getExampleFilePath(e){return this.getFilePath(py.posixFilePathToUri(e))}getFilePath(e){return py.uriToPath(e)}async getValidFilesInWorkingSet(){let e=new Map;if(this.props.workingSet===void 0||this.props.workingSet===null||this.props.workingSet.length===0)return e;for(let n of this.props.workingSet){let r=await this.props.textDocumentProvider.getByUri(n.uri);r.status==="valid"&&e.set(n.uri,r.document)}return e}buildSystemMessage(e){let n=[];return n.push("You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",e.size>0?"The user has a request for modifying one or more files.":["If the user asks a question, then answer it.",`If you need to change existing files and it's not clear which files should be changed, then refuse and answer with "Please add the files to be modified to the working set"`].join(`
`),"1. Please come up with a solution that you first describe step-by-step.","2. Group your changes by file. Use the file path as the header.","3. For each file, give a short summary of what needs to be changed followed by a code block that contains the code changes.","4. Each file's code block must start with a comment containing the filepath.","5. Use a single code block per file that needs to be modified, even if there are multiple changes for a file.","6. The user is very smart and can understand how to merge your code blocks into their files, you just need to provide minimal hints.","7. Avoid repeating existing code, instead use comments to represent regions of unchanged code. The user prefers that you are as concise as possible. For example: ",["<file>","````languageId",`// ${VD} ${this.exampleFilePath}`,`// ${yl}`,"{ changed code }",`// ${yl}`,"{ changed code }",`// ${yl}`,"````","</file>"].join(`
`),"8. If you generate edits for a Markdown file, use four backticks for the outer code block.",""),this.props.userLanguage&&n.push(`Respond in the following locale: ${this.props.userLanguage}`),this.props.modelName&&n.push(`You use the ${this.props.modelName} large language model.`),n.push("Here is an example of how you should format a code block belonging to the file example.ts in your response:","<example>",[`### ${this.tsExampleFilePath}`,"","Add a new property 'age' and a new method 'getAge' to the class Person.","","<file>","```typescript",`// ${VD} ${this.tsExampleFilePath}`,"class Person {",`   // ${yl}`,"   age: number;",`   // ${yl}`,"   getAge() {","      return this.age;","   }","}","```","</file>"].join(`
`),"</example>"),n.join(`
`)}buildUserMessage(e){let n=[];if(e.size>0){n.push("The user has provided the following files as input. Always make changes to these files unless the user asks to create a new file.","Untitled files are files that are not yet named. Make changes to them like regular files.");for(let[r,i]of e){let o=new q0({code:i.getText(),languageId:i.detectedLanguageId,uri:r});n.push("<file>",...o.renderAsArray(),"</file>")}}return n.push("<reminder>",`Avoid repeating existing code, instead use a line comment with \`${yl}\` to represent regions of unchanged code.`,"Each file's code block must start with a line comment containing the filepath. This includes Markdown files.","For existing files, make sure the filepath exactly matches the filepath of the original file."),this.props.workspaceFolder&&n.push(`When suggesting to create new files, pick a location inside \`${this.getFilePath(this.props.workspaceFolder)}\``),n.push("</reminder>"),n.push("<prompt>",`${this.props.userMessage}`,"</prompt>"),n.join(`
`)}};f();f();var lG=class{constructor(e){this._source=e;this._buffer="";this._atEnd=!1}static{s(this,"PartialAsyncTextReader")}get endOfStream(){return this._buffer.length===0&&this._atEnd}async extendBuffer(){if(this._atEnd)return;let{value:e,done:n}=await this._source.next();n?this._atEnd=!0:this._buffer+=e}async waitForLength(e){for(;this._buffer.length<e&&!this._atEnd;)await this.extendBuffer()}async peek(e){return await this.waitForLength(e),this._buffer.substring(0,e)}async read(e){await this.waitForLength(e);let n=this._buffer.substring(0,e);return this._buffer=this._buffer.substring(e),n}async readUntil(e){let n="";for(;!this.endOfStream;){let r=this.readImmediateExcept(e);if(n+=r,await this.peek(1)===e)break}return n}async readLineIncludingLF(){let e=await this.readUntil(`
`);return e+=await this.read(1),e}async readLine(){let e=await this.readUntil(`
`);return await this.read(1),e}readImmediateExcept(e){let n=this._buffer.indexOf(e);return this.readImmediate(n===-1?this._buffer.length:n)}readImmediate(e){let n=this._buffer.substring(0,e);return this._buffer=this._buffer.substring(e),n}};var sue="<file>",zD="```",KD="###",Ckt=/^(`+)([^ \n]*)/,YD="filepath:";async function*GFe(t,e){let n=new lG(t[Symbol.asyncIterator]()),r=[];for(;!n.endOfStream;){for(;!n.endOfStream;){let y=await n.peek(Math.max(zD.length,sue.length,KD.length));if(y.startsWith(sue)||y.startsWith(zD))break;if(y.startsWith(KD)){let v=await n.readLineIncludingLF(),b=v.substring(KD.length).trim();await e(b)?r.length=0:r.push(v)}else await HFe(n,r)}if(n.endOfStream)break;let i=await n.readLineIncludingLF(),o=i.startsWith(sue);for(;!n.endOfStream&&!i.startsWith(zD);)i=await n.readLineIncludingLF();if(n.endOfStream)break;let a=i.match(Ckt),l=a?a[2]:void 0,c=_Re(l?ERe(l):void 0),u=[`${c.lineComment.start} ${YD}`,`:: ${YD}`,`<!-- ${YD}`,`// ${YD}`,`# ${YD}`],d=Math.max(...u.map(y=>y.length)),p=c.lineComment.end??"",m="</file>",h,g=[];for(;!n.endOfStream;){let y=await n.peek(Math.max(zD.length,d));if(y.startsWith(zD)){let v=await n.readLineIncludingLF();if(!o)break;if(await n.peek(m.length)===m){await n.readLineIncludingLF();break}else{g.push(v);continue}}if(!h&&u.some(v=>y.startsWith(v))){let v=await n.readLineIncludingLF(),b=u.reduce((E,_)=>y.startsWith(_)?v.substring(_.length):E,v);b=b.split("-->")[0].trim(),b.endsWith(p)&&(b=b.substring(0,b.length-p.length)),b=b.trim(),h=await e(b);continue}await HFe(n,g)}yield{resource:h,language:l,code:g.join(""),markdownBeforeBlock:r.join("")},r.length=0}}s(GFe,"getCodeBlocksFromResponse");async function HFe(t,e){for(;!t.endOfStream;){let n=t.readImmediateExcept(`
`);if(n.length>0&&e?.push(n),await t.peek(1)===`
`){t.readImmediate(1),e?.push(`
`);break}}}s(HFe,"pipeOneLine");function jFe(t){if(t.startsWith(`${KD} `))return"";let e=t.indexOf(`
${KD} `);return e===-1?"":t.substring(0,e)+`
`}s(jFe,"parseOverallDescription");f();f();var cG=class extends Error{static{s(this,"EditConversationNotFoundException")}constructor(e){super(e),this.name="EditConversationNotFoundException"}};var xkt=new Tt("CopilotEditsConversations"),il=class{constructor(e){this.editConversations=new Kn(50);this.ctx=e}static{s(this,"EditConversations")}create(e="panel",n){let r=new oG([],e,n);return this.editConversations.set(r.id,r),r}destroy(e){this.editConversations.delete(e)!==!0&&xkt.warn(this.ctx,`Edit code conversation ${e} does not exist`)}addTurn(e,n){return this.get(e).addTurn(n),n}deleteTurn(e,n){this.get(e).deleteTurn(n)}get(e){return this.getEditConversation(e)}getEditConversation(e){let n=this.editConversations.get(e);if(!n)throw new cG(`Conversation with id ${e} does not exist`);return n}getAll(){return Array.from(this.editConversations.values())}findByTurnId(e){let n=this.getAll();for(let r of n)if(r.hasTurn(e))return r}};f();f();var na=class{static{s(this,"ModelConfigurationProvider")}},uG=class extends na{constructor(n){super();this.ctx=n}static{s(this,"DefaultModelConfigurationProvider")}async getBestChatModelConfig(n,r){let i=[];for(let o of n){let a=await this.getFirstMatchingChatModelConfiguration(o,r);a&&i.push(a)}if(i.length>0){let o=i.find(a=>a.isExperimental);return o||i[0]}throw Ln.error(this.ctx,`No model configuration found for families: ${n.join(", ")}. Available models: ${JSON.stringify(await this.ctx.get(wu).getMetadata())}`),new Error("No model configuration found")}async getFirstMatchingModelMetadata(n){let r=await this.ctx.get(wu).getMetadata(),i=bkt(r,n);if(i.length>0)return i[0]}async getFirstMatchingChatModelConfiguration(n,r){let i=await this.getFirstMatchingModelMetadata({family:n,type:"chat",supports:r});if(i!==void 0)return n===sr.Gpt35turbo||n===sr.Gpt4oMini?{modelId:i.id,uiName:i.name,modelFamily:n,maxRequestTokens:lue(6144,i),maxResponseTokens:aue(2048,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:n===sr.Gpt4||n===sr.Gpt4turbo?{modelId:i.id,uiName:i.name,modelFamily:n,maxRequestTokens:lue(10240,i),maxResponseTokens:aue(4096,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:n===sr.Gpt4o?{modelId:i.id,uiName:i.name,modelFamily:n,maxRequestTokens:await vkt(this.ctx,i),maxResponseTokens:aue(4096,i),baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}:{modelId:i.id,uiName:i.name,modelFamily:n,maxRequestTokens:i.capabilities.limits?.max_prompt_tokens??8192,maxResponseTokens:i.capabilities.limits?.max_output_tokens??4096,baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:i.capabilities.tokenizer,isExperimental:i.isExperimental??!1,stream:i.capabilities.supports?.streaming??!1,toolCalls:i.capabilities.supports?.tool_calls??!1}}async getFirstMatchingEmbeddingModelConfiguration(n){let r=await this.getFirstMatchingModelMetadata({family:n,type:"embeddings"});if(r!==void 0)switch(n){case xM.textEmbedding3Small:return{modelId:r.id,modelFamily:n,maxBatchSize:r.capabilities.limits?.max_inputs??16,maxTokens:8191,tokenizer:"cl100k_base"}}}};async function vkt(t,e){let n=t.get(Dt),r=await n.updateExPValuesAndAssignments(),i=n.ideChatMaxRequestTokens(r);return i===-1&&(i=16384),lue(i,e)}s(vkt,"getExpRequestTokens");function lue(t,e){return e.capabilities.limits?.max_prompt_tokens?Math.min(t,e.capabilities.limits.max_prompt_tokens):t}s(lue,"getRequestTokens");function aue(t,e){return e.capabilities.limits?.max_output_tokens?Math.min(t,e.capabilities.limits.max_output_tokens):t}s(aue,"getResponseTokens");function bkt(t,e){return t.filter(n=>n.capabilities.type!==e.type||n.capabilities.family!==e.family&&!(n.is_chat_fallback===!0&&n.id===e.family)||n.capabilities.family===e.family&&n.id!==e.family&&n.is_chat_fallback===!0?!1:n.capabilities.supports===void 0||e.supports===void 0?!0:Object.keys(e.supports).every(r=>e.supports?.[r]===n.capabilities.supports?.[r]))}s(bkt,"filterModelsByCapabilities");var xo=class{static{s(this,"ModelPickerUtils")}static async getModelConfiguration(e,n,r,i){if(r)return e.get(na).getBestChatModelConfig([r]);if(e.get(zf).quotaExhausted&&!(await e.get(Gn).getToken()).userInfo?.isFreeUser){let o=await e.get(wu).getFallbackModel();if(o)return e.get(na).getBestChatModelConfig([o?.id])}return e.get(na).getBestChatModelConfig(Df(n),i)}static transformMessages(e,n){return n===sr.O1Ga||n===sr.O1Mini?e.map(r=>r.role!=="user"?{role:"user",content:r.content}:r):e}};var my=class{constructor(e,n){this.chatFetcher=n;this.ctx=e,this.chatFetcher=this.chatFetcher??new ta(e)}static{s(this,"CopilotEditsService")}async createOrContinueEditConversation(e,n){try{await this.reportBegin(e);let r=await this.getEditCodeResult(e,n),i=sG.processResult(e,r);await this.parseAndSendProgressBack(e,i,n),e.currentTurn.response={message:i,type:"model"},e.currentTurn.status="success",await this.reportEnd(e)}catch(r){if(r instanceof tb)await this.reportEnd(e,{message:qx});else if(r instanceof tu)await this.reportEnd(e,r.editConversationError);else{let i=r instanceof Error?r.message:String(r);e.currentTurn.status="error",e.currentTurn.response={message:i,type:"meta"},await this.reportEnd(e,{message:i})}}return[]}async getEditCodeResult(e,n){await this.abortIfCancelled(e,n);let r=await this.buildEditCodePromptMessages(e),i=await this.ctx.get(Dt).updateExPValuesAndAssignments();await this.abortIfCancelled(e,n);let o=await xo.getModelConfiguration(this.ctx,"edits",e.userSelectedModel),a=xo.transformMessages(r,o.modelFamily);return await this.abortIfCancelled(e,n),await this.chatFetcher.fetchResponse({modelConfiguration:o,messages:a,uiKind:"editsPanel",intentParams:{intent:!0},temperature:.1,llmInteraction:e.toLlmInteraction()},n,i)}async buildEditCodePromptMessages(e){let n=e.currentTurn,r=await xo.getModelConfiguration(this.ctx,"edits",e.userSelectedModel),i=e.editConversation.getTurns(),o=i.length>1?i.slice(0,-1):[];return await new aG({userMessage:n.request.message,workspaceFolder:n.workspaceFolder,workingSet:n.workingSet,userLanguage:e.editConversation.getUserLanguage(),textDocumentProvider:new fy(this.ctx),modelName:r.uiName,history:o,ctx:this.ctx}).render()}async abortIfCancelled(e,n){if(n.isCancellationRequested)throw e.currentTurn.status="cancelled",e.currentTurn.response={message:qx,type:"user"},new tb;this.ctx.get(il).get(e.editConversationId)}async parseAndSendProgressBack(e,n,r){try{let i=WFe(n),o=new tR(this.ctx),a=s(async u=>py.pathToUri(e,u),"createUri"),l=[],c=jFe(n);c&&await this.ctx.get(Ec).reportTurn(e,{fileGenerationStatus:"overall-description-generated",editDescription:c}),await this.abortIfCancelled(e,r);for await(let u of GFe(i,a))l.push(o.mapCode(u,e.toLlmInteraction(),r,async d=>{await this.ctx.get(Ec).reportTurn(e,d)}));await Promise.all(l),l.length===0&&await this.reportNoCodeBlocks(e,n)}catch(i){if(i instanceof rA||i instanceof U5)e.currentTurn.status="error",e.currentTurn.response={message:i.message,type:"meta"},await this.reportEnd(e,{message:i.message});else if(i instanceof tb)e.currentTurn.status="cancelled",e.currentTurn.response={message:qx,type:"user"},await this.reportEnd(e,{message:qx});else throw i}}async reportNoCodeBlocks(e,n){await this.ctx.get(Ec).reportTurn(e,{fileGenerationStatus:"no-code-blocks-found",rawResponse:n})}async reportBegin(e){await this.ctx.get(Ec).reportTurn(e,{fileGenerationStatus:"edit-conversation-begin"})}async reportEnd(e,n){await this.ctx.get(Ec).reportTurn(e,{fileGenerationStatus:"edit-conversation-end",error:n})}};f();var nR=class extends Tu{constructor(n,r={}){super();this.env=r;this.recalculateUrlDefaults(n,this.getDefaultUrls())}static{s(this,"DefaultNetworkConfiguration")}getAuthAuthority(){return this.baseUrlObject.hostname}getConfiguredUrls(){return{serverUrl:this.baseUrlObject.href,apiUrl:this.apiUrl}}setConfiguredUrls(n,r){let i=this.getConfiguredUrls();this.recalculateUrlDefaults(n,r);let o=this.getConfiguredUrls();(i.apiUrl!==o.apiUrl||i.serverUrl!==o.serverUrl)&&n.get(Gn).resetToken(),n.get(md).updateSessionConfig(o)}recalculateUrlDefaults(n,r){let{serverUrl:i,apiUrl:o}=Gx({serverUrl:sM(n,r.serverUrl),apiUrl:sM(n,r.apiUrl)});this.baseUrlObject=new URL(i),this.apiUrl=o}getDefaultUrls(){return this.env.CODESPACES==="true"&&this.env.GITHUB_TOKEN&&this.env.GITHUB_SERVER_URL&&this.env.GITHUB_API_URL&&!this.env.GITHUB_COPILOT_TOKEN&&!this.env.GH_COPILOT_TOKEN?{apiUrl:this.env.GITHUB_API_URL,serverUrl:this.env.GITHUB_SERVER_URL}:{}}};f();var sor=new Tt("exp");function VFe(t){let e=t.get(Dt);e.registerStaticFilters(Tkt(t)),e.registerDynamicFilter("X-Copilot-OverrideEngine",()=>Ai(t,wt.DebugOverrideEngine)||Ai(t,wt.DebugOverrideEngineLegacy)),e.registerDynamicFilter("X-VSCode-ExtensionName",()=>rM()?"copilot-web":t.get(ur).getEditorPluginInfo().name),e.registerDynamicFilter("X-VSCode-ExtensionVersion",()=>cue(!t.get(zi).isProduction()&&t.get(ur).getEditorPluginInfo().name==="copilot"?"1.999.0":t.get(ur).getEditorPluginInfo().version)),e.registerDynamicFilter("X-VSCode-ExtensionRelease",()=>Ekt(t)),e.registerDynamicFilter("X-VSCode-Build",()=>t.get(ur).getEditorInfo().name),e.registerDynamicFilter("X-VSCode-AppVersion",()=>cue(t.get(ur).getEditorInfo().version)),e.registerDynamicFilter("X-VSCode-TargetPopulation",()=>Ikt(t)),e.registerDynamicFilterGroup(()=>{let n={};for(let r of t.get(ur).getRelatedPluginInfo()){let i=yf+r.name.replace(/[^A-Za-z]/g,"").toLowerCase();if(!Object.values(CB).includes(i)){W7(t,{reason:`A filter could not be registered for the unrecognized related plugin "${r.name}".`});continue}n[i]=cue(r.version)}return n})}s(VFe,"setupExperimentationService");function Ekt(t){let e=t.get(ur).getEditorPluginInfo();return e.name==="copilot"&&kf(t)==="nightly"||e.name==="copilot-intellij"&&e.version.endsWith("nightly")?"nightly":"stable"}s(Ekt,"getPluginRelease");function Ikt(t){let e=t.get(ur).getEditorInfo();return e.name==="vscode"&&e.version.endsWith("-insider")?"insider":"public"}s(Ikt,"getTargetPopulation");function Tkt(t){return wkt(t)}s(Tkt,"createAllFilters");function wkt(t){let e=t.get(Ps);return{"X-MSEdge-ClientId":e.machineId,"X-Copilot-ClientVersion":t.get(zi).isProduction()?CI(t):"1.999.0"}}s(wkt,"createDefaultFilters");function cue(t){return t.split("-")[0]}s(cue,"trimVersionSuffix");f();var JD=(n=>(n.enabled="enabled",n.disabled="disabled",n))(JD||{}),hy=Symbol("onMCPToolsListChanged"),gp=class{static{s(this,"McpManager")}};f();var Km=class{static{s(this,"McpRuntimeNotifier")}},dG=class extends Km{static{s(this,"NoOpMcpRuntimeNotifier")}async notifyLog(e){}};f();var rR=class{static{s(this,"AbstractCopilotMessageSender")}};f();f();f();var uue=class{constructor(e,n){this.baseDebounceTime=e;this.expectedTotalTime=n;this.providerInvocationTime=Date.now()}static{s(this,"DelaySession")}getDebounceTime(){let e=this.expectedTotalTime===void 0?this.baseDebounceTime:Math.min(this.baseDebounceTime,this.expectedTotalTime),n=Date.now()-this.providerInvocationTime;return Math.max(0,e-n)}getArtificalDelay(){if(this.expectedTotalTime===void 0)return 0;let e=Date.now()-this.providerInvocationTime;return Math.max(0,this.expectedTotalTime-e)}},fG=class{constructor(){this._recentUserActions=[]}static{s(this,"Delayer")}createDelaySession(){let r=this._getExpectedTotalTime(200);return new uue(200,r)}handleAcceptance(){this._recordUserAction("accepted")}handleRejection(){this._recordUserAction("rejected")}_recordUserAction(e){this._recentUserActions.push({time:Date.now(),kind:e}),this._recentUserActions=this._recentUserActions.slice(-10)}_getExpectedTotalTime(e){let l=Date.now(),c=1;for(let d of this._recentUserActions){let p=l-d.time;if(p>6e5)continue;let m=Math.exp(-p/6e5),h=d.kind==="rejected"?1.5:.8;c*=1+(h-1)*m}let u=e*c;return u=Math.min(3e3,Math.max(50,u)),u}};f();f();f();var No;(r=>{function t(i){return new due(i)}r.ok=t,s(t,"ok");function e(i){return new fue(i)}r.error=e,s(e,"error");function n(i){return r.error(new Error(i))}r.fromString=n,s(n,"fromString")})(No||={});var due=class t{constructor(e){this.val=e}static{s(this,"ResultOk")}map(e){return new t(e(this.val))}flatMap(e){return e(this.val)}isOk(){return!0}isError(){return!1}},fue=class{constructor(e){this.err=e}static{s(this,"ResultError")}map(e){return this}flatMap(e){return this}isOk(){return!1}isError(){return!0}};f();f();var $Fe=-1;function iR(){return $Fe!==-1?$Fe:Date.now()}s(iR,"now");function zFe(t,e){return t.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-t.endLineNumberExclusive:e.endLineNumberExclusive<=t.startLineNumber?t.startLineNumber-e.endLineNumberExclusive:0}s(zFe,"lineRangeDistance");f();f();var Ap=class t{constructor(e){this.edits=e;let n=-1;for(let r of e){if(!(r.replaceRange.start>=n))throw new dr(`Edits must be disjoint and sorted. Found ${r} after ${n}`);n=r.replaceRange.endExclusive}}static{s(this,"OffsetEdit")}static{this.empty=new t([])}static fromJson(e){return new t(e.map(ol.fromJson))}static from(e){let n=e.map(i=>new ol(Rt.ofStartAndLength(i.rangeOffset,i.rangeLength),i.text));return n.reverse(),new t(n)}static single(e,n){return new t([new ol(e,n)])}normalize(){let e=[],n;for(let r of this.edits)r.newText.length===0&&r.replaceRange.length===0||(n&&n.replaceRange.endExclusive===r.replaceRange.start?n=new ol(n.replaceRange.join(r.replaceRange),n.newText+r.newText):(n&&e.push(n),n=r));return n&&e.push(n),new t(e)}normalizeEOL(e){return new t(this.edits.map(n=>n.normalizeEOL(e)))}isNoop(e){return this.edits.every(n=>n.isNoop(e))}toString(){return`[${this.edits.map(n=>n.toString()).join(", ")}]`}apply(e){let n=[],r=0;for(let i of this.edits)n.push(e.substring(r,i.replaceRange.start)),n.push(i.newText),r=i.replaceRange.endExclusive;return n.push(e.substring(r)),n.join("")}compose(e){return _kt(this,e)}inverse(e){let n=[],r=0;for(let i of this.edits)n.push(new ol(Rt.ofStartAndLength(i.replaceRange.start+r,i.newText.length),e.substring(i.replaceRange.start,i.replaceRange.endExclusive))),r+=i.newText.length-i.replaceRange.length;return new t(n)}getNewTextRanges(){let e=[],n=0;for(let r of this.edits)e.push(Rt.ofStartAndLength(r.replaceRange.start+n,r.newText.length)),n+=r.newText.length-r.replaceRange.length;return e}get isEmpty(){return this.edits.length===0}tryRebase(e){let n=[],r=0,i=0,o=0;for(;i<this.edits.length||r<e.edits.length;){let a=e.edits[r],l=this.edits[i];if(l)a?l.replaceRange.intersects(a.replaceRange)?i++:l.replaceRange.start<a.replaceRange.start?(n.push(new ol(l.replaceRange.delta(o),l.newText)),i++):(r++,o+=a.newText.length-a.replaceRange.length):(n.push(new ol(l.replaceRange.delta(o),l.newText)),i++);else break}return new t(n)}removeCommonSuffixPrefix(e){let n=[];for(let r of this.edits){let i=r.removeCommonSuffixPrefix(e);i.isEmpty||n.push(i)}return new t(n)}applyToOffset(e){let n=0;for(let r of this.edits)if(r.replaceRange.start<=e){if(e<r.replaceRange.endExclusive)return r.replaceRange.start+n;n+=r.newText.length-r.replaceRange.length}else break;return e+n}applyToOffsetRange(e){return new Rt(this.applyToOffset(e.start),this.applyToOffset(e.endExclusive))}applyToOffsetOrUndefined(e){let n=0;for(let r of this.edits)if(r.replaceRange.start<=e){if(e<r.replaceRange.endExclusive)return;n+=r.newText.length-r.replaceRange.length}else break;return e+n}applyToOffsetRangeOrUndefined(e){let n=this.applyToOffsetOrUndefined(e.start);if(n===void 0)return;let r=this.applyToOffsetOrUndefined(e.endExclusive);if(r!==void 0)return new Rt(n,r)}applyInverseToOffset(e){let n=0;for(let r of this.edits){let i=r.newText.length;if(r.replaceRange.start<=e-n){if(e-n<r.replaceRange.start+i)return r.replaceRange.start;n+=i-r.replaceRange.length}else break}return e-n}},ol=class t{constructor(e,n){this.replaceRange=e;this.newText=n}static{s(this,"SingleOffsetEdit")}static delete(e){return new t(e,"")}static fromJson(e){return new t(Rt.ofStartAndLength(e.pos,e.len),e.txt)}toString(){return`${this.replaceRange} -> "${this.newText}"`}removeCommonSuffixPrefix(e){let n=e.substring(this.replaceRange.start,this.replaceRange.endExclusive),r=vP(n,this.newText),i=Math.min(n.length-r,this.newText.length-r,L5(n,this.newText)),o=new Rt(this.replaceRange.start+r,this.replaceRange.endExclusive-i),a=this.newText.substring(r,this.newText.length-i);return new t(o,a)}normalizeEOL(e){let n=this.newText.replace(/\r\n|\n/g,e);return new t(this.replaceRange,n)}isNoop(e){return this.newText===e.substring(this.replaceRange.start,this.replaceRange.endExclusive)}get isEmpty(){return this.newText.length===0&&this.replaceRange.length===0}};function _kt(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty)return e;if(e.isEmpty)return t;let n=[...t.edits],r=[],i=0;for(let o of e.edits){for(;;){let u=n[0];if(!u||u.replaceRange.start+i+u.newText.length>=o.replaceRange.start)break;n.shift(),r.push(u),i+=u.newText.length-u.replaceRange.length}let a=i,l,c;for(;;){let u=n[0];if(!u||u.replaceRange.start+i>o.replaceRange.endExclusive)break;l||(l=u),c=u,n.shift(),i+=u.newText.length-u.replaceRange.length}if(!l)r.push(new ol(o.replaceRange.delta(-i),o.newText));else{let u="",d=o.replaceRange.start-(l.replaceRange.start+a);d>0&&(u=l.newText.slice(0,d));let p=c.replaceRange.endExclusive+i-o.replaceRange.endExclusive;if(p>0){let g=new ol(Rt.ofStartAndLength(c.replaceRange.endExclusive,0),c.newText.slice(-p));n.unshift(g),i-=g.newText.length-g.replaceRange.length}let m=u+o.newText,h=new Rt(Math.min(l.replaceRange.start,o.replaceRange.start-a),o.replaceRange.endExclusive-i);r.push(new ol(h,m))}}for(;;){let o=n.shift();if(!o)break;r.push(o)}return new Ap(r).normalize()}s(_kt,"joinEdits");var Es=class t{constructor(e){this.edits=e;Ol(yv(e,(n,r)=>n.range.endExclusive<=r.range.start))}static{s(this,"Edit")}static deserialize(e){return new t(e.map(n=>Us.deserialize(n)))}static{this.empty=new t([])}static create(e){return new t(e)}static single(e){return new t([e])}static replace(e,n){return new t([Us.replace(e,n)])}static insert(e,n){return new t([Us.insert(e,n)])}static fromOffsetEdit(e){return new t(e.edits.map(n=>Us.replace(n.replaceRange,n.newText)))}static compose(e){let n;for(let r of e)n===void 0?n=r:n=n.compose(r);return n??t.empty}static trySwap(e,n){let r=e.inverse((a,l)=>" ".repeat(l-a)),i=n.tryRebase(r);if(!i)return;let o=e.tryRebase(i);if(o)return{e1:i,e2:o}}toOffsetEdit(){return new Ap(this.edits.map(e=>new ol(e.range,e.newText)))}compose(e){return Skt(this,e)}getNewRanges(){return this.toOffsetEdit().getNewTextRanges()}apply(e){let n="",r=0;for(let i of this.edits)n+=e.substring(r,i.range.start),n+=i.newText,r=i.range.endExclusive;return n+=e.substring(r),n}normalize(){let e=[],n;for(let r of this.edits)if(!(r.newText.length===0&&r.range.length===0))if(n&&n.range.endExclusive===r.range.start){let i=n.data?.merge(r.data)??void 0;n=Us.replaceWithData(n.range.join(r.range),n.newText+r.newText,i)}else n&&e.push(n),n=r;return n&&e.push(n),new t(e)}normalizeOnSource(e){let n=this.apply(e),i=Us.replace(Rt.ofLength(e.length),n).removeCommonSuffixAndPrefix(e);return i.isNeutral()?t.empty:i.toEdit()}toString(){return this.edits.map(e=>e.toString()).join("")}decompose(e){if(e===void 0){let i=[],o=0;for(let a of this.edits)i.push(Us.replaceWithData(Rt.ofStartAndLength(a.range.start+o,a.range.length),a.newText,a.data)),o+=a.newText.length-a.range.length;return new pG(i)}if(this.edits.length!==e.arrayLength)throw K8(`Number of edits ${this.edits.length} does not match ${e.arrayLength}`);let n=[],r=this.edits.slice();for(let i=0;i<this.edits.length;++i){let o=e.mapIndexBack(i),a=r[o];n.push(a);for(let l=o;l<r.length;++l){let c=a.newText.length-a.range.length,u=r[l];r[l]=Us.replaceWithData(Rt.ofStartAndLength(u.range.start+c,u.range.length),u.newText,u.data)}}return new pG(n)}getRange(){if(this.edits.length!==0)return this.edits[0].range.join(this.edits[this.edits.length-1].range)}isEmpty(){return this.edits.length===0}applyInverseToOffsetRange(e){let n=this.toOffsetEdit(),r=n.applyInverseToOffset(e.start),i=n.applyInverseToOffset(e.endExclusive);return new Rt(r,i)}serialize(){return this.edits.map(e=>e.serialize())}equals(e){if(this.edits.length!==e.edits.length)return!1;for(let n=0;n<this.edits.length;++n)if(!this.edits[n].equals(e.edits[n]))return!1;return!0}inverse(e){let n=[],r=0;for(let i of this.edits)n.push(Us.replace(Rt.ofStartAndLength(i.range.start+r,i.newText.length),e(i.range.start,i.range.endExclusive))),r+=i.newText.length-i.range.length;return new t(n)}inverseOnString(e){return this.inverse((n,r)=>e.substring(n,r))}mapData(e){return t.create(this.edits.map(n=>n.mapData(e)))}tryRebase(e){let n=[],r=0,i=0,o=0;for(;i<this.edits.length||r<e.edits.length;){let a=e.edits[r],l=this.edits[i];if(l)if(!a)n.push(Us.replace(l.range.delta(o),l.newText)),i++;else{if(l.range.intersectsOrTouches(a.range))return;l.range.start<a.range.start?(n.push(Us.replace(l.range.delta(o),l.newText)),i++):(r++,o+=a.newText.length-a.range.length)}else break}return new t(n)}};function Skt(t,e){if(t=t.normalize(),e=e.normalize(),t.isEmpty())return e;if(e.isEmpty())return t;let n=[...t.edits],r=[],i=0;for(let o of e.edits){for(;;){let u=n[0];if(!u||u.range.start+i+u.newText.length>=o.range.start)break;n.shift(),r.push(u),i+=u.newText.length-u.range.length}let a=i,l,c;for(;;){let u=n[0];if(!u||u.range.start+i>o.range.endExclusive)break;l||(l=u),c=u,n.shift(),i+=u.newText.length-u.range.length}if(!l)r.push(Us.replaceWithData(o.range.delta(-i),o.newText,o.data));else{let u=o.range.start-a-l.range.start;u>0&&r.push(Us.replaceWithData(Rt.emptyAt(l.range.start),l.newText.slice(0,u),l.data));let d=c.range.endExclusive+i-o.range.endExclusive;if(d>0){let m=Us.replaceWithData(Rt.emptyAt(c.range.endExclusive),c.newText.slice(-d),c.data);n.unshift(m),i-=m.newText.length-m.range.length}let p=new Rt(Math.min(l.range.start,o.range.start-a),o.range.endExclusive-i);r.push(Us.replaceWithData(p,o.newText,o.data))}}for(;;){let o=n.shift();if(!o)break;r.push(o)}return Es.create(r).normalize()}s(Skt,"joinEdits");var Us=class t{constructor(e,n,r){this.range=e;this.newText=n;this.data=r}static{s(this,"SingleEdit")}static deserialize(e){return new t(new Rt(e[0],e[1]),e[2],void 0)}static replace(e,n){return new t(e,n,void 0)}static insert(e,n){return new t(new Rt(e,e),n,void 0)}static delete(e){return new t(e,"",void 0)}static replaceWithData(e,n,r){return new t(e,n,r)}static insertWithData(e,n,r){return new t(new Rt(e,e),n,r)}static deleteWithData(e,n){return new t(e,"",n)}static fromSingleOffsetEdit(e){return new t(e.replaceRange,e.newText,void 0)}toString(){return`${this.range}->${JSON.stringify(this.newText)}`}serialize(){return[this.range.start,this.range.endExclusive,this.newText]}toEdit(){return Es.create([this])}equals(e){return this.range.equals(e.range)&&this.newText===e.newText}removeCommonSuffixAndPrefix(e){return this.removeCommonSuffix(e).removeCommonPrefix(e)}removeCommonPrefix(e){let n=this.range.substring(e),r=Rkt(n,this.newText);return r===0?this:t.replaceWithData(this.range.deltaStart(r),this.newText.substring(r),this.data)}removeCommonSuffix(e){let n=this.range.substring(e),r=kkt(n,this.newText);return r===0?this:t.replaceWithData(this.range.deltaEnd(-r),this.newText.substring(0,this.newText.length-r),this.data)}isNeutral(){return this.newText.length===0&&this.range.length===0}mapData(e){return new t(this.range,this.newText,e(this.data))}};function Rkt(t,e){let n=0;for(;n<t.length&&n<e.length&&t[n]===e[n];)n++;return n}s(Rkt,"commonPrefixLength");function kkt(t,e){let n=0;for(;n<t.length&&n<e.length&&t[t.length-1-n]===e[e.length-1-n];)n++;return n}s(kkt,"commonSuffixLength");var nu=class t{constructor(e,n){this.base=e;this.edit=n}static{s(this,"RootedEdit")}getEditedState(){return this.base.apply(this.edit)}rebase(e){return Nu(()=>null.base.equals(this.base.apply(e))),Nu(()=>null.base.apply(null.edit).equals(this.base.apply(e).apply(this.edit))),null}toString(){return sA.fromEdit(this).toString()}normalize(){return new t(this.base,this.edit.normalizeOnSource(this.base.value))}equals(e){return this.base.equals(e.base)&&this.edit.equals(e.edit)}},pG=class t{constructor(e){this.edits=e}static{s(this,"SingleEdits")}static{this.empty=new t([])}compose(){return Es.compose(this.edits.map(e=>e.toEdit()))}apply(e){return this.compose().apply(e)}isEmpty(){return this.edits.length===0}toEdits(){return new oA(this.edits.map(e=>e.toEdit()))}},oA=class t{constructor(e){this.edits=e}static{s(this,"Edits")}static{this.empty=new t([])}static single(e){return new t([e])}compose(){return Es.compose(this.edits)}add(e){return new t([...this.edits,e])}apply(e){return this.compose().apply(e)}isEmpty(){return this.edits.length===0}swap(e){let n=e,r=[];for(let i of this.edits){let o=Es.trySwap(n,i);if(!o)return;r.push(o.e1),n=o.e2}return{edits:new t(r),editLast:n}}mapData(e){return new t(this.edits.map(n=>n.mapData(e)))}serialize(){return this.edits.map(e=>e.serialize())}static deserialize(e){return new t(e.map(n=>Es.deserialize(n)))}toHumanReadablePatch(e){let n=e,r=[];for(let i of this.edits){let o=Lo.fromEdit(new nu(n,i));r.push(o.humanReadablePatch(n.getLines())),n=n.apply(i)}return r.join(`
---
`)}};f();var oR=class t{constructor(e){this.edits=e}static{s(this,"TextEdit")}static fromEdit(e,n){let r=e.edits.map(i=>new gy(n.getTransformer().getRange(i.range),i.newText));return new t(r)}toEdit(e){let n=this.edits.map(r=>Us.replace(e.getTransformer().getOffsetRange(r.range),r.newText));return Es.create(n)}mapEdits(e){return new t(this.edits.map(e))}},gy=class t{constructor(e,n){this.range=e;this.newText=n}static{s(this,"SingleTextEdit")}static joinEdits(e,n){if(e.length===0)throw new dr;if(e.length===1)return e[0];let r=e[0].range.getStartPosition(),i=e[e.length-1].range.getEndPosition(),o="";for(let a=0;a<e.length;a++){let l=e[a];if(o+=l.newText,a<e.length-1){let c=e[a+1],u=zt.fromPositions(l.range.getEndPosition(),c.range.getStartPosition()),d=n.getValueOfRange(u);o+=d}}return new t(zt.fromPositions(r,i),o)}static fromSingleEdit(e,n){return new t(n.getTransformer().getRange(e.range),e.newText)}extendToCoverRange(e,n){if(this.range.containsRange(e))return this;let r=this.range.plusRange(e),i=n.getValueOfRange(zt.fromPositions(r.getStartPosition(),this.range.getStartPosition())),o=n.getValueOfRange(zt.fromPositions(this.range.getEndPosition(),r.getEndPosition())),a=i+this.newText+o;return new t(r,a)}extendToFullLine(e){let n=new zt(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(n,e)}toSingleEdit(e){let r=e.getTransformer().getOffsetRange(this.range);return Us.replace(r,this.newText)}};var Lo=class t{constructor(e){this.edits=e;Ol(yv(e,(n,r)=>n.lineRange.endLineNumberExclusive<=r.lineRange.startLineNumber))}static{s(this,"LineEdit")}static{this.empty=new t([])}static deserialize(e){return new t(e.map(n=>Jm.deserialize(n)))}static fromEdit(e){let n=oR.fromEdit(e.edit,e.base);return t.fromTextEdit(n,e.base)}static fromTextEdit(e,n){let r=e.edits,i=[],o=[];for(let a=0;a<r.length;a++){let l=r[a],c=a+1<r.length?r[a+1]:void 0;if(o.push(l),c&&c.range.startLineNumber===l.range.endLineNumber)continue;let u=gy.joinEdits(o,n);o.length=0;let d=Jm.fromSingleTextEdit(u,n);i.push(d)}return new t(i)}static createFromUnsorted(e){let n=e.slice();return n.sort(w0(r=>r.lineRange.startLineNumber,_0)),new t(n)}isEmpty(){return this.edits.length===0}toEdit(e){let n=[];for(let r of this.edits){let i=r.toSingleEdit(e);n.push(i)}return Es.create(n)}toString(){return this.edits.map(e=>e.toString()).join(",")}serialize(){return this.edits.map(e=>e.serialize())}getNewLineRanges(){let e=[],n=0;for(let r of this.edits)e.push(Yt.ofLength(r.lineRange.startLineNumber+n,r.newLines.length)),n+=r.newLines.length-r.lineRange.length;return e}mapLineNumber(e){let n=0;for(let r of this.edits){if(r.lineRange.endLineNumberExclusive>e)break;n+=r.newLines.length-r.lineRange.length}return e+n}mapLineRange(e){return new Yt(this.mapLineNumber(e.startLineNumber),this.mapLineNumber(e.endLineNumberExclusive))}mapBackLineRange(e,n){return this.inverse(n).mapLineRange(e)}touches(e){return this.edits.some(n=>e.edits.some(r=>n.lineRange.intersect(r.lineRange)))}rebase(e){return new t(this.edits.map(n=>new Jm(e.mapLineRange(n.lineRange),n.newLines)))}humanReadablePatch(e){let n=[];function r(l,c,u,d){let p=u==="unmodified"?" ":u==="deleted"?"-":"+";d===void 0&&(d="[[[[[ WARNING: LINE DOES NOT EXIST ]]]]]");let m=l===-1?"   ":l.toString().padStart(3," "),h=c===-1?"   ":c.toString().padStart(3," ");n.push(`${p} ${m} ${h} ${d}`)}s(r,"pushLine");function i(){n.push("---")}s(i,"pushSeperator");let o=0,a=!0;for(let l of o5(this.edits,(c,u)=>zFe(c.lineRange,u.lineRange)<=5)){a?a=!1:i();let c=l[0].lineRange.startLineNumber-2;for(let u of l){for(let m=Math.max(1,c);m<u.lineRange.startLineNumber;m++)r(m,m+o,"unmodified",e[m-1]);let d=u.lineRange,p=u.newLines;for(let m of d.mapToLineArray(h=>h)){let h=e[m-1];r(m,-1,"deleted",h)}for(let m=0;m<p.length;m++){let h=p[m];r(-1,d.startLineNumber+o+m,"added",h)}c=d.endLineNumberExclusive,o+=u.newLines.length-u.lineRange.length}for(let u=c;u<=Math.min(c+2,e.length);u++)r(u,u+o,"unmodified",e[u-1])}return n.join(`
`)}apply(e){let n=[],r=0;for(let i of this.edits){for(;r<i.lineRange.startLineNumber-1;)n.push(e[r]),r++;for(let o of i.newLines)n.push(o);r=i.lineRange.endLineNumberExclusive-1}for(;r<e.length;)n.push(e[r]),r++;return n}inverse(e){let n=this.getNewLineRanges();return new t(this.edits.map((r,i)=>new Jm(n[i],e.slice(r.lineRange.startLineNumber-1,r.lineRange.endLineNumberExclusive-1))))}},Jm=class t{constructor(e,n){this.lineRange=e;this.newLines=n}static{s(this,"SingleLineEdit")}static deserialize(e){return new t(Yt.ofLength(e[0],e[1]-e[0]),e[2])}static fromSingleTextEdit(e,n){let r=kg(e.newText),i=e.range.startLineNumber,o=n.getValueOfRange(zt.fromPositions(new rr(e.range.startLineNumber,1),e.range.getStartPosition()));r[0]=o+r[0];let a=e.range.endLineNumber+1,l=n.getTransformer().getLineLength(e.range.endLineNumber)+1,c=n.getValueOfRange(zt.fromPositions(e.range.getEndPosition(),new rr(e.range.endLineNumber,l)));r[r.length-1]=r[r.length-1]+c;let u=e.range.startColumn===n.getTransformer().getLineLength(e.range.startLineNumber)+1,d=e.range.endColumn===1;return u&&r[0].length===o.length&&(i++,r.shift()),r.length>0&&i<a&&d&&r[r.length-1].length===c.length&&(a--,r.pop()),new t(new Yt(i,a),r)}toLineEdit(){return new Lo([this])}toSingleTextEdit(e){if(this.newLines.length===0){let n=e.getTransformer().textLength;if(this.lineRange.endLineNumberExclusive===n.lineCount+2){let r;if(this.lineRange.startLineNumber>1){let o=this.lineRange.startLineNumber-1,a=e.getTransformer().getLineLength(o)+1;r=new rr(o,a)}else r=new rr(1,1);let i=n.addToPosition(new rr(1,1));return new gy(zt.fromPositions(r,i),"")}else return new gy(new zt(this.lineRange.startLineNumber,1,this.lineRange.endLineNumberExclusive,1),"")}else if(this.lineRange.isEmpty){let n,r,i,o=this.lineRange.startLineNumber;return o===e.getTransformer().textLength.lineCount+2?(n=o-1,r=e.getTransformer().getLineLength(n)+1,i=this.newLines.map(a=>`
`+a).join("")):(n=o,r=1,i=this.newLines.map(a=>a+`
`).join("")),new gy(zt.fromPositions(new rr(n,r)),i)}else{let n=this.lineRange.endLineNumberExclusive-1,r=e.getTransformer().getLineLength(n)+1,i=new zt(this.lineRange.startLineNumber,1,n,r),o=this.newLines.join(`
`);return new gy(i,o)}}toSingleEdit(e){let n=this.toSingleTextEdit(e),r=e.getTransformer().getOffsetRange(n.range);return Us.replace(r,n.newText)}toString(){return`${this.lineRange}->${JSON.stringify(this.newLines)}`}serialize(){return[this.lineRange.startLineNumber,this.lineRange.endLineNumberExclusive,this.newLines]}removeCommonSuffixPrefixLines(e){let n=this.lineRange.startLineNumber,r=this.lineRange.endLineNumberExclusive,i=0;for(;n<r&&i<this.newLines.length&&this.newLines[i]===e.getLineAt(n);)n++,i++;let o=0;for(;n<r&&o+i<this.newLines.length&&this.newLines[this.newLines.length-1-o]===e.getLineAt(r-1);)r--,o++;return i===0&&o===0?this:new t(new Yt(n,r),this.newLines.slice(i,this.newLines.length-o))}},Bkt;(e=>{function t(n){return Array.isArray(n)&&n.length===3&&typeof n[0]=="number"&&typeof n[1]=="number"&&Array.isArray(n[2])&&n[2].every(r=>typeof r=="string")}e.is=t,s(t,"is")})(Bkt||={});var sA=class t{constructor(e,n){this.base=e;this.edit=n}static{s(this,"RootedLineEdit")}static fromEdit(e){let n=Lo.fromEdit(e);return new t(e.base,n)}toString(){return this.edit.humanReadablePatch(this.base.getLines())}toEdit(){return this.edit.toEdit(this.base)}toRootedEdit(){return new nu(this.base,this.toEdit())}getEditedState(){let e=this.base.getLines();return this.edit.apply(e)}removeCommonSuffixPrefixLines(){let e=s(r=>!r.lineRange.isEmpty||r.newLines.length>0,"isNotEmptyEdit"),n=this.edit.edits.map(r=>r.removeCommonSuffixPrefixLines(this.base)).filter(r=>e(r));return new t(this.base,new Lo(n))}};f();var mG=class t{constructor(e){this._indexMap=e}static{s(this,"Permutation")}get arrayLength(){return this._indexMap.length}static createSortPermutation(e,n){let r=Array.from(e.keys()).sort((i,o)=>n(e[i],e[o]));return new t(r)}apply(e){if(e.length!==this.arrayLength)throw K8(`Permutation must be applied on an array of same length. Received length: ${e.length}. Expected length: ${this.arrayLength}`);return e.map((n,r)=>e[this._indexMap[r]])}mapIndexBack(e){let n=this._indexMap.at(e);if(n===void 0)throw K8(`Given index must be within original array length. Received: ${e}. Expected: 0 <= x < ${this.arrayLength}`);return n}inverse(){let e=this._indexMap.slice();for(let n=0;n<this._indexMap.length;n++)e[this._indexMap[n]]=n;return new t(e)}};f();f();var f9=je(th());function uQe(t){return t.map(NBt).join(`
`)}s(uQe,"stringifyChatMessages");function NBt({role:t,content:e}){if(t!==f9.Raw.ChatRole.User&&t!==f9.Raw.ChatRole.System)return"omitted because of non-user and non-system role";let n=t===f9.Raw.ChatRole.User?"User":"System",r=e.at(0);return r?.type!==f9.Raw.ChatCompletionContentPartKind.Text?"omitted because of non-text content":`${n}
------
${r.text}
==================`}s(NBt,"stringifyMessage");f();f();var LBt=Symbol("MicrotaskDelay");function FBt(t){let e=new G1,n=t(e.token),r=new Promise((i,o)=>{let a=e.token.onCancellationRequested(()=>{a.dispose(),o(new Ig)});Promise.resolve(n).then(l=>{a.dispose(),e.dispose(),i(l)},l=>{a.dispose(),e.dispose(),o(l)})});return new class{cancel(){e.cancel(),e.dispose()}then(i,o){return r.then(i,o)}catch(i){return this.then(void 0,i)}finally(i){return r.finally(i)}}}s(FBt,"createCancelablePromise");function by(t,e){return e?new Promise((n,r)=>{let i=setTimeout(()=>{o.dispose(),n()},t),o=e.onCancellationRequested(()=>{clearTimeout(i),o.dispose(),r(new Ig)})}):FBt(n=>by(t,n))}s(by,"timeout");var WG=class{constructor(e,n){this._isDisposed=!1;this._token=-1,typeof e=="function"&&typeof n=="number"&&this.setIfNotSet(e,n)}static{s(this,"TimeoutTimer")}dispose(){this.cancel(),this._isDisposed=!0}cancel(){this._token!==-1&&(clearTimeout(this._token),this._token=-1)}cancelAndSet(e,n){if(this._isDisposed)throw new dr("Calling 'cancelAndSet' on a disposed TimeoutTimer");this.cancel(),this._token=setTimeout(()=>{this._token=-1,e()},n)}setIfNotSet(e,n){if(this._isDisposed)throw new dr("Calling 'setIfNotSet' on a disposed TimeoutTimer");this._token===-1&&(this._token=setTimeout(()=>{this._token=-1,e()},n))}};var p9=class{static{s(this,"DeferredPromise")}get isRejected(){return this.outcome?.outcome===1}get isResolved(){return this.outcome?.outcome===0}get isSettled(){return!!this.outcome}get value(){return this.outcome?.outcome===0?this.outcome?.value:void 0}constructor(){this.p=new Promise((e,n)=>{this.completeCallback=e,this.errorCallback=n})}complete(e){return new Promise(n=>{this.completeCallback(e),this.outcome={outcome:0,value:e},n()})}error(e){return new Promise(n=>{this.errorCallback(e),this.outcome={outcome:1,value:e},n()})}cancel(){return this.error(new Ig)}},MBt;(n=>{async function t(r){let i,o=await Promise.all(r.map(a=>a.then(l=>l,l=>{i||(i=l)})));if(typeof i<"u")throw i;return o}n.settled=t,s(t,"settled");function e(r){return new Promise(async(i,o)=>{try{await r(i,o)}catch(a){o(a)}})}n.withAsyncBody=e,s(e,"withAsyncBody")})(MBt||={});var m9=class t{static{s(this,"AsyncIterableObject")}static fromArray(e){return new t(n=>{n.emitMany(e)})}static fromPromise(e){return new t(async n=>{n.emitMany(await e)})}static fromPromisesResolveOrder(e){return new t(async n=>{await Promise.all(e.map(async r=>n.emitOne(await r)))})}static merge(e){return new t(async n=>{await Promise.all(e.map(async r=>{for await(let i of r)n.emitOne(i)}))})}static{this.EMPTY=t.fromArray([])}constructor(e,n){this._state=0,this._results=[],this._error=null,this._onReturn=n,this._onStateChanged=new S0,queueMicrotask(async()=>{let r={emitOne:s(i=>this.emitOne(i),"emitOne"),emitMany:s(i=>this.emitMany(i),"emitMany"),reject:s(i=>this.reject(i),"reject")};try{await Promise.resolve(e(r)),this.resolve()}catch(i){this.reject(i)}finally{r.emitOne=void 0,r.emitMany=void 0,r.reject=void 0}})}[Symbol.asyncIterator](){let e=0;return{next:s(async()=>{do{if(this._state===2)throw this._error;if(e<this._results.length)return{done:!1,value:this._results[e++]};if(this._state===1)return{done:!0,value:void 0};await l2.toPromise(this._onStateChanged.event)}while(!0)},"next"),return:s(async()=>(this._onReturn?.(),{done:!0,value:void 0}),"return")}}static map(e,n){return new t(async r=>{for await(let i of e)r.emitOne(n(i))})}map(e){return t.map(this,e)}static filter(e,n){return new t(async r=>{for await(let i of e)n(i)&&r.emitOne(i)})}filter(e){return t.filter(this,e)}static coalesce(e){return t.filter(e,n=>!!n)}coalesce(){return t.coalesce(this)}static async toPromise(e){let n=[];for await(let r of e)n.push(r);return n}toPromise(){return t.toPromise(this)}emitOne(e){this._state===0&&(this._results.push(e),this._onStateChanged.fire())}emitMany(e){this._state===0&&(this._results=this._results.concat(e),this._onStateChanged.fire())}resolve(){this._state===0&&(this._state=1,this._onStateChanged.fire())}reject(e){this._state===0&&(this._state=2,this._error=e,this._onStateChanged.fire())}};var HG=class{constructor(e){this._deferred=new p9;this._asyncIterable=new m9(i=>{if(n){i.reject(n);return}return r&&i.emitMany(r),this._errorFn=o=>i.reject(o),this._emitFn=o=>i.emitOne(o),this._deferred.p},e);let n,r;this._emitFn=i=>{r||(r=[]),r.push(i)},this._errorFn=i=>{n||(n=i)}}static{s(this,"AsyncIterableSource")}get asyncIterable(){return this._asyncIterable}resolve(){this._deferred.complete()}reject(e){this._errorFn(e),this._deferred.complete()}emitOne(e){this._emitFn(e)}};f();f();f();f();f();var jG=!1,VG=!1,GG=!1,QBt=!1,OBt=!1,dQe=!1,UBt=!1,qBt=!1,WBt=!1,HBt=!1;var Ey,Iy=globalThis,Cp;typeof Iy.vscode<"u"&&typeof Iy.vscode.process<"u"?Cp=Iy.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(Cp=process);var fQe=typeof Cp?.versions?.electron=="string",GBt=fQe&&Cp?.type==="renderer";typeof Cp=="object"?(jG=Cp.platform==="win32",VG=Cp.platform==="darwin",GG=Cp.platform==="linux",QBt=GG&&!!Cp.env.SNAP&&!!Cp.env.SNAP_REVISION,UBt=fQe,WBt=!!Cp.env.CI||!!Cp.env.BUILD_ARTIFACTSTAGINGDIRECTORY,OBt=!0):typeof navigator=="object"&&!GBt?(Ey=navigator.userAgent,jG=Ey.indexOf("Windows")>=0,VG=Ey.indexOf("Macintosh")>=0,qBt=(Ey.indexOf("Macintosh")>=0||Ey.indexOf("iPad")>=0||Ey.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,GG=Ey.indexOf("Linux")>=0,HBt=Ey?.indexOf("Mobi")>=0,dQe=!0):console.error("Unable to resolve platform.");var ode=0;VG?ode=1:jG?ode=3:GG&&(ode=2);var sT=jG,pQe=VG;var jBt=dQe&&typeof Iy.importScripts=="function",nlr=jBt?Iy.origin:void 0;var uA=Ey;var VBt=typeof Iy.postMessage=="function"&&!Iy.importScripts,rlr=(()=>{if(VBt){let t=[];Iy.addEventListener("message",n=>{if(n.data&&n.data.vscodeScheduleAsyncWork)for(let r=0,i=t.length;r<i;r++){let o=t[r];if(o.id===n.data.vscodeScheduleAsyncWork){t.splice(r,1),o.callback();return}}});let e=0;return n=>{let r=++e;t.push({id:r,callback:n}),Iy.postMessage({vscodeScheduleAsyncWork:r},"*")}}return t=>setTimeout(t)})();var $Bt=!!(uA&&uA.indexOf("Chrome")>=0),ilr=!!(uA&&uA.indexOf("Firefox")>=0),olr=!!(!$Bt&&uA&&uA.indexOf("Safari")>=0),slr=!!(uA&&uA.indexOf("Edg/")>=0),alr=!!(uA&&uA.indexOf("Android")>=0);var aT,sde=globalThis.vscode;if(typeof sde<"u"&&typeof sde.process<"u"){let t=sde.process;aT={get platform(){return t.platform},get arch(){return t.arch},get env(){return t.env},cwd(){return t.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?aT={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:aT={get platform(){return sT?"win32":pQe?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var h9=aT.cwd,mQe=aT.env,hQe=aT.platform,plr=aT.arch;var YBt=65,KBt=97,JBt=90,XBt=122,hb=46,Yl=47,Ld=92,pb=58,ZBt=63,$G=class extends Error{static{s(this,"ErrorInvalidArgType")}constructor(e,n,r){let i;typeof n=="string"&&n.indexOf("not ")===0?(i="must not be",n=n.replace(/^not /,"")):i="must be";let o=e.indexOf(".")!==-1?"property":"argument",a=`The "${e}" ${o} ${i} of type ${n}`;a+=`. Received type ${typeof r}`,super(a),this.code="ERR_INVALID_ARG_TYPE"}};function e8t(t,e){if(t===null||typeof t!="object")throw new $G(e,"Object",t)}s(e8t,"validateObject");function ma(t,e){if(typeof t!="string")throw new $G(e,"string",t)}s(ma,"validateString");var Fd=hQe==="win32";function ai(t){return t===Yl||t===Ld}s(ai,"isPathSeparator");function ade(t){return t===Yl}s(ade,"isPosixPathSeparator");function mb(t){return t>=YBt&&t<=JBt||t>=KBt&&t<=XBt}s(mb,"isWindowsDeviceRoot");function zG(t,e,n,r){let i="",o=0,a=-1,l=0,c=0;for(let u=0;u<=t.length;++u){if(u<t.length)c=t.charCodeAt(u);else{if(r(c))break;c=Yl}if(r(c)){if(!(a===u-1||l===1))if(l===2){if(i.length<2||o!==2||i.charCodeAt(i.length-1)!==hb||i.charCodeAt(i.length-2)!==hb){if(i.length>2){let d=i.lastIndexOf(n);d===-1?(i="",o=0):(i=i.slice(0,d),o=i.length-1-i.lastIndexOf(n)),a=u,l=0;continue}else if(i.length!==0){i="",o=0,a=u,l=0;continue}}e&&(i+=i.length>0?`${n}..`:"..",o=2)}else i.length>0?i+=`${n}${t.slice(a+1,u)}`:i=t.slice(a+1,u),o=u-a-1;a=u,l=0}else c===hb&&l!==-1?++l:l=-1}return i}s(zG,"normalizeString");function t8t(t){return t?`${t[0]==="."?"":"."}${t}`:""}s(t8t,"formatExt");function gQe(t,e){e8t(e,"pathObject");let n=e.dir||e.root,r=e.base||`${e.name||""}${t8t(e.ext)}`;return n?n===e.root?`${n}${r}`:`${n}${t}${r}`:r}s(gQe,"_format");var ha={resolve(...t){let e="",n="",r=!1;for(let i=t.length-1;i>=-1;i--){let o;if(i>=0){if(o=t[i],ma(o,`paths[${i}]`),o.length===0)continue}else e.length===0?o=h9():(o=mQe[`=${e}`]||h9(),(o===void 0||o.slice(0,2).toLowerCase()!==e.toLowerCase()&&o.charCodeAt(2)===Ld)&&(o=`${e}\\`));let a=o.length,l=0,c="",u=!1,d=o.charCodeAt(0);if(a===1)ai(d)&&(l=1,u=!0);else if(ai(d))if(u=!0,ai(o.charCodeAt(1))){let p=2,m=p;for(;p<a&&!ai(o.charCodeAt(p));)p++;if(p<a&&p!==m){let h=o.slice(m,p);for(m=p;p<a&&ai(o.charCodeAt(p));)p++;if(p<a&&p!==m){for(m=p;p<a&&!ai(o.charCodeAt(p));)p++;(p===a||p!==m)&&(c=`\\\\${h}\\${o.slice(m,p)}`,l=p)}}}else l=1;else mb(d)&&o.charCodeAt(1)===pb&&(c=o.slice(0,2),l=2,a>2&&ai(o.charCodeAt(2))&&(u=!0,l=3));if(c.length>0)if(e.length>0){if(c.toLowerCase()!==e.toLowerCase())continue}else e=c;if(r){if(e.length>0)break}else if(n=`${o.slice(l)}\\${n}`,r=u,u&&e.length>0)break}return n=zG(n,!r,"\\",ai),r?`${e}\\${n}`:`${e}${n}`||"."},normalize(t){ma(t,"path");let e=t.length;if(e===0)return".";let n=0,r,i=!1,o=t.charCodeAt(0);if(e===1)return ade(o)?"\\":t;if(ai(o))if(i=!0,ai(t.charCodeAt(1))){let l=2,c=l;for(;l<e&&!ai(t.charCodeAt(l));)l++;if(l<e&&l!==c){let u=t.slice(c,l);for(c=l;l<e&&ai(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&!ai(t.charCodeAt(l));)l++;if(l===e)return`\\\\${u}\\${t.slice(c)}\\`;l!==c&&(r=`\\\\${u}\\${t.slice(c,l)}`,n=l)}}}else n=1;else mb(o)&&t.charCodeAt(1)===pb&&(r=t.slice(0,2),n=2,e>2&&ai(t.charCodeAt(2))&&(i=!0,n=3));let a=n<e?zG(t.slice(n),!i,"\\",ai):"";return a.length===0&&!i&&(a="."),a.length>0&&ai(t.charCodeAt(e-1))&&(a+="\\"),r===void 0?i?`\\${a}`:a:i?`${r}\\${a}`:`${r}${a}`},isAbsolute(t){ma(t,"path");let e=t.length;if(e===0)return!1;let n=t.charCodeAt(0);return ai(n)||e>2&&mb(n)&&t.charCodeAt(1)===pb&&ai(t.charCodeAt(2))},join(...t){if(t.length===0)return".";let e,n;for(let o=0;o<t.length;++o){let a=t[o];ma(a,"path"),a.length>0&&(e===void 0?e=n=a:e+=`\\${a}`)}if(e===void 0)return".";let r=!0,i=0;if(typeof n=="string"&&ai(n.charCodeAt(0))){++i;let o=n.length;o>1&&ai(n.charCodeAt(1))&&(++i,o>2&&(ai(n.charCodeAt(2))?++i:r=!1))}if(r){for(;i<e.length&&ai(e.charCodeAt(i));)i++;i>=2&&(e=`\\${e.slice(i)}`)}return ha.normalize(e)},relative(t,e){if(ma(t,"from"),ma(e,"to"),t===e)return"";let n=ha.resolve(t),r=ha.resolve(e);if(n===r||(t=n.toLowerCase(),e=r.toLowerCase(),t===e))return"";let i=0;for(;i<t.length&&t.charCodeAt(i)===Ld;)i++;let o=t.length;for(;o-1>i&&t.charCodeAt(o-1)===Ld;)o--;let a=o-i,l=0;for(;l<e.length&&e.charCodeAt(l)===Ld;)l++;let c=e.length;for(;c-1>l&&e.charCodeAt(c-1)===Ld;)c--;let u=c-l,d=a<u?a:u,p=-1,m=0;for(;m<d;m++){let g=t.charCodeAt(i+m);if(g!==e.charCodeAt(l+m))break;g===Ld&&(p=m)}if(m!==d){if(p===-1)return r}else{if(u>d){if(e.charCodeAt(l+m)===Ld)return r.slice(l+m+1);if(m===2)return r.slice(l+m)}a>d&&(t.charCodeAt(i+m)===Ld?p=m:m===2&&(p=3)),p===-1&&(p=0)}let h="";for(m=i+p+1;m<=o;++m)(m===o||t.charCodeAt(m)===Ld)&&(h+=h.length===0?"..":"\\..");return l+=p,h.length>0?`${h}${r.slice(l,c)}`:(r.charCodeAt(l)===Ld&&++l,r.slice(l,c))},toNamespacedPath(t){if(typeof t!="string"||t.length===0)return t;let e=ha.resolve(t);if(e.length<=2)return t;if(e.charCodeAt(0)===Ld){if(e.charCodeAt(1)===Ld){let n=e.charCodeAt(2);if(n!==ZBt&&n!==hb)return`\\\\?\\UNC\\${e.slice(2)}`}}else if(mb(e.charCodeAt(0))&&e.charCodeAt(1)===pb&&e.charCodeAt(2)===Ld)return`\\\\?\\${e}`;return t},dirname(t){ma(t,"path");let e=t.length;if(e===0)return".";let n=-1,r=0,i=t.charCodeAt(0);if(e===1)return ai(i)?t:".";if(ai(i)){if(n=r=1,ai(t.charCodeAt(1))){let l=2,c=l;for(;l<e&&!ai(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&ai(t.charCodeAt(l));)l++;if(l<e&&l!==c){for(c=l;l<e&&!ai(t.charCodeAt(l));)l++;if(l===e)return t;l!==c&&(n=r=l+1)}}}}else mb(i)&&t.charCodeAt(1)===pb&&(n=e>2&&ai(t.charCodeAt(2))?3:2,r=n);let o=-1,a=!0;for(let l=e-1;l>=r;--l)if(ai(t.charCodeAt(l))){if(!a){o=l;break}}else a=!1;if(o===-1){if(n===-1)return".";o=n}return t.slice(0,o)},basename(t,e){e!==void 0&&ma(e,"suffix"),ma(t,"path");let n=0,r=-1,i=!0,o;if(t.length>=2&&mb(t.charCodeAt(0))&&t.charCodeAt(1)===pb&&(n=2),e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,l=-1;for(o=t.length-1;o>=n;--o){let c=t.charCodeAt(o);if(ai(c)){if(!i){n=o+1;break}}else l===-1&&(i=!1,l=o+1),a>=0&&(c===e.charCodeAt(a)?--a===-1&&(r=o):(a=-1,r=l))}return n===r?r=l:r===-1&&(r=t.length),t.slice(n,r)}for(o=t.length-1;o>=n;--o)if(ai(t.charCodeAt(o))){if(!i){n=o+1;break}}else r===-1&&(i=!1,r=o+1);return r===-1?"":t.slice(n,r)},extname(t){ma(t,"path");let e=0,n=-1,r=0,i=-1,o=!0,a=0;t.length>=2&&t.charCodeAt(1)===pb&&mb(t.charCodeAt(0))&&(e=r=2);for(let l=t.length-1;l>=e;--l){let c=t.charCodeAt(l);if(ai(c)){if(!o){r=l+1;break}continue}i===-1&&(o=!1,i=l+1),c===hb?n===-1?n=l:a!==1&&(a=1):n!==-1&&(a=-1)}return n===-1||i===-1||a===0||a===1&&n===i-1&&n===r+1?"":t.slice(n,i)},format:gQe.bind(null,"\\"),parse(t){ma(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let n=t.length,r=0,i=t.charCodeAt(0);if(n===1)return ai(i)?(e.root=e.dir=t,e):(e.base=e.name=t,e);if(ai(i)){if(r=1,ai(t.charCodeAt(1))){let p=2,m=p;for(;p<n&&!ai(t.charCodeAt(p));)p++;if(p<n&&p!==m){for(m=p;p<n&&ai(t.charCodeAt(p));)p++;if(p<n&&p!==m){for(m=p;p<n&&!ai(t.charCodeAt(p));)p++;p===n?r=p:p!==m&&(r=p+1)}}}}else if(mb(i)&&t.charCodeAt(1)===pb){if(n<=2)return e.root=e.dir=t,e;if(r=2,ai(t.charCodeAt(2))){if(n===3)return e.root=e.dir=t,e;r=3}}r>0&&(e.root=t.slice(0,r));let o=-1,a=r,l=-1,c=!0,u=t.length-1,d=0;for(;u>=r;--u){if(i=t.charCodeAt(u),ai(i)){if(!c){a=u+1;break}continue}l===-1&&(c=!1,l=u+1),i===hb?o===-1?o=u:d!==1&&(d=1):o!==-1&&(d=-1)}return l!==-1&&(o===-1||d===0||d===1&&o===l-1&&o===a+1?e.base=e.name=t.slice(a,l):(e.name=t.slice(a,o),e.base=t.slice(a,l),e.ext=t.slice(o,l))),a>0&&a!==r?e.dir=t.slice(0,a-1):e.dir=e.root,e},sep:"\\",delimiter:";",win32:null,posix:null},n8t=(()=>{if(Fd){let t=/\\/g;return()=>{let e=h9().replace(t,"/");return e.slice(e.indexOf("/"))}}return()=>h9()})(),Fa={resolve(...t){let e="",n=!1;for(let r=t.length-1;r>=-1&&!n;r--){let i=r>=0?t[r]:n8t();ma(i,`paths[${r}]`),i.length!==0&&(e=`${i}/${e}`,n=i.charCodeAt(0)===Yl)}return e=zG(e,!n,"/",ade),n?`/${e}`:e.length>0?e:"."},normalize(t){if(ma(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Yl,n=t.charCodeAt(t.length-1)===Yl;return t=zG(t,!e,"/",ade),t.length===0?e?"/":n?"./":".":(n&&(t+="/"),e?`/${t}`:t)},isAbsolute(t){return ma(t,"path"),t.length>0&&t.charCodeAt(0)===Yl},join(...t){if(t.length===0)return".";let e;for(let n=0;n<t.length;++n){let r=t[n];ma(r,"path"),r.length>0&&(e===void 0?e=r:e+=`/${r}`)}return e===void 0?".":Fa.normalize(e)},relative(t,e){if(ma(t,"from"),ma(e,"to"),t===e||(t=Fa.resolve(t),e=Fa.resolve(e),t===e))return"";let n=1,r=t.length,i=r-n,o=1,a=e.length-o,l=i<a?i:a,c=-1,u=0;for(;u<l;u++){let p=t.charCodeAt(n+u);if(p!==e.charCodeAt(o+u))break;p===Yl&&(c=u)}if(u===l)if(a>l){if(e.charCodeAt(o+u)===Yl)return e.slice(o+u+1);if(u===0)return e.slice(o+u)}else i>l&&(t.charCodeAt(n+u)===Yl?c=u:u===0&&(c=0));let d="";for(u=n+c+1;u<=r;++u)(u===r||t.charCodeAt(u)===Yl)&&(d+=d.length===0?"..":"/..");return`${d}${e.slice(o+c)}`},toNamespacedPath(t){return t},dirname(t){if(ma(t,"path"),t.length===0)return".";let e=t.charCodeAt(0)===Yl,n=-1,r=!0;for(let i=t.length-1;i>=1;--i)if(t.charCodeAt(i)===Yl){if(!r){n=i;break}}else r=!1;return n===-1?e?"/":".":e&&n===1?"//":t.slice(0,n)},basename(t,e){e!==void 0&&ma(e,"ext"),ma(t,"path");let n=0,r=-1,i=!0,o;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e===t)return"";let a=e.length-1,l=-1;for(o=t.length-1;o>=0;--o){let c=t.charCodeAt(o);if(c===Yl){if(!i){n=o+1;break}}else l===-1&&(i=!1,l=o+1),a>=0&&(c===e.charCodeAt(a)?--a===-1&&(r=o):(a=-1,r=l))}return n===r?r=l:r===-1&&(r=t.length),t.slice(n,r)}for(o=t.length-1;o>=0;--o)if(t.charCodeAt(o)===Yl){if(!i){n=o+1;break}}else r===-1&&(i=!1,r=o+1);return r===-1?"":t.slice(n,r)},extname(t){ma(t,"path");let e=-1,n=0,r=-1,i=!0,o=0;for(let a=t.length-1;a>=0;--a){let l=t.charCodeAt(a);if(l===Yl){if(!i){n=a+1;break}continue}r===-1&&(i=!1,r=a+1),l===hb?e===-1?e=a:o!==1&&(o=1):e!==-1&&(o=-1)}return e===-1||r===-1||o===0||o===1&&e===r-1&&e===n+1?"":t.slice(e,r)},format:gQe.bind(null,"/"),parse(t){ma(t,"path");let e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;let n=t.charCodeAt(0)===Yl,r;n?(e.root="/",r=1):r=0;let i=-1,o=0,a=-1,l=!0,c=t.length-1,u=0;for(;c>=r;--c){let d=t.charCodeAt(c);if(d===Yl){if(!l){o=c+1;break}continue}a===-1&&(l=!1,a=c+1),d===hb?i===-1?i=c:u!==1&&(u=1):i!==-1&&(u=-1)}if(a!==-1){let d=o===0&&n?1:o;i===-1||u===0||u===1&&i===a-1&&i===o+1?e.base=e.name=t.slice(d,a):(e.name=t.slice(d,i),e.base=t.slice(d,a),e.ext=t.slice(i,a))}return o>0?e.dir=t.slice(0,o-1):n&&(e.dir="/"),e},sep:"/",delimiter:":",win32:null,posix:null};Fa.win32=ha.win32=ha;Fa.posix=ha.posix=Fa;var hlr=Fd?ha.normalize:Fa.normalize,glr=Fd?ha.isAbsolute:Fa.isAbsolute,Alr=Fd?ha.join:Fa.join,ylr=Fd?ha.resolve:Fa.resolve,Clr=Fd?ha.relative:Fa.relative,xlr=Fd?ha.dirname:Fa.dirname,AQe=Fd?ha.basename:Fa.basename,yQe=Fd?ha.extname:Fa.extname,vlr=Fd?ha.format:Fa.format,blr=Fd?ha.parse:Fa.parse,Elr=Fd?ha.toNamespacedPath:Fa.toNamespacedPath,Ilr=Fd?ha.sep:Fa.sep,Tlr=Fd?ha.delimiter:Fa.delimiter;var i8t=/^\w[\w\d+.-]*$/,o8t=/^\//,s8t=/^\/\//;function a8t(t,e){if(!t.scheme&&e)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${t.authority}", path: "${t.path}", query: "${t.query}", fragment: "${t.fragment}"}`);if(t.scheme&&!i8t.test(t.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(t.path){if(t.authority){if(!o8t.test(t.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(s8t.test(t.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}s(a8t,"_validateUri");function l8t(t,e){return!t&&!e?"file":t}s(l8t,"_schemeFix");function c8t(t,e){switch(t){case"https":case"http":case"file":e?e[0]!==rh&&(e=rh+e):e=rh;break}return e}s(c8t,"_referenceResolution");var zo="",rh="/",u8t=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,Ab=class t{static{s(this,"URI")}static isUri(e){return e instanceof t?!0:e?typeof e.authority=="string"&&typeof e.fragment=="string"&&typeof e.path=="string"&&typeof e.query=="string"&&typeof e.scheme=="string"&&typeof e.fsPath=="string"&&typeof e.with=="function"&&typeof e.toString=="function":!1}constructor(e,n,r,i,o,a=!1){typeof e=="object"?(this.scheme=e.scheme||zo,this.authority=e.authority||zo,this.path=e.path||zo,this.query=e.query||zo,this.fragment=e.fragment||zo):(this.scheme=l8t(e,a),this.authority=n||zo,this.path=c8t(this.scheme,r||zo),this.query=i||zo,this.fragment=o||zo,a8t(this,a))}get fsPath(){return lde(this,!1)}with(e){if(!e)return this;let{scheme:n,authority:r,path:i,query:o,fragment:a}=e;return n===void 0?n=this.scheme:n===null&&(n=zo),r===void 0?r=this.authority:r===null&&(r=zo),i===void 0?i=this.path:i===null&&(i=zo),o===void 0?o=this.query:o===null&&(o=zo),a===void 0?a=this.fragment:a===null&&(a=zo),n===this.scheme&&r===this.authority&&i===this.path&&o===this.query&&a===this.fragment?this:new gb(n,r,i,o,a)}static parse(e,n=!1){let r=u8t.exec(e);return r?new gb(r[2]||zo,YG(r[4]||zo),YG(r[5]||zo),YG(r[7]||zo),YG(r[9]||zo),n):new gb(zo,zo,zo,zo,zo)}static file(e){let n=zo;if(sT&&(e=e.replace(/\\/g,rh)),e[0]===rh&&e[1]===rh){let r=e.indexOf(rh,2);r===-1?(n=e.substring(2),e=rh):(n=e.substring(2,r),e=e.substring(r)||rh)}return new gb("file",n,e,zo,zo)}static from(e,n){return new gb(e.scheme,e.authority,e.path,e.query,e.fragment,n)}static joinPath(e,...n){if(!e.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let r;return sT&&e.scheme==="file"?r=t.file(ha.join(lde(e,!0),...n)).path:r=Fa.join(e.path,...n),e.with({path:r})}toString(e=!1){return cde(this,e)}toJSON(){return this}static revive(e){if(e){if(e instanceof t)return e;{let n=new gb(e);return n._formatted=e.external??null,n._fsPath=e._sep===vQe?e.fsPath??null:null,n}}else return e}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};var vQe=sT?1:void 0,gb=class extends Ab{constructor(){super(...arguments);this._formatted=null;this._fsPath=null}static{s(this,"Uri")}get fsPath(){return this._fsPath||(this._fsPath=lde(this,!1)),this._fsPath}toString(n=!1){return n?cde(this,!0):(this._formatted||(this._formatted=cde(this,!1)),this._formatted)}toJSON(){let n={$mid:1};return this._fsPath&&(n.fsPath=this._fsPath,n._sep=vQe),this._formatted&&(n.external=this._formatted),this.path&&(n.path=this.path),this.scheme&&(n.scheme=this.scheme),this.authority&&(n.authority=this.authority),this.query&&(n.query=this.query),this.fragment&&(n.fragment=this.fragment),n}},bQe={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function CQe(t,e,n){let r,i=-1;for(let o=0;o<t.length;o++){let a=t.charCodeAt(o);if(a>=97&&a<=122||a>=65&&a<=90||a>=48&&a<=57||a===45||a===46||a===95||a===126||e&&a===47||n&&a===91||n&&a===93||n&&a===58)i!==-1&&(r+=encodeURIComponent(t.substring(i,o)),i=-1),r!==void 0&&(r+=t.charAt(o));else{r===void 0&&(r=t.substr(0,o));let l=bQe[a];l!==void 0?(i!==-1&&(r+=encodeURIComponent(t.substring(i,o)),i=-1),r+=l):i===-1&&(i=o)}}return i!==-1&&(r+=encodeURIComponent(t.substring(i))),r!==void 0?r:t}s(CQe,"encodeURIComponentFast");function d8t(t){let e;for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);r===35||r===63?(e===void 0&&(e=t.substr(0,n)),e+=bQe[r]):e!==void 0&&(e+=t[n])}return e!==void 0?e:t}s(d8t,"encodeURIComponentMinimal");function lde(t,e){let n;return t.authority&&t.path.length>1&&t.scheme==="file"?n=`//${t.authority}${t.path}`:t.path.charCodeAt(0)===47&&(t.path.charCodeAt(1)>=65&&t.path.charCodeAt(1)<=90||t.path.charCodeAt(1)>=97&&t.path.charCodeAt(1)<=122)&&t.path.charCodeAt(2)===58?e?n=t.path.substr(1):n=t.path[1].toLowerCase()+t.path.substr(2):n=t.path,sT&&(n=n.replace(/\//g,"\\")),n}s(lde,"uriToFsPath");function cde(t,e){let n=e?d8t:CQe,r="",{scheme:i,authority:o,path:a,query:l,fragment:c}=t;if(i&&(r+=i,r+=":"),(o||i==="file")&&(r+=rh,r+=rh),o){let u=o.indexOf("@");if(u!==-1){let d=o.substr(0,u);o=o.substr(u+1),u=d.lastIndexOf(":"),u===-1?r+=n(d,!1,!1):(r+=n(d.substr(0,u),!1,!1),r+=":",r+=n(d.substr(u+1),!1,!0)),r+="@"}o=o.toLowerCase(),u=o.lastIndexOf(":"),u===-1?r+=n(o,!1,!0):(r+=n(o.substr(0,u),!1,!0),r+=o.substr(u))}if(a){if(a.length>=3&&a.charCodeAt(0)===47&&a.charCodeAt(2)===58){let u=a.charCodeAt(1);u>=65&&u<=90&&(a=`/${String.fromCharCode(u+32)}:${a.substr(3)}`)}else if(a.length>=2&&a.charCodeAt(1)===58){let u=a.charCodeAt(0);u>=65&&u<=90&&(a=`${String.fromCharCode(u+32)}:${a.substr(2)}`)}r+=n(a,!0,!1)}return l&&(r+="?",r+=n(l,!1,!1)),c&&(r+="#",r+=e?c:CQe(c,!1,!1)),r}s(cde,"_asFormatted");function EQe(t){try{return decodeURIComponent(t)}catch{return t.length>3?t.substr(0,3)+EQe(t.substr(3)):t}}s(EQe,"decodeURIComponentGraceful");var xQe=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function YG(t){return t.match(xQe)?t.replace(xQe,e=>EQe(e)):t}s(YG,"percentDecode");f();var ih=class t{constructor(e){this.uri=e;this._uri=Ab.parse(mc(this.uri))}static{s(this,"DocumentId")}static{this._cache=new j1({getCacheKey:JSON.stringify},e=>new t(e.uri))}static create(e){return t._cache.get({uri:e})}get path(){return this._uri.path}get fragment(){return this._uri.fragment}toString(){return this.uri}get baseName(){return AQe(this.uri)}get extension(){return yQe(this.uri)}toUri(){return this._uri}};var g9=class t{constructor(e,n){this.firstEditStrategy=e;this.maxLinesPerEdit=n}static{s(this,"StatelessNextEditOptions")}doesFitMaxLinesPerEdit(e){return this.maxLinesPerEdit===void 0||e.lineRange.length<=this.maxLinesPerEdit&&e.newLines.length<=this.maxLinesPerEdit}serialize(){return{firstEditStrategy:this.firstEditStrategy,maxLinesPerEdit:this.maxLinesPerEdit}}static deserialize(e){return new t(e.firstEditStrategy,e.maxLinesPerEdit)}},KG=class t{constructor(e,n,r,i,o){this.id=e;this.documents=n;this.activeDocumentIdx=r;this.xtabEditHistory=i;this.options=o;this.seqid=String(++t.ID);this.cancellationTokenSource=new G1;this.liveDependentants=0;this.fetchIssued=!1;this._result=new p9;Ol(n.length>0),Ol(r>=0&&r<n.length)}static{s(this,"StatelessNextEditRequest")}static{this.ID=0}get result(){return this._result.p}setResult(e){this._result.complete(e)}setResultError(e){this._result.error(e)}hasDocument(e){return this.documents.find(n=>n.id===e)!==void 0}static deserialize(e){return new t(e.id,e.documents.map(n=>A9.deserialize(n)),e.activeDocumentIdx,[],g9.deserialize(e.options))}getActiveDocument(){return this.documents[this.activeDocumentIdx]}serialize(){return{id:this.id,documents:this.documents.map(e=>e.serialize()),activeDocumentIdx:this.activeDocumentIdx,options:this.options.serialize()}}toString(){return this.toMarkdown()}toMarkdown(){return`### StatelessNextEditRequest

${this.documents.map((n,r)=>` * [${r+1}/${this.documents.length}] ${r===this.activeDocumentIdx?"(active document) ":""}`+n.toMarkdown()).join(`

`)}`}},A9=class t{constructor(e,n,r,i,o,a,l,c,u,d,p,m,h=i.length,g=new Yt(1,i.length+1),y=void 0){this.id=e;this.workspaceRoot=n;this.languageId=r;this.documentLinesBeforeEdit=i;this.recentEdit=o;this.recentlyEditedInLinesAfterEditRange=a;this.documentBeforeEdits=l;this.recentEdits=c;this.documentAfterEditsNoShortening=u;this.toEditOnDocumentAfterEditsNoShortening=d;this.toOffsetOnDocumentAfterEditsNoShortening=p;this.toProjectedOffset=m;this.lineCountBeforeClipping=h;this.clippingRange=g;this.lastSelectionInAfterEdit=y;this.recentlyEditedInLinesAfterEdit=this.recentlyEditedInLinesAfterEditRange===void 0?void 0:Yt.fromRangeInclusive(this.recentlyEditedInLinesAfterEditRange);this.documentAfterEdits=new ql(this.recentEdits.apply(this.documentBeforeEdits.value));this.documentAfterEditsLines=this.documentAfterEdits.getLines()}static{s(this,"StatelessNextEditDocument")}static deserialize(e){return new t(ih.create(e.id),e.workspaceRoot?Ab.parse(e.workspaceRoot):void 0,f2.create(e.languageId),e.documentLinesBeforeEdit,Lo.deserialize(e.recentEdit),e.recentlyEditedInLinesAfterEditRange?zt.lift(e.recentlyEditedInLinesAfterEditRange):void 0,new ql(e.documentBeforeEdits),oA.deserialize(e.recentEdits),new ql(e.documentAfterEditsNoShortening),n=>{throw new Error("Deserializing serialized document does not implement translation of line edit to edit")},n=>{throw new Error("Deserializing serialized document does not implement translation of offsets")},n=>{throw new Error("Deserializing serialized document does not implement translation of offsets")},e.lineCountBeforeClipping,Yt.deserialize(e.clippingRange))}serialize(){return{id:this.id.uri,workspaceRoot:this.workspaceRoot?.toString(),languageId:this.languageId,documentLinesBeforeEdit:this.documentLinesBeforeEdit,recentEdit:this.recentEdit.serialize(),recentlyEditedInLinesAfterEditRange:this.recentlyEditedInLinesAfterEditRange?.toJSON(),documentBeforeEdits:this.documentBeforeEdits.value,recentEdits:this.recentEdits.serialize(),documentAfterEditsNoShortening:this.documentAfterEditsNoShortening.value,lineCountBeforeClipping:this.lineCountBeforeClipping,clippingRange:this.clippingRange.serialize()}}getDisplayPath(){return this.id.uri}toString(){return this.toMarkdown()}toMarkdown(){let e=[];return e.push(`StatelessNextEditDocument: **${this.id.uri}**
`),e.push("```patch"),e.push(this.recentEdit.humanReadablePatch(this.documentLinesBeforeEdit)),e.push("```"),e.push(""),e.join(`
`)}};var Ri=class t{constructor(e,n){this.nextEdit=e;this.telemetry=n}static{s(this,"StatelessNextEditResult")}static noEdit(e,n){let r=No.error(e),i=n.build(r);return new t(r,i)}static edit(e,n){let r=No.ok(e),i=n.build(r);return new t(r,i)}},yb=class{constructor(e){this._request=e;this.startTime=Date.now(),this.requestUuid=e.id}static{s(this,"StatelessNextEditTelemetryBuilder")}build(e){let r=Date.now()-this.startTime,i=this._prompt?uQe(this._prompt):void 0,o=i?.split(`
`).length,a=i?.length,l=e.isOk(),c=e.isOk()?void 0:e.err.kind,u;if(!e.isOk())switch(e.err.kind){case"activeDocumentHasNoEdits":case"noSuggestions":case"quotaExceeded":break;case"gotCancelled":case"filteredOut":u=e.err.message;break;case"fetchFailure":case"uncategorized":case"unexpected":u=e.err.error.stack?e.err.error.stack:e.err.error.message;break;default:gP(e.err)}return{hadStatelessNextEditProviderCall:!0,firstEditStrategy:this._request.options.firstEditStrategy,maxLinesPerEdit:this._request.options.maxLinesPerEdit,hasNextEdit:l,noNextEditReasonKind:c,noNextEditReasonMessage:u,statelessNextEditProviderDuration:r,logProbThreshold:this._logProbThreshold,promptLineCount:o,promptCharCount:a,isDefaultEndpoint:this._isDefaultEndpoint,debounceTime:this._debounceTime,fetchStartedAt:this._fetchStartedAt,ttft:this._ttft,fetchTime:this._fetchTime,fetchResult:this._fetchResult,fetchError:this._fetchError,hadLowLogProbSuggestion:this._hadLowLogProbSuggestion,response:this._response,nonTerminatingError:this._nonTerminatingError,nEditsSuggested:this._nEditsSuggested,nextEditLogprob:this._nextEditLogProb,kthEditPicked:this._kthEditPicked,lineDistanceToMostRecentEdit:this._lineDistanceToMostRecentEdit,firstPickStrategyOverride:this._firstPickStrategyOverride}}setLogProbThreshold(e){return this._logProbThreshold=e,this}setHadLowLogProbSuggestion(e){return this._hadLowLogProbSuggestion=e,this}setPrompt(e){return this._prompt=e,this}setIsDefaultEndpoint(e){return this._isDefaultEndpoint=e,this}setDebounceTime(e){return this._debounceTime=e,this}setFetchStartedAt(){return this._fetchStartedAt=Date.now(),this}get fetchStartedAt(){return this._fetchStartedAt}setTtft(e){return this._ttft=e,this}setFetchResultIfNotSet(e,n){return this._fetchResult===void 0&&(this._fetchResult=e,this._fetchError=n,Ol(this._fetchStartedAt!==void 0,"fetchStartedAt must be set before setting fetchTime"),this._fetchTime=Date.now()-this._fetchStartedAt),this}get fetchResult(){return this._fetchResult}get fetchError(){return this._fetchError}get fetchTime(){return this._fetchTime}setResponse(e){return this._response=e,this}setNonTerminatingError(e){return this._nonTerminatingError=e,this}setNextEditLogProb(e){return this._nextEditLogProb=e,this}setNEditsSuggested(e){return this._nEditsSuggested=e,this}setKthEditPicked(e){return this._kthEditPicked=e,this}setLineDistanceToMostRecentEdit(e){return this._lineDistanceToMostRecentEdit=e,this}setFirstPickStrategyOverride(e){return this._firstPickStrategyOverride=e,this}};function f8t(t,...e){let n=t;for(let r of e)n=r(n);return n}s(f8t,"chainStatelessNextEditProviders");var fR=class{constructor(e,n){this.ID=e;this._providers=n;let r={ID:this.ID,provideNextEdit:s((i,o)=>this.provideNextEditBase(i,o),"provideNextEdit")};this._impl=f8t(r,...this._providers)}static{s(this,"ChainedStatelessNextEditProvider")}provideNextEdit(e,n){return this._impl.provideNextEdit(e,n)}},pR=class{constructor(e){this._baseProvider=e}static{s(this,"EditFilterAspect")}get ID(){return this._baseProvider.ID}async provideNextEdit(e,n){let r=await this._baseProvider.provideNextEdit(e,n);if(r.nextEdit.isError())return r;let i=r.nextEdit.val,o=i.permutation===void 0?i.edit.edits:i.permutation.apply(i.edit.edits),a=this.filterEdit(e.getActiveDocument(),o);if(a.length===o.length)return r;if(a.length===0)return new Ri(No.error({kind:"filteredOut",message:"uncategorized"}),r.telemetry);let l=mG.createSortPermutation(a,w0(u=>u.lineRange.startLineNumber,_0)),c=new Lo(l.apply(a));return new Ri(No.ok({edit:c,permutation:l.inverse()}),r.telemetry)}},mR=class extends pR{static{s(this,"IgnoreTriviaWhitespaceChangesAspect")}filterEdit(e,n){return n.filter(i=>!this._isWhitespaceOnlyChange(i,e.documentAfterEditsLines))}_isWhitespaceOnlyChange(e,n){let r=e.lineRange.toOffsetRange().slice(n),i=e.newLines,o=i.length===0;if(o&&r.every(a=>a.trim()==="")||!o&&i.every(a=>a.trim()===""))return!0;if(r.length!==i.length)return!1;for(let a=0;a<r.length;a++){let l=r[a],c=i[a];if(l.trim()!==c.trim())return!1}return!0}},hR=class extends pR{static{s(this,"IgnoreEditsAtClippingBorderAspect")}filterEdit(e,n){return n.filter(i=>!this._isAtClippingBorder(i,e.clippingRange,e.lineCountBeforeClipping))}_isAtClippingBorder(e,n,r){return n.startLineNumber>1&&e.lineRange.startLineNumber===1||n.endLineNumberExclusive<r&&e.lineRange.endLineNumberExclusive===n.length}};f();f();var p8t=Object.freeze({abap:{lineComment:{start:"'"},markdownLanguageIds:["abap","sap-abap"]},bat:{lineComment:{start:"REM"},alternativeLineComments:[{start:"::"}],aliases:["Batch","bat"],extensions:[".bat",".cmd"]},bibtex:{lineComment:{start:"%"},aliases:["BibTeX","bibtex"],extensions:[".bib"]},blade:{lineComment:{start:"#"}},c:{lineComment:{start:"//"},aliases:["C","c"],extensions:[".c",".i"],markdownLanguageIds:["c","h"]},clojure:{lineComment:{start:";"},aliases:["Clojure","clojure"],extensions:[".clj",".cljs",".cljc",".cljx",".clojure",".edn"],markdownLanguageIds:["clojure","clj"]},coffeescript:{lineComment:{start:"//"},aliases:["CoffeeScript","coffeescript","coffee"],extensions:[".coffee",".cson",".iced"],markdownLanguageIds:["coffeescript","coffee","cson","iced"],blockComment:["###","###"]},cpp:{lineComment:{start:"//"},aliases:["C++","Cpp","cpp"],extensions:[".cpp",".cc",".cxx",".c++",".hpp",".hh",".hxx",".h++",".h",".ii",".ino",".inl",".ipp",".ixx",".tpp",".txx",".hpp.in",".h.in"],markdownLanguageIds:["cpp","hpp","cc","hh","c++","h++","cxx","hxx"],blockComment:["/*","*/"]},csharp:{lineComment:{start:"//"},aliases:["C#","csharp"],extensions:[".cs",".csx",".cake"],markdownLanguageIds:["csharp","cs"],blockComment:["/*","*/"]},css:{lineComment:{start:"/*",end:"*/"},aliases:["CSS","css"],extensions:[".css"],blockComment:["/*","*/"]},dart:{lineComment:{start:"//"},aliases:["Dart"],extensions:[".dart"],blockComment:["/*","*/"]},dockerfile:{lineComment:{start:"#"},aliases:["Docker","Dockerfile","Containerfile"],extensions:[".dockerfile",".containerfile"],markdownLanguageIds:["dockerfile","docker"]},elixir:{lineComment:{start:"#"}},erb:{lineComment:{start:"<%#",end:"%>"}},erlang:{lineComment:{start:"%"},markdownLanguageIds:["erlang","erl"]},fsharp:{lineComment:{start:"//"},aliases:["F#","FSharp","fsharp"],extensions:[".fs",".fsi",".fsx",".fsscript"],markdownLanguageIds:["fsharp","fs","fsx","fsi","fsscript"],blockComment:["(*","*)"]},go:{lineComment:{start:"//"},aliases:["Go"],extensions:[".go"],markdownLanguageIds:["go","golang"],blockComment:["/*","*/"]},groovy:{lineComment:{start:"//"},aliases:["Groovy","groovy"],extensions:[".groovy",".gvy",".gradle",".jenkinsfile",".nf"],blockComment:["/*","*/"]},haml:{lineComment:{start:"-#"}},handlebars:{lineComment:{start:"{{!",end:"}}"},extensions:[".hbs",".handlebars"],markdownLanguageIds:["handlebars","hbs","html.hbs","html.handlebars"],blockComment:["{{!--","--}}"]},haskell:{lineComment:{start:"--"},markdownLanguageIds:["haskell","hs"]},html:{lineComment:{start:"<!--",end:"-->"},aliases:["HTML","htm","html","xhtml"],extensions:[".html",".htm",".shtml",".xhtml",".xht",".mdoc",".jsp",".asp",".aspx",".jshtm",".volt",".ejs",".rhtml"],markdownLanguageIds:["html","xhtml"],blockComment:["<!--","-->"]},ini:{lineComment:{start:";"},blockComment:[";"," "]},java:{lineComment:{start:"//"},extensions:[".java",".class"],markdownLanguageIds:["java","jsp"],blockComment:["/*","*/"]},javascript:{lineComment:{start:"//"},aliases:["JavaScript","javascript","js"],extensions:[".js",".es6",".mjs",".cjs",".pac"],markdownLanguageIds:["javascript","js"],blockComment:["/*","*/"]},javascriptreact:{lineComment:{start:"//"},aliases:["JavaScript JSX","JavaScript React","jsx"],extensions:[".jsx"],markdownLanguageIds:["jsx"]},json:{extensions:[".json"],lineComment:{start:"//"},blockComment:["/*","*/"]},jsonc:{lineComment:{start:"//"}},jsx:{lineComment:{start:"//"},markdownLanguageIds:["jsx"]},julia:{lineComment:{start:"#"},aliases:["Julia","julia"],extensions:[".jl"],markdownLanguageIds:["julia","jl"],blockComment:["#=","=#"]},kotlin:{lineComment:{start:"//"},markdownLanguageIds:["kotlin","kt"]},latex:{lineComment:{start:"%"},aliases:["LaTeX","latex"],extensions:[".tex",".ltx",".ctx"],markdownLanguageIds:["tex"]},less:{lineComment:{start:"//"},aliases:["Less","less"],extensions:[".less"],blockComment:["/*","*/"]},lua:{lineComment:{start:"--"},aliases:["Lua","lua"],extensions:[".lua"],markdownLanguageIds:["lua","pluto"],blockComment:["--[[","]]"]},makefile:{lineComment:{start:"#"},aliases:["Makefile","makefile"],extensions:[".mak",".mk"],markdownLanguageIds:["makefile","mk","mak","make"]},markdown:{lineComment:{start:"//"},aliases:["Markdown","markdown"],extensions:[".md",".mkd",".mdwn",".mdown",".markdown",".markdn",".mdtxt",".mdtext",".workbook"],markdownLanguageIds:["markdown","md","mkdown","mkd"]},"objective-c":{lineComment:{start:"//"},aliases:["Objective-C"],extensions:[".m"],markdownLanguageIds:["objectivec","mm","objc","obj-c"],blockComment:["/*","*/"]},"objective-cpp":{lineComment:{start:"//"},aliases:["Objective-C++"],extensions:[".mm"],markdownLanguageIds:["objectivec++","objc+"]},perl:{lineComment:{start:"#"},aliases:["Perl","perl"],extensions:[".pl",".pm",".pod",".t",".PL",".psgi"],markdownLanguageIds:["perl","pl","pm"]},php:{lineComment:{start:"//"},aliases:["PHP","php"],extensions:[".php",".php4",".php5",".phtml",".ctp"],blockComment:["/*","*/"]},powershell:{lineComment:{start:"#"},aliases:["PowerShell","powershell","ps","ps1"],extensions:[".ps1",".psm1",".psd1",".pssc",".psrc"],markdownLanguageIds:["powershell","ps","ps1"],blockComment:["<#","#>"]},pug:{lineComment:{start:"//"}},python:{lineComment:{start:"#"},aliases:["Python","py"],extensions:[".py",".rpy",".pyw",".cpy",".gyp",".gypi",".pyi",".ipy",".pyt"],markdownLanguageIds:["python","py","gyp"],blockComment:['"""','"""']},ql:{lineComment:{start:"//"}},r:{lineComment:{start:"#"},aliases:["R","r"],extensions:[".r",".rhistory",".rprofile",".rt"]},razor:{lineComment:{start:"<!--",end:"-->"},aliases:["Razor","razor"],extensions:[".cshtml",".razor"],markdownLanguageIds:["cshtml","razor","razor-cshtml"],blockComment:["<!--","-->"]},ruby:{lineComment:{start:"#"},aliases:["Ruby","rb"],extensions:[".rb",".rbx",".rjs",".gemspec",".rake",".ru",".erb",".podspec",".rbi"],markdownLanguageIds:["ruby","rb","gemspec","podspec","thor","irb"],blockComment:["=begin","=end"]},rust:{lineComment:{start:"//"},aliases:["Rust","rust"],extensions:[".rs"],markdownLanguageIds:["rust","rs"],blockComment:["/*","*/"]},sass:{lineComment:{start:"//"}},scala:{lineComment:{start:"//"}},scss:{lineComment:{start:"//"},aliases:["SCSS","scss"],extensions:[".scss"],blockComment:["/*","*/"]},shellscript:{lineComment:{start:"#"},aliases:["Shell Script","shellscript","bash","fish","sh","zsh","ksh","csh"],extensions:[".sh",".bash",".bashrc",".bash_aliases",".bash_profile",".bash_login",".ebuild",".profile",".bash_logout",".xprofile",".xsession",".xsessionrc",".Xsession",".zsh",".zshrc",".zprofile",".zlogin",".zlogout",".zshenv",".zsh-theme",".fish",".ksh",".csh",".cshrc",".tcshrc",".yashrc",".yash_profile"],markdownLanguageIds:["bash","sh","zsh"]},slim:{lineComment:{start:"/"}},solidity:{lineComment:{start:"//"},markdownLanguageIds:["solidity","sol"]},sql:{lineComment:{start:"--"},aliases:["SQL"],extensions:[".sql",".dsql"],blockComment:["/*","*/"]},stylus:{lineComment:{start:"//"}},svelte:{lineComment:{start:"<!--",end:"-->"}},swift:{lineComment:{start:"//"},aliases:["Swift","swift"],extensions:[".swift"],blockComment:["/*","*/"]},terraform:{lineComment:{start:"#"}},tex:{lineComment:{start:"%"},aliases:["TeX","tex"],extensions:[".sty",".cls",".bbx",".cbx"]},typescript:{lineComment:{start:"//"},aliases:["TypeScript","ts","typescript"],extensions:[".ts",".cts",".mts"],markdownLanguageIds:["typescript","ts"],blockComment:["/*","*/"]},typescriptreact:{lineComment:{start:"//"},aliases:["TypeScript JSX","TypeScript React","tsx"],extensions:[".tsx"],markdownLanguageIds:["tsx"],blockComment:["/*","*/"]},vb:{lineComment:{start:"'"},aliases:["Visual Basic","vb"],extensions:[".vb",".brs",".vbs",".bas",".vba"],markdownLanguageIds:["vb","vbscript"]},verilog:{lineComment:{start:"//"}},"vue-html":{lineComment:{start:"<!--",end:"-->"}},vue:{lineComment:{start:"//"},extensions:[".vue"]},xml:{lineComment:{start:"<!--",end:"-->"},aliases:["XML","xml"],extensions:[".xml",".xsd",".ascx",".atom",".axml",".axaml",".bpmn",".cpt",".csl",".csproj",".csproj.user",".dita",".ditamap",".dtd",".ent",".mod",".dtml",".fsproj",".fxml",".iml",".isml",".jmx",".launch",".menu",".mxml",".nuspec",".opml",".owl",".proj",".props",".pt",".publishsettings",".pubxml",".pubxml.user",".rbxlx",".rbxmx",".rdf",".rng",".rss",".shproj",".storyboard",".svg",".targets",".tld",".tmx",".vbproj",".vbproj.user",".vcxproj",".vcxproj.filters",".wsdl",".wxi",".wxl",".wxs",".xaml",".xbl",".xib",".xlf",".xliff",".xpdl",".xul",".xoml"],blockComment:["<!--","-->"]},xsl:{lineComment:{start:"<!--",end:"-->"},aliases:["XSL","xsl"],extensions:[".xsl",".xslt"]},yaml:{lineComment:{start:"#"},markdownLanguageIds:["yaml","yml"]}}),m8t=new Map(Object.entries(p8t).map(([t,e])=>[t,{languageId:t,...e}]));function TQe(t){return ude(typeof t=="string"?t:typeof t>"u"?"plaintext":t.languageId)}s(TQe,"getLanguage");function ude(t){return m8t.get(t.toLowerCase())??{languageId:t,lineComment:{start:"//"}}}s(ude,"_getLanguage");f();var gR=class t{static{s(this,"TextEdit")}static isTextEdit(e){return e instanceof t?!0:e?Md.isRange(e)&&typeof e.newText=="string":!1}static replace(e,n){return new t(e,n)}static insert(e,n){return t.replace(new Md(e,e),n)}static delete(e){return t.replace(e,"")}static setEndOfLine(e){let n=new t(new Md(new Io(0,0),new Io(0,0)),"");return n.newEol=e,n}get range(){return this._range}set range(e){if(e&&!Md.isRange(e))throw Cb("range");this._range=e}get newText(){return this._newText||""}set newText(e){if(e&&typeof e!="string")throw Cb("newText");this._newText=e}get newEol(){return this._newEol}set newEol(e){if(e&&typeof e!="number")throw Cb("newEol");this._newEol=e}constructor(e,n){this._range=e,this._newText=n}toJSON(){return{range:this.range,newText:this.newText,newEol:this._newEol}}};var Io=class t{static{s(this,"Position")}static Min(...e){if(e.length===0)throw new TypeError;let n=e[0];for(let r=1;r<e.length;r++){let i=e[r];i.isBefore(n)&&(n=i)}return n}static Max(...e){if(e.length===0)throw new TypeError;let n=e[0];for(let r=1;r<e.length;r++){let i=e[r];i.isAfter(n)&&(n=i)}return n}static isPosition(e){if(!e)return!1;if(e instanceof t)return!0;let{line:n,character:r}=e;return typeof n=="number"&&typeof r=="number"}get line(){return this._line}get character(){return this._character}constructor(e,n){if(e<0)throw Cb("line must be non-negative");if(n<0)throw Cb("character must be non-negative");this._line=e,this._character=n}isBefore(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<e._character}isBeforeOrEqual(e){return this._line<e._line?!0:e._line<this._line?!1:this._character<=e._character}isAfter(e){return!this.isBeforeOrEqual(e)}isAfterOrEqual(e){return!this.isBefore(e)}isEqual(e){return this._line===e._line&&this._character===e._character}compareTo(e){return this._line<e._line?-1:this._line>e.line?1:this._character<e._character?-1:this._character>e._character?1:0}translate(e,n=0){if(e===null||n===null)throw Cb();let r;return typeof e>"u"?r=0:typeof e=="number"?r=e:(r=typeof e.lineDelta=="number"?e.lineDelta:0,n=typeof e.characterDelta=="number"?e.characterDelta:0),r===0&&n===0?this:new t(this.line+r,this.character+n)}with(e,n=this.character){if(e===null||n===null)throw Cb();let r;return typeof e>"u"?r=this.line:typeof e=="number"?r=e:(r=typeof e.line=="number"?e.line:this.line,n=typeof e.character=="number"?e.character:this.character),r===this.line&&n===this.character?this:new t(r,n)}toJSON(){return{line:this.line,character:this.character}}[Symbol.for("debug.description")](){return`(${this.line}:${this.character})`}},Md=class t{static{s(this,"Range")}static isRange(e){return e instanceof t?!0:e?Io.isPosition(e.start)&&Io.isPosition(e.end):!1}get start(){return this._start}get end(){return this._end}constructor(e,n,r,i){let o,a;if(typeof e=="number"&&typeof n=="number"&&typeof r=="number"&&typeof i=="number"?(o=new Io(e,n),a=new Io(r,i)):Io.isPosition(e)&&Io.isPosition(n)&&(o=e,a=n),!o||!a)throw new Error("Invalid arguments");o.isBefore(a)?(this._start=o,this._end=a):(this._start=a,this._end=o)}contains(e){return t.isRange(e)?this.contains(e.start)&&this.contains(e.end):Io.isPosition(e)?!(e.isBefore(this._start)||this._end.isBefore(e)):!1}isEqual(e){return this._start.isEqual(e._start)&&this._end.isEqual(e._end)}intersection(e){let n=Io.Max(e.start,this._start),r=Io.Min(e.end,this._end);if(!n.isAfter(r))return new t(n,r)}union(e){if(this.contains(e))return this;if(e.contains(this))return e;let n=Io.Min(e.start,this._start),r=Io.Max(e.end,this.end);return new t(n,r)}get isEmpty(){return this._start.isEqual(this._end)}get isSingleLine(){return this._start.line===this._end.line}with(e,n=this.end){if(e===null||n===null)throw Cb();let r;return e?Io.isPosition(e)?r=e:(r=e.start||this.start,n=e.end||this.end):r=this.start,r.isEqual(this._start)&&n.isEqual(this.end)?this:new t(r,n)}toJSON(){return[this.start,this.end]}[Symbol.for("debug.description")](){return h8t(this)}};function Cb(t){return t?new Error(`Illegal argument: ${t}`):new Error("Illegal argument")}s(Cb,"illegalArgument");function h8t(t){return t.isEmpty?`[${t.start.line}:${t.start.character})`:`[${t.start.line}:${t.start.character} -> ${t.end.line}:${t.end.character})`}s(h8t,"getDebugDescriptionOfRange");f();function wQe(t){let n=t.split(/\r?\n/).map(g8t),r=n.filter(o=>o===1).length,i=n.filter(o=>o===2).length;return r>i}s(wQe,"looksLikeCode");function g8t(t){if(t.length===0)return 0;let e=0,n=0;if(["==","!=","===","!==",">=","<=","&&","||",">>",">>>","<<","<<<","+=","-=","*=","/=","%=","<<=","<<<=",">>=",">>>=","++","--","=>","->","...","??","??="].some(i=>t.includes(i))||t.match(/^\s/)||t.match(/^[;{}()\[\]`~?]/))return 1;t.charAt(0).match(/[A-Z]/)&&(e+=1),t[t.length-1]==="."&&(e+=1),Kie(t)||(e+=1);{Kie(t.charAt(0))&&!t.charAt(0).match(/[A-Z]/)&&(n+=1),t.match(/^\s/)&&(n+=1);let o=[";","{","}","(",")","[","]","`","~","#","$","%","^","&","*","_","=","+","\\","|","<",">"].map(a=>t.includes(a)?1:0).filter(a=>a).length;n+=o}return e>n?2:n>e?1:0}s(g8t,"guessLineType");var AR;(n=>{function t(r){return r.length===0?[]:r.split(/\r\n|\r|\n/g)}n.fromString=t,s(t,"fromString");function e(r){if(r.lineCount===0)return[];let i=[];for(let o=0;o<r.lineCount;o++)i.push(r.lineAt(o).text);return i}n.fromDocument=e,s(e,"fromDocument")})(AR||={});function A8t(t){return t.replace(/^\s+/g,"")}s(A8t,"trimLeadingWhitespace");function dde(t,e){switch(e){case"java":return!!t.match(/^\s*import\s/);case"typescript":case"typescriptreact":case"javascript":case"javascriptreact":return!!t.match(/^\s*import[\s{*]|^\s*[var|const|let].*=\s*require\(/);case"php":return!!t.match(/^\s*use/);case"rust":return!!t.match(/^\s*use\s+[\w:{}, ]+\s*(as\s+\w+)?;/);case"python":return!!t.match(/^\s*from\s+[\w.]+\s+import\s+[\w, *]+$/)||!!t.match(/^\s*import\s+[\w, ]+$/);default:return!1}}s(dde,"isImportStatement");var y8t=new j1(t=>{let e=TQe(t),{start:n,end:r}=e.lineComment,i=`(?:${Yie(n)})`,o=r?`(?:${Yie(r)})?`:"";return new RegExp(`${i}(.*)${o}$`)});function fde(t,e){let n=t.match(y8t.get(e));if(!n)return;let r=n.index;if(typeof r>"u")return;let i=t.substring(0,r),o=n[0],a=A8t(n[1]||"");return{content:i,commentWithTokens:o,commentWithoutTokens:a}}s(fde,"extractEndLineComment");function XG(t,e){let n=fde(t,e);if(!(n&&n.content.trim().length>0&&wQe(n.commentWithoutTokens)))return n}s(XG,"extractExplicativeEndLineComment");var yR=class t extends pR{static{s(this,"IgnoreImportChangesAspect")}static isImportChange(e,n,r){return e.newLines.some(i=>dde(i,n))||C8t(e,r).some(i=>dde(i,n))}filterEdit(e,n){let r=e.languageId;return n.filter(o=>!t.isImportChange(o,r,e.documentLinesBeforeEdit))}};function C8t(t,e){return lSe(t.lineRange.mapToLineArray(n=>e[n-1]))}s(C8t,"getOldLines");f();var mde=je(th());f();f();f();var oh;(i=>{i.serviceIds=new Map,i.DI_TARGET="$di$target",i.DI_DEPENDENCIES="$di$dependencies";function r(o){return o[i.DI_DEPENDENCIES]||[]}i.getServiceDependencies=r,s(r,"getServiceDependencies")})(oh||={});var dA=Qd("instantiationService");function x8t(t,e,n){e[oh.DI_TARGET]===e?e[oh.DI_DEPENDENCIES].push({id:t,index:n}):(e[oh.DI_DEPENDENCIES]=[{id:t,index:n}],e[oh.DI_TARGET]=e)}s(x8t,"storeServiceDependency");function Qd(t){if(oh.serviceIds.has(t))return oh.serviceIds.get(t);let e=s(function(n,r,i){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");x8t(e,n,i)},"id");return e.toString=()=>t,oh.serviceIds.set(t,e),e}s(Qd,"createDecorator");f();f();var G0=class{static{s(this,"SyncDescriptor")}constructor(e,n=[],r=!1){this.ctor=e,this.staticArguments=n,this.supportsDelayedInstantiation=r}};f();var pde=class{constructor(e,n){this.key=e;this.data=n;this.incoming=new Map;this.outgoing=new Map}static{s(this,"Node")}},y9=class{constructor(e){this._hashFn=e;this._nodes=new Map}static{s(this,"Graph")}roots(){let e=[];for(let n of this._nodes.values())n.outgoing.size===0&&e.push(n);return e}insertEdge(e,n){let r=this.lookupOrInsertNode(e),i=this.lookupOrInsertNode(n);r.outgoing.set(i.key,i),i.incoming.set(r.key,r)}removeNode(e){let n=this._hashFn(e);this._nodes.delete(n);for(let r of this._nodes.values())r.outgoing.delete(n),r.incoming.delete(n)}lookupOrInsertNode(e){let n=this._hashFn(e),r=this._nodes.get(n);return r||(r=new pde(n,e),this._nodes.set(n,r)),r}lookup(e){return this._nodes.get(this._hashFn(e))}isEmpty(){return this._nodes.size===0}toString(){let e=[];for(let[n,r]of this._nodes)e.push(`${n}
	(-> incoming)[${[...r.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...r.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(let[e,n]of this._nodes){let r=new Set([e]),i=this._findCycle(n,r);if(i)return i}}_findCycle(e,n){for(let[r,i]of e.outgoing){if(n.has(r))return[...n,r].join(" -> ");n.add(r);let o=this._findCycle(i,n);if(o)return o;n.delete(r)}}};f();var lT=class{constructor(...e){this._entries=new Map;for(let[n,r]of e)this.set(n,r)}static{s(this,"ServiceCollection")}set(e,n){let r=this._entries.get(e);return this._entries.set(e,n),r}has(e){return this._entries.has(e)}get(e){return this._entries.get(e)}};var v8t=!1,ZG=class extends Error{static{s(this,"CyclicDependencyError")}constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},ej=class t{constructor(e=new lT,n=!1,r,i=v8t){this._services=e;this._strict=n;this._parent=r;this._enableTracing=i;this._isDisposed=!1;this._servicesToMaybeDispose=new Set;this._children=new Set;this._activeInstantiations=new Set;this._services.set(dA,this),this._globalGraph=i?r?._globalGraph??new y9(o=>o):void 0}static{s(this,"InstantiationService")}dispose(){if(!this._isDisposed){this._isDisposed=!0,QO(this._children),this._children.clear();for(let e of this._servicesToMaybeDispose)vSe(e)&&e.dispose();this._servicesToMaybeDispose.clear()}}_throwIfDisposed(){if(this._isDisposed)throw new Error("InstantiationService has been disposed")}createChild(e,n){this._throwIfDisposed();let r=this,i=new class extends t{dispose(){r._children.delete(i),super.dispose()}}(e,this._strict,this,this._enableTracing);return this._children.add(i),n?.add(i),i}invokeFunction(e,...n){this._throwIfDisposed();let r=C9.traceInvocation(this._enableTracing,e),i=!1;try{return e({get:s(a=>{if(i)throw iSe("service accessor is only valid during the invocation of its target method");let l=this._getOrCreateServiceInstance(a,r);if(!l)throw new Error(`[invokeFunction] unknown service '${a}'`);return l},"get")},...n)}finally{i=!0,r.stop()}}createInstance(e,...n){this._throwIfDisposed();let r,i;return e instanceof G0?(r=C9.traceCreation(this._enableTracing,e.ctor),i=this._createInstance(e.ctor,e.staticArguments.concat(n),r)):(r=C9.traceCreation(this._enableTracing,e),i=this._createInstance(e,n,r)),r.stop(),i}_createInstance(e,n=[],r){let i=oh.getServiceDependencies(e).sort((l,c)=>l.index-c.index),o=[];for(let l of i){let c=this._getOrCreateServiceInstance(l.id,r);c||this._throwIfStrict(`[createInstance] ${e.name} depends on UNKNOWN service ${l.id}.`,!1),o.push(c)}let a=i.length>0?i[0].index:n.length;if(n.length!==a){console.trace(`[createInstance] First service dependency of ${e.name} at position ${a+1} conflicts with ${n.length} static arguments`);let l=a-n.length;l>0?n=n.concat(new Array(l)):n=n.slice(0,a)}return Reflect.construct(e,n.concat(o))}_setCreatedServiceInstance(e,n){if(this._services.get(e)instanceof G0)this._services.set(e,n);else if(this._parent)this._parent._setCreatedServiceInstance(e,n);else throw new Error("illegalState - setting UNKNOWN service instance")}_getServiceInstanceOrDescriptor(e){let n=this._services.get(e);return!n&&this._parent?this._parent._getServiceInstanceOrDescriptor(e):n}_getOrCreateServiceInstance(e,n){this._globalGraph&&this._globalGraphImplicitDependency&&this._globalGraph.insertEdge(this._globalGraphImplicitDependency,String(e));let r=this._getServiceInstanceOrDescriptor(e);return r instanceof G0?this._safeCreateAndCacheServiceInstance(e,r,n.branch(e,!0)):(n.branch(e,!1),r)}_safeCreateAndCacheServiceInstance(e,n,r){if(this._activeInstantiations.has(e))throw new Error(`illegal state - RECURSIVELY instantiating service '${e}'`);this._activeInstantiations.add(e);try{return this._createAndCacheServiceInstance(e,n,r)}finally{this._activeInstantiations.delete(e)}}_createAndCacheServiceInstance(e,n,r){let i=new y9(c=>c.id.toString()),o=0,a=[{id:e,desc:n,_trace:r}],l=new Set;for(;a.length;){let c=a.pop();if(!l.has(String(c.id))){if(l.add(String(c.id)),i.lookupOrInsertNode(c),o++>1e3)throw new ZG(i);for(let u of oh.getServiceDependencies(c.desc.ctor)){let d=this._getServiceInstanceOrDescriptor(u.id);if(d||this._throwIfStrict(`[createInstance] ${e} depends on ${u.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(c.id),String(u.id)),d instanceof G0){let p={id:u.id,desc:d,_trace:c._trace.branch(u.id,!0)};i.insertEdge(c,p),a.push(p)}}}}for(;;){let c=i.roots();if(c.length===0){if(!i.isEmpty())throw new ZG(i);break}for(let{data:u}of c){if(this._getServiceInstanceOrDescriptor(u.id)instanceof G0){let p=this._createServiceInstanceWithOwner(u.id,u.desc.ctor,u.desc.staticArguments,u.desc.supportsDelayedInstantiation,u._trace);this._setCreatedServiceInstance(u.id,p)}i.removeNode(u)}}return this._getServiceInstanceOrDescriptor(e)}_createServiceInstanceWithOwner(e,n,r=[],i,o){if(this._services.get(e)instanceof G0)return this._createServiceInstance(e,n,r,i,o,this._servicesToMaybeDispose);if(this._parent)return this._parent._createServiceInstanceWithOwner(e,n,r,i,o);throw new Error(`illegalState - creating UNKNOWN service instance ${n.name}`)}_createServiceInstance(e,n,r=[],i,o,a){if(i)throw new Error("Delayed instantiation not supported");{let l=this._createInstance(n,r,o);return a.add(l),l}}_throwIfStrict(e,n){if(n&&console.warn(e),this._strict)throw new Error(e)}};var C9=class t{constructor(e,n){this.type=e;this.name=n;this._start=Date.now();this._dep=[]}static{s(this,"Trace")}static{this.all=new Set}static{this._None=new class extends t{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(e,n){return e?new t(2,n.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):t._None}static traceCreation(e,n){return e?new t(1,n.name):t._None}static{this._totals=0}branch(e,n){let r=new t(3,e.toString());return this._dep.push([e,n,r]),r}stop(){let e=Date.now()-this._start;t._totals+=e;let n=!1;function r(o,a){let l=[],c=new Array(o+1).join("	");for(let[u,d,p]of a._dep)if(d&&p){n=!0,l.push(`${c}CREATES -> ${u}`);let m=r(o+1,p);m&&l.push(m)}else l.push(`${c}uses -> ${u}`);return l.join(`
`)}s(r,"printChild");let i=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${r(1,this)}`,`DONE, took ${e.toFixed(2)}ms (grand total ${t._totals.toFixed(2)}ms)`];(e>2||n)&&t.all.add(i.join(`
`))}};var tj=class{constructor(e){this._isSealed=!1;this._collection=Array.isArray(e)?new lT(...e):e??new lT}static{s(this,"InstantiationServiceBuilder")}define(e,n){if(this._isSealed)throw new Error("This accessor is sealed and cannot be modified anymore.");this._collection.set(e,n)}seal(){if(this._isSealed)throw new Error("This accessor is sealed and cannot be seal again anymore.");return this._isSealed=!0,new ej(this._collection,!0)}};var rj=Qd("ITelemetrySender"),sh=Qd("IChatMLFetcher");var nj=class{constructor(){this._stream=new HG;this._seenAnnotationTypes=new Set}static{s(this,"FetchStreamSource")}get stream(){return this._stream.asyncIterable}update(e,n){n.codeVulnAnnotations&&(!((e.match(/(^|\n)```/g)?.length??0)%2===1)||e.match(/(^|\n)```\w*\s*$/))&&(n.codeVulnAnnotations=void 0),n.codeVulnAnnotations&&(n.codeVulnAnnotations=n.codeVulnAnnotations.filter(r=>!this._seenAnnotationTypes.has(r.details.type)),n.codeVulnAnnotations.forEach(r=>this._seenAnnotationTypes.add(r.details.type))),this._stream.emitOne({text:e,delta:n})}resolve(){this._stream.resolve()}},ij=Qd("IEndpointProvider");f();var Ty=Qd("IParserService");f();var CR=class{static{s(this,"DiffChange")}constructor(e,n,r,i){this.originalStart=e,this.originalLength=n,this.modifiedStart=r,this.modifiedLength=i}getOriginalEnd(){return this.originalStart+this.originalLength}getModifiedEnd(){return this.modifiedStart+this.modifiedLength}},x9=class{constructor(e,n=!0){this.lines=e;this.trimWhitespace=n}static{s(this,"LineSequence")}getElements(){let e=[];for(let n=0,r=this.lines.length;n<r;n++)e[n]=this.trimWhitespace?this.lines[n].trim():this.lines[n];return e}getCharCount(){let e=0;for(let n of this.lines)e+=n.length;return e}},v9=class{static{s(this,"CharSequence")}constructor(e){this._chars=e.split("")}getElements(){return this._chars}},xb=class{static{s(this,"Debug")}static Assert(e,n){if(!e)throw new Error(n)}},vb=class{static{s(this,"MyArray")}static Copy(e,n,r,i,o){for(let a=0;a<o;a++)r[i+a]=e[n+a]}static Copy2(e,n,r,i,o){for(let a=0;a<o;a++)r[i+a]=e[n+a]}};var oj=class{static{s(this,"DiffChangeHelper")}constructor(){this.m_changes=[],this.m_originalStart=1073741824,this.m_modifiedStart=1073741824,this.m_originalCount=0,this.m_modifiedCount=0}MarkNextChange(){(this.m_originalCount>0||this.m_modifiedCount>0)&&this.m_changes.push(new CR(this.m_originalStart,this.m_originalCount,this.m_modifiedStart,this.m_modifiedCount)),this.m_originalCount=0,this.m_modifiedCount=0,this.m_originalStart=1073741824,this.m_modifiedStart=1073741824}AddOriginalElement(e,n){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,n),this.m_originalCount++}AddModifiedElement(e,n){this.m_originalStart=Math.min(this.m_originalStart,e),this.m_modifiedStart=Math.min(this.m_modifiedStart,n),this.m_modifiedCount++}getChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes}getReverseChanges(){return(this.m_originalCount>0||this.m_modifiedCount>0)&&this.MarkNextChange(),this.m_changes.reverse(),this.m_changes}},b9=class t{static{s(this,"LcsDiff")}constructor(e,n){let[r,i]=t._getElements(e),[o,a]=t._getElements(n);this._originalStringElements=r,this._originalElementsOrHash=i,this._modifiedStringElements=o,this._modifiedElementsOrHash=a,this.m_forwardHistory=[],this.m_reverseHistory=[]}static _getElements(e){let n=e.getElements(),r=new Int32Array(n.length);for(let i=0,o=n.length;i<o;i++)r[i]=this._stringHash(n[i],0);return[n,r]}static _numberHash(e,n){return(n<<5)-n+e|0}static _stringHash(e,n){n=this._numberHash(149417,n);for(let r=0,i=e.length;r<i;r++)n=this._numberHash(e.charCodeAt(r),n);return n}ElementsAreEqual(e,n){return this._originalElementsOrHash[e]!==this._modifiedElementsOrHash[n]?!1:this._originalStringElements[e]===this._modifiedStringElements[n]}ComputeDiff(){return this._ComputeDiff(0,this._originalElementsOrHash.length-1,0,this._modifiedElementsOrHash.length-1)}_ComputeDiff(e,n,r,i){return this.ComputeDiffRecursive(e,n,r,i)}ComputeDiffRecursive(e,n,r,i){for(;e<=n&&r<=i&&this.ElementsAreEqual(e,r);)e++,r++;for(;n>=e&&i>=r&&this.ElementsAreEqual(n,i);)n--,i--;if(e>n||r>i){let d;return r<=i?(xb.Assert(e===n+1,"originalStart should only be one more than originalEnd"),d=[new CR(e,0,r,i-r+1)]):e<=n?(xb.Assert(r===i+1,"modifiedStart should only be one more than modifiedEnd"),d=[new CR(e,n-e+1,r,0)]):(xb.Assert(e===n+1,"originalStart should only be one more than originalEnd"),xb.Assert(r===i+1,"modifiedStart should only be one more than modifiedEnd"),d=[]),d}let o=[0],a=[0],l=this.ComputeRecursionPoint(e,n,r,i,o,a),c=o[0],u=a[0];if(l!==null)return l;{let d=this.ComputeDiffRecursive(e,c,r,u),p=this.ComputeDiffRecursive(c+1,n,u+1,i);return this.ConcatenateChanges(d,p)}}WALKTRACE(e,n,r,i,o,a,l,c,u,d,p,m,h,g,y,v,b){let E=null,_=null,k=new oj,P=n,N=r,U=h[0]-v[0]-i,ne=-1073741824,he=this.m_forwardHistory.length-1;do{let ae=U+e;ae===P||ae<N&&u[ae-1]<u[ae+1]?(p=u[ae+1],g=p-U-i,p<ne&&k.MarkNextChange(),ne=p,k.AddModifiedElement(p+1,g),U=ae+1-e):(p=u[ae-1]+1,g=p-U-i,p<ne&&k.MarkNextChange(),ne=p-1,k.AddOriginalElement(p,g+1),U=ae-1-e),he>=0&&(u=this.m_forwardHistory[he],e=u[0],P=1,N=u.length-1)}while(--he>=-1);E=k.getReverseChanges(),k=new oj,P=a,N=l,U=h[0]-v[0]-c,ne=1073741824,he=b?this.m_reverseHistory.length-1:this.m_reverseHistory.length-2;do{let ae=U+o;ae===P||ae<N&&d[ae-1]>=d[ae+1]?(p=d[ae+1]-1,g=p-U-c,p>ne&&k.MarkNextChange(),ne=p+1,k.AddOriginalElement(p+1,g+1),U=ae+1-o):(p=d[ae-1],g=p-U-c,p>ne&&k.MarkNextChange(),ne=p,k.AddModifiedElement(p+1,g+1),U=ae-1-o),he>=0&&(d=this.m_reverseHistory[he],o=d[0],P=1,N=d.length-1)}while(--he>=-1);return _=k.getChanges(),this.ConcatenateChanges(E,_)}ComputeRecursionPoint(e,n,r,i,o,a){let l=0,c=0,u=0,d=0,p=0,m=0;e--,r--,o[0]=0,a[0]=0,this.m_forwardHistory=[],this.m_reverseHistory=[];let h=n-e+(i-r),g=h+1,y=new Int32Array(g),v=new Int32Array(g),b=i-r,E=n-e,_=e-r,k=n-i,N=(E-b)%2===0;y[b]=e,v[E]=n;for(let U=1;U<=h/2+1;U++){let ne=0,he=0;u=this.ClipDiagonalBound(b-U,U,b,g),d=this.ClipDiagonalBound(b+U,U,b,g);for(let ae=u;ae<=d;ae+=2){ae===u||ae<d&&y[ae-1]<y[ae+1]?l=y[ae+1]:l=y[ae-1]+1,c=l-(ae-b)-_;let G=l;for(;l<n&&c<i&&this.ElementsAreEqual(l+1,c+1);)l++,c++;if(y[ae]=l,l+c>ne+he&&(ne=l,he=c),!N&&Math.abs(ae-E)<=U-1&&l>=v[ae])return o[0]=l,a[0]=c,G<=v[ae]&&U<=1448?this.WALKTRACE(b,u,d,_,E,p,m,k,y,v,l,n,o,c,i,a,N):null}p=this.ClipDiagonalBound(E-U,U,E,g),m=this.ClipDiagonalBound(E+U,U,E,g);for(let ae=p;ae<=m;ae+=2){ae===p||ae<m&&v[ae-1]>=v[ae+1]?l=v[ae+1]-1:l=v[ae-1],c=l-(ae-E)-k;let G=l;for(;l>e&&c>r&&this.ElementsAreEqual(l,c);)l--,c--;if(v[ae]=l,N&&Math.abs(ae-b)<=U&&l<=y[ae])return o[0]=l,a[0]=c,G>=y[ae]&&U<=1448?this.WALKTRACE(b,u,d,_,E,p,m,k,y,v,l,n,o,c,i,a,N):null}if(U<=1447){let ae=new Int32Array(d-u+2);ae[0]=b-u+1,vb.Copy2(y,u,ae,1,d-u+1),this.m_forwardHistory.push(ae),ae=new Int32Array(m-p+2),ae[0]=E-p+1,vb.Copy2(v,p,ae,1,m-p+1),this.m_reverseHistory.push(ae)}}return this.WALKTRACE(b,u,d,_,E,p,m,k,y,v,l,n,o,c,i,a,N)}ConcatenateChanges(e,n){let r=[];if(e.length===0||n.length===0)return n.length>0?n:e;if(this.ChangesOverlap(e[e.length-1],n[0],r)){let i=new Array(e.length+n.length-1);return vb.Copy(e,0,i,0,e.length-1),i[e.length-1]=r[0],vb.Copy(n,1,i,e.length,n.length-1),i}else{let i=new Array(e.length+n.length);return vb.Copy(e,0,i,0,e.length),vb.Copy(n,0,i,e.length,n.length),i}}ChangesOverlap(e,n,r){if(xb.Assert(e.originalStart<=n.originalStart,"Left change is not less than or equal to right change"),xb.Assert(e.modifiedStart<=n.modifiedStart,"Left change is not less than or equal to right change"),e.originalStart+e.originalLength>=n.originalStart||e.modifiedStart+e.modifiedLength>=n.modifiedStart){let i=e.originalStart,o=e.originalLength,a=e.modifiedStart,l=e.modifiedLength;return e.originalStart+e.originalLength>=n.originalStart&&(o=n.originalStart+n.originalLength-e.originalStart),e.modifiedStart+e.modifiedLength>=n.modifiedStart&&(l=n.modifiedStart+n.modifiedLength-e.modifiedStart),r[0]=new CR(i,o,a,l),!0}else return r[0]=null,!1}ClipDiagonalBound(e,n,r,i){if(e>=0&&e<i)return e;let o=r,a=i-r-1,l=n%2===0;if(e<0){let c=o%2===0;return l===c?0:1}else{let c=a%2===0;return l===c?i-1:i-2}}};f();f();function _Qe(t){return typeof t=="object"&&t!==null&&!Array.isArray(t)&&!(t instanceof RegExp)&&!(t instanceof Date)}s(_Qe,"isObject");function sj(t,e){if(!t)throw new Error(e?`Unexpected type, expected '${e}'`:"Unexpected type")}s(sj,"assertType");function SQe(t){let e=new Set;return JSON.stringify(t,(n,r)=>{if(_Qe(r)||Array.isArray(r)){if(e.has(r))return"[Circular]";e.add(r)}return typeof r=="bigint"?`[BigInt ${r.toString()}]`:r})}s(SQe,"safeStringify");var aj=!1,Ade=!0,b8t=200,E9=class{constructor(e,n){this.ID=e;this._parserService=n;this.dependsOnSelection=!0}static{s(this,"AbstractNearbyCursorInlineEditProvider")}async provideNextEdit(e,n){let r=new yb(e),i=e.getActiveDocument(),o=cT(i);if(!o||!o.isEmpty())return Ri.noEdit({kind:"uncategorized",error:new Error("Selection is not empty")},r);let a=i.documentLinesBeforeEdit,l=i.recentEdit.apply(a),c=[];for(let _ of e.documents)_.id!==i.id&&(c.push(`RELATED DOC: ${_.getDisplayPath()}`),c.push("```patch"),c.push(..._8t(_)),c.push("```"),c.push(""));c.push(`ORIGINAL VERSION: ${i.getDisplayPath()}`),c.push("```"),c.push(...a),c.push("```"),c.push("");let u="// ...rest of the lines omitted...",d=new Yt(1,Math.max(1,o.startLineNumber-1)),p=i.recentEdit.edits.length>0?i.recentEdit.edits[i.recentEdit.edits.length-1].lineRange.endLineNumberExclusive-1:0,m;if(p>0&&p>=d.endLineNumberExclusive){let _=p<l.length;c.push(`IN PROGRESS VERSION ${_?" PREFIX":""}: ${i.getDisplayPath()}`),c.push("```"),c.push(...l.slice(0,p)),_&&(c.push(u),m={editRange:new Yt(d.endLineNumberExclusive,p+1),omittedMessage:u}),c.push("```"),c.push("")}c.push(`NEXT VERSION: ${i.getDisplayPath()}`),c.push("```"),c.push(...l.slice(0,d.endLineNumberExclusive-1)),c.push("");let h=l.slice(d.endLineNumberExclusive-1).join(`
`),g=await this.fetchUntilConvergence(c.join(`
`),h,n);if(n.isCancellationRequested)return Ri.noEdit({kind:"gotCancelled",message:"afterFetchCall"},r);if(g.isError())return g.err.kind==="cancel"?Ri.noEdit({kind:"gotCancelled",message:"afterFetchCall"},r):Ri.noEdit({kind:"fetchFailure",error:new Error(SQe(g.err))},r);let{result:y,ttft:v}=g.val;if(v!==void 0&&r.setTtft(v),y.trim().length===0)return Ri.noEdit({kind:"noSuggestions"},r);let b=lj(i.languageId,l,d,void 0,y,m),E=await xde(this._parserService,b,i,{requireEditWithinNLines:5});if(E){let _=new Lo([E]);return Ri.edit({edit:_},r)}else return Ri.noEdit({kind:"filteredOut",message:"uncategorized"},r)}};E9=Cu([Bs(1,Ty)],E9);var xR=class extends E9{constructor(n,r){super(xR.ID,n);this._chatMLFetcher=r}static{s(this,"MiniNearbyCursorInlineEditProvider")}static{this.ID="MiniNearbyCursorInlineEditProvider"}async fetchUntilConvergence(n,r,i){if(i.isCancellationRequested)return No.error({kind:"cancel"});let o=await yde(this.ID,this._chatMLFetcher,[{role:mde.OpenAI.ChatRole.System,content:`
Please no talking.
You must only provide code.
Simply provide the code that follows most logically.
You don't change code if not necessary.
You see the same file multiple times, but only the last one is the final version.
`.trim()},{role:mde.OpenAI.ChatRole.User,content:n}],{convergence:r},i);if(o.isError())return o;let{ignored:a,result:l,ttft:c}=o.val;return l=l.replace(/^```[^\n]*\n/,""),No.ok({ignored:a,result:l,ttft:c})}};xR=Cu([Bs(0,Ty),Bs(1,sh)],xR);async function yde(t,e,n,r,i){let o=new nj,a=!1,l,c=o.stream.map(y=>({choices:[{index:0,finish_reason:null,logprobs:null,text:y.delta.text}]})),u=I8t(c,r),d=e.fetchOne(n,async(y,v,b)=>(typeof l>"u"&&(l=Date.now()),o.update(y,b),a?y.length:void 0),{id:"copilot-nes-v",name:"proxy-4o-mini"},{},i);(async()=>{try{await d}finally{o.resolve()}})();let{ignored:p,result:m,shouldCancelRequest:h}=await u;h&&(a=!0);let g=await d;return g.type!=="success"?No.error({kind:"failure",err:new Error(`Fetch failed (${g.type}, ${g.reason})`)}):No.ok({ttft:l,ignored:p,result:m})}s(yde,"fetchUntilConvergence");function cT(t){let e=new Rt(0,0);return t.lastSelectionInAfterEdit&&!t.lastSelectionInAfterEdit.equals(e)?t.documentAfterEdits.getTransformer().getRange(t.lastSelectionInAfterEdit):t.recentEdit.edits.length===0?null:E8t(t)}s(cT,"getOrDeduceSelectionFromLastEdit");function E8t(t){let e=t.recentEdit.edits[t.recentEdit.edits.length-1],n=e.lineRange,i=t.recentEdit.getNewLineRanges()[t.recentEdit.edits.length-1].endLineNumberExclusive-1,o=e.newLines[e.newLines.length-1]??"";if(n.length===0)return new zt(i,o.length+1,i,o.length+1);let a=t.documentLinesBeforeEdit[n.endLineNumberExclusive-2],l=L5(a,o),c=o.length-l+1;return new zt(i,c,i,c)}s(E8t,"deduceSelectionFromLastEdit");async function I8t(t,e){let n=T8t(t,e.ignoreReplyTextBefore),r=e.convergence,i=e.maxCompletionLineCount??20,o=e.convergenceNonWhitespaceCharOverlap??40,a=r.replace(/\s/g,""),l=[],c=[],u=[],d=[],p=s(m=>{let h=c[0];return{ignored:l[0]??"",result:h.substring(0,h.lastIndexOf(`
`)+1),shouldCancelRequest:!0}},"returnEarly");for await(let m of n){if(m.kind==="ignore"){l[m.index]=(l[m.index]??"")+m.text;continue}let h=m.text;if(c[m.index]=c[m.index]??"",c[m.index]+=h,d[m.index]=d[m.index]??"",d[m.index]+=h.replace(/\s/g,""),u[m.index]=u[m.index]??0,u[m.index]+=h.split(`
`).length-1,h.indexOf(`
`)===-1||m.index!==0)continue;if(u[m.index]>i)return p(`too many lines: ${u[m.index]}`);let g=c[m.index];if(r.startsWith(g))continue;let y=g.split(`
`).slice(-4,-1);if(y.length<3||r.indexOf(y.join(`
`)+`
`)<=0)continue;let b=d[m.index].substring(d[m.index].length-o);if(a.indexOf(b)>0)return p("convergence!")}return{ignored:l[0]??"",result:c[0]??"",shouldCancelRequest:!1}}s(I8t,"fetchCompletionUntilConvergence");function T8t(t,e){let n=[],r=[];return new m9(async i=>{for await(let o of t)for(let a of o.choices){let l=a.index,c=a.text??"";if(!e||n[l]){i.emitOne({kind:"completion",index:l,text:c});continue}r[l]=(r[l]??"")+c;let u=r[l].match(e);!u||typeof u.index>"u"||(n[l]=!0,i.emitOne({kind:"ignore",index:l,text:r[l].substring(0,u.index+u[0].length)}),i.emitOne({kind:"completion",index:a.index,text:r[l].substring(u.index+u[0].length)}),r[l]=void 0)}for(let o=0;o<r.length;o++)typeof r[o]<"u"&&i.emitOne({kind:"ignore",index:o,text:r[o]})})}s(T8t,"getTextAfterFirstPattern");function w8t(t,e,n){let r=e.startLineNumber,i=e.endLineNumberExclusive,o=n.slice(0);for(;r+1<i&&o.length>0;){let a=t[i-2],l=o[o.length-1];if(a!==l)break;i--,o.pop()}for(;r+1<i&&o.length>0;){let a=t[r-1],l=o[0];if(a!==l)break;r++,o.shift()}return new Jm(new Yt(r,i),o)}s(w8t,"createReducedLineEdit");var vR=class{constructor(e,n,r,i){this.languageId=e;this.oldLines=n;this.oldLines=n,this.edit=w8t(n,r,i);let o=new Lo([this.edit]);this.newLines=o.apply(n)}static{s(this,"PossibleEdit")}hasEditWithinFirstLines(e){let n=this.oldLines.slice(this.edit.lineRange.startLineNumber-1,this.edit.lineRange.endLineNumberExclusive-1),r=this.edit.newLines;return o(n,r)<e;function o(a,l){for(let c=0;c<Math.min(a.length,l.length);c++)if(a[c]!==l[c])return c;return Math.min(a.length,l.length)}}resolveDiff(){let e=s((p,m,h)=>p.map(g=>{let y=m.lines.slice(g.originalStart,g.originalStart+g.originalLength),v=h.lines.slice(g.modifiedStart,g.modifiedStart+g.modifiedLength),b=y.join(`
`),E=v.join(`
`),{editDistance:_}=d(b,E);return new hde(g.originalStart,g.originalLength,g.modifiedStart,g.modifiedLength,_)}),"computeEditDistances"),n=s(p=>{let m=0;for(let h of p)m+=h.editDistance;return{editDistance:m}},"computeDiffMetrics"),r=!1,i=new x9(this.oldLines,r),o=new x9(this.newLines,r),a=new b9(i,o),l=e(a.ComputeDiff(),i,o),c=n(l),u=[];{let p=0;for(let m of l)u=u.concat(this.oldLines.slice(p,m.originalStart)),u=u.concat(this.newLines.slice(m.modifiedStart,m.modifiedStart+m.modifiedLength)),p=m.originalStart+m.originalLength;u=u.concat(this.oldLines.slice(p))}if(n2(this.newLines,u))return new gde(this.languageId,this.oldLines,this.edit,this.newLines,l,c);return kQe(this.languageId,this.oldLines,u);function d(p,m){let h=new v9(p),g=new v9(m),v=new b9(h,g).ComputeDiff(),b=0,E=0;for(let N of v)b+=N.originalLength,E+=N.modifiedLength;let _=p.length,k=m.length,P=b+E;return{aChanged:b,bChanged:E,aLength:_,bLength:k,editDistance:P}}}},hde=class{constructor(e,n,r,i,o){this.originalStart=e;this.originalLength=n;this.modifiedStart=r;this.modifiedLength=i;this.editDistance=o}static{s(this,"DiffChangeWithEditDistance")}},gde=class{constructor(e,n,r,i,o,a){this.languageId=e;this.oldLines=n;this.edit=r;this.newLines=i;this.diff=o;this.diffMetrics=a;this.parseErrorCount="unknown"}static{s(this,"PossibleEditWithDiff")}toLineEdit(e){if(e==="single")return new Lo([this.edit]);{let n=this.groupInHunks();return new Lo(n.map(r=>{let i=r[0],o=r[r.length-1];return new Jm(new Yt(i.originalStart+1,o.originalStart+o.originalLength+1),this.newLines.slice(i.modifiedStart,o.modifiedStart+o.modifiedLength))}))}}eliminateLargeChangeHunks(){if(!Ade)return this;let e=this.groupInHunks(),n=[];for(let r of e)r.every(o=>o.originalLength===0)||r.reduce((a,l)=>a+l.editDistance,0)>b8t&&(n=n.concat(r));if(n.length===this.diff.length)return null;if(n.length>0){let r=this._recreateNewLinesWithoutDiffs(n);return this._createPossibleEditFromLines(r)}return this}containWithinLines(e){let n=this.groupInHunks(),r=[];for(let i of n)for(let o of i){let a=o.originalStart+1,l=o.originalStart+o.originalLength+1;if(!Cde(new Yt(a,l),e)){r=r.concat(i);break}}if(r.length===this.diff.length)return null;if(r.length>0){let i=this._recreateNewLinesWithoutDiffs(r);return this._createPossibleEditFromLines(i).containWithinLines(e)}return this}groupInHunks(){let e=[];for(let n of this.diff){let r=e.length>0?e[e.length-1]:null;if(!r){e.push([n]);continue}let i=r[r.length-1],o=this.oldLines.slice(i.originalStart+i.originalLength,n.originalStart);if(o.length>1){e.push([n]);continue}if(o[0].trim().length>10){e.push([n]);continue}if(r.reduce((c,u)=>c+u.originalLength,0)>1){e.push([n]);continue}r.push(n)}return e}_recreateNewLinesWithoutDiffs(e){let n=[],r=0;for(let i of e)n=n.concat(this.newLines.slice(r,i.modifiedStart)),n=n.concat(this.oldLines.slice(i.originalStart,i.originalStart+i.originalLength)),r=i.modifiedStart+i.modifiedLength;return n=n.concat(this.newLines.slice(r)),n}async resolveParseErrorCountIfPossible(e,n){let r=new Lo([this.edit]),i=n(r);this.parseErrorCount=await I9(e,this.languageId,i)}eliminateEmptyLineChanges(){let e=s(n=>this._createPossibleEditFromLines(n).eliminateEmptyLineChanges(),"recurseWithNewLines");for(let n of this.diff){let r=this.oldLines.slice(n.originalStart,n.originalStart+n.originalLength),i=this.newLines.slice(n.modifiedStart,n.modifiedStart+n.modifiedLength);if(n.modifiedLength===0){if(r.every(a=>a.trim().length===0)){let a=this.newLines.slice(0);return a.splice(n.modifiedStart,0,...r),e(a)}continue}if(n.originalLength===0){if(i.every(a=>a.trim().length===0)){let a=this.newLines.slice(0);return a.splice(n.modifiedStart,n.modifiedLength),e(a)}continue}for(let o=0;o<r.length&&o<i.length;o++){let a=r[o],l=i[o],c=a.trim().length===0,u=l.trim().length===0;if(!(c&&u)){if(!c&&!u)break;if(c){let d=this.newLines.slice(0);return d.splice(n.modifiedStart+o,0,a),e(d)}if(u){let d=this.newLines.slice(0);return d.splice(n.modifiedStart+o,1),e(d)}}}for(let o=1;o<=r.length&&o<=i.length;o++){let a=r[r.length-o],l=i[i.length-o],c=a.trim().length===0,u=l.trim().length===0;if(!(c&&u)){if(!c&&!u)break;if(c){let d=this.newLines.slice(0);return d.splice(n.modifiedStart+n.modifiedLength-o+1,0,a),e(d)}if(u){let d=this.newLines.slice(0);return d.splice(n.modifiedStart+n.modifiedLength-o,1),e(d)}}}}return this}eliminateInsertedOrDeletedComments(){let e=[],n=0,r=!1;for(let i of this.diff){e=e.concat(this.newLines.slice(n,i.modifiedStart));let o=this.oldLines.slice(i.originalStart,i.originalStart+i.originalLength),a=this.newLines.slice(i.modifiedStart,i.modifiedStart+i.modifiedLength),{hasChanges:l,newDiffModifiedLines:c}=this._eliminateCommentsDiff(o,a);r=r||l,e=e.concat(c),n=i.modifiedStart+i.modifiedLength}return e=e.concat(this.newLines.slice(n)),r?this._createPossibleEditFromLines(e):this}_eliminateCommentsDiff(e,n){if(n.length===0){let c=!1,u=!1;for(let d of e){if(d.trim().length===0)continue;let p=XG(d,this.languageId);p&&p.content.trim().length===0?c=!0:u=!0}if(c&&!u)return{hasChanges:!0,newDiffModifiedLines:e}}let r=e.map(c=>XG(c,this.languageId)),i=n.map(c=>XG(c,this.languageId)),o=r.filter(c=>!!c).length,a=i.filter(c=>!!c).length;if(o===0&&a===0)return{hasChanges:!1,newDiffModifiedLines:n};if(o>0)return{hasChanges:!1,newDiffModifiedLines:n};let l=!1;for(let c=0;c<n.length;c++){let u=n[c],d=i[c];if(!d)continue;let{content:p}=d;n[c]=u.substring(0,p.length).trimEnd(),l=!0}return{hasChanges:l,newDiffModifiedLines:n}}_createPossibleEditFromLines(e){return kQe(this.languageId,this.oldLines,e)}};function Cde(t,e){return e.startLineNumber<t.startLineNumber&&t.startLineNumber<e.endLineNumberExclusive&&t.endLineNumberExclusive<=e.endLineNumberExclusive}s(Cde,"editIsInsideEditWindow");function kQe(t,e,n){let i=e.length+1,o=n.slice(0);return new vR(t,e,new Yt(1,i),o).resolveDiff()}s(kQe,"createPossibleEditFromLines");function lj(t,e,n,r,i,o){if(i.trim().length===0)return[];let a=AR.fromString(i.trimEnd()),l=o?a.some(v=>v.indexOf(o.omittedMessage)>=0):!1,c=[],u=s((v,b)=>{c.push(new vR(t,e,v,b))},"generateEdit");function d(){r&&u(r,a)}s(d,"generateEditCompletionRange");function p(){if(l)return;let b=new Yt(n.endLineNumberExclusive,e.length+1);b.length>a.length+5||u(b,a)}s(p,"generateEditAllDoc");function m(){for(let v=1;v<a.length;v++){let E=a.slice(a.length-v).join(`
`);for(let _=n.endLineNumberExclusive-1;_<e.length;_++){let P=e.slice(_,_+v).join(`
`);E===P&&u(new Yt(n.endLineNumberExclusive,_+1),a.slice(0,a.length-v))}}}s(m,"generateEditsUsingOverlappingLines");function h(){if(!o||!l)return;let v=[];for(let b of a){if(b.indexOf(o.omittedMessage)>=0){u(o.editRange,v.map(E=>E));return}v.push(b)}}if(s(h,"generateEditWhenReplyContainsOmittedMessage"),d(),h(),p(),m(),!i.endsWith(`
`)){let v=i.substring(0,i.lastIndexOf(`
`)+1);c.push(...lj(t,e,n,r,v,o))}return g(c);function g(v){return y(v,s(E=>E.edit.lineRange.startLineNumber+","+E.edit.lineRange.endLineNumberExclusive+","+E.edit.newLines.join("|"),"keyfn"))}function y(v,b){let E=new Set,_=[];for(let k of v){let P=b(k);E.has(P)||(E.add(P),_.push(k))}return _}}s(lj,"generatePossibleEdits");async function xde(t,e,n,r){let a=e.filter(p=>p.hasEditWithinFirstLines(r.requireEditWithinNLines)).map(p=>p.resolveDiff()).map(p=>p.eliminateEmptyLineChanges()),l=aj?await I9(t,n.languageId,n.documentAfterEditsNoShortening.value):"unknown";if(aj){let p=s(m=>{let h=n.documentAfterEditsNoShortening;return n.toEditOnDocumentAfterEditsNoShortening(m).apply(h.value)},"applyToDocumentNoShortening");await Promise.all(a.map(m=>m.resolveParseErrorCountIfPossible(t,p)))}let c=a.filter(p=>l==="unknown"?p.parseErrorCount===0:p.parseErrorCount!=="unknown"&&p.parseErrorCount<=l),u=c.length>0?c:a;u.sort((p,m)=>p.parseErrorCount===m.parseErrorCount?0:p.parseErrorCount==="unknown"?1:m.parseErrorCount==="unknown"?-1:p.parseErrorCount-m.parseErrorCount);let d=s(p=>p.diffMetrics.editDistance,"score");return u.sort((p,m)=>d(p)-d(m)),u.length>0?u[0].edit:null}s(xde,"selectBestEdit");function _8t(t){let n=[],r=t.documentLinesBeforeEdit,i=0,o=0,a=-1,l=s((c,u)=>{c>a+1&&n.push("[...]"),u?n.push(`-${r[c]}`):n.push(`${r[c]}`),a=c},"addOldLineIndex");for(let c of t.recentEdit.edits){for(;i<c.lineRange.startLineNumber-1;)Math.min(c.lineRange.startLineNumber-i-1,o>0?i-o-2:1073741824)<=2&&l(i,!1),i++;for(;i<c.lineRange.endLineNumberExclusive-1;)l(i,!0),i++;n.push(c.newLines.map(u=>`+${u}`).join(`
`)),o=c.lineRange.endLineNumberExclusive}for(;i<r.length;)i-o+2<=2&&l(i,!1),i++;return n.push("[...]"),n}s(_8t,"summariseDocDiff");function BQe(t){let e=[];for(let n of t.recentEdit.edits){let r=t.documentLinesBeforeEdit.slice(n.lineRange.startLineNumber-1,n.lineRange.endLineNumberExclusive-1),i=n.newLines;if(r.filter(a=>a.trim().length>0).length===0&&i.filter(a=>a.trim().length>0).length===0)continue;let o=n.lineRange.startLineNumber+t.clippingRange.startLineNumber-1;e.push(`@@ -${o},${r.length} +${o},${i.length} @@`),e.push(...r.map(a=>`-${a}`)),e.push(...i.map(a=>`+${a}`))}return e}s(BQe,"summarizeEditsAsUnifiedDiff");async function I9(t,e,n){return await t.getTreeSitterAST({languageId:e,getText:s(()=>n,"getText")})?.getParseErrorCount()??"unknown"}s(I9,"getParseErrorCount");f();var wy=je(th());f();var T9=Qd("ITokenizerProvider");var bb=class extends wy.PromptRenderer{constructor(n,r,i={validate:!0},o,a,l){let c=o.acquireTokenizer({tokenizer:l.tokenizerName}),u={modelMaxPromptTokens:l.tokenBudget};super(u,n,r,c);this.options=i;this._instantiationService=a}static{s(this,"PromptRenderer")}static create(n,r,i,o={validate:!0}){return n.invokeFunction(a=>{let l=a.get(T9);return new bb(r,i,o,l,n,a.get(sh))})}createElement(n,...r){return this._instantiationService.createInstance(n.ctor,n.props,...r)}async render(n,r,i){let o=await super.render(n,r);i={...{trace:!0},...i};for(let c=1;c<o.messages.length;c++){let u=o.messages[c],d=o.messages[c-1];if(u.role===wy.Raw.ChatRole.System&&d.role===wy.Raw.ChatRole.System){let p=d.content.at(-1),m=u.content.at(0);p&&m&&p.type===wy.Raw.ChatCompletionContentPartKind.Text&&m.type===wy.Raw.ChatCompletionContentPartKind.Text?(p.text=p.text.trimEnd()+`
`+m.text,d.content=d.content.concat(u.content.slice(1))):(d.content.push({type:wy.Raw.ChatCompletionContentPartKind.Text,text:`
`}),d.content=d.content.concat(u.content)),o.messages.splice(c,1),c--}}let l=o.messages[o.messages.length-1];if(this.options.validate&&l&&l.role!==wy.Raw.ChatRole.User)throw new Error("Sorry, this message is too long. Please try a shorter question.");return{...o,references:[]}}async countTokens(n){return(await super.render(void 0,n)).tokenCount}};bb=Cu([Bs(3,T9),Bs(4,dA),Bs(5,sh)],bb);f();var PQe=je(th());var cj=class extends PQe.PromptElement{static{s(this,"SafetyRules")}render(){return vscpp(vscppf,null,"Follow Microsoft content policies.",vscpp("br",null),"Avoid content that violates copyrights.",vscpp("br",null),`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,vscpp("br",null),"Keep your answers short and impersonal.",vscpp("br",null))}};f();f();var uT=class{constructor(e){this.text=e;this.lineStartOffsetByLineIdx=[],this.lineEndOffsetByLineIdx=[],this.lineStartOffsetByLineIdx.push(0);for(let n=0;n<e.length;n++)e.charAt(n)===`
`&&(this.lineStartOffsetByLineIdx.push(n+1),n>0&&e.charAt(n-1)==="\r"?this.lineEndOffsetByLineIdx.push(n-1):this.lineEndOffsetByLineIdx.push(n));this.lineEndOffsetByLineIdx.push(e.length)}static{s(this,"PositionOffsetTransformer")}getOffset(e){return this.lineStartOffsetByLineIdx[e.lineNumber-1]+e.column-1}getOffsetRange(e){return new Rt(this.getOffset(e.getStartPosition()),this.getOffset(e.getEndPosition()))}getPosition(e){let n=T0(this.lineStartOffsetByLineIdx,o=>o<=e),r=n+1,i=e-this.lineStartOffsetByLineIdx[n]+1;return new rr(r,i)}getRange(e){return zt.fromPositions(this.getPosition(e.start),this.getPosition(e.endExclusive))}getTextLength(e){return Ul.ofRange(this.getRange(e))}get textLength(){let e=this.lineStartOffsetByLineIdx.length-1;return new Ul(e,this.text.length-this.lineStartOffsetByLineIdx[e])}getLineLength(e){return this.lineEndOffsetByLineIdx[e-1]-this.lineStartOffsetByLineIdx[e-1]}};var vde=class{static{s(this,"AbstractDocument")}rangeToOffsetRange(e){return new Rt(this.getOffsetAtPosition(e.start),this.getOffsetAtPosition(e.end))}offsetRangeToRange(e){return new Md(this.getPositionAtOffset(e.start),this.getPositionAtOffset(e.endExclusive))}},ah=class extends vde{constructor(n){super();this.value=n;this._transformer=new uT(this.value)}static{s(this,"StringTextDocument")}getText(){return this.value}getLineText(n){let r=this._transformer.getOffset(new rr(n+1,1)),i=r+this.getLineLength(n);return this.value.substring(r,i)}getLineLength(n){return this._transformer.getLineLength(n+1)}getLineCount(){return this._transformer.textLength.lineCount+1}getTextInOffsetRange(n){return n.substring(this.value)}getPositionAtOffset(n){return S8t(this._transformer.getPosition(n))}getOffsetAtPosition(n){return n=this._validatePosition(n),this._transformer.getOffset(R8t(n))}_validatePosition(n){if(n.line<0)return new Io(0,0);let r=this._transformer.textLength.lineCount+1;if(n.line>=r){let o=this._transformer.getLineLength(r);return new Io(r-1,o)}if(n.character<0)return new Io(n.line,0);let i=this._transformer.getLineLength(n.line+1);return n.character>i?new Io(n.line,i):n}};function S8t(t){return new Io(t.lineNumber-1,t.column-1)}s(S8t,"corePositionToVSCodePosition");function R8t(t){return new rr(t.line+1,t.character+1)}s(R8t,"vsCodePositionToCorePosition");f();f();function DQe(t){if(t.length===0)return 1/0;let e=t[0];for(let n=1;n<t.length;n++)e=Math.min(e,t[n]);return e}s(DQe,"min");f();function bde(t,e){let n=e(t);return{...n,range:[n.range.start,n.range.endExclusive],children:n.children?.map(r=>bde(r,e))}}s(bde,"toAstNode");function NQe(t,e){let n=e2(e,a=>a.endExclusive>=t.start),r=T0(e,a=>a.start<=t.endExclusive)+1;if(n===r)return[t];let i=[],o=t.start;for(let a=n;a<r;a++){let l=e[a];l.start>o&&i.push(new Rt(o,l.start)),o=l.endExclusive}return o<t.endExclusive&&i.push(new Rt(o,t.endExclusive)),i}s(NQe,"subtractRange");f();f();f();var uj=class{static{s(this,"PrefixSumComputer")}constructor(e){this.values=e,this.prefixSum=new Uint32Array(e.length),this.prefixSumValidIndex=new Int32Array(1),this.prefixSumValidIndex[0]=-1}getCount(){return this.values.length}insertValues(e,n){e=p2(e);let r=this.values,i=this.prefixSum,o=n.length;return o===0?!1:(this.values=new Uint32Array(r.length+o),this.values.set(r.subarray(0,e),0),this.values.set(r.subarray(e),e+o),this.values.set(n,e),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSum=new Uint32Array(this.values.length),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}setValue(e,n){return e=p2(e),n=p2(n),this.values[e]===n?!1:(this.values[e]=n,e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),!0)}removeValues(e,n){e=p2(e),n=p2(n);let r=this.values,i=this.prefixSum;if(e>=r.length)return!1;let o=r.length-e;return n>=o&&(n=o),n===0?!1:(this.values=new Uint32Array(r.length-n),this.values.set(r.subarray(0,e),0),this.values.set(r.subarray(e+n),e),this.prefixSum=new Uint32Array(this.values.length),e-1<this.prefixSumValidIndex[0]&&(this.prefixSumValidIndex[0]=e-1),this.prefixSumValidIndex[0]>=0&&this.prefixSum.set(i.subarray(0,this.prefixSumValidIndex[0]+1)),!0)}getTotalSum(){return this.values.length===0?0:this._getPrefixSum(this.values.length-1)}getPrefixSum(e){return e<0?0:(e=p2(e),this._getPrefixSum(e))}_getPrefixSum(e){if(e<=this.prefixSumValidIndex[0])return this.prefixSum[e];let n=this.prefixSumValidIndex[0]+1;n===0&&(this.prefixSum[0]=this.values[0],n++),e>=this.values.length&&(e=this.values.length-1);for(let r=n;r<=e;r++)this.prefixSum[r]=this.prefixSum[r-1]+this.values[r];return this.prefixSumValidIndex[0]=Math.max(this.prefixSumValidIndex[0],e),this.prefixSum[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let n=0,r=this.values.length-1,i=0,o=0,a=0;for(;n<=r;)if(i=n+(r-n)/2|0,o=this.prefixSum[i],a=o-this.values[i],e<a)r=i-1;else if(e>=o)n=i+1;else break;return new Ede(i,e-a)}};var Ede=class{constructor(e,n){this.index=e;this.remainder=n;this._prefixSumIndexOfResultBrand=void 0;this.index=e,this.remainder=n}static{s(this,"PrefixSumIndexOfResult")}};var w9=class{static{s(this,"PositionOffsetTransformer")}constructor(e){this._lines=kg(e),this._eol=e.charAt(this._lines[0].length)==="\r"?`\r
`:`
`;let n=new Uint32Array(this._lines.length);for(let r=0;r<this._lines.length;r++)n[r]=this._lines[r].length+this._eol.length;this._lineStarts=new uj(n)}_getText(){return this._lines.join(this._eol)}applyOffsetEdits(e){let{edits:n}=e;for(let r=n.length-1;r>=0;r--){let i=n[r],o=this.toRange(i.replaceRange);this._acceptDeleteRange(o),this._acceptInsertText(o.start,i.newText)}}_acceptDeleteRange(e){if(e.start.line===e.end.line){if(e.start.character===e.end.character)return;this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.start.line].substring(e.end.character));return}this._setLineText(e.start.line,this._lines[e.start.line].substring(0,e.start.character)+this._lines[e.end.line].substring(e.end.character)),this._lines.splice(e.start.line+1,e.end.line-e.start.line),this._lineStarts.removeValues(e.start.line+1,e.end.line-e.start.line)}_acceptInsertText(e,n){if(n.length===0)return;let r=kg(n);if(r.length===1){this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+r[0]+this._lines[e.line].substring(e.character));return}r[r.length-1]+=this._lines[e.line].substring(e.character),this._setLineText(e.line,this._lines[e.line].substring(0,e.character)+r[0]);let i=new Uint32Array(r.length-1);for(let o=1;o<r.length;o++)this._lines.splice(e.line+1+o-1,0,r[o]),i[o-1]=r[o].length+this._eol.length;this._lineStarts.insertValues(e.line+1,i)}_setLineText(e,n){this._lines[e]=n,this._lineStarts.setValue(e,this._lines[e].length+this._eol.length)}getLineCount(){return this._lines.length}getOffset(e){return e=this.validatePosition(e),this._lineStarts.getPrefixSum(e.line-1)+e.character}getPosition(e){e=Math.floor(e),e=Math.max(0,e);let n=this._lineStarts.getIndexOf(e),r=this._lines[n.index].length;return new Io(n.index,Math.min(n.remainder,r))}toRange(e){return new Md(this.getPosition(e.start),this.getPosition(e.endExclusive))}toOffsetRange(e){return new Rt(this.getOffset(e.start),this.getOffset(e.end))}toOffsetEdit(e){let n=e.map(r=>new gR(this.validateRange(r.range),r.newText));return new Ap(n.map(r=>new ol(this.toOffsetRange(r.range),r.newText)))}toTextEdits(e){return e.edits.map(n=>new gR(this.toRange(n.replaceRange),n.newText))}validatePosition(e){if(!(e instanceof Io))throw new Error("Invalid argument");if(this._lines.length===0)return e.with(0,0);let{line:n,character:r}=e,i=!1;if(n<0)n=0,r=0,i=!0;else if(n>=this._lines.length)n=this._lines.length-1,r=this._lines[n].length,i=!0;else{let o=this._lines[n].length;r<0?(r=0,i=!0):r>o&&(r=o,i=!0)}return i?new Io(n,r):e}validateRange(e){return new Md(this.validatePosition(e.start),this.validatePosition(e.end))}};var dj=class{constructor(e,n){this.originalText=e;this.edits=n;this._positionOffsetTransformer=new Rg(()=>new w9(this.text));this._originalPositionOffsetTransformer=new Rg(()=>new w9(this.originalText));this._text=new Rg(()=>this.edits.apply(this.originalText))}static{s(this,"ProjectedText")}get positionOffsetTransformer(){return this._positionOffsetTransformer.value}get originalPositionOffsetTransformer(){return this._originalPositionOffsetTransformer.value}get text(){return this._text.value}get lineCount(){return this.positionOffsetTransformer.getLineCount()}get isOriginal(){return this.edits.isEmpty||this.edits.isNoop(this.originalText)}project(e){return this.edits.applyToOffset(e)}projectOffsetRange(e){return this.edits.applyToOffsetRange(e)}projectRange(e){let n=this.originalPositionOffsetTransformer.toOffsetRange(e),r=this.projectOffsetRange(n);return this.positionOffsetTransformer.toRange(r)}projectOffsetEdit(e){return e.tryRebase(this.edits)}projectBack(e){return this.edits.applyInverseToOffset(e)}projectBackOffsetEdit(e){return e.tryRebase(this.edits.inverse(this.originalText))}projectBackTextEdit(e){let n=this.positionOffsetTransformer.toOffsetEdit(e),r=this.projectBackOffsetEdit(n);return this.originalPositionOffsetTransformer.toTextEdits(r)}};var Ide=class{constructor(e,n,r,i,o){this.parent=e;this.overlayNode=n;this.range=r;this.children=i;this._document=o}static{s(this,"RemovableNode")}get kind(){return this.overlayNode.kind}get text(){return this._document.getTextInOffsetRange(this.range)}},fT=class extends dj{constructor(n,r){super(n.getText(),r);this.baseDocument=n}static{s(this,"ProjectedDocument")}getLanguageId(){return this.baseDocument.languageId}};function pj(t,e,n){let r=[],i=[],o=[];for(let l=0;l<n.length;l++){let{document:c,overlayNodeRoot:u,selection:d}=n[l],p=c.getText(),m=d?c.rangeToOffsetRange(d):void 0,h=LQe(u,c),g=Tde.fromRootNode(h,p),y=wde.fromNode(g,!!e.tryPreserveTypeChecking,!!e.alwaysUseEllipsisForElisions);m&&y.visitAll(U=>U.node.range.intersectsOrTouches(m)?(U.node.children.length===0&&U.markAsSurviving(),!0):!1),r.push(y),i.push(y.getTextFragment());let v=s(U=>m?U.range.endExclusive<m.start?m.start-U.range.endExclusive:U.range.start>m.endExclusive?3*(U.range.start-m.endExclusive):0:0,"distanceScoreToSelection"),b=new j1(U=>m?U.children.length===0?U.range.intersectsOrTouches(m)?0:Number.MAX_SAFE_INTEGER:DQe(U.children.map(ne=>b.get(ne)))+1:0),E=new j1(U=>{let ne=U.parent?E.get(U.parent):Number.MAX_SAFE_INTEGER,he=b.get(U);return Math.min(ne,he)}),_=!!e.tryPreserveTypeChecking,k=s(U=>_&&U.node?.kind==="import_statement"?0:100*E.get(U)+U.depth+10*(v(U)/p.length),"costFn"),P=typeof e.costFnOverride=="object"?e.costFnOverride.createCostFn(c):e.costFnOverride;if(P!==void 0){let U=k;k=s(ne=>{let he=U(ne);return he===!1?!1:ne.node?P(ne.node,he,c):he},"costFn")}let N=y.getDescendantsAndSelf();for(let U of N){if(!U.node.node)continue;let ne=k(U.node);ne!==!1&&o.push({idx:l,node:U,cost:ne})}}o.sort(w0(l=>l.cost,_0));for(let{node:l,idx:c}of o){if(l.markAsSurviving(),r.reduce((d,p)=>d+p.getTextFragment().length,0)>t)break;i[c]=r[c].getTextFragment()}let a=[];for(let l=0;l<i.length;l++){let c=i[l],{document:u}=n[l],d=new fT(u,c.toTextEditFromOriginal(u.getText().length)),p=d,m=r[l];p.getVisualization=()=>({$fileExtension:"ast.w",source:{value:d.originalText,decorations:NQe(Rt.ofLength(d.originalText.length),d.edits.edits.map(h=>h.replaceRange)).map(h=>({range:[h.start,h.endExclusive],color:"lime"}))},root:bde(m,h=>({label:(h.node.node?.kind||"unknown")+` (${o.find(g=>g.node===h)?.cost})`,range:h.node.range,children:h.childNodes,isMarked:h._surviving}))}),a.push(d)}return a}s(pj,"summarizeDocumentsSyncImpl");function LQe(t,e,n=void 0){let r=new Rt(t.startIndex,t.endIndex),i=[],o=new Ide(n,t,r,i,e);for(let a of t.children)i.push(LQe(a,e,o));return o}s(LQe,"createRemovableNodeFromOverlayNode");var Tde=class t{constructor(e,n,r,i,o,a){this.node=e;this.range=n;this.children=r;this.depth=i;this.parent=o;this.document=a}static{s(this,"TextNode")}static fromRootNode(e,n){let r=new Rt(0,n.length);if(e.range.equals(r))return t.fromNode(e,n);let i=new Rt(0,e.range.start),o=new Rt(e.range.endExclusive,n.length),a=[],l=new t(void 0,r,a,0,null,n);return i.isEmpty||a.push(new t(void 0,i,[],0,l,n)),a.push(t.fromNode(e,n,1,null)),o.isEmpty||a.push(new t(void 0,o,[],0,l,n)),l}static fromNode(e,n,r=0,i=null){let o=[],a=new t(e,e.range,o,r,i,n);if(e.children.length>0){let l=e.range.start;for(let u of e.children){let d=new Rt(l,u.range.start);d.isEmpty||o.push(new t(void 0,d,[],r,a,n)),o.push(t.fromNode(u,n,r+1,a)),l=u.range.endExclusive}let c=new Rt(l,e.range.endExclusive);c.isEmpty||o.push(new t(void 0,c,[],r,a,n))}return a}getLeadingWs(){return k8t(this.document,this.range)}getTrailingWs(){return B8t(this.document,this.range)}};function k8t(t,e){let n=e.substring(t),r=n.length-n.trimStart().length;return n.substring(0,r)}s(k8t,"getLeadingWs");function B8t(t,e){let n=e.substring(t),r=n.length-n.trimEnd().length;return n.substring(n.length-r)}s(B8t,"getTrailingWs");var wde=class t{constructor(e,n,r,i,o){this.node=e;this.parent=n;this.childNodes=r;this._tryPreserveTypeChecking=i;this._alwaysUseEllipsisForElisions=o;this._surviving=!1;this._textFragment=null}static{s(this,"SurvivingTextNode")}static fromNode(e,n,r){return t.fromNodeParent(e,null,n,r)}static fromNodeParent(e,n,r,i){let o=[],a=new t(e,n,o,r,i);for(let l of e.children){let c=t.fromNodeParent(l,a,r,i);o.push(c)}return a}visitAll(e){if(e(this))for(let n of this.childNodes)n.visitAll(e)}markAsSurviving(){this._surviving||(this._surviving=!0,this.parent&&this.parent.markAsSurviving(),this.invalidate())}invalidate(){this._textFragment&&(this._textFragment=null,this.parent&&this.parent.invalidate())}getTextFragment(){return this._textFragment||(this._textFragment=this._computeSummarization()),this._textFragment}_computeSummarization(){if(this.childNodes.length===0&&(this._surviving||!this.node.node))return new Eb(this.node.range,this.node.document);if(!this._surviving)return new dT("");let e=Array.from(o5(this.childNodes.map(r=>({node:r,fragment:r.getTextFragment()})),(r,i)=>r.fragment.length===0==(i.fragment.length===0)));for(let r=0;r<e.length;r++){let i=e[r],o=i[0].fragment.length===0;if(o&&r>0&&r<e.length-1){let a=e[r-1].at(-1),l=e[r+1].at(0);if(a.fragment instanceof Eb&&l.fragment instanceof Eb){let c=a.fragment.trimEnd(),u=l.fragment.trimStart();if(c.endsWith("{")&&u.startsWith("}")){e[r-1][e[r-1].length-1].fragment=c,i.length=1,i[0].fragment=new dT(this._tryPreserveTypeChecking?"/ * ... * /":"\u2026"),e[r+1][0].fragment=u;continue}}}if(this._alwaysUseEllipsisForElisions&&o&&(r>0||r<e.length-1)){i.length=1;let a=i.at(0).node.node.getLeadingWs(),l=a.lastIndexOf(`
`);l!==-1&&(a=a.substring(l+1));let c=i.at(-1).node.node.getTrailingWs();i[0].fragment=new dT(a+(this._tryPreserveTypeChecking?"/ * ... * /":"\u2026")+c)}}let n=[];for(let r of e)for(let i of r)P8t(n,i.fragment);return fj.from(n)}getDescendantsAndSelf(){let e=[];return this._getDescendantsAndSelf(e),e}_getDescendantsAndSelf(e){e.push(this);for(let n of this.childNodes)n._getDescendantsAndSelf(e)}},_9=class{static{s(this,"TextFragment")}toString(){return this.text}toTextEditFromOriginal(e){let n=[],r=0,i="";function o(l){(r!==l||i.length>0)&&(n.push(new ol(new Rt(r,l),i)),i="")}s(o,"emit");function a(l){if(l instanceof fj)for(let c of l.fragments)a(c);else l instanceof dT?i+=l.text:l instanceof Eb&&(o(l.range.start),r=l.range.endExclusive)}return s(a,"process"),a(this),o(e),new Ap(n)}},dT=class extends _9{constructor(n){super();this.text=n}static{s(this,"LiteralTextFragment")}get length(){return this.text.length}},Eb=class t extends _9{constructor(n,r){super();this.range=n;this.originalText=r}static{s(this,"OriginalTextFragment")}get length(){return this.range.length}get text(){return this.range.substring(this.originalText)}trimStart(){let n=this.text.trimStart();return n.length===this.length?this:new t(new Rt(this.range.endExclusive-n.length,this.range.endExclusive),this.originalText)}trimEnd(){let n=this.text.trimEnd();return n.length===this.length?this:new t(new Rt(this.range.start,this.range.start+n.length),this.originalText)}startsWith(n){return this.text.startsWith(n)}endsWith(n){return this.text.endsWith(n)}tryJoin(n){return this.range.endExclusive===n.range.start?new t(new Rt(this.range.start,n.range.endExclusive),this.originalText):null}},fj=class t extends _9{constructor(n){super();this.fragments=n;this.length=this.fragments.reduce((n,r)=>n+r.length,0)}static{s(this,"ConcatenatedTextFragment")}static from(n){return n.length===0?new dT(""):n.length===1?n[0]:new t(n)}get text(){return this.fragments.map(n=>n.text).join("")}};function P8t(t,e){if(e.length===0)return;let n=t[t.length-1];if(n&&n instanceof Eb&&e instanceof Eb){let r=n.tryJoin(e);if(r){t[t.length-1]=r;return}}t.push(e)}s(P8t,"pushFragment");f();var mj=je(th());function S9(t){if(Array.isArray(t))return t.map(n=>S9(n));let e=(0,mj.toMode)(mj.OutputMode.OpenAI,t);if("copilot_references"in t&&(e.copilot_references=t.copilot_references),"copilot_confirmations"in t&&(e.copilot_confirmations=t.copilot_confirmations),typeof e.content=="string")e.content=e.content.trimEnd();else for(let n of e.content)n.type==="text"&&(n.text=n.text.trimEnd());return e}s(S9,"rawMessageToCAPI");f();f();var hj=class{constructor(e,n,r,i){this.startIndex=e;this.endIndex=n;this.kind=r;this.children=i;if(e>n)throw new dr("startIndex must be less than endIndex");let o=e;for(let a of i){if(a.startIndex<o)throw new dr("Invalid child startIndex");if(a.endIndex>n)throw new dr("Invalid child endIndex");o=Math.max(a.endIndex,o)}}static{s(this,"OverlayNode")}toString(){let e=[];function n(r,i=""){e.push(`${i}${r.kind} [${r.startIndex}, ${r.endIndex}]`),r.children.forEach(o=>n(o,i+"    "))}return s(n,"toString"),n(this),e.join(`
`)}};function MQe(t,e,n){let r=t.getText().split(/\r\n|\r|\n/g),i=n||{tabSize:4},o={getLineCount:s(()=>r.length,"getLineCount"),getLineContent:s(a=>r[a-1],"getLineContent"),getOptions:s(()=>i,"getOptions")};try{let a=D8t(o,e),[l]=QQe(t,a,void 0);return l.adjust(t,OQe(e)),l.toOverlayNode(t,!0)}catch{return new gj(1,t.getLineCount(),[]).toOverlayNode(t,!0)}}s(MQe,"getStructureUsingIndentation");function QQe(t,e,n){if(typeof n<"u"&&n>=e.length)throw new Error(`Invalid region index ${n}`);let r=typeof n>"u"?1:e.getStartLineNumber(n),i=typeof n>"u"?t.getLineCount():e.getEndLineNumber(n),o=[],a=null;for(n=typeof n>"u"?0:n+1;n<e.length;){let l=e.getStartLineNumber(n),c=e.getEndLineNumber(n);if(l>i||c>i)break;let u=a;if([a,n]=QQe(t,e,n),u&&a.startLineNumber<=u.endLineNumber)throw new dr("Invalid Folding Ranges: overlapping children");if(a.startLineNumber<r)throw new dr("Invalid Folding Ranges: child starts before parent");o.push(a)}return[new gj(r,i,o),n]}s(QQe,"createFoldingRangeTree");var gj=class{constructor(e,n,r){this.startLineNumber=e;this.endLineNumber=n;this.children=r;if(e>n)throw new dr("Invalid Folding Ranges: startLineNumber > endLineNumber")}static{s(this,"FoldingRangeNode")}adjust(e,n){n?this._adjustOffside():this._adjustRegular(e,e.getLineCount())}_adjustOffside(){this.startLineNumber++;for(let e of this.children)e._adjustOffside()}_adjustRegular(e,n){if(this.endLineNumber<n){let r=e.getLineText(this.endLineNumber).trim(),i=/^[\}\]\)];?$/.test(r),o=/^<\/\w/.test(r);(i||o)&&this.endLineNumber++}for(let r=this.children.length-1;r>=0;r--){let i=this.children[r],o=r+1<this.children.length?this.children[r+1].startLineNumber-1:n;i._adjustRegular(e,o)}}toOverlayNode(e,n){let r=[],i=n&&this.startLineNumber===1?1:this.startLineNumber+1;for(let o of this.children){for(let a=i;a<o.startLineNumber;a++){let l=_de(e,a,a,"LINE",[]);l&&r.push(l)}r.push(o.toOverlayNode(e,!1)),i=o.endLineNumber+1}for(let o=i;o<this.endLineNumber;o++){let a=_de(e,o,o,"LINE",[]);a&&r.push(a)}return _de(e,this.startLineNumber,this.endLineNumber,"FOLD",r)}};function _de(t,e,n,r,i){let o=t.getOffsetAtPosition(new Io(e-1,0)),a=n<t.getLineCount()?new Io(n,0):new Io(n-1,t.getLineLength(n-1)),l=t.getOffsetAtPosition(a);return new hj(o,l,r,i)}s(_de,"createOverlayNode");function D8t(t,e){return N8t(t,OQe(e))}s(D8t,"generateFoldingRegions");function OQe(t){return["clojure","coffeescript","fsharp","latex","markdown","pug","python","sql","yaml"].includes(t)}s(OQe,"isOffSide");function N8t(t,e){let n=t.getOptions().tabSize,r=new Sde,i=[],o=t.getLineCount()+1;i.push({indent:-1,endAbove:o,line:o});for(let a=t.getLineCount();a>0;a--){let l=t.getLineContent(a),c=F8t(l,n),u=i[i.length-1];if(c===-1){e&&(u.endAbove=a);continue}if(u.indent>c){do i.pop(),u=i[i.length-1];while(u.indent>c);let d=u.endAbove-1;d-a>=1&&r.insertFirst(a,d,c)}u.indent===c?u.endAbove=a:i.push({indent:c,endAbove:a,line:a})}return r.toIndentRanges()}s(N8t,"_computeRanges");var L8t=65535,pT=16777215,FQe=4278190080,Sde=class{static{s(this,"RangesCollector")}constructor(){this._startIndexes=[],this._endIndexes=[],this._indentOccurrences=[],this._length=0}insertFirst(e,n,r){if(e>pT||n>pT)return;let i=this._length;this._startIndexes[i]=e,this._endIndexes[i]=n,this._length++,r<1e3&&(this._indentOccurrences[r]=(this._indentOccurrences[r]||0)+1)}toIndentRanges(){let e=new Uint32Array(this._length),n=new Uint32Array(this._length);for(let r=this._length-1,i=0;r>=0;r--,i++)e[i]=this._startIndexes[r],n[i]=this._endIndexes[r];return new Rde(e,n)}};function F8t(t,e){let n=0,r=0,i=t.length;for(;r<i;){let o=t.charCodeAt(r);if(o===32)n++;else if(o===9)n=n-n%e+e;else break;r++}return r===i?-1:n}s(F8t,"computeIndentLevel");var Rde=class{static{s(this,"FoldingRegions")}constructor(e,n){this._startIndexes=e,this._endIndexes=n,this._parentsComputed=!1}ensureParentIndices(){if(!this._parentsComputed){this._parentsComputed=!0;let e=[],n=s((r,i)=>{let o=e[e.length-1];return this.getStartLineNumber(o)<=r&&this.getEndLineNumber(o)>=i},"isInsideLast");for(let r=0,i=this._startIndexes.length;r<i;r++){let o=this._startIndexes[r],a=this._endIndexes[r];if(o>pT||a>pT)throw new Error("startLineNumber or endLineNumber must not exceed "+pT);for(;e.length>0&&!n(o,a);)e.pop();let l=e.length>0?e[e.length-1]:-1;e.push(r),this._startIndexes[r]=o+((l&255)<<24),this._endIndexes[r]=a+((l&65280)<<16)}}}get length(){return this._startIndexes.length}getStartLineNumber(e){return this._startIndexes[e]&pT}getEndLineNumber(e){return this._endIndexes[e]&pT}getParentIndex(e){this.ensureParentIndices();let n=((this._startIndexes[e]&FQe)>>>24)+((this._endIndexes[e]&FQe)>>>16);return n===L8t?-1:n}contains(e,n){return this.getStartLineNumber(e)<=n&&this.getEndLineNumber(e)>=n}findIndex(e){let n=0,r=this._startIndexes.length;if(r===0)return-1;for(;n<r;){let i=Math.floor((n+r)/2);e<this.getStartLineNumber(i)?r=i:n=i+1}return n-1}findRange(e){let n=this.findIndex(e);if(n>=0){if(this.getEndLineNumber(n)>=e)return n;for(n=this.getParentIndex(n);n!==-1;){if(this.contains(n,e))return n;n=this.getParentIndex(n)}}return-1}};f();function mT(t){return t instanceof Error?t:typeof t=="string"?new Error(t):new Error(`An unexpected error occurred: ${t}`)}s(mT,"fromUnknown");var Cl=je(th());var Aj="current-version",j0="next-version",qQe=2,WQe=10,HQe=.7,M8t=/```[^\n]*\n/,_y=class extends fR{constructor(n,r,i){super(_y.ID,[o=>new yR(o),o=>new mR(o),o=>new hR(o)]);this.fetcher=n;this._parserService=r;this._instantiationService=i;this.dependsOnSelection=!0;this.showNextEditPreference="always";this._delayer=new fG}static{s(this,"GhNearbyNesProvider")}static{this.ID="GhNearbyNesProvider"}canReuseResult(n,r){if(n.getActiveDocument().id!==r.getActiveDocument().id||n.documents.length!==r.documents.length)return!1;let i=new Map(n.documents.map(a=>[a.id,a]));for(let a of r.documents){let l=i.get(a.id);if(!l||!o(l,a))return!1}return!0;function o(a,l){if(a.documentAfterEditsNoShortening.value!==l.documentAfterEditsNoShortening.value)return!1;let c=cT(a),u=c?kde(a,c):null,d=cT(l),p=d?kde(l,d):null;return!u||!p?!0:Math.abs(u.line-p.line)<Math.min(qQe,WQe)}}handleAcceptance(){this._delayer.handleAcceptance()}handleRejection(){this._delayer.handleRejection()}async provideNextEditBase(n,r){let i=new yb(n),o=this._delayer.createDelaySession(),a;try{a=await this.doGetNextEdit(n,i,o,r)}catch(c){return Ri.noEdit({kind:"unexpected",error:mT(c)},i)}let l=o.getArtificalDelay();return l>0&&await by(l),a}async doGetNextEdit(n,r,i,o){return n.documents.some(c=>{if(c.recentEdit.edits.length===0)return!1;for(let u of c.recentEdit.edits)if(!u.lineRange.isEmpty||u.newLines.length>0)return!0;return!1})?await this.sendRequestAndProcessResult(n,i,o,r):Ri.noEdit({kind:"activeDocumentHasNoEdits"},r)}async sendRequestAndProcessResult(n,r,i,o){let a=await this.createPrompt(n,i);if(!a)return Ri.noEdit({kind:"noSuggestions"},o);if(!a.editWindowIsInPrompt)return Ri.noEdit({kind:"filteredOut",message:"promptTooLarge"},o);if(await this.debounce(r,o),i.isCancellationRequested){let k={kind:"gotCancelled",message:"afterDebounce"};return Ri.noEdit(k,o)}let{summarizedEditWindow:l,editWindowAllowedEditLineRange:c,allowedEditLineRange:u,maxCompletionLineCount:d,messages:p,completionPrefixRange:m,completionRange:h,convergence:g,activeDocument:y,activeDocumentLines:v}=a;o.setFetchStartedAt(),n.fetchIssued=!0;let b=await yde(this.ID,this.fetcher,S9(p),{convergence:g,ignoreReplyTextBefore:M8t,maxCompletionLineCount:d,convergenceNonWhitespaceCharOverlap:1e3},i);if(o.setFetchResultIfNotSet(b.isOk()?"success":b.err.kind==="cancel"||i.isCancellationRequested?"cancelled":"failure"),b.isOk()&&typeof b.val.ttft=="number"&&o.setTtft(b.val.ttft),i.isCancellationRequested)return Ri.noEdit({kind:"gotCancelled",message:"afterFetchCall"},o);if(b.isError())return b.err.kind==="cancel"?Ri.noEdit({kind:"gotCancelled",message:"afterFetchCall"},o):Ri.noEdit({kind:"fetchFailure",error:mT(b.err.err)},o);let E=b.val.result;if(E.length===0){let k=`<${j0}>
`,P=b.val.ignored.indexOf(k);P>=0&&(E=b.val.ignored.substring(P+k.length))}if(E=Q8t(E),E.trim().length===0)return Ri.noEdit({kind:"noSuggestions"},o);let _;if(l&&c&&u){let k=O8t(y,l,c,E);if(!k||k.edits.length===0)return Ri.noEdit({kind:"filteredOut",message:"Content is identical or cannot get clean diff within edit window"},o);let P=U8t(l,k);if(P.edits.length===0)return Ri.noEdit({kind:"filteredOut",message:"No-op edit or could not map back to original document"},o);if(aj){let ne=await I9(this._parserService,y.languageId,y.documentAfterEditsNoShortening.value),he=P.apply(y.documentAfterEditsNoShortening.value);if(await I9(this._parserService,y.languageId,he)>ne)return Ri.noEdit({kind:"filteredOut",message:"More parse errors after edit"},o)}_=q8t(y,P);let N=_.edits[0].lineRange.startLineNumber,U=_.edits[_.edits.length-1].lineRange.endLineNumberExclusive;if(!Cde(new Yt(N,U),u))return Ri.noEdit({kind:"filteredOut",message:"Outside edit window after projection"},o)}else{let k=lj(y.languageId,v,m,h,E,void 0),P=await xde(this._parserService,k,y,{requireEditWithinNLines:100});if(!P)return Ri.noEdit({kind:"filteredOut",message:"Could not identify best edit"},o);_=new Lo([P])}return W8t(y,_)?Ri.noEdit({kind:"filteredOut",message:"Undo of recent edit"},o):H8t(y,_)?Ri.noEdit({kind:"filteredOut",message:"Deletion of recent insertion"},o):G8t(y,_)?Ri.noEdit({kind:"filteredOut",message:"uncategorized"},o):j8t(y,_)?Ri.noEdit({kind:"filteredOut",message:"uncategorized"},o):Ri.edit({edit:_},o)}async debounce(n,r){let i=n.getDebounceTime();r.setDebounceTime(i),await by(i)}async createPrompt(n,r){let i=n.getActiveDocument(),a=i.documentAfterEdits.value.includes(`\r
`)?`\r
`:`
`,l=i.documentAfterEdits.value.split(a),c=cT(i);if(c===null)return;let u=kde(i,c),d=new ah(i.documentAfterEditsNoShortening.value),p=await z8t(this._parserService,{getText:s(()=>d.getText(),"getText"),languageId:i.languageId}),{firstEditableLineInShortenedDocument:m,lastEditableLineInShortenedDocument:h,editWindow:g}=function(){let he=V8t(i.documentAfterEditsLines,c.startLineNumber),ae=Math.max(1,Math.min(he,c.startLineNumber-qQe)),G=c.startLineNumber-ae,W=Math.min(l.length,c.endLineNumber+WQe),ue=W-c.endLineNumber,ie=u.line-G,V=u.line+ue,O=new Md(ie,0,V,d.getLineLength(V));return{firstEditableLineInShortenedDocument:ae,lastEditableLineInShortenedDocument:W,editWindow:O}}(),y=pj(0,{alwaysUseEllipsisForElisions:!0},[{overlayNodeRoot:p,document:d,selection:g}])[0],v=new Yt(1,m),b=new Yt(m,h+1),E=y.text,{messages:_,prediction:k,editWindowIsInPrompt:P}=await this._renderPrompt({request:n,activeDocumentSlice:E,languageId:i.languageId},r),N=E.split(/\r\n|\r|\n/).length,U=y.projectRange(g),ne=y.positionOffsetTransformer.toOffsetRange(U);return{summarizedEditWindow:y,editWindowAllowedEditLineRange:new Yt(U.start.line+1,U.end.line+2),allowedEditLineRange:new Yt(m,h+1),messages:_,prediction:k,editWindowIsInPrompt:P,activeDocument:i,activeDocumentLines:l,completionPrefixRange:v,completionRange:b,convergence:E,expectedConvergencePrefix:ne.start,maxCompletionLineCount:N+20}}async _renderPrompt(n,r){let o=await bb.create(this._instantiationService,Pde,n).render(void 0,r,{trace:!1}),a=o.metadata.get(bj)?.prediction,l=!!o.metadata.get(Cj);return{messages:o.messages,prediction:a,editWindowIsInPrompt:l}}};_y=Cu([Bs(0,sh),Bs(1,Ty),Bs(2,dA)],_y);function Q8t(t){function e(n,r,i){let o=n.lastIndexOf(r);if(o===-1)return n;let a=n.slice(0,o);return a.trim().length>0?a+i:a}return s(e,"getStringBeforeLastPattern"),t=e(t,"\n```",`
`),t=e(t,`\`\`\`</${j0}>`,`
`),t=e(t,`\`\`\`
</${j0}>`,`
`),t=e(t,`</${j0}>`,`
`),t}s(Q8t,"removeSuffixFromReply");function kde(t,e){let n=t.documentAfterEdits.getTransformer().getOffset(e.getEndPosition()),r=t.toOffsetOnDocumentAfterEditsNoShortening(n);return new ah(t.documentAfterEditsNoShortening.value).getPositionAtOffset(r)}s(kde,"getCursorPositionInOuterDocument");function O8t(t,e,n,r){let i=AR.fromString(e.text),o=AR.fromString(r.trimEnd()),l=new vR(t.languageId,i,new Yt(1,i.length+1),o).resolveDiff().eliminateEmptyLineChanges().eliminateInsertedOrDeletedComments().eliminateEmptyLineChanges(),c=e.isOriginal?l:l.containWithinLines(n);if(!c)return null;let u=Ade?c.eliminateLargeChangeHunks():c;return u?u.toLineEdit("multiple-hunks"):null}s(O8t,"generateSummarizedEditWindowEdit");function U8t(t,e){let n=e.toEdit(new ql(t.text));return t.projectBackOffsetEdit(n.toOffsetEdit())}s(U8t,"convertSummarizedEditWindowEditToOuterDocumentEdit");function q8t(t,e){let n=e.edits.map(i=>{let o=i.replaceRange.start,a=t.toProjectedOffset(o);return Us.replace(new Rt(a,a+i.replaceRange.length),i.newText)}),r=new nu(t.documentAfterEdits,Es.create(n));return Lo.fromEdit(r)}s(q8t,"convertOuterDocumentEditToProjectedEdit");function W8t(t,e){let n=e.toEdit(t.documentAfterEdits),r=GQe(t.documentAfterEdits.value,n),i=new yj,o=t.documentBeforeEdits.value;for(let a of t.recentEdits.edits)i=i.combine(GQe(o,a)),o=a.apply(o);return!!i.isUndoneBy(r)}s(W8t,"editWouldUndo");function H8t(t,e){let n=e.toEdit(t.documentAfterEdits);if(n=n.normalizeOnSource(t.documentAfterEdits.value),!YQe(n))return!1;for(let r=t.recentEdits.edits.length-1;r>=0;r--){let i=t.recentEdits.edits[r],o=n.tryRebase(i);if(!o)return!0;n=o}return!1}s(H8t,"editWouldDeleteWhatWasJustInserted");function G8t(t,e){let n=e.toEdit(t.documentAfterEdits);if(n=n.normalizeOnSource(t.documentAfterEdits.value),!YQe(n))return!1;for(let r of n.edits){let i=t.documentAfterEdits.value.substring(r.range.start,r.range.endExclusive);if(fde(i,t.languageId))return!0}return!1}s(G8t,"editWouldDeleteAComment");function j8t(t,e){if(e.edits.length!==1)return!1;let n=e.edits[0];if(!n.lineRange.isEmpty)return!1;let r=s(l=>l.trim().length>5,"isSignificantLine"),i=new Set(n.newLines.filter(r));if(i.size<=1)return!1;let o=new Set(t.documentAfterEditsLines.filter(r));return Bde(o,i)/i.size>.8}s(j8t,"editWouldDuplicateExistingLines");function YQe(t){let e=t.edits.reduce((r,i)=>r+i.range.length,0);return t.edits.reduce((r,i)=>r+i.newText.length,0)===0&&e>0}s(YQe,"editIsDeletion");function V8t(t,e){for(;e>0;){if(t[e-1].trim().length>0)return e;e--}return 1}s(V8t,"findLineNumberAboveWithContent");var yj=class t{constructor(e=new Set,n=new Set){this.inserted=e;this.deleted=n}static{s(this,"InformationDelta")}combine(e){return new t(VQe(this.inserted,e.inserted),VQe(this.deleted,e.deleted))}isUndoneBy(e){let n=$Qe(e.inserted,e.deleted),r=$Qe(e.deleted,e.inserted),i=Bde(r,this.inserted),o=Bde(n,this.deleted);return r.size>6&&i/r.size>HQe||n.size>6&&o/n.size>HQe}};function GQe(t,e){let n=new Set,r=new Set,i=s(a=>{if(!a)return;let l=t.substring(a.start,a.endExclusive);for(let c of l.split(/\r\n|\r|\n/)){c=c.trim();for(let u of jQe(c))r.add(u)}},"tryAddDeleted"),o=s(a=>{for(let l of a.split(/\r\n|\r|\n/)){l=l.trim();for(let c of jQe(l))n.add(c)}},"tryAddInserted");for(let a of e.edits){let l=a.removeCommonPrefix(t).removeCommonSuffix(t),c=a.removeCommonSuffix(t).removeCommonPrefix(t);l.isNeutral()||(i(l.range),i(c.range),i(l.range.intersect(c.range)),o($8t(l.newText,c.newText)))}return new yj(n,r)}s(GQe,"getInformationDelta");function $8t(t,e){let n=Math.min(t.length,e.length);for(let r=0;r<n;r++){let i=t.slice(0,t.length-r),o=e.slice(r);if(i===o)return i}return""}s($8t,"trimOverlap");function jQe(t){let e=[];for(let n=4;n<t.length;n++){let r=t.slice(n-4,n);e.push(r)}return e}s(jQe,"to4grams");function VQe(t,e){let n=new Set;for(let r of t)n.add(r);for(let r of e)n.add(r);return n}s(VQe,"setUnion");function $Qe(t,e){let n=new Set;for(let r of t)e.has(r)||n.add(r);return n}s($Qe,"setMinus");function Bde(t,e){let n=0;for(let r of t)e.has(r)&&n++;return n}s(Bde,"setIntersectionCount");async function z8t(t,e){let r=await t.getTreeSitterAST(e)?.getStructure();return r||MQe(new ah(e.getText()),e.languageId,void 0)}s(z8t,"getStructure");var Pde=class extends Cl.PromptElement{static{s(this,"GHNearbyPrompt")}async render(e,n){let{request:r,activeDocumentSlice:i,languageId:o}=this.props,a=[`<${j0}>`,`\`\`\`${o}`,`${i}`,"```",`</${j0}>`].join(`
`),l=(0,Cl.useKeepWith)();return vscpp(vscppf,null,vscpp("meta",{value:new bj(a)}),vscpp(Cl.SystemMessage,{priority:1e3},vscpp(cj,null),this._getInstructions()),vscpp(Cl.UserMessage,{priority:900},"These are the files I'm working on, before I started making changes to them:",vscpp("br",null),"<original_code>",vscpp("br",null),r.documents.map((c,u)=>c.id===r.getActiveDocument().id?vscpp(l,{priority:300},vscpp(Cl.Chunk,{priority:300},vscpp(xj,{doc:c}))):vscpp(Cl.Chunk,{priority:100+u},vscpp(xj,{doc:c}))),vscpp("br",null),"</original_code>",vscpp("br",null),vscpp("br",null),"This is a sequence of edits that I made on these files, starting from the oldest to the newest:",vscpp("br",null),"<edits_to_original_code>",vscpp("br",null),r.documents.map((c,u)=>c.id===r.getActiveDocument().id?vscpp(l,{priority:300},vscpp(Cl.Chunk,{priority:300},vscpp(vj,{doc:c}))):vscpp(Cl.Chunk,{priority:200+u},vscpp(vj,{doc:c}))),vscpp("br",null),"</edits_to_original_code>",vscpp("br",null),vscpp("br",null),vscpp(l,{priority:300},vscpp(Cl.Chunk,{priority:300},vscpp("meta",{local:!0,value:new Cj}),"Here is the piece of code I am currently editing in"," ",r.getActiveDocument().getDisplayPath(),":",vscpp("br",null),vscpp("br",null),"<",Aj,">",vscpp("br",null),"```",o,vscpp("br",null),i,vscpp("br",null),"```",vscpp("br",null),"</",Aj,">",vscpp("br",null),vscpp("br",null),"Based on my most recent edits, what will I do next? Rewrite the code between <",Aj,"> and </",Aj,"> based on what I will do next. Do not skip any lines. Do not be lazy.",vscpp("br",null)))))}_getInstructions(){switch("v1"){case"v1":return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is being actively edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Make only the necessary changes as indicated by the context.",vscpp("br",null),"- Avoid unnecessary rewrites and make only the necessary changes, using ellipses to indicate partial code where appropriate.",vscpp("br",null),"- Ensure all specified additions, modifications, and new elements (e.g., methods, parameters, function calls) are included in the response.",vscpp("br",null),"- Adhere strictly to the provided pattern, structure, and content, including matching the exact structure and formatting of the expected response.",vscpp("br",null),"- Maintain the integrity of the existing code while making necessary updates.",vscpp("br",null),"- Provide complete and detailed code snippets without omissions, ensuring all necessary parts such as additional classes, methods, or specific steps are included.",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- Match the expected response exactly, even if it includes errors or corruptions, to ensure consistency.",vscpp("br",null),"- Do not alter method signatures, add or remove return values, or modify existing logic unless explicitly instructed.",vscpp("br",null),"- You must ONLY reply using the tag: <",j0,">.");case"v2":return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is being actively edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),"- Ensure that all necessary conditional logic and key-value pairs are preserved in the updated code.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- Avoid introducing unnecessary variables or methods that are not part of the original code structure.",vscpp("br",null),"- You must ONLY reply using the tag: <",j0,">.",vscpp("br",null),"- Provide a complete and functional code snippet without placeholders or incomplete sections unless explicitly required.");default:return vscpp(vscppf,null,"The programmer will provide you with a set of recently viewed files, their recent edits, and a snippet of code that is currently edited.",vscpp("br",null),vscpp("br",null),"When helping the programmer, your goals are:",vscpp("br",null),"- Keep the programmer on the pattern that you think they are on. Some examples are:",vscpp("br",null),"- Further implementing a class, method, or variable.",vscpp("br",null),"- Improving quality of the code.",vscpp("br",null),"- Making sure the programmer does not get distracted - make sure the next changes are relevant.",vscpp("br",null),"- Consider what edits need to be made next, if any.",vscpp("br",null),"- If you think changes should be made, ask yourself if this is really what needs to happen. If you are confident about it, then continue with the edits.",vscpp("br",null),vscpp("br",null),"When responding to the programmer, you must follow these rules:",vscpp("br",null),"- Only answer with the updated code. The programmer will copy and paste your code as is in place of the programmer's provided snippet.",vscpp("br",null),"- You must ONLY reply using the tag: <",j0,">.:",vscpp("br",null),"- If you see further edits to make to the programmer's code, you must provide the updated code in the <",j0,"> tag.:",vscpp("br",null),"- If the programmer's code is already correct and requires no further edits, simply answer with <",j0,">IDENTICAL</",j0,">.",vscpp("br",null),"- Make sure that the indentation level of any new code is correct and consistent with the existing code.",vscpp("br",null),vscpp("br",null),"Remember, you must ONLY respond using the tag: <",j0,">.")}}},Cj=class extends Cl.PromptMetadata{static{s(this,"EditWindowMarkerMetadata")}},xj=class extends Cl.PromptElement{static{s(this,"OriginalDocument")}async render(e,n){let{doc:r}=this.props,i=[];for(let o=0;o<r.documentLinesBeforeEdit.length;o++){let a=r.documentLinesBeforeEdit[o];i.push(`${r.clippingRange.startLineNumber+o}\u2502${a}`)}return vscpp(vscppf,null,r.getDisplayPath(),":",vscpp("br",null),i.join(`
`))}},vj=class extends Cl.PromptElement{static{s(this,"DocumentDiffs")}async render(e,n){let{doc:r}=this.props,i=[];return i.push("```"),i.push(`---${r.getDisplayPath()}:`),i.push(`+++${r.getDisplayPath()}:`),i.push(...BQe(r)),i.push("```"),vscpp(vscppf,null,i.join(`
`))}},bj=class extends Cl.PromptMetadata{constructor(n){super();this.prediction=n}static{s(this,"PredictionMetadata")}};f();f();function KQe(t,e){let n=[];for(let[r,i]of t.entries())i===e&&n.push(r);return n}s(KQe,"findIndexes");function Y8t(t,e,n,r=10){if(e.length===0)return e;let i=[...e],o=e.length-1;for(;o>=0&&e[o].trim()==="";)o--;if(o<0)return e;let a=KQe(n,e[o]).slice(0,r);for(let p of a){let m=!1,h=o;for(;h>=0&&p>=0;){let g=e[h],y=n[p];if(g===y)h--,p--;else if(y.trim()==="")p--;else{m=!0;break}}if(!m&&p===-1&&h!==e.length-1){e=e.slice(0,h+1);break}else e=[...i]}if(!e.length)return e;let l=0;for(;e.length&&e[l].trim()==="";)l++;let c=[...e],d=KQe(t,e[l]).slice(-r).reverse();for(let p of d){let m=!1,h=l;for(;h<e.length&&p<t.length;){let g=e[h],y=t[p];if(g===y)h++,p++;else if(y.trim()==="")p++;else{m=!0;break}}if(!m&&p===t.length&&h!==0){e=e.slice(h);break}else e=[...c]}return e}s(Y8t,"deduplicateEditRegion");function JQe(t,e,n){let r=t.getLines(),i=r.slice(0,e[0]),o=r.slice(e[1]+1);return{updatedEditWindow:Y8t(i,n.split(/\r?\n/),o).join(`
`)}}s(JQe,"postProcessUpdatedEditWindow");f();var Ej=je(th());function XQe(t){return t?typeof t=="string"?t:Array.isArray(t)?t.map(e=>e.type===Ej.Raw.ChatCompletionContentPartKind.Text?e.text:"").join(""):t.type===Ej.Raw.ChatCompletionContentPartKind.Text?t.text:"":""}s(XQe,"getTextPart");function K8t(t){return{type:Ej.Raw.ChatCompletionContentPartKind.Text,text:t}}s(K8t,"toTextPart");function Dde(t){return[K8t(t)]}s(Dde,"toTextParts");f();var Ij=Qd("IDiffService");var Qde=je(th());f();var Tj="<|cursor|>",hT="<|code_to_edit|>",bR="<|/code_to_edit|>",eOe="<|area_around_code_to_edit|>",tOe="<|/area_around_code_to_edit|>",J8t="<|current_file_content|>",X8t="<|/current_file_content|>",Z8t="<|edit_diff_history|>",ePt="<|/edit_diff_history|>",tPt="<|recently_viewed_code_snippets|>",nPt="<|/recently_viewed_code_snippets|>",rPt="<|recently_viewed_code_snippet|>",iPt="<|/recently_viewed_code_snippet|>",nOe=`Your role as an AI assistant is to help developers complete their code tasks by assisting in editing specific sections of code marked by the ${hT} and ${bR} tags, while adhering to Microsoft's content policies and avoiding the creation of content that violates copyrights.

You have access to the following information to help you make informed suggestions:

- recently_viewed_code_snippets: These are code snippets that the developer has recently looked at, which might provide context or examples relevant to the current task. They are listed from oldest to newest, with line numbers in the form #| to help you understand the edit diff history. It's possible these are entirely irrelevant to the developer's change.
- current_file_content: The content of the file the developer is currently working on, providing the broader context of the code. Line numbers in the form #| are included to help you understand the edit diff history.
- edit_diff_history: A record of changes made to the code, helping you understand the evolution of the code and the developer's intentions. These changes are listed from oldest to latest. It's possible a lot of old edit diff history is entirely irrelevant to the developer's change.
- area_around_code_to_edit: The context showing the code surrounding the section to be edited.
- cursor position marked as ${Tj}: Indicates where the developer's cursor is currently located, which can be crucial for understanding what part of the code they are focusing on.

Your task is to predict and complete the changes the developer would have made next in the ${hT} section. The developer may have stopped in the middle of typing. Your goal is to keep the developer on the path that you think they're following. Some examples include further implementing a class, method, or variable, or improving the quality of the code. Make sure the developer doesn't get distracted and ensure your suggestion is relevant. Consider what changes need to be made next, if any. If you think changes should be made, ask yourself if this is truly what needs to happen. If you are confident about it, then proceed with the changes.

# Steps

1. **Review Context**: Analyze the context from the resources provided, such as recently viewed snippets, edit history, surrounding code, and cursor location.
2. **Evaluate Current Code**: Determine if the current code within the tags requires any corrections or enhancements.
3. **Suggest Edits**: If changes are required, ensure they align with the developer's patterns and improve code quality.
4. **Maintain Consistency**: Ensure indentation and formatting follow the existing code style.

# Output Format

- Provide only the revised code within the tags. If no changes are necessary, simply return the original code from within the ${hT} and ${bR} tags.
- There are line numbers in the form #| in the code displayed to you above, but these are just for your reference. Please do not include the numbers of the form #| in your response.
- Ensure that you do not output duplicate code that exists outside of these tags. The output should be the revised code that was between these tags and should not include the ${hT} or ${bR} tags.

\`\`\`
// Your revised code goes here
\`\`\`

# Notes

- Apologize with "Sorry, I can't assist with that." for requests that may breach Microsoft content guidelines.
- Avoid undoing or reverting the developer's last change unless there are obvious typos or errors.
- Don't include the line numbers of the form #| in your response.`;function rOe(t,e,n,r){let i=t.getActiveDocument(),o=aPt(t,r),a=oPt(t,r,2e3),l=i.workspaceRoot===void 0?i.id.path:i.id.path.startsWith(i.workspaceRoot.path)?i.id.path.substring(i.workspaceRoot.path.length+1):i.id.path;return`
\`\`\`
${tPt}
${o}
${nPt}

${J8t}
current_file_path: ${l}
${e}
${X8t}

${Z8t}
${a}
${ePt}

${n}
\`\`\`

The developer was working on a section of code within the tags \`code_to_edit\` in the file located at \`${l}\`. Using the given \`recently_viewed_code_snippets\`, \`current_file_content\`, \`edit_diff_history\`, \`area_around_code_to_edit\`, and the cursor position marked as \`${Tj}\`, please continue the developer's work. Update the \`code_to_edit\` section by predicting and completing the changes they would have made next. Provide the revised code that was between the \`${hT}\` and \`${bR}\` tags with the following format, but do not include the tags themselves.
\`\`\`
// Your revised code goes here
\`\`\`
`.trim()}s(rOe,"getUserPrompt");function oPt(t,e,n){let r=[];for(let a of t.xtabEditHistory.reverse()){let l=sPt(a);if(l===null)continue;let c=e(l);if(n-=c,n<0)break;r.push(l)}let i=r.reverse(),o=i.join(`

`);return i.length>0&&(o+=`
`),o}s(oPt,"getEditDiffHistory");function sPt(t){let e=[],n=Lo.fromEdit(t.edit);for(let i of n.edits){let o=t.edit.base.getLines().slice(i.lineRange.startLineNumber-1,i.lineRange.endLineNumberExclusive-1),a=i.newLines;if(o.filter(c=>c.trim().length>0).length===0&&a.filter(c=>c.trim().length>0).length===0)continue;let l=i.lineRange.startLineNumber-1;e.push(`@@ -${l},${o.length} +${l},${a.length} @@`),e.push(...o.map(c=>`-${c}`)),e.push(...a.map(c=>`+${c}`))}return e.length===0?null:[`--- ${t.docId.path}`,`+++ ${t.docId.path}`,...e].join(`
`)}s(sPt,"generateDocDiff");function ZQe(t,e,n=!1){let r=n?`code_snippet_file_path: ${t} (truncated)`:`code_snippet_file_path: ${t}`;return[rPt,r,e,iPt].join(`
`)}s(ZQe,"formatCodeSnippet");function aPt(t,e,n=2e3,r=!1){n=n||Number.POSITIVE_INFINITY;let i=t.getActiveDocument(),a=t.documents.filter(u=>u.id!==i.id).map(u=>({path:u.id.path,content:u.documentAfterEdits.value})),l=[],c=0;for(let u=a.length-1;u>=0;u--){let d=a[u],p=d.content.split(/\r?\n/);r&&(p=p.map((v,b)=>`${b+1}|${v}`));let m=p.map(v=>e(v)+1),h=e(ZQe(d.path,"",!0)),g=m.reduce((v,b)=>v+b,0)+h,y=!1;for(;p.length>0&&c+g>n;)p.pop(),g-=m.pop()||0,y=!0;p.length>0&&(c+=g,l.push(ZQe(d.path,p.join(`
`),y)))}return l.join(`

`)}s(aPt,"getRecentCodeSnippets");function Nde(t,e,n){if(!t.length)return[0,0];let r=n*4,i=0,o=e?t.length-1:0;for(;i<r;)if(i+=t[o].length+1,e){if(o--,o<0)break}else if(o++,o>=t.length)break;return e?[o+1,t.length]:[0,o]}s(Nde,"truncateCode");var iOe=2,oOe=10,Lde=15,Fde=1e3,Mde=2e3;var xp=class extends fR{constructor(n,r,i){super(xp.ID,[o=>new yR(o),o=>new mR(o),o=>new hR(o)]);this.diffService=n;this._chatMLFetcher=r;this._endpointProvider=i;this.documentShorteningStrategy="noShortening";this.dependsOnSelection=!0;this.showNextEditPreference="always"}static{s(this,"XtabProvider")}static{this.ID="XtabProvider"}static{this.DEBOUNCE_MS=200}async provideNextEditBase(n,r){let i=new yb(n);try{if(n.xtabEditHistory.length===0)return Ri.noEdit({kind:"activeDocumentHasNoEdits"},i);let o=await this.doGetNextEdit(n,r,i);return new Ri(o,i.build(o))}catch(o){return Ri.noEdit({kind:"unexpected",error:mT(o)},i)}}async doGetNextEdit(n,r,i){let o=n.getActiveDocument(),a=cT(o);if(a===null)return No.error({kind:"uncategorized",error:mT(new Error("NoSelection"))});let l=s(pe=>Math.floor(pe.length/4),"computeTokens"),c=new rr(a.endLineNumber,a.endColumn),u=o.documentAfterEdits.getTransformer().getOffset(c),d=o.documentAfterEdits.value,p=d.substring(0,u)+Tj+d.substring(u),m=c.lineNumber-1,h=p.split(/\r?\n/),g=Math.max(0,m-Lde),y=Math.min(h.length,m+Lde+1),v=iOe,b=oOe,E=Math.max(0,m-v),_=Math.min(h.length,m+b+1),k=o.documentAfterEdits.getTransformer().getOffsetRange(new zt(E,0,_,0)),P;P=d.split(/\r?\n/).slice(E,_);let N=[E,_],U=h.slice(E,_),ne=[eOe,...h.slice(g,E),hT,...U,bR,...h.slice(_,y),tOe].join(`
`),he=ne,ae;{let pe=l(ne),ee=0;if(pe>=Mde)ae=ne,ee=g;else{let ce=Math.floor((Mde-pe)/2),[me]=Nde(h.slice(0,g),!0,ce),[,Ne]=Nde(h.slice(y),!1,ce);ee=Math.max(me,m-Fde);let Se=Math.min(Ne+y,m+Fde+1);ae=[...h.slice(ee,g),ne,...h.slice(y,Se)].join(`
`)}}let G=rOe(n,ae,he,l),W=[{role:Qde.Raw.ChatRole.System,content:Dde(nOe)},{role:Qde.Raw.ChatRole.User,content:Dde(G)}];if(i.setPrompt(W),await this.debounce(i),r.isCancellationRequested)return No.error({kind:"gotCancelled",message:"afterDebounce"});n.fetchIssued=!0;let ue=new _5,ie,V=await this._endpointProvider.getEndpointInfo(this.ID),O=await this._chatMLFetcher.fetchOne(S9(W),async(pe,ee,ce)=>{ie===void 0&&(ie=ue.elapsed())},{id:V.id,name:V.name},{temperature:0},r);if(O.type==="canceled")return No.error({kind:"gotCancelled",message:"afterFetchCall"});if(O.type==="quotaExceeded")return No.error({kind:"quotaExceeded"});if(O.type!=="success")return No.error({kind:"fetchFailure",error:mT(O)});ie&&i.setTtft(ie),i.setResponse(O.value);let Y=xp.getBacktickSection(O.value);return await this.generateReturnEditFormat(o,k,P.join(`
`),Y,N,i)}async generateReturnEditFormat(n,r,i,o,a,l){let{updatedEditWindow:c}=JQe(n.documentAfterEdits,a,o),u=await this.diffService.computeDiff(i,c,{ignoreTrimWhitespace:!1,maxComputationTimeMs:0,computeMoves:!1}),d=c.split(/\r?\n/),p=u.changes.map(m=>new Jm(new Yt(a[0]+m.original.startLineNumber,a[0]+m.original.endLineNumberExclusive),d.slice(m.modified.startLineNumber-1,m.modified.endLineNumberExclusive-1)));return p.length<1?No.error({kind:"noSuggestions"}):No.ok({editWindow:r,edit:new Lo(p)})}static getBacktickSection(n){return n.replace(/^\`\`\`[a-zA-Z]*\r?\n/,"").replace(/(\r?\n)\`\`\`$/,"")}async debounce(n){let r=Date.now()-n.startTime,i=Math.max(0,xp.DEBOUNCE_MS-r);n.setDebounceTime(i),await by(i)}};xp=Cu([Bs(0,Ij),Bs(1,sh),Bs(2,ij)],xp);f();var wj=class t extends jo{constructor(n,r=t.MAX_HISTORY_SIZE){super();this.maxHistorySize=r;this.idToEntry=new Map,this.history=new AP,Zf(this,n.openDocuments,(i,o)=>{o.add(V1(this,{rootedEdits:i.value},a=>{if(a.rootedEdits.changes.length<1||a.rootedEdits.previous===void 0)return;Ol(a.rootedEdits.changes.length===1,`Expected 1 edit change but got ${a.rootedEdits.changes.length}`);let l=a.rootedEdits.changes[0];if(l.edits.length===0)return;let c=this.idToEntry.get(i.id),u=a.rootedEdits.previous,d=new nu(u,l);if(c===void 0){this.pushToHistory(i.id,d);return}let p=c.entry.edit,m=Lo.fromEdit(p),h=Lo.fromEdit(d);if(!h.isEmpty()&&!m.isEmpty()&&m.edits[0].lineRange.startLineNumber===h.edits[0].lineRange.startLineNumber){c.removeFromHistory();let g=p.edit.compose(l),y=new nu(p.base,g);this.pushToHistory(i.id,y)}else this.pushToHistory(i.id,d)}))},i=>i.id).recomputeInitiallyAndOnChange(this._store)}static{s(this,"NesXtabHistoryTracker")}static{this.MAX_HISTORY_SIZE=50}getHistory(){return[...this.history]}pushToHistory(n,r){let i={docId:n,edit:r},o=this.history.push(i);if(this.idToEntry.set(n,{entry:i,removeFromHistory:o}),this.history.size>this.maxHistorySize){let a=this.history.shift();if(a!==void 0){let l=this.idToEntry.get(a.docId);l!==void 0&&a===l.entry&&this.idToEntry.delete(a.docId)}}}};f();f();f();f();var Ode=class t{constructor(e){this.edits=e;Nu(()=>yv(e,(n,r)=>n.range.getEndPosition().isBeforeOrEqual(r.range.getStartPosition())))}static{s(this,"TextEdit")}static fromOffsetEdit(e,n){let r=e.edits.map(i=>new fA(n.getTransformer().getRange(i.replaceRange),i.newText));return new t(r)}static single(e,n){return new t([new fA(e,n)])}static insert(e,n){return new t([new fA(zt.fromPositions(e,e),n)])}normalize(){let e=[];for(let n of this.edits)if(e.length>0&&e[e.length-1].range.getEndPosition().equals(n.range.getStartPosition())){let r=e[e.length-1];e[e.length-1]=new fA(r.range.plusRange(n.range),r.text+n.text)}else n.isEmpty||e.push(n);return new t(e)}mapPosition(e){let n=0,r=0,i=0;for(let o of this.edits){let a=o.range.getStartPosition();if(e.isBeforeOrEqual(a))break;let l=o.range.getEndPosition(),c=Ul.ofText(o.text);if(e.isBefore(l)){let u=new rr(a.lineNumber+n,a.column+(a.lineNumber+n===r?i:0)),d=c.addToPosition(u);return _j(u,d)}a.lineNumber+n!==r&&(i=0),n+=c.lineCount-(o.range.endLineNumber-o.range.startLineNumber),c.lineCount===0?l.lineNumber!==a.lineNumber?i+=c.columnCount-(l.column-1):i+=c.columnCount-(l.column-a.column):i=c.columnCount,r=l.lineNumber+n}return new rr(e.lineNumber+n,e.column+(e.lineNumber+n===r?i:0))}mapRange(e){function n(a){return a instanceof rr?a:a.getStartPosition()}s(n,"getStart");function r(a){return a instanceof rr?a:a.getEndPosition()}s(r,"getEnd");let i=n(this.mapPosition(e.getStartPosition())),o=r(this.mapPosition(e.getEndPosition()));return _j(i,o)}inverseMapPosition(e,n){return this.inverse(n).mapPosition(e)}inverseMapRange(e,n){return this.inverse(n).mapRange(e)}apply(e){let n="",r=new rr(1,1);for(let o of this.edits){let a=o.range,l=a.getStartPosition(),c=a.getEndPosition(),u=_j(r,l);u.isEmpty()||(n+=e.getValueOfRange(u)),n+=o.text,r=c}let i=_j(r,e.endPositionExclusive);return i.isEmpty()||(n+=e.getValueOfRange(i)),n}applyToString(e){let n=new qde(e);return this.apply(n)}inverse(e){let n=this.getNewRanges();return new t(this.edits.map((r,i)=>new fA(n[i],e.getValueOfRange(r.range))))}getNewRanges(){let e=[],n=0,r=0,i=0;for(let o of this.edits){let a=Ul.ofText(o.text),l=rr.lift({lineNumber:o.range.startLineNumber+r,column:o.range.startColumn+(o.range.startLineNumber===n?i:0)}),c=a.createRange(l);e.push(c),r=c.endLineNumber-o.range.endLineNumber,i=c.endColumn-o.range.endColumn,n=o.range.endLineNumber}return e}toSingle(e){if(this.edits.length===0)throw new dr;if(this.edits.length===1)return this.edits[0];let n=this.edits[0].range.getStartPosition(),r=this.edits[this.edits.length-1].range.getEndPosition(),i="";for(let o=0;o<this.edits.length;o++){let a=this.edits[o];if(i+=a.text,o<this.edits.length-1){let l=this.edits[o+1],c=zt.fromPositions(a.range.getEndPosition(),l.range.getStartPosition()),u=e.getValueOfRange(c);i+=u}}return new fA(zt.fromPositions(n,r),i)}equals(e){return n2(this.edits,e.edits,(n,r)=>n.equals(r))}},fA=class t{constructor(e,n){this.range=e;this.text=n}static{s(this,"SingleTextEdit")}static joinEdits(e,n){if(e.length===0)throw new dr;if(e.length===1)return e[0];let r=e[0].range.getStartPosition(),i=e[e.length-1].range.getEndPosition(),o="";for(let a=0;a<e.length;a++){let l=e[a];if(o+=l.text,a<e.length-1){let c=e[a+1],u=zt.fromPositions(l.range.getEndPosition(),c.range.getStartPosition()),d=n.getValueOfRange(u);o+=d}}return new t(zt.fromPositions(r,i),o)}get isEmpty(){return this.range.isEmpty()&&this.text.length===0}static equals(e,n){return e.range.equalsRange(n.range)&&e.text===n.text}toSingleEditOperation(){return{range:this.range,text:this.text}}toEdit(){return new Ode([this])}equals(e){return t.equals(this,e)}extendToCoverRange(e,n){if(this.range.containsRange(e))return this;let r=this.range.plusRange(e),i=n.getValueOfRange(zt.fromPositions(r.getStartPosition(),this.range.getStartPosition())),o=n.getValueOfRange(zt.fromPositions(this.range.getEndPosition(),r.getEndPosition())),a=i+this.text+o;return new t(r,a)}extendToFullLine(e){let n=new zt(this.range.startLineNumber,1,this.range.endLineNumber,e.getTransformer().getLineLength(this.range.endLineNumber)+1);return this.extendToCoverRange(n,e)}removeCommonPrefix(e){let n=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),r=this.text.replaceAll(`\r
`,`
`),i=vP(n,r),o=Ul.ofText(n.substring(0,i)).addToPosition(this.range.getStartPosition()),a=r.substring(i),l=zt.fromPositions(o,this.range.getEndPosition());return new t(l,a)}isEffectiveDeletion(e){let n=this.text.replaceAll(`\r
`,`
`),r=e.getValueOfRange(this.range).replaceAll(`\r
`,`
`),i=vP(n,r);n=n.substring(i),r=r.substring(i);let o=L5(n,r);return n=n.substring(0,n.length-o),r=r.substring(0,r.length-o),n===""}};function _j(t,e){if(t.lineNumber===e.lineNumber&&t.column===Number.MAX_SAFE_INTEGER)return zt.fromPositions(e,e);if(!t.isBeforeOrEqual(e))throw new dr("start must be before end");return new zt(t.lineNumber,t.column,e.lineNumber,e.column)}s(_j,"rangeFromPositions");var Sj=class{constructor(){this._transformer=void 0}static{s(this,"AbstractText")}get endPositionExclusive(){return this.length.addToPosition(new rr(1,1))}get lineRange(){return this.length.toLineRange()}getValue(){return this.getValueOfRange(this.length.toRange())}getLineLength(e){return this.getValueOfRange(new zt(e,1,e,Number.MAX_SAFE_INTEGER)).length}getTransformer(){return this._transformer||(this._transformer=new uT(this.getValue())),this._transformer}getLineAt(e){return this.getValueOfRange(new zt(e,1,e,Number.MAX_SAFE_INTEGER))}getLines(){let e=this.getValue();return kg(e)}},Ude=class extends Sj{constructor(n,r){Ol(r>=1);super();this._getLineContent=n;this._lineCount=r}static{s(this,"LineBasedText")}getValueOfRange(n){if(n.startLineNumber===n.endLineNumber)return this._getLineContent(n.startLineNumber).substring(n.startColumn-1,n.endColumn-1);let r=this._getLineContent(n.startLineNumber).substring(n.startColumn-1);for(let i=n.startLineNumber+1;i<n.endLineNumber;i++)r+=`
`+this._getLineContent(i);return r+=`
`+this._getLineContent(n.endLineNumber).substring(0,n.endColumn-1),r}getLineLength(n){return this._getLineContent(n).length}get length(){let n=this._getLineContent(this._lineCount);return new Ul(this._lineCount-1,n.length)}},gT=class extends Ude{static{s(this,"ArrayText")}constructor(e){super(n=>e[n-1],e.length)}},qde=class extends Sj{constructor(n){super();this.value=n;this._t=new uT(this.value)}static{s(this,"StringText")}getValueOfRange(n){return this._t.getOffsetRange(n).substring(this.value)}get length(){return this._t.textLength}};f();var ER=class{constructor(e,n,r){this.changes=e;this.moves=n;this.hitTimeout=r}static{s(this,"LinesDiff")}},IR=class t{static{s(this,"MovedText")}constructor(e,n){this.lineRangeMapping=e,this.changes=n}flip(){return new t(this.lineRangeMapping.flip(),this.changes.map(e=>e.flip()))}};f();var vp=class t{static{s(this,"LineRangeMapping")}static inverse(e,n,r){let i=[],o=1,a=1;for(let c of e){let u=new t(new Yt(o,c.original.startLineNumber),new Yt(a,c.modified.startLineNumber));u.modified.isEmpty||i.push(u),o=c.original.endLineNumberExclusive,a=c.modified.endLineNumberExclusive}let l=new t(new Yt(o,n+1),new Yt(a,r+1));return l.modified.isEmpty||i.push(l),i}static clip(e,n,r){let i=[];for(let o of e){let a=o.original.intersect(n),l=o.modified.intersect(r);a&&!a.isEmpty&&l&&!l.isEmpty&&i.push(new t(a,l))}return i}constructor(e,n){this.original=e,this.modified=n}toString(){return`{${this.original.toString()}->${this.modified.toString()}}`}flip(){return new t(this.modified,this.original)}join(e){return new t(this.original.join(e.original),this.modified.join(e.modified))}get changedLineCount(){return Math.max(this.original.length,this.modified.length)}toRangeMapping(){let e=this.original.toInclusiveRange(),n=this.modified.toInclusiveRange();if(e&&n)return new Od(e,n);if(this.original.startLineNumber===1||this.modified.startLineNumber===1){if(!(this.modified.startLineNumber===1&&this.original.startLineNumber===1))throw new dr("not a valid diff");return new Od(new zt(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new zt(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1))}else return new Od(new zt(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),new zt(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER,this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER))}toRangeMapping2(e,n){if(sOe(this.original.endLineNumberExclusive,e)&&sOe(this.modified.endLineNumberExclusive,n))return new Od(new zt(this.original.startLineNumber,1,this.original.endLineNumberExclusive,1),new zt(this.modified.startLineNumber,1,this.modified.endLineNumberExclusive,1));if(!this.original.isEmpty&&!this.modified.isEmpty)return new Od(zt.fromPositions(new rr(this.original.startLineNumber,1),TR(new rr(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),zt.fromPositions(new rr(this.modified.startLineNumber,1),TR(new rr(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),n)));if(this.original.startLineNumber>1&&this.modified.startLineNumber>1)return new Od(zt.fromPositions(TR(new rr(this.original.startLineNumber-1,Number.MAX_SAFE_INTEGER),e),TR(new rr(this.original.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),e)),zt.fromPositions(TR(new rr(this.modified.startLineNumber-1,Number.MAX_SAFE_INTEGER),n),TR(new rr(this.modified.endLineNumberExclusive-1,Number.MAX_SAFE_INTEGER),n)));throw new dr}};function TR(t,e){if(t.lineNumber<1)return new rr(1,1);if(t.lineNumber>e.length)return new rr(e.length,e[e.length-1].length+1);let n=e[t.lineNumber-1];return t.column>n.length+1?new rr(t.lineNumber,n.length+1):t}s(TR,"normalizePosition");function sOe(t,e){return t>=1&&t<=e.length}s(sOe,"isValidLineNumber");var Ib=class t extends vp{static{s(this,"DetailedLineRangeMapping")}static fromRangeMappings(e){let n=Yt.join(e.map(i=>Yt.fromRangeInclusive(i.originalRange))),r=Yt.join(e.map(i=>Yt.fromRangeInclusive(i.modifiedRange)));return new t(n,r,e)}constructor(e,n,r){super(e,n),this.innerChanges=r}flip(){return new t(this.modified,this.original,this.innerChanges?.map(e=>e.flip()))}withInnerChangesFromLineRanges(){return new t(this.original,this.modified,[this.toRangeMapping()])}},Od=class t{static{s(this,"RangeMapping")}static fromEdit(e){let n=e.getNewRanges();return e.edits.map((i,o)=>new t(i.range,n[o]))}static fromEditJoin(e){let n=e.getNewRanges(),r=e.edits.map((i,o)=>new t(i.range,n[o]));return t.join(r)}static join(e){if(e.length===0)throw new dr("Cannot join an empty list of range mappings");let n=e[0];for(let r=1;r<e.length;r++)n=n.join(e[r]);return n}static assertSorted(e){for(let n=1;n<e.length;n++){let r=e[n-1],i=e[n];if(!(r.originalRange.getEndPosition().isBeforeOrEqual(i.originalRange.getStartPosition())&&r.modifiedRange.getEndPosition().isBeforeOrEqual(i.modifiedRange.getStartPosition())))throw new dr("Range mappings must be sorted")}}constructor(e,n){this.originalRange=e,this.modifiedRange=n}toString(){return`{${this.originalRange.toString()}->${this.modifiedRange.toString()}}`}flip(){return new t(this.modifiedRange,this.originalRange)}toTextEdit(e){let n=e.getValueOfRange(this.modifiedRange);return new fA(this.originalRange,n)}join(e){return new t(this.originalRange.plusRange(e.originalRange),this.modifiedRange.plusRange(e.modifiedRange))}};function Wde(t,e,n,r=!1){let i=[];for(let o of o5(t.map(a=>cPt(a,e,n)),(a,l)=>a.original.overlapOrTouch(l.original)||a.modified.overlapOrTouch(l.modified))){let a=o[0],l=o[o.length-1];i.push(new Ib(a.original.join(l.original),a.modified.join(l.modified),o.map(c=>c.innerChanges[0])))}return Nu(()=>!r&&i.length>0&&(i[0].modified.startLineNumber!==i[0].original.startLineNumber||n.length.lineCount-i[i.length-1].modified.endLineNumberExclusive!==e.length.lineCount-i[i.length-1].original.endLineNumberExclusive)?!1:yv(i,(o,a)=>a.original.startLineNumber-o.original.endLineNumberExclusive===a.modified.startLineNumber-o.modified.endLineNumberExclusive&&o.original.endLineNumberExclusive<a.original.startLineNumber&&o.modified.endLineNumberExclusive<a.modified.startLineNumber)),i}s(Wde,"lineRangeMappingFromRangeMappings");function cPt(t,e,n){let r=0,i=0;t.modifiedRange.endColumn===1&&t.originalRange.endColumn===1&&t.originalRange.startLineNumber+r<=t.originalRange.endLineNumber&&t.modifiedRange.startLineNumber+r<=t.modifiedRange.endLineNumber&&(i=-1),t.modifiedRange.startColumn-1>=n.getLineLength(t.modifiedRange.startLineNumber)&&t.originalRange.startColumn-1>=e.getLineLength(t.originalRange.startLineNumber)&&t.originalRange.startLineNumber<=t.originalRange.endLineNumber+i&&t.modifiedRange.startLineNumber<=t.modifiedRange.endLineNumber+i&&(r=1);let o=new Yt(t.originalRange.startLineNumber+r,t.originalRange.endLineNumber+1+i),a=new Yt(t.modifiedRange.startLineNumber+r,t.modifiedRange.endLineNumber+1+i);return new Ib(o,a,[t])}s(cPt,"getLineRangeMapping");f();var mA=class t{constructor(e,n){this.diffs=e;this.hitTimeout=n}static{s(this,"DiffAlgorithmResult")}static trivial(e,n){return new t([new Yo(Rt.ofLength(e.length),Rt.ofLength(n.length))],!1)}static trivialTimedOut(e,n){return new t([new Yo(Rt.ofLength(e.length),Rt.ofLength(n.length))],!0)}},Yo=class t{constructor(e,n){this.seq1Range=e;this.seq2Range=n}static{s(this,"SequenceDiff")}static invert(e,n){let r=[];return sSe(e,(i,o)=>{r.push(t.fromOffsetPairs(i?i.getEndExclusives():pA.zero,o?o.getStarts():new pA(n,(i?i.seq2Range.endExclusive-i.seq1Range.endExclusive:0)+n)))}),r}static fromOffsetPairs(e,n){return new t(new Rt(e.offset1,n.offset1),new Rt(e.offset2,n.offset2))}static assertSorted(e){let n;for(let r of e){if(n&&!(n.seq1Range.endExclusive<=r.seq1Range.start&&n.seq2Range.endExclusive<=r.seq2Range.start))throw new dr("Sequence diffs must be sorted");n=r}}swap(){return new t(this.seq2Range,this.seq1Range)}toString(){return`${this.seq1Range} <-> ${this.seq2Range}`}join(e){return new t(this.seq1Range.join(e.seq1Range),this.seq2Range.join(e.seq2Range))}delta(e){return e===0?this:new t(this.seq1Range.delta(e),this.seq2Range.delta(e))}deltaStart(e){return e===0?this:new t(this.seq1Range.deltaStart(e),this.seq2Range.deltaStart(e))}deltaEnd(e){return e===0?this:new t(this.seq1Range.deltaEnd(e),this.seq2Range.deltaEnd(e))}intersectsOrTouches(e){return this.seq1Range.intersectsOrTouches(e.seq1Range)||this.seq2Range.intersectsOrTouches(e.seq2Range)}intersect(e){let n=this.seq1Range.intersect(e.seq1Range),r=this.seq2Range.intersect(e.seq2Range);if(!(!n||!r))return new t(n,r)}getStarts(){return new pA(this.seq1Range.start,this.seq2Range.start)}getEndExclusives(){return new pA(this.seq1Range.endExclusive,this.seq2Range.endExclusive)}},pA=class t{constructor(e,n){this.offset1=e;this.offset2=n}static{s(this,"OffsetPair")}static{this.zero=new t(0,0)}static{this.max=new t(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER)}toString(){return`${this.offset1} <-> ${this.offset2}`}delta(e){return e===0?this:new t(this.offset1+e,this.offset2+e)}equals(e){return this.offset1===e.offset1&&this.offset2===e.offset2}},Tb=class t{static{s(this,"InfiniteTimeout")}static{this.instance=new t}isValid(){return!0}},Rj=class{constructor(e){this.timeout=e;this.startTime=Date.now();this.valid=!0;if(e<=0)throw new dr("timeout must be positive")}static{s(this,"DateTimeout")}isValid(){return!(Date.now()-this.startTime<this.timeout)&&this.valid&&(this.valid=!1),this.valid}disable(){this.timeout=Number.MAX_SAFE_INTEGER,this.isValid=()=>!0,this.valid=!0}};f();f();var wR=class{constructor(e,n){this.width=e;this.height=n;this.array=[];this.array=new Array(e*n)}static{s(this,"Array2D")}get(e,n){return this.array[e+n*this.width]}set(e,n,r){this.array[e+n*this.width]=r}};function k9(t){return t===32||t===9}s(k9,"isSpace");var R9=class t{constructor(e,n,r){this.range=e;this.lines=n;this.source=r;this.histogram=[];let i=0;for(let o=e.startLineNumber-1;o<e.endLineNumberExclusive-1;o++){let a=n[o];for(let c=0;c<a.length;c++){i++;let u=a[c],d=t.getKey(u);this.histogram[d]=(this.histogram[d]||0)+1}i++;let l=t.getKey(`
`);this.histogram[l]=(this.histogram[l]||0)+1}this.totalCount=i}static{s(this,"LineRangeFragment")}static{this.chrKeys=new Map}static getKey(e){let n=this.chrKeys.get(e);return n===void 0&&(n=this.chrKeys.size,this.chrKeys.set(e,n)),n}computeSimilarity(e){let n=0,r=Math.max(this.histogram.length,e.histogram.length);for(let i=0;i<r;i++)n+=Math.abs((this.histogram[i]??0)-(e.histogram[i]??0));return 1-n/(this.totalCount+e.totalCount)}};var kj=class{static{s(this,"DynamicProgrammingDiffing")}compute(e,n,r=Tb.instance,i){if(e.length===0||n.length===0)return mA.trivial(e,n);let o=new wR(e.length,n.length),a=new wR(e.length,n.length),l=new wR(e.length,n.length);for(let g=0;g<e.length;g++)for(let y=0;y<n.length;y++){if(!r.isValid())return mA.trivialTimedOut(e,n);let v=g===0?0:o.get(g-1,y),b=y===0?0:o.get(g,y-1),E;e.getElement(g)===n.getElement(y)?(g===0||y===0?E=0:E=o.get(g-1,y-1),g>0&&y>0&&a.get(g-1,y-1)===3&&(E+=l.get(g-1,y-1)),E+=i?i(g,y):1):E=-1;let _=Math.max(v,b,E);if(_===E){let k=g>0&&y>0?l.get(g-1,y-1):0;l.set(g,y,k+1),a.set(g,y,3)}else _===v?(l.set(g,y,0),a.set(g,y,1)):_===b&&(l.set(g,y,0),a.set(g,y,2));o.set(g,y,_)}let c=[],u=e.length,d=n.length;function p(g,y){(g+1!==u||y+1!==d)&&c.push(new Yo(new Rt(g+1,u),new Rt(y+1,d))),u=g,d=y}s(p,"reportDecreasingAligningPositions");let m=e.length-1,h=n.length-1;for(;m>=0&&h>=0;)a.get(m,h)===3?(p(m,h),m--,h--):a.get(m,h)===1?m--:h--;return p(-1,-1),c.reverse(),new mA(c,!1)}};f();var _R=class{static{s(this,"MyersDiffAlgorithm")}compute(e,n,r=Tb.instance){if(e.length===0||n.length===0)return mA.trivial(e,n);let i=e,o=n;function a(y,v){for(;y<i.length&&v<o.length&&i.getElement(y)===o.getElement(v);)y++,v++;return y}s(a,"getXAfterSnake");let l=0,c=new Hde;c.set(0,a(0,0));let u=new Gde;u.set(0,c.get(0)===0?null:new Bj(null,0,0,c.get(0)));let d=0;e:for(;;){if(l++,!r.isValid())return mA.trivialTimedOut(i,o);let y=-Math.min(l,o.length+l%2),v=Math.min(l,i.length+l%2);for(d=y;d<=v;d+=2){let b=0,E=d===v?-1:c.get(d+1),_=d===y?-1:c.get(d-1)+1;b++;let k=Math.min(Math.max(E,_),i.length),P=k-d;if(b++,k>i.length||P>o.length)continue;let N=a(k,P);c.set(d,N);let U=k===E?u.get(d+1):u.get(d-1);if(u.set(d,N!==k?new Bj(U,k,P,N-k):U),c.get(d)===i.length&&c.get(d)-d===o.length)break e}}let p=u.get(d),m=[],h=i.length,g=o.length;for(;;){let y=p?p.x+p.length:0,v=p?p.y+p.length:0;if((y!==h||v!==g)&&m.push(new Yo(new Rt(y,h),new Rt(v,g))),!p)break;h=p.x,g=p.y,p=p.prev}return m.reverse(),new mA(m,!1)}},Bj=class{constructor(e,n,r,i){this.prev=e;this.x=n;this.y=r;this.length=i}static{s(this,"SnakePath")}},Hde=class{constructor(){this.positiveArr=new Int32Array(10);this.negativeArr=new Int32Array(10)}static{s(this,"FastInt32Array")}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,n){if(e<0){if(e=-e-1,e>=this.negativeArr.length){let r=this.negativeArr;this.negativeArr=new Int32Array(r.length*2),this.negativeArr.set(r)}this.negativeArr[e]=n}else{if(e>=this.positiveArr.length){let r=this.positiveArr;this.positiveArr=new Int32Array(r.length*2),this.positiveArr.set(r)}this.positiveArr[e]=n}}},Gde=class{constructor(){this.positiveArr=[];this.negativeArr=[]}static{s(this,"FastArrayNegativeIndices")}get(e){return e<0?(e=-e-1,this.negativeArr[e]):this.positiveArr[e]}set(e,n){e<0?(e=-e-1,this.negativeArr[e]=n):this.positiveArr[e]=n}};f();f();var wb=class{constructor(e,n,r){this.lines=e;this.range=n;this.considerWhitespaceChanges=r;this.elements=[];this.firstElementOffsetByLineIdx=[];this.lineStartOffsets=[];this.trimmedWsLengthsByLineIdx=[];this.firstElementOffsetByLineIdx.push(0);for(let i=this.range.startLineNumber;i<=this.range.endLineNumber;i++){let o=e[i-1],a=0;i===this.range.startLineNumber&&this.range.startColumn>1&&(a=this.range.startColumn-1,o=o.substring(a)),this.lineStartOffsets.push(a);let l=0;if(!r){let u=o.trimStart();l=o.length-u.length,o=u.trimEnd()}this.trimmedWsLengthsByLineIdx.push(l);let c=i===this.range.endLineNumber?Math.min(this.range.endColumn-1-a-l,o.length):o.length;for(let u=0;u<c;u++)this.elements.push(o.charCodeAt(u));i<this.range.endLineNumber&&(this.elements.push(10),this.firstElementOffsetByLineIdx.push(this.elements.length))}}static{s(this,"LinesSliceCharSequence")}toString(){return`Slice: "${this.text}"`}get text(){return this.getText(new Rt(0,this.length))}getText(e){return this.elements.slice(e.start,e.endExclusive).map(n=>String.fromCharCode(n)).join("")}getElement(e){return this.elements[e]}get length(){return this.elements.length}getBoundaryScore(e){let n=cOe(e>0?this.elements[e-1]:-1),r=cOe(e<this.elements.length?this.elements[e]:-1);if(n===7&&r===8)return 0;if(n===8)return 150;let i=0;return n!==r&&(i+=10,n===0&&r===1&&(i+=1)),i+=lOe(n),i+=lOe(r),i}translateOffset(e,n="right"){let r=T0(this.firstElementOffsetByLineIdx,o=>o<=e),i=e-this.firstElementOffsetByLineIdx[r];return new rr(this.range.startLineNumber+r,1+this.lineStartOffsets[r]+i+(i===0&&n==="left"?0:this.trimmedWsLengthsByLineIdx[r]))}translateRange(e){let n=this.translateOffset(e.start,"right"),r=this.translateOffset(e.endExclusive,"left");return r.isBefore(n)?zt.fromPositions(r,r):zt.fromPositions(n,r)}findWordContaining(e){if(e<0||e>=this.elements.length||!SR(this.elements[e]))return;let n=e;for(;n>0&&SR(this.elements[n-1]);)n--;let r=e;for(;r<this.elements.length&&SR(this.elements[r]);)r++;return new Rt(n,r)}findSubWordContaining(e){if(e<0||e>=this.elements.length||!SR(this.elements[e]))return;let n=e;for(;n>0&&SR(this.elements[n-1])&&!aOe(this.elements[n]);)n--;let r=e;for(;r<this.elements.length&&SR(this.elements[r])&&!aOe(this.elements[r]);)r++;return new Rt(n,r)}countLinesIn(e){return this.translateOffset(e.endExclusive).lineNumber-this.translateOffset(e.start).lineNumber}isStronglyEqual(e,n){return this.elements[e]===this.elements[n]}extendToFullLines(e){let n=F1(this.firstElementOffsetByLineIdx,i=>i<=e.start)??0,r=nSe(this.firstElementOffsetByLineIdx,i=>e.endExclusive<=i)??this.elements.length;return new Rt(n,r)}};function SR(t){return t>=97&&t<=122||t>=65&&t<=90||t>=48&&t<=57}s(SR,"isWordChar");function aOe(t){return t>=65&&t<=90}s(aOe,"isUpperCase");var uPt={0:0,1:0,2:0,3:10,4:2,5:30,6:3,7:10,8:10};function lOe(t){return uPt[t]}s(lOe,"getCategoryBoundaryScore");function cOe(t){return t===10?8:t===13?7:k9(t)?6:t>=97&&t<=122?0:t>=65&&t<=90?1:t>=48&&t<=57?2:t===-1?3:t===44||t===59?5:4}s(cOe,"getCategory");function dOe(t,e,n,r,i,o){let{moves:a,excludedChanges:l}=fPt(t,e,n,o);if(!o.isValid())return[];let c=t.filter(d=>!l.has(d)),u=pPt(c,r,i,e,n,o);return cSe(a,u),a=mPt(a),a=a.filter(d=>{let p=d.original.toOffsetRange().slice(e).map(h=>h.trim());return p.join(`
`).length>=15&&dPt(p,h=>h.length>=2)>=2}),a=hPt(t,a),a}s(dOe,"computeMovedLines");function dPt(t,e){let n=0;for(let r of t)e(r)&&n++;return n}s(dPt,"countWhere");function fPt(t,e,n,r){let i=[],o=t.filter(c=>c.modified.isEmpty&&c.original.length>=3).map(c=>new R9(c.original,e,c)),a=new Set(t.filter(c=>c.original.isEmpty&&c.modified.length>=3).map(c=>new R9(c.modified,n,c))),l=new Set;for(let c of o){let u=-1,d;for(let p of a){let m=c.computeSimilarity(p);m>u&&(u=m,d=p)}if(u>.9&&d&&(a.delete(d),i.push(new vp(c.range,d.range)),l.add(c.source),l.add(d.source)),!r.isValid())return{moves:i,excludedChanges:l}}return{moves:i,excludedChanges:l}}s(fPt,"computeMovesFromSimpleDeletionsToSimpleInsertions");function pPt(t,e,n,r,i,o){let a=[],l=new s5;for(let m of t)for(let h=m.original.startLineNumber;h<m.original.endLineNumberExclusive-2;h++){let g=`${e[h-1]}:${e[h+1-1]}:${e[h+2-1]}`;l.add(g,{range:new Yt(h,h+3)})}let c=[];t.sort(w0(m=>m.modified.startLineNumber,_0));for(let m of t){let h=[];for(let g=m.modified.startLineNumber;g<m.modified.endLineNumberExclusive-2;g++){let y=`${n[g-1]}:${n[g+1-1]}:${n[g+2-1]}`,v=new Yt(g,g+3),b=[];l.forEach(y,({range:E})=>{for(let k of h)if(k.originalLineRange.endLineNumberExclusive+1===E.endLineNumberExclusive&&k.modifiedLineRange.endLineNumberExclusive+1===v.endLineNumberExclusive){k.originalLineRange=new Yt(k.originalLineRange.startLineNumber,E.endLineNumberExclusive),k.modifiedLineRange=new Yt(k.modifiedLineRange.startLineNumber,v.endLineNumberExclusive),b.push(k);return}let _={modifiedLineRange:v,originalLineRange:E};c.push(_),b.push(_)}),h=b}if(!o.isValid())return[]}c.sort(dSe(w0(m=>m.modifiedLineRange.length,_0)));let u=new m2,d=new m2;for(let m of c){let h=m.modifiedLineRange.startLineNumber-m.originalLineRange.startLineNumber,g=u.subtractFrom(m.modifiedLineRange),y=d.subtractFrom(m.originalLineRange).getWithDelta(h),v=g.getIntersection(y);for(let b of v.ranges){if(b.length<3)continue;let E=b,_=b.delta(-h);a.push(new vp(_,E)),u.addRange(E),d.addRange(_)}}a.sort(w0(m=>m.original.startLineNumber,_0));let p=new Y8(t);for(let m=0;m<a.length;m++){let h=a[m],g=p.findLastMonotonous(N=>N.original.startLineNumber<=h.original.startLineNumber),y=F1(t,N=>N.modified.startLineNumber<=h.modified.startLineNumber),v=Math.max(h.original.startLineNumber-g.original.startLineNumber,h.modified.startLineNumber-y.modified.startLineNumber),b=p.findLastMonotonous(N=>N.original.startLineNumber<h.original.endLineNumberExclusive),E=F1(t,N=>N.modified.startLineNumber<h.modified.endLineNumberExclusive),_=Math.max(b.original.endLineNumberExclusive-h.original.endLineNumberExclusive,E.modified.endLineNumberExclusive-h.modified.endLineNumberExclusive),k;for(k=0;k<v;k++){let N=h.original.startLineNumber-k-1,U=h.modified.startLineNumber-k-1;if(N>r.length||U>i.length||u.contains(U)||d.contains(N)||!uOe(r[N-1],i[U-1],o))break}k>0&&(d.addRange(new Yt(h.original.startLineNumber-k,h.original.startLineNumber)),u.addRange(new Yt(h.modified.startLineNumber-k,h.modified.startLineNumber)));let P;for(P=0;P<_;P++){let N=h.original.endLineNumberExclusive+P,U=h.modified.endLineNumberExclusive+P;if(N>r.length||U>i.length||u.contains(U)||d.contains(N)||!uOe(r[N-1],i[U-1],o))break}P>0&&(d.addRange(new Yt(h.original.endLineNumberExclusive,h.original.endLineNumberExclusive+P)),u.addRange(new Yt(h.modified.endLineNumberExclusive,h.modified.endLineNumberExclusive+P))),(k>0||P>0)&&(a[m]=new vp(new Yt(h.original.startLineNumber-k,h.original.endLineNumberExclusive+P),new Yt(h.modified.startLineNumber-k,h.modified.endLineNumberExclusive+P)))}return a}s(pPt,"computeUnchangedMoves");function uOe(t,e,n){if(t.trim()===e.trim())return!0;if(t.length>300&&e.length>300)return!1;let i=new _R().compute(new wb([t],new zt(1,1,1,t.length),!1),new wb([e],new zt(1,1,1,e.length),!1),n),o=0,a=Yo.invert(i.diffs,t.length);for(let d of a)d.seq1Range.forEach(p=>{k9(t.charCodeAt(p))||o++});function l(d){let p=0;for(let m=0;m<t.length;m++)k9(d.charCodeAt(m))||p++;return p}s(l,"countNonWsChars");let c=l(t.length>e.length?t:e);return o/c>.6&&c>10}s(uOe,"areLinesSimilar");function mPt(t){if(t.length===0)return t;t.sort(w0(n=>n.original.startLineNumber,_0));let e=[t[0]];for(let n=1;n<t.length;n++){let r=e[e.length-1],i=t[n],o=i.original.startLineNumber-r.original.endLineNumberExclusive,a=i.modified.startLineNumber-r.modified.endLineNumberExclusive;if(o>=0&&a>=0&&o+a<=2){e[e.length-1]=r.join(i);continue}e.push(i)}return e}s(mPt,"joinCloseConsecutiveMoves");function hPt(t,e){let n=new Y8(t);return e=e.filter(r=>{let i=n.findLastMonotonous(l=>l.original.startLineNumber<r.original.endLineNumberExclusive)||new vp(new Yt(1,1),new Yt(1,1)),o=F1(t,l=>l.modified.startLineNumber<r.modified.endLineNumberExclusive);return i!==o}),e}s(hPt,"removeMovesInSameDiff");f();function jde(t,e,n){let r=n;return r=fOe(t,e,r),r=fOe(t,e,r),r=gPt(t,e,r),r}s(jde,"optimizeSequenceDiffs");function fOe(t,e,n){if(n.length===0)return n;let r=[];r.push(n[0]);for(let o=1;o<n.length;o++){let a=r[r.length-1],l=n[o];if(l.seq1Range.isEmpty||l.seq2Range.isEmpty){let c=l.seq1Range.start-a.seq1Range.endExclusive,u;for(u=1;u<=c&&!(t.getElement(l.seq1Range.start-u)!==t.getElement(l.seq1Range.endExclusive-u)||e.getElement(l.seq2Range.start-u)!==e.getElement(l.seq2Range.endExclusive-u));u++);if(u--,u===c){r[r.length-1]=new Yo(new Rt(a.seq1Range.start,l.seq1Range.endExclusive-c),new Rt(a.seq2Range.start,l.seq2Range.endExclusive-c));continue}l=l.delta(-u)}r.push(l)}let i=[];for(let o=0;o<r.length-1;o++){let a=r[o+1],l=r[o];if(l.seq1Range.isEmpty||l.seq2Range.isEmpty){let c=a.seq1Range.start-l.seq1Range.endExclusive,u;for(u=0;u<c&&!(!t.isStronglyEqual(l.seq1Range.start+u,l.seq1Range.endExclusive+u)||!e.isStronglyEqual(l.seq2Range.start+u,l.seq2Range.endExclusive+u));u++);if(u===c){r[o+1]=new Yo(new Rt(l.seq1Range.start+c,a.seq1Range.endExclusive),new Rt(l.seq2Range.start+c,a.seq2Range.endExclusive));continue}u>0&&(l=l.delta(u))}i.push(l)}return r.length>0&&i.push(r[r.length-1]),i}s(fOe,"joinSequenceDiffsByShifting");function gPt(t,e,n){if(!t.getBoundaryScore||!e.getBoundaryScore)return n;for(let r=0;r<n.length;r++){let i=r>0?n[r-1]:void 0,o=n[r],a=r+1<n.length?n[r+1]:void 0,l=new Rt(i?i.seq1Range.endExclusive+1:0,a?a.seq1Range.start-1:t.length),c=new Rt(i?i.seq2Range.endExclusive+1:0,a?a.seq2Range.start-1:e.length);o.seq1Range.isEmpty?n[r]=pOe(o,t,e,l,c):o.seq2Range.isEmpty&&(n[r]=pOe(o.swap(),e,t,c,l).swap())}return n}s(gPt,"shiftSequenceDiffs");function pOe(t,e,n,r,i){let a=1;for(;t.seq1Range.start-a>=r.start&&t.seq2Range.start-a>=i.start&&n.isStronglyEqual(t.seq2Range.start-a,t.seq2Range.endExclusive-a)&&a<100;)a++;a--;let l=0;for(;t.seq1Range.start+l<r.endExclusive&&t.seq2Range.endExclusive+l<i.endExclusive&&n.isStronglyEqual(t.seq2Range.start+l,t.seq2Range.endExclusive+l)&&l<100;)l++;if(a===0&&l===0)return t;let c=0,u=-1;for(let d=-a;d<=l;d++){let p=t.seq2Range.start+d,m=t.seq2Range.endExclusive+d,h=t.seq1Range.start+d,g=e.getBoundaryScore(h)+n.getBoundaryScore(p)+n.getBoundaryScore(m);g>u&&(u=g,c=d)}return t.delta(c)}s(pOe,"shiftDiffToBetterPosition");function mOe(t,e,n){let r=[];for(let i of n){let o=r[r.length-1];if(!o){r.push(i);continue}i.seq1Range.start-o.seq1Range.endExclusive<=2||i.seq2Range.start-o.seq2Range.endExclusive<=2?r[r.length-1]=new Yo(o.seq1Range.join(i.seq1Range),o.seq2Range.join(i.seq2Range)):r.push(i)}return r}s(mOe,"removeShortMatches");function Vde(t,e,n,r,i=!1){let o=Yo.invert(n,t.length),a=[],l=new pA(0,0);function c(d,p){if(d.offset1<l.offset1||d.offset2<l.offset2)return;let m=r(t,d.offset1),h=r(e,d.offset2);if(!m||!h)return;let g=new Yo(m,h),y=g.intersect(p),v=y.seq1Range.length,b=y.seq2Range.length;for(;o.length>0;){let E=o[0];if(!(E.seq1Range.intersects(g.seq1Range)||E.seq2Range.intersects(g.seq2Range)))break;let k=r(t,E.seq1Range.start),P=r(e,E.seq2Range.start),N=new Yo(k,P),U=N.intersect(E);if(v+=U.seq1Range.length,b+=U.seq2Range.length,g=g.join(N),g.seq1Range.endExclusive>=E.seq1Range.endExclusive)o.shift();else break}(i&&v+b<g.seq1Range.length+g.seq2Range.length||v+b<(g.seq1Range.length+g.seq2Range.length)*2/3)&&a.push(g),l=g.getEndExclusives()}for(s(c,"scanWord");o.length>0;){let d=o.shift();d.seq1Range.isEmpty||(c(d.getStarts(),d),c(d.getEndExclusives().delta(-1),d))}return APt(n,a)}s(Vde,"extendDiffsToEntireWordIfAppropriate");function APt(t,e){let n=[];for(;t.length>0||e.length>0;){let r=t[0],i=e[0],o;r&&(!i||r.seq1Range.start<i.seq1Range.start)?o=t.shift():o=e.shift(),n.length>0&&n[n.length-1].seq1Range.endExclusive>=o.seq1Range.start?n[n.length-1]=n[n.length-1].join(o):n.push(o)}return n}s(APt,"mergeSequenceDiffs");function hOe(t,e,n){let r=n;if(r.length===0)return r;let i=0,o;do{o=!1;let l=[r[0]];for(let c=1;c<r.length;c++){let p=function(h,g){let y=new Rt(d.seq1Range.endExclusive,u.seq1Range.start);return t.getText(y).replace(/\s/g,"").length<=4&&(h.seq1Range.length+h.seq2Range.length>5||g.seq1Range.length+g.seq2Range.length>5)};var a=p;s(p,"shouldJoinDiffs");let u=r[c],d=l[l.length-1];p(d,u)?(o=!0,l[l.length-1]=l[l.length-1].join(u)):l.push(u)}r=l}while(i++<10&&o);return r}s(hOe,"removeVeryShortMatchingLinesBetweenDiffs");function gOe(t,e,n){let r=n;if(r.length===0)return r;let i=0,o;do{o=!1;let c=[r[0]];for(let u=1;u<r.length;u++){let m=function(g,y){let v=new Rt(p.seq1Range.endExclusive,d.seq1Range.start);if(t.countLinesIn(v)>5||v.length>500)return!1;let E=t.getText(v).trim();if(E.length>20||E.split(/\r\n|\r|\n/).length>1)return!1;let _=t.countLinesIn(g.seq1Range),k=g.seq1Range.length,P=e.countLinesIn(g.seq2Range),N=g.seq2Range.length,U=t.countLinesIn(y.seq1Range),ne=y.seq1Range.length,he=e.countLinesIn(y.seq2Range),ae=y.seq2Range.length,G=2*40+50;function W(ue){return Math.min(ue,G)}return s(W,"cap"),Math.pow(Math.pow(W(_*40+k),1.5)+Math.pow(W(P*40+N),1.5),1.5)+Math.pow(Math.pow(W(U*40+ne),1.5)+Math.pow(W(he*40+ae),1.5),1.5)>(G**1.5)**1.5*1.3};var l=m;s(m,"shouldJoinDiffs");let d=r[u],p=c[c.length-1];m(p,d)?(o=!0,c[c.length-1]=c[c.length-1].join(d)):c.push(d)}r=c}while(i++<10&&o);let a=[];return aSe(r,(c,u,d)=>{let p=u;function m(E){return E.length>0&&E.trim().length<=3&&u.seq1Range.length+u.seq2Range.length>100}s(m,"shouldMarkAsChanged");let h=t.extendToFullLines(u.seq1Range),g=t.getText(new Rt(h.start,u.seq1Range.start));m(g)&&(p=p.deltaStart(-g.length));let y=t.getText(new Rt(u.seq1Range.endExclusive,h.endExclusive));m(y)&&(p=p.deltaEnd(y.length));let v=Yo.fromOffsetPairs(c?c.getEndExclusives():pA.zero,d?d.getStarts():pA.max),b=p.intersect(v);a.length>0&&b.getStarts().equals(a[a.length-1].getEndExclusives())?a[a.length-1]=a[a.length-1].join(b):a.push(b)}),a}s(gOe,"removeVeryShortMatchingTextBetweenLongDiffs");f();var B9=class{constructor(e,n){this.trimmedHash=e;this.lines=n}static{s(this,"LineSequence")}getElement(e){return this.trimmedHash[e]}get length(){return this.trimmedHash.length}getBoundaryScore(e){let n=e===0?0:AOe(this.lines[e-1]),r=e===this.lines.length?0:AOe(this.lines[e]);return 1e3-(n+r)}getText(e){return this.lines.slice(e.start,e.endExclusive).join(`
`)}isStronglyEqual(e,n){return this.lines[e]===this.lines[n]}};function AOe(t){let e=0;for(;e<t.length&&(t.charCodeAt(e)===32||t.charCodeAt(e)===9);)e++;return e}s(AOe,"getIndentation");var Pj=class{constructor(){this.dynamicProgrammingDiffing=new kj;this.myersDiffingAlgorithm=new _R}static{s(this,"DefaultLinesDiffComputer")}computeDiff(e,n,r){if(e.length<=1&&n2(e,n,(P,N)=>P===N))return new ER([],[],!1);if(e.length===1&&e[0].length===0||n.length===1&&n[0].length===0)return new ER([new Ib(new Yt(1,e.length+1),new Yt(1,n.length+1),[new Od(new zt(1,1,e.length,e[e.length-1].length+1),new zt(1,1,n.length,n[n.length-1].length+1))])],[],!1);let i=r.maxComputationTimeMs===0?Tb.instance:new Rj(r.maxComputationTimeMs),o=!r.ignoreTrimWhitespace,a=new Map;function l(P){let N=a.get(P);return N===void 0&&(N=a.size,a.set(P,N)),N}s(l,"getOrCreateHash");let c=e.map(P=>l(P.trim())),u=n.map(P=>l(P.trim())),d=new B9(c,e),p=new B9(u,n),m=d.length+p.length<1700?this.dynamicProgrammingDiffing.compute(d,p,i,(P,N)=>e[P]===n[N]?n[N].length===0?.1:1+Math.log(1+n[N].length):.99):this.myersDiffingAlgorithm.compute(d,p,i),h=m.diffs,g=m.hitTimeout;h=jde(d,p,h),h=hOe(d,p,h);let y=[],v=s(P=>{if(o)for(let N=0;N<P;N++){let U=b+N,ne=E+N;if(e[U]!==n[ne]){let he=this.refineDiff(e,n,new Yo(new Rt(U,U+1),new Rt(ne,ne+1)),i,o,r);for(let ae of he.mappings)y.push(ae);he.hitTimeout&&(g=!0)}}},"scanForWhitespaceChanges"),b=0,E=0;for(let P of h){Nu(()=>P.seq1Range.start-b===P.seq2Range.start-E);let N=P.seq1Range.start-b;v(N),b=P.seq1Range.endExclusive,E=P.seq2Range.endExclusive;let U=this.refineDiff(e,n,P,i,o,r);U.hitTimeout&&(g=!0);for(let ne of U.mappings)y.push(ne)}v(e.length-b);let _=Wde(y,new gT(e),new gT(n)),k=[];return r.computeMoves&&(k=this.computeMoves(_,e,n,c,u,i,o,r)),Nu(()=>{function P(U,ne){if(U.lineNumber<1||U.lineNumber>ne.length)return!1;let he=ne[U.lineNumber-1];return!(U.column<1||U.column>he.length+1)}s(P,"validatePosition");function N(U,ne){return!(U.startLineNumber<1||U.startLineNumber>ne.length+1||U.endLineNumberExclusive<1||U.endLineNumberExclusive>ne.length+1)}s(N,"validateRange");for(let U of _){if(!U.innerChanges)return!1;for(let ne of U.innerChanges)if(!(P(ne.modifiedRange.getStartPosition(),n)&&P(ne.modifiedRange.getEndPosition(),n)&&P(ne.originalRange.getStartPosition(),e)&&P(ne.originalRange.getEndPosition(),e)))return!1;if(!N(U.modified,n)||!N(U.original,e))return!1}return!0}),new ER(_,k,g)}computeMoves(e,n,r,i,o,a,l,c){return dOe(e,n,r,i,o,a).map(p=>{let m=this.refineDiff(n,r,new Yo(p.original.toOffsetRange(),p.modified.toOffsetRange()),a,l,c),h=Wde(m.mappings,new gT(n),new gT(r),!0);return new IR(p,h)})}refineDiff(e,n,r,i,o,a){let c=yPt(r).toRangeMapping2(e,n),u=new wb(e,c.originalRange,o),d=new wb(n,c.modifiedRange,o),p=u.length+d.length<500?this.dynamicProgrammingDiffing.compute(u,d,i):this.myersDiffingAlgorithm.compute(u,d,i),m=!1,h=p.diffs;m&&Yo.assertSorted(h),h=jde(u,d,h),m&&Yo.assertSorted(h),h=Vde(u,d,h,(y,v)=>y.findWordContaining(v)),m&&Yo.assertSorted(h),a.extendToSubwords&&(h=Vde(u,d,h,(y,v)=>y.findSubWordContaining(v),!0),m&&Yo.assertSorted(h)),h=mOe(u,d,h),m&&Yo.assertSorted(h),h=gOe(u,d,h),m&&Yo.assertSorted(h);let g=h.map(y=>new Od(u.translateRange(y.seq1Range),d.translateRange(y.seq2Range)));return m&&Od.assertSorted(g),{mappings:g,hitTimeout:p.hitTimeout}}};function yPt(t){return new vp(new Yt(t.seq1Range.start+1,t.seq1Range.endExclusive+1),new Yt(t.seq2Range.start+1,t.seq2Range.endExclusive+1))}s(yPt,"toLineRangeMapping");var Dj=class{static{s(this,"DiffServiceImpl")}constructor(){}dispose(){}async computeDiff(e,n,r){let i=await CPt(e,n,r);return{identical:i.identical,quitEarly:i.quitEarly,changes:a(i.changes),moves:i.moves.map(l=>new IR(new vp(new Yt(l[0],l[1]),new Yt(l[2],l[3])),a(l[4])))};function a(l){return l.map(c=>new Ib(new Yt(c[0],c[1]),new Yt(c[2],c[3]),c[4]?.map(u=>new Od(new zt(u[0],u[1],u[2],u[3]),new zt(u[4],u[5],u[6],u[7])))))}}};async function CPt(t,e,n){let r=t.split(/\r\n|\r|\n/),i=e.split(/\r\n|\r|\n/),a=new Pj().computeDiff(r,i,n),l=a.changes.length>0?!1:t===e;function c(u){return u.map(d=>[d.original.startLineNumber,d.original.endLineNumberExclusive,d.modified.startLineNumber,d.modified.endLineNumberExclusive,d.innerChanges?.map(p=>[p.originalRange.startLineNumber,p.originalRange.startColumn,p.originalRange.endLineNumber,p.originalRange.endColumn,p.modifiedRange.startLineNumber,p.modifiedRange.startColumn,p.modifiedRange.endLineNumber,p.modifiedRange.endColumn])])}return s(c,"getLineChanges"),{identical:l,quitEarly:a.hitTimeout,changes:c(a.changes),moves:a.moves.map(u=>[u.lineRangeMapping.original.startLineNumber,u.lineRangeMapping.original.endLineNumberExclusive,u.lineRangeMapping.modified.startLineNumber,u.lineRangeMapping.modified.endLineNumberExclusive,c(u.changes)])}}s(CPt,"computeDiff");f();var $de=je(require("crypto"));var P9=$de.randomUUID.bind($de);var wOe=je(th()),Xde=je(XD());f();var Nj=Qd("ISnippyService");f();f();var D9=new RegExp("[_\\p{L}\\p{Nd}]+|====+|----+|####+|////+|\\*\\*\\*\\*+|[\\p{P}\\p{S}]","gu"),Lj=65;function xPt(t){let e=0,n;D9.lastIndex=0;do if(n=D9.exec(t),n&&(e+=1),e>=Lj)break;while(n);return e}s(xPt,"lexemeLength");function vPt(t,e){let n=0,r;D9.lastIndex=0;do if(r=D9.exec(t),r&&(n+=1,n>=e))return D9.lastIndex;while(r);return t.length}s(vPt,"offsetFirstLexemes");function yOe(t,e){let n=t.split("").reverse().join(""),r=vPt(n,e);return n.length-r}s(yOe,"offsetLastLexemes");function zde(t){return xPt(t)>=Lj}s(zde,"hasMinLexemeLength");f();f();var COe;(e=>{function t(n){return typeof n=="object"&&n!==null&&typeof n.matched_source=="string"&&typeof n.occurrences=="string"&&typeof n.capped=="boolean"&&typeof n.cursor=="string"&&typeof n.github_url=="string"}e.is=t,s(t,"is")})(COe||={});var Yde;(e=>{function t(n){return typeof n=="object"&&n!==null&&typeof n.kind=="string"&&typeof n.reason=="string"&&typeof n.code=="number"&&typeof n.msg=="string"}e.is=t,s(t,"is")})(Yde||={});var xOe;(e=>{function t(n){return typeof n=="object"&&n!==null&&"snippets"in n&&Array.isArray(n.snippets)&&n.snippets.every(COe.is)}e.is=t,s(t,"is")})(xOe||={});var Kde;(e=>{function t(n){if(Yde.is(n))return No.error(n);if(xOe.is(n))return No.ok(n)}e.to=t,s(t,"to")})(Kde||={});var vOe;(e=>{function t(n){return typeof n=="object"&&n!==null&&typeof n.commit_id=="string"&&typeof n.license=="string"&&typeof n.nwo=="string"&&typeof n.path=="string"&&typeof n.url=="string"}e.is=t,s(t,"is")})(vOe||={});var bOe;(e=>{function t(n){return typeof n=="object"&&n!==null&&typeof n.has_next_page=="boolean"&&typeof n.cursor=="string"}e.is=t,s(t,"is")})(bOe||={});var EOe;(e=>{function t(n){return typeof n=="object"&&n!==null&&typeof n.count=="object"&&Object.values(n.count).every(r=>typeof r=="string")}e.is=t,s(t,"is")})(EOe||={});var IOe;(e=>{function t(n){return typeof n=="object"&&n!==null&&"file_matches"in n&&Array.isArray(n.file_matches)&&n.file_matches.every(vOe.is)&&"page_info"in n&&bOe.is(n.page_info)&&"license_stats"in n&&EOe.is(n.license_stats)}e.is=t,s(t,"is")})(IOe||={});var Jde;(e=>{function t(n){if(Yde.is(n))return No.error(n);if(IOe.is(n))return No.ok(n)}e.to=t,s(t,"to")})(Jde||={});var Fj=class t{static{s(this,"SnippyFetchService")}static{this.TWIRP_URL="twirp/github.snippy.v1.SnippyAPI"}constructor(e){this.ctx=e}async fetchMatch(e){let n={source:e};return this.fetch("Match",n,Kde.to)}async fetchFilesForMatch(e){let n={cursor:e};return this.fetch("FilesForMatch",n,Jde.to)}async fetch(e,n,r){let i=this.ctx.get(Kr),o=await this.ctx.get(Gn).getToken(),a=Hx(this.ctx,o,"origin-tracker",`${t.TWIRP_URL}/${e}`),l={Authorization:`Bearer ${o.token}`,...n0(this.ctx),"X-GitHub-Api-Version":ig},c=new AbortController,u=await i.fetch(a,{method:"POST",headers:l,json:n,signal:c.signal});if(!u.ok)throw new Error(`Failed with status ${u.status} and body: ${await u.text()}`);let d=await u.json();return r(d)}};var TOe=new Tt("[CODE REFERENCING]"),RR=class{constructor(e,n){this.instantiationService=n;this.ctx=e,this.fetcher=this.instantiationService.createInstance(Fj,this.ctx)}static{s(this,"SnippyService")}async handlePostInsertion(e,n,r){let i=this.computeSourceToCheck(n,r);if(!i)return;let a=await this.ctx.get(Nn).getTextDocument({uri:e.toString()});if(!a){TOe.error(this.ctx,"Unable to raise IP code citation notification: could not determine document version.");return}let l=a.version,c;try{c=await this.fetcher.fetchMatch(i.source)}catch(h){throw h}if(!c)throw new Error(`Failed to parse match response: ${c}`);if(c.isError())throw new Error(`Failed to match: ${c.err}`);if(c.val.snippets.length===0)return;let{snippets:u}=c.val,d=u.map(async h=>{let g=await this.fetcher.fetchFilesForMatch(h.cursor);if(!g||g.isError())return;let{file_matches:y,license_stats:v}=g.val;return{match:h,files:y,licenseStats:v}}),m=(await Promise.all(d)).filter(h=>!!h);if(m.length===0){TOe.error(this.ctx,"Should never happen as per https://github.com/github/copilot-client/blob/34cae5c581d662525eb3305d58f0762e952f866d/extension/src/codeReferencing/handlePostInsertion.ts#L138");return}for(let h of m){let g=new Set(Object.keys(h.licenseStats?.count??{}));g.delete("NOASSERTION")&&g.add("unknown");let y=Array.from(g).sort(),v=`${h.match.matched_source.slice(0,100).replace(/[\r\n\t]+|^[ \t]+/gm," ").trim()}...`,b={inDocumentUri:e.toString(),offsetStart:i.startOffset,offsetEnd:i.endOffset,matchingText:v,location:{start:{line:i.startPosition.lineNumber,character:i.startPosition.column},end:{line:i.endPosition.lineNumber,character:i.endPosition.column}},version:l,details:y.map(E=>({license:E,url:`${h.match.github_url}`}))};await this.ctx.get(I0).handleIPCodeCitation(this.ctx,b)}}computeSourceToCheck(e,n){if(n.newText==="")return;let r=Es.single(n),o=r.getNewRanges().reduce((m,h)=>m.join(h)),a=e.apply(r),l=o.start,c=a.value.substring(o.start,o.endExclusive);if(!zde(c)){let m=a.value.slice(0,o.start),h=yOe(m,Lj);l=h,c=a.value.slice(h,o.start+n.newText.length)}if(!zde(c))return;let u=a.getTransformer(),d=u.getPosition(l),p=u.getPosition(o.endExclusive);return{source:c,startOffset:l,endOffset:o.endExclusive,startPosition:d,endPosition:p}}};RR=Cu([Bs(1,dA)],RR);async function _Oe(t){let e=new tj;return e.define(rj,new Zde(t)),e.define(Ij,new Dj),e.define(Ty,new G0(e0e,[!0])),e.define(Nj,new G0(RR,[t])),e.define(sh,await n0e.Create(t)),e.define(T9,new G0(r0e)),e.define(ij,new t0e(t)),e.seal()}s(_Oe,"createInstantiationService");var Zde=class{constructor(e){this.ctx=e;this.ctx=e}static{s(this,"TelemetrySender")}sendTelemetryEvent(e,n,r){let i=Object.fromEntries(Object.entries(n??{}).filter(([l,c])=>c!==void 0)),o=Object.fromEntries(Object.entries(r??{}).filter(([l,c])=>c!==void 0)),a=ir.createAndMarkAsIssued(i,o);kt(this.ctx,e,a)}},e0e=class{static{s(this,"ParserServiceImpl")}getTreeSitterAST(e){}},t0e=class{constructor(e){this.ctx=e}static{s(this,"EndpointProvider")}async getEndpointInfo(e){if(e!==xp.ID)throw new Error(`Unsupported provider ID: ${e}`);let n=await this.ctx.get(Dt).updateExPValuesAndAssignments();return{id:this.ctx.get(Dt).getNESXTabModelID(n),name:"xtab-4o-mini-finetuned"}}},n0e=class t{constructor(e,n){this.ctx=e;this.modelConfiguration=n}static{s(this,"CLSChatMLFetcher")}static async Create(e){let n=await xo.getModelConfiguration(e,"nesStubs");return new t(e,n)}get tokenBudget(){return this.modelConfiguration.maxRequestTokens}get tokenizerName(){return this.modelConfiguration.tokenizer}async fetchOne(e,n,r,i,o){let a=e.map(u=>t.chatMessageToClsChatMessage(u)),l=P9(),c=await this.ctx.get(vd).fetchAndStreamChat(this.ctx,a,gg.createEmptyConfigForTesting(),"nextEditSuggestion",l,async(u,d)=>{if(n)return await n(u,0,{text:d.text})},r,i,o);if(c.type==="success"){let u=[];if(n)for await(let p of c.choices)if(p.finishReason!=="snippy")await n(p.completionText,0,{text:p.completionText}),u.push(p.completionText);else return{type:"filtered",reason:"snippy",category:"snippy",requestId:l,serverRequestId:p.requestId.headerRequestId};let d=u.join("");return{type:"success",value:d}}else return c.type==="failed"&&c.reason==="monthly free code completions exhausted"?{type:"quotaExceeded",reason:c.reason}:{type:t.clsResponseTypeToResponseType(c.type),reason:c.type}}static chatMessageToClsChatMessage(e){switch(e.role){case"system":return{role:"system",content:XQe(e.content)};case"user":if(typeof e.content!="string"&&e.content.some(n=>n.type!=="text"))throw new Error("CLS only supports text content in user messages");return{role:"user",content:e.content};default:throw new Error(`Unsupported chat role: ${e.role}`)}}static clsResponseTypeToResponseType(e){switch(e){case"success":return"success";case"successMultiple":return"success";case"offTopic":return"offTopic";case"canceled":return"canceled";case"filtered":return"filtered";case"length":return"length";case"failed":return"failed";case"agentAuthRequired":return"agent_unauthorized";default:return"unknown"}}},r0e=class t{constructor(){this.tokenizers=new Map;this.cl100kTokenizer=new Mj("cl100k_base")}static{s(this,"CLSTokenizerProvider")}acquireTokenizer(e){let n=this.tokenizers.get(e.tokenizer);return n||(n=new Mj(t.typeToName(e.tokenizer)),this.tokenizers.set(e.tokenizer,n)),n}static typeToName(e){switch(e){case"cl100k_base":return"cl100k_base";case"o200k_base":return"o200k_base";case"llama3":throw new Error("Llama3 tokenizer is not supported");default:throw new Error(`Unknown tokenizer type: ${e}`)}}},Mj=class{constructor(e){this.mode=wOe.OutputMode.Raw;this.tokenizer=Bo(e)}static{s(this,"CLSTokenizer")}tokenLength(e){if(typeof e=="string")return this.tokenizer.tokenLength(e);if(e.type===Xde.ChatCompletionContentPartKind.Text)return this.tokenizer.tokenLength(e.text);throw new Error(`Unsupported content part type: ${e.type}`)}countMessageTokens(e){let n=0;if(typeof e.content=="string")return this.tokenLength(e.content);if(Array.isArray(e.content))for(let r of e.content)if(r.type===Xde.ChatCompletionContentPartKind.Text)n+=this.tokenLength(r.text);else throw new Error(`Unsupported message content part type: ${r.type}`);else throw new Error("Unsupported message content type");return n}countMessagesTokens(e){let n=0;for(let r of e)n+=this.countMessageTokens(r);return n}countToolTokens(e){throw new Error("Method not implemented.")}};f();f();var Qj=class extends jo{constructor(n){super();this.workspace=n;this._garbageCollector=new s0e(20);this._documentCaches=new Map;Zf(this,n.openDocuments,(r,i)=>{let o=new i0e(r.id,r.value.get(),this._garbageCollector);this._documentCaches.set(o.docId,o),i.add(V1(this,{value:r.value,selection:r.selection,languageId:r.languageId},a=>{for(let l of a.value.changes)o.handleEdit(l)})),i.add(Ra(()=>{this._documentCaches.delete(r.id)}))}).recomputeInitiallyAndOnChange(this._store)}static{s(this,"RejectionCollector")}reject(n,r){let i=this._documentCaches.get(n);i&&i.reject(r)}isRejected(n,r){let i=this._documentCaches.get(n);return i?i.isRejected(r):!1}},i0e=class{constructor(e,n,r){this.docId=e;this._garbageCollector=r;this._rejectedEdits=new Set}static{s(this,"DocumentRejectionTracker")}handleEdit(e){for(let n of[...this._rejectedEdits])n.handleEdit(e)}reject(e){if(this.isRejected(e))return;let n=new o0e(e.toEdit(),()=>{this._rejectedEdits.delete(n)});this._rejectedEdits.add(n),this._garbageCollector.put(n)}isRejected(e){for(let n of this._rejectedEdits)if(n.isRejected(e))return!0;return!1}},o0e=class{constructor(e,n){this._edit=e;this._onDispose=n}static{s(this,"RejectedEdit")}handleEdit(e){let n=this._edit.tryRebase(e);n?this._edit=n:this.dispose()}isRejected(e){return this._edit.equals(e.toEdit())}dispose(){this._onDispose()}},s0e=class{constructor(e){this._maxSize=e;this._disposables=[]}static{s(this,"LRUGarbageCollector")}put(e){this._disposables.push(e),this._disposables.length>this._maxSize&&this._disposables.shift().dispose()}dispose(){for(let e of this._disposables)e.dispose();this._disposables=[]}};f();f();f();var N9=class{constructor(e,n){this.prev=null;this.next=null;this.key=e,this.value=n}static{s(this,"Node")}},Oj=class{static{s(this,"LRUCache")}constructor(e=10){if(e<1)throw new Error("Cache size must be at least 1");this._capacity=e,this._cache=new Map,this._head=new N9("",null),this._tail=new N9("",null),this._head.next=this._tail,this._tail.prev=this._head}_addNode(e){e.prev=this._head,e.next=this._head.next,this._head.next.prev=e,this._head.next=e}_removeNode(e){let n=e.prev,r=e.next;n.next=r,r.prev=n}_moveToHead(e){this._removeNode(e),this._addNode(e)}_popTail(){let e=this._tail.prev;return this._removeNode(e),e}clear(){this._cache.clear(),this._head.next=this._tail,this._tail.prev=this._head}deleteKey(e){let n=this._cache.get(e);if(n)return this._removeNode(n),this._cache.delete(e),n.value}get(e){let n=this._cache.get(e);if(n)return this._moveToHead(n),n.value}keys(){let e=[],n=this._head.next;for(;n!==this._tail;)e.push(n.key),n=n.next;return e}getValues(){let e=[],n=this._head.next;for(;n!==this._tail;)e.push(n.value),n=n.next;return e}put(e,n){let r=this._cache.get(e);if(r)r.value=n,this._moveToHead(r);else if(r=new N9(e,n),this._cache.set(e,r),this._addNode(r),this._cache.size>this._capacity){let i=this._popTail();return this._cache.delete(i.key),[i.key,i.value]}}};var Uj=class extends jo{constructor(n){super();this.workspace=n;this._documentCaches=new Map;this._sharedCache=new Oj(50);Zf(this,n.openDocuments,(r,i)=>{let o=new a0e(r.id,r.value.get(),this._sharedCache);this._documentCaches.set(o.docId,o),i.add(V1(this,{value:r.value,selection:r.selection,languageId:r.languageId},a=>{for(let l of a.value.changes)o.handleEdit(l)})),i.add(Ra(()=>{this._documentCaches.delete(r.id)}))}).recomputeInitiallyAndOnChange(this._store)}static{s(this,"NextEditCache")}setNextEdits(n,r,i){let o=this._documentCaches.get(n);o&&o.setNextEdits(r,i)}lookupNextEdit(n){let r=this._documentCaches.get(n);if(r)return r.lookupNextEdit()}},a0e=class{constructor(e,n,r){this.docId=e;this._sharedCache=r;this._value=n}static{s(this,"DocumentEditCache")}handleEdit(e){this._value=this._value.apply(e)}setNextEdits(e,n){let r=this._value;for(let i=0;i<e.edits.length;i++){let o=e.edits[i],a=this._getKey(r.value);this._sharedCache.put(a,{edit:o,subsequentN:i,source:n,documentBeforeEdit:r}),r=r.apply(o.toEdit())}}lookupNextEdit(){let e=this._getKey(this._value.value),n=this._sharedCache.get(e);if(n)return n}_getKey(e){return JSON.stringify([this.docId.uri,e])}};f();var qj=class t{constructor(e){this._providerId=e;this._isFromCache=!1;this._wasPreviouslyRejected=!1;this._isShown=!1;this._acceptance="notAccepted";this._startTime=Date.now(),this._requestN=++t.requestN}static{s(this,"NextEditProviderTelemetryBuilder")}static{this.requestN=0}build(){let e,n,r,i,o,a;if(this._request){let c=this._request.getActiveDocument();e=this._request.documents.length,n=this._request.documents.reduce((u,d)=>u+d.recentEdits.edits.length,0),r=c.recentEdits.edits.length,i=c.languageId,o=c.lineCountBeforeClipping,a=c.clippingRange.length}let l=this._statelessNextEditTelemetry?.fetchStartedAt===void 0?void 0:this._statelessNextEditTelemetry.fetchStartedAt-this._startTime;return{opportunityId:this._opportunityId||"",headerRequestId:this._headerRequestId||"",requestN:this._requestN,providerId:this._providerId,nextEditProviderDuration:this._duration||0,isFromCache:this._isFromCache,subsequentEditOrder:this._subsequentEditOrder,documentShorteningStrategy:this._documentShorteningStrategy,documentsCount:e,editsCount:n,activeDocumentEditsCount:r,activeDocumentLanguageId:i,activeDocumentOriginalLineCount:o,activeDocumentShortenedLineCount:a,fetchStartedAfterMs:l,wasPreviouslyRejected:this._wasPreviouslyRejected,isShown:this._isShown,acceptance:this._acceptance,...this._statelessNextEditTelemetry}}setOpportunityId(e){return this._opportunityId=e,this}setHeaderRequestId(e){return this._headerRequestId=e,this}setIsFromCache(){return this._isFromCache=!0,this}setSubsequentEditOrder(e){return this._subsequentEditOrder=e,this}setDocumentShorteningStrategy(e){return this._documentShorteningStrategy=e,this}setRequest(e){return this._request=e,this}setStatelessNextEditTelemetry(e){return this._statelessNextEditTelemetry=e,this}setWasPreviouslyRejected(){return this._wasPreviouslyRejected=!0,this}markEndTime(){return this._duration=Date.now()-this._startTime,this}setAsShown(){return this._isShown=!0,this}setAcceptance(e){return this._acceptance=e,this}},kR=class{constructor(e){this.telemetrySender=e;this._map=new Map}static{s(this,"TelemetrySender")}markNextEditResultAsShown(e){let n=this._map.get(e);n&&n.builder.setAsShown()}scheduleSendingTelemetry(e,n){let r=setTimeout(()=>{this._doSendTelemetry(n),this._map.delete(e)},12e4);this._map.set(e,{builder:n,timeout:r})}sendTelemetryFor(e,n){let r=this._map.get(e);if(!r)return;this._map.delete(e),clearTimeout(r.timeout);let i=r.builder;i.setAcceptance(n),this._doSendTelemetry(i)}sendTelemetry(e){this._doSendTelemetry(e)}_doSendTelemetry(e){let n=e.build(),{opportunityId:r,headerRequestId:i,requestN:o,providerId:a,hadStatelessNextEditProviderCall:l,statelessNextEditProviderDuration:c,nextEditProviderDuration:u,isFromCache:d,subsequentEditOrder:p,documentShorteningStrategy:m,activeDocumentLanguageId:h,activeDocumentOriginalLineCount:g,activeDocumentShortenedLineCount:y,wasPreviouslyRejected:v,isShown:b,acceptance:E,logProbThreshold:_,documentsCount:k,editsCount:P,activeDocumentEditsCount:N,promptLineCount:U,promptCharCount:ne,isDefaultEndpoint:he,hadLowLogProbSuggestion:ae,nonTerminatingError:G,nEditsSuggested:W,kthEditPicked:ue,lineDistanceToMostRecentEdit:ie,debounceTime:V,hasNextEdit:O,nextEditLogprob:Y,maxLinesPerEdit:te,noNextEditReasonKind:pe,noNextEditReasonMessage:ee,firstEditStrategy:ce,firstPickStrategyOverride:me,fetchTime:Ne,fetchResult:Se,fetchError:Je,fetchStartedAfterMs:Me}=n;this._sendTelemetryToBoth({opportunityId:r,headerRequestId:i,providerId:a,documentShorteningStrategy:m,activeDocumentLanguageId:h,acceptance:E,nonTerminatingError:G,noNextEditReasonKind:pe,noNextEditReasonMessage:ee,firstEditStrategy:ce,firstPickStrategyOverride:me,fetchResult:Se,fetchError:Je},{requestN:o,hadStatelessNextEditProviderCall:this._boolToNum(l),statelessNextEditProviderDuration:c,nextEditProviderDuration:u,isFromCache:this._boolToNum(d),subsequentEditOrder:p,isDefaultEndpoint:this._boolToNum(he),activeDocumentOriginalLineCount:g,activeDocumentShortenedLineCount:y,wasPreviouslyRejected:this._boolToNum(v),isShown:this._boolToNum(b),logProbThreshold:_,documentsCount:k,editsCount:P,activeDocumentEditsCount:N,promptLineCount:U,promptCharCount:ne,hadLowLogProbSuggestion:this._boolToNum(ae),nEditsSuggested:W,kthEditPicked:ue,lineDistanceToMostRecentEdit:ie,debounceTime:V,fetchStartedAfterMs:Me,fetchTime:Ne,hasNextEdit:this._boolToNum(O),nextEditLogprob:Y,maxLinesPerEdit:te})}_sendTelemetryToBoth(e,n){this.telemetrySender.sendTelemetryEvent("copilot-nes/provideInlineEdit",e,n)}_boolToNum(e){return e===void 0?void 0:e?1:0}};kR=Cu([Bs(0,rj)],kR);f();var BR=class{constructor(e){this.result=e}static{s(this,"NextEditResult")}};var AT=!1,SOe=300,PR=class extends jo{constructor(n,r,i,o,a,l,c){super();this._workspace=n;this._statelessNextEditProvider=r;this._historyContextProvider=i;this._xtabHistoryTracker=o;this._parseService=a;this._instantiationService=l;this._snippyService=c;this._rejectionCollector=new Qj(this._workspace);this._nextEditCache=new Uj(this._workspace);this._recentlyShownCache=new u0e;this._pendingStatelessNextEditRequest=null;this._lastShownTime=0;this._lastRejectionTime=0;this._lastTriggerTime=0;Zf(this,this._workspace.openDocuments,(u,d)=>{d.add(zie(u.value,p=>{this._cancelPendingRequestDueToDocChange(u.id,p)}))}).recomputeInitiallyAndOnChange(this._store),this._telemetrySender=this._instantiationService.createInstance(kR)}static{s(this,"NextEditProvider")}get lastRejectionTime(){return this._lastRejectionTime}get lastTriggerTime(){return this._lastTriggerTime}_cancelPendingRequestDueToDocChange(n,r){if(this._pendingStatelessNextEditRequest===null)return;let i=this._pendingStatelessNextEditRequest.getActiveDocument();i.id===n&&i.documentAfterEditsNoShortening.value!==r.value&&this._pendingStatelessNextEditRequest.cancellationTokenSource.cancel()}async getNextEdit(n,r,i){this._lastTriggerTime=Date.now();let o=await this._workspace.getDocument(n);if(!o)return{result:void 0};let a=o.value.get(),l=new qj(this._statelessNextEditProvider.ID);l.setOpportunityId(r.requestUuid??P9());let c=this._recentlyShownCache.get(n,a),u=this._nextEditCache.lookupNextEdit(n),d,p,m,h;if(c)d=c[0],h=c[1],p=a,l.setHeaderRequestId(h.headerRequestId),l.setIsFromCache(),await by(SOe);else if(u)d=u.edit,h=u.source,p=u.documentBeforeEdit,l.setHeaderRequestId(h.headerRequestId),l.setIsFromCache(),l.setSubsequentEditOrder(u.subsequentN),await by(SOe);else{h=new c0e,l.setHeaderRequestId(h.headerRequestId);let v=o.value.get();p=v;let b=await this.fetchNextEdit(h,n,l,i),E=v.value!==o.value.get().value;if(b.isError())switch(b.err.kind){case"activeDocumentHasNoEdits":case"noSuggestions":case"gotCancelled":case"filteredOut":case"uncategorized":case"quotaExceeded":break;case"fetchFailure":case"unexpected":m=b.err.error;break;default:gP(b.err)}else if(!E){let _=b.val;_.isEmpty()||(d=_.edits[0],(!this._statelessNextEditProvider.dependsOnSelection||_.edits.length>1)&&this._nextEditCache.setNextEdits(n,_,h))}}if(l.markEndTime(),m)throw this._telemetrySender.sendTelemetry(l),m;if(!d)return this._telemetrySender.sendTelemetry(l),new BR(void 0);if(this._rejectionCollector.isRejected(n,d))return l.setWasPreviouslyRejected(),this._telemetrySender.sendTelemetry(l),new BR(void 0);Ol(p!==void 0,"should be defined if edit is defined");let g=this._statelessNextEditProvider.showNextEditPreference??"aroundEdit",y=new BR({edit:d,showRangePreference:g,documentBeforeEdits:p});return this._telemetrySender.scheduleSendingTelemetry(y,l),d.isNeutral()||this._recentlyShownCache.add(n,a,[d,h]),y}async _shortenDocument(n,r){let i=n.lastEdit.getEditedState(),{document:o,clippedRange:a}=r==="noShortening"?this.getProjectedDocumentNoShortening(n.lastEdit):r==="clipping"?this.getProjectedDocumentClipping(n.lastEdit):await this.getProjectedDocumentSummarizedDocument(n.languageId,n.lastEdit),l=Es.fromOffsetEdit(o.edits).inverseOnString(o.originalText),{edits:c,editLast:u}=l0e(n.lastEdits.swap(l)),d=c.compose(),p=new fT(new ah(n.lastEdits.apply(o.originalText)),u.toOffsetEdit().inverse(c.apply(o.text))),m=new ql(o.text),g=sA.fromEdit(new nu(m,d)).removeCommonSuffixPrefixLines(),y=c.edits.at(-1)?.getNewRanges().at(0),v;y&&(v=new ql(p.text).getTransformer().getRange(y));let b=n.lastSelection?p.projectOffsetRange(n.lastSelection):void 0,E=this._workspace.getWorkspaceRoot(n.docId),_=s(U=>{let he=new sA(new ql(p.text),U).toEdit();return ROe(he,p)},"toEditOnDocumentAfterEditsNoShortening"),k=s(U=>p.projectBack(U),"toOffsetOnDocumentAfterEditsNoShortening"),P=s(U=>p.project(U),"toProjectedOffset"),N=new A9(n.docId,E,n.languageId,g.base.getLines(),g.edit,v,m,c,i,_,k,P,n.lastEdit.base.getTextLength().lineCount,a,b);return{recentEdit:n.lastEdit,nextEditDoc:N,projectedDocument:p}}async fetchNextEdit(n,r,i,o){let a=await this._historyContextProvider.getHistoryContext(r);if(!a)return No.error({kind:"unexpected",error:new Error("DocumentMissingInHistoryContext")});let l=l0e(a.getDocumentAndIdx(r)),c=this.getDocumentShorteningStrategy();i.setDocumentShorteningStrategy(c);let u=await Promise.all(a.documents.map(U=>this._shortenDocument(U,c))),d=u[l.idx],p=this._xtabHistoryTracker.getHistory(),m=new KG(n.headerRequestId,u.map(U=>U.nextEditDoc),l.idx,p,this.nextEditOptions),h=this._findExistingPendingRequest(m),g,y;if(h){g=h,AT&&console.log(`=> reusing an existing request ${g.seqid}`),i.setHeaderRequestId(h.id),i.setIsFromCache(),i.setRequest(g);let U=this._hookupCancellation(g,o);try{y=await g.result}finally{U.dispose()}}else{g=m,this._pendingStatelessNextEditRequest&&(this._pendingStatelessNextEditRequest.cancellationTokenSource.cancel(),this._pendingStatelessNextEditRequest=null),this._pendingStatelessNextEditRequest=g;let U=s(()=>{this._pendingStatelessNextEditRequest===g&&(this._pendingStatelessNextEditRequest=null)},"removeFromPending");i.setRequest(g);let ne=this._hookupCancellation(g,o);try{y=await this._statelessNextEditProvider.provideNextEdit(g,g.cancellationTokenSource.token),g.setResult(y)}catch(he){throw g.setResultError(he),he}finally{ne.dispose(),U()}}i.setStatelessNextEditTelemetry(y.telemetry);let v=y.nextEdit;if(v.isError())return v;let b=v.val.edit;if(b.edits.length===0)return No.error({kind:"noSuggestions"});let _=new sA(new ql(d.projectedDocument.text),b).toEdit(),k=ROe(_,d.projectedDocument),P=_.edits.length===k.edits.length?v.val.permutation:void 0,N=k.decompose(P);return No.ok(N)}_hookupCancellation(n,r){let i=new Bu,o=!1,a=s(()=>{o||(o=!0,n.liveDependentants--)},"removeDependant"),l=i.add(new WG);return i.add(r.onCancellationRequested(()=>{if(a(),n.liveDependentants>0){AT&&console.log(`=> ignoring UI cancellation signal for ${n.seqid} because others depend on this request`);return}if(!n.fetchIssued){AT&&console.log(`=> canceling ${n.seqid} due to UI cancellation signal`),n.cancellationTokenSource.cancel();return}l.setIfNotSet(()=>{if(n.liveDependentants>0){AT&&console.log(`=> ignoring timer cancellation signal for ${n.seqid} because others depend on this request`);return}AT&&console.log(`=> canceling ${n.seqid} due to timer after UI cancellation signal`),n.cancellationTokenSource.cancel()},500)})),i.add(Ra(()=>{a()})),n.liveDependentants++,i}_findExistingPendingRequest(n){if(this._statelessNextEditProvider.canReuseResult&&this._pendingStatelessNextEditRequest&&!this._pendingStatelessNextEditRequest.cancellationTokenSource.token.isCancellationRequested&&this._statelessNextEditProvider.canReuseResult(this._pendingStatelessNextEditRequest,n))return this._pendingStatelessNextEditRequest}handleShown(n){this._lastShownTime=Date.now(),this._telemetrySender.markNextEditResultAsShown(n)}handleAcceptance(n,r){this._telemetrySender.sendTelemetryFor(r,"accepted"),this.runSnippy(n,r),this._statelessNextEditProvider.handleAcceptance?.()}handleRejection(n,r){sj(r.result,"@ulugbekna: undefined edit cannot be rejected?"),Date.now()-this._lastShownTime>1e3&&r.result&&(this._recentlyShownCache.remove(r.result.edit),this._rejectionCollector.reject(n,r.result.edit)),this._lastRejectionTime=Date.now(),this._telemetrySender.sendTelemetryFor(r,"rejected")}getProjectedDocumentNoShortening(n){return{document:new fT(new ah(n.base.value),new Ap([])),clippedRange:new Yt(1,n.base.getTextLength().lineCount+1)}}getProjectedDocumentClipping(n){let r=n.base.getTransformer(),i=r.getRange(n.edit.getRange()??new Rt(0,0)),o=Yt.fromRange(i);function a(p,m){return new Yt(p.startLineNumber-m,p.endLineNumberExclusive+m)}s(a,"extendRange");let l=new Yt(1,r.textLength.lineCount+1),c=l0e(l.intersect(a(o,100))),u=Yt.subtract(l,c);return{document:new fT(new ah(n.base.value),new Ap(u.map(p=>ol.delete(r.getOffsetRange(new zt(p.startLineNumber,1,p.endLineNumberExclusive,1)))))),clippedRange:c}}getDocumentShorteningStrategy(){return this._statelessNextEditProvider.documentShorteningStrategy??"clipping"}get nextEditOptions(){return new g9("firstByLineNumber",8)}async getProjectedDocumentSummarizedDocument(n,r){let i=await TPt(this._parseService,{getText:s(()=>r.base.value,"getText"),languageId:n});if(!i)return this.getProjectedDocumentClipping(r);let o=new ah(r.base.value),a=r.edit.edits.at(0)?.range??new Rt(0,0),l;if(r.edit.edits.length!==0){let h=r.edit.edits.at(0),g=r.edit.edits.at(-1);l=o.offsetRangeToRange(new Rt(h.range.start,g.range.endExclusive))}let c=kOe(o.offsetRangeToRange(a)),u=pj(200*50,{costFnOverride:s((h,g,y)=>{let v=kOe(y.offsetRangeToRange(h.range)),b=IPt(c,v);return b>100?!1:b},"costFnOverride")},[{overlayNodeRoot:i,document:o,selection:l}])[0],d=u.projectBack(1)-1,p=r.base.getTransformer().getPosition(d).lineNumber,m=new Yt(p,p+u.lineCount);return{document:u,clippedRange:m}}async runSnippy(n,r){r.result!==void 0&&this._snippyService.handlePostInsertion(n.toUri(),r.result.documentBeforeEdits,r.result.edit)}};PR=Cu([Bs(4,Ty),Bs(5,dA),Bs(6,Nj)],PR);function ROe(t,e){let n=e.projectBackOffsetEdit(t.toOffsetEdit());return Es.fromOffsetEdit(n)}s(ROe,"projectBackEdit");function kOe(t){return new Yt(t.start.line+1,t.end.line+1)}s(kOe,"lineRangeFromVSCodeRange");function IPt(t,e){return t.endLineNumberExclusive<=e.startLineNumber?e.startLineNumber-t.endLineNumberExclusive:e.endLineNumberExclusive<=t.startLineNumber?t.startLineNumber-e.endLineNumberExclusive:0}s(IPt,"lineRangeDist");async function TPt(t,e){return await t.getTreeSitterAST(e)?.getStructure()}s(TPt,"getStructure");function l0e(t){if(!t)throw new dr("expected value to be defined, but it was not");return t}s(l0e,"assertDefined");var c0e=class{constructor(){this.headerRequestId=P9()}static{s(this,"NextEditFetchRequest")}},u0e=class{constructor(){this._cache=new MO(10)}static{s(this,"RecentlyShownCache")}add(e,n,r){let i=this._key(e,n);this._cache.set(i,r)}get(e,n){let r=this._key(e,n);return this._cache.get(r)}remove(e){for(let n of this._cache)if(n[1][0]===e){this._cache.delete(n[0]);break}}_key(e,n){return e.uri+";"+n.value}};f();f();f();f();var yT=0;function Wj(t){return t===0}s(Wj,"lengthIsZero");var V0=2**26;function DR(t,e){return t*V0+e}s(DR,"toLength");function Sy(t){let e=t,n=Math.floor(e/V0),r=e-n*V0;return new Ul(n,r)}s(Sy,"lengthToObj");function L9(t,e){let n=t+e;return e>=V0&&(n=n-t%V0),n}s(L9,"lengthAdd");function BOe(t,e){return t.reduce((n,r)=>L9(n,e(r)),yT)}s(BOe,"sumLengths");function d0e(t,e){return t===e}s(d0e,"lengthEquals");function F9(t,e){let n=t,r=e;if(r-n<=0)return yT;let o=Math.floor(n/V0),a=Math.floor(r/V0),l=r-a*V0;if(o===a){let c=n-o*V0;return DR(0,l-c)}else return DR(a-o,l)}s(F9,"lengthDiffNonNegative");function POe(t,e){let n=t,r=Math.floor(n/V0),i=n-r*V0,o=e,a=Math.floor(o/V0),l=o-a*V0;return new zt(r+1,i+1,a+1,l+1)}s(POe,"lengthsToRange");f();var NR=class{constructor(e,n,r){this.startOffset=e;this.endOffset=n;this.newLength=r}static{s(this,"TextEditInfo")}toString(){return`[${Sy(this.startOffset)}...${Sy(this.endOffset)}) -> ${Sy(this.newLength)}`}};function NOe(t,e){if(t.length===0)return e;if(e.length===0)return t;let n=new LO(DOe(t)),r=DOe(e);r.push({modified:!1,lengthBefore:void 0,lengthAfter:void 0});let i=n.dequeue();function o(u){if(u===void 0){let p=n.takeWhile(m=>!0)||[];return i&&p.unshift(i),p}let d=[];for(;i&&!Wj(u);){let[p,m]=i.splitAt(u);d.push(p),u=F9(p.lengthAfter,u),i=m??n.dequeue()}return Wj(u)||d.push(new M9(!1,u,u)),d}s(o,"nextS0ToS1MapWithS1LengthOf");let a=[];function l(u,d,p){if(a.length>0&&d0e(a[a.length-1].endOffset,u)){let m=a[a.length-1];a[a.length-1]=new NR(m.startOffset,d,L9(m.newLength,p))}else a.push({startOffset:u,endOffset:d,newLength:p})}s(l,"pushEdit");let c=yT;for(let u of r){let d=o(u.lengthBefore);if(u.modified){let p=BOe(d,h=>h.lengthBefore),m=L9(c,p);l(c,m,u.lengthAfter),c=m}else for(let p of d){let m=c;c=L9(c,p.lengthBefore),p.modified&&l(m,c,p.lengthAfter)}}return a}s(NOe,"combineTextEditInfos");var M9=class t{constructor(e,n,r){this.modified=e;this.lengthBefore=n;this.lengthAfter=r}static{s(this,"LengthMapping")}splitAt(e){let n=F9(e,this.lengthAfter);return d0e(n,yT)?[this,void 0]:this.modified?[new t(this.modified,this.lengthBefore,e),new t(this.modified,yT,n)]:[new t(this.modified,e,e),new t(this.modified,n,n)]}toString(){return`${this.modified?"M":"U"}:${Sy(this.lengthBefore)} -> ${Sy(this.lengthAfter)}`}};function DOe(t){let e=[],n=yT;for(let r of t){let i=F9(n,r.startOffset);Wj(i)||e.push(new M9(!1,i,i));let o=F9(r.startOffset,r.endOffset);e.push(new M9(!0,o,r.newLength)),n=r.endOffset}return e}s(DOe,"toLengthMapping");var Q9=class t{constructor(e){this.edits=e}static{s(this,"TextLengthEdit")}static{this.empty=new t([])}static fromTextEdit(e){let n=e.edits.map(r=>new Hj(r.range,Ul.ofText(r.newText)));return new t(n)}static _fromTextEditInfo(e){let n=e.map(r=>{let i=Sy(r.newLength);return new Hj(POe(r.startOffset,r.endOffset),new Ul(i.lineCount,i.columnCount))});return new t(n)}_toTextEditInfo(){return this.edits.map(e=>new NR(DR(e.range.startLineNumber-1,e.range.startColumn-1),DR(e.range.endLineNumber-1,e.range.endColumn-1),DR(e.newLength.lineCount,e.newLength.columnCount)))}compose(e){let n=this._toTextEditInfo(),r=e._toTextEditInfo(),i=NOe(n,r);return t._fromTextEditInfo(i)}getRange(){if(this.edits.length!==0)return zt.fromPositions(this.edits[0].range.getStartPosition(),this.edits.at(-1).range.getEndPosition())}toString(){return`[${this.edits.join(", ")}]`}},Hj=class{constructor(e,n){this.range=e;this.newLength=n}static{s(this,"SingleTextEditLength")}toString(){return`{ range: ${this.range}, newLength: ${this.newLength} }`}};f();var Gj=class{constructor(e){this.documents=e;Ol(e.length>0)}static{s(this,"HistoryContext")}getMostRecentDocument(){return this.documents.at(-1)}getDocument(e){return this.documents.find(n=>n.docId===e)}getDocumentAndIdx(e){let n=this.documents.findIndex(r=>r.docId.uri===e.uri);if(n!==-1)return{doc:this.documents[n],idx:n}}},jj=class{constructor(e,n,r,i,o){this.docId=e;this.languageId=n;this.base=r;this.lastEdits=i;this.lastSelection=o;this.lastEdit=new nu(this.base,this.lastEdits.compose())}static{s(this,"DocumentHistory")}};f();var Vj=class extends jo{constructor(){super();this.branch=Nm("branchName",void 0);this._register(Vie((n,r)=>{this.init(r)}))}static{s(this,"ObservableGitStub")}async init(n){}};var zj=class extends jo{constructor(n,r=!1){super();this._documentState=new Map;this._lastDocuments=new p0e(50);this.workspace=n,this._lastGitCheckout=void 0,this._started=!1,r||this.start()}static{s(this,"NesHistoryContextProvider")}start(){if(this._started)return;this._started=!0;let n=new Vj;this._register(u2(r=>{r.readObservable(n.branch)!==void 0&&(this._lastGitCheckout=iR(),this._documentState.forEach(o=>o.applyAllEdits()))})),Zf(this,this.workspace.openDocuments,(r,i)=>{let o=r.selection.get().at(0),a=new f0e(r.id,r.value.get().value,r.languageId.get(),o);this._documentState.set(a.docId,a),o&&this._lastDocuments.push(a),i.add(V1(this,{value:r.value,selection:r.selection,languageId:r.languageId},l=>{l.languageId.changes.length>0&&(a.languageId=l.languageId.value);let c=this._isAwaitingGitCheckoutCooldown();for(let u of l.value.changes)this._lastDocuments.push(a),a.handleEdit(u,c);l.selection.changes.length>0&&(a.handleSelection(l.selection.value.at(0)),this._lastDocuments.push(a))})),i.add(Ra(()=>{let l=this._documentState.get(r.id);l&&this._lastDocuments.remove(l),this._documentState.delete(r.id)}))},r=>r.id).recomputeInitiallyAndOnChange(this._store)}async getHistoryContext(n,r=5,i=100){let o=this._documentState.get(n);if(!o||!this._lastDocuments.has(o)||!await this.workspace.getDocument(n))return;let a=[],l=!1;for(let c of this._lastDocuments.getItemsReversed()){let u=c.getRecentEdit(r,i);if(u!==void 0){if(u.editCount===0&&l)break;if(await this.workspace.getDocument(c.docId)&&(c.docId===n&&(l=!0),a.push(u.history),r-=u.editCount,r<=0))break}}if(a.reverse(),!!a.some(c=>c.docId===n))return new Gj(a)}_isAwaitingGitCheckoutCooldown(){if(!this._lastGitCheckout)return!1;let n=iR()-this._lastGitCheckout<2*1e3;return n||(this._lastGitCheckout=void 0),n}getRecentDocumentUris(){return this._lastDocuments.getItems().map(n=>n.docId.uri)}},f0e=class t{constructor(e,n,r,i){this.docId=e;this.languageId=r;this._edits=[];this._isUserDocument=!1;this._baseValue=new ql(n),this._currentValue=this._baseValue,this.handleSelection(i)}static{s(this,"DocumentState")}static{this.MAX_EDITED_LINES_PER_EDIT=10}static{this.MAX_EDITED_CHARS_PER_EDIT=5e3}getSelection(){return this._selection}handleSelection(e){e&&(this._isUserDocument=!0),this._selection=e}handleEdit(e,n){if(e.isEmpty())return;this._currentValue=this._currentValue.apply(e);let r=oR.fromEdit(e,this._currentValue),i=Q9.fromTextEdit(r);if(n){this._baseValue=this._currentValue,this._edits=[];return}function o(l){return $j(l.edits,c=>c.newText.length)}s(o,"editInsertSize");let a=this._edits.at(-1);a&&o(a.edit)<200&&wPt(e,a.edit)?(a.edit=a.edit.compose(e),a.textLengthEdit=a.textLengthEdit.compose(i),a.instant=iR(),a.edit.isEmpty()&&this._edits.pop()):this._edits.push({edit:e,textLengthEdit:i,instant:iR()})}getRecentEdit(e,n){if(!this._isUserDocument)return;let{editCount:r}=this._applyStaleEdits(e,n),i=new oA(this._edits.map(o=>o.edit));return{history:new jj(this.docId,this.languageId,this._baseValue,i,this._selection),editCount:r}}applyAllEdits(){this._baseValue=this._currentValue,this._edits=[]}_applyStaleEdits(e,n){let r=this._currentValue,i=Es.empty,o=Q9.empty,a,l=0,c=Es.empty;for(a=this._edits.length-1;a>=0;a--){let u=this._edits[a];if(iR()-u.instant>10*60*1e3)break;let d=u.textLengthEdit.compose(o),p=d.getRange();sj(p,"we only compose non-empty Edits");let m=p.endLineNumber-p.startLineNumber;if(n>0&&m>n)break;let h=$j(u.textLengthEdit.edits,P=>P.range.endLineNumber-P.range.startLineNumber+P.newLength.lineCount);if(h>t.MAX_EDITED_LINES_PER_EDIT||$j(u.edit.edits,P=>P.newText.length)>t.MAX_EDITED_CHARS_PER_EDIT||$j(u.edit.edits,P=>P.range.length)>t.MAX_EDITED_CHARS_PER_EDIT)break;if(a===this._edits.length-1)c=u.edit;else{let P=Es.trySwap(u.edit,c);if(P)c=P.e1;else{if(h>=2)break;c=u.edit.compose(c)}}let v=u.edit.inverseOnString(r.value);r=r.apply(v);let b=u.edit.compose(i),E=Lo.fromEdit(new nu(r,b)),k=new sA(r,E).removeCommonSuffixPrefixLines().edit.edits.length;if(k>e)break;l=k,i=b,o=d}for(let u=0;u<=a;u++){let d=this._edits[u];this._baseValue=this._baseValue.apply(d.edit)}return this._edits=this._edits.slice(a+1),{editCount:l}}toString(){return new oA(this._edits.map(e=>e.edit)).toHumanReadablePatch(this._baseValue)}};function $j(t,e){let n=0;for(let r of t)n+=e(r);return n}s($j,"sum");function wPt(t,e){let n=e.getNewRanges();return t.edits.every(r=>_Pt(r.range,n))}s(wPt,"editExtends");function _Pt(t,e){return e.some(n=>t.start===n.endExclusive||t.endExclusive===n.start)}s(_Pt,"doesTouch");var p0e=class{constructor(e){this.maxSize=e;this._arr=[]}static{s(this,"FifoSet")}push(e){let n=this._arr.indexOf(e);n!==-1?this._arr.splice(n,1):this._arr.length>=this.maxSize&&this._arr.shift(),this._arr.push(e)}remove(e){let n=this._arr.indexOf(e);n!==-1&&this._arr.splice(n,1)}getItems(){return this._arr}getItemsReversed(){let e=[...this._arr];return e.reverse(),e}has(e){return this._arr.indexOf(e)!==-1}};var LOe=10,lh=class{constructor(e){this.lastResultsById=new Kn(LOe);this.lastResultsByUri=new Kn(LOe);this.ctx=e}static{s(this,"NextEditSuggestionsManager")}async handleNextEditRequest(e,n,r){let i=await(this.nextEditProvider??=this.createNextEditProvider()),o=this.lastResultsByUri.get(e);o&&(this.lastResultsByUri.delete(e),this.lastResultsById.delete(o.resultId),o.isShown&&i.handleRejection(o.documentId,o.nextEditResult));let a=ih.create(e),l=await i.getNextEdit(a,{triggerKind:1},r);if(l.result==null)return;let c=await this.ctx.get(Nn).getTextDocument({uri:e});if(!c)return;let u=c.positionAt(l.result.edit.range.start),d=c.positionAt(l.result.edit.range.endExclusive),p=an(),m={resultId:p,nextEditResult:l,documentId:a,isShown:!1};return this.lastResultsById.set(p,m),this.lastResultsByUri.set(e,m),[{edit:{text:l.result?.edit.newText??"",range:{start:u,end:d},textDocument:{uri:e,version:n}},id:p}]}async handleAcceptance(e){let n=await this.nextEditProvider,r=this.lastResultsById.get(e);!n||!r||r.resultId===e&&(this.lastResultsByUri.delete(r.documentId.uri),this.lastResultsById.delete(r.resultId),await n.handleAcceptance(r.documentId,r.nextEditResult))}async handleShown(e){let n=await this.nextEditProvider,r=this.lastResultsById.get(e);!n||!r||r.resultId===e&&(r.isShown=!0,n.handleShown(r.nextEditResult))}async createNextEditProvider(){let e=await _Oe(this.ctx),n;try{let o=await this.ctx.get(Dt).updateExPValuesAndAssignments(),a=SPt(this.ctx,o);n=e.createInstance(a?xp:_y)}catch{n=e.createInstance(_y)}let r=this.ctx.get(Lm),i=new zj(r);return await wI.catch(()=>{}),e.createInstance(PR,r,n,i,new wj(r))}};function SPt(t,e){let n=Ai(t,wt.NESXTab);return n!==void 0?n:t.get(Dt).enableNESXTab(e)}s(SPt,"shouldUseXTab");f();var FOe=je(ri());var Yj=class extends Lm{constructor(n){super();this._openDocuments=Nm(this,[]);this.openDocuments=this._openDocuments;this._documents=new Map;this.ctx=n,this._started=!1,this.start()}static{s(this,"ObservableLspWorkspace")}start(){if(this._started)return;this._started=!0;let n=this.ctx.get(Nn);for(let r of n.getTextDocumentsUnsafe())r&&this.addLspDocument(r.uri,r.clientLanguageId,r.getText());n.onDidOpenTextDocument(async r=>{this.addLspDocument(r.document.uri,r.document.languageId,r.document.text)}),n.onDidCloseTextDocument(async r=>{this.removeClosedLspDocument(r.document.uri)}),n.onDidChangeTextDocument(async r=>{this.onDidChangeLspDocument(r.document.uri,r.contentChanges)})}addLspDocument(n,r,i){let o=ih.create(n);return this.addDocument({id:o,initialValue:i,languageId:f2.create(r)},void 0)}onDidChangeLspDocument(n,r){let i=ih.create(n),o=this._documents.get(i);o&&o.applyLspContentChanges(r)}onUserPositionChange(n,r){let i=ih.create(n),o=this._documents.get(i);o&&o.updateSelectionFromLspPosition(r)}removeClosedLspDocument(n){let r=ih.create(n);this._documents.get(r)?.dispose()}addDocument(n,r=void 0){let i=this._documents.get(n.id);if(i)return i;let o=new m0e(n.id,new ql(n.initialValue??""),[],n.languageId??f2.PlainText,()=>{this._documents.delete(n.id);let a=this._openDocuments.get(),l=a.filter(c=>c.id!==o.id);l.length!==a.length&&this._openDocuments.set(l,r,{added:[],removed:[o]})},n.workspaceRoot);return this._documents.set(n.id,o),this._openDocuments.set([...this._openDocuments.get(),o],r,{added:[o],removed:[]}),o}async getDocument(n){if(await this.ctx.get(Nn).getTextDocument(n))return this._documents.get(n)}clear(){this._openDocuments.set([],void 0,{added:[],removed:this._openDocuments.get()});for(let n of this._documents.values())n.dispose();this._documents.clear()}getWorkspaceRoot(n){return this._documents.get(n)?.workspaceRoot}},m0e=class extends YU{static{s(this,"MutableObservableLspDocument")}constructor(e,n,r,i,o,a){super(e,n,r,i,o,a)}applyLspContentChanges(e){let n=this.editFromLspContentChanges(e);this.applyEdit(n.compose(),void 0)}updateSelectionFromLspPosition(e){let n=this.value.get().getTransformer().getOffset(new rr(e.lineNumber+1,e.column+1));this.updateSelection([new Rt(n,n)])}editFromLspContentChanges(e){return new oA(e.map(r=>this.editFromLspContentChange(r)))}editFromLspContentChange(e){if(FOe.TextDocumentContentChangeEvent.isIncremental(e)){let n=this.value.get().getTransformer(),r=n.getOffset(new rr(e.range.start.line+1,e.range.start.character+1)),i=n.getOffset(new rr(e.range.end.line+1,e.range.end.character+1));if(r>i)throw new dr(`Invalid range: [${r}, ${i}) from ${JSON.stringify(e.range)}`);return Es.replace(new Rt(r,i),e.text)}throw new Error("Full replacement edits are not supported")}};f();var MOe=require("crypto"),hA=je(require("fs/promises")),QOe=require("os"),Ry=je(require("path"));var ky=class{constructor(e){this.ctx=e;this.logger=new Tt("ripgrep")}static{s(this,"RipgrepPathResolver")}async resolvePath(){if(this.rgPath)return this.rgPath;let e=process.platform,n=process.arch;return this.rgPath=await this.resolvePathByOs(e,n),this.rgPath}async resolvePathByOs(e,n){if(this.logger.debug(this.ctx,`Start resolving ripgrep path for platform: ${e} and architecture: ${n}`),n!=="arm64"&&n!=="x64")throw new Error(`Unsupported architecture: ${n}`);let r=e==="win32"?"rg.exe":"rg";this.logger.debug(this.ctx,`__filename is ${__filename}, __dirname is ${__dirname}`);let i=Ry.extname(__filename)===".ts"?Ry.resolve(__dirname,"../../../packages/ripgrep/bin"):Ry.resolve(__dirname,"./bin"),o=Ry.resolve(i,e,n,r);if("pkg"in process){this.logger.debug(this.ctx,"Running inside pkg binary, start to copy ripgrep to a temporary location");let a=await hA.readFile(o),l=(0,MOe.createHash)("sha256").update(a).digest("hex"),c=Ry.join((0,QOe.homedir)(),".cache/pkg",l);await hA.mkdir(c,{recursive:!0});let u=Ti(pl(o)),d=Ry.join(c,u);try{await hA.stat(d)}catch{await hA.copyFile(o,d),this.logger.debug(this.ctx,`Copied ripgrep to ${d}`)}o=d,e!=="win32"&&await hA.chmod(o,493).catch(p=>{this.logger.error(this.ctx,`Failed to set executable permission for ${o}: ${p}`)})}return o}};f();var OOe=require("child_process"),h0e=require("perf_hooks");var By=new Tt("ripgrepProcessManager"),ch=class{constructor(e,n,r){this.ctx=e;this.defaultTimeoutInMs=30*1e3;this.maxProcesses=4;this.maxPendingTasks=20;this.taskQueue=[];this.activeProcesses=new Set;this.maxProcesses=n??this.maxProcesses,this.maxPendingTasks=r??this.maxPendingTasks,By.debug(this.ctx,`initialized with maxProcesses: ${this.maxProcesses} and maxPendingTasks: ${this.maxPendingTasks}`)}static{s(this,"RipgrepProcessManager")}dispose(){By.debug(this.ctx,`Disposing ripgrep process manager with ${this.activeProcesses.size} active processes`),this.activeProcesses.forEach(e=>{if(!e.killed)try{e.kill()}catch(n){By.error(this.ctx,"Failed to kill process. ",n)}}),this.activeProcesses.clear()}execute(e,n,r,i,o){return new Promise((a,l)=>{if(this.taskQueue.length>=this.maxPendingTasks){By.error(this.ctx,`Task queue limit reached: ${this.maxPendingTasks}`),l(new Error(`Task queue limit of ${this.maxPendingTasks} reached`));return}if(o!==void 0&&o<=0){By.error(this.ctx,`Invalid timeout value: ${o}`),l(new Error(`Invalid timeout value: ${o}`));return}By.debug(this.ctx,`Adding task to queue: ${e} ${n.join(" ")}`),this.taskQueue.push({id:rG(),command:e,args:n,options:i,resolve:a,reject:l,timeoutInMs:o??this.defaultTimeoutInMs,token:r});let c=this.taskQueue.map(u=>this.getTaskSimpleInfo(u)).join(`
`);By.debug(this.ctx,`Current task queue length: ${this.taskQueue.length}, task list: ${c}`),this.runNextTask()})}runNextTask(){if(this.taskQueue.length===0||this.activeProcesses.size>=this.maxProcesses)return;let e=this.taskQueue.shift(),n=h0e.performance.now();By.debug(this.ctx,`Starting task: ${this.getTaskSimpleInfo(e)}`);try{let r=(0,OOe.spawn)(e.command,e.args,e.options);this.activeProcesses.add(r);let i="",o="",a,l=s(()=>{a&&clearTimeout(a),this.activeProcesses.delete(r),r.stdout?.removeAllListeners(),r.stderr?.removeAllListeners(),r.removeAllListeners()},"cleanup");e.timeoutInMs&&(a=setTimeout(()=>{r.killed||(r.kill(),e.reject(new Error(`Process timed out after ${e.timeoutInMs} ms. Partial output: ${i}`))),l(),this.runNextTask()},e.timeoutInMs)),e.token&&e.token.onCancellationRequested(()=>{r.killed||(r.kill(),e.reject(new Error("Process was cancelled. Partial output: "+i))),l(),this.runNextTask()}),r.stdout?.on("data",c=>{i+=c.toString()}),r.stderr?.on("data",c=>{o+=c.toString()}),r.on("close",c=>{let d=h0e.performance.now()-n;By.debug(this.ctx,`Task ${e.id} completed in ${d} ms`),l(),c===0?e.resolve(i):c===1?e.resolve(""):e.reject(new Error(`Process exited with code ${c}: ${o}`)),this.runNextTask()}),r.on("error",c=>{l(),e.reject(new Error(`Failed to start process: ${c.message}`)),this.runNextTask()})}catch(r){e.reject(new Error(`Error spawning process: ${r.message}`)),this.runNextTask()}}getTaskSimpleInfo(e){return`${e.id} - ${e.command} ${e.args.join(" ")}`}};f();var LR=class extends Bg{static{s(this,"EmptyRecentEditsProvider")}isEnabled(){return!1}start(){}getRecentEdits(){return[]}getEditSummary(e){return null}};f();var UOe=100,qOe=1e3*60*5;function WOe(t){let e=new g0e(t);t.get(Ba).registerContextProvider(e),t.get(_g).add(e.id)}s(WOe,"registerRelatedFilesShim");var g0e=class{constructor(e){this.ctx=e;this.id="relatedFilesShim";this.selector=["*"];this.traitCache=new IB(UOe,qOe);this.relatedFilesCache=new IB(UOe,qOe);this.resolver={resolve:s(async(n,r)=>{let i=n.documentContext.uri,o=n.documentContext.languageId;return await this.getTraits(i,o,r)},"resolve")}}static{s(this,"RelatedFilesShim")}async getTraits(e,n,r){return this.traitCache.has(e)||await this.requestRelatedFilesAndTraits(e,n,n,r),this.traitCache.get(e)??[]}async requestRelatedFilesAndTraits(e,n,r,i){try{let o=await this.ctx.get(Dt).updateExPValuesAndAssignments({uri:e,languageId:r}),a={uri:e,clientLanguageId:n,detectedLanguageId:r},l=await tq(this.ctx,a,o,i,!0);if(i?.isCancellationRequested)return;let c=l.traits.filter(d=>d.includeInPrompt).map(d=>d.promptTextOverride?{name:"OtherInformation",value:d.promptTextOverride}:d),u=new Set;for(let d of l.entries.values())for(let p of d.keys())u.add(p);this.traitCache.set(e,c),this.relatedFilesCache.set(e,Array.from(u))}catch(o){I5(this.ctx,o,"relatedFilesShim")}}};f();f();f();var HOe=je(require("node:events"));var Kj="onWorkspaceWatcherChanged";var Jj=class{constructor(e,n){this.ctx=e;this.workspaceFolder=n;this.emitter=new HOe.default;this.status="created",this.startWatching()}static{s(this,"WorkspaceWatcher")}onFileChange(e){this.emitter.on(Kj,Eu(this.ctx,e,"WorkspaceWatcher.onFileChange"))}onFilesCreated(e){this.emitter.emit(Kj,{type:"create",documents:e,workspaceFolder:this.workspaceFolder})}onFilesUpdated(e){this.emitter.emit(Kj,{type:"update",documents:e,workspaceFolder:this.workspaceFolder})}onFilesDeleted(e){this.emitter.emit(Kj,{type:"delete",documents:e,workspaceFolder:this.workspaceFolder})}};var iu=class{constructor(e){this.ctx=e;this.watchers=new Kn(25)}static{s(this,"WorkspaceWatcherProvider")}getWatcher(e){let n=this.watchers.get(e.uri);if(n)return n;let r=this.getParentFolder(e.uri);return r?this.watchers.get(r):void 0}getParentFolder(e){return[...this.watchers.keys()].find(r=>{let i=r.replace(/[#?].*/,"").replace(/\/?$/,"/");return e!==r&&e.startsWith(i)})}hasWatcher(e){return this.getParentFolder(e.uri)||this.getWatcher(e)!==void 0}startWatching(e){if(Ln.debug(this.ctx,`WorkspaceWatcherProvider - Start watching workspace ${e.uri}`),this.hasWatcher(e)){this.getWatcher(e)?.startWatching();return}let n=this.createWatcher(e);this.watchers.set(e.uri,n)}stopWatching(e){this.getWatcher(e)?.stopWatching()}terminateSubfolderWatchers(e){let n=[];for(let o of this.watchers.values())n.push(o.workspaceFolder);let r=e.uri.replace(/[#?].*/,"").replace(/\/?$/,"/"),i=n.filter(o=>o.uri!==e.uri&&o.uri.startsWith(r));for(let o of i)this.terminateWatching(o);return i}terminateWatching(e){if(this.getWatcher(e)?.status!=="stopped")return this.stopWatching(e),this.watchers.delete(e.uri);this.watchers.delete(e.uri)}onFileChange(e,n){this.getWatcher(e)?.onFileChange(n)}async getWatchedFiles(e){return await this.getWatcher(e)?.getWatchedFiles()??[]}getStatus(e){return this.getWatcher(e)?.status}};var FR=class{static{s(this,"WorkspaceLifecycleListener")}start(){}onWorkspaceAdded(e){}onWorkspaceRemoved(e){}onWorkspaceSubfoldersTerminated(e,n){}onFileChange(e){}},RPt="workspaceLifecycleManager",ou=new Tt(RPt),gA=class t{constructor(e){this.ctx=e;this.activeListeners=[];this.watchedWorkspaces=[];this.ctx=e;let n=ia(e,async()=>{n.dispose(),await this.start()})}static{s(this,"WorkspaceLifecycleManager")}async start(){for(let e of this.activeListeners)await e.isEnabled()?e.isStarted()?ou.debug(this.ctx,`listener ${e.constructor.name} is already started`):(ou.debug(this.ctx,`starting listener ${e.constructor.name}`),await e.start()):ou.debug(this.ctx,`listener ${e.constructor.name} is not enabled`);ou.debug(this.ctx,"WorkspaceLifecycleManager started"),this.ctx.get(O0).onChange(e=>{this.onWorkspacesAdded(e.added,this.ctx),this.onWorkspacesRemoved(e.removed,this.ctx)}),await this.onWorkspacesAdded(this.ctx.get(Nn).getWorkspaceFolders(),this.ctx)}static isSubfolder(e,n){let r=e.uri,i=n.uri.replace(/[#?].*/,"").replace(/\/?$/,"/");return r!==i&&r.startsWith(i)}async onWorkspacesAdded(e,n){if(!e.length){ou.debug(n,"No workspaces to add.");return}ou.debug(n,`Adding workspaces: ${e.map(l=>l.uri).join(", ")}`);let r=[...this.watchedWorkspaces,...e];ou.debug(n,`Combined workspaces: ${r.map(l=>l.uri).join(", ")}`);let i=r.filter((l,c,u)=>u.findIndex(d=>d.uri===l.uri)===c&&!u.some(d=>t.isSubfolder(l,d)));ou.debug(n,`Filtered workspaces: ${i.map(l=>l.uri).join(", ")}`);let o=i.filter(l=>!this.watchedWorkspaces.some(c=>c.uri===l.uri));ou.debug(n,`New workspaces: ${o.map(l=>l.uri).join(", ")}`);let a=this.watchedWorkspaces.filter(l=>!i.some(c=>c.uri===l.uri));ou.debug(n,`Removed workspaces: ${a.map(l=>l.uri).join(", ")}`),this.watchedWorkspaces=i;for(let l of a){ou.debug(n,`Terminating watching for removed workspace: ${l.uri}`),n.get(iu).terminateWatching(l);for(let u of this.activeListeners)ou.debug(n,`Notifying listener of removed workspace: ${l.uri}`),await u.onWorkspaceRemoved(l)}for(let l of o){if(!l.uri)continue;ou.debug(n,`Starting to watch new workspace: ${l.uri}`);let c=n.get(iu);if(c.shouldStartWatching(l)){c.startWatching(l);let u=c.terminateSubfolderWatchers(l);if(u.length){ou.debug(n,`Terminated subfolder watchers for workspace: ${l.uri}, Subfolders: ${u.map(d=>d.uri).join(", ")}`);for(let d of this.activeListeners)await d.onWorkspaceSubfoldersTerminated(l,u)}for(let d of this.activeListeners)ou.debug(n,`Adding file change listener for workspace: ${l.uri}`),c.onFileChange(l,d.onFileChange.bind(d))}}for(let l of this.activeListeners)for(let c of o)ou.debug(n,`Notifying ${l.constructor.name} of added workspace: ${c.uri}`),await l.onWorkspaceAdded(c)}async onWorkspacesRemoved(e,n){if(e.length)for(let r of e){if(!r.uri)continue;n.get(iu).terminateWatching(r),this.watchedWorkspaces=this.watchedWorkspaces.filter(o=>o.uri!==r.uri);for(let o of this.activeListeners)await o.onWorkspaceRemoved(r)}}addListener(e){this.activeListeners.push(e)}removeListener(e){this.activeListeners=this.activeListeners.filter(n=>n!==e)}removeAllListeners(){this.activeListeners=[]}};function Xj(t){t.set(gA,new gA(t))}s(Xj,"setupWorkspaceLifecycleListener");f();f();var Zj=class{constructor(){this._tools=new Map}static{s(this,"ToolRegistry")}registerTool(e){this._tools.set(e.id,e)}unregisterTool(e){return this._tools.delete(e)}getTool(e){return this._tools.get(e)}listTools(){return Array.from(this._tools.values())}};f();f();f();f();var kPt=64;var Sb={id:"copilot",displayName:"Copilot Language Server",description:"Copilot Language Server tool provider",isFirstPartyTool:!0},AA={id:"copilot-editor",displayName:"Editor",description:"Editor tool provider",isFirstPartyTool:!0},A0e=class{static{s(this,"LanguageModelTool")}constructor(e){this.type=e.type,this.toolProvider=e.toolProvider,this.name=e.name,this.displayName=e.displayName??this.name,this.description=e.description,this.displayDescription=e.displayDescription??this.description,this.inputSchema=e.inputSchema,this.annotations=e.annotations,this.id=`${this.toolProvider.id}.${this.name}`,this.nameForModel=(this.toolProvider.isFirstPartyTool?this.name:`${this.toolProvider.displayNamePrefix??this.toolProvider.id}_${this.name}`).slice(0,kPt)}},_b=class extends A0e{static{s(this,"BaseLanguageModelTool")}constructor(e){super(e)}},Ci=class{static{s(this,"LanguageModelTextPart")}constructor(e){this.value=e}},CT=class{static{s(this,"LanguageModelDataPart")}constructor(e){this.value=e}},xT=class{static{s(this,"LanguageModelPromptTsxPart")}constructor(e){this.value=e}};var Gi=class{static{s(this,"LanguageModelToolResult")}constructor(e,n){this.status=n,this.content=e}},jOe=I.Object({content:I.Array(I.Union([I.Object({value:I.String()}),I.Object({value:I.Unknown()})])),status:I.Optional(I.Union([I.Literal("success"),I.Literal("error"),I.Literal("cancelled")]))}),eV=(n=>(n.Accept="accept",n.Dismiss="dismiss",n))(eV||{}),VOe=I.Object({result:I.Enum(eV)});var bp=class extends _b{static{s(this,"ClsLanguageModelTool")}constructor(e){super({...e,toolProvider:Sb,type:"shared"})}};f();var BPt=new Map([["copilot_semanticSearch","semantic_search"],["copilot_readFile","read_file"],["copilot_listDir","list_dir"],["copilot_getErrors","get_errors"],["copilot_runInTerminal","run_in_terminal"],["copilot_insertEdit","insert_edit_into_file"],["copilot_createFile","create_file"],["copilot_replaceString","replace_string_in_file"],["copilot_updateUserPreferences","update_user_preferences"],["copilot_fileSearch","file_search"],["copilot_findTextInFiles","grep_search"]]),PPt=new Map;for(let[t,e]of BPt)PPt.set(e,t);f();function MR(t){return`[${Ti(t)}](${t})`}s(MR,"formatUriForFileWidget");function yA(t){let e=DPt(t);if(!e)throw new Error(`Invalid input path: ${t}. Be sure to use an absolute path.`);return e}s(yA,"resolvePathInput");function DPt(t){if(t.startsWith("/")||zOe()&&LPt(t)||zOe()&&t.startsWith("\\\\"))return pl(t)}s(DPt,"resolveFsUri");function zOe(){return process.platform==="win32"}s(zOe,"isWindows");function NPt(t){return t>=65&&t<=90||t>=97&&t<=122}s(NPt,"isWindowsDriveLetter");function LPt(t){return NPt(t.charCodeAt(0))&&t.charCodeAt(1)===58}s(LPt,"hasDriveLetter");function O9(t){let e="";return t.length>0&&(e=t.map(n=>n instanceof Ci?n.value:n instanceof xT?"":n instanceof CT?JSON.stringify(n.value):"").join(`
`)),e===""?"(empty)":e}s(O9,"parseToolResultToString");function tV(t){let{content:e}=t;return{message:O9(e)}}s(tV,"formatToolErrorResult");function YOe(t){let{content:e}=t;return{data:e.map(n=>n instanceof Ci?{type:"text",value:n.value}:n instanceof xT?{type:"text",value:"<unsupported>"}:n instanceof CT?{type:"data",value:{mimeType:n.value.mimeType,data:n.value.data}}:{type:"text",value:""})}}s(YOe,"formatToolSuccessResult");var nV=class extends bp{static{s(this,"EditFileTool")}constructor(){super({name:"insert_edit_into_file",displayName:"Edit File",description:`Edit a file in the workspace. Use this tool once per file that needs to be modified, even if there are multiple changes for a file. Generate the "explanation" property first.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
	return this.age;
	}
}`,displayDescription:"Edit a file in the workspace.",inputSchema:I.Object({filePath:I.String({description:"The absolute path of the file to edit."}),code:I.String({description:`The code change to apply to the file.
The system is very smart and can understand how to apply your edits to the files, you just need to provide minimal hints.
Avoid repeating existing code, instead use comments to represent regions of unchanged code. Be as concise as possible. For example:
// ...existing code...
{ changed code }
// ...existing code...
{ changed code }
// ...existing code...

Here is an example of how you should use format an edit to an existing Person class:
class Person {
	// ...existing code...
	age: number;
	// ...existing code...
	getAge() {
		return this.age;
	}
}`}),explanation:I.String({description:"A short explanation of the edit being made."})})})}async invoke(e,n,r){try{let i=await this.mapCode(n.input,e,r),o=await this.invokeClientEditFileTool(e,n,i,r);return this.getFinalEditFileResult(n,o)}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new Gi([new Ci(o)],"error")}}async mapCode(e,n,r){let{filePath:i}=e,o=yA(i);if(!o)throw new Error(`Invalid file path: ${i}`);return await new tR(n.ctx).mapCode({code:e.code,resource:o,markdownBeforeBlock:e.explanation},n.toLlmInteraction(),r,void 0,!0)}async invokeClientEditFileTool(e,n,r,i){let o=e.ctx.get(su).getToolByNameAndProvider("insert_edit_into_file",AA);if(!o)throw new Error("Client tool insert_edit_into_file is not registered");return e.ctx.get(su).invokeTool(e,o.id,{toolInvocationToken:n.toolInvocationToken,input:{filePath:n.input.filePath,code:r,explanation:n.input.explanation},roundId:n.roundId,toolCallId:n.toolCallId},i)}getFinalEditFileResult(e,n){if(n.status!=="success")return n;let r=O9(n.content),i=WS({uri:yA(e.input.filePath),languageId:"UNKNOWN"}),o=[];o.push(`<file_after_edit path="${e.input.filePath}">`),o.push("This is the new state of the file after the edit. Base future edits off of this file, no need to read it again, unless a terminal command may have changed it.");let a=new q0({code:r,languageId:i,noFilePath:!0});return o.push(...a.renderAsArray()),o.push("</file_after_edit>"),new Gi([new Ci(o.join(`
`))],"success")}prepareInvocation(e,n){let{input:r}=e;if(!r.filePath.length)return{progressMessage:"Running insert_edit_into_file tool"};let i=yA(r.filePath);return{progressMessage:`Editing ${MR(i)}`}}static toEditFileParams(e){if(typeof e.filePath!="string")throw new Error("filePath must be a string");if(typeof e.code!="string")throw new Error("code must be a string");if(typeof e.explanation!="string")throw new Error("explanation must be a string");return{filePath:e.filePath,code:e.code,explanation:e.explanation}}};f();var KOe=new Tt("findFilesTool"),rV=class t extends bp{static{s(this,"FindFilesTool")}static{this.timeOutInSeconds=15}constructor(){super({name:"file_search",displayName:"Find Files",description:`Search for files in the workspace by glob pattern. This only returns the paths of matching files. Use this tool when you know the exact filename pattern of the files you're searching for. Glob patterns match from the root of the workspace folder. Examples:
- **/*.{js,ts} to match all js/ts files in the workspace.
- src/** to match all files under the top-level src folder.
- **/foo/**/*.js to match all js files under any foo folder in the workspace.`,displayDescription:"Search for files in the workspace by glob pattern.",inputSchema:I.Object({query:I.String({description:"Search for files with names or paths matching this glob pattern."}),maxResults:I.Optional(I.Number({description:"The maximum number of results to return. Do not use this unless necessary, it can slow things down. By default, only some matches are returned. If you use this and don't see what you're looking for, you can try again with a more specific query or a larger maxResults."}))})})}async invoke(e,n,r){try{let i;try{if(r.isCancellationRequested)return new Gi([new Ci("Cancelled")],"cancelled");i=await e.ctx.get(ky).resolvePath()}catch(g){throw new Error(`Failed to run file_search since failed to get ripgrep path: ${String(g)}`)}let{query:o,maxResults:a=20}=n.input,l=e.turn.workspaceFolders;if(!l?.length)return new Gi([new Ci("Failed to invoke tool file_search since no workspace folders found")],"error");let c=e.ctx.get(ch),u={},d=l.map(async g=>{if(r.isCancellationRequested)throw new Error("Canceled");try{KOe.debug(e.ctx,`Start searching for query ${o} in workspace folder: ${g.uri.toString()}`);let y=await c.execute(i,["--files","-g",o],r,{cwd:aa(g.uri)},t.timeOutInSeconds*1e3);KOe.debug(e.ctx,`Finished searching for query ${o} in workspace folder: ${g.uri.toString()} with results: ${y}`),u[g.uri.toString()]=y.split(`
`).map(v=>v.trim()).filter(v=>v.length>0).map(v=>`${aa(ko(g.uri,v))}`)}catch(y){let v=y instanceof Error?y.message:"An unknown error occurred";throw new Error(`Error processing workspace folder ${g.uri.toString()}: ${v}`)}});try{await Promise.all(d)}catch(g){let y=g instanceof Error?g.message:"An unknown error occurred";return new Gi([new Ci(y)],"error")}let p=[],m=a;for(;m>0;){let g=!1;for(let y in u)u[y].length>0&&m>0&&(p.push(u[y].shift()),m--,g=!0);if(!g)break}let h=p.length===0?`No files found matching query: ${o}`:p.length===1?`Found 1 file matching query: ${o}
${p[0]}`:`Found ${p.length} files matching query: ${o}
${p.join(`
`)}`;return new Gi([new Ci(h)],"success")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new Gi([new Ci(o)],"error")}}prepareInvocation(e,n){let{input:r}=e;return r.query.length?{progressMessage:`Searching for files matching query: ${r.query}`}:{progressMessage:"Running file_search tool"}}static toFindFilesParams(e){if(typeof e.query!="string")throw new Error("query must be a string");if(e.maxResults!=null&&(typeof e.maxResults!="number"||e.maxResults<0))throw new Error("maxResults must be a positive number or undefined");return{query:e.query,maxResults:typeof e.maxResults=="number"?e.maxResults:void 0}}};f();var JOe=new Tt("findTextInFilesTool"),iV=class t extends bp{static{s(this,"FindTextInFilesTool")}static{this.timeOutInSeconds=15}constructor(){super({name:"grep_search",displayName:"Find Text In Files",description:"Do a text search in the workspace. Use this tool when you know the exact string you're searching for.",displayDescription:"Do a text search in the workspace.",inputSchema:I.Object({query:I.String({description:"The pattern to search for in files in the workspace. Can be a regex or plain text pattern"}),isRegexp:I.Optional(I.Boolean({description:"Whether the pattern is a regex. False by default."})),includePattern:I.Optional(I.String({description:"Search files matching this glob pattern. Will be applied to the relative path of files within the workspace."}))})})}async invoke(e,n,r){try{let i;try{if(r.isCancellationRequested)return new Gi([new Ci("Cancelled")],"cancelled");i=await e.ctx.get(ky).resolvePath()}catch(v){throw new Error(`Failed to run grep_search since failed to get ripgrep path: ${String(v)}`)}let{query:o,isRegexp:a=!1,includePattern:l}=n.input,c=20,u=e.turn.workspaceFolders;if(!u?.length)return new Gi([new Ci("Failed to invoke tool grep_search since no workspace folders found")],"error");let d=e.ctx.get(ch),p={},m=u.map(async v=>{if(r.isCancellationRequested)throw new Error("Canceled");try{JOe.debug(e.ctx,`Start searching for query ${o} in workspace folder: ${v.uri.toString()}`);let b=[a?"--regexp":"--fixed-strings",o,...l?["-g",l]:[],"--no-heading","--line-number","--color","never",aa(v.uri)],E=await d.execute(i,b,r,{cwd:aa(v.uri)},t.timeOutInSeconds*1e3);JOe.debug(e.ctx,`Finished searching for query ${o} in workspace folder: ${v.uri.toString()} with results: ${E}`),p[v.uri.toString()]=E.split(`
`).map(_=>_.trim()).filter(_=>_.length>0)}catch(b){let E=b instanceof Error?b.message:"An unknown error occurred";throw new Error(`Error processing workspace folder ${v.uri.toString()}: ${E}`)}});try{await Promise.all(m)}catch(v){let b=v instanceof Error?v.message:"An unknown error occurred";return new Gi([new Ci(b)],"error")}let h=[],g=c;for(;g>0;){let v=!1;for(let b in p)p[b].length>0&&g>0&&(h.push(p[b].shift()),g--,v=!0);if(!v)break}let y=h.length===0?`Searched text for ${o}, no results`:h.length===1?`Searched text for: ${o}, 1 result
${h[0]}`:`Searched text for: ${o}, ${h.length} results
${h.join(`
`)}`;return new Gi([new Ci(y)],"success")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new Gi([new Ci(o)],"error")}}prepareInvocation(e,n){let{input:r}=e;return r.query.length?{progressMessage:`Searching for text in files matching query: ${r.query}`}:{progressMessage:"Running grep_search tool"}}static toFindTextInFilesParams(e){if(typeof e.query!="string")throw new Error("query must be a string");if(e.isRegexp!==void 0&&typeof e.isRegexp!="boolean")throw new Error("isRegexp must be a boolean");if(e.includePattern!==void 0&&typeof e.includePattern!="string")throw new Error("includePattern must be a string");return{query:e.query,isRegexp:e.isRegexp??!1,includePattern:e.includePattern}}};f();var oV=class extends bp{static{s(this,"ListDirTool")}constructor(){super({name:"list_dir",displayName:"List Directory",description:"List the contents of a directory. Result will have the name of the child. If the name ends in /, it's a folder, otherwise a file",displayDescription:"List the contents of a directory",inputSchema:I.Object({path:I.String({description:"The absolute path to the directory to list."})})})}async invoke(e,n,r){let{path:i}=n.input,o=yA(i),l=await e.ctx.get(po).readDirectory(o.toString());return l.length===0?new Gi([new Ci("Folder is empty")],"success"):new Gi([new Ci(l.map(([c,u])=>`${c}${u&2?"/":""}`).join(`
`))],"success")}prepareInvocation(e,n){let r=yA(e.input.path);return{progressMessage:`Reading directory ${MR(r)}`}}static toListDirParams(e){if(typeof e.path!="string")throw new Error("path must be a string");return{path:e.path}}};f();var sV=class extends bp{static{s(this,"ReadFileTool")}constructor(){super({name:"read_file",displayName:"Read File",description:`Read the contents of a file.

You must specify the line range you're interested in, and if the file is larger, you will be given an outline of the rest of the file. If the file contents returned are insufficient for your task, you may call this tool again to retrieve more content.`,displayDescription:"Read a file in the workspace.",inputSchema:I.Object({filePath:I.String({description:"The absolute path of the file to read."}),startLineNumberBaseZero:I.Number({description:"The line number to start reading from, 0-based."}),endLineNumberBaseZero:I.Number({description:"The inclusive line number to end reading at, 0-based."})})})}async invoke(e,n,r){try{let{filePath:i,startLineNumberBaseZero:o,endLineNumberBaseZero:a}=n.input,l=yA(i);if(!l)throw new Error(`Invalid file path: ${i}`);let u=await e.ctx.get(Nr).getOrReadTextDocument({uri:l});if(u.status==="valid"){let d=new q0({code:u.document.getText({start:{line:o,character:0},end:{line:a+1,character:0}}),languageId:u.document.detectedLanguageId,uri:l});return new Gi([new Ci(d.renderAsString(`
`))],"success")}else return new Gi([new Ci(`Failed to read file ${i} with result ${JSON.stringify(u)}`)],"error")}catch(i){let o=i instanceof Error?i.message:"An unknown error occurred";return new Gi([new Ci(o)],"error")}}prepareInvocation(e,n){let{input:r}=e;if(!r.filePath.length)return{progressMessage:"Running read_file tool"};let i=yA(r.filePath);return{progressMessage:`Reading file ${MR(i)}`}}static toReadFileParams(e){if(typeof e.filePath!="string")throw new Error("filePath must be a string");if(typeof e.startLineNumberBaseZero!="number")throw new Error("startLineNumberBaseZero must be a number");if(typeof e.endLineNumberBaseZero!="number")throw new Error("endLineNumberBaseZero must be a number");return{filePath:e.filePath,startLineNumberBaseZero:e.startLineNumberBaseZero,endLineNumberBaseZero:e.endLineNumberBaseZero}}};function XOe(){return[new oV,new sV,new nV,new rV,new iV]}s(XOe,"getAllClsTools");var su=class{constructor(e){this.ctx=e;this._toolRegistry=new Zj;for(let n of XOe())this._toolRegistry.registerTool(n)}static{s(this,"ToolsService")}registerTool(e){this._toolRegistry.registerTool(e)}unregisterTool(e){return typeof e=="string"?this._toolRegistry.unregisterTool(e):this._toolRegistry.unregisterTool(e.id)}prepareInvocation(e,n,r){let i=this._toolRegistry.getTool(e);if(!i)throw new Error(`Tool with id '${e}' is undefined`);return i.prepareInvocation?.(n,r)??{}}async invokeTool(e,n,r,i){if(i.isCancellationRequested)throw new Na;let o=this._toolRegistry.getTool(n);if(!o)throw new Error(`Tool with id '${n}' is undefined`);return await o.invoke?.(e,r,i)??new Gi([],"success")}async invokeToolConfirmation(e,n,r,i){if(i.isCancellationRequested)throw new Na;let o=this._toolRegistry.getTool(n);if(!o)throw new Error(`Tool with id '${n}' is undefined`);return await o.invokeConfirmation?.(e,r,i)??{result:"dismiss"}}getToolById(e){return this._toolRegistry.getTool(e)}getToolByNameAndProvider(e,n){return this._toolRegistry.listTools().find(r=>r.name===e&&r.toolProvider.id===n.id)}getToolsForModel(){return Array.from(this.getToolMapForModel().values())}getToolMapForModel(){let e=new Map;for(let c of this._toolRegistry.listTools())e.has(c.toolProvider.id)||e.set(c.toolProvider.id,[]),e.get(c.toolProvider.id)?.push(c);let n=e.get(Sb.id)?.find(c=>c.name==="insert_edit_into_file");n&&e.get(Sb.id)?.splice(e.get(Sb.id)?.indexOf(n)??0,1);let r=e.get(AA.id)?.find(c=>c.name==="insert_edit_into_file");r&&e.get(AA.id)?.splice(e.get(AA.id)?.indexOf(r)??0,1);let i=new Map;n&&r&&i.set(n.nameForModel,n);let o=e.get(AA.id)??[],a=e.get(Sb.id)??[],l=Array.from(e.entries()).filter(([c])=>c!==Sb.id&&c!==AA.id).flatMap(([,c])=>c);return o.forEach(c=>{i.has(c.nameForModel)||i.set(c.nameForModel,c)}),a.forEach(c=>{i.has(c.nameForModel)||i.set(c.nameForModel,c)}),l.forEach(c=>{i.has(c.nameForModel)||i.set(c.nameForModel,c)}),i}};f();f();var vT=class{static{s(this,"MultiLanguageContextProviderFeatureLifecycle")}async dispose(){}};f();var tUe=require("crypto"),y0e=require("fs"),C0e=je(require("path"));var ZOe="symbolDatabaseLookup",eUe="multiLanguageContextProviderDocumentSymbols",bT=class{constructor(e){this.persistenceManager=e}static{s(this,"WorkspaceDatabasePersistenceManager")}async getDBFilePath(e){await this.init();let n=await this.persistenceManager.read(ZOe,e);return n||(n=await this.createDBFile(e)),C0e.default.join(this.persistenceManager.directory,eUe,n)}async init(){let e=C0e.default.join(this.persistenceManager.directory,eUe);await this.createIfNotExists(e)}async dirExists(e){try{return await y0e.promises.access(e),!0}catch{return!1}}async createIfNotExists(e){try{await this.dirExists(e)||await y0e.promises.mkdir(e,{recursive:!0})}catch{throw new Error(`Failed to create directory: ${e}`)}}async createDBFile(e){let n=`${(0,tUe.randomUUID)()}.db`;return await this.persistenceManager.update(ZOe,e,n),n}async deleteDBFile(e){}};f();f();var ET=class{static{s(this,"FileSearch")}};f();var U9=class{constructor(e,n){this.workspaceUris=e;this.params=n}static{s(this,"FileWatcher")}};f();f();f();var aV=je(require("path")),nUe=require("worker_threads");function rUe(t,e){return new nUe.Worker(aV.default.resolve(aV.default.extname(__filename)!==".ts"?__dirname:aV.default.resolve(__dirname,"../../dist"),t),{workerData:e})}s(rUe,"createWorker");f();var lV=class{constructor(e){this.maxDegreeOfParalellism=e;this.outstandingPromises=[],this.runningPromises=0}static{s(this,"PriorityLimiter")}queue(e,n=!1){return new Promise((r,i)=>{n?this.outstandingPromises.unshift({factory:e,c:r,e:i}):this.outstandingPromises.push({factory:e,c:r,e:i}),this.consume()})}consume(){for(;this.outstandingPromises.length&&this.runningPromises<this.maxDegreeOfParalellism;){let e=this.outstandingPromises.shift();this.runningPromises++;let n=e.factory();n.then(e.c,e.e),n.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this.runningPromises--,this.outstandingPromises.length>0&&this.consume()}};var iUe=je(ri());var cV="main.js",uV=class{constructor(e,n,r=3){this.promiseResolvers=new Map;this.id=0;try{let i={cwd:process.cwd(),indexWorkspaceRoots:e,params:n};this.worker=rUe(cV,i),this.worker.on("message",this.handleWorkerMessage.bind(this)),this.worker.on("error",o=>{this.handleUnexpectedError(o)}),this.postMessageQueue=new lV(r)}catch(i){throw console.error(`Failed to create worker: ${i.message}`),i}}static{s(this,"IndexClient")}dispose(){return this.postMessageInQueue(new NQ(this.id++),iUe.CancellationToken.None,!0)}async indexFile(e,n,r){return await this.postMessageInQueue(new BQ(this.id++,e,n),r)}async getAllFileNames(e,n){return this.postMessageInQueue(new PQ(this.id++,e),n)}getContext(e,n,r,i,o,a){return this.postMessageInQueue(new DQ(this.id++,e,n,r,i,o),a,!0)}tryCreateIndex(e,n,r){return this.postMessageInQueue(new RQ(this.id++,e,n),r)}async postMessageInQueue(e,n,r=!1){return this.postMessageQueue.queue(()=>this.postMessageAndWait(e,n),r)}tryRemoveIndex(e,n){return this.postMessageAndWait(new kQ(this.id++,e),n)}async postMessageAndWait(e,n){if(this.fatalError)return Promise.reject(this.fatalError);let r=new Promise((o,a)=>{this.promiseResolvers.set(e.id,{resolve:o,reject:a})});this.worker.postMessage(e);let i=n.onCancellationRequested(()=>{this.worker.postMessage(new SQ(e.id))});try{return await r}finally{i.dispose()}}handleWorkerMessage(e){if(e.operation!=="response")throw new Error("Unexpected message operation");let n=this.promiseResolvers.get(e.id);if(!n)throw new Error(`Received response for message that isn't in progress: ${e.id}`);this.promiseResolvers.delete(e.id),e.error?(e.error.code=e.code,n.reject(e.error)):n.resolve(e.data)}handleUnexpectedError(e){let n;if(e instanceof Error){n=e,n.code==="MODULE_NOT_FOUND"&&n.message?.endsWith(cV+"'")&&(n=new Error(`Failed to load ${cV}`),n.code="CopilotPromptLoadFailure");let r=new Error().stack;n.stack&&r?.match(/^Error\n/)&&(n.stack+=r.replace(/^Error/,""))}else e&&typeof e=="object"&&"name"in e&&"status"in e&&e.name==="ExitStatus"&&typeof e.status=="number"?(n=new Error(`${cV} exited with status ${e.status}`),n.code=`CopilotPromptWorkerExit${e.status}`):n=new Error(`Non-error thrown: ${JSON.stringify(e)}`);for(let r of this.promiseResolvers.values())r.reject(n);this.promiseResolvers.clear(),this.fatalError=n}};var q9=je(ri());var $0=new Tt(gv),IT=class{constructor(e,n,r,i,o){this.ctx=e;this.watcher=n;this.workspaceDatabasePersistenceManager=r;this.workspaceInit=new Map;this.watcher.onFileChange(async(a,l)=>{await this.indexFile(l,this.languageId(l)??"plaintext")}),this.watcher.onWorkspaceChange(async(a,l)=>{if(a===1){$0.debug(this.ctx,`workspace removed: ${l}`),await this.indexClient.tryRemoveIndex(l,q9.CancellationToken.None);return}$0.debug(this.ctx,`workspace added: ${l}`),await this.indexAddedWorkspace(l)}),this.indexClient=new uV(i,o);for(let a of i){let l=a.rootPath;this.workspaceInit.set(l,this.doWorkspaceIndex(l).then(()=>{$0.debug(this.ctx,`workspace ${l} indexed`),this.workspaceInit.delete(l)}))}}static{s(this,"MultiLanguageContextIndexWatcher")}isInitializing(e){for(let[n]of this.workspaceInit)if(e.startsWith(n))return!0;return!1}dispose(){return this.indexClient.dispose()}async indexAddedWorkspace(e){let n=await MPt(e,this.workspaceDatabasePersistenceManager);await this.indexClient.tryCreateIndex(n.rootPath,n.databaseFilePath,q9.CancellationToken.None),this.workspaceInit.has(e)&&await this.workspaceInit.get(e);let r=this.doWorkspaceIndex(e).then(()=>{$0.debug(this.ctx,`workspace ${e} indexed`),this.workspaceInit.delete(e)});this.workspaceInit.set(e,r)}async doWorkspaceIndex(e){$0.debug(this.ctx,`indexing workspace ${e}`);let n=ene.map(d=>`*${d}`);if(n.length===0)return;let i=`**/${ene.length===1?n[0]:`{${n.join(",")}}`}`,o=this.ctx.get(ET),a=await Promise.all([o.findFiles(i,{uri:e},{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0,excludeIDESearchIgnoredFiles:!0}),this.indexClient.getAllFileNames(e,q9.CancellationToken.None)]),l=a[0],c=a[1],u=Array.from(new Set([...l,...c]));$0.debug(this.ctx,`found ${u.length} files to index in ${e}`),await Promise.all(u.map(async d=>{let p=this.languageId(d);p&&await this.indexFile(d.replace(/\/+$/,""),p)})),$0.debug(this.ctx,`finished indexing workspace ${e}`)}async indexFile(e,n){try{$0.debug(this.ctx,`index triggered for ${e}`),await this.indexClient.indexFile(e,n,q9.CancellationToken.None)}catch(r){$0.debug(this.ctx,`failed to index ${e} with ${r}`)}}languageId(e){return xTe(e)}};async function MPt(t,e){return{databaseFilePath:await e.getDBFilePath(t),rootPath:t}}s(MPt,"createIndexableWorkspaceFolder");f();f();var oUe=100,QPt=5e3,dV=class{static{s(this,"CachedContextFetcher")}constructor(){}runWithCache(e,n,r,i,o,a,l,c){let u=Date.now(),d=this.get(r,i,n,u);if(d)return this.incrementRefCount(d),c.onCancellationRequested(()=>this.decrementRefCount(d)),d.value;if(!a)return e(n,r,i,o,l,c);let p=new wr.CancellationTokenSource,m=s(()=>p.cancel(),"cancel"),h=e(n,r,i,o,l,p.token);return d=this.setBasedOnLastDelimiter(r,i,n,u,h,m),this.incrementRefCount(d),c.onCancellationRequested(()=>this.decrementRefCount(d)),h}get(e,n,r,i){if(this.cachedValue&&this.cachedValue.uri===r&&!(Math.abs(this.cachedValue.cursorPosition-n)>oUe)){if(n>this.cachedValue.cursorPosition){if(e.substring(this.cachedValue.cursorPosition,n).match(/[^A-Za-z0-9]/))return}else if(n<this.cachedValue.cursorPosition)return;if(!(i-this.cachedValue.timestamp>QPt))return this.cachedValue}}setBasedOnLastDelimiter(e,n,r,i,o,a){let l=e.substring(0,n),c=/[A-Za-z0-9]+$/.exec(l),u=n;c&&(u=c.index),n-u>oUe&&(u=n);let d={cursorPosition:u,uri:r,timestamp:i,fullText:e,value:o.finally(()=>{d.complete=!0}),refCount:0,cancel:a,uuid:an(),complete:!1};return this.cachedValue=d}incrementRefCount(e){e&&e.refCount++}decrementRefCount(e){e&&!e.complete&&(e.refCount--,e.refCount<=0&&e.cancel())}};var fV=class{constructor(e){this.id=gv;this.selector=Array.from(dQ.keys()).map(e=>({language:e}));try{this.documentManager=e.get(Nn),this.resolver=new x0e(this.documentManager,e)}catch(n){throw $0.error(e,"Failed to create multi-language context provider",n),n}}static{s(this,"MultiLanguageContextProvider")}},x0e=class{constructor(e,n){this.ctx=n;this.documentManager=e,this.cachedContextFetcher=new dV}static{s(this,"MultiLanguageContextResolver")}resolve(e,n){return this.resolveImpl(e,n)}async resolveImpl(e,n){let r=this.ctx.get(vT).indexWatcher;if(!r)return[];if(r.isInitializing(e.documentContext.uri))return[];let i=r.indexClient;try{let o=await this.documentManager.getTextDocument({uri:e.documentContext.uri});if(o===void 0||o?.version!==e.documentContext.version)return[];let a=e.documentContext.position,l=e.documentContext.proposedEdits??[],c=Pg(o,a);c=c.applyEdits(l);let u=O4e(e.activeExperiments),d=await this.cachedContextFetcher.runWithCache(i.getContext.bind(i),e.documentContext.uri,c.textDocument.getText(),c.textDocument.offsetAt(c.position),e.documentContext.languageId,c.editsWithPosition.length===0,u,n);return $0.debug(this.ctx,`Context items found for ${e.documentContext.uri}: ${d.map(p=>JSON.stringify(p)).join(", ")}`),d}catch(o){if(KM(o))return[];throw $0.error(this.ctx,"Failed to get context",o),o}}};var W9=class extends FR{constructor(n){super();this.started=!1;this.ctx=n,this.ctx.get(gA).addListener(this)}static{s(this,"AgentMultiLanguageContextProvider")}async start(){if(!this.started&&await this.isEnabled()&&!this.ctx.get(Ba).providers.some(n=>n.id===gv)){let n=this.ctx.get(bT);this.fileWatcher=new v0e([],{excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!1,excludeIDESearchIgnoredFiles:!1}),this.multiLanguageContextIndexWatcher=new IT(this.ctx,this.fileWatcher,n,[]),this.fileSearch=new b0e(this.ctx),this.ctx.set(U9,this.fileWatcher),this.ctx.set(ET,this.fileSearch),this.ctx.set(IT,this.multiLanguageContextIndexWatcher),this.ctx.get(Ba).registerContextProvider(new fV(this.ctx)),this.started=!0}}isStarted(){return this.started}async isEnabled(){let n=await this.ctx.get(Dt).updateExPValuesAndAssignments(),r=vU(this.ctx,n);return r.includes(gv)||r.length===1&&r[0]==="*"}async onWorkspaceAdded(n){await this.isEnabled()&&await this.fileWatcher?.triggerWorkspaceChange(0,n.uri)}async onWorkspaceRemoved(n){await this.isEnabled()&&await this.fileWatcher?.triggerWorkspaceChange(1,n.uri)}async onWorkspaceSubfoldersTerminated(n,r){if(await this.isEnabled())return super.onWorkspaceSubfoldersTerminated(n,r)}async onFileChange(n){if(await this.isEnabled())for(let r of n.documents)await this.fileWatcher?.triggerFileChange(this.toFileWatcherType(n.type),r.uri)}toFileWatcherType(n){switch(n){case"create":return 2;case"delete":return 1;case"update":return 0;default:throw new Error("Unknown file watcher event type")}}},v0e=class extends U9{constructor(n,r){super(n,r);this.fileChangeListeners=[];this.workspaceChangeListeners=[]}static{s(this,"MultiLanguageFileWatcher")}onFileChange(n){this.fileChangeListeners.push(n)}onWorkspaceChange(n){this.workspaceChangeListeners.push(n)}dispose(){}async triggerFileChange(n,r){for(let i of this.fileChangeListeners)await i(n,r)}async triggerWorkspaceChange(n,r){for(let i of this.workspaceChangeListeners)await i(n,r)}},b0e=class extends ET{constructor(n){super();this.ctx=n}static{s(this,"LspFileSearch")}async findFiles(n,r,i){return(await this.ctx.get(iu).getWatchedFiles(r)).map(a=>this.ctx.get(Nn).getTextDocumentUnsafe(a)?.clientUri??a.uri)}};var E0e=class extends vT{static{s(this,"AgentMultiLanguageContextProviderFeatureLifecycle")}constructor(e){super(),this.agentMultiLanguageContextProvider=new W9(e),e.set(W9,this.agentMultiLanguageContextProvider)}get indexWatcher(){return this.agentMultiLanguageContextProvider?.multiLanguageContextIndexWatcher}async tryStart(){}async dispose(){return super.dispose()}};function sUe(t){let e=t.get(hc),n=new bT(e);t.set(bT,n),t.set(vT,new E0e(t))}s(sUe,"setupMultiLanguageContextProviderFeature");f();f();f();var CA=new Map;CA.set("copilot",{app:"copilot-client",catalog_service:"CopilotCompletionsVSCode"});CA.set("copilot-intellij",{app:"copilot-intellij",catalog_service:"CopilotIntelliJ"});CA.set("copilot-xcode",{app:"copilot-xcode",catalog_service:"CopilotXcode"});CA.set("copilot-eclipse",{app:"copilot-eclipse",catalog_service:"CopilotEclipse"});CA.set("copilot.vim",{app:"copilot-vim",catalog_service:"CopilotVim"});CA.set("copilot-vs",{app:"copilot-vs",catalog_service:"CopilotVS"});var UPt=new Tt("sdk");function pV(t,e){CA.has(t.get(ur).getEditorPluginInfo().name)||UPt.warn(t,...e)}s(pV,"deprecationWarning");var rze=je(W0e()),Ch=je(_m());f();f();f();var er={ParseError:-32700,InvalidRequest:-32600,MethodNotFound:-32601,InvalidParams:-32602,InternalError:-32603,ServerNotInitialized:-32002,RequestCancelled:-32800,ContentModified:-32801,ServerCancelled:-32802,NoCopilotToken:1e3,DeviceFlowFailed:1001,CopilotNotAvailable:1002};var Ic=class extends Error{static{s(this,"SchemaValidationError")}constructor(e){super(Jqe(e))}};function ot(t,e){let n=ms.Compile(t);return async(r,i,o)=>{if(!n.Check(o)){let a=Jqe(n.Errors(o));return[null,{code:er.InvalidParams,message:a}]}return e(r,i,o)}}s(ot,"addMethodHandlerValidation");function Jqe(t){return`Schema validation failed with the following errors:
${Array.from(t).map(n=>`- ${n.path}: ${n.message}`).join(`
`)}`}s(Jqe,"createErrorMessage");f();var H0e=je(ri());f();var vA=class{constructor(e){this.ctx=e}static{s(this,"AbstractCommand")}};var TV="github.copilot.finishDeviceFlow",G0e=class extends vA{constructor(){super(...arguments);this.name=TV;this.arguments=I.Tuple([])}static{s(this,"FinishDeviceFlowCommand")}async handle(n,r){let i=this.ctx.get(_r).pendingSignIn;if(!i)throw new H0e.ResponseError(er.InvalidRequest,"No pending sign in");try{await this.ctx.get(pc).open(i.verificationUri)}catch(o){m0.warn(this.ctx,"Failed to open",i.verificationUri),m0.exception(this.ctx,o,TV)}try{return await i.status}catch(o){throw new H0e.ResponseError(er.DeviceFlowFailed,String(o))}finally{this.ctx.get(_r).pendingSignIn=void 0}}},Xqe=[G0e];f();f();var is=class extends Kn{static{s(this,"CopilotCompletionCache")}constructor(e=100){super(e)}};var K9="github.copilot.didAcceptCompletionItem",j0e=class extends vA{constructor(){super(...arguments);this.name=K9;this.arguments=I.Tuple([I.String({minLength:1})])}static{s(this,"DidAcceptCommand")}handle(n,[r]){let o=this.ctx.get(is).get(r);return o?(mq(this.ctx,o),!0):!1}},Zqe=[j0e];f();var F6t="github.copilot.didAcceptNextEditSuggestionItem",V0e=class extends vA{constructor(){super(...arguments);this.name=F6t;this.arguments=I.Tuple([I.String({minLength:1})])}static{s(this,"DidAcceptCommand")}async handle(n,[r]){return await this.ctx.get(lh).handleAcceptance(r),!0}},eWe=[V0e];f();var z0e="github.copilot.didAcceptPanelCompletionItem",$0e=class extends vA{constructor(){super(...arguments);this.name=z0e;this.arguments=I.Tuple([I.String({minLength:1})])}static{s(this,"DidAcceptPanelCompletionItemCommand")}handle(n,r){let[i]=r,a=this.ctx.get(is).get(i);return a?(y2(this.ctx,a.triggerCategory,a.displayText,a.offset,a.uri,a.telemetry,{compType:"full"},a.copilotAnnotations),!0):!1}},tWe=[$0e];var M6t=[...Xqe,...Zqe,...eWe,...tWe];function nWe(t,e){let n=new Map;for(let r of M6t){let i=new r(t),o=ms.Compile(i.arguments);n.set(i.name,{typeCheck:o,command:i})}return e.onExecuteCommand((r,i)=>{let o=n.get(r.command);if(!o)throw new Error(`Unknown command: ${r.command}`);let a=Dy(r.arguments??[]);if(a.length<o.command.arguments.minItems&&(a.length=o.command.arguments.minItems),o.typeCheck.Check(r.arguments))return o.command.handle(i,a);throw new Ic(o.typeCheck.Errors(r.arguments))}),[...n.keys()]}s(nWe,"registerCommands");f();var rWe=je(require("node:events"));var uh=class extends RI{constructor(n){super(new QS,new Map);this.emitters=new Map;this.envSettings=new Map;this.env={...n},this.setOverridesFromEnvironment()}static{s(this,"AgentConfigProvider")}setOverridesFromEnvironment(){["DebugOverrideEngine","DebugOverrideProxyUrl","DebugOverrideCapiUrl","DebugUseEditorFetcher","UseSubsetMatching"].forEach(r=>{for(let i of["AGENT_DEBUG_","GITHUB_COPILOT_","GH_COPILOT_"]){let o=`${i}${Q6t(r.replace(/^Debug/,""))}`;o in this.env&&(this.envSettings.set(wt[r],this.env[o]),this.setConfig(wt[r],this.env[o]))}})}setConfig(n,r){super.setConfig(n,r??this.envSettings.get(n)),this.emitters.get(n)?.emit("change",r)}onConfigChange(n,r){this.emitters.has(n)||this.emitters.set(n,new rWe.default),this.emitters.get(n)?.on("change",r)}};function Q6t(t){return t.replace(/([a-z])([A-Z]+)/g,"$1_$2").toUpperCase()}s(Q6t,"camelCaseToSnakeCaseAllCaps");var O6t="unknown-editor",iWe="unknown-editor-plugin",wV=class extends ur{static{s(this,"AgentEditorInfo")}setEditorAndPluginInfo(e,n,r=[]){this._editorInfo=n,this._editorPluginInfo=e,this._relatedPluginInfo=r}setCopilotIntegrationId(e){this._copilotIntegrationId=e}getEditorInfo(){return this._editorInfo?this._editorInfo:{name:O6t,version:"0"}}getEditorPluginInfo(){return this._editorPluginInfo?this._editorPluginInfo:{name:iWe,version:"0"}}getRelatedPluginInfo(){return this._relatedPluginInfo??[]}getCopilotIntegrationId(){return this._copilotIntegrationId}};function oWe(t){return t.getEditorPluginInfo().name!==iWe}s(oWe,"hasValidInfo");f();var aWe=require("node:events");var sWe="initialize",Ny=class{constructor(){this.emitter=new aWe.EventEmitter;this.initialized=!1}static{s(this,"InitializedNotifier")}once(e){this.emitter.once(sWe,e)}emit(){if(this.initialized)throw new Error("Already initialized");this.initialized=!0,this.emitter.emit(sWe)}};f();var Ly=je(_m());var U6t=new Map([[4,Ly.MessageType.Log],[3,Ly.MessageType.Info],[2,Ly.MessageType.Warning],[1,Ly.MessageType.Error]]),_V=class extends Va{static{s(this,"NotificationLogger")}logIt(e,n,r,...i){if(n==4&&!gq(e)&&r!=="console")return;let o={type:U6t.get(n),message:V3e(r,...i)},a=e.get(Cn).connection;try{a.sendNotification(new Ly.NotificationType("window/logMessage"),o)}catch(l){if(l instanceof Ly.ConnectionError)return;throw l}}};f();var lWe=je(Za());var SV=class{constructor(e,n=!1){this.ctx=e;this.codeSnippets=n}static{s(this,"RedirectTelemetryReporter")}get notificationName(){return this.codeSnippets?"codeSnippetTelemetry":"uedTelemetry"}sendTelemetryEvent(e,n,r){this.ctx.get(Cn).connection.sendNotification(new lWe.NotificationType(this.notificationName),{type:"event",name:e,properties:n||{},measurements:r||{}})}sendTelemetryErrorEvent(e,n,r){this.sendTelemetryEvent(e,n,r)}dispose(){return Promise.resolve()}};async function cWe(t){let e=t.get(Nl),n=e.deactivate();e.setReporter(new SV(t)),e.setRestrictedReporter(new SV(t,!0)),await n}s(cWe,"setupRedirectingTelemetryReporters");f();f();var RV=class{static{s(this,"InstallationManager")}async startup(e){await this.isNewInstall(e)?(await this.markInstalled(e),this.handleInstall(e,await this.wasPreviouslyInstalled(e))):await this.isNewUpgrade(e)&&(await this.markUpgraded(e),this.handleUpgrade(e))}uninstall(e){return this.handleUninstall(e)}handleInstall(e,n){n?kt(e,"installed.reinstall"):kt(e,"installed.new")}handleUpgrade(e){kt(e,"installed.upgrade")}handleUninstall(e){kt(e,"uninstalled")}};var J9=je(W0e());var qR=class extends RV{static{s(this,"AgentInstallationManager")}async isNewInstall(e){let n=e.get(ur).getEditorPluginInfo();return await e.get(hc).read("versions",n.name)===void 0&&!await this.hasPersistedSettings(e)}async hasPersistedSettings(e){return(await e.get(hc).listSettings()).length>0}async markInstalled(e){let n=e.get(ur).getEditorPluginInfo();await e.get(hc).update("versions",n.name,n.version)}wasPreviouslyInstalled(e){return Promise.resolve(!1)}async isNewUpgrade(e){try{let n=e.get(ur).getEditorPluginInfo(),r=await e.get(hc).read("versions",n.name);return r===void 0&&await this.hasPersistedSettings(e)?!0:(0,J9.gt)((0,J9.coerce)(n.version),(0,J9.coerce)(r))}catch{return!1}}async markUpgraded(e){await this.markInstalled(e)}async uninstall(e){await super.uninstall(e);let n=e.get(ur).getEditorPluginInfo();await e.get(hc).delete("versions",n.name),(await e.get(hc).listKeys("versions")).length===0&&await e.get(hc).deleteSetting("versions")}};f();var uWe=require("events"),K0e=je(require("path")),kV=je(Za());var Y0e="didChangeWatchedFiles",q6t={watchedFiles:[],contentRestrictedFiles:[],unknownFileExtensions:[]},dh=class t{constructor(e){this.ctx=e;this.emitter=new uWe.EventEmitter}static{s(this,"LspFileWatcher")}static{this.requestType=new kV.ProtocolRequestType("copilot/watchedFiles")}get connection(){return this.ctx.get(Cn).connection}init(){this.ctx.get(Go).getCapabilities().watchedFiles&&this.connection.onNotification(kV.DidChangeWatchedFilesNotification.type,n=>{"workspaceUri"in n&&typeof n.workspaceUri=="string"&&this.didChangeWatchedFilesHandler(n)})}async getWatchedFiles(e){if(!this.ctx.get(Go).getCapabilities().watchedFiles)return q6t;let i=(await this.connection.sendRequest(t.requestType,e)).files,o=[],a=[],l=[];for(let c of i){typeof c=="object"&&(c=c.uri);let u=K0e.extname(c).toLowerCase();if(!b8.includes(u)){l.push({uri:c});continue}let d=await this.getValidDocument(c);if(d===void 0){a.push({uri:c});continue}o.push(d)}return{watchedFiles:o,contentRestrictedFiles:a,unknownFileExtensions:l}}onDidChangeWatchedFiles(e){this.emitter.on(Y0e,e)}offDidChangeWatchedFiles(e){this.emitter.off(Y0e,e)}async didChangeWatchedFilesHandler(e){let n=[],r=[],i=[];for(let o of e.changes){let a=o.uri,l={uri:a,isRestricted:!1,isUnknownFileExtension:!1},c=K0e.extname(o.uri).toLowerCase();if(!b8.includes(c))l.isUnknownFileExtension=!0;else{let u=await this.getValidDocument(a);u===void 0?l.isRestricted=!0:l.document=u}switch(o.type){case 1:r.push(l);break;case 2:n.push(l);break;case 3:i.push(l);break}}this.emitter.emit(Y0e,{workspaceFolder:{uri:e.workspaceUri},created:r,changed:n,deleted:i})}async getValidDocument(e){let r=await this.ctx.get(Nr).getOrReadTextDocument({uri:e});return r.status==="valid"?r.document:void 0}};f();f();var W6t=I.Object({uri:I.String({minLength:1})});async function H6t(t,e,n){let r=await t.get(Nr).getOrReadTextDocument(n);return[{status:ys(r),...r.status==="invalid"&&{reason:r.reason},...r.status==="notfound"&&{reason:r.message}},null]}s(H6t,"handleCheckFileStatusChecked");var dWe=ot(W6t,H6t);f();var G6t=I.Object({});function fWe(t,e){return typeof t!="number"||typeof e!="number"||e===0?0:Math.max(0,Math.min(100,t/e*100))}s(fWe,"calculatePercentRemaining");async function j6t(t,e,n){let r=await t.get(_r).getSession();if(r){let i=await ste(t,r);if(i.ok){let o=await i.json();return o.access_type_sku==="free_limited_copilot"?[{chat:{percentRemaining:fWe(o.limited_user_quotas?.chat,o.monthly_quotas?.chat),unlimited:!1,overagePermitted:!1},completions:{percentRemaining:fWe(o.limited_user_quotas?.completions,o.monthly_quotas?.completions),unlimited:!1,overagePermitted:!1},premiumInteractions:{percentRemaining:0,unlimited:!1,overagePermitted:!1},resetDate:o.limited_user_reset_date??"",copilotPlan:"free"},null]:[{chat:{percentRemaining:o.quota_snapshots?.chat?.percent_remaining??100,unlimited:o.quota_snapshots?.chat?.unlimited??!1,overagePermitted:o.quota_snapshots?.chat?.overage_permitted??!1},completions:{percentRemaining:o.quota_snapshots?.completions?.percent_remaining??100,unlimited:o.quota_snapshots?.completions?.unlimited??!1,overagePermitted:o.quota_snapshots?.completions?.overage_permitted??!1},premiumInteractions:{percentRemaining:o.quota_snapshots?.premium_interactions?.percent_remaining??100,unlimited:o.quota_snapshots?.premium_interactions?.unlimited??!1,overagePermitted:o.quota_snapshots?.premium_interactions?.overage_permitted??!1},resetDate:o.quota_reset_date??"",copilotPlan:o.copilot_plan},null]}return[null,{code:er.InternalError,message:"Failed to fetch quota info"}]}else return[null,{code:er.InternalError,message:"Not signed in"}]}s(j6t,"handleCheckQuotaChecked");var pWe=ot(G6t,j6t);f();var V6t=I.Object({options:I.Optional(I.Object({localChecksOnly:I.Optional(I.Boolean()),forceRefresh:I.Optional(I.Boolean())}))});async function $6t(t,e,n){return[await t.get(_r).checkAndUpdateStatus(n.options),null]}s($6t,"handleCheckStatusChecked");var mWe=ot(V6t,$6t);f();f();f();f();f();f();function hWe(t){return t?t.filter(e=>e.type==="github.web-search").map(e=>e):[]}s(hWe,"filterUnsupportedReferences");function gWe(t){return t?t.filter(e=>e.type==="github.web-search"):[]}s(gWe,"convertToCopilotReferences");var AWe=I.Object({type:I.Literal("github.web-search"),id:I.String(),data:I.Object({query:I.String(),type:I.String(),results:I.Optional(I.Array(I.Object({title:I.String(),excerpt:I.String(),url:I.String()})))}),metadata:I.Optional(I.Object({display_name:I.Optional(I.String()),display_icon:I.Optional(I.String())}))});var Rb=class{constructor(e){this.deltaApplier=e;this.appliedLength=0;this.appliedText="";this.appliedAnnotations=[]}static{s(this,"ConversationFinishCallback")}isFinishedAfter(e,n){let r=e.substring(this.appliedLength,e.length),o=this.mapAnnotations(n.annotations).filter(a=>!this.appliedAnnotations.includes(a.id));this.append(r,o,hWe(n.copilotReferences),n.copilotErrors??[],n.copilotConfirmation)}append(e,n,r,i,o){this.deltaApplier(e,n,r,i,o),this.appliedLength+=e.length,this.appliedText+=e,this.appliedAnnotations.push(...n.map(a=>a.id))}mapAnnotations(e){if(!e)return[];let n=[],r=e.for("CodeVulnerability").map(o=>({...o,type:"code_vulnerability"})),i=e.for("IPCodeCitations").map(o=>({...o,type:"ip_code_citations"}));return n.push(...r),n.push(...i),n}};f();var sl=class{static{s(this,"ConversationInspector")}};f();var J0e={Unknown:-1,Default:0,ToolRoundExceedError:1e4};var ws=class{constructor(e){this.ctx=e;this.progressEntries=new Kn(250)}static{s(this,"ConversationProgress")}async begin(e,n,r){let i={status:"open",handler:r};this.progressEntries.set(e.id,i),await i.handler.begin(this.ctx,e,n)}async report(e,n,r){let i=this.getProgressEntry(e);i.status==="open"&&await i.handler.report(this.ctx,e,n,r)}async end(e,n,r){let i=this.getProgressEntry(e);i.status==="open"&&(this.progressEntries.set(e.id,{...i,status:"done",updatedAt:Date.now()}),await i.handler.end(this.ctx,e,n,r))}async cancel(e,n,r){let i=this.getProgressEntry(e);i.status==="open"&&(this.progressEntries.set(e.id,{...i,status:"cancelled",updatedAt:Date.now()}),await i.handler.cancel(this.ctx,e,n,r))}getProgressEntry(e){let n=this.progressEntries.get(e.id);if(n===void 0)throw new Error(`No work done token for conversation ${e.id}`);return n.status!=="open"&&Ln.error(this.ctx,`Work done token for conversation ${e.id} is already ${n.status}, last updated at ${n.updatedAt}`),n}};f();f();var bA=class{constructor(e){this.ctx=e;this.githubRepositoryInfoCache=new Map}static{s(this,"GitHubRepositoryApi")}async getRepositoryInfo(e){let n=`${e.hostname}/${e.owner}/${e.repo}`,r=this.githubRepositoryInfoCache.get(n);if(r)return r;let i=await this._doGetRepositoryInfo(e);if(i?.ok){let o=await i.json();return this.githubRepositoryInfoCache.set(n,o),o}}async _doGetRepositoryInfo({owner:e,repo:n,hostname:r}){let i=await this.ctx.get(_r).getSession({authAuthority:r});if(!i&&!(r==="github.com"||r.endsWith(".ghe.com")))return;let o={Accept:"application/vnd.github+json","X-GitHub-Api-Version":"2022-11-28"};i&&(o.Authorization=`Bearer ${i.accessToken}`);let a=new URL(`repos/${e}/${n}`,i?.apiUrl||`https://api.${r}`).href;return this.ctx.get(Kr).fetch(a,{method:"GET",headers:o})}};f();f();f();var CWe=je(z0());var EA=class{constructor(e,n,r){this.doc=e;this.selection=n;this.visibleRange=r}static{s(this,"ElidableDocument")}fromSelectedCode(e){let n=this.getExpandedSelection(),r=n;if(e.trimNewLines){let o=this.doc.getText(n),a=o.match(/^\n*/)?.[0].length??0,l=o.match(/\n*$/)?.[0].length??0;r={start:this.getLineStart(n.start.line+a),end:this.expandLineToEnd(n.end.line-l)}}let i=new Bt([(0,CWe.default)(this.doc.getText(r)).trim()]);return[this.wrapInTicks(i),r]}fromAllCode(e){let n=this.getDocumentRange(),r=this.getExpandedSelection(),i;!this.visibleRange||!this.rangeContainedIn(this.visibleRange,r)?i=r:i={start:this.getLineStart(this.visibleRange.start.line),end:this.expandLineToEnd(this.visibleRange.end.line)};let o={start:n.start,end:i.start.line>0?this.expandLineToEnd(i.start.line-1):n.start},a={start:i.start,end:r.start.line>0&&r.start.line>i.start.line?this.expandLineToEnd(r.start.line-1):i.start},l={start:r.end.line<this.doc.lineCount-1&&r.end.line<i.end.line?this.getLineStart(r.end.line+1):i.end,end:i.end},c={start:i.end.line<this.doc.lineCount-1?this.getLineStart(i.end.line+1):n.end,end:n.end},u=[[o,.6],[a,.8],[r,1],[l,.4],[c,.2]],d=new Bt(u.filter(([p,m])=>!WR(p)||m===1).map(([p,m])=>{let h;return e.addLineNumbers?h=this.addLineNumbers(p):h=this.doc.getText(p),[m==1?h:y0(h),m]}));return this.wrapInTicks(d)}selectionIsDocument(){return this.rangeEquals(this.getExpandedSelection(),this.getDocumentRange())}selectionIsEmpty(){return this.selection==null||WR(this.selection)}getExpandedSelection(){return this.selection!==void 0?{start:this.getLineStart(this.selection.start.line),end:this.expandLineToEnd(this.selection.end.line)}:this.getDocumentRange()}getDocumentRange(){return{start:this.getLineStart(0),end:this.expandLineToEnd(this.doc.lineCount-1)}}getLineStart(e){return{line:e,character:0}}expandLineToEnd(e){return e>this.doc.lineCount-1&&(e=this.doc.lineCount-1),{line:e,character:this.doc.lineAt({line:e,character:0}).text.length}}rangeContainedIn(e,n){return e.start.line<=n.start.line&&e.end.line>=n.end.line}rangeEquals(e,n){return e.start.line==n.start.line&&e.end.line==n.end.line}wrapInTicks(e,n){return new Bt([["```"+this.doc.detectedLanguageId,1],[e,n??1],["```",1]])}addLineNumbers(e){let n=this.doc.getText(e).split(`
`),r=this.doc.lineCount.toString().length;return n.map((o,a)=>`${(e.start.line+a+1).toString().padEnd(r," ")}:${o}`).join(`
`)}};function WR(t){return t.start.line==t.end.line&&t.start.character==t.end.character}s(WR,"isEmptyRange");var xWe=je(require("path"));var vWe=I.Object({uri:I.String(),visibleRange:I.Optional(_a),selection:I.Optional(_a)}),X0e=class{constructor(e){this.turnContext=e}static{s(this,"CurrentEditorSkillProcessor")}value(){return 1}async processSkill(e){let n=this.turnContext.ctx.get(Nr),r=await n.getOrReadTextDocument(e),i=ys(r);if(await this.turnContext.collectFile(lu,e.uri,i),r.status==="valid"){let o=this.turnContext.conversation.source==="inline",a=new EA(r.document,e.selection,e.visibleRange),l=n.getRelativePath(r.document);if(i==="empty")return new Bt([`The currently open file \`${l}\` is empty.`]);let c=[[`Code excerpt from the currently open file \`${l}\`:`,1],[a.fromAllCode({addLineNumbers:o}),1]],u=[];if(a.selectionIsDocument())u=[["The user is selecting the entire file.",1]];else if(o){let[d,p]=a.fromSelectedCode({trimNewLines:!0}),m=p.start.line+1;if(WR(p))u=[[`The user is selecting line ${m}, which is empty.`,1]];else{let h=p.end.line+1;u=[["The user is selecting"+(m==h?` line ${m}:`:` lines ${m} to ${h} (inclusive):`),1],[d,1]]}}else a.selectionIsEmpty()||(u=[["The user is selecting this code:",1],[a.fromSelectedCode({trimNewLines:!1})[0],1]]);return new Bt([...c,...u])}else if(r.status==="invalid")return new Bt([`The currently open file \`${xWe.basename(e.uri)}\` is content excluded.`])}},lu="current-editor",BV=class{constructor(e){this._resolver=e;this.id=lu;this.type="explicit"}static{s(this,"CurrentEditorSkill")}description(){return"The code from the user's currently open file"}resolver(){return this._resolver}processor(e){return new X0e(e)}};f();f();var xl=class{constructor(){this.skills=[]}static{s(this,"ConversationSkillRegistry")}registerSkill(e){if(this.getSkill(e.id))throw new Error(`Skill with id '${e.id}' already registered`);this.skills.push(e)}getSkill(e){return this.skills.find(n=>n.id===e)}getDescriptors(){return[...this.skills]}},Z0e=class{constructor(e,n,r){this.delegate=e;this.stepId=n;this.stepTitle=r}static{s(this,"StepReportingSkillResolver")}async resolveSkill(e){await e.steps.start(this.stepId,this.stepTitle);try{let n=await this.delegate.resolveSkill(e);return n||await e.steps.finish(this.stepId),n}catch(n){throw await e.steps.error(this.stepId,n instanceof Error?n.message:`Error resolving ${this.stepTitle}`),n}}},efe=class{constructor(e,n){this.delegate=e;this.stepId=n}static{s(this,"StepReportingSkillProcessor")}value(){return this.delegate.value()}async processSkill(e,n){try{let r=await this.delegate.processSkill(e,n);return await n.steps.finish(this.stepId),r}catch(r){throw await n.steps.error(this.stepId,r instanceof Error?r.message:`Error processing ${this.stepId}`),r}}},Kl=class{constructor(e,n,r,i,o,a="explicit",l=[],c=()=>!0){this.id=e;this._description=n;this.stepTitle=r;this._resolver=i;this._processor=o;this.type=a;this._examples=l;this._isAvailable=c}static{s(this,"SingleStepReportingSkill")}description(){return this._description}examples(){return this._examples}isAvailable(e){return this._isAvailable(e)}resolver(e){return new Z0e(this._resolver(e),this.id,this.stepTitle)}processor(e){return new efe(this._processor(e),this.id)}};var bWe=I.Object({name:I.String(),url:I.String()}),EWe=I.Object({path:I.String(),head:I.Optional(I.Object({name:I.String(),upstream:I.Optional(bWe)})),remotes:I.Optional(I.Array(bWe))}),tfe=class{constructor(e){this.turnContext=e}static{s(this,"GitMetadataSkillProcessor")}value(){return .8}processSkill(e){this.turnContext.collectLabel(IA,"git repository information");let n=[];return n.push([new Bt(["Metadata about the current git repository:"]),1]),e.head&&e.head.name?(n.push([new Bt([`- Current branch name: ${e.head.name}`]),1]),e.head.upstream&&n.push([new Bt([`- Upstream name and url: ${e.head.upstream.name} - ${e.head.upstream.url}`]),1])):n.push([new Bt(["- Detached HEAD: yes"]),1]),e.remotes&&e.remotes.length>0&&n.push([new Bt([`- Remotes: ${e.remotes.map(r=>r.name).join(", ")}`]),1]),new Bt(n)}},IA="git-metadata",PV=class extends Kl{static{s(this,"GitMetadataSkill")}constructor(e){super(IA,"Metadata about the current git repository, useful for questions about branch management and git related commands","Reading git information",()=>e,n=>new tfe(n))}};async function IWe(t){let e=await t.skillResolver.resolve(lu);if(e){let a=e.uri,l=Kx(t.ctx,a);if(Z2e(l))return{repoInfo:l,skillUsed:lu}}let n=await t.skillResolver.resolve(IA);if(!n||!n.remotes||n.remotes.length===0){Ln.debug(t.ctx,"Git metadata skill is not available or no remotes available.");return}let i=n.remotes.find(a=>a.name==="origin")??n.remotes[0],o=kte(i.url);if(o)return{repoInfo:{baseFolder:{uri:n.path},url:i.url,...o},skillUsed:IA}}s(IWe,"extractRepoInfo");async function TWe(t){let e=[];return await z6t(t,e),await Y6t(t,e),await K6t(t,e),e}s(TWe,"skillsToReference");async function z6t(t,e){let n=await J6t(t);n&&e.push(n)}s(z6t,"addRepositoryReference");async function Y6t(t,e){let n=await X6t(t);n&&e.push(n)}s(Y6t,"addSelectionReference");async function K6t(t,e){let n=[],r=await eNt(t);r&&n.push(r),n.push(...await tNt(t)),n.length>0&&e.push(...n)}s(K6t,"addFileReferences");async function J6t(t){let e=await IWe(t);if(e){let n=t.ctx.get(bA),r=e.repoInfo.owner,i=e.repoInfo.repo,o=await n.getRepositoryInfo(e.repoInfo);if(o)return{type:"github.repository",id:`${r}/${i}`,data:{type:"repository",name:i,ownerLogin:r,id:o.id}}}}s(J6t,"gitMetadataToReference");async function X6t(t){let e=await t.skillResolver.resolve(lu);if(e&&e.selection){let r=await t.ctx.get(Nr).getOrReadTextDocument(e),i=ys(r);if(await t.collectFile(t.turn.agent.agentSlug,e.uri,i,e.selection),r.status==="valid")return Z6t(e,r.document)}}s(X6t,"currentEditorToSelectionReference");function Z6t(t,e){if(t.selection&&!WR(t.selection)){let n=e.getText(t.selection);return{type:"client.selection",id:t.uri,data:{start:{line:t.selection.start.line,col:t.selection.start.character},end:{line:t.selection.end.line,col:t.selection.end.character},content:n}}}}s(Z6t,"extractSelection");async function eNt(t){let e=await t.skillResolver.resolve(lu);if(e){let r=await t.ctx.get(Nr).getOrReadTextDocument(e),i=ys(r);if(await t.collectFile(t.turn.agent.agentSlug,e.uri,i),r.status==="valid")return{type:"client.file",id:r.document.uri,data:{content:r.document.getText(),language:r.document.detectedLanguageId}}}}s(eNt,"currentEditorToFileReference");async function tNt(t){let e=[],n=t.turn.request.references;if(n&&n.length>0){let r=t.ctx.get(Nr);for(let i of n)if(i.type==="file"){let o=await r.getOrReadTextDocument(i),a=ys(o);if(await t.collectFile(t.turn.agent.agentSlug,i.uri,a,i.selection),o.status==="valid"){let l=o.document.getText();e.push({type:"client.file",id:i.uri,data:{content:l,language:o.document.detectedLanguageId}})}}}return e}s(tNt,"fileReferenceToPlatformFileReference");f();f();f();f();var DWe=je(LV()),ofe=je(require("path"));var NWe=500,dNt=Math.floor(.25*NWe),FV=class{static{s(this,"FixedSizeChunking")}async chunk(e,n){let r=[],i=ofe.default.extname(__filename)===".ts"?ofe.default.resolve(__dirname,"../../../../../../dist/main.js"):__filename;return r=await DWe.job(async({text:o,uri:a,tokenizerName:l,directory:c,chunkSize:u,overlap:d})=>{let m=await require(c).getTokenizerAsync(l),h=m.tokenize(o),g=h.length,y=[],v=0;for(;v<g;){let b=v+u>=g,E=b?g:v+u,_=h.slice(v,E),k=m.detokenize(_),P=o.indexOf(k);y.push({id:`${a.toString()}#${v}`,chunk:k,tokenCount:_.length,range:{start:P,end:P+k.length}}),v=b?E:E-d}return y},{data:{text:e.getText(),uri:e.uri.toString(),tokenizerName:n.tokenizer,directory:i,chunkSize:NWe,overlap:dNt}}),r}};var fNt="fixedSize",pNt=new Map([["fixedSize",FV]]);function LWe(t){let e=t==="default"?fNt:t,n=pNt.get(e);if(!n)throw new Error(`Chunking constructor for type ${t} not found`);return n}s(LWe,"getChunkingAlgorithm");f();f();var MV=je(vx()),TA=je(require("fs")),FWe=require("os"),Tp=je(require("path")),HR=require("process");var sfe=5e4,mNt=new Tt("workspaceChunks"),QV=class t{constructor(e,n){this.ctx=e;this.pathHashLength=8;this.chunksCountCache=new Map;let r=Ti(n.uri),i=(0,MV.SHA256)(n.uri).toString().substring(0,this.pathHashLength);this.cacheRootPath=Tp.join(hNt(),"project-context",`${r}.${i}`)}static{s(this,"WorkspaceChunks")}static{this.CACHE_VERSION="1.0.0"}getChunksCacheFile(e){let n=(0,MV.SHA256)(e).toString().substring(0,this.pathHashLength),r=Tp.basename(e);return Tp.join(this.cacheRootPath,`${r}.${n}.json`)}async getChunksCacheFromCacheFile(e){let n=await TA.promises.readFile(e,{encoding:"utf8"}).catch(()=>{});if(n)try{return JSON.parse(n)}catch{}}async getChunksCache(e){let n=this.getChunksCacheFile(e);return await this.getChunksCacheFromCacheFile(n)}async setChunksCache(e,n){let r=this.getChunksCacheFile(e);try{await TA.promises.mkdir(Tp.dirname(r),{recursive:!0}),await TA.promises.writeFile(r,JSON.stringify(n),{encoding:"utf8"})}catch(i){mNt.debug(this.ctx,"Failed to set chunks cache:",i)}}async removeChunksCache(e){let n=this.getChunksCacheFile(e);await TA.promises.rm(n).catch(()=>{})}async enumerateChunksCacheFileNames(){return await TA.promises.readdir(this.cacheRootPath).catch(()=>[])}async getFilesCount(){return(await this.enumerateChunksCacheFileNames()).length}async getChunksCount(){let e=0;for(let n of await this.enumerateChunksCacheFileNames()){let r=Tp.join(this.cacheRootPath,n);if(!this.chunksCountCache.has(r)){let i=await this.getChunksCacheFromCacheFile(r);this.chunksCountCache.set(r,i?.documentChunks?.length??0)}e+=this.chunksCountCache.get(r)||0}return e}async*getChunksForFile({uri:e}){let n=await this.getChunksCache(e);n!==void 0&&(yield*n.documentChunks)}async*getChunksFromCacheFile(e){let n=await this.getChunksCacheFromCacheFile(e);yield*n?n.documentChunks:[]}async*getChunks(e){if(e!==void 0)yield*this.getChunksForFile(e);else{let n=await this.enumerateChunksCacheFileNames();for(let r of n)yield*this.getChunksFromCacheFile(Tp.join(this.cacheRootPath,r))}}async getFileHash(e){let n=Ho(e),r="";return n&&(r=await TA.promises.readFile(n,{encoding:"utf8"}).catch(()=>"")),(0,MV.SHA256)(r).toString()}async addChunks({uri:e},n){let r=Array.isArray(n)?()=>Promise.resolve(n):n,i=Ho(e);if(!i)return;async function o(p){try{return(await TA.promises.stat(p)).mtimeMs}catch{return}}s(o,"getLastModified");let a=await o(i),l=await this.getChunksCache(e);if(l!==void 0&&l.version===t.CACHE_VERSION&&a!==void 0&&l.lastModified===a){this.chunksCountCache.set(i,l.documentChunks.length);return}let c=await this.getFileHash(e),u=await r();this.chunksCountCache.set(i,u.length);let d={version:t.CACHE_VERSION,filePath:e,hash:c,lastModified:a,documentChunks:u};await this.setChunksCache(e,d)}async deleteChunksForSource(e){let n=pl(e),r=await this.getChunksCache(n);return r===void 0?[]:(await this.removeChunksCache(n),r.documentChunks)}async deleteChunks({uri:e}){let n=Ho(e);if(!n)return[];let r;try{r=await TA.promises.readdir(n)}catch{return await this.deleteChunksForSource(n)}let i=[];for(let o of r){let a=pl(Tp.join(n,o));i.push(...await this.deleteChunks({uri:a}))}return i}async clear(){await TA.promises.rm(this.cacheRootPath,{recursive:!0}).catch(()=>{})}};function hNt(){return HR.env.XDG_CACHE_HOME&&Tp.isAbsolute(HR.env.XDG_CACHE_HOME)?HR.env.XDG_CACHE_HOME+"/github-copilot":(0,FWe.platform)()==="win32"?HR.env.USERPROFILE+"\\AppData\\Local\\Temp\\github-copilot":HR.env.HOME+"/.cache/github-copilot"}s(hNt,"getXdgCachePath");var afe=1e4;var OV=class{constructor(e,n,r){this.workspaceFolder=n;this.implementation=r;this._chunkLimiter=new cfe;this.status="notStarted",this.workspaceChunks=new QV(e,n),this.cancellationToken=new lfe,this._chunkingTimeMs=0,this._fileCountExceeded=!1,this._chunkCountExceeded=!1,this._totalFileCount=0,this._filesUpdated=new Set}static{s(this,"ChunkingHandler")}async chunk(e,n){return n?await this.chunkFiles(e,n):await this.chunkWorkspace(e)}async chunkWorkspace(e){let n=performance.now();if(this.status="started",this.cancellationToken.isCancelled())return this.status="cancelled",this.updateChunkingTime(n,performance.now()),this.workspaceChunks.getChunks();await this.updateModelConfig(e);let r=await e.get(iu).getWatchedFiles(this.workspaceFolder);this._totalFileCount=r.length,r.length>afe&&(this._fileCountExceeded=!0,r=r.slice(0,afe));let i=r.map(async o=>{this.cancellationToken.isCancelled()||await this._chunkLimiter.queue(()=>this._chunk(e,o))});try{await Promise.all(i)}catch(o){wa(e,o,"ChunkingProvider.chunk"),this.terminateChunking()}return this.status=this.cancellationToken.isCancelled()?"cancelled":"completed",this.updateChunkingTime(n,performance.now()),await this.workspaceChunks.getChunksCount()>sfe&&(this._chunkCountExceeded=!0),this.workspaceChunks.getChunks()}async chunkFiles(e,n){await this.updateModelConfig(e);let r=n.map(async i=>{this.cancellationToken.isCancelled()||(this._filesUpdated.add(i.uri),await this._chunkLimiter.queue(()=>this._chunk(e,i)))});try{await Promise.all(r)}catch(i){wa(e,i,"ChunkingProvider.chunkFiles"),this.terminateChunking()}return await this.workspaceChunks.getChunksCount()>sfe&&(this._chunkCountExceeded=!0),await this.workspaceChunks.getFilesCount()>afe&&(this._fileCountExceeded=!0),p4e(...n.map(i=>this.workspaceChunks.getChunks(i)))}async _chunk(e,n){this.cancellationToken.isCancelled()||await this.workspaceChunks.addChunks(n,()=>this.implementation.chunk(n,this.modelConfig))}async updateModelConfig(e){this.modelConfig||(this.modelConfig=await xo.getModelConfiguration(e,"user"))}terminateChunking(){this.cancellationToken.cancel()}async clearChunks(){await this.workspaceChunks.clear()}updateChunkingTime(e,n){this._chunkingTimeMs=n-e}get chunkingTimeMs(){return Math.floor(this._chunkingTimeMs)}get fileCountExceeded(){return this._fileCountExceeded}get totalFileCount(){return this._totalFileCount}get chunkCountExceeded(){return this._chunkCountExceeded}get filesUpdatedCount(){return this._filesUpdated.size}async getFilesCount(){return this.workspaceChunks.getFilesCount()}getChunks(){return this.workspaceChunks.getChunks()}async getChunksCount(){return this.workspaceChunks.getChunksCount()}deleteSubfolderChunks(e){return this.workspaceChunks.deleteChunks({uri:e})}deleteFileChunks(e){return this._filesUpdated.add(e),this.workspaceChunks.deleteChunks({uri:e})}},lfe=class{constructor(){this.cancelled=!1}static{s(this,"ChunkingCancellationToken")}cancel(){this.cancelled=!0}isCancelled(){return this.cancelled}},cfe=class{constructor(e=20){this.maxCount=e;this.tasks=[];this.runningTasks=0}static{s(this,"Limiter")}async queue(e){return new Promise((n,r)=>{this.tasks.push({factory:e,resolve:n,reject:r}),this.consume()})}consume(){for(;this.tasks.length>0&&this.runningTasks<=this.maxCount;){let{factory:e,resolve:n,reject:r}=this.tasks.shift();this.runningTasks++;let i=e();i.then(n,r),i.then(()=>this.consumed(),()=>this.consumed())}}consumed(){this.runningTasks--,this.consume()}};var ga=class{constructor(e){this.ctx=e;this.workspaceChunkingProviders=new Map}static{s(this,"ChunkingProvider")}get workspaceCount(){return this.workspaceChunkingProviders.size}createImplementation(e,n){let r=LWe(n),i=new r;return new OV(this.ctx,e,i)}getImplementation(e,n="default"){let r=this.getParentFolder(e);if(r)return this.workspaceChunkingProviders.get(r.uri);let i=this.workspaceChunkingProviders.get(e.uri);return i||(i=this.createImplementation(e,n),this.workspaceChunkingProviders.set(e.uri,i)),i}getParentFolder(e){let n=[];for(let r of this.workspaceChunkingProviders.values())n.push(r.workspaceFolder);return n.find(r=>{let i=r.uri.replace(/[#?].*/,"").replace(/\/?$/,"/");return e.uri!==r.uri&&e.uri.startsWith(i)})}status(e){return this.getImplementation(e).status}checkLimits(e){let n=this.getImplementation(e);return{fileCountExceeded:n.fileCountExceeded,chunkCountExceeded:n.chunkCountExceeded}}fileCount(e){return this.getImplementation(e).getFilesCount()}chunkCount(e){return this.getImplementation(e).getChunksCount()}chunkingTimeMs(e){return this.getImplementation(e).chunkingTimeMs}getChunks(e){return this.getImplementation(e).getChunks()}terminateChunking(e,n){let r=this.getImplementation(n);r.terminateChunking();let o=ir.createAndMarkAsIssued().extendedBy(void 0,{fileCount:r.filesUpdatedCount});kt(e,"index.terminate",o),this.workspaceChunkingProviders.delete(n.uri)}async clearChunks(e,n){this.terminateChunking(e,n),await this.getImplementation(n).clearChunks()}async deleteSubfolderChunks(e,n){return await this.getImplementation(e).deleteSubfolderChunks(n.uri)}async deleteFileChunks(e,n){let r=this.getImplementation(e),i=[];Array.isArray(n)||(n=[n]);for(let o of n)i.push(...await r.deleteFileChunks(o));return i}async chunk(e,n,r,i){let o;return r&&(Array.isArray(r)?o=r:i=r),i||(i="default"),o?await this.chunkFiles(e,n,o,i):await this.chunkFolder(e,n,i)}async chunkFolder(e,n,r="default"){let i=this.getImplementation(n,r),o=await i.chunk(e),l=ir.createAndMarkAsIssued().extendedBy(void 0,{fileCount:i.totalFileCount,chunkCount:await i.getChunksCount(),timeTakenMs:i.chunkingTimeMs,workspaceCount:this.workspaceCount});return kt(e,"index.chunk",l),o}async chunkFiles(e,n,r,i="default"){return await this.getImplementation(n,i).chunk(e,r)}};f();f();f();f();f();function qV(t){switch(t){case"Agent":return"Agent";case"Ask":default:return"Ask"}}s(qV,"toChatModeEnum");var kb=class{constructor(e,n){this.request=e;this.telemetryId=an();this.timestamp=Date.now();this.status="in-progress";this.skills=[];this.ignoredSkills=[];this.annotations=[];this.id=n??this.telemetryId}static{s(this,"Turn")}},UV=class t{constructor(e=[],n="panel",r="en",i){this.turns=e;this.source=n;this.userLanguage=r;this._telemetryId=an();this._timestamp=Date.now();this.id=i??this.telemetryId}static{s(this,"Conversation")}copy(){let e=JSON.parse(JSON.stringify(this.turns)),n=new t(e,this.source,this.userLanguage,this.id);return n._telemetryId=this.telemetryId,n._timestamp=this.timestamp,n}get telemetryId(){return this._telemetryId}get timestamp(){return this._timestamp}addTurn(e){this.turns.push(e)}deleteTurn(e){this.turns=this.turns.filter(n=>n.id!==e)}getLastTurn(){return this.turns[this.turns.length-1]}findTurn(e){return this.turns.find(n=>n.id===e)}};f();f();f();var MWe={id:0,start_offset:0,stop_offset:0,type:"ip_code_citations",details:{},citations:{snippet:`html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Canvas Example</title>
<`,url:"https://github.com/duonghle285/gnoud9x.github.io/tree/c95127bc5b7a491d9223f21ac3b8c5100996e754/26062020-vehinhchunhat%2Findex.html",ip_type:"LICENSE",license:"NOASSERTION"}},QWe="Alright, This response contains a code citation.";f();var OWe=`
# Should render

## Links
Links should render. However, if a user clicks on the link, it should open a confirmation dialog before navigating to the link. 

markdown:

[GitHub Copilot](https://copilot.github.com)

html:

<a href="https://copilot.github.com">GitHub Copilot</a>

## Images
The following images do come from one of these sources and should render:

- \`raw.githubusercontent.com/\`
- \`private-user-images.githubusercontent.com/\`
- \`avatars.githubusercontent.com\`
- \`gist.github.com/assets/\`


markdown:

![logo](https://avatars.githubusercontent.com/u/147005046?v=4)

html:

<img src="https://avatars.githubusercontent.com/u/147005046?v=4" alt="logo"/>

## Headers

markdown:

# Header 1
## Header 2
### Header 3
#### Header 4
##### Header 5
###### Header 6

html:

<h1>Header 1</h1>
<h2>Header 2</h2>
<h3>Header 3</h3>
<h4>Header 4</h4>
<h5>Header 5</h5>
<h6>Header 6</h6>

## Paragraphs

html:

<p>This is a paragraph.</p>

## Bold

markdown:

**bold text**

html:

<strong>bold text</strong>

## Italic

markdown:

_italic text_

html:

<i>italic text</i>

## Codeblock

markdown:

\`\`\`javascript
console.log('Hello, World!');
\`\`\`

html:

<code>console.log('Hello, World!');</code>

## Unordered List

markdown:

- item 1
- item 2
- item 3

html:

<ul>
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
</ul>

## Ordered List

markdown:

1. item 1
2. item 2
3. item 3

html:

<ol>
  <li>item 1</li>
  <li>item 2</li>
  <li>item 3</li>
</ol>

## Table

markdown:

| Header 1 | Header 2 | Header 3 |
|----------|----------|----------|
| cell 1   | cell 2   | cell 3   |
| cell 4   | cell 5   | cell 6   |

html:

<table>
    <thead>
        <tr>
            <th>Header 1</th>
            <th>Header 2</th>
            <th>Header 3</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>cell 1</td>
            <td>cell 2</td>
            <td>cell 3</td>
        </tr>
        <tr>
            <td>cell 4</td>
            <td>cell 5</td>
            <td>cell 6</td>
        </tr>
    </tbody>
</table>

## Blockquote

markdown:

> This is a blockquote.

html:

<blockquote>This is a blockquote.</blockquote>


# Should not render

## html tags
Unsupported tags like \`<div>\` should not render but should be escaped. This code:

\`\`\`html
<div><ul><li>Foo</li></ul><img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/>
\`\`\`

should be rendered as:

\`\`\`html
<div>
* Foo
<img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/>
\`\`\`

code:

<div><ul><li>Foo</li></ul><img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="20"/></div>

## images
The following images do *not* come from one of the trusted domains and should not render.

markdown:

![productivity](https://github.com/images/modules/site/copilot/productivity-bg-head.png)

html:

<img src="https://github.com/images/modules/site/copilot/productivity-bg-head.png" alt="productivity" width="100"/>

## Invisible characters

### Inline styles
Styled elements should not be rendered styled. This may trick the user to think elements are actually IDE controls

<p style="color: red;">This is an <span style="display: none;">harmfully</span> styled text!</p>

### html attributes
Only img src/alt and a href attributes should make it to the dom. 

The following paragraph should not render the \`id\` attribute in the dom.

<p id="foo">This is a paragraph with an id</p>
`;f();f();var UWe=je(require("fs")),ju=je(require("path"));var ufe=[".test",".spec","_test","Test","_spec","_test","Tests",".Tests","Spec"],dfe="test_",e6={js:{suffix:[".test",".spec"],location:"sameFolder"},ts:{suffix:[".test",".spec"],location:"sameFolder"},go:{suffix:["_test"],location:"sameFolder"},java:{suffix:["Test"],location:"testFolder"},php:{suffix:["Test"],location:"testFolder"},dart:{suffix:["_test"],location:"testFolder"},cs:{suffix:["Test"],location:"testFolder"},rb:{suffix:["_test","_spec"],location:"testFolder"},py:{prefix:"test_",location:"testFolder"},ps1:{suffix:[".Tests"],location:"testFolder"},kt:{suffix:["Test"],location:"testFolder"}},t6=class{constructor(e,n,r=void 0){this.ctx=e;this.fileExists=n;this.baseUri=r}static{s(this,"TestFileFinder")}async findTestFileForSourceFile(e){let n=Ti(e),r=ju.extname(n).replace(".",""),i=e6[r]??{location:"sameFolder",prefix:dfe,suffix:ufe},o=[];if(i.prefix&&o.push(i.prefix+n),i.suffix)for(let u of i.suffix??[]){let d=n.replace(`.${r}`,u+"."+r);o.push(d)}let a=i.location??"sameFolder",l;if(a==="sameFolder"){if(l=Ho(p0(e)),l===void 0)return}else{let u=Ho(e);if(u===void 0)return;l=this.determineTestFolder(u,a)}for(let u of o){let d=ju.join(l,u),p=this.parseTestFilePath(d);if(p&&await this.fileExists(p))return p}let c=pl(l);if(await this.fileExists(c))return ko(c,o[0])}parseTestFilePath(e){try{return pl(e)}catch(n){or.error(this.ctx,`Failed to parse test file path: ${e}`,n);return}}async findImplFileForTestFile(e){let n=Ti(e),r=ju.extname(n).replace(".",""),i=e6[r]??{location:"sameFolder",prefix:dfe,suffix:ufe},o=[];if(i.prefix&&o.push(n.substring(i.prefix.length)),i.suffix)for(let c of i.suffix??[]){let d=n.substring(0,n.length-c.length-1-r.length)+"."+r;o.push(d)}let a=i.location??"sameFolder",l;a==="sameFolder"?l=p0(e):l=this.determineImplFolder(e);for(let c of o){let u=ko(l,c);if(await this.fileExists(u))return u}}findExampleTestFile(e){let n=Ho(e);if(n===void 0)return;let r=ju.extname(Ti(e)).replace(".",""),i,o=e6[r]?.location??"sameFolder";o==="sameFolder"?i=ju.dirname(n):i=this.determineTestFolder(n,o);let a=this.findFiles(i,`.${r}`,e6[r]);if(a.length>0)return pl(a[0])}findFiles(e,n,r){let i=this._readdir(e),o=[];for(let a of i){let l=`${e}${ju.sep}${a}`;r?.prefix&&a.startsWith(r.prefix)&&o.push(l),r?.suffix&&r?.suffix.some(c=>a.endsWith(c+n))&&o.push(l)}return o}_readdir(e){return UWe.readdirSync(e,{withFileTypes:!0}).filter(n=>n.isFile()).map(n=>n.name)}determineTestFolder(e,n){let r=(this.baseUri&&Ho(this.baseUri))??"",i=ju.extname(e).replace(".",""),o=this.getRelativeTestFolder(e,r,i,n);return[r,...o].filter(a=>a).join(ju.sep)}getRelativeTestFolder(e,n,r,i){let o=ju.dirname(e).replace(n,"");switch(r){case"php":case"dart":case"py":return["tests"];case"ps1":return["Tests"];case"rb":return["test",o];case"cs":return[o.replace("src","src/tests")];case"java":case"scala":case"kt":return[o.replace(/src[\\/]main/,"src/test")];default:return i==="testFolder"?[o.replace("src","test")]:[o]}}determineImplFolder(e){let n=ju.extname(Ti(e)).replace(".",""),r=p0(e);switch(n){case"php":case"dart":case"py":return r.replace("tests","src");case"ps1":return r.replace("Tests","src");case"rb":return r.replace("/test","");case"cs":return r.replace("src/tests","src");case"java":case"scala":case"kt":return r.replace("src/test","src/main");default:return r.replace("test/","src/")}}};function n6(t){let e=Ti(t),n=ju.extname(e),r=e6[n.replace(".","")];return r?!(r.suffix&&!r.suffix.some(o=>e.endsWith(o+n))||r.prefix&&!e.startsWith(r.prefix)):!!(ufe.some(o=>e.endsWith(o+n))||e.startsWith(dfe))}s(n6,"isTestFile");f();var qWe=["indexed","indexing","not_indexed"],Bb=class{constructor(){this._cache=new Kn(100)}static{s(this,"BlackbirdIndexingStatus")}async queryIndexingStatus(e,n,r){let i=e.ctx;if(!r)return!1;let o=`repos/${n}/copilot_internal/embeddings_index`,a=await Bf(i,r,o);return a.ok?(await a.json()).semantic_code_search_ok:!1}isValid(e){return e!==void 0&&Date.now()-e.timestamp<30*60*1e3}async isRepoIndexed(e,n,r,i=!1){let o=B1(n);if(!o)return!1;let a=this._cache.get(o);if(!i&&this.isValid(a))return a.status;let l=await this.queryIndexingStatus(e,o,r);return this._cache.set(o,{status:l,timestamp:Date.now()}),l}get cache(){return this._cache}};f();f();f();async function WWe(t,e,n,r){let i=Bo(e.tokenizer),o=n.filter(p=>i.tokenLength(p.text)<e.maxTokens);if(o.length===0)return;let a=[],l=await t.get(Gn).getToken(),c=AM(t,l,"embeddings"),u=l.token,d=0;for(;d<o.length&&!r.isCancellationRequested;){let p=o.slice(d,d+e.maxBatchSize),m=await gNt(t,c,u,e.modelId,p,r);a.push(...m||[]),d+=e.maxBatchSize}return a.length?a:void 0}s(WWe,"fetchEmbeddings");async function gNt(t,e,n,r,i,o){let a=an(),l=i.map(u=>u.text),c=await nI(t,e,n,void 0,a,{input:l,model:r,dimensions:1024},o,jx(t));if(c.status!==200||o.isCancellationRequested){wa(t,new Fy(`Failed to request dense embeddings, status: ${c.status}`),"LocalSnippetProvider.fetchEmbeddings");return}try{return(await c.json()).data.map(d=>({id:i[d.index].id,embedding:d.embedding}))}catch{return}}s(gNt,"sendEmbeddingsRequest");f();f();var WV=class{static{s(this,"CosineSimilarityScoring")}score(e,n){let r=Math.sqrt(e.reduce((a,l)=>a+l*l,0)),i=Math.sqrt(n.reduce((a,l)=>a+l*l,0));return e.reduce((a,l,c)=>a+l*n[c],0)/(r*i)}terminateScoring(){}};var ANt="cosine",yNt=new Map([["cosine",WV]]);function HWe(t){let e=t==="default"?ANt:t,n=yNt.get(e);if(!n)throw new Error(`Scoring constructor for type ${t} not found`);return n}s(HWe,"getScoringAlgorithm");f();var Y0=class{constructor(){this.workspaceScoringProviders=new Kn(25)}static{s(this,"ScoringProvider")}createImplementation(e,n){let r=HWe(n);return new r}getImplementation(e,n,r="default"){let i=this.workspaceScoringProviders.get(n.uri);return i||(i=this.createImplementation(e,r),this.workspaceScoringProviders.set(n.uri,i)),i}score(e,n,r,i,o){return this.getImplementation(e,n,o).score(r,i)}terminateScoring(e,n,r){this.getImplementation(e,n,r).terminateScoring(),this.workspaceScoringProviders.delete(n.uri)}};var GWe={modelFamily:xM.textEmbedding3Small,scoringType:"default",dimensions:null};async function jWe(t,e,n,r,i,o,a,l=GWe){let c={...GWe,...l},u=xNt(t,e,n,r);Ln.debug(t,`EmbeddingsReranker: Reranking ${u.length} snippets (includes the user query)`);let d=await t.get(na).getFirstMatchingEmbeddingModelConfiguration(c.modelFamily);if(d===void 0)throw new Error(`EmbeddingsReranker: Model configuration not found for ${c.modelFamily}`);let p=performance.now(),m=await WWe(t,d,u,o),h=performance.now();if(a.embeddingsTimeMs=Math.floor(h-p),m===void 0||m.length===0)return[];let g=m.findIndex(P=>P.id==="userQuery");if(g===void 0)return[];let y=m.splice(g,1)[0];if(o.isCancellationRequested)return[];let v=performance.now(),b=vNt(t,e,m,y,c.scoringType),E=performance.now();a.rerankingTimeMs=Math.floor(E-v);let _=b.slice(0,i);return Ln.debug(t,`EmbeddingsReranker: Returning ${_.length} snippets`),_.map(P=>u.find(N=>N.id===P.id).id)}s(jWe,"rerankSnippets");function xNt(t,e,n,r){let i=r.map(o=>({id:o.id,text:o.chunk.toLowerCase()}));return i.push({id:"userQuery",text:n.toLowerCase()}),i}s(xNt,"formatEmbeddingsInput");function vNt(t,e,n,r,i){let o=t.get(Y0);return n.map(l=>({id:l.id,score:o.score(t,e,r.embedding,l.embedding,i)})).sort((l,c)=>c.score-l.score)}s(vNt,"scoreEmbeddings");f();f();f();var pfe=je(LV());var bNt=.75,ENt=1.2,INt=47,HV=class{constructor(e,n){this.ctx=e;this.workspaceFolder=n;this.chunksCount=0;this.sumTokenCount=0;this.status="notStarted"}static{s(this,"BM25Ranking")}get avgTokenCount(){return this.sumTokenCount/this.chunksCount}async initialize(e){this.sumTokenCount=0,this.chunksCount=0;for await(let n of e)this.sumTokenCount+=n.tokenCount,this.chunksCount++;this.status="completed"}async addChunks(e){for await(let n of e)this.sumTokenCount+=n.tokenCount,this.chunksCount++}async query(e){let n=await GV();try{return await this.doQuery(e)}finally{await n.stopWorkerPool()}}async doQuery(e){let n=e.map(l=>l.toLowerCase()),r=await this.calculateIDFValues(n),i=Math.min(10*e.length,INt),o=Math.min(i,this.chunksCount);return await this.calculateBM25Scores(n,this.avgTokenCount,r,o)}async calculateIDFValues(e){let n=this.ctx.get(ga).getChunks(this.workspaceFolder),r=W1(n,o=>({...o,chunk:o.chunk.toLowerCase()})),i=W1(r,o=>o.chunk);return await TNt(e,i)}async calculateBM25Scores(e,n,r,i){let o=this.ctx.get(ga).getChunks(this.workspaceFolder),a=new ffe(i);for await(let l of o){let c=await wNt({...l,chunk:l.chunk.toLowerCase()},e,n,r);a.add({...c,chunk:l.chunk})}return a.toArray(.75)}deleteEmbeddings(e){this.chunksCount-=e.length,this.sumTokenCount-=e.reduce((n,r)=>n+r.tokenCount,0)}terminateRanking(){}};async function TNt(t,e){let n=new SharedArrayBuffer(t.length*Int32Array.BYTES_PER_ELEMENT),r=new Int32Array(n),i=[],o=0;for await(let c of e){o++;let u=pfe.job(({snippet:d,keywords:p})=>p.map(h=>d.includes(h)?1:0),{data:{snippet:c,keywords:t}}).then(d=>{for(let p=0;p<t.length;p++)Atomics.add(r,p,d[p])});i.push(u)}await Promise.all(i);let a=new Int32Array(n),l={};for(let c=0;c<t.length;c++)l[t[c]]=Math.log((o-a[c]+.5)/(a[c]+.5)+1);return l}s(TNt,"calculateIDFValues");async function wNt(t,e,n,r){return{score:await pfe.job(({keywords:o,document:a,docLength:l,avgTokenCount:c,idfValues:u,k1:d,b:p})=>{let m=0;for(let h of o){let g=u[h],y=(a.match(new RegExp(h,"g"))||[]).length,v=g*(y*(d+1)),b=y+d*(1-p+p*l/c);m+=v/b}return m},{data:{document:t.chunk,docLength:t.tokenCount,keywords:e,avgTokenCount:n,idfValues:r,k1:ENt,b:bNt}}),...t}}s(wNt,"calculateBM25Score");var ffe=class{constructor(e,n=-1/0){this.maxSize=e;this.minScore=n;this.store=[]}static{s(this,"SimpleHeap")}toArray(e){if(this.store.length&&typeof e=="number"){let n=this.store.at(0).score*(1-e);return this.store.filter(r=>r.score>=n)}return this.store}add(e){if(e.score<=this.minScore)return;let n=this.store.findIndex(r=>r.score<e.score);for(this.store.splice(n>=0?n:this.store.length,0,e);this.store.length>this.maxSize;)this.store.pop();this.store.length===this.maxSize&&(this.minScore=this.store.at(-1)?.score??this.minScore)}};var SNt="bm25",RNt=new Map([["bm25",HV]]);function VWe(t){let e=t==="default"?SNt:t,n=RNt.get(e);if(!n)throw new Error(`Ranking constructor for type ${t} not found`);return n}s(VWe,"getRankingAlgorithm");var Tc=class{constructor(){this.workspaceRankingProviders=new Kn(25)}static{s(this,"RankingProvider")}createImplementation(e,n,r){let i=VWe(r);return new i(e,n)}getImplementation(e,n,r="default"){let i=this.workspaceRankingProviders.get(n.uri);return i||(i=this.createImplementation(e,n,r),this.workspaceRankingProviders.set(n.uri,i)),i}status(e,n,r){return this.getImplementation(e,n,r).status}async initialize(e,n,r,i="default"){await this.getImplementation(e,n,i).initialize(r)}async addChunks(e,n,r,i="default"){await this.getImplementation(e,n,i).addChunks(r)}async query(e,n,r,i){return this.getImplementation(e,n,i).query(r)}async terminateRanking(e,n,r){await this.getImplementation(e,n,r).terminateRanking(),this.workspaceRankingProviders.delete(n.uri)}deleteEmbeddings(e,n,r,i){return this.getImplementation(e,n,i).deleteEmbeddings(r)}};f();async function $We(t,e){let n=t.ctx,r=await xo.getModelConfiguration(n,"synonyms",void 0,{tool_calls:!0}),i={promptType:"synonyms",modelConfiguration:r},o=await n.get(wc).toPrompt(t,i);if(!o.toolConfig)return;let a={modelConfiguration:r,uiKind:"conversationPanel",messages:o.messages,tools:o.toolConfig?.tools,tool_choice:o.toolConfig?.tool_choice,llmInteraction:t.toLlmInteraction()},l=new ta(n),c=await ml(n,t),u=await l.fetchResponse(a,e,c.extendedBy({messageSource:"chat.synonyms"}));if(u.type==="success"&&u.toolCalls&&u.toolCalls.length>0){let d=u.toolCalls[0],p=o.toolConfig?.extractArguments(d).keywords;return!p||!Array.isArray(p)?void 0:(Ln.debug(n,`UserQueryParser: Parsed ${p.length} keywords from the original user query: ${p.join(", ")}`),p.length?p:void 0)}else{let d="reason"in u?u.reason:"";wa(n,new Fy(`Failed to request user query synonyms, result type: ${u.type}, reason: ${d}`),"LocalSnippetProvider.parseUserQuery")}}s($We,"parseUserQuery");var zWe=je(z0());var Fy=class extends Error{static{s(this,"LocalSnippetProviderError")}constructor(e){super(String(e),{cause:e}),this.name="LocalSnippetProviderError"}},jV=class{constructor(){this.providerType="local"}static{s(this,"LocalSnippetProvider")}snippetProviderStatus(e,n){if(!e.turn.workspaceFolder)return Promise.resolve("not_indexed");n===void 0&&(n=!0);let r=e.ctx,i=r.get(ga),o=i.status(e.turn.workspaceFolder),a=r.get(Tc),l=a.status(r,e.turn.workspaceFolder);if(o==="completed"&&l==="completed")return Promise.resolve("indexed");if(o==="started"||l==="started")return Promise.resolve("indexing");if(n){let c=e.turn.workspaceFolder;if(o==="notStarted")return Promise.race([i.chunk(r,c).then(u=>{if(i.status(c)==="completed")return a.initialize(r,c,u)}).then(()=>this.snippetProviderStatus(e,!1)),new Promise(u=>setTimeout(()=>u("not_indexed"),1e3))]);if(l==="notStarted"){let u=i.getChunks(c);return Promise.race([a.initialize(r,c,u).then(()=>this.snippetProviderStatus(e,!1)),new Promise(d=>setTimeout(()=>d("not_indexed"),1e3))])}}return Promise.resolve("not_indexed")}async collectLocalSnippets(e,n){let r=e.turn.workspaceFolder;if(!r)return[];let i=e.ctx,a=await i.get(ga).chunkCount(r);if(a===0)return[];n.chunkCount=a;let l,c=performance.now();try{l=await $We(e,e.cancelationToken)}catch(g){let y=new Fy(g);wa(i,y,"LocalSnippetProvider.parseUserQuery")}let u=performance.now();if(n.synonymTimeMs=Math.floor(u-c),l===void 0)return[];let d=i.get(Tc),p=[],m=performance.now();try{let g=await d.query(i,r,l);n.localSnippetCount=g.length,p=g}catch(g){let y=new Fy(g);wa(i,y,"LocalSnippetProvider.rankingQuery")}let h=performance.now();return n.rankingTimeMs=Math.floor(h-m),p}async rerankLocalSnippets(e,n,r){let i=e.turn.workspaceFolder;if(!i)return[];let o=e.ctx,a=Vn(e.turn.request.message),l=[];try{l=await jWe(o,i,a,n,5,e.cancelationToken,r)}catch(d){let p=new Fy(d);wa(o,p,"LocalSnippetProvider.rerankSnippets")}let c=[],u=o.get(Nr);for(let d of l){let p=d.split("#")[0],m=await u.getOrReadTextDocument({uri:p}),h=n.find(g=>g.id===d);if(m.status==="valid"){let g=m.document.positionAt(h.range.start),y=m.document.positionAt(h.range.end),v=Mo.range(g,y);c.push({uri:m.document.uri,range:v,snippet:h.chunk})}}return c}async provideSnippets(e){let n=this.collectInfoMessage(e);n&&await e.info(n);let r={...y4e},i=await this.collectLocalSnippets(e,r);if(i.length===0)return{snippets:[],measurements:r};let o=e.ctx;return Ln.debug(o,`LocalSnippetProvider: First pass: Found ${i.length} snippets.`),{snippets:await this.rerankLocalSnippets(e,i,r),measurements:r}}collectInfoMessage(e){let n=e.turn.workspaceFolder;if(!n)return;let o=e.ctx.get(ga).checkLimits(n);if(o.fileCountExceeded||o.chunkCountExceeded)return zWe.default`
Copilot has partially indexed this project as it exceeds the file limit. As a result, responses may have incomplete context. Consider excluding large, less relevant files or folders (e.g., large CSV files) to improve accuracy.
`}};var KWe=je(YWe()),zV=je(LV()),JWe=je(require("os")),XWe=je(z0());var PNt=Math.min(Math.max(Math.ceil(JWe.cpus().length/2),1),10),r6=class t{constructor(){this.isActive=!0}static{s(this,"WorkerPoolToken")}static{this.workerPoolStarted=!1}static{this.activeProcessCount=0}static{this.allTokens=[]}static{this.lock=new KWe.default}static async startWorkerPool(){await t.lock.acquireAsync();try{t.workerPoolStarted||(t.workerPoolStarted=!0,await zV.start({maxWorkers:PNt})),t.activeProcessCount++;let e=new t;return t.allTokens.push(e),e}finally{t.lock.release()}}async stopWorkerPool(){if(this.isActive){await t.lock.acquireAsync();try{this.isActive&&(this.isActive=!1,t.activeProcessCount--,t.activeProcessCount==0&&(await zV.stop(),t.workerPoolStarted=!1),t.allTokens.includes(this)&&t.allTokens.splice(t.allTokens.indexOf(this),1))}finally{t.lock.release()}}}static async forceStopWorkerPool(){let e=t.allTokens[Symbol.iterator]();for(let n of e)await n.stopWorkerPool();t.workerPoolStarted=!1,t.activeProcessCount=0}},GV=r6.startWorkerPool.bind(r6);var hRr=I.Object({uri:I.String(),snippet:I.String(),range:I.Object({start:I.Object({line:I.Number(),character:I.Number()}),end:I.Object({line:I.Number(),character:I.Number()})})}),gfe=class{constructor(e){this.turnContext=e}static{s(this,"ProjectContextSkillProcessor")}value(){return 1}async processSkill(e){if(this.turnContext.cancelationToken.isCancellationRequested){await this.turnContext.steps.cancel(GR);return}let n=[],r=this.turnContext.ctx.get(Nr),i=this.removeDuplicateSnippets(e);for(let o of i){let{uri:a,snippet:l,range:c}=o,u=await r.getOrReadTextDocument(o);if(u.status==="valid"){let d=new EA(u.document,c,c),p=new Bt([l]),h=n6(a)?.5:.8;n.push([`Code excerpt from file \`${Ho(a)}\`:`,1],[d.wrapInTicks(p,h),1]),await this.turnContext.collectFile(jR,a,ys(u),c)}}if(n.length>0)return n.unshift([new Bt(["The user wants you to consider the following snippets when computing your answer."]),1]),new Bt(n)}removeDuplicateSnippets(e){let n={};return e.forEach(r=>{let i=`${r.uri}#[${r.range.start.line},${r.range.start.character}]-[${r.range.end.line},${r.range.end.character}]`;n[i]||(n[i]=r)}),Object.values(n)}},GR="collect-project-context",VV=class extends FR{constructor(n,r=[new jV]){super();this.ctx=n;this.snippetProviders=r;this.ready=!1;this.ctx.get(gA).addListener(this)}static{s(this,"ProjectContextSkillResolver")}start(){this.ready=!0}async onWorkspaceAdded(n){if(!await this.isEnabled()||(this.workerPoolToken=await GV(),!n.uri))return;let r=this.ctx.get(ga),i=this.ctx.get(iu),o=this.ctx.get(Tc),a=await r.chunk(this.ctx,n);r.status(n)!=="completed"&&i.terminateWatching(n),await o.initialize(this.ctx,n,a),await this.workerPoolToken.stopWorkerPool()}async onWorkspaceRemoved(n){if(!await this.isEnabled())return;let r=this.ctx.get(ga);if(!n)return;let i=r.getParentFolder(n);if(i){let l=await r.deleteSubfolderChunks(i,n);await this.ctx.get(Tc).deleteEmbeddings(this.ctx,i,l);return}r.terminateChunking(this.ctx,n),await this.ctx.get(Tc).terminateRanking(this.ctx,n),this.ctx.get(Y0).terminateScoring(this.ctx,n),r.workspaceCount===0&&await r6.forceStopWorkerPool()}async onWorkspaceSubfoldersTerminated(n,r){let i=this.ctx.get(ga),o=this.ctx.get(Tc),a=this.ctx.get(Y0);for(let l of r)i.terminateChunking(this.ctx,l),await o.terminateRanking(this.ctx,l),a.terminateScoring(this.ctx,n)}async onFileChange(n){if(!await this.isEnabled())return;let r=await GV();try{let i=n.documents.map(c=>c.uri),o=n.workspaceFolder;if(!o)return;let a=this.ctx.get(ga),l=this.ctx.get(Tc);if(n.type==="delete"||n.type==="update"){let c=await a.deleteFileChunks(o,i);await l.deleteEmbeddings(this.ctx,o,c)}if(n.type==="create"||n.type==="update"){let c=await a.chunk(this.ctx,o,n.documents);await l.addChunks(this.ctx,o,c)}}finally{await r.stopWorkerPool()}}isStarted(){return this.ready}async isEnabled(){return!0}async resolveSkill(n){await n.steps.start(GR,"Collecting relevant project context"),await n.info(XWe.default`Project context is applied to this response, which may lead to slightly longer load times. For faster and more general Copilot responses, remove the project context option from your prompt.`);let r=this.snippetProviders.map(async l=>l.snippetProviderStatus(n)),i=await Promise.all(r),o="not_indexed",a;for(let l of qWe){let c=i.findIndex(u=>u===l);if(c!==-1){o=l,a=this.snippetProviders[c];break}}switch(o){case"indexed":{let{snippets:l,measurements:c}=await a.provideSnippets(n);if(await C4e(n,a.providerType,c),l.length===0){await n.steps.error(GR,"No project context found");return}return await n.steps.finish(GR),l}case"indexing":{await n.steps.error(GR,"Indexing repository, please try again later");return}case"not_indexed":{await n.steps.error(GR,"No project context available");return}}}},jR="project-context",$V=class extends Kl{static{s(this,"ProjectContextSkill")}constructor(e){super(jR,"Code snippets and documentation from the open project. This skill is useful when the user question is specific to the open project and its context. Do not include this skill for general programming questions.","Performing code search",()=>e,n=>new gfe(n),"implicit",["Relevant: How do I add a custom server route?","Relevant: Where is the code that processes the response from CopyableThreadElement?","Relevant: Where do I add tests for the InputValidation class?","Relevant: How to implement a shared buffer component","Not relevant: What does numpy do?"],()=>!0)}};f();var ZWe=I.Object({labels:I.Array(I.String())}),Afe=class{constructor(e){this.turnContext=e}static{s(this,"ProjectLabelsSkillProcessor")}value(){return 1}processSkill(e){let n=[];return n.push([new Bt(["The developer is working on a project with the following characteristics (languages, frameworks):"]),1]),e.labels.forEach(r=>{n.push([new Bt([`- ${r}`]),.9]),this.turnContext.collectLabel(fh,r)}),new Bt(n)}},fh="project-labels",YV=class{constructor(e){this._resolver=e;this.id=fh;this.type="explicit"}static{s(this,"ProjectLabelsSkill")}description(){return"The characteristics of the project the developer is working on (languages, frameworks)"}resolver(){return this._resolver}processor(e){return new Afe(e)}};f();var KV=je(z0());var tHe={id:0,start_offset:0,stop_offset:0,type:"code_vulnerability",details:{type:"server-side-unvalidated-url-redirection",description:"Allows a URL to be redirected to a different URL that is specified by an external user.",ui_type:"test",ui_description:"test"}},nHe=KV.dedent`
    Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna 
    aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.
`,rHe=KV.dedent`
    \`\`\`kotlin
    fun main() {
        println("Hello, World!")
    }
    \`\`\`
`,DNt=KV.dedent`
    ### Inputs
    
    \`p\` - paragraph message
    
    \`c\` - code block
    
    \`<number>\` - number of vulnerabilities, must be at the end of the string (applies to all code blocks)
    
    ### Examples
    
    \`/debug.vulnerability\` - 1 paragraph followed by 1 code block with 1 vulnerability
    
    \`/debug.vulnerability pcc2\` - 1 paragraph followed by 2 code blocks with 2 vulnerabilities each
    
    \`/debug.vulnerability cpc3\` - 1 code block followed by 1 paragraph followed by 1 code block--each code block has 3 vulnerabilities
`,yfe=`

`,eHe=nHe+yfe+rHe;function iHe(t){let e=1;if(t.length===0)return{reply:eHe,vulnerabilities:e};if(t==="0")return{reply:eHe,vulnerabilities:0};if(t==="help")return{reply:DNt,vulnerabilities:e};let n=t.slice(-1);isNaN(Number(n))||(e=Number(n),t=t.slice(0,-1));let r="";for(let i of t)i==="p"?r+=nHe+yfe:i==="c"&&(r+=rHe+yfe);return{reply:r.trimEnd(),vulnerabilities:e}}s(iHe,"parseVulnerabilitiesInstructions");var oHe=je(z0());var NNt="Oops, your response got filtered. Vote down if you think this shouldn't have happened",LNt="You've reached your monthly chat messages limit. Upgrade to Copilot Pro (30-day free trial) or wait for your limit to reset.",Cfe=class{constructor(){this.id="debug.fail";this.description="Fail for debugging purposes";this.shortDescription="Fail";this.scopes=["chat-panel"]}static{s(this,"DebugFailPromptTemplate")}response(e,n){throw new Error(n.length>0?n:"Debug Fail")}},FNt=new Cfe,xfe=class{constructor(){this.id="debug.upgrade";this.description="upgrade for debugging purposes";this.shortDescription="upgrade";this.scopes=["chat-panel"]}static{s(this,"DebugUpgradePromptTemplate")}response(e){return new Jl(LNt,{message:"",code:402,responseIsIncomplete:!0,responseIsFiltered:!1})}},MNt=new xfe,vfe=class{constructor(){this.id="debug.notify";this.description="Notify for debugging purposes";this.shortDescription="Notify";this.scopes=["chat-panel","inline"]}static{s(this,"DebugNotificationPromptTemplate")}response(e,n){let r="warning";n.includes("info")&&(r="info");let i=n.replace("info","").replace("warning","").trim(),o=[{severity:r,message:i.length>0?i:"Debug Notification"}];return new Jl("Alright, I'm producing a notification",void 0,[],o)}},QNt=new vfe,bfe=class{constructor(){this.id="debug.filter";this.description="Make the RAI filter kick in";this.shortDescription="RAI Filter";this.scopes=["chat-panel"]}static{s(this,"DebugFilterPromptTemplate")}response(e){return e.turn.status="filtered",new Jl(NNt,{message:"",responseIsFiltered:!0,responseIsIncomplete:!1})}},ONt=new bfe,Efe=class{constructor(){this.id="debug.dump";this.description="Dump the conversation";this.shortDescription="Dump";this.scopes=["chat-panel"]}static{s(this,"DebugDumpPromptTemplate")}async response(e){return new Jl(await aHe(e))}},UNt=new Efe,Ife=class{constructor(){this.id="debug.tree";this.description="Jingle bells, jingle bells, jingle all the way";this.shortDescription="Christmas Tree";this.scopes=["chat-panel"]}static{s(this,"DebugChristmasTreePromptTemplate")}requiredSkills(){return[fh,lu]}instructions(e,n){return"Create a function that prints a christmas tree"}},qNt=new Ife,Tfe=class{constructor(){this.id="debug.echo";this.description="Echo the user message back to the user";this.shortDescription="Echo";this.scopes=["chat-panel"]}static{s(this,"DebugEchoPromptTemplate")}response(e){return new Jl(Vn(e.turn.request.message))}},WNt=new Tfe,wfe=class{constructor(){this.id="debug.prompt";this.description="Show the prompt for the last response or generate a new one";this.shortDescription="Prompt";this.scopes=["chat-panel"]}static{s(this,"DebugPromptPromptTemplate")}response(e,n){let r=e.ctx.get(Xl).getLastTurnPrompts();if(r!==void 0&&r.size>0){let i="Here are the prompts used in the last turn:";return r.forEach((o,a)=>{i+=oHe.default`

                        ### ${a} prompt
                        
                        \`\`\`\`
                        ${o}
                        \`\`\`\`
                    `}),new Jl(i)}return new Jl("No prompt available")}},HNt=new wfe,_fe=class{constructor(){this.id="debug.skills";this.description="Resolves and displays all available skills or a single skill (id) if provided";this.shortDescription="Skills";this.scopes=["chat-panel"]}static{s(this,"DebugSkillsPromptTemplate")}async response(e,n,r){let i,o;if(n.length>0){let a=n.split(" ");i=a[0],o=a.slice(1).join(" ")}return e.turn.request.message=o??"",new Jl(await lHe(e,r,i))}},GNt=new _fe,Sfe=class{constructor(){this.id="debug.vulnerability";this.description="Create a message with a vulnerability annotation";this.shortDescription="Vulnerability";this.scopes=["chat-panel"]}static{s(this,"DebugVulnerabilityPromptTemplate")}response(e,n){let{reply:r,vulnerabilities:i}=iHe(n);for(let o=0;o<i;o++)e.turn.annotations.push(tHe);return new Jl(r,void 0,e.turn.annotations)}},jNt=new Sfe,Rfe=class{constructor(){this.id="debug.citation";this.description="Create a message with a code citation annotation";this.shortDescription="CodeCitation";this.scopes=["chat-panel"]}static{s(this,"DebugCodeCitationPromptTemplate")}response(e){return e.turn.annotations.push(MWe),new Jl(QWe,void 0,e.turn.annotations)}},VNt=new Rfe,kfe=class{constructor(){this.id="debug.markdown";this.description="Markdown rendering specification by example";this.shortDescription="Markdown";this.scopes=["chat-panel","inline"]}static{s(this,"DebugMarkdownRenderingPromptTemplate")}response(){return new Jl(OWe)}},$Nt=new kfe,Bfe=class{constructor(){this.id="debug.long";this.description="Generate a long response";this.shortDescription="Long";this.scopes=["chat-panel"]}static{s(this,"DebugLongPromptTemplate")}instructions(e,n){return"Write out the OWASP top 10 with code examples in java"}},zNt=new Bfe,Pfe=class{constructor(){this.id="debug.project";this.description="Generate a response using the project context skill";this.shortDescription="Project";this.scopes=["chat-panel","inline"]}static{s(this,"DebugProjectContextPromptTemplate")}requiredSkills(){return[jR]}},YNt=new Pfe,Dfe=class{constructor(){this.id="debug.confirmation";this.description="Generate a response with a confirmation";this.shortDescription="Confirmation";this.scopes=["chat-panel","inline"]}static{s(this,"DebugConfirmationPromptTemplate")}response(){let e={type:"action",title:"Confirmation that you want to proceed",message:"Do you want to proceed?",agentSlug:"debug.confirmation",confirmation:{answer:"yes"}};return new Jl("Alright, I'm producing a notification",void 0,[],[],[],e)}},KNt=new Dfe;function sHe(){return[FNt,MNt,QNt,ONt,qNt,UNt,WNt,HNt,GNt,jNt,VNt,KNt,$Nt,zNt,YNt]}s(sHe,"getDebugTemplates");f();f();function Db(t,e){if(t.length==0)return new Bt([]);let n=t.map((r,i)=>{let o;switch(e){case"linear":o=1-i/t.length;break;case"inverseLinear":o=(i+1)/t.length;break;case"positional":o=1/(i+1);break;case"inversePositional":o=1/(t.length-i);break}return Array.isArray(r)&&r.length==2&&(o*=r[1],r=r[0]),[r,o]});return new Bt(n)}s(Db,"weighElidableList");var cHe=I.Object({uri:I.String(),problems:I.Array(I.Object({message:I.String(),range:_a}))}),Nfe=class{constructor(e){this.turnContext=e}static{s(this,"ProblemsInActiveDocumentSkillProcessor")}value(){return 1}async processSkill(e){let n=this.turnContext.ctx.get(Nr),r=await n.getOrReadTextDocument(e);if(await this.turnContext.collectFile(Nb,e.uri,ys(r)),r.status==="valid"){let i=n.getRelativePath(r.document);this.turnContext.collectLabel(Nb,`problems in ${i}`);let o=this.getElidableProblems(e,r,i);return await this.preElideDocuments(o)}else this.turnContext.collectLabel(Nb,"problem markers")}getElidableProblems(e,n,r){let i=[];return i.push(new Bt([`Problems and errors in the active document (\`${r}\`):`])),i.push(...this.createElidableProblems(e,n)),Db(i,"linear")}createElidableProblems(e,n){return e.problems.map(r=>{let i=[];i.push(new Bt([`- "${r.message}" at line ${r.range.start.line}.`+(n.document?" Excerpt from the code:":"")]));let o=r.range,a;if(o&&(this.isEmpty(o)?a=n.document.lineAt(o.start).text:a=n.document.getText(o),a)){let l=n.document.detectedLanguageId;i.push(new Bt([["```"+l,1],[y0(a),.8],["```",1]]))}return new Bt(i)})}isEmpty(e){return e.start.line===e.end.line&&e.start.character===e.end.character}async preElideDocuments(e){let n=(await xo.getModelConfiguration(this.turnContext.ctx,"user")).maxRequestTokens,r=e.elide(Math.floor(n*.1)).getText();return new Bt([r])}},Nb="problems-in-active-document",JV=class extends Kl{static{s(this,"ProblemsInActiveDocumentSkill")}constructor(e){super(Nb,"List of problems and errors in the active document, useful when the user question is about finding and fixing errors, non-functioning code, compilation issues, etc.","Analyzing problems and errors",()=>e,n=>new Nfe(n),"explicit",["How can I fix the errors?","Why is my app not working?","Why am I getting compilation errors?","Raw error messages or stack traces"])}};f();f();var XV=class{constructor(e){this.turnContext=e}static{s(this,"PromptForTestGeneration")}async fromImplementationFile(e){let n=this.turnContext.ctx.get(Nn).getWorkspaceFolder(e),r=this.fileExistFn(),i=new t6(this.turnContext.ctx,r,n?.uri),o=await i.findTestFileForSourceFile(e.uri),a=n6(e.uri);if(o&&!a){let l=e.detectedLanguageId;if(await r(o))return await this.asTestFilePrompt(l,o);{let c=i.findExampleTestFile(e.uri);if(c)return await this.asExampleFilePrompt(l,c)}}}async fromTestFile(e){if(!n6(e))return;let r=this.turnContext.ctx.get(Nn).getWorkspaceFolder(e),i=this.fileExistFn(),a=await new t6(this.turnContext.ctx,i,r?.uri).findImplFileForTestFile(e.uri);if(a){let l=e.detectedLanguageId;if(await i(a))return await this.asImplFilePrompt(l,a)}}async asImplFilePrompt(e,n){let r=await this.fileInfoForPrompt(n);if(r){let[i,o]=r;return new Bt([[`${JNt} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new Bt([])}async asTestFilePrompt(e,n){let r=await this.fileInfoForPrompt(n);if(r){let[i,o]=r;return new Bt([[`${XNt} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new Bt([])}async asExampleFilePrompt(e,n){let r=await this.fileInfoForPrompt(n);if(r){let[i,o]=r;return new Bt([[`${ZNt} \`${o}\`:`,1],["```"+e,1],[i,.9],["```",1]])}return new Bt([])}async fileInfoForPrompt(e){if(!this.turnContext.isFileIncluded(e)){let n=this.turnContext.ctx.get(Nr),r=await n.getOrReadTextDocument({uri:e});if(await this.turnContext.collectFile(ph,e,ys(r)),r.status==="valid"){let i=n.getRelativePath(r.document);return[y0(r.document.getText()),i]}}}fileExistFn(){return async e=>{try{return await this.turnContext.ctx.get(po).stat(e),!0}catch{return!1}}}},JNt="Code excerpt from the implementation source file",XNt="Code excerpt from the test file",ZNt="Code excerpt from an example test file";var uHe=I.Object({currentFileUri:I.String(),sourceFileUri:I.Optional(I.String()),testFileUri:I.Optional(I.String())}),Ffe=class{constructor(e){this.turnContext=e}static{s(this,"TestContextSkillProcessor")}value(){return .9}async processSkill(e){let n=this.turnContext.ctx.get(Nr),r=new XV(this.turnContext);if(e.sourceFileUri&&e.testFileUri){if(e.sourceFileUri!==e.currentFileUri&&e.testFileUri!==e.currentFileUri)return;if(e.testFileUri===e.currentFileUri){let i=await n.getOrReadTextDocument({uri:e.testFileUri});if(await this.turnContext.collectFile(ph,e.testFileUri,ys(i)),i.status==="valid")return await r.asImplFilePrompt(i.document.detectedLanguageId,e.sourceFileUri)}else if(e.sourceFileUri===e.currentFileUri){let i=await n.getOrReadTextDocument({uri:e.sourceFileUri});if(await this.turnContext.collectFile(ph,e.sourceFileUri,ys(i)),i.status==="valid")return await r.asTestFilePrompt(i.document.detectedLanguageId,e.testFileUri)}}else if(e.sourceFileUri&&e.sourceFileUri===e.currentFileUri){let i=await n.getOrReadTextDocument({uri:e.sourceFileUri});if(await this.turnContext.collectFile(ph,e.sourceFileUri,ys(i)),i.status==="valid")return await r.fromImplementationFile(i.document)}else if(e.testFileUri&&e.testFileUri===e.currentFileUri){let i=await n.getOrReadTextDocument({uri:e.testFileUri});if(await this.turnContext.collectFile(ph,e.testFileUri,ys(i)),i.status==="valid")return await r.fromTestFile(i.document)}}},ph="test-context",ZV=class extends Kl{static{s(this,"TestContextSkill")}constructor(e){super(ph,"Example tests useful for creating, adding and fixing tests, to detect available test frameworks as well as finding the corresponding implementation to existing tests","Searching test examples",()=>e,n=>new Ffe(n))}};f();var dHe=je(z0());var fHe=I.Object({failures:I.Array(I.Object({testName:I.String(),testSuite:I.Optional(I.String()),testFileUri:I.String(),failureReason:I.Optional(I.String()),testLocation:_a}))}),Mfe=class{constructor(e){this.turnContext=e}static{s(this,"TestFailuresSkillProcessor")}value(){return .9}async processSkill(e){if(e.failures.length>0){this.turnContext.collectLabel(ST,"test failures");let n=await this.createElidableFailures(e.failures);if(n){let r=new Bt(["The latest test run produced the following failures and errors:"]);return new Bt([[r,1],[n,1]])}}}async createElidableFailures(e){let n=this.turnContext.ctx.get(Nr),r=[],i=this.groupFailuresByFile(e);for(let[o,a]of i.entries()){let l=await n.getOrReadTextDocument({uri:o});if(await this.turnContext.collectFile(ST,o,ys(l)),l.status==="valid"){let c=n.getRelativePath(l.document),u=this.createElidableFailuresOfDoc(a,c),d=this.appendCode(u,c,l.document);r.push([d,1])}}if(r.length>0)return new Bt(r)}groupFailuresByFile(e){let n=new Map;for(let r of e){let i=n.get(r.testFileUri)||[];i.push(r),n.set(r.testFileUri,i)}return n}createElidableFailuresOfDoc(e,n){let r=e.map(i=>{let o=`\`${i.testName}\``,a=`${i.testSuite?` in suite \`${i.testSuite}\``:""}`,l=` in file \`${n}\` `,c=". ";i.failureReason&&(c=" with the following error:",i.failureReason.includes(`
`)?c+="\n```\n"+i.failureReason+"\n```\n":c+=` \`${i.failureReason}\`. `);let u=`${i.testLocation.start.line==i.testLocation.end.line?"on line "+i.testLocation.start.line:"between lines "+i.testLocation.start.line+" and "+i.testLocation.end.line}`;return[new Bt([dHe.default`\n\n- Test ${o}${a}${l}failed${c}The failed test is ${u}.\n`]),1]});return new Bt(r)}appendCode(e,n,r){let i=[new Bt([`
The code of file \`${n}\` is:
`]),.6],o=[new Bt([["```"+r.detectedLanguageId,1],[y0(r.getText()),.9],["```",1]]),.7];return new Bt([[e,1],i,o])}},ST="test-failures",e$=class extends Kl{static{s(this,"TestFailuresSkill")}constructor(e){super(ST,"Test failures and errors of the latest test run","Collecting test failures",()=>e,n=>new Mfe(n))}};var wp=je(z0());var Jl=class{constructor(e,n,r=[],i=[],o=[],a){this.message=e;this.error=n;this.annotations=r;this.notifications=i;this.references=o;this.confirmationRequest=a}static{s(this,"PromptTemplateResponse")}},RT=class{constructor(e,n,r,i,o=[],a=[],l,c=!1){this.id=e;this.description=n;this.shortDescription=r;this.prompt=i;this.skills=o;this.scopes=a;this.inlinePrompt=l;this.producesCodeEdits=c}static{s(this,"StaticPromptTemplate")}instructions(e,n,r="panel"){let i;return r==="inline"?i=this.inlinePrompt??this.prompt:i=this.prompt,i+`
`+n}requiredSkills(){return this.skills}},e7t=new RT("tests","Generate unit tests","Generate Tests",wp.default`
        Write a set of unit tests for the code above, or for the selected code if provided.
        Provide tests for the functionality of the code and not the implementation details.
        The tests should test the happy path as well as the edge cases.
        Choose self explanatory names for the tests that describe the tested behavior. Do not start the test names with "test".
        Think about the different scenarios that could happen and test them.
        Do reply with the tests only and do not explain them further.
        Do reply with new or modified tests only and not with the complete test class or suite.
        Follow the same test style as in existing tests if they exist.
        You must not create inline comments like "Arrange, Act, Assert", unless existing tests use inline comments as well.
        If existing tests use any mocking or stubbing libraries, use the same libraries before writing your own test doubles.
        `,[ph,ST],["chat-panel","editor"]),t7t=new RT("simplify","Simplify the code","Simplify This",wp.default`
        Provide a simplified version of the selected code above.
        Do not change the behavior of the code. 
        The code should still be readable and easy to understand. 
        Do not reply with the original code but only a simplified version. 
        Do only reply with one code snippet that contains the complete simplified code and explain what you have simplified after.`,[],["editor","chat-panel","inline"],wp.default`
        Provide a simplified version of the selected code.
        Modify the selected code to make it simpler and easier to understand.
        Do not change the behavior of the code. 
        Removing empty lines is not a simplification.
        You must not omit any code that is necessary for the code to compile and run, for example by replacing lines with ... or similar.
        Do not reply with the original code but only a simplified version.`,!0),n7t=new RT("fix","Fix problems and compile errors","Fix This",wp.default`
        Fix the provided errors and problems. 
        Do not invent new problems.
        The fixed code should still be readable and easy to understand.
        If there are no problems provided do reply that you can't detect any problems and the user should describe more precisely what they want to be fixed. 
        Group problems if they are related and can be fixed by the same change. 
        Present a group as a single problem with a simple description that does not repeat the single problems but explains the whole group of problems in a few words.
        Explain each group of problems without repeating the detailed error message. 
        Show how the error can be fixed by providing a code snippet that displays the code before and after it has been fixed after each group. 
        Shorten fully qualified class names to the simple class name and full file paths to the file names only.
        When enumerating the groups, start with the word "Problem" followed by the number and a quick summary of the problem. Format this headline bold.
        At last provide a completely fixed version of the code if the fixes required multiple code changes.`,[Nb],["editor","chat-panel","inline"],wp.default`
        Fix the provided errors and problems. 
        Do not invent new problems.
        The fixed code should still be readable and easy to understand.
        If there are no problems provided do reply that you can't detect any problems and the user should describe more precisely what they want to be fixed.
        Do not attempt to fix problems that are not provided, like unbalanced brackets or parentheses that are not causing errors.
        Briefly explain the problems without repeating the detailed error message.`,!0),r7t=new RT("explain","Explain how the code works","Explain This",wp.default`
        Write an explanation for the selected code above as paragraphs of text. 
        Include excerpts of code snippets to underline your explanation. 
        Do not repeat the complete code.
        The explanation should be easy to understand for a developer who is familiar with the programming language used but not familiar with the code.`,[],["editor","chat-panel","inline"],wp.default`
        Write an explanation for the code the user is selecting.
        Include excerpts of code snippets to underline your explanation. 
        Do not repeat the complete code.
        Keep the explanation brief and easy to understand for a developer who is familiar with the programming language used but not familiar with the code.`,!1),i7t=new RT("doc","Document the current selection of code","Generate Docs",wp.default`
        Write documentation for the selected code.
        The reply should be a codeblock containing the original selection with the documentation added as comments.
        Use the most appropriate documentation style for the programming language used (e.g. JSDoc for JavaScript, docstrings for Python etc.)`,[],["editor","chat-panel","inline"],wp.default`
        Add documentation to the selected code.
        Modify the selected code by adding documentation as comments.
        You must only modify the selected code and nothing else.
        Use the most appropriate documentation style for the programming language used (e.g. JSDoc for JavaScript, docstrings for Python etc.).
        Place the comments before functions and methods, unless the language has a different convention (for example Python's docstring).`,!0),Qfe=class{constructor(){this.id="feedback";this.description="Steps to provide feedback";this.shortDescription="Feedback";this.scopes=["chat-panel"]}static{s(this,"FeedbackPromptTemplate")}response(e){let n=qfe(e.conversation),r=wp.default`
            You can provide direct feedback by pressing the thumbs up/down buttons on a single message. 
            In case you want to share more details, please click [here](https://gh.io/copilot-chat-jb-feedback) to share your feedback.
            `;return n?new Jl(r+`

In order to help us understand your feedback better, you can include the following identifier in your feedback: by doing so, you are granting us permission to access the telemetry data associated with your feedback.
\`\`\`yaml
${e.conversation.id}/${n}
\`\`\``):new Jl(r)}},o7t=new Qfe,Ofe=class{constructor(){this.id="help";this.description="Get help on how to use Copilot chat";this.shortDescription="Help";this.scopes=["chat-panel"]}static{s(this,"HelpPromptTemplate")}response(e){let n=Ufe(e.ctx).filter(i=>i!=this),r=wp.default`
            You can ask me general programming questions, or use one of the following commands to get help with a specific task:

            ${n.map(i=>`- \`/${i.id}\` - ${i.description}`).join(`
`)}

            To have a great conversation, ask me questions as if I was a real programmer:
            
            - **Show me the code** you want to talk about by having the files open and selecting the most important lines.
            - On top of files, **I take different parts of your IDE into consideration** when answering questions. This includes, but is not limited to, test results and failures, build and runtime logs, active Git repository as well as details of the open project.
            - **Make refinements** by asking me follow-up questions, adding clarifications, providing errors, etc.
            - **Review my suggested code** and tell me about issues or improvements, so I can iterate on it.
        `;return new Jl(r)}},s7t=new Ofe;function i6(){return[e7t,t7t,n7t,r7t,i7t,o7t,s7t,...sHe()]}s(i6,"getPromptTemplates");function Ufe(t){let e=i6();return!TB(t)&&!tm(t)&&(e=e.filter(n=>!n.id.startsWith("debug."))),e}s(Ufe,"getUserFacingPromptTemplates");var Wfe=class{constructor(e,n){this.conversation=e;this.capabilities=n}static{s(this,"ConversationHolder")}},ki=class{constructor(e){this.ctx=e;this.conversations=new Kn(100)}static{s(this,"Conversations")}create({capabilities:e,source:n,userLanguage:r,conversationId:i}={}){let o=new UV([],n??"panel",r,i),a=e?.skills??[];return e?.allSkills&&(a=this.ctx.get(xl).getDescriptors().map(l=>l.id)),this.conversations.set(o.id,new Wfe(o,{skills:a})),o}destroy(e){this.conversations.delete(e)}async addTurn(e,n,r,i,o,a,l,c){let u=this.get(e);return n.request.references=r&&r.length>0?r:[],i&&(n.request.activeEditor=i),o&&(n.workspaceFolder=o),a&&a.length>0&&(n.workspaceFolders=a),l&&l.length>0&&(n.ignoredSkills=l.map(d=>({skillId:d}))),c&&(n.agent={agentSlug:c.agentSlug},n.confirmationResponse=c),await this.determineAndApplyAgent(u,n),await this.determineAndApplyTemplate(u,n),u.addTurn(n),n}async determineAndApplyAgent(e,n){if(e.source==="panel"&&Vn(n.request.message).trim().startsWith("@")){let[r,i]=this.extractKeywordAndQuestionFromRequest(Vn(n.request.message),"@");(await _A(this.ctx)).find(l=>l.slug===r)&&(n.request.message=i,n.request.type="user",n.agent={agentSlug:r})}}async determineAndApplyTemplate(e,n){if(Vn(n.request.message).trim().startsWith("/")){let[r,i]=this.extractKeywordAndQuestionFromRequest(Vn(n.request.message),"/"),o=i6().find(a=>a.id===r);if(o){n.request.message=i,n.request.type="user",await this.determineAndApplyAgent(e,n);let a=o.instructions?o.instructions(this.ctx,n.request.message,e.source):i;n.template={templateId:r,userQuestion:n.request.message},n.request.message=a,n.request.type="template"}}}extractKeywordAndQuestionFromRequest(e,n){let[r,...i]=e.trim().split(" "),o=i.join(" ");return[r.replace(n,""),o]}deleteTurn(e,n){this.get(e).deleteTurn(n)}get(e){return this.getHolder(e).conversation}getCapabilities(e){return this.getHolder(e).capabilities}getSupportedSkills(e){let n=this.ctx.get(xl).getDescriptors().filter(i=>i.type==="implicit").map(i=>i.id),r=this.getCapabilities(e).skills;return[...n,...r]}filterSupportedSkills(e,n){let r=this.getSupportedSkills(e);return n.filter(i=>r.includes(i))}getHolder(e){let n=this.conversations.get(e);if(!n)throw new Error(`Conversation with id ${e} does not exist`);return n}getAll(){let e=this.conversations.values();return Array.from(e).map(n=>n.conversation)}findByTurnId(e){for(let n of this.getAll()){let r=n.findTurn(e);if(r)return{conversation:n,turn:r}}}};f();function SHe(t){return typeof t>"u"||t===null}s(SHe,"isNothing");function a7t(t){return typeof t=="object"&&t!==null}s(a7t,"isObject");function l7t(t){return Array.isArray(t)?t:SHe(t)?[]:[t]}s(l7t,"toArray");function c7t(t,e){var n,r,i,o;if(e)for(o=Object.keys(e),n=0,r=o.length;n<r;n+=1)i=o[n],t[i]=e[i];return t}s(c7t,"extend");function u7t(t,e){var n="",r;for(r=0;r<e;r+=1)n+=t;return n}s(u7t,"repeat");function d7t(t){return t===0&&Number.NEGATIVE_INFINITY===1/t}s(d7t,"isNegativeZero");var f7t=SHe,p7t=a7t,m7t=l7t,h7t=u7t,g7t=d7t,A7t=c7t,vl={isNothing:f7t,isObject:p7t,toArray:m7t,repeat:h7t,isNegativeZero:g7t,extend:A7t};function RHe(t,e){var n="",r=t.reason||"(unknown reason)";return t.mark?(t.mark.name&&(n+='in "'+t.mark.name+'" '),n+="("+(t.mark.line+1)+":"+(t.mark.column+1)+")",!e&&t.mark.snippet&&(n+=`

`+t.mark.snippet),r+" "+n):r}s(RHe,"formatError");function s6(t,e){Error.call(this),this.name="YAMLException",this.reason=t,this.mark=e,this.message=RHe(this,!1),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}s(s6,"YAMLException$1");s6.prototype=Object.create(Error.prototype);s6.prototype.constructor=s6;s6.prototype.toString=s(function(e){return this.name+": "+RHe(this,e)},"toString");var qd=s6;function Hfe(t,e,n,r,i){var o="",a="",l=Math.floor(i/2)-1;return r-e>l&&(o=" ... ",e=r-l+o.length),n-r>l&&(a=" ...",n=r+l-a.length),{str:o+t.slice(e,n).replace(/\t/g,"\u2192")+a,pos:r-e+o.length}}s(Hfe,"getLine");function Gfe(t,e){return vl.repeat(" ",e-t.length)+t}s(Gfe,"padStart");function y7t(t,e){if(e=Object.create(e||null),!t.buffer)return null;e.maxLength||(e.maxLength=79),typeof e.indent!="number"&&(e.indent=1),typeof e.linesBefore!="number"&&(e.linesBefore=3),typeof e.linesAfter!="number"&&(e.linesAfter=2);for(var n=/\r?\n|\r|\0/g,r=[0],i=[],o,a=-1;o=n.exec(t.buffer);)i.push(o.index),r.push(o.index+o[0].length),t.position<=o.index&&a<0&&(a=r.length-2);a<0&&(a=r.length-1);var l="",c,u,d=Math.min(t.line+e.linesAfter,i.length).toString().length,p=e.maxLength-(e.indent+d+3);for(c=1;c<=e.linesBefore&&!(a-c<0);c++)u=Hfe(t.buffer,r[a-c],i[a-c],t.position-(r[a]-r[a-c]),p),l=vl.repeat(" ",e.indent)+Gfe((t.line-c+1).toString(),d)+" | "+u.str+`
`+l;for(u=Hfe(t.buffer,r[a],i[a],t.position,p),l+=vl.repeat(" ",e.indent)+Gfe((t.line+1).toString(),d)+" | "+u.str+`
`,l+=vl.repeat("-",e.indent+d+3+u.pos)+`^
`,c=1;c<=e.linesAfter&&!(a+c>=i.length);c++)u=Hfe(t.buffer,r[a+c],i[a+c],t.position-(r[a]-r[a+c]),p),l+=vl.repeat(" ",e.indent)+Gfe((t.line+c+1).toString(),d)+" | "+u.str+`
`;return l.replace(/\n$/,"")}s(y7t,"makeSnippet");var C7t=y7t,x7t=["kind","multi","resolve","construct","instanceOf","predicate","represent","representName","defaultStyle","styleAliases"],v7t=["scalar","sequence","mapping"];function b7t(t){var e={};return t!==null&&Object.keys(t).forEach(function(n){t[n].forEach(function(r){e[String(r)]=n})}),e}s(b7t,"compileStyleAliases");function E7t(t,e){if(e=e||{},Object.keys(e).forEach(function(n){if(x7t.indexOf(n)===-1)throw new qd('Unknown option "'+n+'" is met in definition of "'+t+'" YAML type.')}),this.options=e,this.tag=t,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(n){return n},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.representName=e.representName||null,this.defaultStyle=e.defaultStyle||null,this.multi=e.multi||!1,this.styleAliases=b7t(e.styleAliases||null),v7t.indexOf(this.kind)===-1)throw new qd('Unknown kind "'+this.kind+'" is specified for "'+t+'" YAML type.')}s(E7t,"Type$1");var cu=E7t;function pHe(t,e){var n=[];return t[e].forEach(function(r){var i=n.length;n.forEach(function(o,a){o.tag===r.tag&&o.kind===r.kind&&o.multi===r.multi&&(i=a)}),n[i]=r}),n}s(pHe,"compileList");function I7t(){var t={scalar:{},sequence:{},mapping:{},fallback:{},multi:{scalar:[],sequence:[],mapping:[],fallback:[]}},e,n;function r(i){i.multi?(t.multi[i.kind].push(i),t.multi.fallback.push(i)):t[i.kind][i.tag]=t.fallback[i.tag]=i}for(s(r,"collectType"),e=0,n=arguments.length;e<n;e+=1)arguments[e].forEach(r);return t}s(I7t,"compileMap");function Vfe(t){return this.extend(t)}s(Vfe,"Schema$1");Vfe.prototype.extend=s(function(e){var n=[],r=[];if(e instanceof cu)r.push(e);else if(Array.isArray(e))r=r.concat(e);else if(e&&(Array.isArray(e.implicit)||Array.isArray(e.explicit)))e.implicit&&(n=n.concat(e.implicit)),e.explicit&&(r=r.concat(e.explicit));else throw new qd("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");n.forEach(function(o){if(!(o instanceof cu))throw new qd("Specified list of YAML types (or a single Type object) contains a non-Type object.");if(o.loadKind&&o.loadKind!=="scalar")throw new qd("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");if(o.multi)throw new qd("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.")}),r.forEach(function(o){if(!(o instanceof cu))throw new qd("Specified list of YAML types (or a single Type object) contains a non-Type object.")});var i=Object.create(Vfe.prototype);return i.implicit=(this.implicit||[]).concat(n),i.explicit=(this.explicit||[]).concat(r),i.compiledImplicit=pHe(i,"implicit"),i.compiledExplicit=pHe(i,"explicit"),i.compiledTypeMap=I7t(i.compiledImplicit,i.compiledExplicit),i},"extend");var T7t=Vfe,w7t=new cu("tag:yaml.org,2002:str",{kind:"scalar",construct:s(function(t){return t!==null?t:""},"construct")}),_7t=new cu("tag:yaml.org,2002:seq",{kind:"sequence",construct:s(function(t){return t!==null?t:[]},"construct")}),S7t=new cu("tag:yaml.org,2002:map",{kind:"mapping",construct:s(function(t){return t!==null?t:{}},"construct")}),R7t=new T7t({explicit:[w7t,_7t,S7t]});function k7t(t){if(t===null)return!0;var e=t.length;return e===1&&t==="~"||e===4&&(t==="null"||t==="Null"||t==="NULL")}s(k7t,"resolveYamlNull");function B7t(){return null}s(B7t,"constructYamlNull");function P7t(t){return t===null}s(P7t,"isNull");var D7t=new cu("tag:yaml.org,2002:null",{kind:"scalar",resolve:k7t,construct:B7t,predicate:P7t,represent:{canonical:s(function(){return"~"},"canonical"),lowercase:s(function(){return"null"},"lowercase"),uppercase:s(function(){return"NULL"},"uppercase"),camelcase:s(function(){return"Null"},"camelcase"),empty:s(function(){return""},"empty")},defaultStyle:"lowercase"});function N7t(t){if(t===null)return!1;var e=t.length;return e===4&&(t==="true"||t==="True"||t==="TRUE")||e===5&&(t==="false"||t==="False"||t==="FALSE")}s(N7t,"resolveYamlBoolean");function L7t(t){return t==="true"||t==="True"||t==="TRUE"}s(L7t,"constructYamlBoolean");function F7t(t){return Object.prototype.toString.call(t)==="[object Boolean]"}s(F7t,"isBoolean");var M7t=new cu("tag:yaml.org,2002:bool",{kind:"scalar",resolve:N7t,construct:L7t,predicate:F7t,represent:{lowercase:s(function(t){return t?"true":"false"},"lowercase"),uppercase:s(function(t){return t?"TRUE":"FALSE"},"uppercase"),camelcase:s(function(t){return t?"True":"False"},"camelcase")},defaultStyle:"lowercase"});function Q7t(t){return 48<=t&&t<=57||65<=t&&t<=70||97<=t&&t<=102}s(Q7t,"isHexCode");function O7t(t){return 48<=t&&t<=55}s(O7t,"isOctCode");function U7t(t){return 48<=t&&t<=57}s(U7t,"isDecCode");function q7t(t){if(t===null)return!1;var e=t.length,n=0,r=!1,i;if(!e)return!1;if(i=t[n],(i==="-"||i==="+")&&(i=t[++n]),i==="0"){if(n+1===e)return!0;if(i=t[++n],i==="b"){for(n++;n<e;n++)if(i=t[n],i!=="_"){if(i!=="0"&&i!=="1")return!1;r=!0}return r&&i!=="_"}if(i==="x"){for(n++;n<e;n++)if(i=t[n],i!=="_"){if(!Q7t(t.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}if(i==="o"){for(n++;n<e;n++)if(i=t[n],i!=="_"){if(!O7t(t.charCodeAt(n)))return!1;r=!0}return r&&i!=="_"}}if(i==="_")return!1;for(;n<e;n++)if(i=t[n],i!=="_"){if(!U7t(t.charCodeAt(n)))return!1;r=!0}return!(!r||i==="_")}s(q7t,"resolveYamlInteger");function W7t(t){var e=t,n=1,r;if(e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),r=e[0],(r==="-"||r==="+")&&(r==="-"&&(n=-1),e=e.slice(1),r=e[0]),e==="0")return 0;if(r==="0"){if(e[1]==="b")return n*parseInt(e.slice(2),2);if(e[1]==="x")return n*parseInt(e.slice(2),16);if(e[1]==="o")return n*parseInt(e.slice(2),8)}return n*parseInt(e,10)}s(W7t,"constructYamlInteger");function H7t(t){return Object.prototype.toString.call(t)==="[object Number]"&&t%1===0&&!vl.isNegativeZero(t)}s(H7t,"isInteger");var G7t=new cu("tag:yaml.org,2002:int",{kind:"scalar",resolve:q7t,construct:W7t,predicate:H7t,represent:{binary:s(function(t){return t>=0?"0b"+t.toString(2):"-0b"+t.toString(2).slice(1)},"binary"),octal:s(function(t){return t>=0?"0o"+t.toString(8):"-0o"+t.toString(8).slice(1)},"octal"),decimal:s(function(t){return t.toString(10)},"decimal"),hexadecimal:s(function(t){return t>=0?"0x"+t.toString(16).toUpperCase():"-0x"+t.toString(16).toUpperCase().slice(1)},"hexadecimal")},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),j7t=new RegExp("^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function V7t(t){return!(t===null||!j7t.test(t)||t[t.length-1]==="_")}s(V7t,"resolveYamlFloat");function $7t(t){var e,n;return e=t.replace(/_/g,"").toLowerCase(),n=e[0]==="-"?-1:1,"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?n===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:n*parseFloat(e,10)}s($7t,"constructYamlFloat");var z7t=/^[-+]?[0-9]+e/;function Y7t(t,e){var n;if(isNaN(t))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===t)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===t)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(vl.isNegativeZero(t))return"-0.0";return n=t.toString(10),z7t.test(n)?n.replace("e",".e"):n}s(Y7t,"representYamlFloat");function K7t(t){return Object.prototype.toString.call(t)==="[object Number]"&&(t%1!==0||vl.isNegativeZero(t))}s(K7t,"isFloat");var J7t=new cu("tag:yaml.org,2002:float",{kind:"scalar",resolve:V7t,construct:$7t,predicate:K7t,represent:Y7t,defaultStyle:"lowercase"}),X7t=R7t.extend({implicit:[D7t,M7t,G7t,J7t]}),Z7t=X7t,kHe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),BHe=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function eLt(t){return t===null?!1:kHe.exec(t)!==null||BHe.exec(t)!==null}s(eLt,"resolveYamlTimestamp");function tLt(t){var e,n,r,i,o,a,l,c=0,u=null,d,p,m;if(e=kHe.exec(t),e===null&&(e=BHe.exec(t)),e===null)throw new Error("Date resolve error");if(n=+e[1],r=+e[2]-1,i=+e[3],!e[4])return new Date(Date.UTC(n,r,i));if(o=+e[4],a=+e[5],l=+e[6],e[7]){for(c=e[7].slice(0,3);c.length<3;)c+="0";c=+c}return e[9]&&(d=+e[10],p=+(e[11]||0),u=(d*60+p)*6e4,e[9]==="-"&&(u=-u)),m=new Date(Date.UTC(n,r,i,o,a,l,c)),u&&m.setTime(m.getTime()-u),m}s(tLt,"constructYamlTimestamp");function nLt(t){return t.toISOString()}s(nLt,"representYamlTimestamp");var rLt=new cu("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:eLt,construct:tLt,instanceOf:Date,represent:nLt});function iLt(t){return t==="<<"||t===null}s(iLt,"resolveYamlMerge");var oLt=new cu("tag:yaml.org,2002:merge",{kind:"scalar",resolve:iLt}),Jfe=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function sLt(t){if(t===null)return!1;var e,n,r=0,i=t.length,o=Jfe;for(n=0;n<i;n++)if(e=o.indexOf(t.charAt(n)),!(e>64)){if(e<0)return!1;r+=6}return r%8===0}s(sLt,"resolveYamlBinary");function aLt(t){var e,n,r=t.replace(/[\r\n=]/g,""),i=r.length,o=Jfe,a=0,l=[];for(e=0;e<i;e++)e%4===0&&e&&(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)),a=a<<6|o.indexOf(r.charAt(e));return n=i%4*6,n===0?(l.push(a>>16&255),l.push(a>>8&255),l.push(a&255)):n===18?(l.push(a>>10&255),l.push(a>>2&255)):n===12&&l.push(a>>4&255),new Uint8Array(l)}s(aLt,"constructYamlBinary");function lLt(t){var e="",n=0,r,i,o=t.length,a=Jfe;for(r=0;r<o;r++)r%3===0&&r&&(e+=a[n>>18&63],e+=a[n>>12&63],e+=a[n>>6&63],e+=a[n&63]),n=(n<<8)+t[r];return i=o%3,i===0?(e+=a[n>>18&63],e+=a[n>>12&63],e+=a[n>>6&63],e+=a[n&63]):i===2?(e+=a[n>>10&63],e+=a[n>>4&63],e+=a[n<<2&63],e+=a[64]):i===1&&(e+=a[n>>2&63],e+=a[n<<4&63],e+=a[64],e+=a[64]),e}s(lLt,"representYamlBinary");function cLt(t){return Object.prototype.toString.call(t)==="[object Uint8Array]"}s(cLt,"isBinary");var uLt=new cu("tag:yaml.org,2002:binary",{kind:"scalar",resolve:sLt,construct:aLt,predicate:cLt,represent:lLt}),dLt=Object.prototype.hasOwnProperty,fLt=Object.prototype.toString;function pLt(t){if(t===null)return!0;var e=[],n,r,i,o,a,l=t;for(n=0,r=l.length;n<r;n+=1){if(i=l[n],a=!1,fLt.call(i)!=="[object Object]")return!1;for(o in i)if(dLt.call(i,o))if(!a)a=!0;else return!1;if(!a)return!1;if(e.indexOf(o)===-1)e.push(o);else return!1}return!0}s(pLt,"resolveYamlOmap");function mLt(t){return t!==null?t:[]}s(mLt,"constructYamlOmap");var hLt=new cu("tag:yaml.org,2002:omap",{kind:"sequence",resolve:pLt,construct:mLt}),gLt=Object.prototype.toString;function ALt(t){if(t===null)return!0;var e,n,r,i,o,a=t;for(o=new Array(a.length),e=0,n=a.length;e<n;e+=1){if(r=a[e],gLt.call(r)!=="[object Object]"||(i=Object.keys(r),i.length!==1))return!1;o[e]=[i[0],r[i[0]]]}return!0}s(ALt,"resolveYamlPairs");function yLt(t){if(t===null)return[];var e,n,r,i,o,a=t;for(o=new Array(a.length),e=0,n=a.length;e<n;e+=1)r=a[e],i=Object.keys(r),o[e]=[i[0],r[i[0]]];return o}s(yLt,"constructYamlPairs");var CLt=new cu("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:ALt,construct:yLt}),xLt=Object.prototype.hasOwnProperty;function vLt(t){if(t===null)return!0;var e,n=t;for(e in n)if(xLt.call(n,e)&&n[e]!==null)return!1;return!0}s(vLt,"resolveYamlSet");function bLt(t){return t!==null?t:{}}s(bLt,"constructYamlSet");var ELt=new cu("tag:yaml.org,2002:set",{kind:"mapping",resolve:vLt,construct:bLt}),PHe=Z7t.extend({implicit:[rLt,oLt],explicit:[uLt,hLt,CLt,ELt]}),Fb=Object.prototype.hasOwnProperty,t$=1,DHe=2,NHe=3,n$=4,jfe=1,ILt=2,mHe=3,TLt=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,wLt=/[\x85\u2028\u2029]/,_Lt=/[,\[\]\{\}]/,LHe=/^(?:!|!!|![a-z\-]+!)$/i,FHe=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function hHe(t){return Object.prototype.toString.call(t)}s(hHe,"_class");function SA(t){return t===10||t===13}s(SA,"is_EOL");function BT(t){return t===9||t===32}s(BT,"is_WHITE_SPACE");function Wd(t){return t===9||t===32||t===10||t===13}s(Wd,"is_WS_OR_EOL");function $R(t){return t===44||t===91||t===93||t===123||t===125}s($R,"is_FLOW_INDICATOR");function SLt(t){var e;return 48<=t&&t<=57?t-48:(e=t|32,97<=e&&e<=102?e-97+10:-1)}s(SLt,"fromHexCode");function RLt(t){return t===120?2:t===117?4:t===85?8:0}s(RLt,"escapedHexLen");function kLt(t){return 48<=t&&t<=57?t-48:-1}s(kLt,"fromDecimalCode");function gHe(t){return t===48?"\0":t===97?"\x07":t===98?"\b":t===116||t===9?"	":t===110?`
`:t===118?"\v":t===102?"\f":t===114?"\r":t===101?"\x1B":t===32?" ":t===34?'"':t===47?"/":t===92?"\\":t===78?"\x85":t===95?"\xA0":t===76?"\u2028":t===80?"\u2029":""}s(gHe,"simpleEscapeSequence");function BLt(t){return t<=65535?String.fromCharCode(t):String.fromCharCode((t-65536>>10)+55296,(t-65536&1023)+56320)}s(BLt,"charFromCodepoint");var MHe=new Array(256),QHe=new Array(256);for(kT=0;kT<256;kT++)MHe[kT]=gHe(kT)?1:0,QHe[kT]=gHe(kT);var kT;function PLt(t,e){this.input=t,this.filename=e.filename||null,this.schema=e.schema||PHe,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=t.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.firstTabInLine=-1,this.documents=[]}s(PLt,"State$1");function OHe(t,e){var n={name:t.filename,buffer:t.input.slice(0,-1),position:t.position,line:t.line,column:t.position-t.lineStart};return n.snippet=C7t(n),new qd(e,n)}s(OHe,"generateError");function $n(t,e){throw OHe(t,e)}s($n,"throwError");function r$(t,e){t.onWarning&&t.onWarning.call(null,OHe(t,e))}s(r$,"throwWarning");var AHe={YAML:s(function(e,n,r){var i,o,a;e.version!==null&&$n(e,"duplication of %YAML directive"),r.length!==1&&$n(e,"YAML directive accepts exactly one argument"),i=/^([0-9]+)\.([0-9]+)$/.exec(r[0]),i===null&&$n(e,"ill-formed argument of the YAML directive"),o=parseInt(i[1],10),a=parseInt(i[2],10),o!==1&&$n(e,"unacceptable YAML version of the document"),e.version=r[0],e.checkLineBreaks=a<2,a!==1&&a!==2&&r$(e,"unsupported YAML version of the document")},"handleYamlDirective"),TAG:s(function(e,n,r){var i,o;r.length!==2&&$n(e,"TAG directive accepts exactly two arguments"),i=r[0],o=r[1],LHe.test(i)||$n(e,"ill-formed tag handle (first argument) of the TAG directive"),Fb.call(e.tagMap,i)&&$n(e,'there is a previously declared suffix for "'+i+'" tag handle'),FHe.test(o)||$n(e,"ill-formed tag prefix (second argument) of the TAG directive");try{o=decodeURIComponent(o)}catch{$n(e,"tag prefix is malformed: "+o)}e.tagMap[i]=o},"handleTagDirective")};function Lb(t,e,n,r){var i,o,a,l;if(e<n){if(l=t.input.slice(e,n),r)for(i=0,o=l.length;i<o;i+=1)a=l.charCodeAt(i),a===9||32<=a&&a<=1114111||$n(t,"expected valid JSON character");else TLt.test(l)&&$n(t,"the stream contains non-printable characters");t.result+=l}}s(Lb,"captureSegment");function yHe(t,e,n,r){var i,o,a,l;for(vl.isObject(n)||$n(t,"cannot merge mappings; the provided source object is unacceptable"),i=Object.keys(n),a=0,l=i.length;a<l;a+=1)o=i[a],Fb.call(e,o)||(e[o]=n[o],r[o]=!0)}s(yHe,"mergeMappings");function zR(t,e,n,r,i,o,a,l,c){var u,d;if(Array.isArray(i))for(i=Array.prototype.slice.call(i),u=0,d=i.length;u<d;u+=1)Array.isArray(i[u])&&$n(t,"nested arrays are not supported inside keys"),typeof i=="object"&&hHe(i[u])==="[object Object]"&&(i[u]="[object Object]");if(typeof i=="object"&&hHe(i)==="[object Object]"&&(i="[object Object]"),i=String(i),e===null&&(e={}),r==="tag:yaml.org,2002:merge")if(Array.isArray(o))for(u=0,d=o.length;u<d;u+=1)yHe(t,e,o[u],n);else yHe(t,e,o,n);else!t.json&&!Fb.call(n,i)&&Fb.call(e,i)&&(t.line=a||t.line,t.lineStart=l||t.lineStart,t.position=c||t.position,$n(t,"duplicated mapping key")),i==="__proto__"?Object.defineProperty(e,i,{configurable:!0,enumerable:!0,writable:!0,value:o}):e[i]=o,delete n[i];return e}s(zR,"storeMappingPair");function Xfe(t){var e;e=t.input.charCodeAt(t.position),e===10?t.position++:e===13?(t.position++,t.input.charCodeAt(t.position)===10&&t.position++):$n(t,"a line break is expected"),t.line+=1,t.lineStart=t.position,t.firstTabInLine=-1}s(Xfe,"readLineBreak");function al(t,e,n){for(var r=0,i=t.input.charCodeAt(t.position);i!==0;){for(;BT(i);)i===9&&t.firstTabInLine===-1&&(t.firstTabInLine=t.position),i=t.input.charCodeAt(++t.position);if(e&&i===35)do i=t.input.charCodeAt(++t.position);while(i!==10&&i!==13&&i!==0);if(SA(i))for(Xfe(t),i=t.input.charCodeAt(t.position),r++,t.lineIndent=0;i===32;)t.lineIndent++,i=t.input.charCodeAt(++t.position);else break}return n!==-1&&r!==0&&t.lineIndent<n&&r$(t,"deficient indentation"),r}s(al,"skipSeparationSpace");function s$(t){var e=t.position,n;return n=t.input.charCodeAt(e),!!((n===45||n===46)&&n===t.input.charCodeAt(e+1)&&n===t.input.charCodeAt(e+2)&&(e+=3,n=t.input.charCodeAt(e),n===0||Wd(n)))}s(s$,"testDocumentSeparator");function Zfe(t,e){e===1?t.result+=" ":e>1&&(t.result+=vl.repeat(`
`,e-1))}s(Zfe,"writeFoldedLines");function DLt(t,e,n){var r,i,o,a,l,c,u,d,p=t.kind,m=t.result,h;if(h=t.input.charCodeAt(t.position),Wd(h)||$R(h)||h===35||h===38||h===42||h===33||h===124||h===62||h===39||h===34||h===37||h===64||h===96||(h===63||h===45)&&(i=t.input.charCodeAt(t.position+1),Wd(i)||n&&$R(i)))return!1;for(t.kind="scalar",t.result="",o=a=t.position,l=!1;h!==0;){if(h===58){if(i=t.input.charCodeAt(t.position+1),Wd(i)||n&&$R(i))break}else if(h===35){if(r=t.input.charCodeAt(t.position-1),Wd(r))break}else{if(t.position===t.lineStart&&s$(t)||n&&$R(h))break;if(SA(h))if(c=t.line,u=t.lineStart,d=t.lineIndent,al(t,!1,-1),t.lineIndent>=e){l=!0,h=t.input.charCodeAt(t.position);continue}else{t.position=a,t.line=c,t.lineStart=u,t.lineIndent=d;break}}l&&(Lb(t,o,a,!1),Zfe(t,t.line-c),o=a=t.position,l=!1),BT(h)||(a=t.position+1),h=t.input.charCodeAt(++t.position)}return Lb(t,o,a,!1),t.result?!0:(t.kind=p,t.result=m,!1)}s(DLt,"readPlainScalar");function NLt(t,e){var n,r,i;if(n=t.input.charCodeAt(t.position),n!==39)return!1;for(t.kind="scalar",t.result="",t.position++,r=i=t.position;(n=t.input.charCodeAt(t.position))!==0;)if(n===39)if(Lb(t,r,t.position,!0),n=t.input.charCodeAt(++t.position),n===39)r=t.position,t.position++,i=t.position;else return!0;else SA(n)?(Lb(t,r,i,!0),Zfe(t,al(t,!1,e)),r=i=t.position):t.position===t.lineStart&&s$(t)?$n(t,"unexpected end of the document within a single quoted scalar"):(t.position++,i=t.position);$n(t,"unexpected end of the stream within a single quoted scalar")}s(NLt,"readSingleQuotedScalar");function LLt(t,e){var n,r,i,o,a,l;if(l=t.input.charCodeAt(t.position),l!==34)return!1;for(t.kind="scalar",t.result="",t.position++,n=r=t.position;(l=t.input.charCodeAt(t.position))!==0;){if(l===34)return Lb(t,n,t.position,!0),t.position++,!0;if(l===92){if(Lb(t,n,t.position,!0),l=t.input.charCodeAt(++t.position),SA(l))al(t,!1,e);else if(l<256&&MHe[l])t.result+=QHe[l],t.position++;else if((a=RLt(l))>0){for(i=a,o=0;i>0;i--)l=t.input.charCodeAt(++t.position),(a=SLt(l))>=0?o=(o<<4)+a:$n(t,"expected hexadecimal character");t.result+=BLt(o),t.position++}else $n(t,"unknown escape sequence");n=r=t.position}else SA(l)?(Lb(t,n,r,!0),Zfe(t,al(t,!1,e)),n=r=t.position):t.position===t.lineStart&&s$(t)?$n(t,"unexpected end of the document within a double quoted scalar"):(t.position++,r=t.position)}$n(t,"unexpected end of the stream within a double quoted scalar")}s(LLt,"readDoubleQuotedScalar");function FLt(t,e){var n=!0,r,i,o,a=t.tag,l,c=t.anchor,u,d,p,m,h,g=Object.create(null),y,v,b,E;if(E=t.input.charCodeAt(t.position),E===91)d=93,h=!1,l=[];else if(E===123)d=125,h=!0,l={};else return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=l),E=t.input.charCodeAt(++t.position);E!==0;){if(al(t,!0,e),E=t.input.charCodeAt(t.position),E===d)return t.position++,t.tag=a,t.anchor=c,t.kind=h?"mapping":"sequence",t.result=l,!0;n?E===44&&$n(t,"expected the node content, but found ','"):$n(t,"missed comma between flow collection entries"),v=y=b=null,p=m=!1,E===63&&(u=t.input.charCodeAt(t.position+1),Wd(u)&&(p=m=!0,t.position++,al(t,!0,e))),r=t.line,i=t.lineStart,o=t.position,YR(t,e,t$,!1,!0),v=t.tag,y=t.result,al(t,!0,e),E=t.input.charCodeAt(t.position),(m||t.line===r)&&E===58&&(p=!0,E=t.input.charCodeAt(++t.position),al(t,!0,e),YR(t,e,t$,!1,!0),b=t.result),h?zR(t,l,g,v,y,b,r,i,o):p?l.push(zR(t,null,g,v,y,b,r,i,o)):l.push(y),al(t,!0,e),E=t.input.charCodeAt(t.position),E===44?(n=!0,E=t.input.charCodeAt(++t.position)):n=!1}$n(t,"unexpected end of the stream within a flow collection")}s(FLt,"readFlowCollection");function MLt(t,e){var n,r,i=jfe,o=!1,a=!1,l=e,c=0,u=!1,d,p;if(p=t.input.charCodeAt(t.position),p===124)r=!1;else if(p===62)r=!0;else return!1;for(t.kind="scalar",t.result="";p!==0;)if(p=t.input.charCodeAt(++t.position),p===43||p===45)jfe===i?i=p===43?mHe:ILt:$n(t,"repeat of a chomping mode identifier");else if((d=kLt(p))>=0)d===0?$n(t,"bad explicit indentation width of a block scalar; it cannot be less than one"):a?$n(t,"repeat of an indentation width identifier"):(l=e+d-1,a=!0);else break;if(BT(p)){do p=t.input.charCodeAt(++t.position);while(BT(p));if(p===35)do p=t.input.charCodeAt(++t.position);while(!SA(p)&&p!==0)}for(;p!==0;){for(Xfe(t),t.lineIndent=0,p=t.input.charCodeAt(t.position);(!a||t.lineIndent<l)&&p===32;)t.lineIndent++,p=t.input.charCodeAt(++t.position);if(!a&&t.lineIndent>l&&(l=t.lineIndent),SA(p)){c++;continue}if(t.lineIndent<l){i===mHe?t.result+=vl.repeat(`
`,o?1+c:c):i===jfe&&o&&(t.result+=`
`);break}for(r?BT(p)?(u=!0,t.result+=vl.repeat(`
`,o?1+c:c)):u?(u=!1,t.result+=vl.repeat(`
`,c+1)):c===0?o&&(t.result+=" "):t.result+=vl.repeat(`
`,c):t.result+=vl.repeat(`
`,o?1+c:c),o=!0,a=!0,c=0,n=t.position;!SA(p)&&p!==0;)p=t.input.charCodeAt(++t.position);Lb(t,n,t.position,!1)}return!0}s(MLt,"readBlockScalar");function CHe(t,e){var n,r=t.tag,i=t.anchor,o=[],a,l=!1,c;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=o),c=t.input.charCodeAt(t.position);c!==0&&(t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,$n(t,"tab characters must not be used in indentation")),!(c!==45||(a=t.input.charCodeAt(t.position+1),!Wd(a))));){if(l=!0,t.position++,al(t,!0,-1)&&t.lineIndent<=e){o.push(null),c=t.input.charCodeAt(t.position);continue}if(n=t.line,YR(t,e,NHe,!1,!0),o.push(t.result),al(t,!0,-1),c=t.input.charCodeAt(t.position),(t.line===n||t.lineIndent>e)&&c!==0)$n(t,"bad indentation of a sequence entry");else if(t.lineIndent<e)break}return l?(t.tag=r,t.anchor=i,t.kind="sequence",t.result=o,!0):!1}s(CHe,"readBlockSequence");function QLt(t,e,n){var r,i,o,a,l,c,u=t.tag,d=t.anchor,p={},m=Object.create(null),h=null,g=null,y=null,v=!1,b=!1,E;if(t.firstTabInLine!==-1)return!1;for(t.anchor!==null&&(t.anchorMap[t.anchor]=p),E=t.input.charCodeAt(t.position);E!==0;){if(!v&&t.firstTabInLine!==-1&&(t.position=t.firstTabInLine,$n(t,"tab characters must not be used in indentation")),r=t.input.charCodeAt(t.position+1),o=t.line,(E===63||E===58)&&Wd(r))E===63?(v&&(zR(t,p,m,h,g,null,a,l,c),h=g=y=null),b=!0,v=!0,i=!0):v?(v=!1,i=!0):$n(t,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),t.position+=1,E=r;else{if(a=t.line,l=t.lineStart,c=t.position,!YR(t,n,DHe,!1,!0))break;if(t.line===o){for(E=t.input.charCodeAt(t.position);BT(E);)E=t.input.charCodeAt(++t.position);if(E===58)E=t.input.charCodeAt(++t.position),Wd(E)||$n(t,"a whitespace character is expected after the key-value separator within a block mapping"),v&&(zR(t,p,m,h,g,null,a,l,c),h=g=y=null),b=!0,v=!1,i=!1,h=t.tag,g=t.result;else if(b)$n(t,"can not read an implicit mapping pair; a colon is missed");else return t.tag=u,t.anchor=d,!0}else if(b)$n(t,"can not read a block mapping entry; a multiline key may not be an implicit key");else return t.tag=u,t.anchor=d,!0}if((t.line===o||t.lineIndent>e)&&(v&&(a=t.line,l=t.lineStart,c=t.position),YR(t,e,n$,!0,i)&&(v?g=t.result:y=t.result),v||(zR(t,p,m,h,g,y,a,l,c),h=g=y=null),al(t,!0,-1),E=t.input.charCodeAt(t.position)),(t.line===o||t.lineIndent>e)&&E!==0)$n(t,"bad indentation of a mapping entry");else if(t.lineIndent<e)break}return v&&zR(t,p,m,h,g,null,a,l,c),b&&(t.tag=u,t.anchor=d,t.kind="mapping",t.result=p),b}s(QLt,"readBlockMapping");function OLt(t){var e,n=!1,r=!1,i,o,a;if(a=t.input.charCodeAt(t.position),a!==33)return!1;if(t.tag!==null&&$n(t,"duplication of a tag property"),a=t.input.charCodeAt(++t.position),a===60?(n=!0,a=t.input.charCodeAt(++t.position)):a===33?(r=!0,i="!!",a=t.input.charCodeAt(++t.position)):i="!",e=t.position,n){do a=t.input.charCodeAt(++t.position);while(a!==0&&a!==62);t.position<t.length?(o=t.input.slice(e,t.position),a=t.input.charCodeAt(++t.position)):$n(t,"unexpected end of the stream within a verbatim tag")}else{for(;a!==0&&!Wd(a);)a===33&&(r?$n(t,"tag suffix cannot contain exclamation marks"):(i=t.input.slice(e-1,t.position+1),LHe.test(i)||$n(t,"named tag handle cannot contain such characters"),r=!0,e=t.position+1)),a=t.input.charCodeAt(++t.position);o=t.input.slice(e,t.position),_Lt.test(o)&&$n(t,"tag suffix cannot contain flow indicator characters")}o&&!FHe.test(o)&&$n(t,"tag name cannot contain such characters: "+o);try{o=decodeURIComponent(o)}catch{$n(t,"tag name is malformed: "+o)}return n?t.tag=o:Fb.call(t.tagMap,i)?t.tag=t.tagMap[i]+o:i==="!"?t.tag="!"+o:i==="!!"?t.tag="tag:yaml.org,2002:"+o:$n(t,'undeclared tag handle "'+i+'"'),!0}s(OLt,"readTagProperty");function ULt(t){var e,n;if(n=t.input.charCodeAt(t.position),n!==38)return!1;for(t.anchor!==null&&$n(t,"duplication of an anchor property"),n=t.input.charCodeAt(++t.position),e=t.position;n!==0&&!Wd(n)&&!$R(n);)n=t.input.charCodeAt(++t.position);return t.position===e&&$n(t,"name of an anchor node must contain at least one character"),t.anchor=t.input.slice(e,t.position),!0}s(ULt,"readAnchorProperty");function qLt(t){var e,n,r;if(r=t.input.charCodeAt(t.position),r!==42)return!1;for(r=t.input.charCodeAt(++t.position),e=t.position;r!==0&&!Wd(r)&&!$R(r);)r=t.input.charCodeAt(++t.position);return t.position===e&&$n(t,"name of an alias node must contain at least one character"),n=t.input.slice(e,t.position),Fb.call(t.anchorMap,n)||$n(t,'unidentified alias "'+n+'"'),t.result=t.anchorMap[n],al(t,!0,-1),!0}s(qLt,"readAlias");function YR(t,e,n,r,i){var o,a,l,c=1,u=!1,d=!1,p,m,h,g,y,v;if(t.listener!==null&&t.listener("open",t),t.tag=null,t.anchor=null,t.kind=null,t.result=null,o=a=l=n$===n||NHe===n,r&&al(t,!0,-1)&&(u=!0,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)),c===1)for(;OLt(t)||ULt(t);)al(t,!0,-1)?(u=!0,l=o,t.lineIndent>e?c=1:t.lineIndent===e?c=0:t.lineIndent<e&&(c=-1)):l=!1;if(l&&(l=u||i),(c===1||n$===n)&&(t$===n||DHe===n?y=e:y=e+1,v=t.position-t.lineStart,c===1?l&&(CHe(t,v)||QLt(t,v,y))||FLt(t,y)?d=!0:(a&&MLt(t,y)||NLt(t,y)||LLt(t,y)?d=!0:qLt(t)?(d=!0,(t.tag!==null||t.anchor!==null)&&$n(t,"alias node should not have any properties")):DLt(t,y,t$===n)&&(d=!0,t.tag===null&&(t.tag="?")),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):c===0&&(d=l&&CHe(t,v))),t.tag===null)t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);else if(t.tag==="?"){for(t.result!==null&&t.kind!=="scalar"&&$n(t,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+t.kind+'"'),p=0,m=t.implicitTypes.length;p<m;p+=1)if(g=t.implicitTypes[p],g.resolve(t.result)){t.result=g.construct(t.result),t.tag=g.tag,t.anchor!==null&&(t.anchorMap[t.anchor]=t.result);break}}else if(t.tag!=="!"){if(Fb.call(t.typeMap[t.kind||"fallback"],t.tag))g=t.typeMap[t.kind||"fallback"][t.tag];else for(g=null,h=t.typeMap.multi[t.kind||"fallback"],p=0,m=h.length;p<m;p+=1)if(t.tag.slice(0,h[p].tag.length)===h[p].tag){g=h[p];break}g||$n(t,"unknown tag !<"+t.tag+">"),t.result!==null&&g.kind!==t.kind&&$n(t,"unacceptable node kind for !<"+t.tag+'> tag; it should be "'+g.kind+'", not "'+t.kind+'"'),g.resolve(t.result,t.tag)?(t.result=g.construct(t.result,t.tag),t.anchor!==null&&(t.anchorMap[t.anchor]=t.result)):$n(t,"cannot resolve a node with !<"+t.tag+"> explicit tag")}return t.listener!==null&&t.listener("close",t),t.tag!==null||t.anchor!==null||d}s(YR,"composeNode");function WLt(t){var e=t.position,n,r,i,o=!1,a;for(t.version=null,t.checkLineBreaks=t.legacy,t.tagMap=Object.create(null),t.anchorMap=Object.create(null);(a=t.input.charCodeAt(t.position))!==0&&(al(t,!0,-1),a=t.input.charCodeAt(t.position),!(t.lineIndent>0||a!==37));){for(o=!0,a=t.input.charCodeAt(++t.position),n=t.position;a!==0&&!Wd(a);)a=t.input.charCodeAt(++t.position);for(r=t.input.slice(n,t.position),i=[],r.length<1&&$n(t,"directive name must not be less than one character in length");a!==0;){for(;BT(a);)a=t.input.charCodeAt(++t.position);if(a===35){do a=t.input.charCodeAt(++t.position);while(a!==0&&!SA(a));break}if(SA(a))break;for(n=t.position;a!==0&&!Wd(a);)a=t.input.charCodeAt(++t.position);i.push(t.input.slice(n,t.position))}a!==0&&Xfe(t),Fb.call(AHe,r)?AHe[r](t,r,i):r$(t,'unknown document directive "'+r+'"')}if(al(t,!0,-1),t.lineIndent===0&&t.input.charCodeAt(t.position)===45&&t.input.charCodeAt(t.position+1)===45&&t.input.charCodeAt(t.position+2)===45?(t.position+=3,al(t,!0,-1)):o&&$n(t,"directives end mark is expected"),YR(t,t.lineIndent-1,n$,!1,!0),al(t,!0,-1),t.checkLineBreaks&&wLt.test(t.input.slice(e,t.position))&&r$(t,"non-ASCII line breaks are interpreted as content"),t.documents.push(t.result),t.position===t.lineStart&&s$(t)){t.input.charCodeAt(t.position)===46&&(t.position+=3,al(t,!0,-1));return}if(t.position<t.length-1)$n(t,"end of the stream or a document separator is expected");else return}s(WLt,"readDocument");function UHe(t,e){t=String(t),e=e||{},t.length!==0&&(t.charCodeAt(t.length-1)!==10&&t.charCodeAt(t.length-1)!==13&&(t+=`
`),t.charCodeAt(0)===65279&&(t=t.slice(1)));var n=new PLt(t,e),r=t.indexOf("\0");for(r!==-1&&(n.position=r,$n(n,"null byte is not allowed in input")),n.input+="\0";n.input.charCodeAt(n.position)===32;)n.lineIndent+=1,n.position+=1;for(;n.position<n.length-1;)WLt(n);return n.documents}s(UHe,"loadDocuments");function HLt(t,e,n){e!==null&&typeof e=="object"&&typeof n>"u"&&(n=e,e=null);var r=UHe(t,n);if(typeof e!="function")return r;for(var i=0,o=r.length;i<o;i+=1)e(r[i])}s(HLt,"loadAll$1");function GLt(t,e){var n=UHe(t,e);if(n.length!==0){if(n.length===1)return n[0];throw new qd("expected a single document in the stream, but found more")}}s(GLt,"load$1");var jLt=HLt,VLt=GLt,qHe={loadAll:jLt,load:VLt},WHe=Object.prototype.toString,HHe=Object.prototype.hasOwnProperty,epe=65279,$Lt=9,a6=10,zLt=13,YLt=32,KLt=33,JLt=34,$fe=35,XLt=37,ZLt=38,eFt=39,tFt=42,GHe=44,nFt=45,i$=58,rFt=61,iFt=62,oFt=63,sFt=64,jHe=91,VHe=93,aFt=96,$He=123,lFt=124,zHe=125,uu={};uu[0]="\\0";uu[7]="\\a";uu[8]="\\b";uu[9]="\\t";uu[10]="\\n";uu[11]="\\v";uu[12]="\\f";uu[13]="\\r";uu[27]="\\e";uu[34]='\\"';uu[92]="\\\\";uu[133]="\\N";uu[160]="\\_";uu[8232]="\\L";uu[8233]="\\P";var cFt=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"],uFt=/^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;function dFt(t,e){var n,r,i,o,a,l,c;if(e===null)return{};for(n={},r=Object.keys(e),i=0,o=r.length;i<o;i+=1)a=r[i],l=String(e[a]),a.slice(0,2)==="!!"&&(a="tag:yaml.org,2002:"+a.slice(2)),c=t.compiledTypeMap.fallback[a],c&&HHe.call(c.styleAliases,l)&&(l=c.styleAliases[l]),n[a]=l;return n}s(dFt,"compileStyleMap");function fFt(t){var e,n,r;if(e=t.toString(16).toUpperCase(),t<=255)n="x",r=2;else if(t<=65535)n="u",r=4;else if(t<=4294967295)n="U",r=8;else throw new qd("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+n+vl.repeat("0",r-e.length)+e}s(fFt,"encodeHex");var pFt=1,l6=2;function mFt(t){this.schema=t.schema||PHe,this.indent=Math.max(1,t.indent||2),this.noArrayIndent=t.noArrayIndent||!1,this.skipInvalid=t.skipInvalid||!1,this.flowLevel=vl.isNothing(t.flowLevel)?-1:t.flowLevel,this.styleMap=dFt(this.schema,t.styles||null),this.sortKeys=t.sortKeys||!1,this.lineWidth=t.lineWidth||80,this.noRefs=t.noRefs||!1,this.noCompatMode=t.noCompatMode||!1,this.condenseFlow=t.condenseFlow||!1,this.quotingType=t.quotingType==='"'?l6:pFt,this.forceQuotes=t.forceQuotes||!1,this.replacer=typeof t.replacer=="function"?t.replacer:null,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}s(mFt,"State");function xHe(t,e){for(var n=vl.repeat(" ",e),r=0,i=-1,o="",a,l=t.length;r<l;)i=t.indexOf(`
`,r),i===-1?(a=t.slice(r),r=l):(a=t.slice(r,i+1),r=i+1),a.length&&a!==`
`&&(o+=n),o+=a;return o}s(xHe,"indentString");function zfe(t,e){return`
`+vl.repeat(" ",t.indent*e)}s(zfe,"generateNextLine");function hFt(t,e){var n,r,i;for(n=0,r=t.implicitTypes.length;n<r;n+=1)if(i=t.implicitTypes[n],i.resolve(e))return!0;return!1}s(hFt,"testImplicitResolving");function o$(t){return t===YLt||t===$Lt}s(o$,"isWhitespace");function c6(t){return 32<=t&&t<=126||161<=t&&t<=55295&&t!==8232&&t!==8233||57344<=t&&t<=65533&&t!==epe||65536<=t&&t<=1114111}s(c6,"isPrintable");function vHe(t){return c6(t)&&t!==epe&&t!==zLt&&t!==a6}s(vHe,"isNsCharOrWhitespace");function bHe(t,e,n){var r=vHe(t),i=r&&!o$(t);return(n?r:r&&t!==GHe&&t!==jHe&&t!==VHe&&t!==$He&&t!==zHe)&&t!==$fe&&!(e===i$&&!i)||vHe(e)&&!o$(e)&&t===$fe||e===i$&&i}s(bHe,"isPlainSafe");function gFt(t){return c6(t)&&t!==epe&&!o$(t)&&t!==nFt&&t!==oFt&&t!==i$&&t!==GHe&&t!==jHe&&t!==VHe&&t!==$He&&t!==zHe&&t!==$fe&&t!==ZLt&&t!==tFt&&t!==KLt&&t!==lFt&&t!==rFt&&t!==iFt&&t!==eFt&&t!==JLt&&t!==XLt&&t!==sFt&&t!==aFt}s(gFt,"isPlainSafeFirst");function AFt(t){return!o$(t)&&t!==i$}s(AFt,"isPlainSafeLast");function o6(t,e){var n=t.charCodeAt(e),r;return n>=55296&&n<=56319&&e+1<t.length&&(r=t.charCodeAt(e+1),r>=56320&&r<=57343)?(n-55296)*1024+r-56320+65536:n}s(o6,"codePointAt");function YHe(t){var e=/^\n* /;return e.test(t)}s(YHe,"needIndentIndicator");var KHe=1,Yfe=2,JHe=3,XHe=4,VR=5;function yFt(t,e,n,r,i,o,a,l){var c,u=0,d=null,p=!1,m=!1,h=r!==-1,g=-1,y=gFt(o6(t,0))&&AFt(o6(t,t.length-1));if(e||a)for(c=0;c<t.length;u>=65536?c+=2:c++){if(u=o6(t,c),!c6(u))return VR;y=y&&bHe(u,d,l),d=u}else{for(c=0;c<t.length;u>=65536?c+=2:c++){if(u=o6(t,c),u===a6)p=!0,h&&(m=m||c-g-1>r&&t[g+1]!==" ",g=c);else if(!c6(u))return VR;y=y&&bHe(u,d,l),d=u}m=m||h&&c-g-1>r&&t[g+1]!==" "}return!p&&!m?y&&!a&&!i(t)?KHe:o===l6?VR:Yfe:n>9&&YHe(t)?VR:a?o===l6?VR:Yfe:m?XHe:JHe}s(yFt,"chooseScalarStyle");function CFt(t,e,n,r,i){t.dump=function(){if(e.length===0)return t.quotingType===l6?'""':"''";if(!t.noCompatMode&&(cFt.indexOf(e)!==-1||uFt.test(e)))return t.quotingType===l6?'"'+e+'"':"'"+e+"'";var o=t.indent*Math.max(1,n),a=t.lineWidth===-1?-1:Math.max(Math.min(t.lineWidth,40),t.lineWidth-o),l=r||t.flowLevel>-1&&n>=t.flowLevel;function c(u){return hFt(t,u)}switch(s(c,"testAmbiguity"),yFt(e,l,t.indent,a,c,t.quotingType,t.forceQuotes&&!r,i)){case KHe:return e;case Yfe:return"'"+e.replace(/'/g,"''")+"'";case JHe:return"|"+EHe(e,t.indent)+IHe(xHe(e,o));case XHe:return">"+EHe(e,t.indent)+IHe(xHe(xFt(e,a),o));case VR:return'"'+vFt(e)+'"';default:throw new qd("impossible error: invalid scalar style")}}()}s(CFt,"writeScalar");function EHe(t,e){var n=YHe(t)?String(e):"",r=t[t.length-1]===`
`,i=r&&(t[t.length-2]===`
`||t===`
`),o=i?"+":r?"":"-";return n+o+`
`}s(EHe,"blockHeader");function IHe(t){return t[t.length-1]===`
`?t.slice(0,-1):t}s(IHe,"dropEndingNewline");function xFt(t,e){for(var n=/(\n+)([^\n]*)/g,r=function(){var u=t.indexOf(`
`);return u=u!==-1?u:t.length,n.lastIndex=u,THe(t.slice(0,u),e)}(),i=t[0]===`
`||t[0]===" ",o,a;a=n.exec(t);){var l=a[1],c=a[2];o=c[0]===" ",r+=l+(!i&&!o&&c!==""?`
`:"")+THe(c,e),i=o}return r}s(xFt,"foldString");function THe(t,e){if(t===""||t[0]===" ")return t;for(var n=/ [^ ]/g,r,i=0,o,a=0,l=0,c="";r=n.exec(t);)l=r.index,l-i>e&&(o=a>i?a:l,c+=`
`+t.slice(i,o),i=o+1),a=l;return c+=`
`,t.length-i>e&&a>i?c+=t.slice(i,a)+`
`+t.slice(a+1):c+=t.slice(i),c.slice(1)}s(THe,"foldLine");function vFt(t){for(var e="",n=0,r,i=0;i<t.length;n>=65536?i+=2:i++)n=o6(t,i),r=uu[n],!r&&c6(n)?(e+=t[i],n>=65536&&(e+=t[i+1])):e+=r||fFt(n);return e}s(vFt,"escapeString");function bFt(t,e,n){var r="",i=t.tag,o,a,l;for(o=0,a=n.length;o<a;o+=1)l=n[o],t.replacer&&(l=t.replacer.call(n,String(o),l)),(Qy(t,e,l,!1,!1)||typeof l>"u"&&Qy(t,e,null,!1,!1))&&(r!==""&&(r+=","+(t.condenseFlow?"":" ")),r+=t.dump);t.tag=i,t.dump="["+r+"]"}s(bFt,"writeFlowSequence");function wHe(t,e,n,r){var i="",o=t.tag,a,l,c;for(a=0,l=n.length;a<l;a+=1)c=n[a],t.replacer&&(c=t.replacer.call(n,String(a),c)),(Qy(t,e+1,c,!0,!0,!1,!0)||typeof c>"u"&&Qy(t,e+1,null,!0,!0,!1,!0))&&((!r||i!=="")&&(i+=zfe(t,e)),t.dump&&a6===t.dump.charCodeAt(0)?i+="-":i+="- ",i+=t.dump);t.tag=o,t.dump=i||"[]"}s(wHe,"writeBlockSequence");function EFt(t,e,n){var r="",i=t.tag,o=Object.keys(n),a,l,c,u,d;for(a=0,l=o.length;a<l;a+=1)d="",r!==""&&(d+=", "),t.condenseFlow&&(d+='"'),c=o[a],u=n[c],t.replacer&&(u=t.replacer.call(n,c,u)),Qy(t,e,c,!1,!1)&&(t.dump.length>1024&&(d+="? "),d+=t.dump+(t.condenseFlow?'"':"")+":"+(t.condenseFlow?"":" "),Qy(t,e,u,!1,!1)&&(d+=t.dump,r+=d));t.tag=i,t.dump="{"+r+"}"}s(EFt,"writeFlowMapping");function IFt(t,e,n,r){var i="",o=t.tag,a=Object.keys(n),l,c,u,d,p,m;if(t.sortKeys===!0)a.sort();else if(typeof t.sortKeys=="function")a.sort(t.sortKeys);else if(t.sortKeys)throw new qd("sortKeys must be a boolean or a function");for(l=0,c=a.length;l<c;l+=1)m="",(!r||i!=="")&&(m+=zfe(t,e)),u=a[l],d=n[u],t.replacer&&(d=t.replacer.call(n,u,d)),Qy(t,e+1,u,!0,!0,!0)&&(p=t.tag!==null&&t.tag!=="?"||t.dump&&t.dump.length>1024,p&&(t.dump&&a6===t.dump.charCodeAt(0)?m+="?":m+="? "),m+=t.dump,p&&(m+=zfe(t,e)),Qy(t,e+1,d,!0,p)&&(t.dump&&a6===t.dump.charCodeAt(0)?m+=":":m+=": ",m+=t.dump,i+=m));t.tag=o,t.dump=i||"{}"}s(IFt,"writeBlockMapping");function _He(t,e,n){var r,i,o,a,l,c;for(i=n?t.explicitTypes:t.implicitTypes,o=0,a=i.length;o<a;o+=1)if(l=i[o],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(n?l.multi&&l.representName?t.tag=l.representName(e):t.tag=l.tag:t.tag="?",l.represent){if(c=t.styleMap[l.tag]||l.defaultStyle,WHe.call(l.represent)==="[object Function]")r=l.represent(e,c);else if(HHe.call(l.represent,c))r=l.represent[c](e,c);else throw new qd("!<"+l.tag+'> tag resolver accepts not "'+c+'" style');t.dump=r}return!0}return!1}s(_He,"detectType");function Qy(t,e,n,r,i,o,a){t.tag=null,t.dump=n,_He(t,n,!1)||_He(t,n,!0);var l=WHe.call(t.dump),c=r,u;r&&(r=t.flowLevel<0||t.flowLevel>e);var d=l==="[object Object]"||l==="[object Array]",p,m;if(d&&(p=t.duplicates.indexOf(n),m=p!==-1),(t.tag!==null&&t.tag!=="?"||m||t.indent!==2&&e>0)&&(i=!1),m&&t.usedDuplicates[p])t.dump="*ref_"+p;else{if(d&&m&&!t.usedDuplicates[p]&&(t.usedDuplicates[p]=!0),l==="[object Object]")r&&Object.keys(t.dump).length!==0?(IFt(t,e,t.dump,i),m&&(t.dump="&ref_"+p+t.dump)):(EFt(t,e,t.dump),m&&(t.dump="&ref_"+p+" "+t.dump));else if(l==="[object Array]")r&&t.dump.length!==0?(t.noArrayIndent&&!a&&e>0?wHe(t,e-1,t.dump,i):wHe(t,e,t.dump,i),m&&(t.dump="&ref_"+p+t.dump)):(bFt(t,e,t.dump),m&&(t.dump="&ref_"+p+" "+t.dump));else if(l==="[object String]")t.tag!=="?"&&CFt(t,t.dump,e,o,c);else{if(l==="[object Undefined]")return!1;if(t.skipInvalid)return!1;throw new qd("unacceptable kind of an object to dump "+l)}t.tag!==null&&t.tag!=="?"&&(u=encodeURI(t.tag[0]==="!"?t.tag.slice(1):t.tag).replace(/!/g,"%21"),t.tag[0]==="!"?u="!"+u:u.slice(0,18)==="tag:yaml.org,2002:"?u="!!"+u.slice(18):u="!<"+u+">",t.dump=u+" "+t.dump)}return!0}s(Qy,"writeNode");function TFt(t,e){var n=[],r=[],i,o;for(Kfe(t,n,r),i=0,o=r.length;i<o;i+=1)e.duplicates.push(n[r[i]]);e.usedDuplicates=new Array(o)}s(TFt,"getDuplicateReferences");function Kfe(t,e,n){var r,i,o;if(t!==null&&typeof t=="object")if(i=e.indexOf(t),i!==-1)n.indexOf(i)===-1&&n.push(i);else if(e.push(t),Array.isArray(t))for(i=0,o=t.length;i<o;i+=1)Kfe(t[i],e,n);else for(r=Object.keys(t),i=0,o=r.length;i<o;i+=1)Kfe(t[r[i]],e,n)}s(Kfe,"inspectNode");function wFt(t,e){e=e||{};var n=new mFt(e);n.noRefs||TFt(t,n);var r=t;return n.replacer&&(r=n.replacer.call({"":r},"",r)),Qy(n,0,r,!0,!0)?n.dump+`
`:""}s(wFt,"dump$1");var _Ft=wFt,SFt={dump:_Ft};function tpe(t,e){return function(){throw new Error("Function yaml."+t+" is removed in js-yaml 4. Use yaml."+e+" instead, which is now safe by default.")}}s(tpe,"renamed");var lkr=qHe.load,ckr=qHe.loadAll,npe=SFt.dump;var ukr=tpe("safeLoad","load"),dkr=tpe("safeLoadAll","loadAll"),fkr=tpe("safeDump","dump");var PT=je(z0());var rpe=class{constructor(){this.resolvedSkills={};this.resolutions=[]}static{s(this,"SkillDump")}},Xl=class{constructor(){this.dump=new Kn(25);this.promptsDump=new Kn(1)}static{s(this,"ConversationDumper")}addResolvedSkill(e,n,r){let i=this.getDump(e);i.resolvedSkills[n]=r}getResolvedSkill(e,n){return this.getDump(e).resolvedSkills[n]}addResolution(e,n){this.getDump(e).resolutions.push(n)}getDump(e){let n=this.dump.get(e);return n||(n=new rpe,this.dump.set(e,n)),n}addPrompt(e,n,r){let i=this.promptsDump.get(e);i===void 0&&(i=new Map,this.promptsDump.set(e,i)),i.set(r,n)}getLastTurnPrompts(){if(this.promptsDump===void 0)return;let e=this.promptsDump.values().next();if(!e.done)return e.value}};function ZHe(t){let e=t.copy();return e.turns=e.turns.filter(n=>n.status!=="in-progress"&&(n.response===void 0||n.response?.type==="model")),e}s(ZHe,"filterConversationTurns");function qfe(t){return ZHe(t).getLastTurn()?.id}s(qfe,"getLastTurnId");async function aHe(t){let e=ZHe(t.conversation),n=qfe(t.conversation);if(!n)return"Nothing to dump because no request has been sent to the model yet.";let i=t.ctx.get(Xl).getDump(n),o=BFt(i,e.turns);or.debug(t.ctx,`conversation.dump
`,`
`+o);let a=await PFt(i,t.ctx);return PT.default`
        ${kFt(t.conversation,n)}
        ${RFt(t.ctx)}

        The following code can be copied into a chat simulation \`yml\` file. This response has not polluted the conversation history and did not cause any model roundtrip.
        \`\`\`yaml
        ${o}
        \`\`\`${a?`
${a}`:""}
        `}s(aHe,"getConversationDump");function RFt(t){let e=t.get(ur);return PT.default`
        - IDE: \`${e.getEditorInfo().name} (${e.getEditorInfo().version})\`
        - Plugin: \`${e.getEditorPluginInfo().version}\`
    `}s(RFt,"getEditorInfoDumpMessage");function kFt(t,e){return PT.default`
        Debug information for the last turn of the conversation.

        - ConversationId: \`${t.id}\`
        - MessageId: \`${e}\`
    `}s(kFt,"getInfoDumpMessage");async function lHe(t,e,n){let r=t.ctx.get(xl),i="# Available skills",o=r.getDescriptors().filter(a=>t.ctx.get(ki).getSupportedSkills(t.conversation.id).includes(a.id));if(n&&(o=o.filter(a=>a.id===n)),o.length===0)return`No skill with id ${n} available`;for(let a of o)i+=`
- ${a.id}`;t.turn.request.message&&Vn(t.turn.request.message).trim().length>0&&(i+=`

**User message**: ${Vn(t.turn.request.message)}`);for(let a of o){i+=`
## ${a.id}`,i+=PT.default`
            \n\n
            **Description**
            
            ${a.description()}`;let l=r.getSkill(a.id),c=await l?.resolver(t).resolveSkill(t);if(c){i+=PT.default`
                \n\n
                **Resolution**
                
                \`\`\`yaml
                ${npe(c)}
                \`\`\``;let u=await l?.processor(t).processSkill(c,t);if(u){let d=typeof u=="string"?u:u.elide(1e3).getText();i+=PT.default`
                    \n\n
                    **Processed value**
                    
                    ${d}`}else i+=`

**Unprocessable**`}else i+=`

**Unresolvable**`}return i}s(lHe,"getSkillsDump");function BFt(t,e){let n={state:{skills:t.resolvedSkills},turns:e.map((r,i)=>{let o={request:Vn(r.request.message)};return r.response&&(o.response=Vn(r.response.message)),o})};return npe(n)}s(BFt,"toSimulationFormat");async function PFt(t,e){let n=t.resolutions.map(o=>o.files).flat(),r=n.filter((o,a)=>o&&n.indexOf(o)===a),i;for(let o of r)if(o&&o.status==="included"){i||(i=`The following files have been used:
`);let a=await e.get(Nr).getOrReadTextDocument(o),l;a.status==="valid"&&(l=a.document);let c=l?.getText();or.debug(e,`conversation.dump.file
`,c),i+=`
**${o.uri}**

\`\`\`${l?.detectedLanguageId}
${c}
\`\`\``}return i}s(PFt,"fileDump");f();function ipe(t,e){let n=Bo(e.tokenizer),r=0;for(let i of t)r+=e.baseTokensPerMessage,i.role&&(r+=n.tokenize(i.role).length),i.name&&(r+=n.tokenize(i.name).length+e.baseTokensPerName),i.content&&(r+=n.tokenize(Vn(i.content)).length);return r+=e.baseTokensPerCompletion,r}s(ipe,"countMessagesTokens");f();function eGe(t,e,n,r,i){let o=["You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.","You can answer general programming questions and perform the following tasks:","* Ask a question about the files in your current workspace","* Explain how the code in your active editor works","* Make changes to existing code","* Review the selected code in your active editor","* Generate unit tests for the selected code","* Propose a fix for the problems in the selected code","* Scaffold code for a new file or project in a workspace","* Create a new Jupyter Notebook","* Ask questions about VS Code","* Generate query parameters for workspace search","* Ask how to do something in the terminal","* Explain what just happened in the terminal"].join(`
`),a=["The active document is the source code the user is looking at right now.","You have read access to the code in the active document, files the user has recently worked with and open tabs. You are able to retrieve, read and use this code to answer questions.","You cannot retrieve code that is outside of the current project.","You can only give one reply for each conversation turn."].join(`
`),l=e?`The user works in an IDE called ${e} which can be used to edit code, run and debug the user's application as well as executing tests.`:"",c=r?`The user is using ${r} as their operating system.`:"",u=i?`You use the ${i} large language model.`:"",d=n?`The user is logged in as ${n} on GitHub.`:"";return[o,c,u,d,l,a].filter(p=>p&&p!="").join(`
`)}s(eGe,"chatBasePrompt");f();f();f();f();f();function tGe(t){let e=t.split(`
`),n=[],r=!1,i=[];for(let o of e)o.startsWith("```")?(r?(n.push([y0(i.join(`
`)),1]),i=[],n.push([new Bt([o]),1])):n.push([new Bt([o]),1]),r=!r):r?i.push(o):n.push([new Bt([o]),.8]);return r&&(n.push([y0(i.join(`
`)),1]),n.push([new Bt(["```"]),1])),new Bt(n)}s(tGe,"fromMessage");function KR(t){let e=ope(t),n=[];for(let r=0;r<e.length;r++){let i=e[r],o=nGe(i.request,r+1),a=i.response&&i.response?.type!=="meta"?nGe(i.response):"",l=o;a!==""&&(l+=`
`+a+(e.length>1&&r!==e.length-1?`
`:"")),n.push(tGe(l))}return n.length>0?new Bt([[new Bt(["Consider the following conversation history:"]),1],[Db(n,"inverseLinear"),1]]):null}s(KR,"fromHistory");var DFt=5;function ope(t,e){return t.filter(r=>(r.status==="success"||r.status==="in-progress")&&Vn(r.request.message)!=""&&r.agent?.agentSlug===e).reverse().slice(0,DFt).reverse()}s(ope,"filterTurns");function nGe(t,e=0){let n;switch(t.type){case"user":case"template":n="User";break;case"model":n="GitHub Copilot";break;default:n=t.type}let r=Vn(t.message).startsWith("```")?`
`:" ";return`${e>0?`${e}) `:""}${n}:${r}${Vn(t.message)}`}s(nGe,"formatTurnMessage");f();f();f();var NFt=4,spe={skillIds:[]},a$=class{constructor(e,n){this.ctx=e;this.chatFetcher=n}static{s(this,"MetaPromptFetcher")}async fetchPromptContext(e,n,r,i,o){let a=e.conversation.getLastTurn().request.message;if(n.length>0){let l=await xo.getModelConfiguration(e.ctx,"meta",void 0,{tool_calls:!0}),c={promptType:"meta",supportedSkillDescriptors:n,modelConfiguration:l},u=await this.ctx.get(wc).toPrompt(e,c),d=i.extendedBy({messageSource:"chat.metaprompt"},{promptTokenLen:u.tokens}),p={modelConfiguration:l,messages:u.messages,uiKind:o,llmInteraction:e.toLlmInteraction()};if(u.toolConfig===void 0)throw new Error("No tool call configuration found in meta prompt.");p.tool_choice=u.toolConfig.tool_choice,p.tools=u.toolConfig.tools;let m=await this.chatFetcher.fetchResponse(p,r,d);return m.type!=="success"&&(Ln.error(this.ctx,"Failed to fetch prompt context, trying again..."),m=await this.chatFetcher.fetchResponse(p,r,d)),await e.ctx.get(sl).inspectFetchResult(m),this.handleResult(m,d,Vn(a),o,u.toolConfig)}else return spe}handleResult(e,n,r,i,o){if(e.type!=="success")return this.telemetryError(n,e),spe;let l;if(e.toolCalls&&e.toolCalls.length>0)l=o.extractArguments(e.toolCalls[0]).skillIds?.slice(0,NFt);else return Ln.error(this.ctx,"Missing tool call in meta prompt response"),spe;let c=n.extendedBy({uiKind:i,skillIds:l?.join(",")??""},{numTokens:e.numTokens+e.toolCalls[0].approxNumTokens}),u=c.extendedBy({messageText:r});return kt(this.ctx,`${Ac(i)}.metaPrompt`,c,0),kt(this.ctx,`${Ac(i)}.promptContext`,u,1),{skillIds:l??[]}}telemetryError(e,n){let r=e.extendedBy({resultType:n.type,reason:n.reason??""});kt(this.ctx,"conversation.promptContextError",r,1)}};f();f();f();var l$=class{constructor(){this.languageId=["java","kotlin","scala","groovy"]}static{s(this,"JavaProjectMetadataLookup")}determineBuildTools(e){return[...e.buildTools]}determineApplicationFrameworks(e){let n=[];return de(e,n,"org.springframework.boot","Spring Boot"),de(e,n,"jakarta.jakartaee-api","Jakarta EE"),de(e,n,"javax:javaee-api","Java EE"),de(e,n,"org.apache.struts:struts2-core","Apache Struts"),de(e,n,"org.hibernate:hibernate-core","Hibernate"),de(e,n,"org.apache.wicket:wicket-core","Apache Wicket"),de(e,n,"javax.faces:jsf-api","JSF"),de(e,n,"org.grails:grails-core","Grails"),n}determineCoreLibraries(e){let n=[];return de(e,n,"com.google.guava","Google Guava"),de(e,n,"org.apache.commons:commons-lang3","Apache Commons Lang"),de(e,n,"org.apache.commons:commons-io","Apache Commons IO"),de(e,n,"joda-time:joda-time","Joda-Time"),de(e,n,"com.google.code.gson:gson","Google Gson"),de(e,n,"org.apache.commons:commons-math3","Apache Commons Math"),de(e,n,"org.apache.commons:commons-collections4","Apache Commons Collections"),de(e,n,"org.apache.commons:commons-net","Apache Commons Net"),de(e,n,"org.apache.poi:poi","Apache POI"),de(e,n,"com.fasterxml.jackson.core:jackson-databind","Jackson"),n}determineTestingFrameworks(e){let n=[];return de(e,n,"org.junit.jupiter:junit-jupiter","JUnit"),de(e,n,"junit:junit","JUnit"),de(e,n,"org.testng:testng","TestNG"),de(e,n,"org.spockframework:spock-core","Spock"),de(e,n,"io.cucumber:cucumber-java","Cucumber"),de(e,n,"org.jboss.arquillian.junit:arquillian-junit-container","Arquillian"),n}determineTestingLibraries(e){let n=[];return de(e,n,"org.mockito","Mockito"),de(e,n,"org.assertj","AssertJ"),de(e,n,"org.hamcrest","Hamcrest"),de(e,n,"org.powermock","PowerMock"),de(e,n,"org.jmock","JMock"),de(e,n,"org.easymock","EasyMock"),de(e,n,"org.jmockit:jmockit","JMockit"),de(e,n,"com.github.tomakehurst:wiremock","WireMock"),de(e,n,"org.dbunit:dbunit","DBUnit"),de(e,n,"com.icegreen:greenmail","GreenMail"),de(e,n,"net.sourceforge.htmlunit:htmlunit","HtmlUnit"),de(e,n,"org.seleniumhq.selenium:selenium-java","Selenium"),de(e,n,"io.rest-assured:rest-assured","Rest-Assured"),de(e,n,"io.gatling.highcharts:gatling-charts-highcharts","Gatling"),de(e,n,"org.apache.jmeter:ApacheJMeter","JMeter"),n}},c$=class{constructor(){this.languageId=["javascript","javascriptreact","typescript","typescriptreact","vue"]}static{s(this,"JavaScriptProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let n=[];return de(e,n,"@types/node","Node.js"),de(e,n,"react-native","React Native"),n.find(r=>r.name==="React Native")||de(e,n,"react","React"),de(e,n,"angular","Angular"),de(e,n,"vue","Vue.js"),de(e,n,"ember","Ember.js"),de(e,n,"backbone","Backbone.js"),de(e,n,"meteor","Meteor"),de(e,n,"polymer","Polymer"),de(e,n,"aurelia","Aurelia"),de(e,n,"knockout","Knockout.js"),de(e,n,"dojo","Dojo Toolkit"),de(e,n,"mithril","Mithril.js"),de(e,n,"marionette","Marionette.js"),de(e,n,"marko","Marko.js"),de(e,n,"svelte","Svelte"),de(e,n,"hyperapp","Hyperapp"),de(e,n,"inferno","Inferno.js"),de(e,n,"preact","Preact"),de(e,n,"riot","Riot.js"),de(e,n,"moon","Moon.js"),de(e,n,"stencil","Stencil.js"),n}determineCoreLibraries(e){let n=[];return de(e,n,"lodash","Lodash"),de(e,n,"moment","Moment.js"),de(e,n,"axios","Axios"),de(e,n,"redux","Redux"),de(e,n,"recoil","Recoil"),de(e,n,"jquery","jQuery"),de(e,n,"d3","D3.js"),de(e,n,"underscore","Underscore.js"),de(e,n,"ramda","Ramda"),de(e,n,"immutable","Immutable.js"),de(e,n,"rxjs","RxJS"),de(e,n,"three","Three.js"),de(e,n,"socket.io","Socket.IO"),de(e,n,"express","Express.js"),de(e,n,"next","Next.js"),de(e,n,"puppeteer","Puppeteer"),de(e,n,"cheerio","Cheerio"),de(e,n,"nodemailer","Nodemailer"),n}determineTestingFrameworks(e){let n=[];return de(e,n,"jest","Jest"),de(e,n,"mocha","Mocha"),de(e,n,"jasmine","Jasmine"),de(e,n,"ava","AVA"),de(e,n,"qunit","QUnit"),de(e,n,"tape","Tape"),n}determineTestingLibraries(e){let n=[];return de(e,n,"chai","Chai"),de(e,n,"sinon","Sinon"),de(e,n,"enzyme","Enzyme"),de(e,n,"protractor","Protractor"),de(e,n,"supertest","Supertest"),de(e,n,"nock","Nock"),de(e,n,"cypress","Cypress"),de(e,n,"@testing-library/react","React Testing Library"),n}},u$=class{constructor(){this.languageId="go"}static{s(this,"GoProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let n=[];return de(e,n,"github.com/gorilla/mux","Gorilla Mux"),de(e,n,"github.com/go-chi/chi","Chi"),de(e,n,"github.com/gin-gonic/gin","Gin"),de(e,n,"github.com/labstack/echo","Echo"),de(e,n,"github.com/revel/revel","Revel"),de(e,n,"github.com/astaxie/beego","Beego"),de(e,n,"github.com/go-martini/martini","Martini"),de(e,n,"github.com/gobuffalo/buffalo","Buffalo"),de(e,n,"github.com/goji/goji","Goji"),de(e,n,"github.com/hoisie/web","Web.go"),n}determineCoreLibraries(e){let n=[];return de(e,n,"net/http","net/http"),de(e,n,"fmt","fmt"),de(e,n,"io","io"),de(e,n,"time","time"),de(e,n,"math","math"),de(e,n,"strconv","strconv"),de(e,n,"strings","strings"),de(e,n,"sort","sort"),de(e,n,"encoding/json","encoding/json"),n}determineTestingFrameworks(e){let n=[];return de(e,n,"github.com/onsi/ginkgo","ginkgo"),de(e,n,"github.com/onsi/gomega","gomega"),de(e,n,"github.com/stretchr/testify","testify"),de(e,n,"gopkg.in/check.v1","gocheck"),de(e,n,"github.com/franela/goblin","goblin"),de(e,n,"github.com/DATA-DOG/godog","godog"),de(e,n,"github.com/stesla/gospec","gospec"),de(e,n,"github.com/rjeczalik/gotest","gotest"),de(e,n,"github.com/smartystreets/goconvey","goconvey"),n}determineTestingLibraries(e){let n=[];return de(e,n,"github.com/stretchr/testify","Testify"),de(e,n,"github.com/smartystreets/goconvey","GoConvey"),de(e,n,"github.com/onsi/ginkgo","Ginkgo"),de(e,n,"github.com/golang/mock","GoMock"),de(e,n,"gopkg.in/check.v1","GoCheck"),de(e,n,"github.com/franela/goblin","Goblin"),de(e,n,"github.com/DATA-DOG/godog","GoDog"),de(e,n,"github.com/onsi/gomega","Gomega"),de(e,n,"github.com/stesla/gospec","GoSpec"),de(e,n,"github.com/rjeczalik/gotest","GoTest"),n}},d$=class{constructor(){this.languageId=["python","jupyter"]}static{s(this,"PythonProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let n=[];return de(e,n,"flask","Flask"),de(e,n,"django","Django"),de(e,n,"pyramid","Pyramid"),de(e,n,"tornado","Tornado"),de(e,n,"fastapi","FastAPI"),n}determineCoreLibraries(e){let n=[];return de(e,n,"requests","requests"),de(e,n,"numpy","numpy"),de(e,n,"pandas","pandas"),de(e,n,"scipy","scipy"),de(e,n,"matplotlib","matplotlib"),n}determineTestingFrameworks(e){let n=[];return de(e,n,"pytest","Pytest"),de(e,n,"unittest","Unittest"),de(e,n,"doctest","Doctest"),de(e,n,"nose","Nose"),n}determineTestingLibraries(e){let n=[];return de(e,n,"mock","Mock"),de(e,n,"hypothesis","Hypothesis"),de(e,n,"behave","Behave"),de(e,n,"lettuce","Lettuce"),de(e,n,"testify","Testify"),de(e,n,"pyhamcrest","PyHamcrest"),n}},f$=class{constructor(){this.languageId=["php","blade"]}static{s(this,"PhpProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let n=[];return de(e,n,"laravel/framework","Laravel"),de(e,n,"symfony/symfony","Symfony"),de(e,n,"slim/slim","Slim"),de(e,n,"cakephp/cakephp","CakePHP"),de(e,n,"yiisoft/yii2","Yii"),de(e,n,"zendframework/zendframework","Zend Framework"),de(e,n,"phalcon/cphalcon","Phalcon"),de(e,n,"bcosca/fatfree","Fat-Free"),de(e,n,"fuel/fuel","FuelPHP"),de(e,n,"phpixie/framework","PHPixie"),n}determineCoreLibraries(e){let n=[];return de(e,n,"monolog/monolog","Monolog"),de(e,n,"vlucas/phpdotenv","PHP dotenv"),de(e,n,"symfony/console","Symfony Console"),de(e,n,"guzzlehttp/guzzle","GuzzleHttp"),de(e,n,"ramsey/uuid","Ramsey UUID"),de(e,n,"doctrine/orm","Doctrine ORM"),de(e,n,"php-di/php-di","PHP-DI"),de(e,n,"phpunit/php-timer","PHPUnit Timer"),de(e,n,"symfony/finder","Symfony Finder"),de(e,n,"symfony/yaml","Symfony Yaml"),n}determineTestingFrameworks(e){let n=[];return de(e,n,"phpunit/phpunit","PHPUnit"),de(e,n,"behat/behat","Behat"),de(e,n,"phpspec/phpspec","PHPSpec"),de(e,n,"codeception/codeception","Codeception"),de(e,n,"atoum/atoum","Atoum"),de(e,n,"pestphp/pest","PestPHP"),de(e,n,"kahlan/kahlan","Kahlan"),de(e,n,"peridot-php/peridot","Peridot"),de(e,n,"phake/phake","Phake"),n}determineTestingLibraries(e){let n=[];return de(e,n,"mockery/mockery","Mockery"),de(e,n,"php-mock/php-mock","PHP-Mock"),de(e,n,"php-mock/php-mock-phpunit","PHP-Mock PHPUnit"),de(e,n,"padraic/mockery","Padraic Mockery"),de(e,n,"phpspec/prophecy","PHPSpec Prophecy"),de(e,n,"phpunit/php-invoker","PHPUnit Invoker"),de(e,n,"phpunit/php-token-stream","PHPUnit Token Stream"),de(e,n,"phpunit/php-code-coverage","PHPUnit Code Coverage"),de(e,n,"phpunit/php-timer","PHPUnit Timer"),de(e,n,"phpunit/php-text-template","PHPUnit Text Template"),n}},p$=class{constructor(){this.languageId="csharp"}static{s(this,"CSharpProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let n=[];return de(e,n,"Microsoft.NETCore.App",".NET Core"),de(e,n,"Microsoft.AspNetCore.App","ASP.NET Core"),n}determineCoreLibraries(e){let n=[];return de(e,n,"EntityFramework","Entity Framework"),de(e,n,"Newtonsoft.Json","Newtonsoft.Json"),de(e,n,"AutoMapper","AutoMapper"),de(e,n,"Serilog","Serilog"),de(e,n,"Dapper","Dapper"),de(e,n,"Polly","Polly"),de(e,n,"FluentValidation","FluentValidation"),de(e,n,"MediatR","MediatR"),de(e,n,"Hangfire","Hangfire"),de(e,n,"RabbitMQ.Client","RabbitMQ.Client"),de(e,n,"MassTransit","MassTransit"),de(e,n,"Microsoft.Extensions.Logging","Microsoft.Extensions.Logging"),de(e,n,"Microsoft.Extensions.DependencyInjection","Microsoft.Extensions.DependencyInjection"),de(e,n,"Microsoft.Extensions.Configuration","Microsoft.Extensions.Configuration"),de(e,n,"Microsoft.Extensions.Http","Microsoft.Extensions.Http"),n}determineTestingFrameworks(e){let n=[];return de(e,n,"xunit","xUnit"),de(e,n,"NUnit","NUnit"),de(e,n,"SpecFlow","SpecFlow"),n}determineTestingLibraries(e){let n=[];return de(e,n,"Moq","Moq"),de(e,n,"FluentAssertions","FluentAssertions"),de(e,n,"Bogus","Bogus"),de(e,n,"RestSharp","RestSharp"),de(e,n,"Swashbuckle.AspNetCore","Swashbuckle.AspNetCore"),n}},m$=class{constructor(){this.languageId="dart"}static{s(this,"DartProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let n=[];return de(e,n,"flutter","Flutter"),de(e,n,"angular","AngularDart"),n}determineCoreLibraries(e){let n=[];return de(e,n,"dartx","dartx"),de(e,n,"provider","Provider"),de(e,n,"rxdart","RxDart"),de(e,n,"dio","Dio"),de(e,n,"json_serializable","json_serializable"),de(e,n,"freezed","Freezed"),de(e,n,"moor","Moor"),de(e,n,"hive","Hive"),de(e,n,"http","http"),de(e,n,"path","path"),de(e,n,"intl","intl"),de(e,n,"equatable","equatable"),de(e,n,"get_it","get_it"),n}determineTestingFrameworks(e){let n=[];return de(e,n,"test","test"),de(e,n,"flutter_test","flutter_test"),n}determineTestingLibraries(e){let n=[];return de(e,n,"mockito","mockito"),de(e,n,"bloc_test","bloc_test"),n}},h$=class{constructor(){this.languageId="ruby"}static{s(this,"RubyProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let n=[];return de(e,n,"rails","Rails"),de(e,n,"sinatra","Sinatra"),de(e,n,"hanami","Hanami"),de(e,n,"grape","Grape"),de(e,n,"roda","Roda"),de(e,n,"padrino","Padrino"),de(e,n,"cuba","Cuba"),de(e,n,"ramaze","Ramaze"),de(e,n,"nyara","Nyara"),de(e,n,"rack","Rack"),n}determineCoreLibraries(e){let n=[];return de(e,n,"active_record","ActiveRecord"),de(e,n,"sequel","Sequel"),de(e,n,"rom","ROM"),de(e,n,"datamapper","DataMapper"),de(e,n,"mongoid","Mongoid"),de(e,n,"neo4j","Neo4j"),de(e,n,"redis","Redis"),de(e,n,"cassandra","Cassandra"),de(e,n,"couchrest","CouchRest"),de(e,n,"riak","Riak"),n}determineTestingFrameworks(e){let n=[];return de(e,n,"rspec","RSpec"),de(e,n,"minitest","Minitest"),de(e,n,"cucumber","Cucumber"),de(e,n,"spinach","Spinach"),de(e,n,"turnip","Turnip"),de(e,n,"bacon","Bacon"),de(e,n,"shoulda","Shoulda"),de(e,n,"test-unit","Test::Unit"),de(e,n,"wrong","Wrong"),de(e,n,"contest","Contest"),n}determineTestingLibraries(e){let n=[];return de(e,n,"factory_bot","FactoryBot"),de(e,n,"faker","Faker"),de(e,n,"ffaker","FFaker"),de(e,n,"fabrication","Fabrication"),de(e,n,"machinist","Machinist"),de(e,n,"mocha","Mocha"),de(e,n,"flexmock","FlexMock"),de(e,n,"rr","RR"),de(e,n,"bourne","Bourne"),de(e,n,"not_a_mock","NotAMock"),n}},g$=class{constructor(){this.languageId="rust"}static{s(this,"RustProjectMetadataLookup")}determineBuildTools(e){return e.buildTools}determineApplicationFrameworks(e){let n=[];return de(e,n,"tokio","tokio"),de(e,n,"async-std","async-std"),de(e,n,"hyper","hyper"),de(e,n,"actix-web","actix-web"),de(e,n,"rocket","rocket"),n}determineCoreLibraries(e){let n=[];return de(e,n,"serde","serde"),de(e,n,"regex","regex"),de(e,n,"rand","rand"),de(e,n,"log","log"),de(e,n,"lazy_static","lazy_static"),de(e,n,"libc","libc"),de(e,n,"futures","futures"),de(e,n,"rayon","rayon"),de(e,n,"reqwest","reqwest"),de(e,n,"warp","warp"),n}determineTestingFrameworks(e){let n=[];return de(e,n,"test-case","test-case"),de(e,n,"proptest","proptest"),de(e,n,"quickcheck","quickcheck"),n}determineTestingLibraries(e){let n=[];return de(e,n,"mockall","mockall"),de(e,n,"double","double"),de(e,n,"rstest","rstest"),de(e,n,"mockiato","mockiato"),de(e,n,"mock_derive","mock_derive"),de(e,n,"mocktopus","mocktopus"),de(e,n,"mockers","mockers"),de(e,n,"mock_it","mock_it"),n}},A$=class{constructor(){this.languageId=["c","cpp"]}static{s(this,"CProjectMetadataLookup")}determineBuildTools(e){return e.buildTools.filter(n=>["gcc","clang","make","cmake","autotools","ninja","meson"].includes(n.name))}determineApplicationFrameworks(e){return e.libraries.filter(n=>["libc","libuv","openssl","zlib","libevent","libcurl"].includes(n.name))}determineCoreLibraries(e){return e.libraries.filter(n=>["libpng","libjpeg","libxml2","sqlite","postgres","mysql"].includes(n.name))}determineTestingFrameworks(e){return e.libraries.filter(n=>["unity","criterion","cmocka","check","ctest","minunit"].includes(n.name))}determineTestingLibraries(e){return e.libraries.filter(n=>["cmock","fff","trompeloeil","fakeit"].includes(n.name))}};function de(t,e,n,r){let i=t.libraries.find(o=>o.name.toLowerCase().indexOf(n.toLowerCase())>-1);i&&e.push({name:r,version:i.version})}s(de,"addFromLibraries");var y$=class{constructor(e,n){this.languageId=e;this.delegates=n}static{s(this,"CompositeProjectMetadataLookup")}determineBuildTools(e){return this.delegates.map(n=>n.determineBuildTools(e)).flat()}determineApplicationFrameworks(e){return this.delegates.map(n=>n.determineApplicationFrameworks(e)).flat()}determineCoreLibraries(e){return this.delegates.map(n=>n.determineCoreLibraries(e)).flat()}determineTestingFrameworks(e){return this.delegates.map(n=>n.determineTestingFrameworks(e)).flat()}determineTestingLibraries(e){return this.delegates.map(n=>n.determineTestingLibraries(e)).flat()}};function iGe(t){return t.language.version?t.language.name+" "+t.language.version:t.language.name}s(iGe,"determineProgrammingLanguage");var rGe=[new l$,new c$,new u$,new d$,new f$,new p$,new m$,new h$,new g$,new A$];function oGe(t){let e=rGe.find(n=>typeof n.languageId=="string"?n.languageId===t:Array.isArray(n.languageId)?n.languageId.includes(t):!1)??new y$(t,rGe);return new ape(e)}s(oGe,"getMetadataLookup");var ape=class{constructor(e){this.delegate=e;this.languageId=e.languageId}static{s(this,"DistinctProjectMetadataLookup")}determineBuildTools(e){return this.deduplicateDependencies(this.delegate.determineBuildTools(e))}determineApplicationFrameworks(e){return this.deduplicateDependencies(this.delegate.determineApplicationFrameworks(e))}determineCoreLibraries(e){return this.deduplicateDependencies(this.delegate.determineCoreLibraries(e))}determineTestingFrameworks(e){return this.deduplicateDependencies(this.delegate.determineTestingFrameworks(e))}determineTestingLibraries(e){return this.deduplicateDependencies(this.delegate.determineTestingLibraries(e))}deduplicateDependencies(e){let n=[];return e.forEach(r=>{n.find(i=>i.name===r.name)||n.push(r)}),n}};var sGe=I.Object({name:I.String(),version:I.Optional(I.String())}),aGe=I.Object({language:I.Object({id:I.String(),name:I.String(),version:I.Optional(I.String())}),libraries:I.Array(sGe),buildTools:I.Array(sGe)}),lpe=class{constructor(e){this.turnContext=e}static{s(this,"ProjectMetadataSkillProcessor")}value(){return 1}processSkill(e){let n=[];n.push([new Bt([`The user is working on a project with the following characteristics:
`]),1]);let r=oGe(e.language.id);return this.addProgrammingLanguage(e,n),this.addBuildTools(e,n,r),this.addApplicationFramework(e,n,r),this.addCoreLibraries(e,n,r),this.addTestingFrameworks(e,n,r),this.addTestingLibraries(e,n,r),new Bt(n)}addProgrammingLanguage(e,n){let r=iGe(e);this.turnContext.collectLabel(RA,r),n.push([new Bt([`- programming language: ${r}`]),1])}addBuildTools(e,n,r){this.addToPrompt(n,"- build tools:",r.determineBuildTools(e))}addApplicationFramework(e,n,r){this.addToPrompt(n,"- application frameworks:",r.determineApplicationFrameworks(e))}addCoreLibraries(e,n,r){this.addToPrompt(n,"- core libraries:",r.determineCoreLibraries(e))}addTestingFrameworks(e,n,r){this.addToPrompt(n,"- testing frameworks:",r.determineTestingFrameworks(e))}addTestingLibraries(e,n,r){this.addToPrompt(n,"- testing libraries:",r.determineTestingLibraries(e))}addToPrompt(e,n,r){if(r.length>0){r.forEach(o=>{this.turnContext.collectLabel(RA,`${o.name}${o.version?" "+o.version:""}`)});let i=r.map(o=>`  - ${o.name}${o.version?" "+o.version:""}`).join(`
`);e.push([new Bt([`${n}
${i}`]),1])}}},RA="project-metadata",C$=class{constructor(e){this._resolver=e;this.id=RA;this.type="explicit"}static{s(this,"ProjectMetadataSkill")}description(){return"The characteristics of the project the developer is working on (languages, frameworks)"}resolver(){return this._resolver}processor(e){return new lpe(e)}};f();var lGe=je(require("path"));var cpe=class{constructor(e){this.turnContext=e}static{s(this,"ReferencesSkillProcessor")}value(){return 1}async processSkill(e){let n=this.turnContext.ctx.get(Nr),r=[],i=this.filterIncludedFiles(e),o=(await this.toFileChunks(i,n)).filter(a=>a!==void 0).flat();if(o.length>0)return r.push([new Bt(["The user wants you to consider the following referenced files when computing your answer."]),1]),r.push(...o),new Bt(r)}filterIncludedFiles(e){return e.filter(n=>n.type==="file"&&!this.turnContext.isFileIncluded(n.uri))}async toFileChunks(e,n){return await Promise.all(e.map(async r=>{if(r.type==="file"&&r.uri)return await this.elideReferencedFiles(n,r)}))}async elideReferencedFiles(e,n){let r=await e.getOrReadTextDocument(n),i=ys(r);if(await this.turnContext.collectFile(v$,n.uri,i),r.status==="valid"){let o=e.getRelativePath(r.document);if(i==="included"){let a=new EA(r.document,n.selection,n.visibleRange);return[[`Code excerpt from referenced file \`${o}\`:`,1],[a.fromAllCode({addLineNumbers:!1}),1]]}else if(i==="empty")return[[new Bt([`The referenced file \`${o}\` is empty.`]),1]]}else if(r.status==="invalid")return[[new Bt([`The referenced file \`${lGe.basename(n.uri)}\` is content excluded.`]),1]]}},upe=class{static{s(this,"ReferencesSkillResolver")}resolveSkill(e){if(e.turn.request.references&&e.turn.request.references.length>0)return e.turn.request.references}},v$="references",x$=class{constructor(){this.id=v$;this.type="implicit"}static{s(this,"ReferencesSkill")}description(){return"The code from the user's referenced files"}resolver(){return new upe}processor(e){return new cpe(e)}};var DT=s(()=>[RA,fh,v$,lu],"mandatorySkills"),b$=class{constructor(e,n){this.chatFetcher=n;this.metaPromptFetcher=new a$(e,this.chatFetcher)}static{s(this,"ConversationContextCollector")}async collectContext(e,n,r,i,o,a){let l=[];if(o){let c=o.requiredSkills?await o.requiredSkills(e.ctx):[];l.push(...c.filter(u=>!DT().includes(u)))}else(await this.metaPromptFetcher.fetchPromptContext(e,await this.selectableSkillDescriptors(e.ctx,e.conversation,e.turn),n,r,i)).skillIds.reverse().forEach(u=>{!l.includes(u)&&!DT().includes(u)&&l.push(u)});if(a){let c=await a.additionalSkills(e.ctx);l.push(...c.filter(u=>!DT().includes(u)))}return l.push(...DT()),l=l.filter(c=>!this.isIgnoredSkill(c,e.turn)),{skillIds:e.ctx.get(ki).filterSupportedSkills(e.conversation.id,l)}}async selectableSkillDescriptors(e,n,r){let i=await this.getNonSelectableSkills(e),o=e.get(ki).getSupportedSkills(n.id),a=e.get(xl).getDescriptors(),l=[];for(let c of a){if(i.includes(c.id)||!o.includes(c.id))continue;(c.isAvailable?await c.isAvailable(e):!0)&&!this.isIgnoredSkill(c.id,r)&&l.push(c)}return l}async getNonSelectableSkills(e){let n=await _A(e),r=(await Promise.all(n.map(i=>i.additionalSkills(e)))).flat();return[...DT(),...r]}isIgnoredSkill(e,n){return n.ignoredSkills?.some(r=>r.skillId===e)}};f();f();var E$=class{constructor(e,n,r,i){this.ctx=e;this.conversation=n;this.turn=r;this.progress=i;this.rounds=[]}static{s(this,"AgentToolCalls")}getRound(e){return this.rounds.find(n=>n.roundId===e)}async start(e,n,r,i){let o=this.getRound(e);if(o||(o={roundId:e,reply:""},this.rounds.push(o)),o.toolCalls?.find(l=>l.id===n))Ln.error(this.ctx,`Tool call ${n} already exists for the round ${e} in conversation ${this.conversation.id} and turn ${this.turn.id}`);else{let l={id:n,name:r,progressMessage:i,status:"running"};o.toolCalls=[l],await this.progress.report(this.conversation,this.turn,{editAgentRounds:[o]})}}async finish(e,n){await this.update(e,n,r=>{r.status="completed"})}async result(e,n,r){await this.update(e,n,i=>{i.status="completed",i.result=r.data})}async cancel(e,n){await this.update(e,n,r=>{r.status="cancelled"})}async finishAll(e="completed"){let n=this.rounds.filter(r=>{let i=r.toolCalls?.filter(o=>o.status==="running").map(o=>(o.status=e,o));if(i&&i.length>0)return r.toolCalls=i,!0});n.length>0&&await this.progress.report(this.conversation,this.turn,{editAgentRounds:n})}async error(e,n,r){await this.update(e,n,i=>{i.status="error",i.error=r||"Unknown error"})}async update(e,n,r){let i=this.rounds.find(a=>a.roundId===e);i||(i={roundId:e,reply:""},this.rounds.push(i));let o=i.toolCalls?.find(a=>a.id===n);o?(r(o),await this.progress.report(this.conversation,this.turn,{editAgentRounds:[i]})):Ln.error(this.ctx,`Tool call ${n} not found for the agent round ${e} in conversation ${this.conversation.id} and turn ${this.turn.id}`)}};f();var I$=class{constructor(e,n,r,i){this.ctx=e;this.conversation=n;this.turn=r;this.progress=i;this.steps=[]}static{s(this,"Steps")}async start(e,n,r){let i=this.steps.find(o=>o.id===e);if(!i)i={id:e,title:n,description:r,status:"running"},this.steps.push(i),await this.progress.report(this.conversation,this.turn,{steps:[i]});else throw new Error(`Step with id "${e}" already started`)}async finish(e){await this.updateStep(e,n=>{n.status="completed"})}async cancel(e){await this.updateStep(e,n=>{n.status="cancelled"})}async finishAll(e="completed"){let n=this.steps.filter(r=>r.status==="running").map(r=>(r.status=e,r));n.length>0&&await this.progress.report(this.conversation,this.turn,{steps:n})}async error(e,n){return this.updateStep(e,r=>{r.status="failed",r.error={message:n||"Unknown error"}})}async updateStep(e,n){let r=this.steps.find(i=>i.id===e);r?(n(r),await this.progress.report(this.conversation,this.turn,{steps:[r]})):Ln.error(this.ctx,`Step ${e} not found for conversation ${this.conversation.id} and turn ${this.turn.id}`)}};f();var LFt="X-Initiator",FFt="X-Interaction-ID",MFt="X-Interaction-Type";var T$=class{static{s(this,"LlmInteractionInitiator")}static id(){throw new Error("Must be implemented by subclass")}},dpe=class extends T${static{s(this,"User")}static id(){return"user"}},fpe=class extends T${static{s(this,"Agent")}static id(){return"agent"}},ppe=class{static{s(this,"GenericLlmInteraction")}constructor(e,n,r){this.initiator=e.id(),this.interactionType=n,this.interactionId=r}toCapiHeaders(){return{[LFt]:this.initiator,[FFt]:this.interactionId,[MFt]:this.interactionType.toString()}}},Hd=class t extends ppe{static{s(this,"LlmInteraction")}static user(e,n){return new t(dpe,e,n)}static agent(e,n){return new t(fpe,e,n)}};var Mb=class{constructor(e,n,r,i){this.ctx=e;this.conversation=n;this.turn=r;this.cancelationToken=i;this.skillResolver=new mpe(this),this.steps=new I$(e,n,r,e.get(ws)),this.collector=new hpe(n,r,e.get(ws)),this.agentToolCalls=new E$(e,n,r,e.get(ws))}static{s(this,"TurnContext")}toLlmInteraction(){return this.conversation.source==="inline"?Hd.user("conversation-inline",this.turn.telemetryId):this.agentToolCalls.rounds.length?Hd.agent("conversation-panel",this.turn.telemetryId):Hd.user("conversation-panel",this.turn.telemetryId)}async collectFile(e,n,r,i){let o={type:"file",collector:e,uri:n,status:r};i&&(o.range=i),await this.collector.collect(o)}collectLabel(e,n){this.collector.collect({type:"label",collector:e,label:n})}isFileIncluded(e){return this.collector.collectibles.some(n=>n.type==="file"&&n.status==="included"&&n.uri===e)}async info(e){await this.sendChatNotification(e,"info")}async warn(e){await this.sendChatNotification(e,"warning")}async sendChatNotification(e,n){await this.ctx.get(ws).report(this.conversation,this.turn,{notifications:[{severity:n,message:e}]})}},w$=class extends Error{constructor(n,r){super(`Cycle detected while resolving skills: ${r.join(" -> ")} -> ${n}`);this.skillId=n;this.skillStack=r}static{s(this,"CycleError")}},u6=class extends Error{static{s(this,"ConversationAbortError")}constructor(e){super(e)}},mpe=class{constructor(e){this.turnContext=e;this.resolveStack=[]}static{s(this,"SkillResolver")}async resolve(e){if(this.turnContext.ctx.get(ki).getSupportedSkills(this.turnContext.conversation.id).includes(e)){this.ensureNoCycle(e);let r=this.turnContext.ctx.get(Xl).getResolvedSkill(this.turnContext.turn.id,e);if(r)return this.resolveStack.pop(),r;let i=await this.newlyResolve(e);return this.resolveStack.pop(),i}}ensureNoCycle(e){if(this.resolveStack.includes(e))throw new w$(e,this.resolveStack);this.resolveStack.push(e)}async newlyResolve(e){let r=this.turnContext.ctx.get(xl).getSkill(e);try{let i=await r?.resolver(this.turnContext).resolveSkill(this.turnContext);if(i)return this.turnContext.ctx.get(Xl).addResolvedSkill(this.turnContext.turn.id,e,i),i}catch(i){if(i instanceof w$||i instanceof u6)throw i;Ln.exception(this.turnContext.ctx,i,`Error while resolving skill ${e}`)}}},hpe=class{constructor(e,n,r){this.conversation=e;this.turn=n;this.conversationProgress=r;this.collectibles=[]}static{s(this,"Collector")}async collect(e){this.collectibles.push(e),await this.reportCollectedFile(e)}async reportCollectedFile(e){e.type==="file"&&await this.conversationProgress.report(this.conversation,this.turn,{references:[{type:"file",uri:e.uri,status:e.status,range:e.range}]})}collectiblesForCollector(e){return this.collectibles.filter(n=>n.collector===e)}};async function cGe(t,e){let[n,r,i]=await QFt(t,e);return i.push(...qFt(t)),n.length>0||r.length>0?[new Bt([[new Bt(["Consider the additional context:"]),1],[Db(n,"inverseLinear"),.9],...r]),i]:[null,i]}s(cGe,"fromSkills");async function QFt(t,e){let n=[],r=[],i=[],o=[...t.turn.skills].reverse();for(let a of o){if(!await WFt(t,a.skillId,e?.languageId??""))continue;let[l,c]=await OFt(t,a.skillId);l&&(DT().indexOf(a.skillId)===-1?r.push(l):i.push(l)),n.push(c)}return r.reverse(),i.reverse(),n.reverse(),[r,i,n]}s(QFt,"handleSkillsInReverse");async function OFt(t,e){let r=t.ctx.get(xl).getSkill(e);try{let i=Date.now(),o=await t.skillResolver.resolve(e),a=Date.now()-i;if(o){let l=r?.processor(t),c=Date.now(),u=await l?.processSkill(o,t),d=Date.now()-c;return u?await UFt(t,r,l,u,a,d):[void 0,await S$(t,r,"unprocessable",void 0,a,d)]}else return[void 0,await S$(t,r,"unresolvable",void 0,a)]}catch(i){if(Ln.exception(t.ctx,i,`Error while resolving skill ${e}`),i instanceof u6)throw i;return[void 0,await S$(t,r,"failed")]}}s(OFt,"safelyProcessSkill");async function UFt(t,e,n,r,i,o){let a;return typeof r=="string"?a=new Bt([[r,1]]):a=r,[[a,n?.value()||0],await S$(t,e,"resolved",a,i,o)]}s(UFt,"handleProcessedSkill");async function S$(t,e,n,r,i,o){let l=t.collector.collectiblesForCollector(e?.id??"unknown").filter(u=>u.type==="file"),c={skillId:e?.id??"unknown",resolution:n,files:l,resolutionTimeMs:i,processingTimeMs:o};if(r){let u=await t.ctx.get(na).getBestChatModelConfig(Df("user")),d=r.elide(u.maxRequestTokens).getText();c.tokensPreEliding=Bo(u.tokenizer).tokenLength(d)}return t.ctx.get(Xl).addResolution(t.turn.id,c),c}s(S$,"determineResolution");function qFt(t){return t.turn.ignoredSkills.map(e=>({skillId:e.skillId,resolution:"ignored"}))}s(qFt,"handleIgnoredSkills");async function WFt(t,e,n){if(e!==RA&&e!==fh)return!0;let r=t.ctx.get(Dt),i=await r.updateExPValuesAndAssignments({languageId:n});return r.ideChatEnableProjectMetadata(i)?e===RA:e===fh}s(WFt,"includeSkill");var uGe=je(z0());var NT=class{static{s(this,"AbstractUserPromptStrategy")}async elidableContent(e,n){let r=[],i=KR(e.conversation.turns.slice(0,-1));i!==null&&r.push([i,.6]);let[o,a]=await this.elidableSkills(e,n);return o!==null&&(i!==null&&r.push(["",.1]),r.push([o,.8])),[new Bt(r),a]}async elidableSkills(e,n){return await cGe(e,n)}async promptContent(e,n,r){let i;e.turn.workspaceFolder&&(i=await iA.getInstructions(e.ctx,[e.turn.workspaceFolder],{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1}));let o=U0(e.conversation.getLastTurn().request.message),a;i?typeof o=="string"?a=i+`

`+o:a=[{type:"text",text:i},...o]:a=o;let[l,c]=await this.elidableContent(e,r);return[[{role:"system",content:n},{role:"user",content:l},{role:"system",content:this.suffix(e)},{role:"user",content:a}],c]}},R$=class extends NT{static{s(this,"PanelUserPromptStrategy")}suffix(e){return uGe.default` 
            Use the above information, including the additional context and conversation history (if available) to answer the user's question below.
            Prioritize the context given in the user's question.
            When generating code, think step-by-step. Briefly explain the code and then output it in a single code block.
            When fixing problems and errors, provide a brief description first.
            When generating classes, use a separate code block for each class.
            Keep your answers short and impersonal.
            Use Markdown formatting in your answers.
            Escape special Markdown characters (like *, ~, -, _, etc.) with a backslash or backticks when using them in your answers.
            You must enclose file names and paths in single backticks. Never use single or double quotes for file names or paths.
            Make sure to include the programming language name at the start of every code block.
            Avoid wrapping the whole response in triple backticks.
            Only use triple backticks codeblocks for code.
            Do not repeat the user's code excerpt when answering.
            Do not prefix your answer with "GitHub Copilot".
            Do not start your answer with a programming language name.
            Do not include follow up questions or suggestions for next turns.
            Respond in the following locale: ${e.conversation.userLanguage}.
        `.trim()}};var dGe=je(z0());var k$=class extends NT{static{s(this,"InlineUserPromptStrategy")}suffix(e){return dGe.default`
            Use the above information, including the additional context and conversation history (if available) to answer the user's question below.
            Prioritize the context given in the user's question.
            Keep your answers short and impersonal.
            Use Markdown formatting in your answers. 
            Escape special Markdown characters (like *, ~, -, _, etc.) with a backslash or backticks when using them in your answers.
            You must enclose file names and paths in single backticks. Never use single or double quotes for file names or paths.
            Make sure to include the programming language name at the start of every code block.
            Only use triple backticks codeblocks for code.
            Do not repeat the user's code excerpt when answering.
            Do not prefix your answer with "GitHub Copilot".
            Do not start your answer with a programming language name.
            Do not include follow up questions or suggestions for next turns.
            Respond in the following locale: ${e.conversation.userLanguage}.

            The user is editing an open file in their editor.
            The user's code is provided with line numbers prepended, for example: '1:code', starting at 1.
            The selected code line numbers are provided and are inclusive.

            If the user's question is about modifying the code in the editor, adhere to the following rules:

            To edit a range of the user's code, use the following format:
            - Generate a codeblock with the new code.
            - Prefix the codeblock with a markdown comment of the form <!-- replace lines start to end -->
            - Start and end are line numbers in the user's original code.
            - Start and end are inclusive.
            - Single line edits can be done by setting start and end to the same line number: <!-- replace lines X to X -->
            - The original code between the start and end will be replaced with the new code.
            - This format can be used to replace as well as add new code to the user's code.

            For example, to replace lines X to Y of the user's code, use the following format:
            <!-- replace lines X to Y -->
            \`\`\`language
            new code
            \`\`\`

            To delete a range of the user's code, use the following format:
            - Generate a codeblock with the original code.
            - Prefix the codeblock with a markdown comment of the form <!-- delete lines start to end -->
            - Start and end are line numbers in the user's original code.
            - Start and end are inclusive.
            - Single line deletions can be done by setting start and end to the same line number: <!-- delete lines X to X -->
            - The original code in the range will be deleted from the user's code.

            For example, to delete lines X to Y of the user's code, use the following format:
            <!-- delete lines X to Y -->
            \`\`\`language
            original code
            \`\`\`

            Remember:
            - Prefix comments must be placed directly above/after the code block respectively.
            - The first row of a codeblock must never be indented.
            - Code in codeblocks must not contain line numbers.
            - You must not return a codeblock containing the final code, but only individual codeblocks for each change.
        `.trim()}};f();var gpe=je(z0());var B$=class{static{s(this,"MetaPromptStrategy")}elidableContent(e){let n=KR(e.turns.slice(0,-1)),r=[];return n!==null&&r.push([n,.6]),new Bt(r)}suffix(e){if(e.promptType!=="meta")throw new Error("Invalid prompt options for strategy");if(!e.supportedSkillDescriptors)throw new Error("Supported skills must be provided for meta prompts");return this.buildMetaPrompt(e.supportedSkillDescriptors)}buildMetaPrompt(e){return gpe.default`
            Your task is to provide a helpful answer to the user's question.
            To help you create that answer, you can resolve skills that give you more context.
            Each skill has a description and some example user questions to help you understand when the skill may be useful. 
            
            List of available skills:
            ${e.map(n=>`${this.skillToPrompt(n)}
`).join(`
`)}
        `.trim()}createFunctionArgumentSchema(e){let n=FFe(e.map(r=>r.id));return I.Object({skillIds:I.Array(n,{description:"The skill ids to resolve ranked from most to least useful"})})}toolConfig(e){if(e.promptType!=="meta")throw new Error("Invalid prompt options for strategy");return{tool_choice:{type:"function",function:{name:"resolveSkills"}},tools:[{type:"function",function:{name:"resolveSkills",description:"Resolves the skills by id to help answer the user question.",parameters:this.createFunctionArgumentSchema(e.supportedSkillDescriptors)}}],extractArguments(n){return{skillIds:Zv(n).skillIds}}}}skillToPrompt(e){let n=e.description?e.description():e.id,r=`Skill Id: ${e.id}
Skill Description: ${n}`,i=e.examples?e.examples():[];return i.length>0&&(r+=`
Skill Examples:
${i.map(o=>`  - ${o}`).join(`
`)}`),r}promptContent(e,n,r){let i=e.conversation.getLastTurn().request.message,o=this.elidableContent(e.conversation);return[[{role:"system",content:n},{role:"user",content:o},{role:"system",content:this.suffix(r)},{role:"user",content:gpe.default`
                    This is the user's question: 
                    ${Vn(i).trim()} 
                `.trim()}],[]]}};f();var fGe=je(z0());var P$=class{static{s(this,"SuggestionsPromptStrategy")}toolConfig(){return{tool_choice:{type:"function",function:{name:"showSuggestions"}},tools:[{type:"function",function:{name:"showSuggestions",description:"Show the computed suggestions to the user",parameters:I.Object({suggestedTitle:I.String({description:"The suggested title for the conversation"}),followUp:I.String({description:"The suggested follow-up question for the conversation"})})}}],extractArguments(e){let n=Zv(e);return{suggestedTitle:n.suggestedTitle,followUp:n.followUp}}}}suffix(e){return fGe.default`
            Your task is to come up with two suggestions:

            1) Suggest a title for the current conversation based on the history of the conversation so far.
                - The title must be a short phrase that captures the essence of the conversation.
                - The title must be relevant to the conversation context.
                - The title must not be offensive or inappropriate.
                - The title must be in the following locale: ${e.conversation.userLanguage}.

            2) Write a short one-sentence question that the user can ask as a follow up to continue the current conversation.
                - The question must be phrased as a question asked by the user, not by Copilot.
                - The question must be relevant to the conversation context.
                - The question must not be offensive or inappropriate.
                - The question must not appear in the conversation history.
                - The question must not have already been answered.
                - The question must be in the following locale: ${e.conversation.userLanguage}.
        `.trim()}elidableContent(e){let n=KR(e.turns.slice()),r=[];return n!==null&&r.push([n,.6]),new Bt(r)}promptContent(e,n,r){return[[{role:"system",content:n},{role:"user",content:this.elidableContent(e.conversation)},{role:"system",content:this.suffix(e)}],[]]}};f();var HFt=[{type:"function",function:{name:"queryWithKeywords",description:"Searches the workspace for synonyms and relevant keywords related to the original user query. These keywords could be used as file names, symbol names, abbreviations, or comments in the relevant code.",parameters:I.Object({keywords:I.Array(I.Object({keyword:I.String({description:"A keyword or phrase relevant to the original user query that a user could search to answer their question. Keywords are not generic and do not repeat."}),variations:I.Array(I.String(),{description:"An array of relevant variations of the keyword. Variations include synonyms and plural forms. Variations are not generic and do not repeat."})}))})}}],D$=class extends NT{static{s(this,"UserQuerySynonymsPromptStrategy")}suffix(){return`
You are a coding assistant that helps developers find relevant code in their workspace by providing a list of relevant keywords they can search for.
The user will provide you with potentially relevant information from the workspace. This information may be incomplete.

# Additional Rules

Think step by step:
1. Read the user's question to understand what they are asking about their workspace.
2. If there are pronouns in the question, such as 'it', 'that', 'this', try to understand what they refer to by looking at the rest of the question and the conversation history.
3. Output a list of up to 8 relevant keywords that the user could search to answer their question. These keywords could be used as file names, symbol names, abbreviations, or comments in the relevant code. Put the keywords most relevant to the question first. Do not include overly generic keywords. Do not repeat keywords.
4. For each keyword in the list of relevant keywords, output a list of relevant variations of the keyword if applicable. Consider synonyms and plural forms. Do not include overly generic variations. Do not repeat variations.

# Example

User: Where is the code for base64 encoding?

Response:

queryWithKeywords([
    { "keyword": "base64 encoding", "variations": ["base64 encoder", "base64 encode"] },
    { "keyword": "base64", "variations": ["base 64"] },
    { "keyword": "encode", "variations": ["encoding", "encoded", "encoder", "encoders"] }
]);
`.trim()}promptContent(e,n,r){if(r.promptType!=="synonyms")throw new Error("Invalid prompt options for user query strategy");let i=U0(e.conversation.getLastTurn().request.message),o=[{role:"system",content:n},{role:"system",content:this.suffix()},{role:"user",content:i}];return Promise.resolve([o,[]])}toolConfig(e){if(e.promptType!=="synonyms")throw new Error("Invalid prompt options for user query strategy");return{tools:HFt,tool_choice:{type:"function",function:{name:"queryWithKeywords"}},extractArguments(n){let r=Zv(n).keywords;if(!r||!Array.isArray(r))return{keywords:[]};let i=new Set;for(let o of r)if(!(!cU(o,"keyword")||!o.keyword||typeof o.keyword!="string")&&(i.add(o.keyword.toLowerCase()),!(!cU(o,"variations")||!o.variations||!Array.isArray(o.variations))))for(let a of o.variations)typeof a=="string"&&i.add(a.toLowerCase());return{keywords:Array.from(i)??[]}}}}};var Ape=class{constructor(e,n,r){this.promptType=e;this.strategy=r;this.modelFamilies=Array.isArray(n)?n:[n]}static{s(this,"PromptStrategyDescriptor")}};function d6(t,e,n){return new Ape(t,e,n)}s(d6,"descriptor");var pGe=[d6("user",Df("user"),()=>new R$),d6("inline",Df("inline"),()=>new k$),d6("meta",Df("meta"),()=>new B$),d6("suggestions",Df("suggestions"),()=>new P$),d6("synonyms",Df("synonyms"),()=>new D$)],N$=class{static{s(this,"DefaultPromptStrategyFactory")}async createPromptStrategy(e,n,r){let i=pGe.find(o=>o.promptType===n&&o.modelFamilies.includes(r));if(!i)throw new Error(`No prompt strategy found for promptType: ${n} and modelFamily: ${r}`);return i.strategy(e)}get descriptors(){return pGe}};var hGe=require("console");var wc=class{constructor(e,n=new N$){this.ctx=e;this.promptStrategyFactory=n}static{s(this,"ConversationPromptEngine")}async toPrompt(e,n){let r=await this.promptStrategyFactory.createPromptStrategy(this.ctx,n.promptType,n.modelConfiguration.modelFamily),i=await this.ctx.get(_r).getSession(),[o,a]=await r.promptContent(e,this.safetyPrompt(n.userSelectedModelName??n.modelConfiguration.uiName,i),n),[l,c]=this.elideChatMessages(o,n.modelConfiguration);return await this.ctx.get(sl).inspectPrompt({type:n.promptType,prompt:mGe(l),tokens:c}),this.ctx.get(Xl).addPrompt(e.turn.id,mGe(l),n.promptType),{messages:l,tokens:c,skillResolutions:a,toolConfig:r.toolConfig?.(n)}}elideChatMessages(e,n){let r=e.filter(l=>!(typeof l.content=="string"||Array.isArray(l.content)));(0,hGe.assert)(r.length==1,"Only one elidable message is supported right now.");let i=this.computeNonElidableTokens(e,n),o=n.maxRequestTokens-i,a=e.map(l=>typeof l.content=="string"||Array.isArray(l.content)?l:{role:l.role,content:GFt(l.content.elide(o).getText())}).filter(l=>l.content.length>0);return[a,ipe(a,n)]}computeNonElidableTokens(e,n){let r=e.filter(i=>typeof i.content=="string");return r.push({role:"user",content:""}),ipe(r,n)}safetyPrompt(e,n){let r=this.ctx.get(ur).getEditorInfo().readableName??this.ctx.get(ur).getEditorInfo().name,i=jFt(process.platform);return eGe(this.ctx,r,n?.login,i,e)}};function GFt(t){return t.trimStart().replace(/^\[\.\.\.\]\n?/,"")}s(GFt,"processResultOfElidableText");function mGe(t){return t.map(e=>Vn(e.content)).join(`

`)}s(mGe,"debugChatMessages");function jFt(t){switch(t){case"darwin":return"macOS";case"win32":return"Windows";case"linux":return"Linux";case"freebsd":return"FreeBSD";case"openbsd":return"OpenBSD";case"sunos":return"SunOS";case"aix":return"AIX";default:return}}s(jFt,"mapPlatformToOs");var JR=class{constructor(e,n){this.ctx=e;this.chatFetcher=n}static{s(this,"TurnSuggestions")}async fetchRawSuggestions(e,n,r,i){let o=await xo.getModelConfiguration(e.ctx,"suggestions",void 0,{tool_calls:!0}),a={promptType:"suggestions",modelConfiguration:o},l=await this.ctx.get(wc).toPrompt(e,a),c=i.extendedBy({messageSource:"chat.suggestions"},{promptTokenLen:l.tokens}),u={modelConfiguration:o,messages:l.messages,uiKind:r,llmInteraction:e.toLlmInteraction()};if(l.toolConfig===void 0)throw new Error("No tool call configuration found in suggestions prompt.");u.tool_choice=l.toolConfig.tool_choice,u.tools=l.toolConfig.tools;let d=await this.chatFetcher.fetchResponse(u,n,c);if(d.type!=="success"&&(Ln.error(this.ctx,"Failed to fetch suggestions, trying again..."),d=await this.chatFetcher.fetchResponse(u,n,c)),d.type==="success"){if(!d.toolCalls||d.toolCalls.length===0){Ln.error(this.ctx,"Missing tool call in suggestions response");return}let p=d.toolCalls[0],{followUp:m,suggestedTitle:h}=l.toolConfig.extractArguments(p);if(!m||!h){Ln.error(this.ctx,"Missing follow-up or suggested title in suggestions response");return}return{followUp:m.trim(),suggestedTitle:h.trim(),promptTokenLen:l.tokens,numTokens:d.numTokens+p.approxNumTokens}}else if(d.type==="successMultiple"){Ln.error(this.ctx,"successMultiple response is unexpected for suggestions");return}else if(d.type==="tool_calls"){Ln.error(this.ctx,"tool_calls response is unexpected for suggestions");return}else{Ln.error(this.ctx,`Failed to fetch suggestions due to reason: ${d.reason}`);return}}};var XR=class{constructor(e,n,r){this.turnContext=e;this.chatFetcher=n;this.computeSuggestions=r}static{s(this,"ChatFetchResultPostProcessor")}async postProcess(e,n,r,i,o,a,l,c){switch(m4e(this.turnContext.ctx,l,a,e.type=="offTopic",e.requestId,c,o.extendedBy({},{fileCount:this.turnContext.ctx.get(ga).workspaceCount})),await this.turnContext.ctx.get(sl).inspectFetchResult(e),e.type){case"success":return await this.processSuccessfulFetchResult(r,e.numTokens,e.requestId,n,l,i,o,c);case"offTopic":return this.processOffTopicFetchResult(o,l,c);case"canceled":return this.turnContext.turn.status="cancelled",this.turnContext.turn.response={message:"Cancelled",type:"user"},{error:{message:Vn(this.turnContext.turn.response?.message??""),type:this.turnContext.turn.response?.type}};case"failed":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:e.reason,type:"server"},{error:{message:nb.translateErrorMessage(e.code,e.reason),code:e.code}};case"filtered":return this.turnContext.turn.status="filtered",{error:{message:"Oops, your response got filtered. Vote down if you think this shouldn't have happened.",responseIsFiltered:!0}};case"length":return this.turnContext.turn.status="error",{error:{message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0}};case"agentAuthRequired":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Authorization required",type:"server"},{error:{message:"Authorization required",responseIsFiltered:!1}};case"no_choices":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"No choices returned",type:"server"},{error:{message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0}};case"no_finish_reason":return this.turnContext.turn.status="error",r&&r.length>0?this.turnContext.turn.response={message:r,type:"model",references:this.turnContext.turn.response?.references}:this.turnContext.turn.response={message:"No finish reason",type:"server"},{error:{message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0}};case"model_not_supported":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Model not supported",type:"server"},{error:{message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1}};case"model_max_prompt_tokens_exceeded":return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Model max prompt tokens exceeded",type:"server"},{error:{message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",code:400,reason:"model_max_prompt_tokens_exceeded",responseIsFiltered:!1}};case"successMultiple":case"tool_calls":case"unknown":return this.turnContext.turn.status="error",{error:{message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1}}}}async processSuccessfulFetchResult(e,n,r,i,o,a,l,c){if(e&&e.length>0){a.markAsDisplayed(),l.markAsDisplayed(),this.turnContext.turn.status="success",this.turnContext.turn.response={message:e,type:"model",references:this.turnContext.turn.response?.references},h4e(this.turnContext.ctx,this.turnContext.conversation,o,e,n,r,c,l);let u=this.computeSuggestions?await this.fetchSuggestions(i,o,a,c):void 0;if(u){let{followUp:d,suggestedTitle:p}=u;return{followup:d.message!==""?d:void 0,suggestedTitle:p!==""?p:void 0}}return{}}return this.turnContext.turn.status="error",this.turnContext.turn.response={message:"The model returned successful but did not contain any response text.",type:"meta"},{error:{message:Vn(this.turnContext.turn.response?.message??""),type:this.turnContext.turn.response?.type}}}async fetchSuggestions(e,n,r,i){let a=await new JR(this.turnContext.ctx,this.chatFetcher).fetchRawSuggestions(this.turnContext,e,n,r);if(a===void 0)return;let l=this.enrichFollowup(a,n,r,i);return Ln.debug(this.turnContext.ctx,"Computed followup",l),Ln.debug(this.turnContext.ctx,"Computed suggested title",a.suggestedTitle),{followUp:l,suggestedTitle:a.suggestedTitle}}enrichFollowup(e,n,r,i){let o=r.extendedBy({messageSource:"chat.suggestions",suggestionId:an(),suggestion:"Follow-up from model"},{promptTokenLen:e.promptTokenLen,numTokens:e.numTokens});return x4e(this.turnContext.ctx,n,o,i),{message:e.followUp,id:o.properties.suggestionId,type:o.properties.suggestion}}processOffTopicFetchResult(e,n,r){let i="Sorry, but I can only assist with programming related questions.";return this.turnContext.turn.response={message:i,type:"offtopic-detection"},this.turnContext.turn.status="off-topic",g4e(this.turnContext.ctx,this.turnContext.conversation,n,i,e.properties.messageId,r,e),{error:{message:i,responseIsFiltered:!0}}}};f();var L$=I.Union([I.String(),I.Number()]),LT=I.Union([I.String(),I.Number()]),VFt=I.Union([I.Literal("included"),I.Literal("blocked"),I.Literal("notfound"),I.Literal("empty")]),F$=I.Object({uri:I.String(),position:I.Optional(Ll)}),f6=I.Object({type:I.Literal("file"),uri:I.String(),visibleRange:I.Optional(_a),selection:I.Optional(_a),status:I.Optional(VFt),range:I.Optional(_a)}),$Ft=I.Object({type:I.Literal("directory"),uri:I.String()}),ZR=I.Union([f6,$Ft,AWe]),_p=I.Union([I.Literal("panel"),I.Literal("inline")]),zFt=I.Union([I.Object({type:I.Literal("text"),text:I.String()}),I.Object({type:I.Literal("image_url"),imageUrl:I.Object({url:I.String(),detail:I.Optional(I.Union([I.Literal("low"),I.Literal("high")]))})})]),ype=I.Union([I.String(),I.Array(zFt)]),gGe=I.Object({request:ype,response:I.Optional(I.String()),agentSlug:I.Optional(I.String()),turnId:I.Optional(LT)});function M$(t){return typeof t=="string"?t:t.map(e=>e.type==="image_url"?{type:"image_url",image_url:{url:e.imageUrl.url,detail:e.imageUrl.detail}}:{type:"text",text:e.text})}s(M$,"convertToMessageContent");function Q$(t,e){if(t=U0(t),typeof t=="string")return t+e;let n=t.map(r=>r.type==="text").lastIndexOf(!0);if(n>=0){let r=[...t],i=r[n];return r[n]={type:"text",text:i.text+e},r}return[...t,{type:"text",text:e}]}s(Q$,"appendToMessage");var O$=I.Union([I.Literal("Ask"),I.Literal("Agent")]),YFt=I.Object({type:I.String(),description:I.String()}),AGe=I.Object({name:I.String(),description:I.String(),inputSchema:I.Optional(I.Object({type:I.String(),properties:I.Record(I.String(),YFt),required:I.Array(I.String())})),confirmationMessages:I.Optional(I.Object({title:I.String(),message:I.String()}))}),U$=I.Object({uri:I.String(),name:I.String()});var Cpe="generate-response",q$=class extends Error{constructor(n,r,i,o){super(n);this.authorizationUri=r;this.agentSlug=i;this.agentName=o}static{s(this,"RemoteAgentAuthorizationError")}},p6=class{constructor(e,n,r){this.agent=e;this.turnContext=n;this.chatFetcher=r;this.conversationProgress=n.ctx.get(ws),this.chatFetcher=this.chatFetcher??new ta(n.ctx),this.postProcessor=new XR(n,this.chatFetcher,!1),this.conversation=n.conversation,this.turn=n.turn}static{s(this,"RemoteAgentTurnProcessor")}async process(e,n,r,i){try{await this.processWithAgent(e,n,this.turnContext,i)}catch(o){Ln.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,o);let a=o instanceof Error?o.message:String(o);this.turn.status="error",this.turn.response={message:a,type:"meta"},o instanceof q$?await this.endProgress({unauthorized:{authorizationUri:o.authorizationUri,agentSlug:o.agentSlug,agentName:o.agentName}}):await this.endProgress({error:{message:a,responseIsIncomplete:!0}})}}async processWithAgent(e,n,r,i){await this.conversationProgress.begin(this.conversation,this.turn,e);let o=await ml(this.turnContext.ctx,this.turnContext,{languageId:i?.detectedLanguageId??""});if(n.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let a=await this.buildAgentPrompt(r);if(!a)await this.endTurnWithResponse(`No prompt created for agent ${this.agent.id}`,"error");else{let l={type:"user",prompt:JSON.stringify(a.messages,null,2),tokens:a.tokens};await r.ctx.get(sl).inspectPrompt(l),await r.steps.start(Cpe,"Generating response");let c=this.augmentTelemetry(a,o,this.turn.template,i);if(n.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let u=await this.fetchConversationResponse(r,a.messages,n,o.extendedBy({messageSource:"chat.user"},{promptTokenLen:a.tokens}),c,i);this.turn.status==="cancelled"&&this.turn.response?.type==="user"?await this.cancelProgress():(await this.finishGenerateResponseStep(u,r),await this.endProgress({error:u.error,followUp:u.followup,suggestedTitle:u.suggestedTitle,skillResolutions:a.skillResolutions}))}}async buildAgentPrompt(e){let n=this.createMessagesFromHistory(e),r=await this.computeCopilotReferences(e),i=this.getOrCreateAgentSessionId(e);return this.turn.agent&&(this.turn.agent.sessionId=i),this.turn.confirmationResponse?this.addConfirmationResponse(this.turn.confirmationResponse,n):n.push({role:"user",content:U0(e.turn.request.message),copilot_references:r.length>0?r:void 0}),{messages:n,tokens:-1,skillResolutions:[]}}getOrCreateAgentSessionId(e){let n=this.turn.agent?.agentSlug;if(n){for(let r of e.conversation.turns)if(r.agent?.agentSlug===n&&r.agent.sessionId)return r.agent.sessionId}return an()}addConfirmationResponse(e,n){n.push({role:"user",content:"",copilot_confirmations:[e]})}createMessagesFromHistory(e){return ope(e.conversation.turns.slice(0,-1),this.agent.slug).flatMap(n=>{let r=[];if(n.request&&r.push({role:"user",content:U0(n.request.message)}),n.response&&n.response.type==="model"){let i=gWe(n.response.references);r.push({role:"assistant",content:U0(n.response.message),copilot_references:i.length>0?i:void 0})}return r})}async computeCopilotReferences(e){return await TWe(e)}async endTurnWithResponse(e,n){this.turn.response={type:"meta",message:e},this.turn.status=n,await this.conversationProgress.report(this.conversation,this.turn,{reply:e}),await this.endProgress()}async fetchConversationResponse(e,n,r,i,o,a){r.onCancellationRequested(async()=>{await this.cancelProgress()});let l=new Rb((p,m,h,g,y)=>{let v=y?{...y,agentSlug:this.agent.slug}:void 0;this.conversationProgress.report(this.conversation,this.turn,{reply:p,annotations:m,references:h,notifications:g.map(b=>({message:b.message,severity:"warning"})),confirmationRequest:v}),this.turn.response?(this.turn.response.message=Q$(this.turn.response.message,p),this.turn.response.references.push(...h)):this.turn.response={message:p,type:"model",references:h},this.turn.annotations.push(...m??[]),v&&(this.turn.confirmationRequest=v)}),c=await this.turnContext.ctx.get(Gn).getGitHubSession(),u={engineName:"agents",endpoint:this.agent.endpoint??this.agent.slug,messages:n,uiKind:"conversationPanel",intentParams:{intent:!0,intent_threshold:.7,intent_content:Vn(this.turn.request.message)},authToken:c?.accessToken,copilot_thread_id:this.turn.agent?.sessionId,llmInteraction:e.toLlmInteraction()},d=await this.chatFetcher.fetchResponse(u,r,i,(p,m)=>l.isFinishedAfter(p,m));return this.ensureAgentIsAuthorized(d),await this.postProcessor.postProcess(d,r,l.appliedText,i,o.extendedBy(this.addExtensibilityInfoTelemetry()),Vn(this.turn.request.message),"conversationPanel",a)}ensureAgentIsAuthorized(e){if(e.type==="agentAuthRequired")throw this.turnContext.turn.status="error",this.turnContext.turn.response={message:"Authorization required",type:"server"},new q$("Authorization required",e.authUrl,this.agent.slug,this.agent.name)}augmentTelemetry(e,n,r,i){return sP(this.conversation,"conversationPanel",Vn(this.turn.request.message).length,e.tokens,r?.templateId,void 0,n,e.skillResolutions)}addExtensibilityInfoTelemetry(){return{extensibilityInfoJson:JSON.stringify({agent:this.agent.slug,outgoingReferences:this.turn.request.references?.map(e=>e.type)??[],incomingReferences:this.turn.response?.references?.map(e=>e.type)??[]})}}async finishGenerateResponseStep(e,n){e.error?await n.steps.error(Cpe,e.error.message):await n.steps.finish(Cpe)}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};var m6=class{constructor(e,n,r,i,o,a){this.id=e;this.slug=n;this.name=r;this.description=i;this.avatarUrl=o;this.endpoint=a}static{s(this,"RemoteAgent")}additionalSkills(){return[]}turnProcessor(e){return new p6(this,e)}},W$=class extends m6{static{s(this,"ExtensibilityPlatformAgent")}constructor(){super(0,"github","GitHub","Get answers grounded in web search, code search, and your enterprise's knowledge bases.","https://avatars.githubusercontent.com/u/9919?s=200&v=4","chat")}turnProcessor(e){return new p6(this,e)}};f();var KFt="github",mh=class{static{s(this,"RemoteAgentRegistry")}},H$=class extends mh{constructor(n){super();this.ctx=n;this._agents=void 0;this._lastFetchTime=0}static{s(this,"CapiRemoteAgentRegistry")}async agents(){return this.shouldRefreshAgents()&&(this._agents=await this.fetchAgents()),this._agents!=null?this._agents.slice():[]}shouldRefreshAgents(){return!this._agents||!this._lastFetchTime?!0:this.isLastFetchOlderOneHour()}isLastFetchOlderOneHour(){return Date.now()-this._lastFetchTime>36e5}async fetchAgents(){let n=await TI(this.ctx,"/agents");return n.ok?(this._lastFetchTime=Date.now(),this.parseAgents(await n.text())):(or.error(this.ctx,"Failed to fetch agents from CAPI",{status:n.status,statusText:n.statusText}),[])}parseAgents(n){let r;try{r=JSON.parse(n).agents,Array.isArray(r)||or.error(this.ctx,"Expected 'agents' to be an array")}catch(i){return n.includes("access denied")||or.warn(this.ctx,"Invalid remote agent response:",n,i),[]}return r.filter(i=>i.slug!==KFt).map(i=>new m6(i.id,i.slug,i.name,i.description,i.avatar_url))}};var xpe=class{constructor(){this.slug="project";this.name="Project";this.description="Ask about your project"}static{s(this,"ProjectAgent")}additionalSkills(){return[jR]}};async function _A(t){let e=[];return e.push(new W$),e.push(...await t.get(mh).agents()),e.push(new xpe),e}s(_A,"getAgents");var JFt=I.Object({});async function XFt(t,e,n){return[(await _A(t)).map(o=>({slug:o.slug,name:o.name,description:o.description,avatarUrl:o.avatarUrl})),null]}s(XFt,"handleConversationAgentsChecked");var yGe=ot(JFt,XFt);f();f();var h6=je(Za());function ZFt(t,e,n){let r=ir.createAndMarkAsIssued({languageId:String(e.detectedLanguageId),requestedDocumentVersion:String(n),actualDocumentVersion:String(e.version)});return kt(t,"getCompletions.docVersionMismatch",r)}s(ZFt,"telemetryVersionMismatch");async function hh(t,e,n){let i=t.get(Nn).getTextDocumentUnsafe(e);if(!i)throw new h6.ResponseError(er.InvalidParams,`Document for URI could not be found: ${e.uri}`);let o=await U1(t,e,i.getText());if(o.status==="invalid")throw t.get(Ji).setInactive(o.reason),new h6.ResponseError(er.CopilotNotAvailable,o.reason);if(e.version!==void 0&&i.version!==e.version)throw n?.isCancellationRequested||(ZFt(t,i,e.version),_c.debug(t,`Requested document version was ${e.version} but actual document version was ${i.version}.`)),new h6.ResponseError(er.ContentModified,"Document Version Mismatch");return i}s(hh,"getTextDocument");async function kA(t,e,n){let r=e.textDocument??e.doc;if(r)try{return await hh(t,r,n)}catch(i){if(i instanceof h6.ResponseError&&i.code===er.CopilotNotAvailable)return;throw i}}s(kA,"getTextDocumentIfAvailable");var eMt=I.Union([I.Literal("keyboard"),I.Literal("toolbar")]),tMt=I.Object({turnId:LT,codeBlockIndex:I.Number(),source:eMt,copiedCharacters:I.Number(),totalCharacters:I.Number(),copiedText:I.String(),doc:I.Optional(F$),textDocument:I.Optional(pd),position:I.Optional(Ll),conversationSource:I.Optional(_p)});async function nMt(t,e,n){let r=await kA(t,n,e),i={totalCharacters:n.totalCharacters,copiedCharacters:n.copiedCharacters},o=n.position??n.doc?.position;r&&o&&(i={...i,currentLine:o.line});let a=pv(n.conversationSource),l=await ml(t,t.get(ki).findByTurnId(n.turnId),{languageId:r?.detectedLanguageId??""});return Pu(t,r,{codeBlockIndex:n.codeBlockIndex.toString(),source:n.source,uiKind:a},i,`${Ac(a)}.acceptedCopy`,l),["OK",null]}s(nMt,"handleConversationCodeCopyChecked");var CGe=ot(tMt,nMt);f();var rMt=I.Union([I.Literal("keyboard"),I.Literal("toolbar"),I.Literal("diff")]),iMt=I.Object({turnId:LT,source:rMt,codeBlockIndex:I.Number(),acceptedLength:I.Optional(I.Number()),totalCharacters:I.Number(),newFile:I.Optional(I.Boolean()),doc:I.Optional(F$),textDocument:I.Optional(pd),position:I.Optional(Ll),conversationSource:I.Optional(_p)});async function oMt(t,e,n){let r=await kA(t,n,e),i={totalCharacters:n.totalCharacters,acceptedLength:n.acceptedLength??n.totalCharacters},o=n.position??n.doc?.position;r&&o&&(i={...i,insertionOffset:r.offsetAt(o),currentLine:o.line});let a=pv(n.conversationSource),l=await ml(t,t.get(ki).findByTurnId(n.turnId),{languageId:r?.detectedLanguageId??""});return Pu(t,r,{codeBlockIndex:n.codeBlockIndex.toString(),source:n.source,uiKind:a,compType:n.acceptedLength&&n.acceptedLength<n.totalCharacters?"partial":"full"},i,`${Ac(a)}.acceptedInsert`,l),["OK",null]}s(oMt,"handleConversationCodeInsertChecked");var xGe=ot(iMt,oMt);f();f();var G$=I.Array(_a);function j$(t){if(t.textDocument?.uri)return{uri:t.textDocument.uri,selection:t.selection,visibleRange:t.visibleRanges?.[0]}}s(j$,"resolveAsActiveEditor");f();var vGe=je(Za());var V$=new vGe.ProgressType,vpe=class{constructor(e){this.progressToken=e}static{s(this,"WorkDoneProgressHandler")}async begin(e,n,r){await e.get(Cn).connection.sendProgress(V$,this.progressToken,{kind:"begin",title:`Conversation ${n.id} Turn ${r.id}`,conversationId:n.id,turnId:r.id,agentSlug:r.agent?.agentSlug})}async report(e,n,r,i){await e.get(Cn).connection.sendProgress(V$,this.progressToken,{kind:"report",conversationId:n.id,turnId:r.id,...i})}async end(e,n,r,i){await e.get(Cn).connection.sendProgress(V$,this.progressToken,{kind:"end",conversationId:n.id,turnId:r.id,...i})}async cancel(e,n,r,i){await e.get(Cn).connection.sendProgress(V$,this.progressToken,{kind:"end",conversationId:n.id,turnId:r.id,cancellationReason:"CancelledByUser",error:i})}};function e3(t){return new vpe(t.workDoneToken)}s(e3,"createProgressHandler");f();f();f();var Sc=class extends Error{constructor(n){super(n.message);this.conversationError=n;this.name="AgentConversationError"}static{s(this,"AgentConversationError")}};f();var Oy=class extends Error{static{s(this,"ToolCallCanceledError")}constructor(e){super(e),this.name="Canceled"}};f();var t3=class extends Error{static{s(this,"ToolRoundExceedError")}constructor(){super('Oops, maximum tool attempts reached. You can type "continue" to proceed or rephrase your request.'),this.name="ToolRoundExceedError"}};f();f();var bGe="```",g6=String.raw`<!-- (?<mode>[\w-]+) lines? (?<start>\d+)(?: to (?<end>\d+))? -->`,sMt=String.raw`${bGe}[\w]*?\n(?<codeblock>[\s\S]*?)\n${bGe}`,aMt=new RegExp(g6+`
`+sMt,"gs"),bpe=["replace","delete"];function Epe(t,e){let n=t.matchAll(aMt),r=Array.from(n),i=[];for(let o of r){let a=o.groups;if(!a||!bpe.includes(a.mode))continue;let l=a.start?parseInt(a.start)-1:-1,c=a.end?parseInt(a.end)-1:l,d=a.codeblock.split(`
`),p=d[0].match(/^\s*/)?.[0]??"";d.forEach((y,v)=>{d[v]=y.slice(p.length)});let m={mode:a.mode,codeblock:d.join(`
`),start:l,end:c},h=Ipe([m],e);if(!h)continue;let g={text:h,uri:e.uri};i.push({...m,updatedDocument:g})}return i}s(Epe,"extractEditsFromTaggedCodeblocks");function Ipe(t,e){if(t.length===0)return;t.sort((r,i)=>r.start!==i.start?i.start-r.start:i.end-r.end);let n=e.getText().split(`
`);for(let r of t){let i=r.start,o=r.end,a=r.mode,l=r.codeblock.split(`
`);if(!(i<0||o<0||o<i)&&!(i>=n.length||o>=n.length)){if(a==="delete")n.splice(i,o-i+1);else if(a==="replace"){let c=n[i].match(/^\s*/)?.[0]??"";l.forEach((u,d)=>{l[d]=c+u}),n.splice(i,o-i+1,...l)}}}return n.join(`
`)}s(Ipe,"applyEditsToDocument");f();f();f();f();var Uy=class{constructor(e,n,r=[]){this.textDocumentResult=e;this.range=n;this.descriptions=r;this.descriptions=r}static{s(this,"FileAttachment")}render(){if(this.textDocumentResult.status!=="valid")return[];let e=this.textDocumentResult.document,n=new q0({code:e.getText(this.range),languageId:e.detectedLanguageId,uri:e.uri}),r=["<attachment>"];return r.push(...this.descriptions),r.push(...n.renderAsArray()),r.push("</attachment>"),r}};var lMt=new Tt("activeEditorPrompt");async function EGe(t,e){let n=[],r=t.turnContext.turn.request.activeEditor;if(r){if(e.isCancellationRequested)throw new Na;let i=await t.textDocumentProvider.getByUri(r.uri);if(i.status==="valid")if(r.selection&&cMt(r.selection)){let o=new Uy(i,r.selection,["User's active selection, this should be the main focus:",`Excerpt from ${Ti(r.uri)}, lines ${r.selection.start.line+1} to ${r.selection.end.line+1}:`]);n.push(...o.render());let a=new Uy(i,void 0,["User's active file for additional context:"]);n.push(...a.render())}else if(r.visibleRange){let o=new Uy(i,r.visibleRange,["User's current visible code:",`Excerpt from ${Ti(r.uri)}, lines ${r.visibleRange.start.line+1} to ${r.visibleRange.end.line+1}:`]);n.push(...o.render())}else{let o=new Uy(i,void 0,["User's active file for additional context:"]);n.push(...o.render())}else lMt.warn(t.context,`Failed to read file in active editor ${r.uri} with status ${i.status} and reason ${i.status==="notfound"?i.message:i.reason}`)}return n}s(EGe,"processActiveEditor");function cMt(t){return t.start.line!==t.end.line||t.start.character!==t.end.character}s(cMt,"notEmptySelection");f();f();function IGe(t){return t.reduce((n,r)=>n+r.value.length,0)+Math.max(0,t.length-1)}s(IGe,"partsLength");async function wGe(t,e=1/0,n){let r=TGe(0,t,e),i=e-IGe(r);for(;;){let o=!1,a=[];for(let l of r)if(l.type==="text")a.push(l);else if(l.type==="dir"){a.push({type:"text",uri:l.uri,value:l.value});let c=await l.getChildren();if(n?.isCancellationRequested)return uMt();let u=TGe(l.level+1,c,i-1);u.length&&(o=!0,i-=IGe(u)+1,a.push(...u))}if(r=a,!o)break}return{files:r.map(o=>o.uri).filter(o=>o!==void 0),tree:r.map(o=>o.value).join(`
`)}}s(wGe,"visualFileTree");function TGe(t,e,n){let r="	".repeat(t),i=[],o=n;for(let a=0;a<e.length;++a){let l=e[a],c=r+l.name+(l.type===2?"/":"");if(c.length>o){let u=r+"...";for(;u.length>o&&i.length>0;)o+=i.pop().value.length+1;u.length<=o&&i.push({type:"text",uri:void 0,value:u});break}l.type===2?i.push({type:"dir",uri:l.uri,level:t,value:c,getChildren:l.getChildren}):i.push({type:"text",uri:l.uri,value:c}),o-=c.length,a!==e.length-1&&(o-=1)}return i}s(TGe,"toParts");var uMt=s(()=>({tree:"",files:[]}),"emptyTree");var dMt=new Tt("fileReferencesPrompt");async function _Ge(t,e,n,r){let i=await SGe(t,e,n,r);if(!i.length)return"";let o;if(i.length===1)o=i[0].tree.tree;else{o="";for(let{label:l,tree:c}of i){o+=`${l}/
`;for(let u of c.tree.split(`
`))o+=`	${u}
`}}let a=eR(o);return["I am working in a workspace that has the following structure:",a,o,a,"This view of the workspace structure may be truncated. You can use tools to collect more context if needed."].join(`
`)}s(_Ge,"generateWorkspaceStructurePrompt");async function SGe(t,e,n,r){return e.length?Promise.all(e.map(async i=>{let o=i.name,a=i.uri,l=await wGe(await RGe(t,i.uri,n,r),n.maxLength/e.length,r);return{label:o,uri:a,tree:l}})):[]}s(SGe,"generateWorkspaceStructure");async function RGe(t,e,n,r){if(r.isCancellationRequested)return[];let i;try{i=await t.get(po).readDirectory(e)}catch{return[]}return r.isCancellationRequested?[]:(i.sort((o,a)=>o[1]===a[1]?o[0].localeCompare(a[0]):o[1]&2?1:-1),Promise.all(i.map(([o,a])=>{let l=ko(e,o);return n.excludeDotFiles&&o.startsWith(".")||mMt(l)?null:a&2?{type:2,uri:l,name:o,getChildren:s(()=>RGe(t,l,n,r),"getChildren")}:{type:1,uri:l,name:o}})).then(o=>o.filter(a=>a!=null)))}s(RGe,"buildFileList");var fMt=["node_modules","venv","out","dist",".git",".yarn",".npm",".venv","foo.asar",".vscode-test"],pMt=[".ds_store","thumbs.db","package-lock.json","yarn.lock",".cache"];function mMt(t){return!!(pMt.includes(Ti(t).toLowerCase())||Ho(t)?.toLowerCase()?.split(/[/\\]/g)?.some(n=>fMt.includes(n)))}s(mMt,"shouldAlwaysIgnoreFile");async function $$(t,e,n){if(n.length===0)return[];try{let r=n.map(a=>({uri:a.uri,name:Ti(a.uri)})),i=await SGe(t,r,{maxLength:2e3,excludeDotFiles:!0},e),o=[];for(let{label:a,uri:l,tree:c}of i)o.push("<attachment>"),o.push(`Directory: ${a} (${aa(l)})`),o.push(c.tree),o.push("</attachment>");return o}catch(r){return dMt.warn(t,`Failed to generate directory structure: ${String(r)}`),[]}}s($$,"processDirectoryReferences");var hMt=new Tt("fileReferencesPrompt");async function kGe(t,e){let n=t.turnContext.turn.request.references?.filter(p=>p.type==="file")||[],r=t.turnContext.turn.request.references?.filter(p=>p.type==="directory")||[],i=["png","jpg","jpeg","bmp","gif","tiff","tif","webp"],o=n.filter(p=>{let m=p.uri.toLowerCase();return!i.some(h=>m.endsWith(`.${h}`))});if(o.length===0&&r.length===0&&!t.turnContext.turn.request.activeEditor)return[];let[a,l,c]=await Promise.all([Promise.all(o.map(async p=>{if(e.isCancellationRequested)throw new Na;let m=[],h=await t.textDocumentProvider.getByUri(p.uri);if(h.status==="valid"){let g=new Uy(h,void 0,[]);g&&m.push(...g.render())}else hMt.warn(t.context,`Failed to read file ${p.uri} with status ${h.status} and reason ${h.status==="notfound"?h.message:h.reason}`);return m})),EGe(t,e),$$(t.context,e,r)]),u=a.flat(),d=c||[];return u.length>0||l.length>0||d.length>0?["<attachments>",...u,...l,...d,"</attachments>"]:[]}s(kGe,"processFileReferences");var BGe=new Tt("editAgentPrompt"),z$=class{constructor(e,n){this._toolsService=e;this.props=n;this.ctx=n.turnContext.ctx,this.turnContext=n.turnContext,this.currentTurn=n.turnContext.turn}static{s(this,"EditAgentPrompt")}async render(e){let n=this.turnContext.conversation.turns.slice(0,-1),r=this.createChatMessagesFromHistory(n),i=tue(this.currentTurn.response?.message,!0),o=await iA.appendToUserMessage(this.ctx,this.props.workspaceFolders,Vn(this.props.userRawMessage),{includeCodeGenerationInstructions:!0,includeCommitMessageGenerationInstructions:!1}),a=[{role:"system",content:this.buildSystemMessage().join(`
`)},...r,{role:"system",content:this.buildDefaultAgentPrompt().join(`
`)}];return GD(this.props.userRawMessage)?a.push({role:"user",content:[{type:"text",text:(await this.buildUserPrompt(o,e)).join(`
`)},...this.props.userRawMessage.filter(l=>l.type==="image_url")]}):a.push({role:"user",content:(await this.buildUserPrompt(o,e)).join(`
`)}),a.push(...i),i.length&&a.push({role:"user",content:"Above is the result of calling one or more tools. The user cannot see the results, so you should explain them to the user if referencing them in your answer. Continue from where you left off without repeating yourself."}),a}createChatMessagesFromHistory(e){let n=[];for(let r of e)if(r.request&&n.push({role:"user",content:U0(r.request.message)}),r.response){let i=tue(r.response.message,!0);i.forEach(o=>n.push(this.fixToolCallsInResponse(o,i)))}return n}fixToolCallsInResponse(e,n){if(e.tool_calls&&e.tool_calls.length){let r=e.tool_calls,i=[];for(let o of r)n.find(l=>l.role==="tool"&&l.tool_call_id===o.id)?i.push(o):BGe.warn(this.ctx,`Tool call ${o.id} does not have a result in the response. Removing it from the tool calls history.`);e.tool_calls=i}return e}addToolCallModelResponse(e,n){let r={role:"assistant",content:e,tool_calls:n.length?n:void 0};this.currentTurn.response?this.currentTurn.response.message=jD(this.currentTurn.response.message,r):this.currentTurn.response={message:[r],type:"model"}}addToolCallResult(e,n){let r="";switch(e.status){case"error":r="Tool call failed with error: ";break;case"cancelled":r="Tool call is cancelled with result: ";break;default:case"success":r=""}let i=r+O9(e.content),o={role:"tool",content:i,tool_call_id:n};if(!this.currentTurn.response)this.currentTurn.response={message:[o],type:"model"};else{if(eG(this.currentTurn.response.message)&&this.currentTurn.response.message.find(l=>l.role==="tool"&&l.tool_call_id===n)){BGe.info(this.ctx,`Tool call result for ${n} already exists in the turn response. Ignoring the new one.`);return}this.currentTurn.response.message=jD(this.currentTurn.response.message,o)}}buildSystemMessage(){let e=[];return e.push("You are an AI programming assistant.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.",`Respond in the following locale: ${this.props.turnContext.conversation.userLanguage}.`),e}buildDefaultAgentPrompt(){let e=this._toolsService.getToolMapForModel().get("get_errors")!==void 0,n=this._toolsService.getToolMapForModel().get("run_in_terminal")!==void 0,r=this._toolsService.getToolMapForModel().get("replace_string_in_file")!==void 0,i=this._toolsService.getToolMapForModel().get("update_user_preferences")!==void 0,o=[];return o.push("<instructions>"),o.push("You are a highly sophisticated automated coding agent with expert-level knowledge across many different programming languages and frameworks."),o.push("The user will ask a question, or ask you to perform a task, and it may require lots of research to answer correctly. There is a selection of tools that let you perform actions or retrieve helpful context to answer the user's question."),o.push("If you can infer the project type (languages, frameworks, and libraries) from the user's query or the context that you have, make sure to keep them in mind when making changes."),o.push("If the user wants you to implement a feature and they have not specified the files to edit, first break down the user's request into smaller concepts and think about the kinds of files you need to grasp each concept."),o.push("If you aren't sure which tool is relevant, you can call multiple tools. You can call tools repeatedly to take actions or gather as much context as needed until you have completed the task fully. Don't give up unless you are sure the request cannot be fulfilled with the tools you have. It's YOUR RESPONSIBILITY to make sure that you have done all you can to collect necessary context."),o.push("Prefer using the semantic_search tool to search for context unless you know the exact string or filename pattern you're searching for."),o.push("Don't make assumptions about the situation-gather context first, then perform the task or answer the question."),o.push("Think creatively and explore the workspace in order to make a complete fix."),o.push("Don't repeat yourself after a tool call, pick up where you left off."),o.push(`NEVER print out a codeblock with file changes unless the user asked for it. Use the insert_edit_into_file ${r?"or replace_string_in_file":""} tool instead.`),n&&o.push("NEVER print out a codeblock with a terminal command to run unless the user asked for it. Use the run_in_terminal tool instead."),o.push("You don't need to read a file if it's already provided in context."),o.push("</instructions>"),o.push("<toolUseInstructions>"),o.push("When using a tool, follow the json schema very carefully and make sure to include ALL required properties."),o.push("Always output valid JSON when using a tool."),o.push("If a tool exists to do a task, use the tool instead of asking the user to manually take an action."),o.push("If you say that you will take an action, then go ahead and use the tool to do it. No need to ask permission."),o.push("Never use multi_tool_use.parallel or any tool that does not exist. Use tools using the proper procedure, DO NOT write out a json codeblock with the tool inputs."),o.push("Never say the name of a tool to a user."),o.push(`For example, instead of saying that you'll use the run_in_terminal tool, say "I'll run the command in a terminal".`),o.push("If you think running multiple tools can answer the user's question, prefer calling them in parallel whenever possible, but do not call semantic_search in parallel."),o.push("If semantic_search returns the full contents of the text files in the workspace, you have all the workspace context."),n&&o.push("Don't call the run_in_terminal tool multiple times in parallel. Instead, run one command and wait for the output before running the next command."),i&&o.push("After you have performed the user's task, if the user corrected something you did, expressed a coding preference, or communicated a fact that you need to remember, use the update_user_preferences tool to save their preferences."),o.push("</toolUseInstructions>"),o.push("<editFileInstructions>"),r?(o.push("Before you edit an existing file, make sure you either already have it in the provided context, or read it with the read_file tool, so that you can make proper changes."),o.push("Use the replace_string_in_file tool to replace a string in a file, but only if you are sure that the string is unique enough to not cause any issues. You can use this tool multiple times per file."),o.push("Use the insert_edit_into_file tool to insert code into a file."),o.push("When editing files, group your changes by file."),o.push("NEVER show the changes to the user, just call the tool, and the edits will be applied and shown to the user."),o.push("NEVER print a codeblock that represents a change to a file, use insert_edit_into_file or replace_string_in_file instead."),o.push("For each file, give a short description of what needs to be changed, then use the replace_string_in_file or insert_edit_into_file tools. You can use any tool multiple times in a response, and you can keep writing text after using a tool.")):(o.push("Don't try to edit an existing file without reading it first, so you can make changes properly."),o.push("Use the insert_edit_into_file tool to edit files. When editing files, group your changes by file."),o.push("NEVER show the changes to the user, just call the tool, and the edits will be applied and shown to the user."),o.push(`NEVER print a codeblock that represents a change to a file, use insert_edit_into_file ${r?"or replace_string_in_file":""} instead.`),o.push(`For each file, give a short description of what needs to be changed, then use the ${r?"replace_string_in_file or":""} insert_edit_into_file tool. You can use any tool multiple times in a response, and you can keep writing text after using a tool.`)),o.push(`Follow best practices when editing files. If a popular external library exists to solve a problem, use it and properly install the package e.g. ${n?'with "npm install" or ':""}creating a "requirements.txt".`),e&&o.push("After editing a file, you MUST call get_errors to validate the change. Fix the errors if they are relevant to your change or the prompt, and remember to validate that they were actually fixed."),o.push("The insert_edit_into_file tool is very smart and can understand how to apply your edits to the user's files, you just need to provide minimal hints."),o.push("When you use the insert_edit_into_file tool, avoid repeating existing code, instead use comments to represent regions of unchanged code. The tool prefers that you are as concise as possible. For example:"),o.push(`// ${yl}`),o.push("changed code"),o.push(`// ${yl}`),o.push("changed code"),o.push(`// ${yl}`),o.push(""),o.push("Here is an example of how you should format an edit to an existing Person class:"),o.push("class Person {"),o.push(`	// ${yl}`),o.push("	age: number;"),o.push(`	// ${yl}`),o.push("	getAge() {"),o.push("		return this.age;"),o.push("	}"),o.push("}"),o.push("</editFileInstructions>"),o}async buildUserPrompt(e,n){let r=this._toolsService.getToolMapForModel().get("replace_string_in_file")!==void 0,i=[],o=await kGe({turnContext:this.props.turnContext,textDocumentProvider:this.props.textDocumentProvider,context:this.ctx},n);return o.length>0&&i.push(...o),i.push("<context>"),i.push(`${this.getCurrentDate()}`),i.push(`${this.getUserOS()}`),i.push(`${this.getWorkspaceFoldersHint()}`),i.push(`${await this.getWorkspaceStructureHint(n)}`),i.push("</context>"),i.push("<reminder>"),i.push(`When using the insert_edit_into_file tool, avoid repeating existing code, instead use a line comment with \`${yl}\` to represent regions of unchanged code.`),r&&i.push("When using the replace_string_in_file tool, include 3-5 lines of unchanged code before and after the string you want to replace, to make it unambiguous which part of the file should be edited."),i.push("</reminder>"),i.push("<prompt>"),i.push(e),i.push("</prompt>"),i}getWorkspaceFoldersHint(){return this.props.workspaceFolders&&this.props.workspaceFolders.length>0?`I am working in a workspace with the following folders:
${this.props.workspaceFolders.map(n=>` - ${Ho(n.uri)}`).join(`
`)}`:"There is no workspace currently open."}async getWorkspaceStructureHint(e){return this.props.workspaceFolders?await _Ge(this.props.turnContext.ctx,this.props.workspaceFolders,{maxLength:2e3,excludeDotFiles:!0},e):""}getCurrentDate(){return`The current date is ${new Date().toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})}.`}getUserOS(){let e=process.platform;return`My current OS is: ${e==="win32"?"Windows":e==="darwin"?"macOS":e==="linux"?"Linux":"Unknown"}`}};var PGe=15,DGe=128,n3=new Tt("toolCallingLoop"),Y$=class t{constructor(e,n,r,i){this.turnContext=e;this.chatFetcher=n;this.modelConfiguration=r;this.baseTelemetryWithExp=i;this.toolCallRounds=[];this.conversationProgress=e.ctx.get(ws),this.conversation=e.conversation,this.turn=e.turn,this.toolsService=e.ctx.get(su),this.prompt=new z$(this.toolsService,{turnContext:this.turnContext,userRawMessage:this.turnContext.turn.request.message,workspaceFolders:this.turnContext.turn.workspaceFolders,textDocumentProvider:new fy(this.turnContext.ctx)}),this.requestId=an(),this.baseTelemetryWithExp=this.baseTelemetryWithExp.extendedBy({requestId:this.requestId})}static{s(this,"ToolCallingLoop")}static{this.NextToolCallId=Date.now()}async run(e){this.abortIfCanceled(e);let n=0,r;for(;;){n++,this.abortIfCanceled(e),this.validateIteration(n,r);let i=performance.now(),o=await this.runOne(n,e);if(b4e(this.turnContext.ctx,this.turnContext,n,performance.now()-i,this.baseTelemetryWithExp),r={...o},this.toolCallRounds.push(o.round),!o.round.toolCalls.length||o.response.type!=="success"&&o.response.type!=="tool_calls"){this.turn.status==="in-progress"&&(this.turn.status="success");return}}}async runOne(e,n){this.abortIfCanceled(n);let r=await this.prompt.render(n),i="",o=new Rb((u,d,p,m)=>{let h=u.trim().match(g6)!==null;this.conversationProgress.report(this.conversation,this.turn,{annotations:d,references:p,hideText:h,notifications:m.map(g=>({severity:"warning",message:g.message})),editAgentRounds:[{roundId:e,reply:u}]}),this.turn.annotations.push(...d??[]),i+=u});this.abortIfCanceled(n);let a=this.toolsService.getToolsForModel();this.abortIfCanceled(n);let l={messages:r,modelConfiguration:this.modelConfiguration,uiKind:"agentPanel",tools:this.getAvailableChatTools(a),intentParams:{intent:!0},llmInteraction:this.turnContext.toLlmInteraction()};this.checkChatPayload(l),n3.debug(this.turnContext.ctx,`Send request for iteration ${e} for turn ${this.turn.id} with: ${JSON.stringify(l,null,2)}`);let c=await this.chatFetcher.fetchResponse(l,n,this.baseTelemetryWithExp,(u,d)=>o.isFinishedAfter(u,d));return this.processChatFetchResult(e,c,i,a,n)}async processChatFetchResult(e,n,r,i,o){switch(this.abortIfCanceled(o),n3.debug(this.turnContext.ctx,`Processing fetch type: ${n.type} in iteration ${e} for turn ${this.turn.id}: ${JSON.stringify(n,null,2)}`),n.type){case"success":return this.turn.status="success",this.prompt.addToolCallModelResponse(r,[]),{response:n,round:{response:n.value,toolInputRetry:0,toolCalls:[]}};case"offTopic":throw this.turn.status="off-topic",new Sc({message:"Sorry, but I can only assist with programming related questions.",responseIsFiltered:!0});case"canceled":throw new Na;case"failed":throw this.turn.status="error",new Sc({message:nb.translateErrorMessage(n.code,n.reason),code:n.code});case"filtered":throw this.turn.status="filtered",new Sc({message:"Oops, your response got filtered.",responseIsFiltered:!0});case"length":throw this.turn.status="error",new Sc({message:"Oops, the response got too long. Try to reformulate your question.",responseIsIncomplete:!0});case"agentAuthRequired":throw this.turn.status="error",new Sc({message:"Authorization required",responseIsFiltered:!1});case"no_choices":throw this.turn.status="error",new Sc({message:"Oops, no choices received from the server. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"no_finish_reason":throw this.turn.status="error",new Sc({message:"Oops, unexpected end of stream. Please try again.",responseIsFiltered:!1,responseIsIncomplete:!0});case"model_not_supported":throw this.turn.status="error",new Sc({message:"Oops, the model is not supported. Please try again.",code:400,reason:"model_not_supported",responseIsFiltered:!1});case"model_max_prompt_tokens_exceeded":throw this.turn.status="error",new Sc({message:"Oops, the token limit exceeded. Try to shorten your prompt or start a new conversation.",responseIsFiltered:!1});case"tool_calls":return await this.handleToolCalls(n,r,i,e,o);case"successMultiple":case"unknown":default:throw this.turn.status="error",new Sc({message:"Unknown server side error occurred. Please try again.",responseIsFiltered:!1})}}async handleToolCalls(e,n,r,i,o){if(e.type!=="tool_calls")throw new Error(`Expected tool_calls type but got ${e.type}`);if(!e.toolCalls)throw new Error("Tool calls are required but were not provided");let a=e.toolCalls.map(l=>{if(!l.id){let c=`cls_${t.NextToolCallId++}`;l.id=c}return l});this.prompt.addToolCallModelResponse(n,a);for(let l of a)await this.handleSingleToolCall(l,r,i,o);return{response:e,round:{response:n,toolInputRetry:0,toolCalls:a.map(l=>({id:l.id,name:l.function.name,arguments:JSON.stringify(l.function.arguments)}))}}}async handleSingleToolCall(e,n,r,i){if(!e.id)throw new Error(`Tool call id is required but was not provided for function ${e.function.name}`);let o=this.findToolByName(n,e.function.name);if(o){let a=performance.now(),l="success";try{let c=Zv(e),u=this.toolsService.prepareInvocation(o.id,{input:c},i),d=this.turnContext.turn.needToolCallConfirmation!==void 0?this.turnContext.turn.needToolCallConfirmation:!1;await this.requestToolInvocationApproval(u,d,o.id,c,r,e.id,o.annotations,i),this.abortIfCanceled(i),await this.turnContext.agentToolCalls.start(r,e.id,o.name,u.progressMessage||`Running ${o.displayName} tool`);let p=await this.toolsService.invokeTool(this.turnContext,o.id,{toolInvocationToken:e.id,input:c,roundId:r,toolCallId:e.id},i);if(this.abortIfCanceled(i),p.status==="success"){let m=YOe(p);await this.turnContext.agentToolCalls.result(r,e.id,m)}else if(p.status==="error"){let m=tV(p);await this.turnContext.agentToolCalls.error(r,e.id,m.message)}else await this.turnContext.agentToolCalls.cancel(r,e.id);this.prompt.addToolCallResult(p,e.id)}catch(c){if(c instanceof Oy||c instanceof Na)throw this.turn.status="cancelled",l="cancelled",this.prompt.addToolCallResult(new Gi([new Ci("")],"cancelled"),e.id),new Oy(c.message);{n3.error(this.turnContext.ctx,`Error while invoking tool ${e.id}: ${s2(c)}`,c),l="error";let u=new Gi([new Ci(s2(c).substring(0,300))],"error");this.prompt.addToolCallResult(u,e.id),this.abortIfCanceled(i);let d=tV(u);await this.turnContext.agentToolCalls.error(r,e.id,d.message)}}finally{let c=performance.now()-a;E4e(this.turnContext.ctx,this.turnContext,o,e.id,r,c,l,this.baseTelemetryWithExp)}}else{let a=`Tool with name ${e.function.name} not found in registered tools`;n3.error(this.turnContext.ctx,a);let l=new Gi([new Ci(a)],"error");this.prompt.addToolCallResult(l,e.id);let c=tV(l);await this.turnContext.agentToolCalls.error(r,e.id,c.message)}}getAvailableChatTools(e){return e.map(n=>({type:"function",function:{name:n.nameForModel,description:n.description,parameters:n.inputSchema}}))}findToolByName(e,n){return e.find(r=>r.nameForModel===n)}abortIfCanceled(e){if(e.isCancellationRequested)throw this.turn.status="cancelled",new Na}async requestToolInvocationApproval(e,n,r,i,o,a,l,c){if(e.confirmationMessages&&n){let u=await this.toolsService.invokeToolConfirmation(this.turnContext,r,{title:e.confirmationMessages.title,message:e.confirmationMessages.message,input:i,roundId:o,toolCallId:a,annotations:l},c);switch(u.result){case"dismiss":throw this.turn.status="cancelled",new Oy("Cancelled by user");case"accept":return Promise.resolve();default:throw new Oy(`Invalid confirmation result ${u.result}`)}}else n3.debug(this.turnContext.ctx,`Tool call confirmation not required for ${r} with confirmation messages '${e.confirmationMessages?.message}' and needToolConfirm '${n}'`)}validateIteration(e,n){if(n&&e>PGe)throw n3.debug(this.turnContext.ctx,`Tool calling loop exceeds max iterations ${PGe} for turn ${this.turn.id}`),new t3}checkChatPayload(e){if(e.messages.length===0)throw new Sc({message:"No messages provided",responseIsFiltered:!1});if(e.tools&&e.tools.length>DGe)throw new Sc({message:`You may not include more than ${DGe} tools in your request.`,responseIsFiltered:!1})}};var K$=new Tt("agenticTurnProcessor"),J$=class{constructor(e,n,r){this.turnContext=e;this.strategy=n;this.chatFetcher=r;this.conversationProgress=e.ctx.get(ws),this.chatFetcher=this.chatFetcher??new ta(e.ctx),this.turnSuggestions=new JR(e.ctx,this.chatFetcher),this.conversation=e.conversation,this.turn=e.turn}static{s(this,"AgenticTurnProcessor")}async process(e,n,r,i,o){try{await this.processWithModelAndToolCall(e,n,this.turnContext,r,i,o)}catch(a){Ln.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,a);let l=a instanceof Error?a.message:String(a);this.turn.status="error",this.updateTurnResponseWithError(l),await this.endProgress({error:{message:l,code:J0e.Unknown,responseIsIncomplete:!0}})}}async processWithModelAndToolCall(e,n,r,i,o,a){if(n.isCancellationRequested)return;await this.conversationProgress.begin(this.conversation,this.turn,e);let l=await ml(this.turnContext.ctx,this.turnContext,{languageId:o?.detectedLanguageId??""});n.onCancellationRequested(async()=>{K$.info(this.turnContext.ctx,`Cancellation requested for turn ${this.turn.id}`),this.turn.status="cancelled",await this.cancelProgress()});try{let c=await xo.getModelConfiguration(this.turnContext.ctx,"edits",a);await new Y$(this.turnContext,this.chatFetcher,c,l).run(n);let d={suggestedTitle:void 0};if(this.strategy.computeSuggestions){let p=await this.fetchSuggestedTitle(n,l.extendedBy({messageSource:"chat.user"},{}));typeof p=="string"&&p!==""&&(d.suggestedTitle=p)}await this.endProgress(d)}catch(c){if(c instanceof Oy)K$.info(this.turnContext.ctx,`Tool call canceled for turn ${this.turn.id}`,c),this.turn.status="cancelled",await this.cancelProgress();else if(c instanceof Na)K$.info(this.turnContext.ctx,`Turn ${this.turn.id} was cancelled`,c),this.turn.status="cancelled",this.updateTurnResponseWithError("Cancelled by user"),await this.cancelProgress();else if(c instanceof t3)this.turn.status="error",this.updateTurnResponseWithError(c.message),await this.endProgress({error:{message:c.message,code:J0e.ToolRoundExceedError,responseIsIncomplete:!0}});else if(c instanceof Sc)this.turn.status="error",this.updateTurnResponseWithError(c.message),await this.endProgress({error:c.conversationError});else throw K$.error(this.turnContext.ctx,`Error in processing turn ${this.turn.id}`,c),c}}async fetchSuggestedTitle(e,n){let r=await this.turnSuggestions.fetchRawSuggestions(this.turnContext,e,this.strategy.uiKind,n);if(r)return Ln.debug(this.turnContext.ctx,"Computed suggested title",r.suggestedTitle),r.suggestedTitle}updateTurnResponseWithError(e){this.turn.response?.message?this.turn.response.message=jD(this.turn.response?.message,{role:"assistant",content:e}):this.turn.response={message:e,type:"meta"}}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.agentToolCalls.finishAll("cancelled"),await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};f();var Tpe="collect-context",wpe="generate-response",X$=class{constructor(e,n,r){this.turnContext=e;this.strategy=n;this.chatFetcher=r;this.conversationProgress=e.ctx.get(ws),this.chatFetcher=this.chatFetcher??new ta(e.ctx),this.postProcessor=new XR(e,this.chatFetcher,n.computeSuggestions),this.conversation=e.conversation,this.turn=e.turn}static{s(this,"ModelTurnProcessor")}async process(e,n,r,i,o){try{await this.processWithModel(e,n,this.turnContext,r,i,o)}catch(a){Ln.error(this.turnContext.ctx,`Error processing turn ${this.turn.id}`,a);let l=a instanceof Error?a.message:String(a);this.turn.status="error",this.turn.response={message:l,type:"meta"},await this.endProgress({error:{message:l,responseIsIncomplete:!0}})}}async processWithModel(e,n,r,i,o,a){await this.conversationProgress.begin(this.conversation,this.turn,e);let l=await ml(this.turnContext.ctx,this.turnContext,{languageId:o?.detectedLanguageId??""});if(n.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let c=i6().find(m=>m.id===this.turn.template?.templateId);if(c?.response){await this.handleTemplateResponse(c,this.turn.template.userQuestion,n);return}let u=(await _A(this.turnContext.ctx)).find(m=>m.slug===this.turn.agent?.agentSlug);if(u){let m=await this.checkAgentPreconditions(u);if(m){await this.endProgress(m);return}}await r.steps.start(Tpe,"Collecting context"),await this.collectContext(r,n,l,this.strategy.uiKind,c,u);let d=a?(await this.turnContext.ctx.get(na).getBestChatModelConfig([a])).uiName:void 0,p=await this.strategy.buildConversationPrompt(r,o?.detectedLanguageId??"",void 0,d);if(!p)await r.steps.error(Tpe,"Failed to collect context"),await this.endTurnWithResponse(this.strategy.earlyReturnResponse,"error");else{await r.steps.finish(Tpe),await r.steps.start(wpe,"Generating response");let m=this.augmentTelemetry(p,l,c,i,o);if(n.isCancellationRequested){this.turn.status="cancelled",await this.cancelProgress();return}let h=await this.fetchConversationResponse(p.messages,n,l.extendedBy({messageSource:"chat.user"},{promptTokenLen:p.tokens}),m,o,a),g=await this.strategy.processResponse(this.turn);this.turn.status==="cancelled"&&this.turn.response?.type==="user"?await this.cancelProgress():(await this.finishGenerateResponseStep(h,r),await this.endProgress({error:h.error,followUp:h.followup,suggestedTitle:h.suggestedTitle,skillResolutions:p.skillResolutions,updatedDocuments:g}))}}async checkAgentPreconditions(e){try{let n=e.checkPreconditions?await e.checkPreconditions(this.turnContext.ctx,this.turn):void 0;if(n&&n.type==="authorizationRequired")return{unauthorized:{...n,agentName:e.name,agentSlug:e.slug}}}catch(n){Ln.error(this.turnContext.ctx,`Error checking preconditions for agent ${e.slug}`,n);let r=n instanceof Error?n.message:String(n);return this.turn.status="error",this.turn.response={message:r,type:"meta"},{error:{message:r,responseIsIncomplete:!0}}}}async endTurnWithResponse(e,n){this.turn.response={type:"meta",message:e},this.turn.status=n,await this.conversationProgress.report(this.conversation,this.turn,{reply:e}),await this.endProgress()}async handleTemplateResponse(e,n,r){if(!e.response)return;let i=await e.response(this.turnContext,n,r);this.turn.response={type:"meta",message:i.message},this.turn.status=i.error?.responseIsFiltered?"filtered":i.error?.responseIsIncomplete?"error":"success",i.error?.responseIsFiltered||i.error?.responseIsIncomplete?(await this.conversationProgress.report(this.conversation,this.turn,{reply:"Sure, I can definitely do that!",annotations:i.annotations,notifications:i.notifications,references:i.references}),await this.turnContext.steps.finishAll(),await this.endProgress({error:{message:i.message,code:i.error?.code||0,responseIsIncomplete:i.error?.responseIsIncomplete,responseIsFiltered:i.error?.responseIsFiltered}})):(await this.conversationProgress.report(this.conversation,this.turn,{reply:i.message,annotations:i.annotations,notifications:i.notifications,references:i.references,confirmationRequest:i.confirmationRequest}),await this.endProgress())}async collectContext(e,n,r,i,o,a){let c=await new b$(this.turnContext.ctx,this.chatFetcher).collectContext(e,n,r,i,o,a);return this.turn.skills=c.skillIds.map(u=>({skillId:u})),c}async fetchConversationResponse(e,n,r,i,o,a){n.onCancellationRequested(async()=>{await this.cancelProgress()});let l="",c=0,u=new Rb((h,g,y,v)=>{let b=h.trim().match(g6)!==null;if(this.conversationProgress.report(this.conversation,this.turn,{reply:h,annotations:g,references:y,hideText:b,notifications:v.map(E=>({severity:"warning",message:E.message}))}),this.turn.response?this.turn.response.message=Q$(this.turn.response.message,h):this.turn.response={message:h,type:"model"},this.turn.annotations.push(...g??[]),l+=h,this.strategy.currentDocument){let E=this.strategy.extractEditsFromResponse(l,this.strategy.currentDocument);E&&E.length>0&&(l="",this.conversationProgress.report(this.conversation,this.turn,{codeEdits:E}),c+=E.length)}}),d=await xo.getModelConfiguration(this.turnContext.ctx,"user",a);e=xo.transformMessages(e,d.modelFamily);let p={modelConfiguration:d,messages:e,uiKind:this.strategy.uiKind,intentParams:{intent:!0,intent_threshold:.7,intent_content:Vn(this.turn.request.message)},llmInteraction:this.turnContext.toLlmInteraction()},m=await this.chatFetcher.fetchResponse(p,n,r,(h,g)=>u.isFinishedAfter(h,g));return i=i.extendedBy(void 0,{numCodeEdits:c}),await this.postProcessor.postProcess(m,n,u.appliedText,r,i,Vn(this.turn.request.message),this.strategy.uiKind,o)}augmentTelemetry(e,n,r,i,o){let a;return i?(this.turn.request.type="follow-up",A4e(this.turnContext.ctx,this.conversation,this.strategy.uiKind,Vn(this.turn.request.message),e.tokens,i.type,i.id,o,n),a=sP(this.conversation,this.strategy.uiKind,Vn(this.turn.request.message).length,e.tokens,i.type,i.id,n,e.skillResolutions)):a=sP(this.conversation,this.strategy.uiKind,Vn(this.turn.request.message).length,e.tokens,r?.id,void 0,n,e.skillResolutions),a}async finishGenerateResponseStep(e,n){e.error?await n.steps.error(wpe,e.error.message):await n.steps.finish(wpe)}async endProgress(e){await this.turnContext.steps.finishAll(),await this.conversationProgress.end(this.conversation,this.turn,e)}async cancelProgress(){await this.turnContext.steps.finishAll("cancelled"),await this.conversationProgress.cancel(this.conversation,this.turn)}};f();var Z$=class{constructor(e){this.ctx=e;this.earlyReturnResponse="Oops, an error has occurred. Please try again";this.uiKind="conversationPanel";this.computeSuggestions=!0}static{s(this,"PanelTurnProcessorStrategy")}processResponse(){return[]}async buildConversationPrompt(e,n,r,i){let o="user",a=await xo.getModelConfiguration(e.ctx,o),l={promptType:o,modelConfiguration:a,languageId:n,userSelectedModelName:i};return await this.ctx.get(wc).toPrompt(e,l)}extractEditsFromResponse(e,n){return[]}},ez=class{constructor(e){this.ctx=e;this.earlyReturnResponse="Please open a file and select code for the inline chat to be available";this.uiKind="conversationInline";this.computeSuggestions=!1}static{s(this,"InlineTurnProcessorStrategy")}async buildConversationPrompt(e,n,r){let i=await this.getCurrentEditorSkill(e);if(!i)return;let o=await this.getDocumentIfValid(i.uri);if(!o)return;let a=r?.producesCodeEdits===!1?"user":"inline",l=await e.ctx.get(na).getBestChatModelConfig(Df(a)),c={promptType:a,modelConfiguration:l,languageId:n};return c.promptType==="inline"&&(this.currentDocument=o),await this.ctx.get(wc).toPrompt(e,c)}async processResponse(e){let n=[],r=Vn(e.response?.message??"");if(r&&e.status==="success"&&this.currentDocument){let i=await this.processInlineResponse(r,this.currentDocument);i&&n.push(i)}return n}async getCurrentEditorSkill(e){let n=await e.skillResolver.resolve(lu);if(n)return n}async getDocumentIfValid(e){let n=await this.ctx.get(Nr).getOrReadTextDocument({uri:e});if(n.status==="valid")return n.document}async processInlineResponse(e,n){let i=Epe(e,n).filter(a=>bpe.includes(a.mode)),o=Ipe(i,n);if(o)return await this.ctx.get(sl).documentDiff({original:n.getText(),updated:o}),{uri:n.uri,text:o}}extractEditsFromResponse(e,n){return Epe(e,n)}};f();f();var NGe=je(Za()),LGe=je(_m());var Vu=class{constructor(e,n,r){this.ctx=e;this.skillId=n;this.requestType=new NGe.ProtocolRequestType("conversation/context");this.typeCheck=ms.Compile(r)}static{s(this,"AgentSkillResolver")}async resolveSkill(e){let n=this.ctx.get(Cn).connection,r={conversationId:e.conversation.id,turnId:e.turn.id,skillId:this.skillId},i;try{let o=await n.sendRequest(this.requestType,r),[a,l]=o;if(l){let c=new LGe.ResponseError(l.code,l.message,l.data);Ln.error(this.ctx,`ResponseError while resolving skill ${this.skillId}`,c);return}i=a}catch(o){Ln.error(this.ctx,`Error while resolving skill ${this.skillId}`,o);return}if(i!=null){if(!this.typeCheck.Check(i))throw new Ic(this.typeCheck.Errors(i));return i}}};var _pe=class{constructor(e,n,r="",i="",o=[],a=[]){this.progressToken=e;this.chunks=n;this.followUp=r;this.suggestedTitle=i;this.skills=o;this.references=a}static{s(this,"SyntheticTurn")}},qy=class{constructor(){this.turns=[]}static{s(this,"SyntheticTurns")}add(e,n,r="",i="",o=[],a=[]){let l=new _pe(e,n,r,i,o,a);return this.turns.push(l),l}get(e){return this.turns.find(n=>n.progressToken===e)}},tz=class{constructor(e,n){this.turnContext=e;this.syntheticTurn=n;this.conversationProgress=e.ctx.get(ws)}static{s(this,"SyntheticTurnProcessor")}async process(e,n){try{await this.processWithSyntheticTurns(this.syntheticTurn,e,n)}catch(r){Ln.error(this.turnContext.ctx,`Error processing turn ${this.turnContext.turn.id}`,r);let i=r.message;this.turnContext.turn.status="error",this.turnContext.turn.response={message:i,type:"meta"},await this.conversationProgress.end(this.turnContext.conversation,this.turnContext.turn,{error:{message:i,responseIsIncomplete:!0}})}}async processWithSyntheticTurns(e,n,r){await this.conversationProgress.begin(this.turnContext.conversation,this.turnContext.turn,n),await this.resolveSyntheticSkill(e,r),await this.processSyntheticChunks(e,r),await this.endSyntheticProgress(e,r),this.turnContext.turn.response={type:"model",message:e.chunks.join("")},this.turnContext.turn.status=r.isCancellationRequested?"cancelled":"success"}async resolveSyntheticSkill(e,n){let r=this.turnContext.ctx.get(ki).getCapabilities(this.turnContext.conversation.id),i=e.skills.filter(o=>r.skills.includes(o));for(let o of i){let l=await new Vu(this.turnContext.ctx,o,I.Object({value:I.String()})).resolveSkill(this.turnContext);l&&!n.isCancellationRequested&&await this.conversationProgress.report(this.turnContext.conversation,this.turnContext.turn,{reply:l.value})}}async processSyntheticChunks(e,n){for(let r of e.chunks)n.isCancellationRequested||(await this.conversationProgress.report(this.turnContext.conversation,this.turnContext.turn,{reply:r}),await o2(1))}async endSyntheticProgress(e,n){n.isCancellationRequested?await this.conversationProgress.cancel(this.turnContext.conversation,this.turnContext.turn):await this.conversationProgress.end(this.turnContext.conversation,this.turnContext.turn,{followUp:{message:e.followUp,type:"followup",id:an()},suggestedTitle:e.suggestedTitle,updatedDocuments:this.turnContext.conversation.source==="inline"?[{uri:"fakeUpdatedDoc.ts",text:"fake"}]:void 0})}};var Wy=class{static{s(this,"TurnProcessorFactory")}async createProcessor(e,n,r){let i=e.ctx.get(qy).get(n);if(i)return new tz(e,i);let a=(await _A(e.ctx)).find(c=>c.slug===e.turn.agent?.agentSlug);if(a?.turnProcessor)return a.turnProcessor(e);let l;return e.conversation.source==="inline"?l=new ez(e.ctx):l=new Z$(e.ctx),r!==void 0&&(l.computeSuggestions=r),e.turn.chatMode==="Agent"?new J$(e,l):new X$(e,l)}};f();var FGe=je(Za());var r3=class{static{s(this,"WorkspaceFoldersValidator")}static validate(e){if(!e)return;let n=new Set;for(let r of e){if(n.has(r.uri))throw new FGe.ResponseError(er.InvalidParams,`Duplicate workspace folder uri ${r.uri}`);n.add(r.uri)}}};f();function nz(t){if(t&&t.uri.length>0)return[{uri:t.uri,name:Ti(t.uri)}]}s(nz,"resolveAsWorkspaceFolders");f();f();var gMt=Object.freeze(function(t,e){let n=setTimeout(t.bind(e),0);return{dispose(){clearTimeout(n)}}}),Gd=class{constructor(e){this.tokens=[];this.handlers=[];this._isCancelled=!1;this.onCancellationRequested=s((e,n)=>this._isCancelled?gMt(e,n):(this.handlers.push(e.bind(n)),{dispose:s(()=>{},"dispose")}),"onCancellationRequested");this.tokens=e,this._isCancelled=e.some(n=>n.isCancellationRequested),e.forEach(n=>{n.onCancellationRequested(r=>this.cancel(r))})}static{s(this,"MergedToken")}cancel(e){this._isCancelled||(this._isCancelled=!0,this.handlers.forEach(n=>n(e)))}get isCancellationRequested(){return this.tokens.some(e=>e.isCancellationRequested)}};var $u=class{constructor(){this.tokens=new Kn(250)}static{s(this,"ProgressTokens")}add(e,n){let r=new wr.CancellationTokenSource,i=new Gd([n,r.token]);return this.tokens.set(e.toString(),r),i}cancel(e){let n=this.tokens.get(e.toString());n&&(n.cancel(),this.tokens.delete(e.toString()))}};var AMt=I.Object({conversationId:I.Optional(L$),workDoneToken:I.Union([I.String(),I.Number()]),turns:I.Array(gGe,{minItems:1}),capabilities:I.Optional(I.Object({allSkills:I.Optional(I.Boolean()),skills:I.Optional(I.Array(I.String()))})),doc:I.Optional(pd),textDocument:I.Optional(pd),selection:I.Optional(_a),visibleRanges:I.Optional(G$),computeSuggestions:I.Optional(I.Boolean()),references:I.Optional(I.Array(ZR)),source:I.Optional(_p),workspaceFolder:I.Optional(I.String()),workspaceFolders:I.Optional(I.Array(U$)),ignoredSkills:I.Optional(I.Array(I.String())),userLanguage:I.Optional(I.String()),model:I.Optional(I.String()),chatMode:I.Optional(O$),needToolCallConfirmation:I.Optional(I.Boolean())});async function yMt(t,e,n){r3.validate(n.workspaceFolders);let r=await kA(t,n,e),i=t.get(ki).create(n);await CMt(t,i,n,r);let o=i.turns[i.turns.length-1],a=e3(n),l=t.get($u).add(a.progressToken,e),c=new Mb(t,i,o,l);return await(await t.get(Wy).createProcessor(c,a.progressToken,n.computeSuggestions)).process(a,l,void 0,r,n.model),[{conversationId:i.id,turnId:o.id,agentSlug:o.agent?.agentSlug,modelFamily:n.model},null]}s(yMt,"handleConversationCreateChecked");async function CMt(t,e,n,r){for(let i of n.turns){let o=M$(i.request),a=new kb({message:o,type:"user"},i.turnId);i.response&&(a.response={message:i.response,type:"model"}),i.agentSlug&&(a.agent={agentSlug:i.agentSlug}),a.chatMode=qV(n.chatMode),a.needToolCallConfirmation=n.needToolCallConfirmation;let l=n.workspaceFolder?{uri:n.workspaceFolder}:void 0,c=n.workspaceFolders&&n.workspaceFolders.length>0?n.workspaceFolders:nz(l),u=j$({textDocument:r,selection:n.selection,visibleRanges:n.visibleRanges});await t.get(ki).addTurn(e.id,a,n.references,u,l,c,n.ignoredSkills,void 0)}}s(CMt,"addTurns");var MGe=ot(AMt,yMt);f();var xMt=I.Object({conversationId:I.String()});function vMt(t,e,n){return t.get(ki).destroy(n.conversationId),["OK",null]}s(vMt,"handleConversationDestroyChecked");var QGe=ot(xMt,vMt);f();var bMt=I.Object({turnId:I.String(),acceptedFileCount:I.Number({minimum:0}),totalFileCount:I.Number({minimum:1})}),EMt=new Tt("conversationNotifyCodeAcceptance");async function IMt(t,e,n){let r=t.get(ki).findByTurnId(n.turnId);if(!r)return EMt.warn(t,`Turn with id ${n.turnId} not found`),["OK",null];let i=await ml(t,r,{languageId:""});return Pu(t,void 0,{},{acceptedFileCount:n.acceptedFileCount,totalFileCount:n.totalFileCount},`${Ac("agentPanel")}.codeAcceptance`,i),["OK",null]}s(IMt,"handleConversationNotifyCodeAcceptanceChecked");var OGe=ot(bMt,IMt);f();var TMt=I.Object({});function wMt(t,e,n){return[{path:t.get(hc).directory},null]}s(wMt,"handleConversationPersistenceChecked");var UGe=ot(TMt,wMt);f();f();var WGe=je(require("node:events"));var Spe=class{static{s(this,"TokenPreconditionCheck")}async check(e){let n=await e.get(_r).getSession(),r=e.get(Fl);return n&&n.githubAppId&&n.githubAppId!==ym?{type:"token",status:"ok"}:{type:"token",status:"failed",githubAppId:r.githubAppId}}},Rpe=class{static{s(this,"ChatEnabledPreconditionCheck")}async check(e){return{type:"chat_enabled",status:(await e.get(Gn).getToken()).envelope.chat_enabled?"ok":"failed"}}},_Mt=[new Spe,new Rpe],qGe="onPreconditionsChanged",Sp=class{constructor(e,n=_Mt){this.ctx=e;this.checks=n;this.emitter=new WGe.default;ia(e,async()=>{await this.check()})}static{s(this,"PreconditionsCheck")}check(e){return e&&(this.result=void 0),this.result===void 0&&(this.result=this.requestChecks()),this.result}async requestChecks(){let e=[];this.checks.length>0&&(e=await Promise.all(this.checks.map(i=>i.check(this.ctx))));let n=e.every(i=>i.status==="ok")?"ok":"failed",r={results:e,status:n};return this.emit(r),r}onChange(e){this.emitter.on(qGe,e)}emit(e){this.emitter.emit(qGe,e)}};var SMt=I.Object({forceCheck:I.Optional(I.Boolean())});async function RMt(t,e,n){let r=n.forceCheck??!1;return[await t.get(Sp).check(r),null]}s(RMt,"handleConversationPreconditionsChecked");var HGe=ot(SMt,RMt);f();var kMt=I.Object({turnId:I.String(),rating:I.Number(),doc:I.Optional(pd),textDocument:I.Optional(pd),source:I.Optional(_p)});async function BMt(t,e,n){let r=await kA(t,n,e),i=pv(n.source),o="unrated";n.rating>0?o="positive":n.rating<0&&(o="negative");let a=await ml(t,t.get(ki).findByTurnId(n.turnId),{languageId:r?.detectedLanguageId??""});return Pu(t,r,{rating:o,uiKind:i},{},`${Ac(i)}.messageRating`,a),["OK",null]}s(BMt,"handleConversationRatingChecked");var GGe=ot(kMt,BMt);f();f();var rz=class extends _b{static{s(this,"ClientLanguageModelTool")}constructor(e){super({...e,toolProvider:AA,type:"client"}),this.confirmationMessages=e.confirmationMessages}prepareInvocation(e,n){return{progressMessage:`Running ${this.name} tool`,confirmationMessages:this.confirmationMessages}}async invoke(e,n,r){let i={name:this.name,input:n.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:n.roundId,toolCallId:n.toolCallId};try{return await e.ctx.get(eb).invokeClientTool(e,i)}catch(o){throw new Error(`Failed to invoke client tool ${this.name}: ${String(o)}`)}}async invokeConfirmation(e,n,r){if(r.isCancellationRequested)throw new Na;let i={name:this.name,title:n.title,message:n.message,input:n.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:n.roundId,toolCallId:n.toolCallId,annotations:n.annotations};try{return await e.ctx.get(tA).invokeClientToolConfirmation(e,i)}catch(o){throw new Error(`Failed to invoke client tool confirmation ${this.name}: ${String(o)}`)}}};var PMt=I.Object({tools:I.Array(AGe)});function DMt(t,e,n){return n.tools.forEach(r=>{t.get(su).registerTool(new rz({name:r.name,description:r.description,inputSchema:r.inputSchema,confirmationMessages:r.confirmationMessages}))}),["OK",null]}s(DMt,"conversationRegisterToolsChecked");var jGe=ot(PMt,DMt);f();var NMt=I.Object({});function LMt(t,e,n){return[Ufe(t).map(i=>({id:i.id,description:i.description,shortDescription:i.shortDescription,scopes:i.scopes})),null]}s(LMt,"handleConversationTemplatesChecked");var VGe=ot(NMt,LMt);f();var FMt=I.Object({workDoneToken:I.Union([I.String(),I.Number()]),conversationId:L$,turnId:I.Optional(LT),message:ype,followUp:I.Optional(I.Object({id:I.String(),type:I.String()})),doc:I.Optional(pd),textDocument:I.Optional(pd),selection:I.Optional(_a),visibleRanges:I.Optional(G$),computeSuggestions:I.Optional(I.Boolean()),references:I.Optional(I.Array(ZR)),workspaceFolder:I.Optional(I.String()),workspaceFolders:I.Optional(I.Array(U$)),ignoredSkills:I.Optional(I.Array(I.String())),confirmationResponse:MFe,model:I.Optional(I.String()),chatMode:I.Optional(O$),needToolCallConfirmation:I.Optional(I.Boolean())});async function MMt(t,e,n){r3.validate(n.workspaceFolders);let r=await kA(t,n,e),i=t.get(ki),o=i.get(n.conversationId),a=M$(n.message),l=new kb({message:a,type:"user"},n.turnId);l.chatMode=qV(n.chatMode),l.needToolCallConfirmation=n.needToolCallConfirmation;let c=n.workspaceFolder?{uri:n.workspaceFolder}:void 0,u=n.workspaceFolders&&n.workspaceFolders.length>0?n.workspaceFolders:nz(c),d=j$({textDocument:r,selection:n.selection,visibleRanges:n.visibleRanges});l=await i.addTurn(o.id,l,n.references,d,c,u,n.ignoredSkills,n.confirmationResponse);let p=e3(n),m=t.get($u).add(p.progressToken,e),h=new Mb(t,o,l,m);return await(await t.get(Wy).createProcessor(h,p.progressToken,n.computeSuggestions)).process(p,m,n.followUp,r,n.model),[{conversationId:o.id,turnId:l.id,agentSlug:l.agent?.agentSlug,modelFamily:n.model},null]}s(MMt,"handleConversationTurnChecked");var $Ge=ot(FMt,MMt);f();var QMt=I.Object({conversationId:I.String(),turnId:I.String(),source:I.Optional(_p)});async function OMt(t,e,n){t.get(ki).deleteTurn(n.conversationId,n.turnId);let i=pv(n.source),o=await ml(t,t.get(ki).findByTurnId(n.turnId),{languageId:""});return Pu(t,void 0,{messageId:n.turnId,uiKind:i,conversationId:n.conversationId},{},`${Ac(i)}.messageDelete`,o),["OK",null]}s(OMt,"handleConversationTurnDeleteChecked");var zGe=ot(QMt,OMt);f();var UMt=I.Object({document:I.Object({uri:I.String(),text:I.String(),languageId:I.String(),version:I.Number()}),selection:I.Object({start:I.Object({line:I.Number(),character:I.Number()}),end:I.Object({line:I.Number(),character:I.Number()})})});function qMt(){return["You are a world-class software engineer and the author and maintainer of the discussed code. Your feedback prefectly combines detailed feedback and explanation of context.",'When asked for your name, you must respond with "GitHub Copilot".',"Follow the user's requirements carefully & to the letter.","Follow Microsoft content policies.","Avoid content that violates copyrights.",`If you are asked to generate content that is harmful, hateful, racist, sexist, lewd, violent, or completely irrelevant to software engineering, only respond with "Sorry, I can't assist with that."`,"Keep your answers short and impersonal.","Use Markdown formatting in your answers.","Make sure to include the programming language name at the start of the Markdown code blocks.","Avoid wrapping the whole response in triple backticks.","The user works in an IDE called Visual Studio Code which has a concept for editors with open files, integrated unit test support, an output pane that shows the output of running the code as well as an integrated terminal.","The active document is the source code the user is looking at right now.","You can only give one reply for each conversation turn.","","Additional Rules","Think step by step:","1. Examine the provided code and any other context like user question, related errors, project details, class definitions, etc.","2. Provide feedback on the current selection on where it can be improved or introduces a problem.","2a. Avoid commenting on correct code.","2b. Avoid commenting on commented out code.","2c. Keep scoping rules in mind.","3. Reply with an enumerated list of feedback with source line number, filepath, kind (bug, performance, consistency, documentation, naming, readability, style, other), severity (low, medium, high), and feedback text.","3a. E.g.: 1. Line 357 in src/flow.js, bug, high severity: `i` is not incremented.","3b. E.g.: 2. Line 361 in src/arrays.js, documentation, low severity: Function `binarySearch` is not documented.","3c. E.g.: 3. Line 176 in src/vs/platform/actionWidget/browser/actionWidget.ts, consistency, medium severity: The color id `'background.actionBar'` is not consistent with the other color ids used. Use `'actionBar.background'` instead.","3d. E.g.: 4. Line 410 in src/search.js, documentation, medium severity: Returning `-1` when the target is not found is a common convention, but it should be documented.","3e. E.g.: 5. Line 51 in src/account.py, bug, high severity: The deposit method is not thread-safe. You should use a lock to ensure that the balance update is an atomic operation.","3f. E.g.: 6. Line 220 in src/account.py, readability, low severity: The withdraw method is very long and combines multipe logical steps, consider splitting it into multiple methods.","4. Try to sort the feedback by file and line number.",'5. When there is no feedback to provide, reply with "No feedback to provide."',"","Focus on being clear, helpful, and thorough.","Use developer-friendly terms and analogies in your explanations.","Provide clear and relevant examples when helpful."].join(`
`)}s(qMt,"buildSystemMessage");function WMt(t){let n=t.document.text.split(`
`).slice(t.selection.start.line,t.selection.end.line+1),r=t.selection.start.line+1,i=t.selection.end.line+1,o=n.map((a,l)=>{let c=t.selection.start.line+l+1;return`/* ${c>r&&c<i?"Selected ":""}Line ${c} */${a}`}).join(`
`);return["<currentChange>","Current selection with the selected lines labeled as such:","",`From the file: ${t.document.uri}`,`\`\`\`${t.document.languageId}/${t.document.uri}: FROM_LINE: ${r} - TO_LINE: ${i}`,o,"```","","</currentChange>"].join(`
`)}s(WMt,"buildUserMessage");function HMt(t,e){let n=[],r=t.text.split(`
`),i=/(\d+)\.\s*Line\s*(\d+)\s*in\s*([^,]+),\s*(\w+),\s*(\w+)\s*severity:\s*((?:[^`.\n]|`[^`]*`|\.(?=\s*[A-Z]))+)(?:\.|$)/gm,o;for(;(o=i.exec(e))!==null;){let[a,l,c,u,d,p,m]=o;if(!["bug","performance","consistency","documentation","naming","readability","style","other"].includes(d.toLowerCase()))continue;let h=parseInt(c)-1;if(h<0||h>=r.length)continue;let g=r[h],y=Math.max(g.search(/\S/),0),v=g.trimEnd().length,b={uri:t.uri,range:{start:{line:h,character:y},end:{line:h,character:v}},message:m.trim(),kind:d.toLowerCase(),severity:p.toLowerCase()};n.push(b)}return n}s(HMt,"parseReviewComments");async function GMt(t,e,n){if(!n.document.text)return[null,{code:er.InvalidRequest,message:"Document text is required"}];if(!n.document.uri)return[null,{code:er.InvalidRequest,message:"Document URI is required"}];if(!n.document.languageId)return[null,{code:er.InvalidRequest,message:"Document language ID is required"}];let r=n.document.text.split(`
`);if(n.selection.start.line<0||n.selection.end.line>=r.length)return[null,{code:er.InvalidRequest,message:"Invalid selection range"}];if(n.selection.start.line>n.selection.end.line)return[null,{code:er.InvalidRequest,message:"Selection start line must be before end line"}];let i=t.get(ta),o=await xo.getModelConfiguration(t,"codeReview"),a=[{role:"system",content:qMt()},{role:"user",content:WMt(n)}],l=await t.get(Dt).updateExPValuesAndAssignments(),c=await i.fetchResponse({modelConfiguration:o,messages:a,uiKind:"conversationPanel",intentParams:{intent:!0},llmInteraction:Hd.user("code-review",an())},e,l);if(c.type!=="success")return[null,{code:er.InternalError,message:"Failed to generate code review"}];let u=HMt(n.document,c.value);return u.sort((d,p)=>d.range.start.line-p.range.start.line),[{comments:u},null]}s(GMt,"handleCopilotCodeReviewChecked");var YGe=ot(UMt,GMt);f();f();var Qb=class{constructor(e,n,r,i,o){this.ctx=e;this.editConversation=n;this.currentTurn=r;this.partialResultToken=i;this.userSelectedModel=o;this.workingSetUriToPathMap=new Map;for(let a of r.workingSet)this.workingSetUriToPathMap.set(a.uri,py.uriToPath(a.uri))}static{s(this,"EditTurnContext")}get editTurnId(){return this.currentTurn.id}get editConversationId(){return this.editConversation.id}mapToUriInWorkingSet(e){for(let[n,r]of this.workingSetUriToPathMap)if(r===e)return n}toLlmInteraction(){return Hd.user("conversation-edit-panel",this.editTurnId)}};f();async function iz(t,e,n,r){let o=t.get(il).create("panel","en"),a=new rb({message:"",type:"user"},[]),l="file:///path/to/HelloWorld.java",c=new Qb(t,o,a,r,sr.Gpt4o),u=t.get(Ec);await u.reportTurn(c,{editConversationId:e,editTurnId:n,fileGenerationStatus:"edit-plan-generated",editDescription:`### [HelloWorld.java](${l})

Complete the \`main\` method to print "Hello, World!" to the console.`,uri:l}),await u.reportTurn(c,{editConversationId:e,editTurnId:n,fileGenerationStatus:"updated-code-generated",uri:l,partialText:`public class HelloWorld {
    public static void main(String[] args) {
        System.out.println("Hello, World!");
    }
}`,languageId:"java",markdownCodeFence:"```"});let d="file:///path/to/HelloWorld.py";await u.reportTurn(c,{editConversationId:e,editTurnId:n,fileGenerationStatus:"edit-plan-generated",editDescription:`### [HelloWorld.py](${d})

Complete the \`main\` method to print "Hello, World!" to the console.`,uri:d}),await u.reportTurn(c,{editConversationId:e,editTurnId:n,fileGenerationStatus:"updated-code-generating",uri:d,partialText:`def main():
`,languageId:"python",markdownCodeFence:"```"}),await u.reportTurn(c,{editConversationId:e,editTurnId:n,fileGenerationStatus:"updated-code-generating",uri:d,partialText:`    println("Hello, World!")
`,languageId:"python",markdownCodeFence:"```"}),await u.reportTurn(c,{editConversationId:e,editTurnId:n,fileGenerationStatus:"updated-code-generated",uri:d,partialText:"",languageId:"python",markdownCodeFence:"```"})}s(iz,"streamMockedResult");f();var jMt=I.Object({enableMock:I.Boolean()}),BA=class{constructor(){this.enableMock=!1}static{s(this,"CopilotEditsMockManager")}isMockEnabled(){return this.enableMock}setMockEnabled(e){this.enableMock=e}};function VMt(t,e,n){return t.get(BA).setMockEnabled(n.enableMock),["OK",null]}s(VMt,"handleTestingSetCopilotEditsResponseChecked");var KGe=ot(jMt,VMt);var $Mt=I.Object({request:I.String(),response:I.Optional(I.String())}),zMt=I.Union([I.Literal("panel")]),YMt=I.Object({partialResultToken:I.Union([I.String(),I.Number()]),turns:I.Array($Mt,{minItems:1}),workingSet:I.Optional(I.Array(f6)),source:I.Optional(zMt),workspaceFolder:I.Optional(I.String()),userLanguage:I.Optional(I.String()),model:I.Optional(I.String())});function KMt(t,e){let n=t.create(e.source,e.userLanguage);for(let r of e.turns){let i=new rb({message:r.request,type:"user"},e.workingSet);r.response&&(i.response={message:r.response,type:"model"}),e.workspaceFolder&&(i.workspaceFolder=e.workspaceFolder),t.addTurn(n.id,i)}return n}s(KMt,"buildEditConversation");async function JMt(t,e,n){if(t.get(BA).isMockEnabled())return await iz(t,an(),an(),n.partialResultToken),[[],null];let r=KMt(t.get(il),n),i=r.getLastTurn(),o=new Qb(t,r,i,n.partialResultToken,n.model),a=t.get($u).add(n.partialResultToken,e);return[await t.get(my).createOrContinueEditConversation(o,a),null]}s(JMt,"handleEditConversationCreateChecked");var JGe=ot(YMt,JMt);f();var XMt=I.Object({editConversationId:I.String()});function ZMt(t,e,n){return t.get(il).destroy(n.editConversationId),["OK",null]}s(ZMt,"handleEditConversationDestroyChecked");var XGe=ot(XMt,ZMt);f();var eQt=I.Object({partialResultToken:I.Union([I.String(),I.Number()]),editConversationId:I.String(),message:I.String(),workingSet:I.Optional(I.Array(f6)),workspaceFolder:I.Optional(I.String()),userLanguage:I.Optional(I.String()),model:I.Optional(I.String())});function tQt(t,e,n){let r=t.get(e),i=new rb({message:n.message,type:"user"},n.workingSet);return n.workspaceFolder&&(i.workspaceFolder=n.workspaceFolder),t.addTurn(r.id,i),r}s(tQt,"buildEditConversation");async function nQt(t,e,n){if(t.get(BA).isMockEnabled())return await iz(t,n.editConversationId,an(),n.partialResultToken),[[],null];let r=t.get(il),i=tQt(r,n.editConversationId,n),o=i.getLastTurn(),a=new Qb(t,i,o,n.partialResultToken,n.model),l=t.get($u).add(n.partialResultToken,e);return[await t.get(my).createOrContinueEditConversation(a,l),null]}s(nQt,"handleEditConversationTurnChecked");var ZGe=ot(eQt,nQt);f();var rQt=I.Object({editConversationId:I.String(),editTurnId:I.String(),source:I.Optional(_p)});async function iQt(t,e,n){t.get(il).deleteTurn(n.editConversationId,n.editTurnId);let i=await oP(t,n.editTurnId,n.editConversationId,{languageId:""});return Pu(t,void 0,{messageId:n.editTurnId,uiKind:"editsPanel",conversationId:n.editConversationId},{},`${Ac("editsPanel")}.copilotEditsMessageDelete`,i),["OK",null]}s(iQt,"handleEditConversationTurnDeleteChecked");var eje=ot(rQt,iQt);f();var oQt=I.Object({}),sQt=I.Object({servers:I.Array(I.Object({name:I.String(),tools:I.Array(I.Object({name:I.String(),status:I.Enum(JD)}))}))});function aQt(t,e,n){return[t.get(gp).getAllTools(),null]}s(aQt,"handleGetMCPToolsChecked");function lQt(t,e,n){for(let{name:i,tools:o}of n.servers)for(let{name:a,status:l}of o)t.get(gp).updateMCPToolStatus(i,a,l);return[t.get(gp).getAllTools(),null]}s(lQt,"handleUpdateMCPToolsStatusChecked");var tje=ot(oQt,aQt),nje=ot(sQt,lQt);f();var cQt=I.Object({});async function uQt(t,e,n){let r=await t.get(Gn).getToken();return[dQt(await t.get(wu).getMetadata(),r),null]}s(uQt,"handleCopilotModelsChecked");function dQt(t,e){let n=e.getTokenValue("editor_preview_features")=="0",r=Lf.filterModelsWithEditorPreviewFeatures(t,n),i=[];return r.forEach(o=>{if(o.model_picker_enabled===!0){let a=[];o.capabilities.type==="chat"?(a.push("chat-panel"),a.push("edit-panel"),a.push("inline"),!YIe.has(o.capabilities.family)&&o.capabilities.supports?.tool_calls&&(o.capabilities.limits?.max_prompt_tokens??!1)&&a.push("agent-panel"),i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:a,id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0})):o.capabilities.type==="completion"?i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:["completion"],id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0}):i.push({modelFamily:o.capabilities.family,modelName:o.name,modelPolicy:o.policy,scopes:a,id:o.id,preview:o.preview??!1,isChatDefault:o.is_chat_default??!1,isChatFallback:o.is_chat_fallback??!1,capabilities:{supports:{vision:o.capabilities.supports?.vision??!1}},billing:o.billing?{isPremium:o.billing?.is_premium??!0,multiplier:o.billing?.multiplier??0}:void 0})}}),i}s(dQt,"filterModels");var rje=ot(cQt,uQt);f();var fQt=I.Object({model:I.Optional(I.String()),status:I.Optional(I.String())});async function pQt(t,e,n){return n.model&&n.status==="enabled"?await t.get(wu).acceptModelPolicy(n.model)?["OK",null]:[null,{code:er.InternalError,message:"Failed to accept model policy"}]:[null,{code:er.InvalidRequest,message:"Invalid model or status"}]}s(pQt,"handleCopilotModelsPolicyChecked");var ije=ot(fQt,pQt);f();f();f();f();function mQt(t,e){let n=e,r=t.lineAt(e.line);return r.isEmptyOrWhitespace||(n=r.range.end),n}s(mQt,"panelPositionForDocument");async function*oje(t){for await(let e of t){let n={...e};n.completionText=n.completionText.trimEnd(),yield n}}s(oje,"trimChoices");var i3=class{constructor(e,n,r,i){this.textDocument=e;this.startPosition=n;this.cancellationToken=r;this.solutionCountTarget=i;this.targetPosition=mQt(this.textDocument,this.startPosition)}static{s(this,"SolutionManager")}get savedTelemetryData(){return this._savedTelemetryData}set savedTelemetryData(e){this._savedTelemetryData=e}};async function kpe(t,e){let n=await t;switch(n.status){case"Solution":await e.onSolution(n.solution),await kpe(n.next,e);break;case"FinishedNormally":await e.onFinishedNormally();break;case"FinishedWithError":await e.onFinishedWithError(n.error);break}}s(kpe,"reportSolutions");async function Bpe(t,e){if(t.isCancellationRequested)return{status:"FinishedWithError",error:"Cancelled"};let n=await e.next();return n.done===!0?{status:"FinishedNormally"}:{status:"Solution",solution:n.value,next:Bpe(t,e)}}s(Bpe,"generateSolutionsStream");function oz(t){return t.replace(/\s+/g,"")}s(oz,"normalizeCompletionText");async function sje(t,e,n,r){let i=e.targetPosition,o=e.textDocument,a=Kx(t,o.uri),l=an(),c=ir.createAndMarkAsIssued({headerRequestId:l,languageId:o.detectedLanguageId,source:n},{});e.savedTelemetryData=await t.get(Dt).updateExPValuesAndAssignments({uri:o.uri,languageId:o.detectedLanguageId},c);let u=await Q5(t,l,Pg(o,i),e.savedTelemetryData);if(u.type==="copilotContentExclusion")return{status:"FinishedNormally"};if(u.type==="contextTooShort")return{status:"FinishedWithError",error:"Context too short"};if(u.type==="promptCancelled")return{status:"FinishedWithError",error:"Prompt cancelled"};if(u.type==="promptTimeout")return{status:"FinishedWithError",error:"Prompt timeout"};if(u.type==="promptError")return{status:"FinishedWithError",error:"Prompt error"};let d=u.prompt,p=u.trailingWs;return p.length>0&&(e.startPosition=Mo.position(e.startPosition.line,e.startPosition.character-p.length)),e.savedTelemetryData=e.savedTelemetryData.extendedBy({},{...RS(d),solutionCount:e.solutionCountTarget,promptEndPos:o.offsetAt(i)}),r.debug(t,"prompt:",d),kt(t,"solution.requested",e.savedTelemetryData),{prompt:d,trailingWs:p,telemetryData:e.savedTelemetryData,repoInfo:a,ourRequestId:l}}s(sje,"setupPromptAndTelemetry");function aje(t,e,n,r,i,o){let a=t.get(Em).forLanguage(t,e.detectedLanguageId,o),l=A0(e.detectedLanguageId),c=uP(e,n),u={language:e.detectedLanguageId,next_indent:c.next??0,prompt_tokens:r.prefixTokens??0,suffix_tokens:r.suffixTokens??0},d={};a==="parsing"&&!l&&(d.stop=[`

`,`\r
\r
`]);let p=Yx(t,o),m;switch(a){case"server":m=s(()=>{},"finishedCb"),u.force_indent=c.prev??-1,u.trim_by_indentation=!0;break;case"parsingandserver":m=l?cP(t,e,i.startPosition,!1):()=>{},u.force_indent=c.prev??-1,u.trim_by_indentation=!0;break;case"parsing":default:m=l?cP(t,e,i.startPosition,!1):()=>{};break}return{extra:u,postOptions:d,finishedCb:m,engineInfo:p}}s(aje,"setupCompletionParams");var Ppe=new Tt("solutions");async function hQt(t,e){let n=e.targetPosition,r=e.textDocument,i=await sje(t,e,"open copilot",Ppe);if("status"in i)return i;let{prompt:o,trailingWs:a,telemetryData:l,repoInfo:c,ourRequestId:u}=i,{extra:d,postOptions:p,finishedCb:m,engineInfo:h}=aje(t,r,n,o,e,l),g=e.cancellationToken,y={prompt:o,languageId:r.detectedLanguageId,repoInfo:c,ourRequestId:u,engineModelId:h.modelId,count:e.solutionCountTarget,uiKind:"synthesize",postOptions:p,headers:h.headers,extra:d},v=await t.get(vd).fetchAndStreamCompletions(t,y,l.extendedBy(),m,g);if(v.type==="failed"||v.type==="canceled")return{status:"FinishedWithError",error:`${v.type}: ${v.reason}`};let b=v.choices;b=oje(b),b=iP(b,k=>EP(t,r,n,k,!1,Ppe));let E=iP(b,async k=>{let P=k.completionText;Ppe.info(t,`Open Copilot completion: [${k.completionText}]`);let N=await rRe(t,r,n,k.completionText)??Mo.position(n.line,0),[U]=M5(r.getText(Mo.range(N,n)));P=U+P;let ne=k.completionText;a.length>0&&ne.startsWith(a)&&(ne=ne.substring(a.length));let he=k.meanLogProb,ae=he!==void 0?Math.exp(he):0,G=l.extendedBy({choiceIndex:k.choiceIndex.toString()});return{completionText:ne,insertText:P,range:Mo.range(N,n),meanProb:ae,meanLogProb:he||0,requestId:k.requestId,choiceIndex:k.choiceIndex,telemetryData:G,copilotAnnotations:k.copilotAnnotations}});return Bpe(g,E[Symbol.asyncIterator]())}s(hQt,"launchSolutions");async function sz(t,e,n){return t.get(Ji).withProgress(async()=>{let i=hQt(t,e);return await kpe(i,n)})}s(sz,"runSolutions");var cje=je(vx()),y6=je(Za());f();f();function az(t,e){let n=t.split(`
`),r=e,i=e,o=n[e.line],a=o.indexOf("%");a!==-1&&(o=o.substring(0,a)+o.substring(a+1),r={line:e.line,character:a});let l=o.indexOf("^");if(l!==-1){let c=o.indexOf("^",l+1);if(c===-1)throw new Error("Challenge document must contain zero or two ^ characters.");o=o.substring(0,l)+o.substring(l+1,c)+o.substring(c+1),r={line:e.line,character:e.character},i={line:e.line,character:e.character+c-l-1}}return{cursorLine:o,lines:n,start:r,end:i}}s(az,"parseChallengeDoc");var gQt=I.Object({text:I.String(),score:I.Number()}),AQt=I.Object({documents:I.Array(gQt),options:I.Optional(I.Object({}))});async function lz(t,e,n){let r=an();for(let i=0;i<e.length&&i<10;i++){let{text:o,score:a}=e[i],{cursorLine:l,lines:c,start:u}=az(o,t),d=[l.slice(Math.min(u.character,t.character))].concat(c.slice(t.line+1)).join(`
`);n.offset=c.slice(0,t.line).reduce((p,m)=>p+m.length+1,0)+u.character,await n.onSolution({requestId:{headerRequestId:r,completionId:an(),created:0,serverExperiments:"",deploymentId:""},completionText:d,insertText:d,range:{start:t,end:t},meanProb:a,meanLogProb:-1,choiceIndex:i,telemetryData:gg.createEmptyConfigForTesting()})}await n.onFinishedNormally()}s(lz,"runTestSolutions");var gh=class{constructor(e){this.documents=e}static{s(this,"ExternalTestingPanelCompletionDocuments")}};function yQt(t,e,n){return t.forceSet(gh,new gh(n.documents)),["OK",null]}s(yQt,"handleTestingSetPanelCompletionDocumentsChecked");var lje=ot(AQt,yQt);var uje=tM.type;function CQt(t,e,n,r,i){let o=oz(r.completionText),a=(0,cje.SHA256)(o).toString();return t.get(is).set(a,{displayText:r.completionText,insertText:r.insertText,offset:n,uuid:a,range:r.range,uri:e.textDocument.uri,telemetry:r.telemetryData.extendedBy({},{rank:i-1}),index:r.choiceIndex,position:e.position,resultType:0,triggerCategory:"solution",copilotAnnotations:r.copilotAnnotations,clientCompletionId:a}),{range:r.range,insertText:r.insertText,command:{command:z0e,title:`Accept completion ${i}`,arguments:[a]}}}s(CQt,"makeCompletion");function Npe(t,e){return`${t}/${e}`}s(Npe,"progressMessage");var Dpe=class{constructor(e,n,r){this.ctx=e;this.params=n;this.onCompletion=r;this.offset=0;this.count=0;this.items=new Map}static{s(this,"SolutionHandler")}get service(){return this.ctx.get(Cn)}async onSolution(e){this.count+=1;let n=CQt(this.ctx,this.params,this.offset,e,this.items.size+1);this.items.has(n.command.arguments[0])||(this.items.set(n.command.arguments[0],n),await this.onCompletion(n)),this.params.workDoneToken!==void 0&&await this.service.connection.sendProgress(y6.WorkDoneProgress.type,this.params.workDoneToken,{kind:"report",message:Npe(this.count,10),percentage:Math.round(100*this.count/10)})}onFinishedNormally(){return xQt(this.params.workDoneToken,this.service,this.count)}async onFinishedWithError(e){if(this.error=e,this.params.workDoneToken!==void 0)return this.service.connection.sendProgress(y6.WorkDoneProgress.type,this.params.workDoneToken,{kind:"end",message:`Error: ${e}`})}};async function xQt(t,e,n=0){t!==void 0&&await e.connection.sendProgress(y6.WorkDoneProgress.type,t,{kind:"end",message:Npe(n,10)})}s(xQt,"reportDone");var A6;async function vQt(t,e,n){let r=await hh(t,n.textDocument,e),i=n.position;n.workDoneToken!==void 0&&await t.get(Cn).connection.sendProgress(y6.WorkDoneProgress.type,n.workDoneToken,{kind:"begin",title:"GitHub Copilot Completions Panel",cancellable:!0,message:Npe(0,10),percentage:0});let o=[],a=s(d=>(o.push(d),Promise.resolve()),"onCompletion"),l=n.partialResultToken;l!==void 0&&(a=s(async d=>{await t.get(Cn).connection.sendProgress(tM.partialResult,l,{items:[d]})},"onCompletion"));let c=new Dpe(t,n,a),u=t.get(gh);if(u.documents){let d=u.documents;await lz(i,d,c)}else{c.offset=r.offsetAt(i);let d=new i3(r,i,e,10);await sz(t,d,c)}return c.error!==void 0?[null,{code:er.InternalError,message:c.error}]:[{items:o},null]}s(vQt,"handleChecked");async function bQt(t,e,n){A6&&(A6.cancel(),A6.dispose()),A6=new wr.CancellationTokenSource;let r=A6.token,i=new Gd([e,r]);try{return await vQt(t,i,n)}catch(o){if(r.isCancellationRequested&&!e.isCancellationRequested)return[null,{code:er.ServerCancelled,message:"Request was superseded by a new request"}];throw o}}s(bQt,"handleCheckedWithAbort");var dje=ot(AIe,bQt);f();f();f();function IQt(t){let{apiUrl:e,serverUrl:n}=t.get(Tu).getConfiguredUrls(),r=new URL("login/device",n).href,i=aM(t),o=new URL("_ping",i.proxy).href,a=new URL("_ping",i.api).href,l=new URL("_ping",i.telemetry).href;function c(u){return new URL(u).host}return s(c,"label"),[{label:c(r),url:r},{label:c(e),url:e},{label:c(o),url:o},{label:c(a),url:a},{label:c(l),url:l}]}s(IQt,"urlsToCheck");async function fje(t,e){let n=IQt(t).map(async({label:r,url:i})=>{let{message:o,status:a}=await TQt(e,i);return{label:r,url:i,message:o,status:a}});return await Promise.all(n)}s(fje,"checkReachability");async function TQt(t,e){try{let n=await t.fetch(e,{}),r=n.status>=200&&n.status<400?"reachable":"unreachable";return{message:`HTTP ${n.status}`+(n.statusText?` - ${n.statusText}`:""),status:r}}catch(n){return{message:String(n),status:"unreachable"}}}s(TQt,"determineReachability");var Rp=je(require("os")),o3=je(require("tls"));async function pje(t){let e=await t.get(Kr).getImplementation();return{sections:[wQt(t),_Qt(),await RQt(t),SQt(),kQt(t,e),await BQt(t,e)]}}s(pje,"collectDiagnostics");function mje(t){return t.sections.map(PQt).join(Rp.EOL+Rp.EOL)}s(mje,"formatDiagnosticsAsMarkdown");function wQt(t){return{name:"Copilot",items:{Version:CI(t),Build:kf(t),Editor:n0(t)["Editor-Version"]}}}s(wQt,"collectCopilotSection");function _Qt(){return{name:"Environment",items:{http_proxy:Hy("http_proxy"),https_proxy:Hy("https_proxy"),no_proxy:Hy("no_proxy"),SSL_CERT_FILE:Hy("SSL_CERT_FILE"),SSL_CERT_DIR:Hy("SSL_CERT_DIR"),OPENSSL_CONF:Hy("OPENSSL_CONF")}}}s(_Qt,"collectEnvironmentSection");function SQt(){return{name:"Node setup",items:{"Number of root certificates":o3.rootCertificates.length,"Operating system":Rp.type(),"Operating system version":Rp.release(),"Operating system architecture":Rp.arch(),NODE_OPTIONS:Hy("NODE_OPTIONS"),NODE_EXTRA_CA_CERTS:Hy("NODE_EXTRA_CA_CERTS"),NODE_TLS_REJECT_UNAUTHORIZED:Hy("NODE_TLS_REJECT_UNAUTHORIZED"),"tls default min version":o3.DEFAULT_MIN_VERSION,"tls default max version":o3.DEFAULT_MAX_VERSION}}}s(SQt,"collectNodeSection");async function RQt(t){let e={};try{let n=await t.get(Gn).getToken();e["Send Restricted Telemetry"]=n.getTokenValue("rt")==="1"?"enabled":"disabled",e.Chat=n.envelope?.chat_enabled?"enabled":void 0,e["Content exclusion"]=n.envelope?.copilotignore_enabled?"enabled":"unavailable"}catch{}return Object.keys(e).forEach(n=>e[n]===void 0&&delete e[n]),{name:"Feature Flags",items:e}}s(RQt,"collectFeatureFlagsSection");function kQt(t,e){let n=t.get(fc).getHttpSettings();return{name:"Network Configuration",items:{Proxy:n.proxy||void 0,"Kerberos SPN":n.proxyKerberosServicePrincipal,"Reject unauthorized":n.proxyStrictSSL===!1?"disabled":"enabled",Fetcher:e.name}}}s(kQt,"collectNetworkConfigSection");async function BQt(t,e){return{name:"Reachability",items:Object.fromEntries((await fje(t,e)).map(({label:r,status:i,message:o})=>[r,o]))}}s(BQt,"collectReachabilitySection");function Hy(t){let e=Object.keys(process.env).find(n=>n.toLowerCase()===t.toLowerCase());return e?process.env[e]:void 0}s(Hy,"findEnvironmentVariable");function PQt(t){return`## ${t.name}`+Rp.EOL+Rp.EOL+Object.keys(t.items).filter(e=>e!=="name").map(e=>`- ${e}: ${t.items[e]??"n/a"}`).join(Rp.EOL)}s(PQt,"formatSectionAsMarkdown");var DQt=I.Object({});async function NQt(t){return[{report:mje(await pje(t))},null]}s(NQt,"handleDiagnosticsChecked");var hje=ot(DQt,NQt);f();f();f();f();function gje(t,e,n){function r(o,a,l){let c=new RegExp(`^(${a})+`,"g");return o.split(`
`).map(u=>{let d=u.replace(c,""),p=u.length-d.length;return l(p)+d}).join(`
`)}s(r,"replace");let i;if(t.tabSize===void 0||typeof t.tabSize=="string"?i=4:i=t.tabSize,t.insertSpaces===!1){let o=s(a=>r(a," ",l=>"	".repeat(Math.floor(l/i))+" ".repeat(l%i)),"r");e.displayText=o(e.displayText),e.completionText=o(e.completionText)}else if(t.insertSpaces===!0){let o=s(a=>r(a,"	",l=>" ".repeat(l*i)),"r");if(e.displayText=o(e.displayText),e.completionText=o(e.completionText),n){let a=s(l=>{if(l==="")return l;let c=l.split(`
`)[0],u=c.length-c.trimStart().length,d=u%i;if(d!==0&&u>0){let p=" ".repeat(d);return r(l,p,m=>" ".repeat((Math.floor(m/i)+1)*i))}else return l},"re");e.displayText=a(e.displayText),e.completionText=a(e.completionText)}}return e}s(gje,"normalizeIndentCharacter");function Aje(t,e,n,r,i,o,a){let l=r.lineAt(i),c=e.map(u=>{let d=Mo.range(Mo.position(i.line,0),Mo.position(i.line,i.character+u.suffixCoverage)),p="";if(o&&(u.completion=gje(o,u.completion,l.isEmptyOrWhitespace)),l.isEmptyOrWhitespace&&(u.completion.displayNeedsWsOffset||u.completion.completionText.startsWith(l.text)))p=u.completion.completionText;else{let h=Mo.range(d.start,i);p=r.getText(h)+u.completion.displayText}return{uuid:an(),insertText:p,range:d,uri:r.uri,index:u.completion.completionIndex,telemetry:u.telemetry,displayText:u.completion.displayText,position:i,offset:r.offsetAt(i),resultType:n,copilotAnnotations:u.copilotAnnotations,clientCompletionId:u.clientCompletionId}});if(n===2&&a!==void 0){let u=c.find(d=>d.index===a);if(u){let d=c.filter(p=>p.index!==a);c=[u,...d]}}return c}s(Aje,"completionsFromGhostTextResults");async function Lpe(t,e,n,r={}){let i=0;r.selectedCompletionInfo?.text&&!r.selectedCompletionInfo.text.includes(")")&&(e=e.addSelectedCompletionInfo(r.selectedCompletionInfo),i=e.position.character-r.selectedCompletionInfo.range.end.character);let o=await foe(t,e,n,r);if(o.type!=="success")return o;let[a,l]=o.value;if(n?.isCancellationRequested)return{type:"canceled",reason:"after getGhostText",telemetryData:{telemetryBlob:o.telemetryBlob}};let c=q3e(t,e.textDocument,e.position,l),u=Aje(t,a,l,e.textDocument,e.position,r.formattingOptions,c);if(u.length===0)return{type:"empty",reason:"no completions in final result",telemetryData:o.telemetryData};let d=t.get(Dt),p=(Ai(t,wt.AlwaysRequestMultiline)??d.enableProgressiveReveal(o.telemetryBlob))&&Pm.isSupported(e.textDocument.detectedLanguageId),m=Ai(t,wt.EnableSpeculativeRequests),h=d.enableSpeculativeRequests(o.telemetryBlob),g=p||(m??h),y=Ai(t,wt.EnableSpeculativeRequestsShown)??d.enableSpeculativeRequestsShown(o.telemetryBlob);if(g&&l!==2){e=e.applyEdits([{newText:u[0].insertText,range:u[0].range}]);let b={isSpeculative:!0,opportunityId:r.opportunityId},E=s(()=>foe(t,e,void 0,b),"fn");y?t.get(Jf).set(u[0].clientCompletionId,E):Promise.resolve().then(E)}let v=u.map(b=>{let{start:E,end:_}=b.range,k=wr.Range.create(E,wr.Position.create(_.line,_.character-i));return{...b,range:k}});return{...o,value:v}}s(Lpe,"getInlineCompletionsResult");async function cz(t,e,n,r,i={}){LQt(t,e,n);let o=await Lpe(t,Pg(e,n),r,i);return P4e(t,o)}s(cz,"getInlineCompletions");function LQt(t,e,n){let r=e.getText({start:{line:Math.max(n.line-1,0),character:0},end:n}),i=e.getText({start:n,end:{line:Math.min(n.line+2,e.lineCount-1),character:e.lineCount-1>n.line?0:n.character}});mU.debug(t,`Requesting for ${e.uri} at ${n.line}:${n.character}`,`between ${JSON.stringify(r)} and ${JSON.stringify(i)}.`)}s(LQt,"logCompletionLocation");var Eje=je(Za());f();var yje=require("crypto");var s3=class{static{s(this,"LspClientContextProvider")}constructor(e,n,r){this.id=n,this.selector=r,this.resolver=new Mpe(e,this.id)}},Mpe=class{constructor(e,n){this.ctx=e;this.id=n;this.contextItems=[];this.update=!1}static{s(this,"LspClientContextResolver")}async resolve(e,n){let r=[];if(this.contextItems.length>0)r=this.contextItems;else if(this.update){let i=this.ctx.get(Cn),o=(0,yje.randomUUID)(),a=i.connection.onProgress(XF.type,o,l=>{r.push(...l)});n.onCancellationRequested(()=>{a?.dispose()});try{let l=await i.connection.sendRequest(XF.type,{providerId:this.id,data:this.data,textDocument:{uri:e.documentContext.uri,languageId:e.documentContext.languageId,version:e.documentContext.version},position:e.documentContext.position,partialResultToken:o},n);r.push(...l)}finally{a?.dispose()}}return this.reset(),Promise.resolve(r)}setContextItems(e){this.contextItems=e}clearContextItems(){this.contextItems=[]}setUpdate(e){this.update=e}clearData(){this.data=void 0}reset(){this.clearContextItems(),this.clearData(),this.setUpdate(!1)}};function a3(t,e,n){try{let r=t.get(Ba),i=new Map;r.providers.forEach(o=>{i.set(o.id,o)}),e.providers.forEach(o=>{let a=i.get(o.id);a&&a instanceof s3&&a.resolver.setContextItems(o.contextItems)}),e.updating&&e.updating.length>0&&e.updating.forEach(o=>{let a=i.get(o);a&&a instanceof s3&&(a.resolver.setUpdate(!0),a.resolver.data=n)})}catch(r){or.error(t,"Failed to set context items on context providers",r)}}s(a3,"setContextItems");var Fpe={nocase:!0,matchBase:!0,nonegate:!0,dot:!0};async function Cje(t,e,n){return e.map(i=>{try{if(typeof i=="string")return ka(n.uri,i,Fpe);if(typeof i=="object"){let o=!0;return"language"in i&&(o&&=n.languageId==(i.language||"")),"scheme"in i&&(o&&=ka(n.uri,i.scheme||"",Fpe)),"pattern"in i&&(o&&=ka(n.uri,i.pattern||"",Fpe)),o}}catch{return!1}return!1}).some(Boolean)?10:0}s(Cje,"match");f();var FQt=I.Object({documents:I.Array(I.String()),basename:I.Optional(I.String()),options:I.Optional(I.Object({}))}),Ub=class{constructor(e,n){this.documents=e;this.basename=n}static{s(this,"ExternalTestingCompletionDocuments")}};function MQt(t,e,n){return t.forceSet(Ub,new Ub(n.documents,n.basename||"")),["OK",null]}s(MQt,"handleTestingSetCompletionDocumentsChecked");var xje=new Tt("setCompletionDocuments"),bje=ot(FQt,MQt);function uz(t,e,n,r){let i=t.get(Ub);if(i.documents){let o=r?3:1;if(n&&i.basename&&i.basename.trim().length>0){xje.debug(t,`Returning filtered completions by basename ${i.basename}`);let a=QQt(i,n);return a&&a.length>0?vje(a,o,e):void 0}else return xje.debug(t,"Returning completions for all pre-set documents"),vje(i.documents,o,e)}}s(uz,"getTestCompletions");function vje(t,e,n){return t.slice(0,e).map(r=>{let{cursorLine:i,lines:o,start:a,end:l}=az(r,n);return{insertText:[i.slice(Math.min(a.character,n.character))].concat(o.slice(n.line+1)).join(`
`),range:{start:a,end:l}}})}s(vje,"sliceAndMapCompletions");function QQt(t,e){return t.basename===Ti(e)?t.documents||[]:[]}s(QQt,"getFilteredDocs");var Ije=I.Object({doc:I.Object({position:Ll,insertSpaces:I.Optional(I.Boolean()),tabSize:I.Optional(I.Number()),uri:e8,version:I.Number()}),contextItems:I.Optional(hie)}),C6;async function Tje(t,e,n,r){C6&&(C6.cancel(),C6.dispose()),C6=new wr.CancellationTokenSource;let i=new Gd([e,C6.token]);n.contextItems&&a3(t,n.contextItems);let o=uz(t,n.doc.position,n.doc.uri,r);if(o)return[{completions:o.map(m=>({uuid:an(),text:m.insertText,displayText:m.insertText,position:n.doc.position,range:m.range,docVersion:n.doc.version}))},null];let a;try{a=await hh(t,n.doc,i)}catch(p){if(!(p instanceof Eje.ResponseError))throw p;switch(p.code){case er.CopilotNotAvailable:case er.ContentModified:return[{completions:[]},null]}throw p}let l=n.doc.position,c=await cz(t,a,l,i,{isCycling:r,formattingOptions:n.doc});if(!c)return[{completions:[]},null];let u=t.get(is);for(let p of c)u.set(p.uuid,{...p,triggerCategory:"ghostText"});return[{completions:c.map(p=>({uuid:p.uuid,text:p.insertText,range:p.range,displayText:p.displayText,position:p.position,docVersion:a.version}))},null]}s(Tje,"handleGetCompletionsHelper");var wje=ot(Ije,(t,e,n)=>Tje(t,e,n,!1)),_je=ot(Ije,(t,e,n)=>Tje(t,e,n,!0));f();var Sje=je(vx()),l3=je(Za());var OQt=I.Object({doc:I.Object({position:Ll,uri:e8,version:I.Number()}),panelId:I.String()});function UQt(t,e,n,r,i){let o=oz(i.completionText),a=(0,Sje.SHA256)(o).toString();return t.get(is).set(a,{displayText:i.insertText,insertText:i.completionText,offset:r,uuid:a,range:n,uri:e.doc.uri,telemetry:i.telemetryData,index:i.choiceIndex,position:n.end,resultType:0,triggerCategory:"solution",copilotAnnotations:i.copilotAnnotations,clientCompletionId:a}),{panelId:e.panelId,range:n,completionText:i.completionText,displayText:i.insertText,score:i.meanProb,solutionId:a}}s(UQt,"makeSolution");var Qpe=class{constructor(e,n,r){this.ctx=e;this.params=n;this.range=r;this.offset=0}static{s(this,"SolutionHandler")}get service(){return this.ctx.get(Cn)}onSolution(e){return this.service.connection.sendNotification(new l3.NotificationType("PanelSolution"),UQt(this.ctx,this.params,this.range,this.offset,e))}onFinishedNormally(){return Rje(this.params.panelId,this.service)}onFinishedWithError(e){return this.service.connection.sendNotification(new l3.NotificationType("PanelSolutionsDone"),{status:"Error",message:e,panelId:this.params.panelId})}};async function Rje(t,e){return e.connection.sendNotification(new l3.NotificationType("PanelSolutionsDone"),{status:"OK",panelId:t})}s(Rje,"reportDone");var x6;async function qQt(t,e,n){x6&&(x6.cancel(),x6.dispose()),x6=new wr.CancellationTokenSource;let r=new Gd([e,x6.token]),i=n.doc.position,o=Mo.range(i,i),a=new Qpe(t,n,o),l=t.get(gh);if(l.documents){let c=l.documents;lz(i,c,a)}else{let c;try{c=await hh(t,n.doc,r)}catch(d){if(!(d instanceof l3.ResponseError))throw d;switch(d.code){case er.CopilotNotAvailable:case er.ContentModified:return WQt(t,n)}throw d}a.offset=c.offsetAt(i);let u=new i3(c,i,r,10);sz(t,u,a)}return[{solutionCountTarget:10},null]}s(qQt,"handleGetPanelCompletionsChecked");async function WQt(t,e){return await Rje(e.panelId,t.get(Cn)),[{solutionCountTarget:0},null]}s(WQt,"produceEmptySolutions");var kje=ot(OQt,qQt);f();var HQt=I.Object({});function GQt(t,e,n){return[{version:t.get(zi).getDisplayVersion(),buildType:kf(t),runtimeVersion:`node/${process.versions.node}`},null]}s(GQt,"handleGetVersionChecked");var Bje=ot(HQt,GQt);f();var jQt=I.Object({changes:I.Array(I.String()),userCommits:I.Array(I.String()),recentCommits:I.Array(I.String()),workspaceFolder:I.Optional(I.String()),userLanguage:I.Optional(I.String())});async function VQt(t,e){let n=["You are an AI programming assistant, helping a software developer to come up with the best git commit message for their code changes.","You excel in interpreting the purpose behind code changes to craft succinct, clear commit messages that adhere to the repository's guidelines.","","# First, think step-by-step:","1. Analyze the CODE CHANGES thoroughly to understand what's been modified.","2. Identify the purpose of the changes to answer the *why* for the commit messages, also considering the optionally provided RECENT USER COMMITS.","3. Review the provided RECENT REPOSITORY COMMITS to identify established commit message conventions. Focus on the format and style, ignoring commit-specific details like refs, tags, and authors.","4. Generate a thoughtful and succinct commit message for the given CODE CHANGES. It MUST follow the established writing conventions.","5. Remove any meta information like issue references, tags, or author names from the commit message. The developer will add them.","6. Now only show your message, wrapped with a single markdown ```text codeblock! Do not provide any explanations or details"];return e&&n.push(`
Current git branch name: ${e}`),t&&n.push(`
Respond in the following locale: ${t}`),n.join(`
`)}s(VQt,"buildSystemMessage");function $Qt(t,e){let n=[];return t.userCommits.length>0&&n.push("# RECENT USER COMMITS (For reference only, do not copy!):",t.userCommits.map(r=>`- ${r}`).join(`
`),""),t.recentCommits.length>0&&n.push("# RECENT REPOSITORY COMMITS (For reference only, do not copy!):",t.recentCommits.map(r=>`- ${r}`).join(`
`),""),n.push("# CODE CHANGES:",t.changes.join(`
`),"","<reminder>","Now generate a commit message that describes the CODE CHANGES.","DO NOT COPY commits from RECENT COMMITS, but use them as reference for the commit style.","ONLY return a single markdown code block, NO OTHER PROSE!","```text","commit message goes here","```","</reminder>"),e&&n.push("<custom-instructions>",e,"</custom-instructions>"),n.join(`
`)}s($Qt,"buildUserMessage");async function zQt(t,e,n){if(n.changes.length===0)return[null,{code:er.InvalidRequest,message:"No changes provided"}];let r=new ta(t),i=await xo.getModelConfiguration(t,"gitCommit"),o=[{uri:n.workspaceFolder?n.workspaceFolder:pl(process.cwd())}],a=await iA.getInstructions(t,o,{includeCodeGenerationInstructions:!1,includeCommitMessageGenerationInstructions:!0,customIntroduction:"When generating the commit message, please use the following custom instructions provided by the user."}),l=t.get(ki),c=l.create({capabilities:{skills:[IA]}}),u=new kb({message:"",type:"user"});await l.addTurn(c.id,u);let d=e3({workDoneToken:an()});await t.get(ws).begin(c,u,d);let h=(await new Mb(t,c,u,e).skillResolver.resolve(IA))?.head?.name,g=[{role:"system",content:await VQt(n.userLanguage,h)},{role:"user",content:$Qt(n,a)}],y=await t.get(Dt).updateExPValuesAndAssignments(),v=await r.fetchResponse({modelConfiguration:i,messages:g,uiKind:"conversationPanel",intentParams:{intent:!0},llmInteraction:Hd.user("git-commit",an())},e,y);if(v.type!=="success")return[null,{code:er.InternalError,message:"Failed to generate commit message"}];let b=v.value.match(/```text\n([\s\S]*?)\n```/);return[{commitMessage:b?b[1].trim():v.value.trim()},null]}s(zQt,"handleGitCommitGenerateChecked");var Pje=ot(jQt,zQt);f();var Nje=zee.type,v6;function Dje(t){return{title:"Completion Accepted",command:K9,arguments:[t]}}s(Dje,"makeCommand");async function YQt(t,e,n){v6&&(v6.cancel(),v6.dispose());let r=n.context.triggerKind===1;v6=new wr.CancellationTokenSource;let i=v6.token,o=new Gd([e,i]);n.contextItems&&a3(t,n.contextItems,n.data);let a=uz(t,n.position,n.textDocument.uri,r);if(a)return[{items:a.map(h=>({command:Dje(an()),...h}))},null];let l=await hh(t,n.textDocument,o),c=n.position,u=await cz(t,l,c,o,{isCycling:r,selectedCompletionInfo:n.context.selectedCompletionInfo,formattingOptions:n.formattingOptions,data:n.data});if(!u)return e.isCancellationRequested?[null,{code:er.RequestCancelled,message:"Request was canceled"}]:i.isCancellationRequested?[null,{code:er.ServerCancelled,message:"Request was superseded by a new request"}]:[{items:[]},null];let d=t.get(is);for(let m of u)d.set(m.uuid,{...m,triggerCategory:"ghostText"});return[{items:u.map(m=>({command:Dje(m.uuid),insertText:m.insertText,range:m.range}))},null]}s(YQt,"handleChecked");var Lje=ot(yU,(t,e,n)=>YQt(t,e,n));f();var Fje=Jee.type,b6;async function JQt(t,e,n){b6&&(b6.cancel(),b6.dispose());let r=n.context.triggerKind===1;b6=new wr.CancellationTokenSource;let i=b6.token,o=new Gd([e,i]);n.contextItems&&a3(t,n.contextItems);let a=await hh(t,n.textDocument,o),l=await Lpe(t,Pg(a,n.position),o,{promptOnly:!0,isCycling:r,selectedCompletionInfo:n.context.selectedCompletionInfo,formattingOptions:n.formattingOptions,data:n.data});if(l.type!=="promptOnly")throw new Error(`Unexpected result type ${l.type}`);return[{prompt:l.prompt},null]}s(JQt,"handleChecked");var Mje=ot(yU,(t,e,n)=>JQt(t,e,n));f();f();function Ope(t){let e=t.indexOf("-----BEGIN CERTIFICATE-----")+27,n=t.indexOf("-----END CERTIFICATE-----"),r=30,i=t.substring(e,e+r)+"..."+t.substring(n-r,n-1);return c3(i)}s(Ope,"asReadableCert");function c3(t){return t.replace(/\s/g,"")}s(c3,"normalizeNewlines");var ZQt=I.Object({});async function eOt(t){return[{certificates:(await t.get(rl).getAllRootCAs()).map(c3)},null]}s(eOt,"handleListCertificatesChecked");var Qje=ot(ZQt,eOt);f();async function tOt(t,e,n){let r=t.get(lh);if(n.textDocument.version===void 0)throw new Error("textDocument.version is undefined");let i=mc(n.textDocument.uri);t.get(Lm).onUserPositionChange(i,new rr(n.position.line,n.position.character));let o=await r.handleNextEditRequest(i,n.textDocument.version,e);return o?[{edits:o.map(l=>({text:l.edit.text,textDocument:l.edit.textDocument,range:l.edit.range,command:{title:"Accept inline edit",command:K9,arguments:[l.id]}}))},null]:[{edits:[]},null]}s(tOt,"handleChecked");var Oje=ot(hIe,tOt);f();var nOt=I.Object({uuid:I.String({minLength:1}),acceptedLength:I.Optional(I.Number({minimum:1}))});function rOt(t,e,n){let r=t.get(is),i=r.get(n.uuid);if(i){r.delete(n.uuid);let o=iOt(n,i);y2(t,i.triggerCategory,i.displayText,i.offset,i.uri,i.telemetry,o,i.copilotAnnotations)}return["OK",null]}s(rOt,"notifyAcceptedChecked");function iOt(t,e){return t.acceptedLength===void 0?{compType:"full"}:t.acceptedLength<e.insertText.length?{compType:"partial",acceptedLength:t.acceptedLength}:{compType:"full"}}s(iOt,"getSuggestionStatus");var Uje=ot(nOt,rOt);f();var oOt=I.Object({uuids:I.Array(I.String())});function sOt(t,e,n){let r=t.get(is),i=n.uuids.flatMap(o=>r.get(o)??[]);if(i.length>0){let o=i[0];for(let l of n.uuids)r.delete(l);let a=i.map(l=>({completionText:l.displayText,completionTelemetryData:l.telemetry}));pq(t,"ghostText",o.offset,o.uri,a),t.get(Fu).resetState()}return["OK",null]}s(sOt,"notifyRejectedChecked");var qje=ot(oOt,sOt);f();var aOt=I.Object({uuid:I.String({minLength:1})});function lOt(t,e,n){let i=t.get(is).get(n.uuid);return i&&hU(t,i.triggerCategory,i),["OK",null]}s(lOt,"notifyShownChecked");var Wje=ot(aOt,lOt);f();var cOt=G4e;function uOt(t,e,n){let r=t.get(Ba),i={unregistered:[],registered:[]};return n.providers.forEach(o=>{try{let a=new s3(t,o.id,o.selector);r.registerContextProvider(a),i.registered.push(o.id)}catch{i.unregistered.push(o.id)}}),[i,null]}s(uOt,"registerContextProviders");var Hje=ot(cOt,uOt);f();f();var dOt=I.Object({uri:I.Optional(I.String())}),fOt=I.Object({showEditorCompletions:I.Optional(I.Boolean()),enableAutoCompletions:I.Optional(I.Boolean()),delayCompletions:I.Optional(I.Boolean()),filterCompletions:I.Optional(I.Boolean())}),jje=I.Object({github:I.Optional(I.Object({copilot:I.Optional(I.Object({}))})),[PAe]:I.Optional(dOt),http:I.Optional(aTe),telemetry:I.Optional(I.Object({telemetryLevel:I.Optional(I.String())}))}),qpe=Object.keys(jje.properties).filter(t=>t!=="github"),pOt=I.Intersect([jje,fOt]),mOt=I.Object({settings:I.Optional(I.Union([I.Object({}),I.Array(I.Unknown(),{maxItems:0})])),authProvider:I.Optional(I.Never())}),Gje=ms.Compile(mOt),Upe=ms.Compile(pOt);async function Vje(t,e){if(!Gje.Check(e))throw new Ic(Gje.Errors(e));let n=Array.isArray(e.settings)?{}:e.settings;n&&Wpe(t,n),await E6(t,n)}s(Vje,"notifyChangeConfiguration");function Wpe(t,e){for(let i of Upe.Errors(e)){let o=i.path.split("/")?.[1];_c.warn(t,`Invalid ${i.path.slice(1).replace(/\//g,".")} setting:`,i.message),delete e[o]}if(!Upe.Check(e))throw new Ic(Upe.Errors(e));let n=t.get(uh);n.setConfig(wt.ShowEditorCompletions,e.showEditorCompletions),n.setConfig(wt.DelayCompletions,e.delayCompletions),n.setConfig(wt.EnableAutoCompletions,e.enableAutoCompletions),n.setConfig(wt.FilterCompletions,e.filterCompletions),e.http&&Hpe(t,e.http);let r=e["github-enterprise"];r&&DIe(t,r.uri),e.github?.copilot&&hOt(t,e.github.copilot)}s(Wpe,"applySettingsToConfiguration");function hOt(t,e){let n=t.get(uh);for(let r of Object.values(wt)){let i=fTe(e,r);n.setConfig(r,i)}typeof e.mcp=="string"&&yOt(t,e.mcp),gOt(t,e.globalCopilotInstructions||""),AOt(t,e.globalGitCommitInstructions||"")}s(hOt,"applyCopilotConfiguration");function gOt(t,e){try{t.get(nA).setGlobalCopilotInstructions(e)}catch(n){_c.error(t,"Failed to apply global Copilot instructions configuration",n)}}s(gOt,"applyGlobalCopilotInstructionsConfiguration");function AOt(t,e){try{t.get(nA).setGlobalGitCommitInstructions(e)}catch(n){_c.error(t,"Failed to apply global Git commit instructions configuration",n)}}s(AOt,"applyGlobalGitCommitInstructionsConfiguration");function Hpe(t,e){let n=t.get(uh);e.proxy===void 0&&(e=lTe(n.env));try{n.setHttpSettings(v8(e))}catch(r){if(!(r instanceof TypeError))throw r;_c.warn(t,"Invalid proxy URL",e.proxy,r),n.setHttpSettings({proxy:""})}}s(Hpe,"applyHttpConfiguration");async function yOt(t,e){try{let n=JSON.parse(e||"{}");await t.get(gp).updateMCPServers(n)}catch(n){_c.error(t,"Failed to apply MCP configuration",n)}}s(yOt,"applyMCPConfiguration");async function E6(t,e){if(!t.get(Go).getCapabilities().redirectedTelemetry){let n=(e?.telemetry?.telemetryLevel??"all")==="all";t.get(md).initialize(n)}await t.get(Gn).primeToken()}s(E6,"initializePostConfigurationDependencies");var $je=I.Object({name:I.String(),version:I.String(),readableName:I.Optional(I.String())}),COt=I.Object({editorInfo:$je,editorPluginInfo:$je,editorConfiguration:I.Optional(I.Object({})),authProvider:I.Optional(I.Never()),redirectTelemetry:I.Optional(I.Boolean()),options:I.Optional(I.Object({}))});async function xOt(t,e,n){return t.get(ur).setEditorAndPluginInfo(n.editorPluginInfo,n.editorInfo),pV(t,["setEditorInfo is deprecated. Use initializationOptions for editorInfo and editorPluginInfo","and workspace/didChangeConfiguration for editorConfiguration."]),n.editorConfiguration&&Wpe(t,n.editorConfiguration),await E6(t,n.editorConfiguration),["OK",null]}s(xOt,"handleSetEditorInfoChecked");var zje=ot(COt,xOt);f();var vOt=I.Object({options:I.Optional(I.Object({}))});async function bOt(t,e,n){let r=t.get(_r).pendingSignIn?.status;if(r===void 0)return[null,{code:er.InvalidRequest,message:"No pending sign in"}];let i;try{return i=await r,[i,null]}catch(o){return[null,{code:er.DeviceFlowFailed,message:String(o)}]}finally{t.get(_r).pendingSignIn=void 0}}s(bOt,"handleSignInConfirmChecked");var Yje=ot(vOt,bOt);f();var EOt=I.Object({options:I.Optional(I.Object({})),githubAppId:I.Optional(I.String())});async function IOt(t,e,n){try{let r=t.get(_r),i=await r.checkAndUpdateStatus({githubAppId:n.githubAppId});if(i.status==="OK")return[{status:"AlreadySignedIn",user:i.user},null];let o=n.githubAppId??t.get(Fl).findAppIdToAuthenticate(),a=await t.get(ZI).getToken(t,o,r.getConfiguredUrls()),l=a.waitForAuth.then(async c=>(t.get(Fl).githubAppId=o,await t.get(_r).setPersistedSession(c),await t.get(_r).checkAndUpdateStatus({freshSignIn:!0})));return t.get(_r).pendingSignIn={verificationUri:a.verification_uri,status:l},[{status:"PromptUserDeviceFlow",userCode:a.user_code,verificationUri:a.verification_uri,expiresIn:a.expires_in,interval:a.interval,command:{command:TV,title:"Sign in with GitHub",arguments:[]}},null]}catch(r){if(!(r instanceof ls))throw r;return[null,{code:er.DeviceFlowFailed,message:r.message}]}}s(IOt,"handleSignInInitiateChecked");var Gpe=ot(EOt,IOt);f();var TOt=I.Object({githubToken:I.String({minLength:1}),user:I.String({minLength:1}),githubAppId:I.Optional(I.String({minLength:1}))});async function wOt(t,e,n){let r=n.githubToken,i=n.user,o=n.githubAppId;return await t.get(_r).setPersistedSession({accessToken:r,login:i,githubAppId:o}),[await t.get(_r).checkAndUpdateStatus(),null]}s(wOt,"handleSignInWithGithubTokenChecked");var Kje=ot(TOt,wOt);f();var _Ot=I.Object({options:I.Optional(I.Object({}))});async function SOt(t,e,n){return await t.get(_r).deletePersistedSession(),[await t.get(_r).checkAndUpdateStatus(),null]}s(SOt,"handleSignOutChecked");var Jje=ot(_Ot,SOt);f();var ROt=I.Object({transaction:I.Optional(I.String()),stacktrace:I.Optional(I.String()),properties:I.Optional(I.Record(I.String(),I.String())),platform:I.Optional(I.String()),exception_detail:I.Optional(I.Array(I.Object({type:I.Optional(I.String()),value:I.Optional(I.String()),stacktrace:I.Optional(I.Array(I.Object({filename:I.Optional(I.String()),lineno:I.Optional(I.Union([I.String(),I.Integer()])),colno:I.Optional(I.Union([I.String(),I.Integer()])),function:I.Optional(I.String()),in_app:I.Optional(I.Boolean())})))})))}),jpe=class extends Error{constructor(n,r){super(n);this.code=r;this.name="AgentEditorError"}static{s(this,"AgentEditorError")}};function kOt(t,e,n){let r=t.get(zi),i=t.get(ur).getEditorPluginInfo(),o=n.properties||{},a;n.platform&&n.exception_detail&&CA.has(i.name)&&(a=Object.assign({rollup_id:"auto",context:mX(t),sensitive_context:{},deployed_to:r.getBuildType(),platform:n.platform,exception_detail:n.exception_detail},CA.get(i.name)),n.transaction&&(a.transaction=n.transaction),r.getBuildType()!=="dev"&&(a.release=`${a.app}@${i.version}`));let l=new jpe(n.stacktrace??"N/A",i.name);return l.stack=void 0,wa(t,l,void 0,o,a),["OK",null]}s(kOt,"handleTelemetryExceptionChecked");var Xje=ot(ROt,kOt);f();f();function Zje(t={}){return{accessToken:an(),...t,...Gx(t)}}s(Zje,"testGitHubSession");var dz=class extends _r{static{s(this,"NotAuthManager")}constructor(e){super(e,{})}getPersistedSession(){return Promise.resolve(void 0)}checkAndUpdateStatus(){return Promise.resolve({status:"NotSignedIn"})}},u3=class extends _r{constructor(n,r="",i){super(n,{});this.githubAppId=r;this.overrideTokenManager=i}static{s(this,"AlwaysAuthManager")}get _copilotTokenManager(){return this.overrideTokenManager??super._copilotTokenManager}getPersistedSession(){return Promise.resolve({login:"user",accessToken:"",githubAppId:this.githubAppId,...this.getConfiguredUrls()})}};f();function BOt(t){return new EI({token:`test token ${an()}`,refresh_in:0,expires_at:0,...t},void 0)}s(BOt,"createTestCopilotToken");var I6=class extends Gn{constructor(n){super();this.envelopeFn=n;this.wasReset=!1;this.ghSession=Zje()}static{s(this,"FakeCopilotTokenManagerFromEnvelope")}async getGitHubSession(){return Promise.resolve(this.ghSession)}async getToken(){return this.copilotToken??=this.envelopeFn().then(n=>BOt(n)),this.copilotToken}resetToken(){this.wasReset=!0}checkCopilotToken(){return Promise.resolve({status:"OK"})}},fz=class extends I6{static{s(this,"TestCopilotTokenManager")}constructor(e){super(()=>Promise.resolve(e??{}))}},d3=class extends fz{static{s(this,"FixedCopilotTokenManager")}constructor(e){super({token:e})}};var POt=I.Object({options:I.Optional(I.Object({}))});async function DOt(t,e,n){let r=new d3("tid=valid-copilot-token");return t.forceSet(_r,new u3(t,"",r)),t.get(Gn).resetToken(),t.get(Ji).forceNormal(),await new Promise(i=>setTimeout(i,0)),["OK",null]}s(DOt,"handleTestingAlwaysAuthChecked");var eVe=ot(POt,DOt);f();var NOt=I.Object({messages:I.Array(I.Object({role:I.Enum(Al),content:I.String(),name:I.Optional(I.String())})),modelFamily:I.Optional(I.Enum(sr)),stop:I.Optional(I.Array(I.String())),conversationOptions:I.Optional(I.Object({maxResponseTokens:I.Optional(I.Number()),temperature:I.Optional(I.Number())}))});async function LOt(t,e,n){let r=new ta(t),i=await t.get(na).getBestChatModelConfig([n.modelFamily??sr.CopilotBase]),o=await oP(t,"","");return[await r.fetchResponse({modelConfiguration:i,messages:n.messages,uiKind:"conversationIntegrationTest",stop:n.stop,intentParams:{intent:!0},llmInteraction:Hd.user("test",an())},e,o),null]}s(LOt,"handleChatMLChecked");var tVe=ot(NOt,LOt);f();f();f();var C3=je(g$e(),1),Xzr={ALPN_HTTP2:C3.default.ALPN_HTTP2,ALPN_HTTP2C:C3.default.ALPN_HTTP2C,ALPN_HTTP1_1:C3.default.ALPN_HTTP1_1,ALPN_HTTP1_0:C3.default.ALPN_HTTP1_0},{fetch:Zzr,context:A$e,reset:eYr,noCache:tYr,h1:nYr,keepAlive:rYr,h1NoCache:iYr,keepAliveNoCache:oYr,cacheStats:sYr,clearCache:aYr,offPush:lYr,onPush:cYr,createUrl:uYr,timeoutSignal:dYr,Body:fYr,Headers:y$e,Request:pYr,Response:mYr,AbortController:hYr,AbortError:Dz,AbortSignal:gYr,FetchBaseError:AYr,FetchError:yYr,ALPN_HTTP2:CYr,ALPN_HTTP2C:xYr,ALPN_HTTP1_1:vYr,ALPN_HTTP1_0:bYr}=C3.default;var x$e=require("crypto"),v$e=require("http"),b$e=require("stream"),E$e=require("util"),v3=je(_m());var TWt=9e4,wWt=new v3.ProtocolRequestType("copilot/fetch"),_Wt=new v3.ProtocolRequestType("copilot/fetchCancel"),SWt=new v3.ProgressType,RWt=new v3.ProtocolRequestType("copilot/fetchDisconnectAll"),PA=class extends Error{static{s(this,"EditorFetcherError")}constructor(e){super(e),this.name="EditorFetcherError"}},x3=class extends Kr{constructor(n){super();this.ctx=n;this.name="EditorFetcher";this.userAgent=`GithubCopilot/${n.get(zi).getVersion()}`}static{s(this,"EditorFetcher")}disconnectAll(){return this.ctx.get(Cn).connection.sendRequest(RWt,{})}async fetch(n,r){r.headers||={},r.headers["user-agent"]=this.userAgent;let{signal:i}=r,o=this.ctx.get(Cn).connection,a=(0,x$e.randomUUID)(),l=new wr.CancellationTokenSource,c=new b$e.PassThrough,u=s(()=>{o.sendRequest(_Wt,{workDoneToken:a})},"sendCancelRequest"),d=s(()=>{c.emit("error",new Dz("EditorFetch request aborted")),c.end()},"destroyBodyStream");if(i){if(!(i instanceof AbortSignal))throw new PA("EditorFetcher received unexpected abort signal");if(i.aborted)throw new Dz("EditorFetcher signal aborted before fetch");i.addEventListener("abort",u)}o.onProgress(SWt,a,m=>{m.kind==="end"?(i?.removeEventListener("abort",u),i?.removeEventListener("abort",d),m.error&&c.emit("error",new PA(m.error)),c.end()):m.kind==="report"&&c.write(m.chunk)});let p=await new Promise((m,h)=>{let g=setTimeout(()=>{h(new PA("Request timed out from lsp server"))},r.timeout??TWt),y=s(()=>{h(new Dz("EditorFetcher request aborted"))},"rejectIfAborted");i?.addEventListener("abort",y),o.sendRequest(wWt,BWt(n,a,r),l.token).then(m).catch(v=>{let b="EditorFetcher request failed";v&&typeof v=="object"&&"message"in v&&(b+=`: ${String(v.message)}`),v&&typeof v=="object"&&"data"in v&&(b+=`: ${(0,E$e.inspect)(v.data)}`),h(new PA(b))}).finally(()=>{i?.removeEventListener("abort",y),clearTimeout(g)})});if(!p.status)throw new PA("EditorFetcher received invalid response");return i?.addEventListener("abort",d),new yx(p.status,v$e.STATUS_CODES[p.status]??"",new y$e(p.headers),()=>kWt(c),()=>c)}};function kWt(t){return new Promise((e,n)=>{let r="";t.on("error",n),t.on("end",()=>e(r)),t.on("data",i=>r+=String(i))})}s(kWt,"consumeStream");function BWt(t,e,n){let{timeout:r,method:i}=n,o=n.headers??{},a=n.json?JSON.stringify(n.json):n.body;return n.json&&(o["content-type"]="application/json"),{url:t,headers:o,body:a,timeout:r,method:i,workDoneToken:e}}s(BWt,"convertOptionsToParams");var PWt=I.Object({url:I.String(),headers:I.Optional(I.Record(I.String(),I.String())),body:I.Optional(I.String()),timeout:I.Optional(I.Number()),method:I.Optional(I.Union([I.Literal("GET"),I.Literal("POST")])),cancelBeforeRequest:I.Optional(I.Boolean()),cancelAfterRequest:I.Optional(I.Boolean()),cancelAfterFirstChunk:I.Optional(I.Boolean())});async function DWt(t,e,n){let r=new x3(t),i=new AbortController,o=i.signal,{url:a,cancelBeforeRequest:l,cancelAfterRequest:c,cancelAfterFirstChunk:u,...d}=n;l&&i.abort();let p=r.fetch(a,{signal:o,...d});c&&i.abort();let m;try{m=await p}catch(y){return[{error:`Fetch stream error: ${y instanceof PA?y.message:String(y)}`},null]}let{status:h}=m,g=Object.fromEntries(Array.from(m.headers));try{if(u){let v=m.body();for await(let b of v){let E=b.toString();return i.abort(),[{status:h,headers:g,body:E},null]}}let y=await m.text();return[{status:h,headers:g,body:y},null]}catch(y){return[{error:`Fetch stream error: ${y instanceof PA?y.message:String(y)}`},null]}}s(DWt,"handleTestingFetchChecked");var I$e=ot(PWt,DWt);f();var NWt=I.Object({});async function LWt(t,e,n){return await t.get(ba).flush(),["OK",null]}s(LWt,"handleTestingFlushPromiseQueueChecked");var T$e=ot(NWt,LWt);f();var FWt=I.Object({filePath:I.String(),code:I.String(),offset:I.Number(),languageId:I.String(),timeout:I.Optional(I.Number()),waitForContext:I.Optional(I.Boolean())});async function MWt(t,e,n){try{await t.get(gA).start();let r=t.get(IT),i=n.timeout??1e3,o=Date.now(),a=[],l=!0;for(;l;)try{a=await r.indexClient.getContext(n.filePath,n.code,n.offset,n.languageId,AU,e)}catch{}finally{l=(n.waitForContext??!1)&&a.length==0&&Date.now()-o<i}return[{initialized:!0,context:a},null]}catch{return[{initialized:!1,context:[]},null]}}s(MWt,"handleTestingGetContextChecked");var w$e=ot(FWt,MWt);f();var QWt=I.Object({uri:I.String()});async function OWt(t,e,n){let i=await t.get(Nn).getTextDocument(n);return[{uri:n.uri,languageId:i?.clientLanguageId??"unknown",version:i?.version??-1,text:i?.getText()??""},null]}s(OWt,"handleGetDocumentChecked");var _$e=ot(QWt,OWt);f();var UWt=I.Object({options:I.Optional(I.Object({}))});async function qWt(t,e,n){t.forceSet(_r,new dz(t)),t.get(Gn).resetToken();try{await t.get(Gn).getToken()}catch{}return await new Promise(r=>setTimeout(r,0)),["OK",null]}s(qWt,"handleTestingNeverAuthChecked");var S$e=ot(UWt,qWt);f();f();f();var Ime=class extends rl{constructor(n){super();this.certificates=n}static{s(this,"TestCertificateReader")}getAllRootCAs(){return this.certificates}},R$e=s(t=>new Ime(t),"createTestCertificateReader");function wme(t,e,n){let r=new Tme;r.set("x-github-request-id","1");for(let[i,o]of Object.entries(n||{}))r.set(i,o);return new yx(t,"status text",r,()=>Promise.resolve(e??""),()=>null)}s(wme,"createFakeResponse");function k$e(t,e,n){let r;return typeof e=="string"?r=e:r=JSON.stringify(e),wme(t,r,Object.assign({"content-type":"application/json"},n))}s(k$e,"createFakeJsonResponse");var P6=class extends Kr{constructor(){super(...arguments);this.name="FakeFetcher"}static{s(this,"FakeFetcher")}disconnectAll(){throw new Error("Method not implemented.")}};var Nz=class extends P6{static{s(this,"NoFetchFetcher")}fetch(e,n){throw new Error("NoFetchFetcher does not support fetching")}};var Tme=class{constructor(){this.headers=new Map}static{s(this,"FakeHeaders")}append(e,n){this.headers.set(e.toLowerCase(),n)}delete(e){this.headers.delete(e.toLowerCase())}get(e){return this.headers.get(e.toLowerCase())??null}has(e){return this.headers.has(e.toLowerCase())}set(e,n){this.headers.set(e.toLowerCase(),n)}entries(){return this.headers.entries()}keys(){return this.headers.keys()}values(){return this.headers.values()}[Symbol.iterator](){return this.headers.entries()}};var _me=class extends P6{static{s(this,"ExpConfigFetcher")}constructor(e){super(),this.fullConfig={Features:[],Flights:{},Configs:[{Id:"vscode",Parameters:e.Parameters}],ParameterGroups:[],AssignmentContext:e.AssignmentContext}}fetch(e,n){return e.endsWith("telemetry")?Promise.resolve(k$e(200,this.fullConfig)):Promise.resolve(wme(404,""))}},Lz=class extends _me{constructor(n,r){super(n);this.delegate=r}static{s(this,"ExpConfigFetcherWithDelegate")}fetch(n,r){return n.endsWith("telemetry")?super.fetch(n,r):this.delegate.fetch(n,r)}};var WWt=I.Object({expFlags:I.Record(I.String(),I.Union([I.String(),I.Number(),I.Boolean()]))});function HWt(t,e,n){if(n.expFlags){let r={AssignmentContext:"assignmentcontext",Parameters:{...n.expFlags}};t.forceSet(Kr,new Lz(r,t.get(Kr)))}return["OK",null]}s(HWt,"handleTestingOverrideExpFlagsChecked");var B$e=ot(WWt,HWt);f();var GWt=I.Object({rules:tie});function jWt(t,e,n){let r=t.get(Kc);return r?(r.setTestingRules(n.rules),["OK",null]):[null,{code:er.InternalError,message:"Could not set content exclusion rules"}]}s(jWt,"handleTestingSetContentExclusionRulesChecked");var P$e=ot(GWt,jWt);f();var VWt=I.Object({workDoneToken:I.Union([I.String(),I.Number()]),chunks:I.Array(I.String()),followUp:I.Optional(I.String()),suggestedTitle:I.Optional(I.String()),skills:I.Optional(I.Array(I.String())),references:I.Optional(I.Array(ZR)),options:I.Optional(I.Object({}))});function $Wt(t,e,n){return t.get(qy).add(n.workDoneToken,n.chunks,n.followUp,n.suggestedTitle,n.skills,n.references),["OK",null]}s($Wt,"handleTestingSetSyntheticTurnsChecked");var D$e=ot(VWt,$Wt);f();var zWt=I.Object({});async function YWt(t,e,n){let r=t.get($a),i=t.get(Va);return await r.showWarningMessage("This is a test message",{title:"Some Action"}).then(a=>o(3,"response from message request",a?.title)).catch(a=>o(1,"error sending show message request",a)),["OK",null];function o(a,l,c){return i.logIt(t,a,"triggerShowMessage",`${l} (${String(c)})`)}s(o,"sendNotification")}s(YWt,"handleTriggerShowMessageChecked");var N$e=ot(zWt,YWt);f();f();f();f();var L$e=je(require("tls"));var Fz=class{static{s(this,"RootCertificateConfigurator")}#e;constructor(e){this._certificateReader=e.get(rl)}async getCertificates(){let e=await this._certificateReader.getAllRootCAs();if(e.length!==0)return e}async createSecureContext(){let e=await this._certificateReader.getAllRootCAs(),r=L$e.createSecureContext({_vscodeAdditionalCaCerts:e}),i=r.context;for(let o of e)i.addCACert(o);return{secureContext:r,certs:e}}async applyToRequestOptions(e){this.#e??=this.createSecureContext();let n=await this.#e;e.secureContext=n.secureContext,e.ca=n.certs,e.cert=n.certs}};var b3=class extends Kr{constructor(n,r){super();this.name="HelixFetcher";this.certificateConfigurator=new Fz(n),this.proxySocketFactory=n.get(eA),this.proxySocketTimeoutForTesting=r?.proxySocketTimeoutForTesting,n.get(fc).onDidChangeHttpSettings(i=>{this.fetchApi=this.createFetchApi(n,i)}),this.fetchApi=this.createFetchApi(n,n.get(fc).getHttpSettings())}static{s(this,"HelixFetcher")}maybeCreateSocketFactory(n,r){if(!n?.proxy)return;let i=new URL(n.proxy);return async o=>(o.rejectUnauthorized=n.proxyStrictSSL,o.timeout=r,await this.certificateConfigurator.applyToRequestOptions(o),await this.proxySocketFactory.createSocket(o,{hostname:i.hostname,port:i.port,authorization:n.proxyAuthorization,kerberosServicePrincipal:n.proxyKerberosServicePrincipal}))}createFetchApi(n,r){let i=n.get(zi);r.proxyStrictSSL===!1&&(process.env.NODE_TLS_REJECT_UNAUTHORIZED="0");let o=this.proxySocketTimeoutForTesting;return A$e({userAgent:`GithubCopilot/${i.getVersion()}`,socketFactory:this.maybeCreateSocketFactory(r,o),rejectUnauthorized:r.proxyStrictSSL})}async fetch(n,r){let i=r.signal,o=!1;if(r.timeout){let u=new AbortController;setTimeout(()=>{u.abort(),o=!0},r.timeout),r.signal?.addEventListener("abort",()=>u.abort()),r.signal?.aborted&&u.abort(),i=u.signal}let a={...r,body:r.body?r.body:r.json,signal:i};await this.certificateConfigurator.applyToRequestOptions(a);let l=await this.certificateConfigurator.getCertificates();this.fetchApi.setCA(l);let c=await this.fetchApi.fetch(n,a).catch(u=>{throw o?new xB(`Request to <${n}> timed out after ${r.timeout}ms`,u):u});return new yx(c.status,c.statusText,c.headers,()=>c.text(),()=>c.body)}disconnectAll(){return this.fetchApi.reset()}};f();f();var D6=require("fs"),F$e=require("path");var E3=class extends po{static{s(this,"LocalFileSystem")}async readFileString(e){return(await D6.promises.readFile(aa(e))).toString()}async stat(e){let{targetStat:n,lstat:r,stat:i}=await this.statWithLink(aa(e));return{ctime:n.ctimeMs,mtime:n.mtimeMs,size:n.size,type:this.getFileType(n,r,i)}}async readDirectory(e){let n=aa(e),r=await D6.promises.readdir(n,{withFileTypes:!0}),i=[];for(let o of r){let{targetStat:a,lstat:l,stat:c}=await this.statWithLink((0,F$e.join)(n,o.name));i.push([o.name,this.getFileType(a,l,c)])}return i}async statWithLink(e){let n=await D6.promises.lstat(e);if(n.isSymbolicLink())try{let r=await D6.promises.stat(e);return{lstat:n,stat:r,targetStat:r}}catch{}return{lstat:n,targetStat:n}}getFileType(e,n,r){let i=0;return e.isFile()&&(i=1),e.isDirectory()&&(i=2),n.isSymbolicLink()&&r&&(i|=64),i}};f();var Mz=class extends mh{constructor(n=[]){super();this._agents=n}static{s(this,"TestRemoteAgentRegistry")}agents(){return this._agents}};f();var Qz=class extends sl{constructor(){super(...arguments);this.prompts=[];this.fetchResults=[];this.diffs=[]}static{s(this,"TestConversationInspector")}shouldInspect(){return!0}inspectPrompt(n){this.shouldInspect()&&this.prompts.push(n)}inspectFetchResult(n){this.shouldInspect()&&this.fetchResults.push(n)}documentDiff(n){this.shouldInspect()&&this.diffs.push(n)}};f();function KWt(t){return{modelId:"gpt-3.5-turbo",modelFamily:t,uiName:"Test GPT",maxRequestTokens:6144,maxResponseTokens:2048,baseTokensPerMessage:3,baseTokensPerName:1,baseTokensPerCompletion:3,tokenizer:"cl100k_base",isExperimental:!1,stream:!0,toolCalls:!0}}s(KWt,"fakeChatModelConfiguration");function JWt(t){return{modelId:"embedding-test",modelFamily:t,maxBatchSize:1,maxTokens:50,tokenizer:"cl100k_base"}}s(JWt,"fakeEmbeddingModelConfiguration");var Oz=class extends na{static{s(this,"TestModelConfigurationProvider")}getBestChatModelConfig(e){let n=e[0];return Promise.resolve(KWt(n))}getFirstMatchingEmbeddingModelConfiguration(e){return Promise.resolve(JWt(e))}};f();var Uz=class extends pc{constructor(){super(...arguments);this.openedUrls=[];this.opened=new fv}static{s(this,"TestUrlOpener")}open(n){return this.openedUrls.push(n),this.opened.resolve(),Promise.resolve()}},qz=class extends $a{constructor(){super();this.sentMessages=[];this.warningPromises=[]}static{s(this,"TestNotificationSender")}performDismiss(){this.actionToPerform="DISMISS"}performAction(n){this.actionToPerform=n}showWarningMessage(n,...r){this.sentMessages.push(n);let i;if(this.actionToPerform)if(this.actionToPerform==="DISMISS")i=Promise.resolve(void 0);else{let o=r.find(a=>a.title===this.actionToPerform);i=o?Promise.resolve(o):Promise.resolve(void 0)}else i=r?Promise.resolve(r[0]):Promise.resolve(void 0);return this.warningPromises.push(i),i}async waitForWarningMessages(){await Promise.all(this.warningPromises)}};f();function M$e(t,e,n,r){return M1.create(RIe(t),e,n,r,e)}s(M$e,"createTextDocument");var Sme=class extends Nn{constructor(n){super(n);this._openTextDocuments=[];this._notebookDocuments=new Map;this._workspaceFolders=[];this._focusSubscribers=[];this._changeSubscribers=[];this._openSubscribers=[];this._closeSubscribers=[];this.onDidFocusTextDocument=s((n,r,i)=>{let o=n.bind(r);return this._focusSubscribers.push(o),{dispose:s(()=>{this._focusSubscribers=this._focusSubscribers.filter(a=>a!==o)},"dispose")}},"onDidFocusTextDocument");this.onDidChangeTextDocument=s((n,r,i)=>{let o=n.bind(r);return this._changeSubscribers.push(o),{dispose:s(()=>{this._changeSubscribers=this._changeSubscribers.filter(a=>a!==o)},"dispose")}},"onDidChangeTextDocument");this.onDidOpenTextDocument=s((n,r,i)=>{let o=n.bind(r);return this._openSubscribers.push(o),{dispose:s(()=>{this._openSubscribers=this._openSubscribers.filter(a=>a!==o)},"dispose")}},"onDidOpenTextDocument");this.onDidCloseTextDocument=s((n,r,i)=>{let o=n.bind(r);return this._closeSubscribers.push(o),{dispose:s(()=>{this._closeSubscribers=this._closeSubscribers.filter(a=>a!==o)},"dispose")}},"onDidCloseTextDocument")}static{s(this,"SimpleTestTextDocumentManager")}init(n){this._workspaceFolders=n.map(r=>({uri:r.uri,name:r.name??Ti(r.uri)}))}async readTextDocumentFromDisk(n){return super.readTextDocumentFromDisk(n)}getTextDocumentsUnsafe(){return this._openTextDocuments}setTextDocument(n,r,i){let o=M$e(n,r,0,i);return this._openTextDocuments.push(o),o}updateTextDocument(n,r){let i=this._openTextDocuments.findIndex(a=>a.uri===n.toString());if(i<0)throw new Error("Document not found");let o=this._openTextDocuments[i];this._openTextDocuments[i]=M$e(n,o.clientLanguageId,o.version+1,r)}setNotebookDocument(n,r){this._notebookDocuments.set(n.uri.replace(/#.*/,""),r)}findNotebook({uri:n}){return this._notebookDocuments.get(n.replace(/#.*/,""))}getWorkspaceFolders(){return this._workspaceFolders}emitEvent(n){switch(n.eventName){case"focus":this._focusSubscribers.forEach(r=>r(n.args));break;case"change":this._changeSubscribers.forEach(r=>r(n.args));break;case"open":this._openSubscribers.forEach(r=>r(n.args));break;case"close":this._closeSubscribers.forEach(r=>r(n.args));break}}},Wz=class extends Sme{constructor(n){super(n);this.contents=new Map}static{s(this,"TestTextDocumentManager")}readTextDocumentFromDisk(n){return Promise.resolve(this.contents.get(n))}setDiskContents(n,r){this.contents.set(n,r)}};var Rme=class extends Va{static{s(this,"NullLog")}logIt(...e){}};function XWt(t){let e=new u5;return e.set(fc,t),e.set(RI,t),e.set(zi,new zi),e.set(Cf,new Cf({debug:!1,verboseLogging:!1,testMode:!0,simulation:!1})),e.set(rl,R$e([])),e.set(eA,JH(e)),e.set(yg,new yg),e.set(Cm,new pM),e.set(Am,new Am),e.set(sg,new sg),e.set(sc,new sc(e,"tid=test",!0)),e.set(Nl,new Nl),e.set($a,new qz),e.set(pc,new Uz),e.set(Ag,new q5),e.set(Va,new Rme),e.set(Iu,new Iu),e.set(Ps,new Ps("test-session","test-machine")),e.set(Tu,new nR(e)),e.set(md,new md(e,"copilot-test")),e.set(Dt,new Dt(e)),e.set(Bm,new Bm),e.set(Em,new MS),e.set(Gn,new d3("tid=test")),e.set(Ji,new dM),e.set(ba,new ba),e.set(Tg,new Tg(e)),e.set(Fm,cq(e)),e.set(Fu,new Fu),e.set(Ed,new Ed),e.set($1,$1.default),e.set(O0,new O0),e.set(Lf,new Lf(e,!1)),e.set(Fl,new Fl),e.set(Nr,new Nr(e)),e.set(I0,new DO),e.set(Ql,new Ql),e.set(Ba,xU(e,async(n,r,i)=>r.find(o=>o==="*")?1:r.find(o=>typeof o!="string"&&o.language===i.languageId)?10:0)),e.set(Xf,new Xf(e)),ZWt(e),e.set(Cd,new Cd(e)),e.set(Go,new Go),e.set(Bg,new LR),e.set(Jf,new Jf),e}s(XWt,"_createBaselineContext");function ZWt(t){t.set(ki,new ki(t)),t.set(ws,new ws(t)),t.set(wc,new wc(t)),t.set(xl,new xl),t.set(Xl,new Xl),t.set(sl,new Qz),t.set(Sp,new Sp(t,[])),t.set(na,new Oz),t.set(mh,new Mz),t.set(bA,new bA(t)),t.set(Bb,new Bb),t.set(ga,new ga(t)),t.set(Tc,new Tc),t.set(Y0,new Y0)}s(ZWt,"registerConversation");function Q$e(){let t=XWt(new RI(new QS,new Map));return t.set(Kr,new Nz),t.set(ur,new kme),t.set(Nn,new Wz(t)),t.set(po,new E3),t.set(Kc,new Kc(t)),t.set(il,new il(t)),t.set(Ec,new nG(t)),t.set(zf,new zf(t)),t.set(_g,new b5),t.set(Km,new dG),Xj(t),t}s(Q$e,"createLibTestingContext");var kme=class extends ur{constructor(n={name:"lib-tests-plugin",version:"2"},r={name:"lib-tests-editor",version:"1"},i=[{name:"lib-tests-related-plugin",version:"3"}]){super();this.editorPluginInfo=n;this.editorInfo=r;this.relatedPluginInfo=i}static{s(this,"LibTestsEditorInfo")}getEditorInfo(){return this.editorInfo}getEditorPluginInfo(){return this.editorPluginInfo}getRelatedPluginInfo(){return this.relatedPluginInfo}};var U$e=je(require("fs"));var O$e=`${process.env.HOME}/.copilot-testing-gh-token`,Hz,Gz;function q$e(t){let e=new I6(eHt);t.forceSet(Gn,e)}s(q$e,"setIntegrationTokenManager");var eHt=s(async()=>{if(process.env.GH_COPILOT_IDE_TOKEN)return{token:process.env.GH_COPILOT_IDE_TOKEN};let t=process.env.GH_COPILOT_TOKEN??"";if(/=/.test(t))return{token:t};if(Gz)return Gz;let e=t||process.env.GITHUB_COPILOT_TOKEN||await tHt(),n=Q$e(),r=new b3(n);return n.forceSet(Kr,r),Gz=lM(n,{...Gx({}),accessToken:e}).then(i=>{if(i.kind==="success")return i.copilotToken;throw new ls('Could not fetch testing Copilot token. Try running "npm run get_token" again?')}),Gz},"getEnvelope");async function tHt(){try{Hz??=(await U$e.promises.readFile(O$e)).toString().trim()}catch{Hz??=process.env.GITHUB_TOKEN??""}if(!Hz)throw new Error(`Tests: either GH_COPILOT_IDE_TOKEN, GH_COPILOT_TOKEN, or GITHUB_TOKEN must be set, or there must be a GitHub token from an app with access to Copilot in ${O$e}. Run "npm run get_token" to get one.`);return Hz}s(tHt,"getTestingGitHubToken");var nHt=I.Object({options:I.Optional(I.Object({})),githubAppId:I.Optional(I.String())});async function rHt(t,e,n){return q$e(t),t.forceSet(_r,new u3(t,n.githubAppId)),["OK",null]}s(rHt,"handleTestingUseTestingTokenChecked");var W$e=ot(nHt,rHt);f();var iHt=I.Object({});async function oHt(t,e,n){return await new qR().uninstall(t),["OK",null]}s(oHt,"handleUninstallChecked");var H$e=ot(iHt,oHt);f();var sHt=j4e;function aHt(t,e,n){let r=t.get(Ba),i={unregistered:[],notUnregistered:[]};return n.providers.forEach(o=>{try{r.unregisterContextProvider(o.id),i.unregistered.push(o.id)}catch{i.notUnregistered.push(o.id)}}),[i,null]}s(aHt,"unregisterContextProviders");var G$e=ot(sHt,aHt);f();var Bme=je(require("os"));var lHt=I.Object({expectedCertificate:I.String()});async function cHt(t,e,n){let i=(await KH(t).getAllRootCAs()).map(c3),o=c3(n.expectedCertificate);return i.includes(o)?[{status:!0,message:"Certificate verified"},null]:[{status:!1,message:`expected certificate not found - Expected to find certificate ${Ope(o)}. Only found those installed on the system:${Bme.EOL}${i.map(a=>"- "+Ope(a)).join(Bme.EOL)}`},null]}s(cHt,"handleVerifyCertificateChecked");var j$e=ot(lHt,cHt);f();var uHt=I.Object({});async function dHt(){return[{status:!!await new HD().load()},null]}s(dHt,"handleVerifyKerberosChecked");var V$e=ot(uHt,dHt);f();var fHt=I.Object({source:I.String(),version:I.Number(),uri:I.String()});async function pHt(t,e,n){let i=await t.get(Nn).getTextDocument(n);return i?i.getText()!==n.source?[{status:!1,message:`Source mismatch: [State] ${i.getText()} !== [Request] ${n.source}`},null]:i.version!==n.version?[{status:!1,message:`Version mismatch: [State] ${i.version} !== [Request] ${n.version}`},null]:[{status:!0,message:""},null]:[{status:!1,message:`Document not found: <${n.uri}>`},null]}s(pHt,"handleVerifyStateChecked");var $$e=ot(fHt,pHt);f();var mHt=I.Object({});function hHt(t,e,n){return[t.get(Nn).getWorkspaceFolders().map(i=>{let o=new URL(i.uri),a=decodeURIComponent(o.pathname);return{...i,path:a}}),null]}s(hHt,"handleVerifyWorkspaceStateChecked");var z$e=ot(mHt,hHt);var WT=class{constructor(e){this.handlers=e}static{s(this,"MethodHandlers")}};function Y$e(){let t=new Map;return t.set(Nje.method,Lje),t.set(Fje.method,Mje),t.set("getCompletions",wje),t.set("getCompletionsCycling",_je),t.set("getPanelCompletions",kje),t.set(uje.method,dje),t.set("getVersion",Bje),t.set("setEditorInfo",zje),t.set("checkStatus",mWe),t.set("checkQuota",pWe),t.set("checkFileStatus",dWe),t.set("signInInitiate",Gpe),t.set("signIn",Gpe),t.set("signInConfirm",Yje),t.set("signInWithGithubToken",Kje),t.set("signOut",Jje),t.set("notifyShown",Wje),t.set("notifyAccepted",Uje),t.set("notifyRejected",qje),t.set("telemetry/exception",Xje),t.set("textDocument/copilotInlineEdit",Oje),t.set("testing/overrideExpFlags",B$e),t.set("testing/alwaysAuth",eVe),t.set("testing/neverAuth",S$e),t.set("testing/useTestingToken",W$e),t.set("testing/setCompletionDocuments",bje),t.set("testing/setPanelCompletionDocuments",lje),t.set("testing/triggerShowMessageRequest",N$e),t.set("testing/flushPromiseQueue",T$e),t.set("testing/getDocument",_$e),t.set("testing/chatml",tVe),t.set("testing/setSyntheticTurns",D$e),t.set("testing/fetch",I$e),t.set("testing/setContentExclusionRules",P$e),t.set("testing/setCopilotEditsResponse",KGe),t.set("testing/getContext",w$e),t.set("uninstall",H$e),t.set("debug/diagnostics",hje),t.set("debug/listCertificates",Qje),t.set("debug/verifyState",$$e),t.set("debug/verifyCertificate",j$e),t.set("debug/verifyKerberos",V$e),t.set("debug/verifyWorkspaceState",z$e),t.set("context/registerProviders",Hje),t.set("context/unregisterProviders",G$e),t.set("conversation/preconditions",HGe),t.set("conversation/persistence",UGe),t.set("conversation/create",MGe),t.set("conversation/turn",$Ge),t.set("conversation/turnDelete",zGe),t.set("conversation/destroy",QGe),t.set("conversation/rating",GGe),t.set("conversation/copyCode",CGe),t.set("conversation/insertCode",xGe),t.set("conversation/templates",VGe),t.set("conversation/agents",yGe),t.set("conversation/registerTools",jGe),t.set("conversation/notifyCodeAcceptance",OGe),t.set("copilot/models",rje),t.set("copilot/setModelPolicy",ije),t.set("copilot/codeReview",YGe),t.set("git/commitGenerate",Pje),t.set("editConversation/create",JGe),t.set("editConversation/turn",ZGe),t.set("editConversation/turnDelete",eje),t.set("editConversation/destroy",XGe),t.set("mcp/getTools",tje),t.set("mcp/updateToolsStatus",nje),new WT(t)}s(Y$e,"getAllMethods");f();f();f();var K$e=je(_m());var DA=class{constructor(e){this.ctx=e}static{s(this,"AbstractNotification")}get type(){return new K$e.NotificationType(this.name)}};var Pme=class extends DA{constructor(){super(...arguments);this.name=Gee.method;this.params=rIe}static{s(this,"DidChangeAuthNotificationHandler")}handle(n){let r=this.ctx.get(_r);n?.handle&&n?.accessToken?r.setTransientSession({accessToken:n.accessToken,login:n.handle,githubAppId:n.githubAppId}):r.setTransientSession(null)}},J$e=[Pme];f();var Dme=class extends DA{constructor(){super(...arguments);this.name=Yee.method;this.params=dIe}static{s(this,"DidShowCompletionNotificationHandler")}handle(n){let r=n.item.command.arguments[0],o=this.ctx.get(is).get(r);o&&W3e(this.ctx,o)}},Nme=class extends DA{constructor(){super(...arguments);this.name=Xee.method;this.params=gIe}static{s(this,"DidShowInlineEditNotificationHandler")}async handle(n){let r=n.item.command.arguments[0];await this.ctx.get(lh).handleShown(r)}},Lme=class extends DA{constructor(){super(...arguments);this.name=Kee.method;this.params=fIe}static{s(this,"DidPartiallyAcceptCompletionNotificationHandler")}handle(n){let r=n.item.command.arguments[0],i=n.acceptedLength,o=this.ctx.get(is),a=o.get(r);a&&(o.delete(r),i>=a.insertText.length?mq(this.ctx,a):H3e(this.ctx,a,i))}},X$e=[Dme,Nme,Lme];f();var jz=class extends DA{constructor(){super(...arguments);this.name="window/workDoneProgress/cancel";this.params=I.Object({token:I.Union([I.String(),I.Number()])})}static{s(this,"WorkDoneProgressCancelNotification")}handle(n){this.ctx.get($u).cancel(n.token)}};var gHt=[...J$e,...X$e,jz];function Z$e(t,e){for(let n of gHt){let r=new n(t),i=ms.Compile(r.params);e.onNotification(r.type,Eu(t,async o=>{Dy(o),i.Check(o)?await r.handle(o):_c.error(t,`Notification ${r.name}:`,new Ic(i.Errors(o)))},`Notification ${r.name}`))}}s(Z$e,"registerNotifications");f();var tze=je(require("events")),Vz=je(Za());var eze=new Tt("AgentTextDocumentConfiguration"),Fme=class{constructor(e){this.ctx=e;this.emitter=new tze.default;this.emitter.setMaxListeners(1e4)}static{s(this,"AgentTextDocumentsConfiguration")}create(e,n,r,i){try{return M1.create(e,n,r,i)}catch(o){throw eze.exception(this.ctx,o,".create"),o}}update(e,n,r){try{let i=[];for(let a of n)if(Vz.TextDocumentContentChangeEvent.isIncremental(a)){let l={range:a.range,rangeOffset:e.offsetAt(a.range.start),rangeLength:e.offsetAt(a.range.end)-e.offsetAt(a.range.start),text:a.text};i.push(l)}let o={document:{uri:e.uri,version:r},contentChanges:i};return this.emitter.emit("change",o),M1.withChanges(e,n,r)}catch(i){throw eze.exception(this.ctx,i,".update"),i}}},Gb=class extends Nn{constructor(n){super(n);this._documents=new Map;this.workspaceFolders=[];this.didFocusTextDocumentListeners=[];this.onDidChangeTextDocument=s((n,r,i)=>{let o=n.bind(r);return this._textDocumentConfiguration.emitter.on("change",o),{dispose:s(()=>{this._textDocumentConfiguration.emitter.removeListener("change",o)},"dispose")}},"onDidChangeTextDocument");this.onDidOpenTextDocument=s((n,r,i)=>{let o=n.bind(r);return this._textDocumentConfiguration.emitter.on("open",o),{dispose:s(()=>{this._textDocumentConfiguration.emitter.removeListener("open",o)},"dispose")}},"onDidOpenTextDocument");this.onDidCloseTextDocument=s((n,r,i)=>{let o=n.bind(r);return this._textDocumentConfiguration.emitter.on("close",o),{dispose:s(()=>{this._textDocumentConfiguration.emitter.removeListener("close",o)},"dispose")}},"onDidCloseTextDocument");this.onDidFocusTextDocument=s((n,r,i)=>(this.didFocusTextDocumentListeners.includes(n)||this.didFocusTextDocumentListeners.push(n),this.connection.onNotification($ee.type,o=>{let a=("textDocument"in o?o.textDocument:o)??{};this.didFocusTextDocumentListeners.forEach(l=>void l.call(r,"uri"in a?{document:a}:void 0))})),"onDidFocusTextDocument");this._textDocumentConfiguration=new Fme(n),this._notebookDocuments=new Vz.NotebookDocuments(this._textDocumentConfiguration)}static{s(this,"AgentTextDocumentManager")}get connection(){return this.ctx.get(Cn).connection}init(n){this.connection.onDidOpenTextDocument(r=>{let i=r.textDocument,o=this._textDocumentConfiguration.create(i.uri,i.languageId,i.version,i.text);this._documents.set(mc(i.uri),o),this._textDocumentConfiguration.emitter.emit("open",{document:{...i,uri:o.uri}})}),this.connection.onDidChangeTextDocument(r=>{let i=r.textDocument,o=r.contentChanges,{version:a}=i;if(a==null)throw new Error(`Received document change event for ${i.uri} without valid version identifier`);let l=mc(i.uri),c=this._documents.get(l);c!==void 0&&(c=this._textDocumentConfiguration.update(c,o,a),this._documents.set(l,c))}),this.connection.onDidCloseTextDocument(r=>{let i=mc(r.textDocument.uri);this._documents.delete(i),this._textDocumentConfiguration.emitter.emit("close",{document:{uri:i}})}),this._notebookDocuments.listen(this.connection),this.workspaceFolders.length=0,this.workspaceFolders.push(...n)}didChangeWorkspaceFolders(n){n.added.forEach(r=>this.registerWorkspaceFolder(r)),n.removed.forEach(r=>this.unregisterWorkspaceFolder(r))}unregisterWorkspaceFolder(n){let r=this.workspaceFolders.findIndex(i=>i.uri===n.uri);r>=0&&this.workspaceFolders.splice(r,1)}registerWorkspaceFolder(n){this.workspaceFolders.push(n)}getTextDocumentsUnsafe(){return[...this._documents.values()]}getTextDocumentUnsafe(n){return this._documents.get(mc(n.uri))}getWorkspaceFolders(){return this.workspaceFolders}findNotebook(n){let r=this._notebookDocuments.findNotebookDocumentForCell(n.uri);if(r)return{getCells:s(()=>r.cells.map((i,o)=>this.wrapCell(i,o)).filter(i=>!!i),"getCells"),getCellFor:s(({uri:i})=>{let o=r.cells.findIndex(a=>a.document===i);return o!==-1?this.wrapCell(r.cells[o],o):void 0},"getCellFor")}}wrapCell(n,r){let i=this._notebookDocuments.getCellTextDocument(n);if(i)return{kind:n.kind,metadata:n.metadata??{},index:r,document:i}}};var nze=ms.Compile(lIe);function Dy(t){if(t!==null){if(Array.isArray(t))for(let e=0;e<t.length;e++)t[e]=Dy(t[e]);else if(typeof t=="object"){let e=t;for(let n in e)e[n]===null?delete e[n]:e[n]=Dy(e[n])}return t}}s(Dy,"purgeNulls");var Cn=class{constructor(e,n){this.ctx=e;this.connection=n;this.initialized=!1;this.#i=this.ctx.get(Va)}static{s(this,"Service")}#e;#t;#i;get clientCapabilities(){return this.#t}listen(){let e=this.ctx,n=this.connection;n.onRequest(this.messageHandler.bind(this)),Z$e(e,n);let r={name:"GitHub Copilot Language Server",version:e.get(zi).getDisplayVersion(),nodeVersion:process.versions.node},i,o=s(async c=>{try{if(i&&c&&typeof c=="object"&&!("settings"in c)){let u=await n.workspace.getConfiguration(["github.copilot",...qpe].map(p=>({section:p}))),d={github:{copilot:u.shift()}};for(let p of qpe)d[p]=u.shift();c.settings=d}return Vje(e,Dy(c))}catch(u){_c.exception(e,u,"didChangeConfiguration")}},"didChangeConfiguration");function a(c){try{e.get(Gb).didChangeWorkspaceFolders(c),e.get(O0).emit(c)}catch(u){_c.exception(e,u,"didChangeWorkspaceFolders")}}s(a,"didChangeWorkspaceFolders"),this.connection.onNotification("vs/didAddWorkspaceFolder",({name:c,uri:u})=>a({added:[{uri:u,name:c??u}],removed:[]})),this.connection.onNotification("vs/didRemoveWorkspaceFolder",({name:c,uri:u})=>a({added:[],removed:[{uri:u,name:c??u}]})),n.onInitialize(async c=>{if(this.initialized)throw new Error("initialize request sent after initialized notification");this.#t=c.capabilities;let u=c.capabilities.copilot,d=Dy(c.initializationOptions);if(d){if(!nze.Check(d))throw new Ic(nze.Errors(d));let g=d,y=e.get(ur);g.editorPluginInfo?y.setEditorAndPluginInfo({version:"unknown",...g.editorPluginInfo},g.editorInfo&&{version:"unknown",...g.editorInfo},g.relatedPluginInfo??[]):_c.warn(e,"editorInfo and editorPluginInfo will soon be required in initializationOptions. This will replace setEditorInfo."),g.copilotIntegrationId&&y.setCopilotIntegrationId(g.copilotIntegrationId),g.githubAppId&&(e.get(Fl).githubAppId=g.githubAppId),g.copilotCapabilities&&(u=g.copilotCapabilities),await c3e(e)}let p=c.capabilities.workspace?.workspaceFolders??!1;e.get(Gb).init(c.workspaceFolders??[]),JRe(this.ctx),e.get(O0).emit({added:c.workspaceFolders??[],removed:[]}),i=c.capabilities.workspace?.configuration,u&&(e.get(Go).setCapabilities(u),"openURL"in u&&pV(e,["The openURL Copilot capability has been removed in favor of window/showDocument."]));let h=s(async()=>{this.initialized||(this.initialized=!0,_c.info(e,`${r.name} ${r.version} initialized`),p&&n.workspace.onDidChangeWorkspaceFolders(a),i?await o({}):await E6(e),this.installationTelemetryTimer=setTimeout(()=>{new qR().startup(e).catch(()=>{})},1e3),e.get(Ny).emit())},"onInitialized");return n.onInitialized(Eu(e,h,"onInitialized")),e.get(dh).init(),u?.token&&e.get(_r).setTransientSession(null),u?.redirectedTelemetry&&await cWe(e),rze.lt(process.versions.node,"20.8.0")&&_c.warn(e,`Node.js ${process.versions.node} support is deprecated. Please upgrade to Node.js 20.8 or newer.`),{capabilities:{textDocumentSync:{openClose:!0,change:Ch.TextDocumentSyncKind.Incremental},notebookDocumentSync:{notebookSelector:[{notebook:"*"}]},workspace:{workspaceFolders:{supported:p,changeNotifications:p}},executeCommandProvider:{commands:nWe(e,n)},inlineCompletionProvider:{}},serverInfo:r}}),n.onShutdown(async()=>{await(this.#e??=this.deactivate())}),n.onExit(()=>void this.onExit()),n.onDidChangeConfiguration(Eu(e,o,"onDidChangeConfiguration")),n.listen();let l=new _V;this.ctx.forceSet(Va,l)}async messageHandler(e,n,r){let i=this.ctx.get(WT).handlers.get(e);if(!i)return new Ch.ResponseError(er.MethodNotFound,`Method not found: ${e}`);if(!this.initialized)return new Ch.ResponseError(er.ServerNotInitialized,"Agent service not initialized.");if(this.#e)return new Ch.ResponseError(er.InvalidRequest,"Agent service shut down.");if(e!=="setEditorInfo"&&!oWe(this.ctx.get(ur)))throw new Ch.ResponseError(er.ServerNotInitialized,"editorInfo and editorPluginInfo not set in initializationOptions");Array.isArray(n)&&(n=n[0]),Dy(n);try{let[o,a]=await i(this.ctx,r,n);return a?new Ch.ResponseError(a.code,a.message,a.data):o}catch(o){if(r.isCancellationRequested)return new Ch.ResponseError(er.RequestCancelled,"Request was canceled");if(o instanceof ls)return new Ch.ResponseError(er.NoCopilotToken,`Not authenticated: ${o.message}`);throw o instanceof Ch.ResponseError||_c.exception(this.ctx,o,`Request ${e}`),o}}async onExit(){try{this.ctx.get(ch).dispose()}catch(e){_c.exception(this.ctx,e,"failed to dispose ripgrep process manager")}this.ctx.forceSet(Va,this.#i),await(this.#e??=this.deactivate())}async deactivate(){let e=this.ctx;clearTimeout(this.installationTelemetryTimer),yoe(e),await Promise.race([new Promise(n=>setTimeout(n,100)),e.get(ba).flush()]),await Promise.race([new Promise(n=>setTimeout(n,1800)),e.get(Nl).deactivate()])}dispose(){clearTimeout(this.installationTelemetryTimer),this.connection.dispose()}},_c=new Tt("lsp");var $z=class t extends g2{constructor(n){super(n);this.reportedUnknownProviders=new Set}static{s(this,"AgentRelatedFilesProvider")}get service(){return this.context.get(Cn)}static mapProviderNameToNeighboringFileType(n){let r="CSharpCopilotCompletionContextProvider",i="CSharpRoslynCompletionRelatedContextProvider",o="CppCopilotCompletionContextProvider",a="CppCopilotCompletionSemanticCodeContextProvider";switch(n){case r:return"related/csharp";case i:return"related/csharproslyn";case o:return"related/cpp";case a:return"related/cppsemanticcodecontext";default:return"related/other"}}convert(n){let r={entries:[],traits:n.traits};for(let i of n.entries){let o={type:t.mapProviderNameToNeighboringFileType(i.providerName),uris:i.uris};r.entries.push(o),o.type==="related/other"&&!this.reportedUnknownProviders.has(i.providerName)&&(this.reportedUnknownProviders.add(i.providerName),hl.warn(this.context,`unknown providerName ${i.providerName}`))}return r}async getRelatedFilesResponse(n,r,i){hl.debug(this.context,`Fetching related files for ${n.uri}`);let o=this.context.get(Go).getCapabilities().related??!1;if(t.relatedCapabilityTelemetry(this.context,r,o),!o)return hl.debug(this.context,"`copilot/related` not supported"),ZRe;try{let a=await this.service.connection.sendRequest(Zee.type,{textDocument:{uri:n.uri},data:n.data,telemetry:{properties:r.properties,measurements:r.measurements}},i);return this.convert(a)}catch(a){hl.exception(this.context,a,".copilotRelated");return}}static{this.telemetrySent=!1}static relatedCapabilityTelemetry(n,r,i){try{if(!i||t.telemetrySent)return;t.telemetrySent=!0,kt(n,"copilotRelated.hasRelatedCapability",r)}catch(o){hl.exception(n,o,"copilotRelated")}}};f();var ize=je(Za());var zz=new Tt("copilotTokenManager"),Mme=class t extends PS{static{s(this,"AgentClientCopilotTokenManager")}static{this.RequestType=new ize.ProtocolRequestType("copilot/token")}constructor(e,n=!1){super(e,n)}async fetchCopilotToken(){let e=this.ctx.get(Cn).connection;try{this.didChangeToken??=e.onNotification("copilot/didChangeToken",()=>{this.resetToken()});let n=await e.sendRequest(t.RequestType,{force:!1});if(!n?.envelope)throw zz.debug(this.ctx,"Envelope missing from copilot/token response"),new Pf({reason:"NotSignedIn",message:"Editor did not return a token"});let{accessToken:r,handle:i,githubAppId:o,envelope:a,tokenEndpoint:l}=n;if(zz.debug(this.ctx,"Retrieved envelope from copilot/token"),a.expires_at*1e3<Date.now())throw new ls("Expired token in copilot/token response");if(i&&r){let u;if(l!==void 0){try{let d=new URL(l);d.protocol==="https:"&&d.hostname.startsWith("api.")?u=d.origin:zz.warn(this.ctx,`Invalid token endpoint URL <${l}>`)}catch{zz.warn(this.ctx,`Invalid token endpoint URL <${l}>`)}this.ctx.get(Tu).setConfiguredUrls(this.ctx,{apiUrl:u})}this.ctx.get(_r).setTransientSession({accessToken:r,login:i,githubAppId:o,apiUrl:u},!1)}else if(!await this.getGitHubSession())throw new Pf({reason:"NotSignedIn"});let c=new EI(a,void 0);return n8(this.ctx,c),c}catch(n){throw n instanceof Error?new ls(n.message,n):n}}},N6=class extends Gn{constructor(n,r=new PS(n,!0)){super();this.ctx=n;this.fallback=r;this.client=new Mme(n,!0)}static{s(this,"AgentCopilotTokenManager")}canGetToken(){return this.ctx.get(Go).getCapabilities().token??!1}getDelegate(){return this.canGetToken()?this.client:this.fallback}resetToken(n){this.getDelegate().resetToken(n)}async getToken(){return this.getDelegate().getToken()}async getGitHubSession(){return this.fallback.getGitHubSession()}};f();var AHt=new Tt("Public Code References"),Yz=class extends I0{static{s(this,"CLSCitationManager")}async handleIPCodeCitation(e,n){let r=n.location?.start.line!==void 0?n.location.start.line+1:"-",i=n.location?.start.character!==void 0?n.location.start.character+1:"-",o=(n.matchingText??"").replace(/[\r\n]/g," ");AHt.info(e,`Text found matching public code in ${n.inDocumentUri} [Ln ${r}, Col ${i}] near ${o}...:`+n.details.map((a,l)=>`
  ${l+1}) [${a.license}] ${a.url}`).join("")),!(n.version===void 0||n.location===void 0)&&e.get(Go).getCapabilities().ipCodeCitation===!0&&await e.get(Cn).connection.sendNotification(jee.type,{uri:n.inDocumentUri,version:n.version,range:n.location,matchingText:n.matchingText??"",citations:n.details})}};f();f();function oze(t){yHt(t)}s(oze,"activateExtensibilityPlatformFeature");function yHt(t){t.set(mh,new H$(t)),t.set(bA,new bA(t))}s(yHt,"registerContextDependencies");f();var sze=I.String(),Qme=class{constructor(e){this.turnContext=e}static{s(this,"BuildLogsSkillProcessor")}value(){return .9}processSkill(e){return this.turnContext.collectLabel(Jz,"build logs"),`The contents of the application build logs:
\`\`\`
${e}
\`\`\``}},Jz="build-logs",Kz=class extends Kl{static{s(this,"BuildLogsSkill")}constructor(e){super(Jz,"The application build logs, which can be used to fix build or compilation errors.","Reading build logs",()=>e,n=>new Qme(n))}};f();var Ome=class{constructor(e){this.turnContext=e}static{s(this,"DirectoryReferencesSkillProcessor")}value(){return 1}async processSkill(e){let n=this.filterDirectoryReferences(e);if(n.length===0)return;let r=await $$(this.turnContext.ctx,this.turnContext.cancelationToken,n);if(r.length>0){let i=[[new Bt(["The user wants you to consider the following directory structures when computing your answer."]),1]];for(let o of r)i.push([new Bt([o]),1]);return new Bt(i)}}filterDirectoryReferences(e){return e.filter(n=>n.type==="directory")}},Ume=class{static{s(this,"DirectoryReferencesSkillResolver")}resolveSkill(e){if(e.turn.request.references&&e.turn.request.references.length>0)return e.turn.request.references}},CHt="directory-references",Xz=class{constructor(){this.id=CHt;this.type="implicit"}static{s(this,"DirectoryReferencesSkill")}description(){return"The directory structure from the user's referenced directories"}resolver(){return new Ume}processor(e){return new Ome(e)}};f();var xHt=I.Object({uri:I.String(),visibleRange:I.Optional(_a),openedAt:I.Optional(I.String()),activeAt:I.Optional(I.String())}),aze=I.Object({files:I.Array(xHt)}),vHt=3,qme=class{constructor(e){this.turnContext=e}static{s(this,"RecentFilesSkillProcessor")}value(){return .7}async processSkill(e){let n=await this.getDocuments(e);if(n.length>0){let r=this.toElidableDocs(n),i=Db(r,"inversePositional");return await this.preElideDocuments(i)}}async getDocuments(e){let n=this.sortFiles(e.files);n=this.filterIncludedDocs(n);let r=this.turnContext.ctx.get(Nr),i=[];for(let o of n){let a=await r.getOrReadTextDocument(o),l=ys(a);if(await this.turnContext.collectFile(eY,o.uri,l),a.status==="valid"&&l!=="empty"&&(i.push([a.document,o]),i.length===vHt))break}return i.reverse()}sortFiles(e){return e.sort((n,r)=>n.activeAt&&r.activeAt?new Date(n.activeAt).getTime()-new Date(r.activeAt).getTime():n.activeAt?-1:r.activeAt?1:0).reverse()}filterIncludedDocs(e){return e.filter(n=>!this.turnContext.isFileIncluded(n.uri))}toElidableDocs(e){return e.map(n=>{let[r,i]=n,o=this.turnContext.ctx.get(Nr).getRelativePath(r),a=new EA(r,void 0,i.visibleRange);return new Bt([[`Code excerpt from file \`${o}\`:`,1],[a.fromAllCode({addLineNumbers:!1}),.9]])})}async preElideDocuments(e){let n=(await xo.getModelConfiguration(this.turnContext.ctx,"user")).maxRequestTokens,r=e.elide(Math.floor(n*.1)).getText();return new Bt([r])}},eY="recent-files",Zz=class extends Kl{static{s(this,"RecentFilesSkill")}constructor(e){super(eY,"Provides code examples helpful for creating, explaining, refactoring, or fixing code. It's based on the files the user has worked on in the editor.","Resolving recent files",()=>e,n=>new qme(n))}};f();var lze=I.String(),Wme=class{constructor(e){this.turnContext=e}static{s(this,"RuntimeLogsSkillProcessor")}value(){return .9}processSkill(e){return this.turnContext.collectLabel(nY,"runtime logs"),`The contents of the application runtime logs:
\`\`\`
${e}
\`\`\``}},nY="runtime-logs",tY=class extends Kl{static{s(this,"RuntimeLogsSkill")}constructor(e){super(nY,"The application runtime or debug logs, which are used to view output logs from the console. This is useful for debugging and troubleshooting runtime issues.","Reading runtime logs",()=>e,n=>new Wme(n))}};f();var rY=je(_m());var iY=class extends sl{constructor(n){super();this.ctx=n}static{s(this,"AgentConversationInspector")}shouldInspect(){return kL(this.ctx)}get connection(){if(this.shouldInspect())return this.ctx.get(Cn).connection}async inspectPrompt(n){return this.connection?.sendNotification(new rY.NotificationType("conversation/inspectPrompt"),n)}async inspectFetchResult(n){return this.connection?.sendNotification(new rY.NotificationType("conversation/inspectFetchResult"),n)}async documentDiff(n){return this.connection?.sendNotification(new rY.NotificationType("conversation/documentDiff"),n)}};f();var cze=je(Za());var L6=class{constructor(e){this.ctx=e;this.notificationEndpoint="conversation/preconditionsNotification";e.get(Sp).onChange(n=>{this.sendNotification(n)})}static{s(this,"PreconditionsNotifier")}sendNotification(e){return this.ctx.get(Cn).connection.sendNotification(new cze.NotificationType(this.notificationEndpoint),e)}};function uze(t){bHt(t),EHt(t),oze(t)}s(uze,"activateConversationFeature");function bHt(t){t.set(ki,new ki(t)),t.set(Xl,new Xl),t.set(wc,new wc(t)),t.set(na,new uG(t)),t.set(qy,new qy),t.set(ws,new ws(t)),t.set(Sp,new Sp(t)),t.set(L6,new L6(t)),t.set(wu,new CM(t,new yM(t))),t.set(Wy,new Wy),t.set(Bb,new Bb),t.set(sl,new iY(t)),t.set(ga,new ga(t)),t.set(Tc,new Tc),t.set(Y0,new Y0)}s(bHt,"registerContextDependencies");function EHt(t){let e=new xl;e.registerSkill(new $V(new VV(t))),e.registerSkill(new C$(new Vu(t,RA,aGe))),e.registerSkill(new YV(new Vu(t,fh,ZWe))),e.registerSkill(new BV(new Vu(t,lu,vWe))),e.registerSkill(new x$),e.registerSkill(new Xz),e.registerSkill(new Zz(new Vu(t,eY,aze))),e.registerSkill(new PV(new Vu(t,IA,EWe))),e.registerSkill(new JV(new Vu(t,Nb,cHe))),e.registerSkill(new tY(new Vu(t,nY,lze))),e.registerSkill(new Kz(new Vu(t,Jz,sze))),e.registerSkill(new ZV(new Vu(t,ph,uHe))),e.registerSkill(new e$(new Vu(t,ST,fHe))),t.set(xl,e)}s(EHt,"registerSkills");f();var dze=je(ri());var oY=class extends Ec{static{s(this,"AgentEditProgressReporter")}constructor(e){super(e)}async reportTurn(e,n){await this.ctx.get(Cn).connection.sendProgress(new dze.ProgressType,e.partialResultToken,[{editConversationId:e.editConversationId,editTurnId:e.editTurnId,...n}])}};f();var fze=je(Za()),pze=je(_m());var sY=class extends tA{constructor(){super(...arguments);this.requestType=new fze.ProtocolRequestType("conversation/invokeClientToolConfirmation");this.typeCheck=ms.Compile(VOe)}static{s(this,"AgentClientToolConfirmationInvoker")}async invokeClientToolConfirmation(n,r){let i=this.ctx.get(Cn).connection,o;try{let a=await i.sendRequest(this.requestType,r),[l,c]=a;if(c){let u=new pze.ResponseError(c.code,c.message,c.data);throw Ln.error(this.ctx,`ResponseError while invoking client tool confirmation ${r.name}`,u),new Error(`Failed to invoke client tool confirmation ${r.name}: ${c.message}`)}o=l}catch(a){throw new Error(`Failed to invoke client tool confirmation ${r.name}: ${String(a)}`)}if(o==null)throw new Error(`Failed to invoke client tool confirmation ${r.name}: No result returned`);if(!this.typeCheck.Check(o))throw new Ic(this.typeCheck.Errors(o));return o}};f();var mze=je(Za()),hze=je(_m());var aY=class extends eb{constructor(){super(...arguments);this.requestType=new mze.ProtocolRequestType("conversation/invokeClientTool");this.typeCheck=ms.Compile(jOe)}static{s(this,"AgentClientToolInvoker")}async invokeClientTool(n,r){let i=this.ctx.get(Cn).connection,o;try{let a=await i.sendRequest(this.requestType,r),[l,c]=a;if(c){let u=new hze.ResponseError(c.code,c.message,c.data);throw Ln.error(this.ctx,`ResponseError while invoking client tool ${r.name}`,u),new Error(`Failed to invoke client tool ${r.name}: ${c.message}`)}o=l}catch(a){throw new Error(`Failed to invoke client tool ${r.name}: ${String(a)}`)}if(o==null)throw new Error(`Failed to invoke client tool ${r.name}: No result returned`);if(!this.typeCheck.Check(o))throw new Ic(this.typeCheck.Errors(o));return this.transformToToolResult(o)}transformToToolResult(n){let r=n.content.map(i=>typeof i.value=="string"?new Ci(i.value):new xT(i.value));return new Gi(r,n.status??"success")}};f();f();function gze(t,e,n){try{let r=t.get(Dt).javaContextProviderParams(n);if(r){let i=JSON.parse(r);for(let[o,a]of Object.entries(i))e.set(o,a)}}catch(r){return or.debug(t,"Failed to get the active Java experiments for the Context Provider API",r),!1}return!0}s(gze,"fillInJavaActiveExperiments");var Hme=je(_m());var IHt={type:new Hme.NotificationType("featureFlagsNotification")},THt={type:new Hme.NotificationType("copilot/didChangeFeatureFlags")},F6=class{constructor(e){this.ctx=e;ia(e,n=>this.sendNotification(n))}static{s(this,"FeatureFlagsNotifier")}async sendNotification(e){let n=this.ctx,i=await n.get(Dt).updateExPValuesAndAssignments(),o={};n.get(Dt).excludeRelatedFiles(i)&&(o.ExcludeRelatedFiles=!0);let a=Cie(n,i);a.length>0&&(o.ExpContextProviders=a);let l=new Map;L4e(n,a,l,i),gU(n,l,i),gze(n,l,i);for(let[d,p]of l.entries())o[d]=p;let c=n.get(Go),u=n.get(Cn).connection;if(c.getCapabilities().didChangeFeatureFlags)await u.sendNotification(THt.type,{envelope:{...e.envelope,token:void 0,expires_at:void 0,refresh_in:void 0,user_notification:void 0,limited_user_quotas:void 0,limited_user_reset_date:void 0,error_details:void 0,organization_list:void 0,enterprise_list:void 0,endpoints:void 0},token:e.getTokenValues(),activeExps:o});else{let d={rt:e.getTokenValue("rt")==="1",sn:e.getTokenValue("sn")==="1",chat:e.envelope.chat_enabled??!1,ic:e.envelope.chat_enabled??!1,pc:!0,ae:o};e.envelope.xcode_chat&&e.envelope.chat_enabled&&(d.xc=!0),await u.sendNotification(IHt.type,d)}}};f();var lY=class extends Ji{constructor(n){super();this.ctx=n;this.notificationEndpoint="statusNotification"}static{s(this,"NotificationStatusReporter")}didChange(n){let r=n.kind;n.busy&&r!=="Error"&&(r="InProgress"),this.ctx.get(Cn).connection.sendNotification(ete.type,{busy:n.busy,kind:n.kind,status:r,message:n.message??""}),this.ctx.get(Cn).connection.sendNotification("didChangeStatus",{busy:n.busy,kind:n.kind,message:n.message})}};f();var Aze=new E3;f();f();f();f();var Oo=new Tt("CopilotMCP");async function Gme(t,e){await t.get(Km).notifyLog(e)}s(Gme,"notifyMCPRuntimeLog");async function NA(t,e){await Gme(t,{...e,level:"error"})}s(NA,"notifyMCPRuntimeError");async function HT(t,e){await Gme(t,{...e,level:"warning"})}s(HT,"notifyMCPRuntimeWarning");async function du(t,e){await Gme(t,{...e,level:"info"})}s(du,"notifyMCPRuntimeInfo");f();var jme=/[^a-z0-9_-]/gi;var wHt=process.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function yze(){let t={};for(let e of wHt){let n=process.env[e];n!==void 0&&(n.startsWith("()")||(t[e]=n))}return t}s(yze,"getDefaultEnvironment");async function Cze(t,e,n){if(!e.description){let r=`Tool ${e.name} does not have a description. Tools must be accurately described to be called.`;Oo.warn(t,r),await HT(t,{message:r,server:n,tool:e.name}),e.description="<empty>"}if(jme.lastIndex=0,jme.test(e.name)){let r=`Tool ${e.name} is invalid. Tools names may only contain [a-zA-Z0-9_-]`;Oo.warn(t,r),await HT(t,{message:r,server:n,tool:e.name}),e._nameForModel=e.name.replace(jme,"_")}else e._nameForModel=e.name;return e}s(Cze,"normalizeTool");var cY=class{constructor(){this.seenPrefixes=new Set}static{s(this,"McpPrefixGenerator")}generate(e){let n="mcp_"+e.toLowerCase().replace(/[^a-z0-9_.-]+/g,"_").slice(0,13),r=n;for(let i=2;this.seenPrefixes.has(r);i++)r=n+i;return this.seenPrefixes.add(r),r}};f();f();f();f();var ro;(function(t){t.assertEqual=i=>i;function e(i){}s(e,"assertIs"),t.assertIs=e;function n(i){throw new Error}s(n,"assertNever"),t.assertNever=n,t.arrayToEnum=i=>{let o={};for(let a of i)o[a]=a;return o},t.getValidEnumValues=i=>{let o=t.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),a={};for(let l of o)a[l]=i[l];return t.objectValues(a)},t.objectValues=i=>t.objectKeys(i).map(function(o){return i[o]}),t.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{let o=[];for(let a in i)Object.prototype.hasOwnProperty.call(i,a)&&o.push(a);return o},t.find=(i,o)=>{for(let a of i)if(o(a))return a},t.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&isFinite(i)&&Math.floor(i)===i;function r(i,o=" | "){return i.map(a=>typeof a=="string"?`'${a}'`:a).join(o)}s(r,"joinValues"),t.joinValues=r,t.jsonStringifyReplacer=(i,o)=>typeof o=="bigint"?o.toString():o})(ro||(ro={}));var $me;(function(t){t.mergeShapes=(e,n)=>({...e,...n})})($me||($me={}));var pn=ro.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Yy=s(t=>{switch(typeof t){case"undefined":return pn.undefined;case"string":return pn.string;case"number":return isNaN(t)?pn.nan:pn.number;case"boolean":return pn.boolean;case"function":return pn.function;case"bigint":return pn.bigint;case"symbol":return pn.symbol;case"object":return Array.isArray(t)?pn.array:t===null?pn.null:t.then&&typeof t.then=="function"&&t.catch&&typeof t.catch=="function"?pn.promise:typeof Map<"u"&&t instanceof Map?pn.map:typeof Set<"u"&&t instanceof Set?pn.set:typeof Date<"u"&&t instanceof Date?pn.date:pn.object;default:return pn.unknown}},"getParsedType"),St=ro.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),_Ht=s(t=>JSON.stringify(t,null,2).replace(/"([^"]+)":/g,"$1:"),"quotelessJson"),J0=class t extends Error{static{s(this,"ZodError")}get errors(){return this.issues}constructor(e){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};let n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=e}format(e){let n=e||function(o){return o.message},r={_errors:[]},i=s(o=>{for(let a of o.issues)if(a.code==="invalid_union")a.unionErrors.map(i);else if(a.code==="invalid_return_type")i(a.returnTypeError);else if(a.code==="invalid_arguments")i(a.argumentsError);else if(a.path.length===0)r._errors.push(n(a));else{let l=r,c=0;for(;c<a.path.length;){let u=a.path[c];c===a.path.length-1?(l[u]=l[u]||{_errors:[]},l[u]._errors.push(n(a))):l[u]=l[u]||{_errors:[]},l=l[u],c++}}},"processError");return i(this),r}static assert(e){if(!(e instanceof t))throw new Error(`Not a ZodError: ${e}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,ro.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=n=>n.message){let n={},r=[];for(let i of this.issues)i.path.length>0?(n[i.path[0]]=n[i.path[0]]||[],n[i.path[0]].push(e(i))):r.push(e(i));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}};J0.create=t=>new J0(t);var w3=s((t,e)=>{let n;switch(t.code){case St.invalid_type:t.received===pn.undefined?n="Required":n=`Expected ${t.expected}, received ${t.received}`;break;case St.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(t.expected,ro.jsonStringifyReplacer)}`;break;case St.unrecognized_keys:n=`Unrecognized key(s) in object: ${ro.joinValues(t.keys,", ")}`;break;case St.invalid_union:n="Invalid input";break;case St.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${ro.joinValues(t.options)}`;break;case St.invalid_enum_value:n=`Invalid enum value. Expected ${ro.joinValues(t.options)}, received '${t.received}'`;break;case St.invalid_arguments:n="Invalid function arguments";break;case St.invalid_return_type:n="Invalid function return type";break;case St.invalid_date:n="Invalid date";break;case St.invalid_string:typeof t.validation=="object"?"includes"in t.validation?(n=`Invalid input: must include "${t.validation.includes}"`,typeof t.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${t.validation.position}`)):"startsWith"in t.validation?n=`Invalid input: must start with "${t.validation.startsWith}"`:"endsWith"in t.validation?n=`Invalid input: must end with "${t.validation.endsWith}"`:ro.assertNever(t.validation):t.validation!=="regex"?n=`Invalid ${t.validation}`:n="Invalid";break;case St.too_small:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at least":"more than"} ${t.minimum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at least":"over"} ${t.minimum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${t.minimum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly equal to ":t.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(t.minimum))}`:n="Invalid input";break;case St.too_big:t.type==="array"?n=`Array must contain ${t.exact?"exactly":t.inclusive?"at most":"less than"} ${t.maximum} element(s)`:t.type==="string"?n=`String must contain ${t.exact?"exactly":t.inclusive?"at most":"under"} ${t.maximum} character(s)`:t.type==="number"?n=`Number must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="bigint"?n=`BigInt must be ${t.exact?"exactly":t.inclusive?"less than or equal to":"less than"} ${t.maximum}`:t.type==="date"?n=`Date must be ${t.exact?"exactly":t.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(t.maximum))}`:n="Invalid input";break;case St.custom:n="Invalid input";break;case St.invalid_intersection_types:n="Intersection results could not be merged";break;case St.not_multiple_of:n=`Number must be a multiple of ${t.multipleOf}`;break;case St.not_finite:n="Number must be finite";break;default:n=e.defaultError,ro.assertNever(t)}return{message:n}},"errorMap"),Eze=w3;function SHt(t){Eze=t}s(SHt,"setErrorMap");function uY(){return Eze}s(uY,"getErrorMap");var dY=s(t=>{let{data:e,path:n,errorMaps:r,issueData:i}=t,o=[...n,...i.path||[]],a={...i,path:o};if(i.message!==void 0)return{...i,path:o,message:i.message};let l="",c=r.filter(u=>!!u).slice().reverse();for(let u of c)l=u(a,{data:e,defaultError:l}).message;return{...i,path:o,message:l}},"makeIssue"),RHt=[];function tn(t,e){let n=uY(),r=dY({issueData:e,data:t.data,path:t.path,errorMaps:[t.common.contextualErrorMap,t.schemaErrorMap,n,n===w3?void 0:w3].filter(i=>!!i)});t.common.issues.push(r)}s(tn,"addIssueToContext");var fu=class t{static{s(this,"ParseStatus")}constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(e,n){let r=[];for(let i of n){if(i.status==="aborted")return Lr;i.status==="dirty"&&e.dirty(),r.push(i.value)}return{status:e.value,value:r}}static async mergeObjectAsync(e,n){let r=[];for(let i of n){let o=await i.key,a=await i.value;r.push({key:o,value:a})}return t.mergeObjectSync(e,r)}static mergeObjectSync(e,n){let r={};for(let i of n){let{key:o,value:a}=i;if(o.status==="aborted"||a.status==="aborted")return Lr;o.status==="dirty"&&e.dirty(),a.status==="dirty"&&e.dirty(),o.value!=="__proto__"&&(typeof a.value<"u"||i.alwaysSet)&&(r[o.value]=a.value)}return{status:e.value,value:r}}},Lr=Object.freeze({status:"aborted"}),T3=s(t=>({status:"dirty",value:t}),"DIRTY"),zu=s(t=>({status:"valid",value:t}),"OK"),zme=s(t=>t.status==="aborted","isAborted"),Yme=s(t=>t.status==="dirty","isDirty"),GT=s(t=>t.status==="valid","isValid"),O6=s(t=>typeof Promise<"u"&&t instanceof Promise,"isAsync");function fY(t,e,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof e=="function"?t!==e||!r:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(t):r?r.value:e.get(t)}s(fY,"__classPrivateFieldGet");function Ize(t,e,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof e=="function"?t!==e||!i:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(t,n):i?i.value=n:e.set(t,n),n}s(Ize,"__classPrivateFieldSet");var Dn;(function(t){t.errToObj=e=>typeof e=="string"?{message:e}:e||{},t.toString=e=>typeof e=="string"?e:e?.message})(Dn||(Dn={}));var M6,Q6,Dp=class{static{s(this,"ParseInputLazyPath")}constructor(e,n,r,i){this._cachedPath=[],this.parent=e,this.data=n,this._path=r,this._key=i}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}},xze=s((t,e)=>{if(GT(e))return{success:!0,data:e.value};if(!t.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;let n=new J0(t.common.issues);return this._error=n,this._error}}},"handleResult");function ei(t){if(!t)return{};let{errorMap:e,invalid_type_error:n,required_error:r,description:i}=t;if(e&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return e?{errorMap:e,description:i}:{errorMap:s((a,l)=>{var c,u;let{message:d}=t;return a.code==="invalid_enum_value"?{message:d??l.defaultError}:typeof l.data>"u"?{message:(c=d??r)!==null&&c!==void 0?c:l.defaultError}:a.code!=="invalid_type"?{message:l.defaultError}:{message:(u=d??n)!==null&&u!==void 0?u:l.defaultError}},"customMap"),description:i}}s(ei,"processCreateParams");var ti=class{static{s(this,"ZodType")}get description(){return this._def.description}_getType(e){return Yy(e.data)}_getOrReturnCtx(e,n){return n||{common:e.parent.common,data:e.data,parsedType:Yy(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new fu,ctx:{common:e.parent.common,data:e.data,parsedType:Yy(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){let n=this._parse(e);if(O6(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(e){let n=this._parse(e);return Promise.resolve(n)}parse(e,n){let r=this.safeParse(e,n);if(r.success)return r.data;throw r.error}safeParse(e,n){var r;let i={common:{issues:[],async:(r=n?.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n?.errorMap},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Yy(e)},o=this._parseSync({data:e,path:i.path,parent:i});return xze(i,o)}"~validate"(e){var n,r;let i={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Yy(e)};if(!this["~standard"].async)try{let o=this._parseSync({data:e,path:[],parent:i});return GT(o)?{value:o.value}:{issues:i.common.issues}}catch(o){!((r=(n=o?.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),i.common={issues:[],async:!0}}return this._parseAsync({data:e,path:[],parent:i}).then(o=>GT(o)?{value:o.value}:{issues:i.common.issues})}async parseAsync(e,n){let r=await this.safeParseAsync(e,n);if(r.success)return r.data;throw r.error}async safeParseAsync(e,n){let r={common:{issues:[],contextualErrorMap:n?.errorMap,async:!0},path:n?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:Yy(e)},i=this._parse({data:e,path:r.path,parent:r}),o=await(O6(i)?i:Promise.resolve(i));return xze(r,o)}refine(e,n){let r=s(i=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(i):n,"getIssueProperties");return this._refinement((i,o)=>{let a=e(i),l=s(()=>o.addIssue({code:St.custom,...r(i)}),"setError");return typeof Promise<"u"&&a instanceof Promise?a.then(c=>c?!0:(l(),!1)):a?!0:(l(),!1)})}refinement(e,n){return this._refinement((r,i)=>e(r)?!0:(i.addIssue(typeof n=="function"?n(r,i):n),!1))}_refinement(e){return new X0({schema:this,typeName:Rr.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:s(n=>this["~validate"](n),"validate")}}optional(){return Pp.create(this,this._def)}nullable(){return FA.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Jy.create(this)}promise(){return $b.create(this,this._def)}or(e){return JT.create([this,e],this._def)}and(e){return XT.create(this,e,this._def)}transform(e){return new X0({...ei(this._def),schema:this,typeName:Rr.ZodEffects,effect:{type:"transform",transform:e}})}default(e){let n=typeof e=="function"?e:()=>e;return new rw({...ei(this._def),innerType:this,defaultValue:n,typeName:Rr.ZodDefault})}brand(){return new U6({typeName:Rr.ZodBranded,type:this,...ei(this._def)})}catch(e){let n=typeof e=="function"?e:()=>e;return new iw({...ei(this._def),innerType:this,catchValue:n,typeName:Rr.ZodCatch})}describe(e){let n=this.constructor;return new n({...this._def,description:e})}pipe(e){return q6.create(this,e)}readonly(){return ow.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}},kHt=/^c[^\s-]{8,}$/i,BHt=/^[0-9a-z]+$/,PHt=/^[0-9A-HJKMNP-TV-Z]{26}$/i,DHt=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,NHt=/^[a-z0-9_-]{21}$/i,LHt=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,FHt=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,MHt=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,QHt="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$",Vme,OHt=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,UHt=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,qHt=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,WHt=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,HHt=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,GHt=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Tze="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",jHt=new RegExp(`^${Tze}$`);function wze(t){let e="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return t.precision?e=`${e}\\.\\d{${t.precision}}`:t.precision==null&&(e=`${e}(\\.\\d+)?`),e}s(wze,"timeRegexSource");function VHt(t){return new RegExp(`^${wze(t)}$`)}s(VHt,"timeRegex");function _ze(t){let e=`${Tze}T${wze(t)}`,n=[];return n.push(t.local?"Z?":"Z"),t.offset&&n.push("([+-]\\d{2}:?\\d{2})"),e=`${e}(${n.join("|")})`,new RegExp(`^${e}$`)}s(_ze,"datetimeRegex");function $Ht(t,e){return!!((e==="v4"||!e)&&OHt.test(t)||(e==="v6"||!e)&&qHt.test(t))}s($Ht,"isValidIP");function zHt(t,e){if(!LHt.test(t))return!1;try{let[n]=t.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),i=JSON.parse(atob(r));return!(typeof i!="object"||i===null||!i.typ||!i.alg||e&&i.alg!==e)}catch{return!1}}s(zHt,"isValidJWT");function YHt(t,e){return!!((e==="v4"||!e)&&UHt.test(t)||(e==="v6"||!e)&&WHt.test(t))}s(YHt,"isValidCidr");var jb=class t extends ti{static{s(this,"ZodString")}_parse(e){if(this._def.coerce&&(e.data=String(e.data)),this._getType(e)!==pn.string){let o=this._getOrReturnCtx(e);return tn(o,{code:St.invalid_type,expected:pn.string,received:o.parsedType}),Lr}let r=new fu,i;for(let o of this._def.checks)if(o.kind==="min")e.data.length<o.value&&(i=this._getOrReturnCtx(e,i),tn(i,{code:St.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="max")e.data.length>o.value&&(i=this._getOrReturnCtx(e,i),tn(i,{code:St.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!1,message:o.message}),r.dirty());else if(o.kind==="length"){let a=e.data.length>o.value,l=e.data.length<o.value;(a||l)&&(i=this._getOrReturnCtx(e,i),a?tn(i,{code:St.too_big,maximum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}):l&&tn(i,{code:St.too_small,minimum:o.value,type:"string",inclusive:!0,exact:!0,message:o.message}),r.dirty())}else if(o.kind==="email")MHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"email",code:St.invalid_string,message:o.message}),r.dirty());else if(o.kind==="emoji")Vme||(Vme=new RegExp(QHt,"u")),Vme.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"emoji",code:St.invalid_string,message:o.message}),r.dirty());else if(o.kind==="uuid")DHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"uuid",code:St.invalid_string,message:o.message}),r.dirty());else if(o.kind==="nanoid")NHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"nanoid",code:St.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid")kHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"cuid",code:St.invalid_string,message:o.message}),r.dirty());else if(o.kind==="cuid2")BHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"cuid2",code:St.invalid_string,message:o.message}),r.dirty());else if(o.kind==="ulid")PHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"ulid",code:St.invalid_string,message:o.message}),r.dirty());else if(o.kind==="url")try{new URL(e.data)}catch{i=this._getOrReturnCtx(e,i),tn(i,{validation:"url",code:St.invalid_string,message:o.message}),r.dirty()}else o.kind==="regex"?(o.regex.lastIndex=0,o.regex.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"regex",code:St.invalid_string,message:o.message}),r.dirty())):o.kind==="trim"?e.data=e.data.trim():o.kind==="includes"?e.data.includes(o.value,o.position)||(i=this._getOrReturnCtx(e,i),tn(i,{code:St.invalid_string,validation:{includes:o.value,position:o.position},message:o.message}),r.dirty()):o.kind==="toLowerCase"?e.data=e.data.toLowerCase():o.kind==="toUpperCase"?e.data=e.data.toUpperCase():o.kind==="startsWith"?e.data.startsWith(o.value)||(i=this._getOrReturnCtx(e,i),tn(i,{code:St.invalid_string,validation:{startsWith:o.value},message:o.message}),r.dirty()):o.kind==="endsWith"?e.data.endsWith(o.value)||(i=this._getOrReturnCtx(e,i),tn(i,{code:St.invalid_string,validation:{endsWith:o.value},message:o.message}),r.dirty()):o.kind==="datetime"?_ze(o).test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{code:St.invalid_string,validation:"datetime",message:o.message}),r.dirty()):o.kind==="date"?jHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{code:St.invalid_string,validation:"date",message:o.message}),r.dirty()):o.kind==="time"?VHt(o).test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{code:St.invalid_string,validation:"time",message:o.message}),r.dirty()):o.kind==="duration"?FHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"duration",code:St.invalid_string,message:o.message}),r.dirty()):o.kind==="ip"?$Ht(e.data,o.version)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"ip",code:St.invalid_string,message:o.message}),r.dirty()):o.kind==="jwt"?zHt(e.data,o.alg)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"jwt",code:St.invalid_string,message:o.message}),r.dirty()):o.kind==="cidr"?YHt(e.data,o.version)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"cidr",code:St.invalid_string,message:o.message}),r.dirty()):o.kind==="base64"?HHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"base64",code:St.invalid_string,message:o.message}),r.dirty()):o.kind==="base64url"?GHt.test(e.data)||(i=this._getOrReturnCtx(e,i),tn(i,{validation:"base64url",code:St.invalid_string,message:o.message}),r.dirty()):ro.assertNever(o);return{status:r.value,value:e.data}}_regex(e,n,r){return this.refinement(i=>e.test(i),{validation:n,code:St.invalid_string,...Dn.errToObj(r)})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}email(e){return this._addCheck({kind:"email",...Dn.errToObj(e)})}url(e){return this._addCheck({kind:"url",...Dn.errToObj(e)})}emoji(e){return this._addCheck({kind:"emoji",...Dn.errToObj(e)})}uuid(e){return this._addCheck({kind:"uuid",...Dn.errToObj(e)})}nanoid(e){return this._addCheck({kind:"nanoid",...Dn.errToObj(e)})}cuid(e){return this._addCheck({kind:"cuid",...Dn.errToObj(e)})}cuid2(e){return this._addCheck({kind:"cuid2",...Dn.errToObj(e)})}ulid(e){return this._addCheck({kind:"ulid",...Dn.errToObj(e)})}base64(e){return this._addCheck({kind:"base64",...Dn.errToObj(e)})}base64url(e){return this._addCheck({kind:"base64url",...Dn.errToObj(e)})}jwt(e){return this._addCheck({kind:"jwt",...Dn.errToObj(e)})}ip(e){return this._addCheck({kind:"ip",...Dn.errToObj(e)})}cidr(e){return this._addCheck({kind:"cidr",...Dn.errToObj(e)})}datetime(e){var n,r;return typeof e=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:e}):this._addCheck({kind:"datetime",precision:typeof e?.precision>"u"?null:e?.precision,offset:(n=e?.offset)!==null&&n!==void 0?n:!1,local:(r=e?.local)!==null&&r!==void 0?r:!1,...Dn.errToObj(e?.message)})}date(e){return this._addCheck({kind:"date",message:e})}time(e){return typeof e=="string"?this._addCheck({kind:"time",precision:null,message:e}):this._addCheck({kind:"time",precision:typeof e?.precision>"u"?null:e?.precision,...Dn.errToObj(e?.message)})}duration(e){return this._addCheck({kind:"duration",...Dn.errToObj(e)})}regex(e,n){return this._addCheck({kind:"regex",regex:e,...Dn.errToObj(n)})}includes(e,n){return this._addCheck({kind:"includes",value:e,position:n?.position,...Dn.errToObj(n?.message)})}startsWith(e,n){return this._addCheck({kind:"startsWith",value:e,...Dn.errToObj(n)})}endsWith(e,n){return this._addCheck({kind:"endsWith",value:e,...Dn.errToObj(n)})}min(e,n){return this._addCheck({kind:"min",value:e,...Dn.errToObj(n)})}max(e,n){return this._addCheck({kind:"max",value:e,...Dn.errToObj(n)})}length(e,n){return this._addCheck({kind:"length",value:e,...Dn.errToObj(n)})}nonempty(e){return this.min(1,Dn.errToObj(e))}trim(){return new t({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new t({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(e=>e.kind==="datetime")}get isDate(){return!!this._def.checks.find(e=>e.kind==="date")}get isTime(){return!!this._def.checks.find(e=>e.kind==="time")}get isDuration(){return!!this._def.checks.find(e=>e.kind==="duration")}get isEmail(){return!!this._def.checks.find(e=>e.kind==="email")}get isURL(){return!!this._def.checks.find(e=>e.kind==="url")}get isEmoji(){return!!this._def.checks.find(e=>e.kind==="emoji")}get isUUID(){return!!this._def.checks.find(e=>e.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(e=>e.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(e=>e.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(e=>e.kind==="cuid2")}get isULID(){return!!this._def.checks.find(e=>e.kind==="ulid")}get isIP(){return!!this._def.checks.find(e=>e.kind==="ip")}get isCIDR(){return!!this._def.checks.find(e=>e.kind==="cidr")}get isBase64(){return!!this._def.checks.find(e=>e.kind==="base64")}get isBase64url(){return!!this._def.checks.find(e=>e.kind==="base64url")}get minLength(){let e=null;for(let n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxLength(){let e=null;for(let n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}};jb.create=t=>{var e;return new jb({checks:[],typeName:Rr.ZodString,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...ei(t)})};function KHt(t,e){let n=(t.toString().split(".")[1]||"").length,r=(e.toString().split(".")[1]||"").length,i=n>r?n:r,o=parseInt(t.toFixed(i).replace(".","")),a=parseInt(e.toFixed(i).replace(".",""));return o%a/Math.pow(10,i)}s(KHt,"floatSafeRemainder");var jT=class t extends ti{static{s(this,"ZodNumber")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(e){if(this._def.coerce&&(e.data=Number(e.data)),this._getType(e)!==pn.number){let o=this._getOrReturnCtx(e);return tn(o,{code:St.invalid_type,expected:pn.number,received:o.parsedType}),Lr}let r,i=new fu;for(let o of this._def.checks)o.kind==="int"?ro.isInteger(e.data)||(r=this._getOrReturnCtx(e,r),tn(r,{code:St.invalid_type,expected:"integer",received:"float",message:o.message}),i.dirty()):o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),tn(r,{code:St.too_small,minimum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),tn(r,{code:St.too_big,maximum:o.value,type:"number",inclusive:o.inclusive,exact:!1,message:o.message}),i.dirty()):o.kind==="multipleOf"?KHt(e.data,o.value)!==0&&(r=this._getOrReturnCtx(e,r),tn(r,{code:St.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):o.kind==="finite"?Number.isFinite(e.data)||(r=this._getOrReturnCtx(e,r),tn(r,{code:St.not_finite,message:o.message}),i.dirty()):ro.assertNever(o);return{status:i.value,value:e.data}}gte(e,n){return this.setLimit("min",e,!0,Dn.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Dn.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Dn.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Dn.toString(n))}setLimit(e,n,r,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Dn.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}int(e){return this._addCheck({kind:"int",message:Dn.toString(e)})}positive(e){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Dn.toString(e)})}negative(e){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Dn.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Dn.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Dn.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Dn.toString(n)})}finite(e){return this._addCheck({kind:"finite",message:Dn.toString(e)})}safe(e){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Dn.toString(e)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Dn.toString(e)})}get minValue(){let e=null;for(let n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(let n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}get isInt(){return!!this._def.checks.find(e=>e.kind==="int"||e.kind==="multipleOf"&&ro.isInteger(e.value))}get isFinite(){let e=null,n=null;for(let r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(e===null||r.value<e)&&(e=r.value)}return Number.isFinite(n)&&Number.isFinite(e)}};jT.create=t=>new jT({checks:[],typeName:Rr.ZodNumber,coerce:t?.coerce||!1,...ei(t)});var VT=class t extends ti{static{s(this,"ZodBigInt")}constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(e){if(this._def.coerce)try{e.data=BigInt(e.data)}catch{return this._getInvalidInput(e)}if(this._getType(e)!==pn.bigint)return this._getInvalidInput(e);let r,i=new fu;for(let o of this._def.checks)o.kind==="min"?(o.inclusive?e.data<o.value:e.data<=o.value)&&(r=this._getOrReturnCtx(e,r),tn(r,{code:St.too_small,type:"bigint",minimum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="max"?(o.inclusive?e.data>o.value:e.data>=o.value)&&(r=this._getOrReturnCtx(e,r),tn(r,{code:St.too_big,type:"bigint",maximum:o.value,inclusive:o.inclusive,message:o.message}),i.dirty()):o.kind==="multipleOf"?e.data%o.value!==BigInt(0)&&(r=this._getOrReturnCtx(e,r),tn(r,{code:St.not_multiple_of,multipleOf:o.value,message:o.message}),i.dirty()):ro.assertNever(o);return{status:i.value,value:e.data}}_getInvalidInput(e){let n=this._getOrReturnCtx(e);return tn(n,{code:St.invalid_type,expected:pn.bigint,received:n.parsedType}),Lr}gte(e,n){return this.setLimit("min",e,!0,Dn.toString(n))}gt(e,n){return this.setLimit("min",e,!1,Dn.toString(n))}lte(e,n){return this.setLimit("max",e,!0,Dn.toString(n))}lt(e,n){return this.setLimit("max",e,!1,Dn.toString(n))}setLimit(e,n,r,i){return new t({...this._def,checks:[...this._def.checks,{kind:e,value:n,inclusive:r,message:Dn.toString(i)}]})}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}positive(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Dn.toString(e)})}negative(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Dn.toString(e)})}nonpositive(e){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Dn.toString(e)})}nonnegative(e){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Dn.toString(e)})}multipleOf(e,n){return this._addCheck({kind:"multipleOf",value:e,message:Dn.toString(n)})}get minValue(){let e=null;for(let n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e}get maxValue(){let e=null;for(let n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e}};VT.create=t=>{var e;return new VT({checks:[],typeName:Rr.ZodBigInt,coerce:(e=t?.coerce)!==null&&e!==void 0?e:!1,...ei(t)})};var $T=class extends ti{static{s(this,"ZodBoolean")}_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==pn.boolean){let r=this._getOrReturnCtx(e);return tn(r,{code:St.invalid_type,expected:pn.boolean,received:r.parsedType}),Lr}return zu(e.data)}};$T.create=t=>new $T({typeName:Rr.ZodBoolean,coerce:t?.coerce||!1,...ei(t)});var zT=class t extends ti{static{s(this,"ZodDate")}_parse(e){if(this._def.coerce&&(e.data=new Date(e.data)),this._getType(e)!==pn.date){let o=this._getOrReturnCtx(e);return tn(o,{code:St.invalid_type,expected:pn.date,received:o.parsedType}),Lr}if(isNaN(e.data.getTime())){let o=this._getOrReturnCtx(e);return tn(o,{code:St.invalid_date}),Lr}let r=new fu,i;for(let o of this._def.checks)o.kind==="min"?e.data.getTime()<o.value&&(i=this._getOrReturnCtx(e,i),tn(i,{code:St.too_small,message:o.message,inclusive:!0,exact:!1,minimum:o.value,type:"date"}),r.dirty()):o.kind==="max"?e.data.getTime()>o.value&&(i=this._getOrReturnCtx(e,i),tn(i,{code:St.too_big,message:o.message,inclusive:!0,exact:!1,maximum:o.value,type:"date"}),r.dirty()):ro.assertNever(o);return{status:r.value,value:new Date(e.data.getTime())}}_addCheck(e){return new t({...this._def,checks:[...this._def.checks,e]})}min(e,n){return this._addCheck({kind:"min",value:e.getTime(),message:Dn.toString(n)})}max(e,n){return this._addCheck({kind:"max",value:e.getTime(),message:Dn.toString(n)})}get minDate(){let e=null;for(let n of this._def.checks)n.kind==="min"&&(e===null||n.value>e)&&(e=n.value);return e!=null?new Date(e):null}get maxDate(){let e=null;for(let n of this._def.checks)n.kind==="max"&&(e===null||n.value<e)&&(e=n.value);return e!=null?new Date(e):null}};zT.create=t=>new zT({checks:[],coerce:t?.coerce||!1,typeName:Rr.ZodDate,...ei(t)});var _3=class extends ti{static{s(this,"ZodSymbol")}_parse(e){if(this._getType(e)!==pn.symbol){let r=this._getOrReturnCtx(e);return tn(r,{code:St.invalid_type,expected:pn.symbol,received:r.parsedType}),Lr}return zu(e.data)}};_3.create=t=>new _3({typeName:Rr.ZodSymbol,...ei(t)});var YT=class extends ti{static{s(this,"ZodUndefined")}_parse(e){if(this._getType(e)!==pn.undefined){let r=this._getOrReturnCtx(e);return tn(r,{code:St.invalid_type,expected:pn.undefined,received:r.parsedType}),Lr}return zu(e.data)}};YT.create=t=>new YT({typeName:Rr.ZodUndefined,...ei(t)});var KT=class extends ti{static{s(this,"ZodNull")}_parse(e){if(this._getType(e)!==pn.null){let r=this._getOrReturnCtx(e);return tn(r,{code:St.invalid_type,expected:pn.null,received:r.parsedType}),Lr}return zu(e.data)}};KT.create=t=>new KT({typeName:Rr.ZodNull,...ei(t)});var Vb=class extends ti{static{s(this,"ZodAny")}constructor(){super(...arguments),this._any=!0}_parse(e){return zu(e.data)}};Vb.create=t=>new Vb({typeName:Rr.ZodAny,...ei(t)});var Ky=class extends ti{static{s(this,"ZodUnknown")}constructor(){super(...arguments),this._unknown=!0}_parse(e){return zu(e.data)}};Ky.create=t=>new Ky({typeName:Rr.ZodUnknown,...ei(t)});var xh=class extends ti{static{s(this,"ZodNever")}_parse(e){let n=this._getOrReturnCtx(e);return tn(n,{code:St.invalid_type,expected:pn.never,received:n.parsedType}),Lr}};xh.create=t=>new xh({typeName:Rr.ZodNever,...ei(t)});var S3=class extends ti{static{s(this,"ZodVoid")}_parse(e){if(this._getType(e)!==pn.undefined){let r=this._getOrReturnCtx(e);return tn(r,{code:St.invalid_type,expected:pn.void,received:r.parsedType}),Lr}return zu(e.data)}};S3.create=t=>new S3({typeName:Rr.ZodVoid,...ei(t)});var Jy=class t extends ti{static{s(this,"ZodArray")}_parse(e){let{ctx:n,status:r}=this._processInputParams(e),i=this._def;if(n.parsedType!==pn.array)return tn(n,{code:St.invalid_type,expected:pn.array,received:n.parsedType}),Lr;if(i.exactLength!==null){let a=n.data.length>i.exactLength.value,l=n.data.length<i.exactLength.value;(a||l)&&(tn(n,{code:a?St.too_big:St.too_small,minimum:l?i.exactLength.value:void 0,maximum:a?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),r.dirty())}if(i.minLength!==null&&n.data.length<i.minLength.value&&(tn(n,{code:St.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),r.dirty()),i.maxLength!==null&&n.data.length>i.maxLength.value&&(tn(n,{code:St.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((a,l)=>i.type._parseAsync(new Dp(n,a,n.path,l)))).then(a=>fu.mergeArray(r,a));let o=[...n.data].map((a,l)=>i.type._parseSync(new Dp(n,a,n.path,l)));return fu.mergeArray(r,o)}get element(){return this._def.type}min(e,n){return new t({...this._def,minLength:{value:e,message:Dn.toString(n)}})}max(e,n){return new t({...this._def,maxLength:{value:e,message:Dn.toString(n)}})}length(e,n){return new t({...this._def,exactLength:{value:e,message:Dn.toString(n)}})}nonempty(e){return this.min(1,e)}};Jy.create=(t,e)=>new Jy({type:t,minLength:null,maxLength:null,exactLength:null,typeName:Rr.ZodArray,...ei(e)});function I3(t){if(t instanceof jd){let e={};for(let n in t.shape){let r=t.shape[n];e[n]=Pp.create(I3(r))}return new jd({...t._def,shape:s(()=>e,"shape")})}else return t instanceof Jy?new Jy({...t._def,type:I3(t.element)}):t instanceof Pp?Pp.create(I3(t.unwrap())):t instanceof FA?FA.create(I3(t.unwrap())):t instanceof LA?LA.create(t.items.map(e=>I3(e))):t}s(I3,"deepPartialify");var jd=class t extends ti{static{s(this,"ZodObject")}constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;let e=this._def.shape(),n=ro.objectKeys(e);return this._cached={shape:e,keys:n}}_parse(e){if(this._getType(e)!==pn.object){let u=this._getOrReturnCtx(e);return tn(u,{code:St.invalid_type,expected:pn.object,received:u.parsedType}),Lr}let{status:r,ctx:i}=this._processInputParams(e),{shape:o,keys:a}=this._getCached(),l=[];if(!(this._def.catchall instanceof xh&&this._def.unknownKeys==="strip"))for(let u in i.data)a.includes(u)||l.push(u);let c=[];for(let u of a){let d=o[u],p=i.data[u];c.push({key:{status:"valid",value:u},value:d._parse(new Dp(i,p,i.path,u)),alwaysSet:u in i.data})}if(this._def.catchall instanceof xh){let u=this._def.unknownKeys;if(u==="passthrough")for(let d of l)c.push({key:{status:"valid",value:d},value:{status:"valid",value:i.data[d]}});else if(u==="strict")l.length>0&&(tn(i,{code:St.unrecognized_keys,keys:l}),r.dirty());else if(u!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{let u=this._def.catchall;for(let d of l){let p=i.data[d];c.push({key:{status:"valid",value:d},value:u._parse(new Dp(i,p,i.path,d)),alwaysSet:d in i.data})}}return i.common.async?Promise.resolve().then(async()=>{let u=[];for(let d of c){let p=await d.key,m=await d.value;u.push({key:p,value:m,alwaysSet:d.alwaysSet})}return u}).then(u=>fu.mergeObjectSync(r,u)):fu.mergeObjectSync(r,c)}get shape(){return this._def.shape()}strict(e){return Dn.errToObj,new t({...this._def,unknownKeys:"strict",...e!==void 0?{errorMap:s((n,r)=>{var i,o,a,l;let c=(a=(o=(i=this._def).errorMap)===null||o===void 0?void 0:o.call(i,n,r).message)!==null&&a!==void 0?a:r.defaultError;return n.code==="unrecognized_keys"?{message:(l=Dn.errToObj(e).message)!==null&&l!==void 0?l:c}:{message:c}},"errorMap")}:{}})}strip(){return new t({...this._def,unknownKeys:"strip"})}passthrough(){return new t({...this._def,unknownKeys:"passthrough"})}extend(e){return new t({...this._def,shape:s(()=>({...this._def.shape(),...e}),"shape")})}merge(e){return new t({unknownKeys:e._def.unknownKeys,catchall:e._def.catchall,shape:s(()=>({...this._def.shape(),...e._def.shape()}),"shape"),typeName:Rr.ZodObject})}setKey(e,n){return this.augment({[e]:n})}catchall(e){return new t({...this._def,catchall:e})}pick(e){let n={};return ro.objectKeys(e).forEach(r=>{e[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new t({...this._def,shape:s(()=>n,"shape")})}omit(e){let n={};return ro.objectKeys(this.shape).forEach(r=>{e[r]||(n[r]=this.shape[r])}),new t({...this._def,shape:s(()=>n,"shape")})}deepPartial(){return I3(this)}partial(e){let n={};return ro.objectKeys(this.shape).forEach(r=>{let i=this.shape[r];e&&!e[r]?n[r]=i:n[r]=i.optional()}),new t({...this._def,shape:s(()=>n,"shape")})}required(e){let n={};return ro.objectKeys(this.shape).forEach(r=>{if(e&&!e[r])n[r]=this.shape[r];else{let o=this.shape[r];for(;o instanceof Pp;)o=o._def.innerType;n[r]=o}}),new t({...this._def,shape:s(()=>n,"shape")})}keyof(){return Sze(ro.objectKeys(this.shape))}};jd.create=(t,e)=>new jd({shape:s(()=>t,"shape"),unknownKeys:"strip",catchall:xh.create(),typeName:Rr.ZodObject,...ei(e)});jd.strictCreate=(t,e)=>new jd({shape:s(()=>t,"shape"),unknownKeys:"strict",catchall:xh.create(),typeName:Rr.ZodObject,...ei(e)});jd.lazycreate=(t,e)=>new jd({shape:t,unknownKeys:"strip",catchall:xh.create(),typeName:Rr.ZodObject,...ei(e)});var JT=class extends ti{static{s(this,"ZodUnion")}_parse(e){let{ctx:n}=this._processInputParams(e),r=this._def.options;function i(o){for(let l of o)if(l.result.status==="valid")return l.result;for(let l of o)if(l.result.status==="dirty")return n.common.issues.push(...l.ctx.common.issues),l.result;let a=o.map(l=>new J0(l.ctx.common.issues));return tn(n,{code:St.invalid_union,unionErrors:a}),Lr}if(s(i,"handleResults"),n.common.async)return Promise.all(r.map(async o=>{let a={...n,common:{...n.common,issues:[]},parent:null};return{result:await o._parseAsync({data:n.data,path:n.path,parent:a}),ctx:a}})).then(i);{let o,a=[];for(let c of r){let u={...n,common:{...n.common,issues:[]},parent:null},d=c._parseSync({data:n.data,path:n.path,parent:u});if(d.status==="valid")return d;d.status==="dirty"&&!o&&(o={result:d,ctx:u}),u.common.issues.length&&a.push(u.common.issues)}if(o)return n.common.issues.push(...o.ctx.common.issues),o.result;let l=a.map(c=>new J0(c));return tn(n,{code:St.invalid_union,unionErrors:l}),Lr}}get options(){return this._def.options}};JT.create=(t,e)=>new JT({options:t,typeName:Rr.ZodUnion,...ei(e)});var zy=s(t=>t instanceof ZT?zy(t.schema):t instanceof X0?zy(t.innerType()):t instanceof ew?[t.value]:t instanceof tw?t.options:t instanceof nw?ro.objectValues(t.enum):t instanceof rw?zy(t._def.innerType):t instanceof YT?[void 0]:t instanceof KT?[null]:t instanceof Pp?[void 0,...zy(t.unwrap())]:t instanceof FA?[null,...zy(t.unwrap())]:t instanceof U6||t instanceof ow?zy(t.unwrap()):t instanceof iw?zy(t._def.innerType):[],"getDiscriminator"),pY=class t extends ti{static{s(this,"ZodDiscriminatedUnion")}_parse(e){let{ctx:n}=this._processInputParams(e);if(n.parsedType!==pn.object)return tn(n,{code:St.invalid_type,expected:pn.object,received:n.parsedType}),Lr;let r=this.discriminator,i=n.data[r],o=this.optionsMap.get(i);return o?n.common.async?o._parseAsync({data:n.data,path:n.path,parent:n}):o._parseSync({data:n.data,path:n.path,parent:n}):(tn(n,{code:St.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),Lr)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(e,n,r){let i=new Map;for(let o of n){let a=zy(o.shape[e]);if(!a.length)throw new Error(`A discriminator value for key \`${e}\` could not be extracted from all schema options`);for(let l of a){if(i.has(l))throw new Error(`Discriminator property ${String(e)} has duplicate value ${String(l)}`);i.set(l,o)}}return new t({typeName:Rr.ZodDiscriminatedUnion,discriminator:e,options:n,optionsMap:i,...ei(r)})}};function Kme(t,e){let n=Yy(t),r=Yy(e);if(t===e)return{valid:!0,data:t};if(n===pn.object&&r===pn.object){let i=ro.objectKeys(e),o=ro.objectKeys(t).filter(l=>i.indexOf(l)!==-1),a={...t,...e};for(let l of o){let c=Kme(t[l],e[l]);if(!c.valid)return{valid:!1};a[l]=c.data}return{valid:!0,data:a}}else if(n===pn.array&&r===pn.array){if(t.length!==e.length)return{valid:!1};let i=[];for(let o=0;o<t.length;o++){let a=t[o],l=e[o],c=Kme(a,l);if(!c.valid)return{valid:!1};i.push(c.data)}return{valid:!0,data:i}}else return n===pn.date&&r===pn.date&&+t==+e?{valid:!0,data:t}:{valid:!1}}s(Kme,"mergeValues");var XT=class extends ti{static{s(this,"ZodIntersection")}_parse(e){let{status:n,ctx:r}=this._processInputParams(e),i=s((o,a)=>{if(zme(o)||zme(a))return Lr;let l=Kme(o.value,a.value);return l.valid?((Yme(o)||Yme(a))&&n.dirty(),{status:n.value,value:l.data}):(tn(r,{code:St.invalid_intersection_types}),Lr)},"handleParsed");return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([o,a])=>i(o,a)):i(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}};XT.create=(t,e,n)=>new XT({left:t,right:e,typeName:Rr.ZodIntersection,...ei(n)});var LA=class t extends ti{static{s(this,"ZodTuple")}_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==pn.array)return tn(r,{code:St.invalid_type,expected:pn.array,received:r.parsedType}),Lr;if(r.data.length<this._def.items.length)return tn(r,{code:St.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),Lr;!this._def.rest&&r.data.length>this._def.items.length&&(tn(r,{code:St.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());let o=[...r.data].map((a,l)=>{let c=this._def.items[l]||this._def.rest;return c?c._parse(new Dp(r,a,r.path,l)):null}).filter(a=>!!a);return r.common.async?Promise.all(o).then(a=>fu.mergeArray(n,a)):fu.mergeArray(n,o)}get items(){return this._def.items}rest(e){return new t({...this._def,rest:e})}};LA.create=(t,e)=>{if(!Array.isArray(t))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new LA({items:t,typeName:Rr.ZodTuple,rest:null,...ei(e)})};var mY=class t extends ti{static{s(this,"ZodRecord")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==pn.object)return tn(r,{code:St.invalid_type,expected:pn.object,received:r.parsedType}),Lr;let i=[],o=this._def.keyType,a=this._def.valueType;for(let l in r.data)i.push({key:o._parse(new Dp(r,l,r.path,l)),value:a._parse(new Dp(r,r.data[l],r.path,l)),alwaysSet:l in r.data});return r.common.async?fu.mergeObjectAsync(n,i):fu.mergeObjectSync(n,i)}get element(){return this._def.valueType}static create(e,n,r){return n instanceof ti?new t({keyType:e,valueType:n,typeName:Rr.ZodRecord,...ei(r)}):new t({keyType:jb.create(),valueType:e,typeName:Rr.ZodRecord,...ei(n)})}},R3=class extends ti{static{s(this,"ZodMap")}get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==pn.map)return tn(r,{code:St.invalid_type,expected:pn.map,received:r.parsedType}),Lr;let i=this._def.keyType,o=this._def.valueType,a=[...r.data.entries()].map(([l,c],u)=>({key:i._parse(new Dp(r,l,r.path,[u,"key"])),value:o._parse(new Dp(r,c,r.path,[u,"value"]))}));if(r.common.async){let l=new Map;return Promise.resolve().then(async()=>{for(let c of a){let u=await c.key,d=await c.value;if(u.status==="aborted"||d.status==="aborted")return Lr;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),l.set(u.value,d.value)}return{status:n.value,value:l}})}else{let l=new Map;for(let c of a){let u=c.key,d=c.value;if(u.status==="aborted"||d.status==="aborted")return Lr;(u.status==="dirty"||d.status==="dirty")&&n.dirty(),l.set(u.value,d.value)}return{status:n.value,value:l}}}};R3.create=(t,e,n)=>new R3({valueType:e,keyType:t,typeName:Rr.ZodMap,...ei(n)});var k3=class t extends ti{static{s(this,"ZodSet")}_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.parsedType!==pn.set)return tn(r,{code:St.invalid_type,expected:pn.set,received:r.parsedType}),Lr;let i=this._def;i.minSize!==null&&r.data.size<i.minSize.value&&(tn(r,{code:St.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),n.dirty()),i.maxSize!==null&&r.data.size>i.maxSize.value&&(tn(r,{code:St.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),n.dirty());let o=this._def.valueType;function a(c){let u=new Set;for(let d of c){if(d.status==="aborted")return Lr;d.status==="dirty"&&n.dirty(),u.add(d.value)}return{status:n.value,value:u}}s(a,"finalizeSet");let l=[...r.data.values()].map((c,u)=>o._parse(new Dp(r,c,r.path,u)));return r.common.async?Promise.all(l).then(c=>a(c)):a(l)}min(e,n){return new t({...this._def,minSize:{value:e,message:Dn.toString(n)}})}max(e,n){return new t({...this._def,maxSize:{value:e,message:Dn.toString(n)}})}size(e,n){return this.min(e,n).max(e,n)}nonempty(e){return this.min(1,e)}};k3.create=(t,e)=>new k3({valueType:t,minSize:null,maxSize:null,typeName:Rr.ZodSet,...ei(e)});var hY=class t extends ti{static{s(this,"ZodFunction")}constructor(){super(...arguments),this.validate=this.implement}_parse(e){let{ctx:n}=this._processInputParams(e);if(n.parsedType!==pn.function)return tn(n,{code:St.invalid_type,expected:pn.function,received:n.parsedType}),Lr;function r(l,c){return dY({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,uY(),w3].filter(u=>!!u),issueData:{code:St.invalid_arguments,argumentsError:c}})}s(r,"makeArgsIssue");function i(l,c){return dY({data:l,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,uY(),w3].filter(u=>!!u),issueData:{code:St.invalid_return_type,returnTypeError:c}})}s(i,"makeReturnsIssue");let o={errorMap:n.common.contextualErrorMap},a=n.data;if(this._def.returns instanceof $b){let l=this;return zu(async function(...c){let u=new J0([]),d=await l._def.args.parseAsync(c,o).catch(h=>{throw u.addIssue(r(c,h)),u}),p=await Reflect.apply(a,this,d);return await l._def.returns._def.type.parseAsync(p,o).catch(h=>{throw u.addIssue(i(p,h)),u})})}else{let l=this;return zu(function(...c){let u=l._def.args.safeParse(c,o);if(!u.success)throw new J0([r(c,u.error)]);let d=Reflect.apply(a,this,u.data),p=l._def.returns.safeParse(d,o);if(!p.success)throw new J0([i(d,p.error)]);return p.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...e){return new t({...this._def,args:LA.create(e).rest(Ky.create())})}returns(e){return new t({...this._def,returns:e})}implement(e){return this.parse(e)}strictImplement(e){return this.parse(e)}static create(e,n,r){return new t({args:e||LA.create([]).rest(Ky.create()),returns:n||Ky.create(),typeName:Rr.ZodFunction,...ei(r)})}},ZT=class extends ti{static{s(this,"ZodLazy")}get schema(){return this._def.getter()}_parse(e){let{ctx:n}=this._processInputParams(e);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}};ZT.create=(t,e)=>new ZT({getter:t,typeName:Rr.ZodLazy,...ei(e)});var ew=class extends ti{static{s(this,"ZodLiteral")}_parse(e){if(e.data!==this._def.value){let n=this._getOrReturnCtx(e);return tn(n,{received:n.data,code:St.invalid_literal,expected:this._def.value}),Lr}return{status:"valid",value:e.data}}get value(){return this._def.value}};ew.create=(t,e)=>new ew({value:t,typeName:Rr.ZodLiteral,...ei(e)});function Sze(t,e){return new tw({values:t,typeName:Rr.ZodEnum,...ei(e)})}s(Sze,"createZodEnum");var tw=class t extends ti{static{s(this,"ZodEnum")}constructor(){super(...arguments),M6.set(this,void 0)}_parse(e){if(typeof e.data!="string"){let n=this._getOrReturnCtx(e),r=this._def.values;return tn(n,{expected:ro.joinValues(r),received:n.parsedType,code:St.invalid_type}),Lr}if(fY(this,M6,"f")||Ize(this,M6,new Set(this._def.values),"f"),!fY(this,M6,"f").has(e.data)){let n=this._getOrReturnCtx(e),r=this._def.values;return tn(n,{received:n.data,code:St.invalid_enum_value,options:r}),Lr}return zu(e.data)}get options(){return this._def.values}get enum(){let e={};for(let n of this._def.values)e[n]=n;return e}get Values(){let e={};for(let n of this._def.values)e[n]=n;return e}get Enum(){let e={};for(let n of this._def.values)e[n]=n;return e}extract(e,n=this._def){return t.create(e,{...this._def,...n})}exclude(e,n=this._def){return t.create(this.options.filter(r=>!e.includes(r)),{...this._def,...n})}};M6=new WeakMap;tw.create=Sze;var nw=class extends ti{static{s(this,"ZodNativeEnum")}constructor(){super(...arguments),Q6.set(this,void 0)}_parse(e){let n=ro.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(e);if(r.parsedType!==pn.string&&r.parsedType!==pn.number){let i=ro.objectValues(n);return tn(r,{expected:ro.joinValues(i),received:r.parsedType,code:St.invalid_type}),Lr}if(fY(this,Q6,"f")||Ize(this,Q6,new Set(ro.getValidEnumValues(this._def.values)),"f"),!fY(this,Q6,"f").has(e.data)){let i=ro.objectValues(n);return tn(r,{received:r.data,code:St.invalid_enum_value,options:i}),Lr}return zu(e.data)}get enum(){return this._def.values}};Q6=new WeakMap;nw.create=(t,e)=>new nw({values:t,typeName:Rr.ZodNativeEnum,...ei(e)});var $b=class extends ti{static{s(this,"ZodPromise")}unwrap(){return this._def.type}_parse(e){let{ctx:n}=this._processInputParams(e);if(n.parsedType!==pn.promise&&n.common.async===!1)return tn(n,{code:St.invalid_type,expected:pn.promise,received:n.parsedType}),Lr;let r=n.parsedType===pn.promise?n.data:Promise.resolve(n.data);return zu(r.then(i=>this._def.type.parseAsync(i,{path:n.path,errorMap:n.common.contextualErrorMap})))}};$b.create=(t,e)=>new $b({type:t,typeName:Rr.ZodPromise,...ei(e)});var X0=class extends ti{static{s(this,"ZodEffects")}innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===Rr.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){let{status:n,ctx:r}=this._processInputParams(e),i=this._def.effect||null,o={addIssue:s(a=>{tn(r,a),a.fatal?n.abort():n.dirty()},"addIssue"),get path(){return r.path}};if(o.addIssue=o.addIssue.bind(o),i.type==="preprocess"){let a=i.transform(r.data,o);if(r.common.async)return Promise.resolve(a).then(async l=>{if(n.value==="aborted")return Lr;let c=await this._def.schema._parseAsync({data:l,path:r.path,parent:r});return c.status==="aborted"?Lr:c.status==="dirty"||n.value==="dirty"?T3(c.value):c});{if(n.value==="aborted")return Lr;let l=this._def.schema._parseSync({data:a,path:r.path,parent:r});return l.status==="aborted"?Lr:l.status==="dirty"||n.value==="dirty"?T3(l.value):l}}if(i.type==="refinement"){let a=s(l=>{let c=i.refinement(l,o);if(r.common.async)return Promise.resolve(c);if(c instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l},"executeRefinement");if(r.common.async===!1){let l=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return l.status==="aborted"?Lr:(l.status==="dirty"&&n.dirty(),a(l.value),{status:n.value,value:l.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(l=>l.status==="aborted"?Lr:(l.status==="dirty"&&n.dirty(),a(l.value).then(()=>({status:n.value,value:l.value}))))}if(i.type==="transform")if(r.common.async===!1){let a=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!GT(a))return a;let l=i.transform(a.value,o);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:l}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(a=>GT(a)?Promise.resolve(i.transform(a.value,o)).then(l=>({status:n.value,value:l})):a);ro.assertNever(i)}};X0.create=(t,e,n)=>new X0({schema:t,typeName:Rr.ZodEffects,effect:e,...ei(n)});X0.createWithPreprocess=(t,e,n)=>new X0({schema:e,effect:{type:"preprocess",transform:t},typeName:Rr.ZodEffects,...ei(n)});var Pp=class extends ti{static{s(this,"ZodOptional")}_parse(e){return this._getType(e)===pn.undefined?zu(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Pp.create=(t,e)=>new Pp({innerType:t,typeName:Rr.ZodOptional,...ei(e)});var FA=class extends ti{static{s(this,"ZodNullable")}_parse(e){return this._getType(e)===pn.null?zu(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};FA.create=(t,e)=>new FA({innerType:t,typeName:Rr.ZodNullable,...ei(e)});var rw=class extends ti{static{s(this,"ZodDefault")}_parse(e){let{ctx:n}=this._processInputParams(e),r=n.data;return n.parsedType===pn.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}};rw.create=(t,e)=>new rw({innerType:t,typeName:Rr.ZodDefault,defaultValue:typeof e.default=="function"?e.default:()=>e.default,...ei(e)});var iw=class extends ti{static{s(this,"ZodCatch")}_parse(e){let{ctx:n}=this._processInputParams(e),r={...n,common:{...n.common,issues:[]}},i=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return O6(i)?i.then(o=>({status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new J0(r.common.issues)},input:r.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new J0(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}};iw.create=(t,e)=>new iw({innerType:t,typeName:Rr.ZodCatch,catchValue:typeof e.catch=="function"?e.catch:()=>e.catch,...ei(e)});var B3=class extends ti{static{s(this,"ZodNaN")}_parse(e){if(this._getType(e)!==pn.nan){let r=this._getOrReturnCtx(e);return tn(r,{code:St.invalid_type,expected:pn.nan,received:r.parsedType}),Lr}return{status:"valid",value:e.data}}};B3.create=t=>new B3({typeName:Rr.ZodNaN,...ei(t)});var JHt=Symbol("zod_brand"),U6=class extends ti{static{s(this,"ZodBranded")}_parse(e){let{ctx:n}=this._processInputParams(e),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}},q6=class t extends ti{static{s(this,"ZodPipeline")}_parse(e){let{status:n,ctx:r}=this._processInputParams(e);if(r.common.async)return s(async()=>{let o=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return o.status==="aborted"?Lr:o.status==="dirty"?(n.dirty(),T3(o.value)):this._def.out._parseAsync({data:o.value,path:r.path,parent:r})},"handleAsync")();{let i=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?Lr:i.status==="dirty"?(n.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:r.path,parent:r})}}static create(e,n){return new t({in:e,out:n,typeName:Rr.ZodPipeline})}},ow=class extends ti{static{s(this,"ZodReadonly")}_parse(e){let n=this._def.innerType._parse(e),r=s(i=>(GT(i)&&(i.value=Object.freeze(i.value)),i),"freeze");return O6(n)?n.then(i=>r(i)):r(n)}unwrap(){return this._def.innerType}};ow.create=(t,e)=>new ow({innerType:t,typeName:Rr.ZodReadonly,...ei(e)});function vze(t,e){let n=typeof t=="function"?t(e):typeof t=="string"?{message:t}:t;return typeof n=="string"?{message:n}:n}s(vze,"cleanParams");function Rze(t,e={},n){return t?Vb.create().superRefine((r,i)=>{var o,a;let l=t(r);if(l instanceof Promise)return l.then(c=>{var u,d;if(!c){let p=vze(e,r),m=(d=(u=p.fatal)!==null&&u!==void 0?u:n)!==null&&d!==void 0?d:!0;i.addIssue({code:"custom",...p,fatal:m})}});if(!l){let c=vze(e,r),u=(a=(o=c.fatal)!==null&&o!==void 0?o:n)!==null&&a!==void 0?a:!0;i.addIssue({code:"custom",...c,fatal:u})}}):Vb.create()}s(Rze,"custom");var XHt={object:jd.lazycreate},Rr;(function(t){t.ZodString="ZodString",t.ZodNumber="ZodNumber",t.ZodNaN="ZodNaN",t.ZodBigInt="ZodBigInt",t.ZodBoolean="ZodBoolean",t.ZodDate="ZodDate",t.ZodSymbol="ZodSymbol",t.ZodUndefined="ZodUndefined",t.ZodNull="ZodNull",t.ZodAny="ZodAny",t.ZodUnknown="ZodUnknown",t.ZodNever="ZodNever",t.ZodVoid="ZodVoid",t.ZodArray="ZodArray",t.ZodObject="ZodObject",t.ZodUnion="ZodUnion",t.ZodDiscriminatedUnion="ZodDiscriminatedUnion",t.ZodIntersection="ZodIntersection",t.ZodTuple="ZodTuple",t.ZodRecord="ZodRecord",t.ZodMap="ZodMap",t.ZodSet="ZodSet",t.ZodFunction="ZodFunction",t.ZodLazy="ZodLazy",t.ZodLiteral="ZodLiteral",t.ZodEnum="ZodEnum",t.ZodEffects="ZodEffects",t.ZodNativeEnum="ZodNativeEnum",t.ZodOptional="ZodOptional",t.ZodNullable="ZodNullable",t.ZodDefault="ZodDefault",t.ZodCatch="ZodCatch",t.ZodPromise="ZodPromise",t.ZodBranded="ZodBranded",t.ZodPipeline="ZodPipeline",t.ZodReadonly="ZodReadonly"})(Rr||(Rr={}));var ZHt=s((t,e={message:`Input not instance of ${t.name}`})=>Rze(n=>n instanceof t,e),"instanceOfType"),kze=jb.create,Bze=jT.create,eGt=B3.create,tGt=VT.create,Pze=$T.create,nGt=zT.create,rGt=_3.create,iGt=YT.create,oGt=KT.create,sGt=Vb.create,aGt=Ky.create,lGt=xh.create,cGt=S3.create,uGt=Jy.create,dGt=jd.create,fGt=jd.strictCreate,pGt=JT.create,mGt=pY.create,hGt=XT.create,gGt=LA.create,AGt=mY.create,yGt=R3.create,CGt=k3.create,xGt=hY.create,vGt=ZT.create,bGt=ew.create,EGt=tw.create,IGt=nw.create,TGt=$b.create,bze=X0.create,wGt=Pp.create,_Gt=FA.create,SGt=X0.createWithPreprocess,RGt=q6.create,kGt=s(()=>kze().optional(),"ostring"),BGt=s(()=>Bze().optional(),"onumber"),PGt=s(()=>Pze().optional(),"oboolean"),DGt={string:s(t=>jb.create({...t,coerce:!0}),"string"),number:s(t=>jT.create({...t,coerce:!0}),"number"),boolean:s(t=>$T.create({...t,coerce:!0}),"boolean"),bigint:s(t=>VT.create({...t,coerce:!0}),"bigint"),date:s(t=>zT.create({...t,coerce:!0}),"date")},NGt=Lr,K=Object.freeze({__proto__:null,defaultErrorMap:w3,setErrorMap:SHt,getErrorMap:uY,makeIssue:dY,EMPTY_PATH:RHt,addIssueToContext:tn,ParseStatus:fu,INVALID:Lr,DIRTY:T3,OK:zu,isAborted:zme,isDirty:Yme,isValid:GT,isAsync:O6,get util(){return ro},get objectUtil(){return $me},ZodParsedType:pn,getParsedType:Yy,ZodType:ti,datetimeRegex:_ze,ZodString:jb,ZodNumber:jT,ZodBigInt:VT,ZodBoolean:$T,ZodDate:zT,ZodSymbol:_3,ZodUndefined:YT,ZodNull:KT,ZodAny:Vb,ZodUnknown:Ky,ZodNever:xh,ZodVoid:S3,ZodArray:Jy,ZodObject:jd,ZodUnion:JT,ZodDiscriminatedUnion:pY,ZodIntersection:XT,ZodTuple:LA,ZodRecord:mY,ZodMap:R3,ZodSet:k3,ZodFunction:hY,ZodLazy:ZT,ZodLiteral:ew,ZodEnum:tw,ZodNativeEnum:nw,ZodPromise:$b,ZodEffects:X0,ZodTransformer:X0,ZodOptional:Pp,ZodNullable:FA,ZodDefault:rw,ZodCatch:iw,ZodNaN:B3,BRAND:JHt,ZodBranded:U6,ZodPipeline:q6,ZodReadonly:ow,custom:Rze,Schema:ti,ZodSchema:ti,late:XHt,get ZodFirstPartyTypeKind(){return Rr},coerce:DGt,any:sGt,array:uGt,bigint:tGt,boolean:Pze,date:nGt,discriminatedUnion:mGt,effect:bze,enum:EGt,function:xGt,instanceof:ZHt,intersection:hGt,lazy:vGt,literal:bGt,map:yGt,nan:eGt,nativeEnum:IGt,never:lGt,null:oGt,nullable:_Gt,number:Bze,object:dGt,oboolean:PGt,onumber:BGt,optional:wGt,ostring:kGt,pipeline:RGt,preprocess:SGt,promise:TGt,record:AGt,set:CGt,strictObject:fGt,string:kze,symbol:rGt,transformer:bze,tuple:gGt,undefined:iGt,union:pGt,unknown:aGt,void:cGt,NEVER:NGt,ZodIssueCode:St,quotelessJson:_Ht,ZodError:J0});var W6="2025-03-26",Dze=[W6,"2024-11-05","2024-10-07"],gY="2.0",Nze=K.union([K.string(),K.number().int()]),Lze=K.string(),LGt=K.object({progressToken:K.optional(Nze)}).passthrough(),vh=K.object({_meta:K.optional(LGt)}).passthrough(),Z0=K.object({method:K.string(),params:K.optional(vh)}),H6=K.object({_meta:K.optional(K.object({}).passthrough())}).passthrough(),MA=K.object({method:K.string(),params:K.optional(H6)}),bh=K.object({_meta:K.optional(K.object({}).passthrough())}).passthrough(),AY=K.union([K.string(),K.number().int()]),Fze=K.object({jsonrpc:K.literal(gY),id:AY}).merge(Z0).strict(),yY=s(t=>Fze.safeParse(t).success,"isJSONRPCRequest"),Mze=K.object({jsonrpc:K.literal(gY)}).merge(MA).strict(),Qze=s(t=>Mze.safeParse(t).success,"isJSONRPCNotification"),Oze=K.object({jsonrpc:K.literal(gY),id:AY,result:bh}).strict(),G6=s(t=>Oze.safeParse(t).success,"isJSONRPCResponse"),zb;(function(t){t[t.ConnectionClosed=-32e3]="ConnectionClosed",t[t.RequestTimeout=-32001]="RequestTimeout",t[t.ParseError=-32700]="ParseError",t[t.InvalidRequest=-32600]="InvalidRequest",t[t.MethodNotFound=-32601]="MethodNotFound",t[t.InvalidParams=-32602]="InvalidParams",t[t.InternalError=-32603]="InternalError"})(zb||(zb={}));var Uze=K.object({jsonrpc:K.literal(gY),id:AY,error:K.object({code:K.number().int(),message:K.string(),data:K.optional(K.unknown())})}).strict(),qze=s(t=>Uze.safeParse(t).success,"isJSONRPCError"),Yb=K.union([Fze,Mze,Oze,Uze]),aw=bh.strict(),CY=MA.extend({method:K.literal("notifications/cancelled"),params:H6.extend({requestId:AY,reason:K.string().optional()})}),Wze=K.object({name:K.string(),version:K.string()}).passthrough(),FGt=K.object({experimental:K.optional(K.object({}).passthrough()),sampling:K.optional(K.object({}).passthrough()),roots:K.optional(K.object({listChanged:K.optional(K.boolean())}).passthrough())}).passthrough(),MGt=Z0.extend({method:K.literal("initialize"),params:vh.extend({protocolVersion:K.string(),capabilities:FGt,clientInfo:Wze})});var QGt=K.object({experimental:K.optional(K.object({}).passthrough()),logging:K.optional(K.object({}).passthrough()),completions:K.optional(K.object({}).passthrough()),prompts:K.optional(K.object({listChanged:K.optional(K.boolean())}).passthrough()),resources:K.optional(K.object({subscribe:K.optional(K.boolean()),listChanged:K.optional(K.boolean())}).passthrough()),tools:K.optional(K.object({listChanged:K.optional(K.boolean())}).passthrough())}).passthrough(),Jme=bh.extend({protocolVersion:K.string(),capabilities:QGt,serverInfo:Wze,instructions:K.optional(K.string())}),Hze=MA.extend({method:K.literal("notifications/initialized")}),Gze=s(t=>Hze.safeParse(t).success,"isInitializedNotification"),xY=Z0.extend({method:K.literal("ping")}),OGt=K.object({progress:K.number(),total:K.optional(K.number())}).passthrough(),vY=MA.extend({method:K.literal("notifications/progress"),params:H6.merge(OGt).extend({progressToken:Nze})}),bY=Z0.extend({params:vh.extend({cursor:K.optional(Lze)}).optional()}),EY=bh.extend({nextCursor:K.optional(Lze)}),jze=K.object({uri:K.string(),mimeType:K.optional(K.string())}).passthrough(),Vze=jze.extend({text:K.string()}),$ze=jze.extend({blob:K.string().base64()}),UGt=K.object({uri:K.string(),name:K.string(),description:K.optional(K.string()),mimeType:K.optional(K.string())}).passthrough(),qGt=K.object({uriTemplate:K.string(),name:K.string(),description:K.optional(K.string()),mimeType:K.optional(K.string())}).passthrough(),WGt=bY.extend({method:K.literal("resources/list")}),Xme=EY.extend({resources:K.array(UGt)}),HGt=bY.extend({method:K.literal("resources/templates/list")}),Zme=EY.extend({resourceTemplates:K.array(qGt)}),GGt=Z0.extend({method:K.literal("resources/read"),params:vh.extend({uri:K.string()})}),ehe=bh.extend({contents:K.array(K.union([Vze,$ze]))}),jGt=MA.extend({method:K.literal("notifications/resources/list_changed")}),VGt=Z0.extend({method:K.literal("resources/subscribe"),params:vh.extend({uri:K.string()})}),$Gt=Z0.extend({method:K.literal("resources/unsubscribe"),params:vh.extend({uri:K.string()})}),zGt=MA.extend({method:K.literal("notifications/resources/updated"),params:H6.extend({uri:K.string()})}),YGt=K.object({name:K.string(),description:K.optional(K.string()),required:K.optional(K.boolean())}).passthrough(),KGt=K.object({name:K.string(),description:K.optional(K.string()),arguments:K.optional(K.array(YGt))}).passthrough(),JGt=bY.extend({method:K.literal("prompts/list")}),the=EY.extend({prompts:K.array(KGt)}),XGt=Z0.extend({method:K.literal("prompts/get"),params:vh.extend({name:K.string(),arguments:K.optional(K.record(K.string()))})}),IY=K.object({type:K.literal("text"),text:K.string()}).passthrough(),TY=K.object({type:K.literal("image"),data:K.string().base64(),mimeType:K.string()}).passthrough(),wY=K.object({type:K.literal("audio"),data:K.string().base64(),mimeType:K.string()}).passthrough(),zze=K.object({type:K.literal("resource"),resource:K.union([Vze,$ze])}).passthrough(),ZGt=K.object({role:K.enum(["user","assistant"]),content:K.union([IY,TY,wY,zze])}).passthrough(),nhe=bh.extend({description:K.optional(K.string()),messages:K.array(ZGt)}),j6=MA.extend({method:K.literal("notifications/prompts/list_changed")}),ejt=K.object({title:K.optional(K.string()),readOnlyHint:K.optional(K.boolean()),destructiveHint:K.optional(K.boolean()),idempotentHint:K.optional(K.boolean()),openWorldHint:K.optional(K.boolean())}).passthrough(),tjt=K.object({name:K.string(),description:K.optional(K.string()),inputSchema:K.object({type:K.literal("object"),properties:K.optional(K.object({}).passthrough())}).passthrough(),annotations:K.optional(ejt)}).passthrough(),njt=bY.extend({method:K.literal("tools/list")}),rhe=EY.extend({tools:K.array(tjt)}),_Y=bh.extend({content:K.array(K.union([IY,TY,wY,zze])),isError:K.boolean().default(!1).optional()}),Sai=_Y.or(bh.extend({toolResult:K.unknown()})),rjt=Z0.extend({method:K.literal("tools/call"),params:vh.extend({name:K.string(),arguments:K.optional(K.record(K.unknown()))})}),V6=MA.extend({method:K.literal("notifications/tools/list_changed")}),Yze=K.enum(["debug","info","notice","warning","error","critical","alert","emergency"]),ijt=Z0.extend({method:K.literal("logging/setLevel"),params:vh.extend({level:Yze})}),ihe=MA.extend({method:K.literal("notifications/message"),params:H6.extend({level:Yze,logger:K.optional(K.string()),data:K.unknown()})}),ojt=K.object({name:K.string().optional()}).passthrough(),sjt=K.object({hints:K.optional(K.array(ojt)),costPriority:K.optional(K.number().min(0).max(1)),speedPriority:K.optional(K.number().min(0).max(1)),intelligencePriority:K.optional(K.number().min(0).max(1))}).passthrough(),ajt=K.object({role:K.enum(["user","assistant"]),content:K.union([IY,TY,wY])}).passthrough(),ljt=Z0.extend({method:K.literal("sampling/createMessage"),params:vh.extend({messages:K.array(ajt),systemPrompt:K.optional(K.string()),includeContext:K.optional(K.enum(["none","thisServer","allServers"])),temperature:K.optional(K.number()),maxTokens:K.number().int(),stopSequences:K.optional(K.array(K.string())),metadata:K.optional(K.object({}).passthrough()),modelPreferences:K.optional(sjt)})}),cjt=bh.extend({model:K.string(),stopReason:K.optional(K.enum(["endTurn","stopSequence","maxTokens"]).or(K.string())),role:K.enum(["user","assistant"]),content:K.discriminatedUnion("type",[IY,TY,wY])}),ujt=K.object({type:K.literal("ref/resource"),uri:K.string()}).passthrough(),djt=K.object({type:K.literal("ref/prompt"),name:K.string()}).passthrough(),fjt=Z0.extend({method:K.literal("completion/complete"),params:vh.extend({ref:K.union([djt,ujt]),argument:K.object({name:K.string(),value:K.string()}).passthrough()})}),ohe=bh.extend({completion:K.object({values:K.array(K.string()).max(100),total:K.optional(K.number().int()),hasMore:K.optional(K.boolean())}).passthrough()}),pjt=K.object({uri:K.string().startsWith("file://"),name:K.optional(K.string())}).passthrough(),mjt=Z0.extend({method:K.literal("roots/list")}),hjt=bh.extend({roots:K.array(pjt)}),gjt=MA.extend({method:K.literal("notifications/roots/list_changed")}),Rai=K.union([xY,MGt,fjt,ijt,XGt,JGt,WGt,HGt,GGt,VGt,$Gt,rjt,njt]),kai=K.union([CY,vY,Hze,gjt]),Bai=K.union([aw,cjt,hjt]),Pai=K.union([xY,ljt,mjt]),Dai=K.union([CY,vY,ihe,zGt,jGt,V6,j6]),Nai=K.union([aw,Jme,ohe,nhe,the,Xme,Zme,ehe,_Y,rhe]),sw=class extends Error{static{s(this,"McpError")}constructor(e,n,r){super(`MCP error ${e}: ${n}`),this.code=e,this.data=r,this.name="McpError"}};var Ajt=6e4,SY=class{static{s(this,"Protocol")}constructor(e){this._options=e,this._requestMessageId=0,this._requestHandlers=new Map,this._requestHandlerAbortControllers=new Map,this._notificationHandlers=new Map,this._responseHandlers=new Map,this._progressHandlers=new Map,this._timeoutInfo=new Map,this.setNotificationHandler(CY,n=>{let r=this._requestHandlerAbortControllers.get(n.params.requestId);r?.abort(n.params.reason)}),this.setNotificationHandler(vY,n=>{this._onprogress(n)}),this.setRequestHandler(xY,n=>({}))}_setupTimeout(e,n,r,i,o=!1){this._timeoutInfo.set(e,{timeoutId:setTimeout(i,n),startTime:Date.now(),timeout:n,maxTotalTimeout:r,resetTimeoutOnProgress:o,onTimeout:i})}_resetTimeout(e){let n=this._timeoutInfo.get(e);if(!n)return!1;let r=Date.now()-n.startTime;if(n.maxTotalTimeout&&r>=n.maxTotalTimeout)throw this._timeoutInfo.delete(e),new sw(zb.RequestTimeout,"Maximum total timeout exceeded",{maxTotalTimeout:n.maxTotalTimeout,totalElapsed:r});return clearTimeout(n.timeoutId),n.timeoutId=setTimeout(n.onTimeout,n.timeout),!0}_cleanupTimeout(e){let n=this._timeoutInfo.get(e);n&&(clearTimeout(n.timeoutId),this._timeoutInfo.delete(e))}async connect(e){this._transport=e,this._transport.onclose=()=>{this._onclose()},this._transport.onerror=n=>{this._onerror(n)},this._transport.onmessage=(n,r)=>{G6(n)||qze(n)?this._onresponse(n):yY(n)?this._onrequest(n,r):Qze(n)?this._onnotification(n):this._onerror(new Error(`Unknown message type: ${JSON.stringify(n)}`))},await this._transport.start()}_onclose(){var e;let n=this._responseHandlers;this._responseHandlers=new Map,this._progressHandlers.clear(),this._transport=void 0,(e=this.onclose)===null||e===void 0||e.call(this);let r=new sw(zb.ConnectionClosed,"Connection closed");for(let i of n.values())i(r)}_onerror(e){var n;(n=this.onerror)===null||n===void 0||n.call(this,e)}_onnotification(e){var n;let r=(n=this._notificationHandlers.get(e.method))!==null&&n!==void 0?n:this.fallbackNotificationHandler;r!==void 0&&Promise.resolve().then(()=>r(e)).catch(i=>this._onerror(new Error(`Uncaught error in notification handler: ${i}`)))}_onrequest(e,n){var r,i,o,a;let l=(r=this._requestHandlers.get(e.method))!==null&&r!==void 0?r:this.fallbackRequestHandler;if(l===void 0){(i=this._transport)===null||i===void 0||i.send({jsonrpc:"2.0",id:e.id,error:{code:zb.MethodNotFound,message:"Method not found"}}).catch(d=>this._onerror(new Error(`Failed to send an error response: ${d}`)));return}let c=new AbortController;this._requestHandlerAbortControllers.set(e.id,c);let u={signal:c.signal,sessionId:(o=this._transport)===null||o===void 0?void 0:o.sessionId,_meta:(a=e.params)===null||a===void 0?void 0:a._meta,sendNotification:s(d=>this.notification(d,{relatedRequestId:e.id}),"sendNotification"),sendRequest:s((d,p,m)=>this.request(d,p,{...m,relatedRequestId:e.id}),"sendRequest"),authInfo:n?.authInfo,requestId:e.id};Promise.resolve().then(()=>l(e,u)).then(d=>{var p;if(!c.signal.aborted)return(p=this._transport)===null||p===void 0?void 0:p.send({result:d,jsonrpc:"2.0",id:e.id})},d=>{var p,m;if(!c.signal.aborted)return(p=this._transport)===null||p===void 0?void 0:p.send({jsonrpc:"2.0",id:e.id,error:{code:Number.isSafeInteger(d.code)?d.code:zb.InternalError,message:(m=d.message)!==null&&m!==void 0?m:"Internal error"}})}).catch(d=>this._onerror(new Error(`Failed to send response: ${d}`))).finally(()=>{this._requestHandlerAbortControllers.delete(e.id)})}_onprogress(e){let{progressToken:n,...r}=e.params,i=Number(n),o=this._progressHandlers.get(i);if(!o){this._onerror(new Error(`Received a progress notification for an unknown token: ${JSON.stringify(e)}`));return}let a=this._responseHandlers.get(i),l=this._timeoutInfo.get(i);if(l&&a&&l.resetTimeoutOnProgress)try{this._resetTimeout(i)}catch(c){a(c);return}o(r)}_onresponse(e){let n=Number(e.id),r=this._responseHandlers.get(n);if(r===void 0){this._onerror(new Error(`Received a response for an unknown message ID: ${JSON.stringify(e)}`));return}if(this._responseHandlers.delete(n),this._progressHandlers.delete(n),this._cleanupTimeout(n),G6(e))r(e);else{let i=new sw(e.error.code,e.error.message,e.error.data);r(i)}}get transport(){return this._transport}async close(){var e;await((e=this._transport)===null||e===void 0?void 0:e.close())}request(e,n,r){let{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}=r??{};return new Promise((l,c)=>{var u,d,p,m,h;if(!this._transport){c(new Error("Not connected"));return}((u=this._options)===null||u===void 0?void 0:u.enforceStrictCapabilities)===!0&&this.assertCapabilityForMethod(e.method),(d=r?.signal)===null||d===void 0||d.throwIfAborted();let g=this._requestMessageId++,y={...e,jsonrpc:"2.0",id:g};r?.onprogress&&(this._progressHandlers.set(g,r.onprogress),y.params={...e.params,_meta:{progressToken:g}});let v=s(_=>{var k;this._responseHandlers.delete(g),this._progressHandlers.delete(g),this._cleanupTimeout(g),(k=this._transport)===null||k===void 0||k.send({jsonrpc:"2.0",method:"notifications/cancelled",params:{requestId:g,reason:String(_)}},{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}).catch(P=>this._onerror(new Error(`Failed to send cancellation: ${P}`))),c(_)},"cancel");this._responseHandlers.set(g,_=>{var k;if(!(!((k=r?.signal)===null||k===void 0)&&k.aborted)){if(_ instanceof Error)return c(_);try{let P=n.parse(_.result);l(P)}catch(P){c(P)}}}),(p=r?.signal)===null||p===void 0||p.addEventListener("abort",()=>{var _;v((_=r?.signal)===null||_===void 0?void 0:_.reason)});let b=(m=r?.timeout)!==null&&m!==void 0?m:Ajt,E=s(()=>v(new sw(zb.RequestTimeout,"Request timed out",{timeout:b})),"timeoutHandler");this._setupTimeout(g,b,r?.maxTotalTimeout,E,(h=r?.resetTimeoutOnProgress)!==null&&h!==void 0?h:!1),this._transport.send(y,{relatedRequestId:i,resumptionToken:o,onresumptiontoken:a}).catch(_=>{this._cleanupTimeout(g),c(_)})})}async notification(e,n){if(!this._transport)throw new Error("Not connected");this.assertNotificationCapability(e.method);let r={...e,jsonrpc:"2.0"};await this._transport.send(r,n)}setRequestHandler(e,n){let r=e.shape.method.value;this.assertRequestHandlerCapability(r),this._requestHandlers.set(r,(i,o)=>Promise.resolve(n(e.parse(i),o)))}removeRequestHandler(e){this._requestHandlers.delete(e)}assertCanSetRequestHandler(e){if(this._requestHandlers.has(e))throw new Error(`A request handler for ${e} already exists, which would be overridden`)}setNotificationHandler(e,n){this._notificationHandlers.set(e.shape.method.value,r=>Promise.resolve(n(e.parse(r))))}removeNotificationHandler(e){this._notificationHandlers.delete(e)}};function Kze(t,e){return Object.entries(e).reduce((n,[r,i])=>(i&&typeof i=="object"?n[r]=n[r]?{...n[r],...i}:i:n[r]=i,n),{...t})}s(Kze,"mergeCapabilities");var RY=class extends SY{static{s(this,"Client")}constructor(e,n){var r;super(n),this._clientInfo=e,this._capabilities=(r=n?.capabilities)!==null&&r!==void 0?r:{}}registerCapabilities(e){if(this.transport)throw new Error("Cannot register capabilities after connecting to transport");this._capabilities=Kze(this._capabilities,e)}assertCapability(e,n){var r;if(!(!((r=this._serverCapabilities)===null||r===void 0)&&r[e]))throw new Error(`Server does not support ${e} (required for ${n})`)}async connect(e,n){if(await super.connect(e),e.sessionId===void 0)try{let r=await this.request({method:"initialize",params:{protocolVersion:W6,capabilities:this._capabilities,clientInfo:this._clientInfo}},Jme,n);if(r===void 0)throw new Error(`Server sent invalid initialize result: ${r}`);if(!Dze.includes(r.protocolVersion))throw new Error(`Server's protocol version is not supported: ${r.protocolVersion}`);this._serverCapabilities=r.capabilities,this._serverVersion=r.serverInfo,this._instructions=r.instructions,await this.notification({method:"notifications/initialized"})}catch(r){throw this.close(),r}}getServerCapabilities(){return this._serverCapabilities}getServerVersion(){return this._serverVersion}getInstructions(){return this._instructions}assertCapabilityForMethod(e){var n,r,i,o,a;switch(e){case"logging/setLevel":if(!(!((n=this._serverCapabilities)===null||n===void 0)&&n.logging))throw new Error(`Server does not support logging (required for ${e})`);break;case"prompts/get":case"prompts/list":if(!(!((r=this._serverCapabilities)===null||r===void 0)&&r.prompts))throw new Error(`Server does not support prompts (required for ${e})`);break;case"resources/list":case"resources/templates/list":case"resources/read":case"resources/subscribe":case"resources/unsubscribe":if(!(!((i=this._serverCapabilities)===null||i===void 0)&&i.resources))throw new Error(`Server does not support resources (required for ${e})`);if(e==="resources/subscribe"&&!this._serverCapabilities.resources.subscribe)throw new Error(`Server does not support resource subscriptions (required for ${e})`);break;case"tools/call":case"tools/list":if(!(!((o=this._serverCapabilities)===null||o===void 0)&&o.tools))throw new Error(`Server does not support tools (required for ${e})`);break;case"completion/complete":if(!(!((a=this._serverCapabilities)===null||a===void 0)&&a.completions))throw new Error(`Server does not support completions (required for ${e})`);break;case"initialize":break;case"ping":break}}assertNotificationCapability(e){var n;switch(e){case"notifications/roots/list_changed":if(!(!((n=this._capabilities.roots)===null||n===void 0)&&n.listChanged))throw new Error(`Client does not support roots list changed notifications (required for ${e})`);break;case"notifications/initialized":break;case"notifications/cancelled":break;case"notifications/progress":break}}assertRequestHandlerCapability(e){switch(e){case"sampling/createMessage":if(!this._capabilities.sampling)throw new Error(`Client does not support sampling capability (required for ${e})`);break;case"roots/list":if(!this._capabilities.roots)throw new Error(`Client does not support roots capability (required for ${e})`);break;case"ping":break}}async ping(e){return this.request({method:"ping"},aw,e)}async complete(e,n){return this.request({method:"completion/complete",params:e},ohe,n)}async setLoggingLevel(e,n){return this.request({method:"logging/setLevel",params:{level:e}},aw,n)}async getPrompt(e,n){return this.request({method:"prompts/get",params:e},nhe,n)}async listPrompts(e,n){return this.request({method:"prompts/list",params:e},the,n)}async listResources(e,n){return this.request({method:"resources/list",params:e},Xme,n)}async listResourceTemplates(e,n){return this.request({method:"resources/templates/list",params:e},Zme,n)}async readResource(e,n){return this.request({method:"resources/read",params:e},ehe,n)}async subscribeResource(e,n){return this.request({method:"resources/subscribe",params:e},aw,n)}async unsubscribeResource(e,n){return this.request({method:"resources/unsubscribe",params:e},aw,n)}async callTool(e,n=_Y,r){return this.request({method:"tools/call",params:e},n,r)}async listTools(e,n){return this.request({method:"tools/list",params:e},rhe,n)}async sendRootsListChanged(){return this.notification({method:"notifications/roots/list_changed"})}};var Jze=je(require("events"));var Kb=class{constructor(e,n,r){this.transport=null;this.emitter=new Jze.default;this.ctx=e,this.mcp=new RY({name:n,version:r},{capabilities:{roots:{listChanged:!0}}}),this.name=n}static{s(this,"MCPBaseServer")}async connect(e){if(this.transport=this.initTransport(e),!this.transport){let n=new Error("Failed to initialize transport");throw Oo.error(this.ctx,"Transport initialization failed:",n),n}this.addListeners();try{await this.mcp.connect(this.transport)}catch(n){throw Oo.error(this.ctx,"Connection failed:",n),await NA(this.ctx,{message:`Failed to connect to MCP server: ${n instanceof Error?n.message:String(n)}`,server:this.name}),n}}async getToolsList(){let e=Promise.resolve([]);if(this.transport){let n=await this.mcp.listTools();e=Promise.all(n.tools.map(async i=>{let o={name:i.name,description:i.description,inputSchema:{...i.inputSchema||{},properties:i.inputSchema?.properties||{},type:i.inputSchema?.type||"object"},_status:"enabled",_nameForModel:i.name,annotations:i.annotations};return await Cze(this.ctx,o,this.name),o}));let r=`Discovered ${n.tools.length} tools`;du(this.ctx,{message:r,server:this.name})}return e}async callTool(e,n){let r=new Gi([],"error");try{let i=await this.mcp.callTool({name:e,arguments:n});if(i&&typeof i=="object"){if(i.content)return this.formatToolResult(i);{let o=`Error calling tool ${e}: `+JSON.stringify(i);Oo.error(this.ctx,o),await NA(this.ctx,{message:o,server:this.name,tool:e}),r.content.push(new Ci(o))}}else{let o=`Error calling tool ${e}: `+JSON.stringify(i);Oo.error(this.ctx,o),await NA(this.ctx,{message:o,server:this.name,tool:e}),r.content.push(new Ci(o))}}catch(i){let o=`Error calling tool ${e}: `+(i instanceof Error?i.message:String(i));Oo.error(this.ctx,o),await NA(this.ctx,{message:o,server:this.name,tool:e}),r.content.push(new Ci(o))}return r}addListeners(){this.mcp.onclose=()=>{Oo.info(this.ctx,`MCP server ${this.name} connection closed.`),du(this.ctx,{message:"Connection state: Stopped",server:this.name})},this.mcp.onerror=e=>{Oo.error(this.ctx,`MCP server ${this.name} error:`,e),NA(this.ctx,{message:`Connection state: Error: ${e.message}`,server:this.name})},this.mcp.setNotificationHandler(ihe,e=>{let n=typeof e.params.data=="string"?e.params.data:JSON.stringify(e.params.data);switch(e.params.logger&&(n=`${e.params.logger}: ${n}`),e.params?.level){case"debug":case"info":case"notice":Oo.info(this.ctx,`MCP server ${this.name} log:`,n),du(this.ctx,{message:`Notification message: ${n}`,server:this.name});break;case"warning":Oo.warn(this.ctx,`MCP server ${this.name} log:`,n),HT(this.ctx,{message:`Notification message: ${n}`,server:this.name});break;case"error":case"critical":case"alert":case"emergency":Oo.error(this.ctx,`MCP server ${this.name} log:`,n),NA(this.ctx,{message:`Notification message: ${n}`,server:this.name});break;default:Oo.info(this.ctx,`MCP server ${this.name} log:`,n),du(this.ctx,{message:`Notification message: ${n}`,server:this.name});break}})}formatToolResult(e){let n=new Gi([],e.isError===!0?"error":"success");for(let r of e.content)r.type==="text"?n.content.push(new Ci(r.text)):(r.type==="image"||r.type==="audio")&&n.content.push(new CT({mimeType:r.mimeType,data:r.data}));return n}getEmitter(){return this.emitter}async cleanup(){this.transport&&await this.mcp.close()}};f();f();f();var kY=class extends Error{static{s(this,"ParseError")}constructor(e,n){super(e),this.name="ParseError",this.type=n.type,this.field=n.field,this.value=n.value,this.line=n.line}};function she(t){}s(she,"noop");function BY(t){if(typeof t=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");let{onEvent:e=she,onError:n=she,onRetry:r=she,onComment:i}=t,o="",a=!0,l,c="",u="";function d(y){let v=a?y.replace(/^\xEF\xBB\xBF/,""):y,[b,E]=yjt(`${o}${v}`);for(let _ of b)p(_);o=E,a=!1}s(d,"feed");function p(y){if(y===""){h();return}if(y.startsWith(":")){i&&i(y.slice(y.startsWith(": ")?2:1));return}let v=y.indexOf(":");if(v!==-1){let b=y.slice(0,v),E=y[v+1]===" "?2:1,_=y.slice(v+E);m(b,_,y);return}m(y,"",y)}s(p,"parseLine");function m(y,v,b){switch(y){case"event":u=v;break;case"data":c=`${c}${v}
`;break;case"id":l=v.includes("\0")?void 0:v;break;case"retry":/^\d+$/.test(v)?r(parseInt(v,10)):n(new kY(`Invalid \`retry\` value: "${v}"`,{type:"invalid-retry",value:v,line:b}));break;default:n(new kY(`Unknown field "${y.length>20?`${y.slice(0,20)}\u2026`:y}"`,{type:"unknown-field",field:y,value:v,line:b}));break}}s(m,"processField");function h(){c.length>0&&e({id:l,event:u||void 0,data:c.endsWith(`
`)?c.slice(0,-1):c}),l=void 0,c="",u=""}s(h,"dispatchEvent");function g(y={}){o&&y.consume&&p(o),a=!0,l=void 0,c="",u="",o=""}return s(g,"reset"),{feed:d,reset:g}}s(BY,"createParser");function yjt(t){let e=[],n="",r=0;for(;r<t.length;){let i=t.indexOf("\r",r),o=t.indexOf(`
`,r),a=-1;if(i!==-1&&o!==-1?a=Math.min(i,o):i!==-1?a=i:o!==-1&&(a=o),a===-1){n=t.slice(r);break}else{let l=t.slice(r,a);e.push(l),r=a+1,t[r-1]==="\r"&&t[r]===`
`&&r++}}return[e,n]}s(yjt,"splitLines");var DY=class extends Event{static{s(this,"ErrorEvent")}constructor(e,n){var r,i;super(e),this.code=(r=n?.code)!=null?r:void 0,this.message=(i=n?.message)!=null?i:void 0}[Symbol.for("nodejs.util.inspect.custom")](e,n,r){return r(Xze(this),n)}[Symbol.for("Deno.customInspect")](e,n){return e(Xze(this),n)}};function Cjt(t){let e=globalThis.DOMException;return typeof e=="function"?new e(t,"SyntaxError"):new SyntaxError(t)}s(Cjt,"syntaxError");function ahe(t){return t instanceof Error?"errors"in t&&Array.isArray(t.errors)?t.errors.map(ahe).join(", "):"cause"in t&&t.cause instanceof Error?`${t}: ${ahe(t.cause)}`:t.message:`${t}`}s(ahe,"flattenError");function Xze(t){return{type:t.type,message:t.message,code:t.code,defaultPrevented:t.defaultPrevented,cancelable:t.cancelable,timeStamp:t.timeStamp}}s(Xze,"inspectableError");var eYe=s(t=>{throw TypeError(t)},"__typeError"),hhe=s((t,e,n)=>e.has(t)||eYe("Cannot "+n),"__accessCheck"),Bi=s((t,e,n)=>(hhe(t,e,"read from private field"),n?n.call(t):e.get(t)),"__privateGet"),bl=s((t,e,n)=>e.has(t)?eYe("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),"__privateAdd"),qs=s((t,e,n,r)=>(hhe(t,e,"write to private field"),e.set(t,n),n),"__privateSet"),Xy=s((t,e,n)=>(hhe(t,e,"access private method"),n),"__privateMethod"),Vd,lw,P3,PY,NY,Y6,L3,K6,Jb,D3,F3,N3,$6,Eh,lhe,che,uhe,Zze,dhe,fhe,z6,phe,mhe,cw=class extends EventTarget{static{s(this,"EventSource")}constructor(e,n){var r,i;super(),bl(this,Eh),this.CONNECTING=0,this.OPEN=1,this.CLOSED=2,bl(this,Vd),bl(this,lw),bl(this,P3),bl(this,PY),bl(this,NY),bl(this,Y6),bl(this,L3),bl(this,K6,null),bl(this,Jb),bl(this,D3),bl(this,F3,null),bl(this,N3,null),bl(this,$6,null),bl(this,che,async o=>{var a;Bi(this,D3).reset();let{body:l,redirected:c,status:u,headers:d}=o;if(u===204){Xy(this,Eh,z6).call(this,"Server sent HTTP 204, not reconnecting",204),this.close();return}if(c?qs(this,P3,new URL(o.url)):qs(this,P3,void 0),u!==200){Xy(this,Eh,z6).call(this,`Non-200 status code (${u})`,u);return}if(!(d.get("content-type")||"").startsWith("text/event-stream")){Xy(this,Eh,z6).call(this,'Invalid content type, expected "text/event-stream"',u);return}if(Bi(this,Vd)===this.CLOSED)return;qs(this,Vd,this.OPEN);let p=new Event("open");if((a=Bi(this,$6))==null||a.call(this,p),this.dispatchEvent(p),typeof l!="object"||!l||!("getReader"in l)){Xy(this,Eh,z6).call(this,"Invalid response body, expected a web ReadableStream",u),this.close();return}let m=new TextDecoder,h=l.getReader(),g=!0;do{let{done:y,value:v}=await h.read();v&&Bi(this,D3).feed(m.decode(v,{stream:!y})),y&&(g=!1,Bi(this,D3).reset(),Xy(this,Eh,phe).call(this))}while(g)}),bl(this,uhe,o=>{qs(this,Jb,void 0),!(o.name==="AbortError"||o.type==="aborted")&&Xy(this,Eh,phe).call(this,ahe(o))}),bl(this,dhe,o=>{typeof o.id=="string"&&qs(this,K6,o.id);let a=new MessageEvent(o.event||"message",{data:o.data,origin:Bi(this,P3)?Bi(this,P3).origin:Bi(this,lw).origin,lastEventId:o.id||""});Bi(this,N3)&&(!o.event||o.event==="message")&&Bi(this,N3).call(this,a),this.dispatchEvent(a)}),bl(this,fhe,o=>{qs(this,Y6,o)}),bl(this,mhe,()=>{qs(this,L3,void 0),Bi(this,Vd)===this.CONNECTING&&Xy(this,Eh,lhe).call(this)});try{if(e instanceof URL)qs(this,lw,e);else if(typeof e=="string")qs(this,lw,new URL(e,xjt()));else throw new Error("Invalid URL")}catch{throw Cjt("An invalid or illegal string was specified")}qs(this,D3,BY({onEvent:Bi(this,dhe),onRetry:Bi(this,fhe)})),qs(this,Vd,this.CONNECTING),qs(this,Y6,3e3),qs(this,NY,(r=n?.fetch)!=null?r:globalThis.fetch),qs(this,PY,(i=n?.withCredentials)!=null?i:!1),Xy(this,Eh,lhe).call(this)}get readyState(){return Bi(this,Vd)}get url(){return Bi(this,lw).href}get withCredentials(){return Bi(this,PY)}get onerror(){return Bi(this,F3)}set onerror(e){qs(this,F3,e)}get onmessage(){return Bi(this,N3)}set onmessage(e){qs(this,N3,e)}get onopen(){return Bi(this,$6)}set onopen(e){qs(this,$6,e)}addEventListener(e,n,r){let i=n;super.addEventListener(e,i,r)}removeEventListener(e,n,r){let i=n;super.removeEventListener(e,i,r)}close(){Bi(this,L3)&&clearTimeout(Bi(this,L3)),Bi(this,Vd)!==this.CLOSED&&(Bi(this,Jb)&&Bi(this,Jb).abort(),qs(this,Vd,this.CLOSED),qs(this,Jb,void 0))}};Vd=new WeakMap,lw=new WeakMap,P3=new WeakMap,PY=new WeakMap,NY=new WeakMap,Y6=new WeakMap,L3=new WeakMap,K6=new WeakMap,Jb=new WeakMap,D3=new WeakMap,F3=new WeakMap,N3=new WeakMap,$6=new WeakMap,Eh=new WeakSet,lhe=s(function(){qs(this,Vd,this.CONNECTING),qs(this,Jb,new AbortController),Bi(this,NY)(Bi(this,lw),Xy(this,Eh,Zze).call(this)).then(Bi(this,che)).catch(Bi(this,uhe))},"connect_fn"),che=new WeakMap,uhe=new WeakMap,Zze=s(function(){var t;let e={mode:"cors",redirect:"follow",headers:{Accept:"text/event-stream",...Bi(this,K6)?{"Last-Event-ID":Bi(this,K6)}:void 0},cache:"no-store",signal:(t=Bi(this,Jb))==null?void 0:t.signal};return"window"in globalThis&&(e.credentials=this.withCredentials?"include":"same-origin"),e},"getRequestOptions_fn"),dhe=new WeakMap,fhe=new WeakMap,z6=s(function(t,e){var n;Bi(this,Vd)!==this.CLOSED&&qs(this,Vd,this.CLOSED);let r=new DY("error",{code:e,message:t});(n=Bi(this,F3))==null||n.call(this,r),this.dispatchEvent(r)},"failConnection_fn"),phe=s(function(t,e){var n;if(Bi(this,Vd)===this.CLOSED)return;qs(this,Vd,this.CONNECTING);let r=new DY("error",{code:e,message:t});(n=Bi(this,F3))==null||n.call(this,r),this.dispatchEvent(r),qs(this,L3,setTimeout(Bi(this,mhe),Bi(this,Y6)))},"scheduleReconnect_fn"),mhe=new WeakMap,cw.CONNECTING=0,cw.OPEN=1,cw.CLOSED=2;function xjt(){let t="document"in globalThis?globalThis.document:void 0;return t&&typeof t=="object"&&"baseURI"in t&&typeof t.baseURI=="string"?t.baseURI:void 0}s(xjt,"getBaseURL");f();f();var ghe;ghe=globalThis.crypto?.webcrypto??globalThis.crypto??import("node:crypto").then(t=>t.webcrypto);async function vjt(t){return(await ghe).getRandomValues(new Uint8Array(t))}s(vjt,"getRandomValues");async function bjt(t){let e="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-._~",n="",r=await vjt(t);for(let i=0;i<t;i++){let o=r[i]%e.length;n+=e[o]}return n}s(bjt,"random");async function Ejt(t){return await bjt(t)}s(Ejt,"generateVerifier");async function Ijt(t){let e=await(await ghe).subtle.digest("SHA-256",new TextEncoder().encode(t));return btoa(String.fromCharCode(...new Uint8Array(e))).replace(/\//g,"_").replace(/\+/g,"-").replace(/=/g,"")}s(Ijt,"generateChallenge");async function Ahe(t){if(t||(t=43),t<43||t>128)throw`Expected a length between 43 and 128. Received ${t}.`;let e=await Ejt(t),n=await Ijt(e);return{code_verifier:e,code_challenge:n}}s(Ahe,"pkceChallenge");f();var tYe=K.object({issuer:K.string(),authorization_endpoint:K.string(),token_endpoint:K.string(),registration_endpoint:K.string().optional(),scopes_supported:K.array(K.string()).optional(),response_types_supported:K.array(K.string()),response_modes_supported:K.array(K.string()).optional(),grant_types_supported:K.array(K.string()).optional(),token_endpoint_auth_methods_supported:K.array(K.string()).optional(),token_endpoint_auth_signing_alg_values_supported:K.array(K.string()).optional(),service_documentation:K.string().optional(),revocation_endpoint:K.string().optional(),revocation_endpoint_auth_methods_supported:K.array(K.string()).optional(),revocation_endpoint_auth_signing_alg_values_supported:K.array(K.string()).optional(),introspection_endpoint:K.string().optional(),introspection_endpoint_auth_methods_supported:K.array(K.string()).optional(),introspection_endpoint_auth_signing_alg_values_supported:K.array(K.string()).optional(),code_challenge_methods_supported:K.array(K.string()).optional()}).passthrough(),yhe=K.object({access_token:K.string(),token_type:K.string(),expires_in:K.number().optional(),scope:K.string().optional(),refresh_token:K.string().optional()}).strip(),gli=K.object({error:K.string(),error_description:K.string().optional(),error_uri:K.string().optional()}),Tjt=K.object({redirect_uris:K.array(K.string()).refine(t=>t.every(e=>URL.canParse(e)),{message:"redirect_uris must contain valid URLs"}),token_endpoint_auth_method:K.string().optional(),grant_types:K.array(K.string()).optional(),response_types:K.array(K.string()).optional(),client_name:K.string().optional(),client_uri:K.string().optional(),logo_uri:K.string().optional(),scope:K.string().optional(),contacts:K.array(K.string()).optional(),tos_uri:K.string().optional(),policy_uri:K.string().optional(),jwks_uri:K.string().optional(),jwks:K.any().optional(),software_id:K.string().optional(),software_version:K.string().optional()}).strip(),wjt=K.object({client_id:K.string(),client_secret:K.string().optional(),client_id_issued_at:K.number().optional(),client_secret_expires_at:K.number().optional()}).strip(),nYe=Tjt.merge(wjt),Ali=K.object({error:K.string(),error_description:K.string().optional()}).strip(),yli=K.object({token:K.string(),token_type_hint:K.string().optional()}).strip();var $d=class extends Error{static{s(this,"UnauthorizedError")}constructor(e){super(e??"Unauthorized")}};async function Xb(t,{serverUrl:e,authorizationCode:n}){let r=await _jt(e),i=await Promise.resolve(t.clientInformation());if(!i){if(n!==void 0)throw new Error("Existing OAuth client information is required when exchanging an authorization code");if(!t.saveClientInformation)throw new Error("OAuth client information must be saveable for dynamic registration");let c=await Bjt(e,{metadata:r,clientMetadata:t.clientMetadata});await t.saveClientInformation(c),i=c}if(n!==void 0){let c=await t.codeVerifier(),u=await Rjt(e,{metadata:r,clientInformation:i,authorizationCode:n,codeVerifier:c,redirectUri:t.redirectUrl});return await t.saveTokens(u),"AUTHORIZED"}let o=await t.tokens();if(o?.refresh_token)try{let c=await kjt(e,{metadata:r,clientInformation:i,refreshToken:o.refresh_token});return await t.saveTokens(c),"AUTHORIZED"}catch(c){console.error("Could not refresh OAuth tokens:",c)}let{authorizationUrl:a,codeVerifier:l}=await Sjt(e,{metadata:r,clientInformation:i,redirectUrl:t.redirectUrl});return await t.saveCodeVerifier(l),await t.redirectToAuthorization(a),"REDIRECT"}s(Xb,"auth");async function _jt(t,e){var n;let r=new URL("/.well-known/oauth-authorization-server",t),i;try{i=await fetch(r,{headers:{"MCP-Protocol-Version":(n=e?.protocolVersion)!==null&&n!==void 0?n:W6}})}catch(o){if(o instanceof TypeError)i=await fetch(r);else throw o}if(i.status!==404){if(!i.ok)throw new Error(`HTTP ${i.status} trying to load well-known OAuth metadata`);return tYe.parse(await i.json())}}s(_jt,"discoverOAuthMetadata");async function Sjt(t,{metadata:e,clientInformation:n,redirectUrl:r}){let i="code",o="S256",a;if(e){if(a=new URL(e.authorization_endpoint),!e.response_types_supported.includes(i))throw new Error(`Incompatible auth server: does not support response type ${i}`);if(!e.code_challenge_methods_supported||!e.code_challenge_methods_supported.includes(o))throw new Error(`Incompatible auth server: does not support code challenge method ${o}`)}else a=new URL("/authorize",t);let l=await Ahe(),c=l.code_verifier,u=l.code_challenge;return a.searchParams.set("response_type",i),a.searchParams.set("client_id",n.client_id),a.searchParams.set("code_challenge",u),a.searchParams.set("code_challenge_method",o),a.searchParams.set("redirect_uri",String(r)),{authorizationUrl:a,codeVerifier:c}}s(Sjt,"startAuthorization");async function Rjt(t,{metadata:e,clientInformation:n,authorizationCode:r,codeVerifier:i,redirectUri:o}){let a="authorization_code",l;if(e){if(l=new URL(e.token_endpoint),e.grant_types_supported&&!e.grant_types_supported.includes(a))throw new Error(`Incompatible auth server: does not support grant type ${a}`)}else l=new URL("/token",t);let c=new URLSearchParams({grant_type:a,client_id:n.client_id,code:r,code_verifier:i,redirect_uri:String(o)});n.client_secret&&c.set("client_secret",n.client_secret);let u=await fetch(l,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:c});if(!u.ok)throw new Error(`Token exchange failed: HTTP ${u.status}`);return yhe.parse(await u.json())}s(Rjt,"exchangeAuthorization");async function kjt(t,{metadata:e,clientInformation:n,refreshToken:r}){let i="refresh_token",o;if(e){if(o=new URL(e.token_endpoint),e.grant_types_supported&&!e.grant_types_supported.includes(i))throw new Error(`Incompatible auth server: does not support grant type ${i}`)}else o=new URL("/token",t);let a=new URLSearchParams({grant_type:i,client_id:n.client_id,refresh_token:r});n.client_secret&&a.set("client_secret",n.client_secret);let l=await fetch(o,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:a});if(!l.ok)throw new Error(`Token refresh failed: HTTP ${l.status}`);return yhe.parse(await l.json())}s(kjt,"refreshAuthorization");async function Bjt(t,{metadata:e,clientMetadata:n}){let r;if(e){if(!e.registration_endpoint)throw new Error("Incompatible auth server: does not support dynamic client registration");r=new URL(e.registration_endpoint)}else r=new URL("/register",t);let i=await fetch(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!i.ok)throw new Error(`Dynamic client registration failed: HTTP ${i.status}`);return nYe.parse(await i.json())}s(Bjt,"registerClient");var Che=class extends Error{static{s(this,"SseError")}constructor(e,n,r){super(`SSE error: ${n}`),this.code=e,this.event=r}},LY=class{static{s(this,"SSEClientTransport")}constructor(e,n){this._url=e,this._eventSourceInit=n?.eventSourceInit,this._requestInit=n?.requestInit,this._authProvider=n?.authProvider}async _authThenStart(){var e;if(!this._authProvider)throw new $d("No auth provider");let n;try{n=await Xb(this._authProvider,{serverUrl:this._url})}catch(r){throw(e=this.onerror)===null||e===void 0||e.call(this,r),r}if(n!=="AUTHORIZED")throw new $d;return await this._startOrAuth()}async _commonHeaders(){let e={};if(this._authProvider){let n=await this._authProvider.tokens();n&&(e.Authorization=`Bearer ${n.access_token}`)}return e}_startOrAuth(){return new Promise((e,n)=>{var r;this._eventSource=new cw(this._url.href,(r=this._eventSourceInit)!==null&&r!==void 0?r:{fetch:s((i,o)=>this._commonHeaders().then(a=>fetch(i,{...o,headers:{...a,Accept:"text/event-stream"}})),"fetch")}),this._abortController=new AbortController,this._eventSource.onerror=i=>{var o;if(i.code===401&&this._authProvider){this._authThenStart().then(e,n);return}let a=new Che(i.code,i.message,i);n(a),(o=this.onerror)===null||o===void 0||o.call(this,a)},this._eventSource.onopen=()=>{},this._eventSource.addEventListener("endpoint",i=>{var o;let a=i;try{if(this._endpoint=new URL(a.data,this._url),this._endpoint.origin!==this._url.origin)throw new Error(`Endpoint origin does not match connection origin: ${this._endpoint.origin}`)}catch(l){n(l),(o=this.onerror)===null||o===void 0||o.call(this,l),this.close();return}e()}),this._eventSource.onmessage=i=>{var o,a;let l=i,c;try{c=Yb.parse(JSON.parse(l.data))}catch(u){(o=this.onerror)===null||o===void 0||o.call(this,u);return}(a=this.onmessage)===null||a===void 0||a.call(this,c)}})}async start(){if(this._eventSource)throw new Error("SSEClientTransport already started! If using Client class, note that connect() calls start() automatically.");return await this._startOrAuth()}async finishAuth(e){if(!this._authProvider)throw new $d("No auth provider");if(await Xb(this._authProvider,{serverUrl:this._url,authorizationCode:e})!=="AUTHORIZED")throw new $d("Failed to authorize")}async close(){var e,n,r;(e=this._abortController)===null||e===void 0||e.abort(),(n=this._eventSource)===null||n===void 0||n.close(),(r=this.onclose)===null||r===void 0||r.call(this)}async send(e){var n,r,i;if(!this._endpoint)throw new Error("Not connected");try{let o=await this._commonHeaders(),a=new Headers({...o,...(n=this._requestInit)===null||n===void 0?void 0:n.headers});a.set("content-type","application/json");let l={...this._requestInit,method:"POST",headers:a,body:JSON.stringify(e),signal:(r=this._abortController)===null||r===void 0?void 0:r.signal},c=await fetch(this._endpoint,l);if(!c.ok){if(c.status===401&&this._authProvider){if(await Xb(this._authProvider,{serverUrl:this._url})!=="AUTHORIZED")throw new $d;return this.send(e)}let u=await c.text().catch(()=>null);throw new Error(`Error POSTing to endpoint (HTTP ${c.status}): ${u}`)}}catch(o){throw(i=this.onerror)===null||i===void 0||i.call(this,o),o}}};var FY=class extends Kb{constructor(n,r,i){super(n,r,i);this.transport=null}static{s(this,"MCPSSEServer")}initTransport(n){return new LY(new URL(n.url),n)}addListeners(){super.addListeners(),this.mcp.setNotificationHandler(V6,n=>{Oo.info(this.ctx,"Tool list changed, refreshing tools..."),du(this.ctx,{message:"Tool list changed, refreshing tools...",server:this.name}),this.emitter.emit(hy)}),this.mcp.setNotificationHandler(j6,n=>{Oo.info(this.ctx,"Prompts list changed, refreshing tools..."),du(this.ctx,{message:"Prompts list changed, refreshing tools...",server:this.name}),this.emitter.emit(hy)})}};f();f();var VYe=je(GYe(),1),J6=je(require("node:process"),1),$Ye=require("node:stream");f();var QY=class{static{s(this,"ReadBuffer")}append(e){this._buffer=this._buffer?Buffer.concat([this._buffer,e]):e}readMessage(){if(!this._buffer)return null;let e=this._buffer.indexOf(`
`);if(e===-1)return null;let n=this._buffer.toString("utf8",0,e).replace(/\r$/,"");return this._buffer=this._buffer.subarray(e+1),iVt(n)}clear(){this._buffer=void 0}};function iVt(t){return Yb.parse(JSON.parse(t))}s(iVt,"deserializeMessage");function jYe(t){return JSON.stringify(t)+`
`}s(jYe,"serializeMessage");var oVt=J6.default.platform==="win32"?["APPDATA","HOMEDRIVE","HOMEPATH","LOCALAPPDATA","PATH","PROCESSOR_ARCHITECTURE","SYSTEMDRIVE","SYSTEMROOT","TEMP","USERNAME","USERPROFILE"]:["HOME","LOGNAME","PATH","SHELL","TERM","USER"];function sVt(){let t={};for(let e of oVt){let n=J6.default.env[e];n!==void 0&&(n.startsWith("()")||(t[e]=n))}return t}s(sVt,"getDefaultEnvironment");var OY=class{static{s(this,"StdioClientTransport")}constructor(e){this._abortController=new AbortController,this._readBuffer=new QY,this._stderrStream=null,this._serverParams=e,(e.stderr==="pipe"||e.stderr==="overlapped")&&(this._stderrStream=new $Ye.PassThrough)}async start(){if(this._process)throw new Error("StdioClientTransport already started! If using Client class, note that connect() calls start() automatically.");return new Promise((e,n)=>{var r,i,o,a,l,c;this._process=(0,VYe.default)(this._serverParams.command,(r=this._serverParams.args)!==null&&r!==void 0?r:[],{env:(i=this._serverParams.env)!==null&&i!==void 0?i:sVt(),stdio:["pipe","pipe",(o=this._serverParams.stderr)!==null&&o!==void 0?o:"inherit"],shell:!1,signal:this._abortController.signal,windowsHide:J6.default.platform==="win32"&&aVt(),cwd:this._serverParams.cwd}),this._process.on("error",u=>{var d,p;if(u.name==="AbortError"){(d=this.onclose)===null||d===void 0||d.call(this);return}n(u),(p=this.onerror)===null||p===void 0||p.call(this,u)}),this._process.on("spawn",()=>{e()}),this._process.on("close",u=>{var d;this._process=void 0,(d=this.onclose)===null||d===void 0||d.call(this)}),(a=this._process.stdin)===null||a===void 0||a.on("error",u=>{var d;(d=this.onerror)===null||d===void 0||d.call(this,u)}),(l=this._process.stdout)===null||l===void 0||l.on("data",u=>{this._readBuffer.append(u),this.processReadBuffer()}),(c=this._process.stdout)===null||c===void 0||c.on("error",u=>{var d;(d=this.onerror)===null||d===void 0||d.call(this,u)}),this._stderrStream&&this._process.stderr&&this._process.stderr.pipe(this._stderrStream)})}get stderr(){var e,n;return this._stderrStream?this._stderrStream:(n=(e=this._process)===null||e===void 0?void 0:e.stderr)!==null&&n!==void 0?n:null}processReadBuffer(){for(var e,n;;)try{let r=this._readBuffer.readMessage();if(r===null)break;(e=this.onmessage)===null||e===void 0||e.call(this,r)}catch(r){(n=this.onerror)===null||n===void 0||n.call(this,r)}}async close(){this._abortController.abort(),this._process=void 0,this._readBuffer.clear()}send(e){return new Promise(n=>{var r;if(!(!((r=this._process)===null||r===void 0)&&r.stdin))throw new Error("Not connected");let i=jYe(e);this._process.stdin.write(i)?n():this._process.stdin.once("drain",n)})}};function aVt(){return"type"in J6.default}s(aVt,"isElectron");var UY=class extends Kb{constructor(n,r,i){super(n,r,i);this.transport=null}static{s(this,"MCPStdioServer")}initTransport(n){return n.env={...yze(),...n.env||{}},n.stderr="pipe",new OY(n)}addListeners(){super.addListeners(),this.transport&&this.transport.stderr&&this.transport.stderr.on("data",n=>{HT(this.ctx,{message:`[server stderr] ${n.toString().trimEnd()}`,server:this.name})})}};f();f();f();var qY=class extends TransformStream{static{s(this,"EventSourceParserStream")}constructor({onError:e,onRetry:n,onComment:r}={}){let i;super({start(o){i=BY({onEvent:s(a=>{o.enqueue(a)},"onEvent"),onError(a){e==="terminate"?o.error(a):typeof e=="function"&&e(a)},onRetry:n,onComment:r})},transform(o){i.feed(o)}})}};var lVt={initialReconnectionDelay:1e3,maxReconnectionDelay:3e4,reconnectionDelayGrowFactor:1.5,maxRetries:2},X6=class extends Error{static{s(this,"StreamableHTTPError")}constructor(e,n){super(`Streamable HTTP error: ${n}`),this.code=e}},WY=class{static{s(this,"StreamableHTTPClientTransport")}constructor(e,n){var r;this._url=e,this._requestInit=n?.requestInit,this._authProvider=n?.authProvider,this._sessionId=n?.sessionId,this._reconnectionOptions=(r=n?.reconnectionOptions)!==null&&r!==void 0?r:lVt}async _authThenStart(){var e;if(!this._authProvider)throw new $d("No auth provider");let n;try{n=await Xb(this._authProvider,{serverUrl:this._url})}catch(r){throw(e=this.onerror)===null||e===void 0||e.call(this,r),r}if(n!=="AUTHORIZED")throw new $d;return await this._startOrAuthSse({resumptionToken:void 0})}async _commonHeaders(){var e;let n={};if(this._authProvider){let r=await this._authProvider.tokens();r&&(n.Authorization=`Bearer ${r.access_token}`)}return this._sessionId&&(n["mcp-session-id"]=this._sessionId),new Headers({...n,...(e=this._requestInit)===null||e===void 0?void 0:e.headers})}async _startOrAuthSse(e){var n,r;let{resumptionToken:i}=e;try{let o=await this._commonHeaders();o.set("Accept","text/event-stream"),i&&o.set("last-event-id",i);let a=await fetch(this._url,{method:"GET",headers:o,signal:(n=this._abortController)===null||n===void 0?void 0:n.signal});if(!a.ok){if(a.status===401&&this._authProvider)return await this._authThenStart();if(a.status===405)return;throw new X6(a.status,`Failed to open SSE stream: ${a.statusText}`)}this._handleSseStream(a.body,e)}catch(o){throw(r=this.onerror)===null||r===void 0||r.call(this,o),o}}_getNextReconnectionDelay(e){let n=this._reconnectionOptions.initialReconnectionDelay,r=this._reconnectionOptions.reconnectionDelayGrowFactor,i=this._reconnectionOptions.maxReconnectionDelay;return Math.min(n*Math.pow(r,e),i)}_scheduleReconnection(e,n=0){var r;let i=this._reconnectionOptions.maxRetries;if(i>0&&n>=i){(r=this.onerror)===null||r===void 0||r.call(this,new Error(`Maximum reconnection attempts (${i}) exceeded.`));return}let o=this._getNextReconnectionDelay(n);setTimeout(()=>{this._startOrAuthSse(e).catch(a=>{var l;(l=this.onerror)===null||l===void 0||l.call(this,new Error(`Failed to reconnect SSE stream: ${a instanceof Error?a.message:String(a)}`)),this._scheduleReconnection(e,n+1)})},o)}_handleSseStream(e,n){if(!e)return;let{onresumptiontoken:r,replayMessageId:i}=n,o;s(async()=>{var l,c,u,d;try{let p=e.pipeThrough(new TextDecoderStream).pipeThrough(new qY).getReader();for(;;){let{value:m,done:h}=await p.read();if(h)break;if(m.id&&(o=m.id,r?.(m.id)),!m.event||m.event==="message")try{let g=Yb.parse(JSON.parse(m.data));i!==void 0&&G6(g)&&(g.id=i),(l=this.onmessage)===null||l===void 0||l.call(this,g)}catch(g){(c=this.onerror)===null||c===void 0||c.call(this,g)}}}catch(p){if((u=this.onerror)===null||u===void 0||u.call(this,new Error(`SSE stream disconnected: ${p}`)),this._abortController&&!this._abortController.signal.aborted&&o!==void 0)try{this._scheduleReconnection({resumptionToken:o,onresumptiontoken:r,replayMessageId:i},0)}catch(m){(d=this.onerror)===null||d===void 0||d.call(this,new Error(`Failed to reconnect: ${m instanceof Error?m.message:String(m)}`))}}},"processStream")()}async start(){if(this._abortController)throw new Error("StreamableHTTPClientTransport already started! If using Client class, note that connect() calls start() automatically.");this._abortController=new AbortController}async finishAuth(e){if(!this._authProvider)throw new $d("No auth provider");if(await Xb(this._authProvider,{serverUrl:this._url,authorizationCode:e})!=="AUTHORIZED")throw new $d("Failed to authorize")}async close(){var e,n;(e=this._abortController)===null||e===void 0||e.abort(),(n=this.onclose)===null||n===void 0||n.call(this)}async send(e,n){var r,i,o;try{let{resumptionToken:a,onresumptiontoken:l}=n||{};if(a){this._startOrAuthSse({resumptionToken:a,replayMessageId:yY(e)?e.id:void 0}).catch(y=>{var v;return(v=this.onerror)===null||v===void 0?void 0:v.call(this,y)});return}let c=await this._commonHeaders();c.set("content-type","application/json"),c.set("accept","application/json, text/event-stream");let u={...this._requestInit,method:"POST",headers:c,body:JSON.stringify(e),signal:(r=this._abortController)===null||r===void 0?void 0:r.signal},d=await fetch(this._url,u),p=d.headers.get("mcp-session-id");if(p&&(this._sessionId=p),!d.ok){if(d.status===401&&this._authProvider){if(await Xb(this._authProvider,{serverUrl:this._url})!=="AUTHORIZED")throw new $d;return this.send(e)}let y=await d.text().catch(()=>null);throw new Error(`Error POSTing to endpoint (HTTP ${d.status}): ${y}`)}if(d.status===202){Gze(e)&&this._startOrAuthSse({resumptionToken:void 0}).catch(y=>{var v;return(v=this.onerror)===null||v===void 0?void 0:v.call(this,y)});return}let h=(Array.isArray(e)?e:[e]).filter(y=>"method"in y&&"id"in y&&y.id!==void 0).length>0,g=d.headers.get("content-type");if(h)if(g?.includes("text/event-stream"))this._handleSseStream(d.body,{onresumptiontoken:l});else if(g?.includes("application/json")){let y=await d.json(),v=Array.isArray(y)?y.map(b=>Yb.parse(b)):[Yb.parse(y)];for(let b of v)(i=this.onmessage)===null||i===void 0||i.call(this,b)}else throw new X6(-1,`Unexpected content type: ${g}`)}catch(a){throw(o=this.onerror)===null||o===void 0||o.call(this,a),a}}get sessionId(){return this._sessionId}async terminateSession(){var e,n;if(this._sessionId)try{let r=await this._commonHeaders(),i={...this._requestInit,method:"DELETE",headers:r,signal:(e=this._abortController)===null||e===void 0?void 0:e.signal},o=await fetch(this._url,i);if(!o.ok&&o.status!==405)throw new X6(o.status,`Failed to terminate session: ${o.statusText}`);this._sessionId=void 0}catch(r){throw(n=this.onerror)===null||n===void 0||n.call(this,r),r}}};var HY=class extends Kb{constructor(n,r,i){super(n,r,i);this.transport=null}static{s(this,"MCPStreamableServer")}initTransport(n){return new WY(new URL(n.url),n)}addListeners(){super.addListeners(),this.mcp.setNotificationHandler(V6,n=>{Oo.info(this.ctx,"Tool list changed, refreshing tools..."),du(this.ctx,{message:"Tool list changed, refreshing tools...",server:this.name}),this.emitter.emit(hy)}),this.mcp.setNotificationHandler(j6,n=>{Oo.info(this.ctx,"Prompts list changed, refreshing tools..."),du(this.ctx,{message:"Prompts list changed, refreshing tools...",server:this.name}),this.emitter.emit(hy)})}};f();var GY=class extends _b{static{s(this,"McpLanguageModelTool")}constructor(e,n){super({...e,toolProvider:{id:e.serverName,displayNamePrefix:e.serverNamePrefix,displayName:e.serverName,description:e.serverName,isFirstPartyTool:!1},type:"mcp"}),this.invoker=n}prepareInvocation(e,n){let r={title:`Confirm MCP Tool: ${this.displayName} - ${this.toolProvider.displayName}(MCP Server)`,message:`Do you want to allow the external MCP tool "${this.toolProvider.displayName}/${this.displayName}" to run?`};return{progressMessage:`Running MCP tool: ${this.displayName} - ${this.toolProvider.displayName}(MCP Server)`,confirmationMessages:r}}async invoke(e,n,r){return await this.invoker(n.input)}async invokeConfirmation(e,n,r){if(r.isCancellationRequested)throw new Na;let i={name:this.name,title:n.title,message:n.message,input:n.input,conversationId:e.conversation.id,turnId:e.turn.id,roundId:n.roundId,toolCallId:n.toolCallId,annotations:n.annotations};try{return await e.ctx.get(tA).invokeClientToolConfirmation(e,i)}catch(o){throw new Error(`Failed to invoke client tool confirmation ${this.name}: ${String(o)}`)}}};var zYe=je(Za());var jY=class t extends gp{constructor(n){super();this.MCPServersMap=new Map;this.cachedMCPServerTools=[];this.updateToolsQueue=Promise.resolve();this.prefixGenerator=new cY;this.ctx=n}static{s(this,"CLSMCPManager")}static{this.notificationType=new zYe.ProtocolNotificationType("copilot/mcpTools")}async updateMCPServers(n){await this.clearAllServers();for(let r of Object.keys(n))await this.addServer({name:r,...n[r]});await this.updateToolsList()}getAllTools(){return this.cachedMCPServerTools}updateMCPToolStatus(n,r,i){let o=this.getTool(n,r),a=this.getServerPrefix(n);if(!o){Oo.error(this.ctx,`Not found MCP ${n} server ${r} tool`);return}o._status=i,i==="enabled"?this.ctx.get(su).getToolById(`${n}.${r}`)||this.registerTool(n,a,o):this.unregisterTool(n,r)}async callTool(n,r,i){let o=this.MCPServersMap.get(n);if(o){let{status:a,server:l}=o;if(a==="running"&&l)return await l.callTool(r,i)}throw new Error(`MCP server ${n} is not running`)}async updateToolsList(){return this.updateToolsQueue=this.updateToolsQueue.then(async()=>{await this.getAndCacheAllTools(),this.registerTools(),await this.notifyClient()}),this.updateToolsQueue}getTool(n,r){let o=this.getAllTools().find(a=>a.name===n)?.tools;return!o||o.length===0?null:o.find(a=>a.name===r)||null}async getAndCacheAllTools(){let n=[];for(let r of this.MCPServersMap.keys()){let i=this.MCPServersMap.get(r);try{if(i.status==="running"&&i.server){let o=await i.server.getToolsList();o.forEach(a=>{let l=a.name,c=this.getToolStatus(r,l);c&&(a._status=c)}),n.push({name:r,prefix:this.getServerPrefix(r),status:i.status,tools:o})}else i.status==="error"?n.push({name:r,prefix:this.getServerPrefix(r),status:i.status,tools:[],error:i.error}):n.push({name:r,prefix:this.getServerPrefix(r),status:i.status,tools:[]})}catch(o){let a=`Failed to get tools list for MCP server ${r}.`+(o instanceof Error?` message: ${o.message} stack: ${o.stack}`:String(o));Oo.error(this.ctx,a),await NA(this.ctx,{message:a,server:r}),n.push({name:r,prefix:this.getServerPrefix(r),status:i.status,tools:[],error:a})}}this.cachedMCPServerTools=n}getToolStatus(n,r){let i=this.getTool(n,r);return i?i._status:null}getServerPrefix(n){let i=this.getAllTools().find(o=>o.name===n);return i?i.prefix:this.prefixGenerator.generate(n)}async addServer(n){try{await du(this.ctx,{message:`Starting server ${n.name}`,server:n.name}),this.MCPServersMap.set(n.name,{status:"stopped",server:null});let r;n.type==="sse"?(r=new FY(this.ctx,n.name,n.version||"1.0.0"),await r.connect(n)):"url"in n?(r=new HY(this.ctx,n.name,n.version||"1.0.0"),await r.connect(n)):(r=new UY(this.ctx,n.name,n.version||"1.0.0"),await r.connect(n)),r.getEmitter().on(hy,()=>{this.updateToolsList()}),this.MCPServersMap.set(n.name,{status:"running",server:r}),await du(this.ctx,{message:"Connection state: Running",server:n.name})}catch(r){if(Oo.error(this.ctx,`Error initializing MCP server ${n.name}:`,r),r instanceof Error){let o=/Error POSTing to endpoint \(HTTP (\d+)\):/,a=r.message.match(o);if(a&&"url"in n&&n.type!=="sse"&&a[1]!=="401"&&Number(a[1])>=400&&Number(a[1])<500){let l=`${a[1]} status sending message to ${n.url}, will attempt to fall back to legacy SSE`;Oo.info(this.ctx,l),du(this.ctx,{message:l,server:n.name});let c={...n,type:"sse"};return await this.addServer(c)}}let i=r instanceof Error?`message: ${r.message} stack: ${r.stack}`:String(r);await NA(this.ctx,{message:i,server:n.name}),this.MCPServersMap.set(n.name,{status:"error",server:null,error:i}),this.ctx.get($a).showWarningMessageOnlyOnce(`${n.name}.initialize`,`Failed to initialize MCP server '${n.name}'. Please check the logs for more details.`)}}async notifyClient(){let n=this.getAllTools();await this.ctx.get(Cn).connection.sendNotification(t.notificationType,{servers:n})}registerTools(){for(let n of this.cachedMCPServerTools){let{name:r,prefix:i,tools:o}=n;for(let a of o)this.registerTool(r,i,a)}}registerTool(n,r,i){let{name:o,description:a,inputSchema:l,_status:c,_nameForModel:u,annotations:d}=i;Oo.debug(this.ctx,"register MCP Tool:",{...i}),c!=="disabled"&&this.ctx.get(su).registerTool(new GY({serverName:n,serverNamePrefix:r,name:u,displayName:o,description:a||"",displayDescription:a||"",inputSchema:l,annotations:d},p=>(Oo.debug(this.ctx,"copilot MCP Invoker:",n,o,p),this.callTool(n,o,p))))}unregisterAllTools(){for(let n of this.cachedMCPServerTools){let{name:r,tools:i}=n;for(let o of i){let{name:a}=o;this.unregisterTool(r,a)}}}unregisterTool(n,r){this.ctx.get(su).unregisterTool(`${n}.${r}`)}async clearAllServers(){this.unregisterAllTools();for(let n of this.MCPServersMap.keys()){let{status:r,server:i}=this.MCPServersMap.get(n);r==="running"&&i&&(await du(this.ctx,{message:`Stopping server ${n}`,server:n}),i.getEmitter().removeAllListeners(hy),await i.cleanup())}this.MCPServersMap.clear()}};f();var YYe=je(Za());var VY=class t extends Km{static{s(this,"CLSMCPRuntimeNotifier")}static{this.notificationType=new YYe.ProtocolNotificationType("copilot/mcpRuntimeLogs")}constructor(e){super(),this.ctx=e}async notifyLog(e){await this.ctx.get(Cn).connection.sendNotification(t.notificationType,{...e,time:Date.now()})}};f();var zY=je(Za());var cVt=new zY.ProtocolRequestType("copilot/showPanelMessageRequest"),uVt=new zY.ProtocolNotificationType("copilot/showPanelMessage"),$Y=class extends rR{constructor(n){super();this.ctx=n}static{s(this,"CopilotMessageSender")}async sendPanelMessageNotification(n){return this.ctx.get(Cn).connection.sendNotification(uVt,n)}async sendPanelMessageRequest(n){let r=this.ctx.get(Cn).connection,i;try{i=await r.sendRequest(cVt,n)}catch(l){throw new Error(`Request copilot/showPanelMessageRequest failed with message: ${s2(l)}`)}let[o,a]=i;if(a)throw new Error(`Request copilot/showPanelMessageRequest failed with code: ${a.code}, message: ${a.message}`);return o}};f();f();var dVt=new Tt("fetcher"),fVt="https://default.exp-tas.com/",YY=class extends Kr{constructor(n,r,i,o){super();this.ctx=n;this.defaultFetcher=r;this.fallbackFetcher=i;this.onFallbackSuccess=o}static{s(this,"FallbackFetcher")}async fetch(n,r){try{return await this.defaultFetcher.fetch(n,r)}catch(i){if(Fc(i)||`${n}/`.startsWith(fVt))throw i;dVt.info(this.ctx,`Request to <${n}> failed, attempting fallback.`,i);let o=await this.fallbackFetcher.fetch(n,r);return this.onFallbackSuccess(),o}}getImplementation(){return this.defaultFetcher.getImplementation()}get name(){return this.defaultFetcher.name}async disconnectAll(){return this.defaultFetcher.disconnectAll()}};var KYe=new Tt("fetcher"),KY=class extends Kr{constructor(n,r=new b3(n),i=new x3(n)){super();this.ctx=n;this.helixFetcher=r;this.editorFetcher=i;this.currentFetcher=this.helixFetcher,this.fallbackFetcher=new YY(n,r,i,()=>{KYe.info(this.ctx,"Fallback fetch succeeded, switching to editor fetcher."),this.currentFetcher=this.editorFetcher}),n.get(Ny).once(()=>{this.updateFetcher()}),n.get(uh).onConfigChange(wt.FetchStrategy,a=>{this.fetchStrategy=a,this.updateFetcher()}),this.fetchStrategy=Ai(n,wt.FetchStrategy)}static{s(this,"AgentDelegatingFetcher")}get editorFetcherCapability(){return this.ctx.get(Go).getCapabilities().fetch??!1}updateFetcher(){let n,r;if(!this.editorFetcherCapability)r="Using Helix fetcher, editor does not have fetch capability.",n=this.helixFetcher;else if(this.fetchStrategy==="client")r="Using editor fetcher, fetch strategy set to client.",n=this.editorFetcher;else if(this.fetchStrategy==="native")r="Using Helix fetcher, fetch strategy set to native.",n=this.helixFetcher;else{let i=Ai(this.ctx,wt.DebugUseEditorFetcher);i?.toString()==="true"?(r="Using editor fetcher, debug flag is enabled.",n=this.editorFetcher):i?.toString()==="false"?(r="Using Helix fetcher, debug flag is disabled.",n=this.helixFetcher):(r="Editor fetcher capability available, will fallback if needed.",n=this.fallbackFetcher)}this.currentFetcher!=n&&(KYe.debug(this.ctx,r),this.currentFetcher=n)}getImplementation(){return this.currentFetcher.getImplementation()}get name(){return this.currentFetcher.name}fetch(n,r){return this.currentFetcher.fetch(n,r)}async disconnectAll(){await Promise.all([this.helixFetcher.disconnectAll(),this.fallbackFetcher.disconnectAll()])}};f();var JY=class extends $a{constructor(n){super();this.ctx=n}static{s(this,"ConnectionNotificationSender")}get connection(){return this.ctx.get(Cn).connection}showWarningMessage(n,...r){return this.connection.window.showWarningMessage(n,...r)}};f();f();var JYe=je(require("crypto")),XYe=require("os");var pVt=new Set(["00:00:00:00:00:00","ff:ff:ff:ff:ff:ff","ac:de:48:00:11:22"]);function mVt(t){let e=t.replace(/-/g,":").toLowerCase();return!pVt.has(e)}s(mVt,"validateMacAddress");function hVt(){let t=(0,XYe.networkInterfaces)();for(let e in t){let n=t[e];if(n){for(let{mac:r}of n)if(mVt(r))return r}}throw new Error("Unable to retrieve mac address (unexpected format)")}s(hVt,"getMac");var Rhe;function gVt(){try{let t=hVt();return JYe.createHash("sha256").update(t,"utf8").digest("hex")}catch{return}}s(gVt,"getMacMachineId");function ZYe(){return Rhe||(Rhe=gVt()||an()),Rhe}s(ZYe,"getMachineId");var AVt=an()+Date.now(),eKe=new Ps(AVt,ZYe());f();f();var Z6=je(require("node:process"),1),qhe=require("node:buffer"),Whe=je(require("node:path"),1),CKe=require("node:url"),xKe=je(require("node:util"),1),Hhe=je(require("node:child_process"),1),dw=je(require("node:fs/promises"),1);f();var Nhe=je(require("node:process"),1),rKe=je(require("node:os"),1),iKe=je(require("node:fs"),1);f();var tKe=je(require("node:fs"),1);f();var Bhe=je(require("node:fs"),1);var khe;function yVt(){try{return Bhe.default.statSync("/.dockerenv"),!0}catch{return!1}}s(yVt,"hasDockerEnv");function CVt(){try{return Bhe.default.readFileSync("/proc/self/cgroup","utf8").includes("docker")}catch{return!1}}s(CVt,"hasDockerCGroup");function Phe(){return khe===void 0&&(khe=yVt()||CVt()),khe}s(Phe,"isDocker");var Dhe,xVt=s(()=>{try{return tKe.default.statSync("/run/.containerenv"),!0}catch{return!1}},"hasContainerEnv");function O3(){return Dhe===void 0&&(Dhe=xVt()||Phe()),Dhe}s(O3,"isInsideContainer");var nKe=s(()=>{if(Nhe.default.platform!=="linux")return!1;if(rKe.default.release().toLowerCase().includes("microsoft"))return!O3();try{return iKe.default.readFileSync("/proc/version","utf8").toLowerCase().includes("microsoft")?!O3():!1}catch{return!1}},"isWsl"),U3=Nhe.default.env.__IS_WSL_TEST__?nKe:nKe();f();function uw(t,e,n){let r=s(i=>Object.defineProperty(t,e,{value:i,enumerable:!0,writable:!0}),"define");return Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get(){let i=n();return r(i),i},set(i){r(i)}}),t}s(uw,"defineLazyProperty");f();var pKe=require("node:util"),ZY=je(require("node:process"),1),mKe=require("node:child_process");f();var oKe=require("node:util"),sKe=je(require("node:process"),1),aKe=require("node:child_process");var vVt=(0,oKe.promisify)(aKe.execFile);async function Lhe(){if(sKe.default.platform!=="darwin")throw new Error("macOS only");let{stdout:t}=await vVt("defaults",["read","com.apple.LaunchServices/com.apple.launchservices.secure","LSHandlers"]);return/LSHandlerRoleAll = "(?!-)(?<id>[^"]+?)";\s+?LSHandlerURLScheme = (?:http|https);/.exec(t)?.groups.id??"com.apple.Safari"}s(Lhe,"defaultBrowserId");f();f();var lKe=je(require("node:process"),1),cKe=require("node:util"),Fhe=require("node:child_process");var bVt=(0,cKe.promisify)(Fhe.execFile);async function uKe(t,{humanReadableOutput:e=!0}={}){if(lKe.default.platform!=="darwin")throw new Error("macOS only");let n=e?[]:["-ss"],{stdout:r}=await bVt("osascript",["-e",t,n]);return r.trim()}s(uKe,"runAppleScript");async function Mhe(t){return uKe(`tell application "Finder" to set app_path to application file id "${t}" as string
tell application "System Events" to get value of property list item "CFBundleName" of property list file (app_path & ":Contents:Info.plist")`)}s(Mhe,"bundleName");f();var dKe=require("node:util"),fKe=require("node:child_process");var EVt=(0,dKe.promisify)(fKe.execFile),IVt={AppXq0fevzme2pys62n3e0fbqa7peapykr8v:{name:"Edge",id:"com.microsoft.edge.old"},MSEdgeDHTML:{name:"Edge",id:"com.microsoft.edge"},MSEdgeHTM:{name:"Edge",id:"com.microsoft.edge"},"IE.HTTP":{name:"Internet Explorer",id:"com.microsoft.ie"},FirefoxURL:{name:"Firefox",id:"org.mozilla.firefox"},ChromeHTML:{name:"Chrome",id:"com.google.chrome"},BraveHTML:{name:"Brave",id:"com.brave.Browser"},BraveBHTML:{name:"Brave Beta",id:"com.brave.Browser.beta"},BraveSSHTM:{name:"Brave Nightly",id:"com.brave.Browser.nightly"}},XY=class extends Error{static{s(this,"UnknownBrowserError")}};async function Qhe(t=EVt){let{stdout:e}=await t("reg",["QUERY"," HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice","/v","ProgId"]),n=/ProgId\s*REG_SZ\s*(?<id>\S+)/.exec(e);if(!n)throw new XY(`Cannot find Windows browser in stdout: ${JSON.stringify(e)}`);let{id:r}=n.groups,i=IVt[r];if(!i)throw new XY(`Unknown browser ID: ${r}`);return i}s(Qhe,"defaultBrowser");var TVt=(0,pKe.promisify)(mKe.execFile),wVt=s(t=>t.toLowerCase().replaceAll(/(?:^|\s|-)\S/g,e=>e.toUpperCase()),"titleize");async function Ohe(){if(ZY.default.platform==="darwin"){let t=await Lhe();return{name:await Mhe(t),id:t}}if(ZY.default.platform==="linux"){let{stdout:t}=await TVt("xdg-mime",["query","default","x-scheme-handler/http"]),e=t.trim();return{name:wVt(e.replace(/.desktop$/,"").replace("-"," ")),id:e}}if(ZY.default.platform==="win32")return Qhe();throw new Error("Only macOS, Linux, and Windows are supported")}s(Ohe,"defaultBrowser");var _Vt=xKe.default.promisify(Hhe.default.execFile),Uhe=Whe.default.dirname((0,CKe.fileURLToPath)(importMetaUrlShim)),hKe=Whe.default.join(Uhe,"xdg-open"),{platform:q3,arch:gKe}=Z6.default,SVt=(()=>{let t="/mnt/",e;return async function(){if(e)return e;let n="/etc/wsl.conf",r=!1;try{await dw.default.access(n,dw.constants.F_OK),r=!0}catch{}if(!r)return t;let i=await dw.default.readFile(n,{encoding:"utf8"}),o=/(?<!#.*)root\s*=\s*(?<mountPoint>.*)/g.exec(i);return o?(e=o.groups.mountPoint.trim(),e=e.endsWith("/")?e:`${e}/`,e):t}})(),vKe=s(async()=>`${await SVt()}c/Windows/System32/WindowsPowerShell/v1.0/powershell.exe`,"getPowershellPathFromWsl");async function RVt(){let t=await vKe(),n=qhe.Buffer.from('(Get-ItemProperty -Path "HKCU:\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\http\\UserChoice").ProgId',"utf16le").toString("base64"),{stdout:r}=await _Vt(t,["-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand",n],{encoding:"utf8"}),i=r.trim(),o={ChromeHTML:"com.google.chrome",MSEdgeHTM:"com.microsoft.edge",FirefoxURL:"org.mozilla.firefox"};return o[i]?{id:o[i]}:{}}s(RVt,"getWindowsDefaultBrowserFromWsl");var AKe=s(async(t,e)=>{let n;for(let r of t)try{return await e(r)}catch(i){n=i}throw n},"pTryEach"),eK=s(async t=>{if(t={wait:!1,background:!1,newInstance:!1,allowNonzeroExitCode:!1,...t},Array.isArray(t.app))return AKe(t.app,l=>eK({...t,app:l}));let{name:e,arguments:n=[]}=t.app??{};if(n=[...n],Array.isArray(e))return AKe(e,l=>eK({...t,app:{name:l,arguments:n}}));if(e==="browser"||e==="browserPrivate"){let l={"com.google.chrome":"chrome","google-chrome.desktop":"chrome","org.mozilla.firefox":"firefox","firefox.desktop":"firefox","com.microsoft.msedge":"edge","com.microsoft.edge":"edge","com.microsoft.edgemac":"edge","microsoft-edge.desktop":"edge"},c={chrome:"--incognito",firefox:"--private-window",edge:"--inPrivate"},u=U3?await RVt():await Ohe();if(u.id in l){let d=l[u.id];return e==="browserPrivate"&&n.push(c[d]),eK({...t,app:{name:W3[d],arguments:n}})}throw new Error(`${u.name} is not supported as a default browser`)}let r,i=[],o={};if(q3==="darwin")r="open",t.wait&&i.push("--wait-apps"),t.background&&i.push("--background"),t.newInstance&&i.push("--new"),e&&i.push("-a",e);else if(q3==="win32"||U3&&!O3()&&!e){r=U3?await vKe():`${Z6.default.env.SYSTEMROOT||Z6.default.env.windir||"C:\\Windows"}\\System32\\WindowsPowerShell\\v1.0\\powershell`,i.push("-NoProfile","-NonInteractive","-ExecutionPolicy","Bypass","-EncodedCommand"),U3||(o.windowsVerbatimArguments=!0);let l=["Start"];t.wait&&l.push("-Wait"),e?(l.push(`"\`"${e}\`""`),t.target&&n.push(t.target)):t.target&&l.push(`"${t.target}"`),n.length>0&&(n=n.map(c=>`"\`"${c}\`""`),l.push("-ArgumentList",n.join(","))),t.target=qhe.Buffer.from(l.join(" "),"utf16le").toString("base64")}else{if(e)r=e;else{let l=!Uhe||Uhe==="/",c=!1;try{await dw.default.access(hKe,dw.constants.X_OK),c=!0}catch{}r=Z6.default.versions.electron??(q3==="android"||l||!c)?"xdg-open":hKe}n.length>0&&i.push(...n),t.wait||(o.stdio="ignore",o.detached=!0)}q3==="darwin"&&n.length>0&&i.push("--args",...n),t.target&&i.push(t.target);let a=Hhe.default.spawn(r,i,o);return t.wait?new Promise((l,c)=>{a.once("error",c),a.once("close",u=>{if(!t.allowNonzeroExitCode&&u>0){c(new Error(`Exited with code ${u}`));return}l(a)})}):(a.unref(),a)},"baseOpen"),kVt=s((t,e)=>{if(typeof t!="string")throw new TypeError("Expected a `target`");return eK({...e,target:t})},"open");function yKe(t){if(typeof t=="string"||Array.isArray(t))return t;let{[gKe]:e}=t;if(!e)throw new Error(`${gKe} is not supported`);return e}s(yKe,"detectArchBinary");function Ghe({[q3]:t},{wsl:e}){if(e&&U3)return yKe(e);if(!t)throw new Error(`${q3} is not supported`);return yKe(t)}s(Ghe,"detectPlatformBinary");var W3={};uw(W3,"chrome",()=>Ghe({darwin:"google chrome",win32:"chrome",linux:["google-chrome","google-chrome-stable","chromium"]},{wsl:{ia32:"/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe",x64:["/mnt/c/Program Files/Google/Chrome/Application/chrome.exe","/mnt/c/Program Files (x86)/Google/Chrome/Application/chrome.exe"]}}));uw(W3,"firefox",()=>Ghe({darwin:"firefox",win32:"C:\\Program Files\\Mozilla Firefox\\firefox.exe",linux:"firefox"},{wsl:"/mnt/c/Program Files/Mozilla Firefox/firefox.exe"}));uw(W3,"edge",()=>Ghe({darwin:"microsoft edge",win32:"msedge",linux:["microsoft-edge","microsoft-edge-dev"]},{wsl:"/mnt/c/Program Files (x86)/Microsoft/Edge/Application/msedge.exe"}));uw(W3,"browser",()=>"browser");uw(W3,"browserPrivate",()=>"browserPrivate");var tK=kVt;var nK=class extends pc{constructor(n,r=new jhe){super();this.ctx=n;this.fallback=r}static{s(this,"AgentUrlOpener")}async open(n){let r=this.ctx.get(Cn);if(!(r.clientCapabilities?.window?.showDocument?.support&&(await r.connection.window.showDocument({uri:n,external:!0})).success))return this.fallback.open(n)}},jhe=class extends pc{static{s(this,"SpawnUrlOpener")}async open(e){await tK(e)}};f();f();var rK=class extends Jj{static{s(this,"AgentWorkspaceWatcher")}async getWatchedFiles(){return(await this.ctx.get(dh).getWatchedFiles({workspaceUri:this.workspaceFolder.uri,workspaceFolder:this.workspaceFolder,excludeGitignoredFiles:!0,excludeIDEIgnoredFiles:!0})).watchedFiles}startWatching(){if(this.status==="ready")return;this.ctx.get(dh).onDidChangeWatchedFiles(this.onDidChangeWatchedFilesHandler.bind(this)),this.status="ready"}stopWatching(){this.status="stopped",this.ctx.get(dh).offDidChangeWatchedFiles(this.onDidChangeWatchedFilesHandler.bind(this))}onDidChangeWatchedFilesHandler(e){if(e.workspaceFolder.uri!==this.workspaceFolder.uri)return;let r=e.created.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);if(r.length){let a=r.map(l=>l.document).filter(l=>l!==void 0);this.onFilesCreated(a)}let i=e.changed.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);if(i.length){let a=i.map(l=>l.document).filter(l=>l!==void 0);this.onFilesUpdated(a)}let o=e.deleted.filter(a=>!a.isRestricted&&!a.isUnknownFileExtension);o.length&&this.onFilesDeleted(o.map(a=>({uri:a.uri})))}};var iK=class extends iu{static{s(this,"AgentWorkspaceWatcherProvider")}createWatcher(e){return new rK(this.ctx,e)}shouldStartWatching(e){return!!this.ctx.get(Go).getCapabilities().watchedFiles&&(!this.hasWatcher(e)||this.getStatus(e)==="stopped")}};function bKe(t){let e=new uh(process.env),n=LFe(e);n.set(uh,e),n.set(Ny,new Ny),n.set(Kr,new KY(n)),n.set(ta,new ta(n)),Hpe(n,{});let r=hTe();n.set(hc,r);let i=new N6(n);n.set(Gn,i),n.set(N6,i);let o=new II(n,r);n.set(II,o),n.set(_r,new _r(n,process.env)),n.set(ZI,new ZI),n.set(md,new md(n,"agent")),n.set(Ps,eKe),n.set(ur,new wV),n.set(WT,Y$e()),n.set(is,new is),n.set(po,Aze),n.set(g2,new $z(n)),n.set(iu,new iK(n)),n.set(dh,new dh(n)),n.set(Ql,new Ql),n.set(Ba,xU(n,Cje)),n.set(Xf,new Xf(n)),n.set(_g,new b5),WOe(n),Xj(n),sUe(n),fRe(n),n.set(Cn,new Cn(n,t)),n.set($a,new JY(n)),n.set(rR,new $Y(n)),n.set(pc,new nK(n)),n.set(Ji,new lY(n)),n.set(F6,new F6(n));let a=new Gb(n);return n.set(Nn,a),n.set(Gb,a),n.set(Tu,new nR(n,process.env)),n.set(Kc,new Kc(n)),uze(n),VFe(n),n.set($u,new $u),n.set(Ub,new Ub),n.set(gh,new gh),n.set(I0,new Yz),n.set(BA,new BA),n.set(Lm,new Yj(n)),n.set(Bg,new LR),n.set(lh,new lh(n)),n.set(my,new my(n)),n.set(il,new il(n)),n.set(Ec,new oY(n)),n.set(eb,new aY(n)),n.set(tA,new sY(n)),n.set(su,new su(n)),n.set(ky,new ky(n)),n.set(ch,new ch(n)),n.set(gp,new jY(n)),n.set(Km,new VY(n)),n.set(nA,new nA),n}s(bKe,"createLanguageServerContext");f();var Vhe=require("events"),eN=je(require("fs"));var sK=je(Za());f();var IKe=je(require("fs")),TKe=je(require("http")),H3=je(require("path"));var oK=class{constructor(e,n){this.port=e;let r;this.server=TKe.createServer((i,o)=>{if(i.headers.accept&&i.headers.accept=="text/event-stream")switch(o.writeHead(200,{"Content-Type":"text/event-stream","Cache-Control":"no-cache",Connection:"keep-alive"}),i.url){case"/stdin":n.on("read",l=>{EKe(o,JSON.stringify(l))});return;case"/stdout":n.on("write",l=>{EKe(o,JSON.stringify(l))});return;default:o.writeHead(404),o.end();return}o.writeHead(200,{"Content-Type":"text/html"});let a=__dirname;H3.basename(__dirname)!=="debug"&&(a=H3.dirname(__dirname)),r??=IKe.readFileSync(H3.join(a,"dist","debugServer.html")).toString(),o.write(r),o.end()}),this.server.on("error",i=>{console.error(i)})}static{s(this,"DebugServer")}listen(){return this.server.listen(this.port),this}getPort(){return this.server.address().port}};function EKe(t,e){t.write("data: "+e.toString().replace(/\n/g,`
data: `)+`

`)}s(EKe,"writeData");var $he=class extends sK.AbstractMessageWriter{constructor(n,r){super();this.delegate=n;this.ev=r}static{s(this,"DebugMessageWriter")}async write(n){return this.ev.emit("write",n),this.delegate.write(n)}end(){this.ev.emit("end"),this.delegate.end()}},zhe=class extends sK.AbstractMessageReader{constructor(n,r){super();this.delegate=n;this.ev=r}static{s(this,"DebugMessageReader")}listen(n){return this.delegate.listen(r=>{this.ev.emit("read",r),n(r)})}};async function wKe(t,e,n){let r,i=parseInt(t.GH_COPILOT_DEBUG_UI_PORT??t.GITHUB_COPILOT_DEBUG_UI_PORT);if(!isNaN(i)){r??=new Vhe.EventEmitter;let l=new oK(i,r).listen();i===0&&await tK(`http://localhost:${l.getPort()}`)}let o=t.GITHUB_COPILOT_RECORD??"",a;try{let l=Date.now().toString();o==="1"||o==="true"?a=eN.openSync(`stdio${l}.log`,"w"):o&&o!=="0"&&o!=="false"&&(a=eN.openSync(o.replaceAll("%s",l),"w"))}catch(l){console.error(l)}if(a){let l=s(c=>{a&&eN.appendFile(a,c,u=>{u&&(a=void 0,console.error(u))})},"log");r??=new Vhe.EventEmitter,r.on("read",c=>l(`<-- ${JSON.stringify(c)}
`)),r.on("write",c=>l(`--> ${JSON.stringify(c)}
`))}return r&&(e=new zhe(e,r),n=new $he(n,r)),[e,n]}s(wKe,"wrapTransports");async function RKe(){let t=X_e(process.argv.slice(2)).version(new zi().getDisplayVersion()).strict().option("debug",{type:"boolean",hidden:!0}).option("clientProcessId",{type:"string",hidden:!0}).option("stdio",{type:"boolean",describe:"Use stdio"});"pkg"in process||t.option("node-ipc",{type:"boolean",describe:"Use node IPC",conflicts:"stdio"});let e=await t.parse(),n,r;e["node-ipc"]?(n=new Np.IPCMessageReader(process),r=new Np.IPCMessageWriter(process)):e.stdio?(n=new Np.StreamMessageReader(process.stdin),r=new Np.StreamMessageWriter(process.stdout)):(console.error("error: required option '--stdio' not specified"),process.exit(1)),"pkg"in process&&process.platform!=="win32"&&(process.env.TMPDIR=await Zy.mkdtemp(_Ke.default.tmpdir()+"/github-copilot-"));try{let l=$te(),c=JSON.parse(await Zy.readFile(tN.join(l,"hosts.json"),"utf8")),u={};try{u=JSON.parse(await Zy.readFile(tN.join(l,"apps.json"),"utf8"))}catch{}let d=!1;for(let p of Object.keys(c)){let m=`${p}:${ym}`;u[m]||!c[p].user||!c[p].oauth_token||(u[m]={user:c[p].user,oauth_token:c[p].oauth_token,githubAppId:ym},d=!0)}d&&await Zy.writeFile(tN.join(l,"apps.json"),JSON.stringify(u)+`
`,"utf8"),await Zy.rm(tN.join(l,"hosts.json"),{force:!0})}catch{}let i=(0,Np.createConnection)(Np.ProposedFeatures.all,...await wKe(process.env,n,r)),o=bKe(i);console=ewe(o);let a=o.get(Cn);n.onClose(()=>a.onExit()),process.on("SIGINT",()=>{a.onExit().finally(()=>process.exit(130)).catch(()=>{})}),process.on("SIGTERM",()=>{a.onExit().finally(()=>process.exit(143)).catch(()=>{})}),a.listen()}s(RKe,"main");SKe.isMainThread?require.main===module&&RKe():XTe()&&ZTe();0&&(module.exports={getTokenizer,getTokenizerAsync,main});
//!!! DO NOT modify, this file was COPIED from 'microsoft/vscode'
/*! Bundled license information:

crypto-js/ripemd160.js:
  (** @preserve
  	(c) 2012 by Cédric Mesnil. All rights reserved.
  
  	Redistribution and use in source and binary forms, with or without modification, are permitted provided that the following conditions are met:
  
  	    - Redistributions of source code must retain the above copyright notice, this list of conditions and the following disclaimer.
  	    - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following disclaimer in the documentation and/or other materials provided with the distribution.
  
  	THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  	*)

crypto-js/mode-ctr-gladman.js:
  (** @preserve
   * Counter block mode compatible with  Dr Brian Gladman fileenc.c
   * derived from CryptoJS.mode.CTR
   * Jan Hruby jhruby.web@gmail.com
   *)

@microsoft/applicationinsights-common/dist/es5/applicationinsights-common.js:
  (*!
   * Application Insights JavaScript SDK - Common, 3.3.6
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)

@microsoft/applicationinsights-web-basic/dist/es5/applicationinsights-web-basic.js:
  (*!
   * Application Insights JavaScript Web SDK - Basic, 3.3.6
   * Copyright (c) Microsoft and contributors. All rights reserved.
   *)
  (*! https://github.com/nevware21/ts-utils v0.11.8 *)
  (*!
   * NevWare21 Solutions LLC - ts-async, 0.5.4
   * https://github.com/nevware21/ts-async
   * Copyright (c) NevWare21 Solutions LLC and contributors. All rights reserved.
   * Licensed under the MIT license.
   *)

git-url-parse/lib/index.js:
  (*!
   * buildToken
   * Builds OAuth token prefix (helper function)
   *
   * @name buildToken
   * @function
   * @param {GitUrl} obj The parsed Git url object.
   * @return {String} token prefix
   *)

undici/lib/web/fetch/body.js:
  (*! formdata-polyfill. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> *)

undici/lib/web/websocket/frame.js:
  (*! ws. MIT License. Einar Otto Stangvik <einaros@gmail.com> *)

@vscode/prompt-tsx/dist/base/util/vs/nls.js:
@vscode/prompt-tsx/dist/base/util/vs/common/platform.js:
@vscode/prompt-tsx/dist/base/util/vs/common/process.js:
@vscode/prompt-tsx/dist/base/util/vs/common/path.js:
@vscode/prompt-tsx/dist/base/util/vs/common/uri.js:
  (*!!! DO NOT modify, this file was COPIED from 'microsoft/vscode' *)

yargs-parser/build/lib/string-utils.js:
yargs-parser/build/lib/tokenize-arg-string.js:
yargs-parser/build/lib/yargs-parser-types.js:
yargs-parser/build/lib/yargs-parser.js:
  (**
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

yargs-parser/build/lib/index.js:
  (**
   * @fileoverview Main entrypoint for libraries using yargs-parser in Node.js
   * CJS and ESM environments.
   *
   * @license
   * Copyright (c) 2016, Contributors
   * SPDX-License-Identifier: ISC
   *)

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
//# sourceMappingURL=main.js.map
